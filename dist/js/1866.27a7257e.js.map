{"version":3,"file":"js/1866.27a7257e.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/assets/bincard.vue","webpack://cork-vue3/./src/views/assets/bincard.vue?1e99"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Assets</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Fuel Cards </span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <h5 class=\"text-center\" v-if=\"bincard\">FUEL MANAGEMENT FILE FOR  {{ bincard.asset.name }} {{ bincard.asset.type_name }}</h5>\r\n\r\n           <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n                             <button \r\n                                class=\"btn btn-primary refresh-btn rounded-circle p-2 me-2\" \r\n                                @click=\"getAssetBincard()\" \r\n                                title=\"Refresh page\"\r\n                                :class=\"{ 'spin-animation': loading}\"\r\n                                :disabled=\"loading\"\r\n                                style=\"width: 2.5rem; height: 2.5rem;\"\r\n                            >\r\n                            <span v-if=\"loading\" v-html=\"loadingSpinner()\">\r\n\r\n                            </span>\r\n                                <svg \r\n                                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                                    width=\"16\" \r\n                                    height=\"16\" \r\n                                    fill=\"currentColor\" \r\n                                    class=\"bi bi-arrow-clockwise\" \r\n                                    viewBox=\"0 0 16 16\"\r\n                                >\r\n                                    <path fill-rule=\"evenodd\" d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\"/>\r\n                                    <path d=\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\"/>\r\n                                </svg>\r\n                            </button>\r\n\r\n                            <button \r\n                            v-if=\"user_permissions.includes('can_register_asset_bincard')\"\r\n                            class=\"btn btn-primary me-2 \" @click=\"register_bincard =! register_bincard\">                           \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n  <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n</svg>\r\n</button>\r\n                            <button class=\"btn btn-success \"\r\n                             @click=\"printBinCard(route.params.asset_id)\" \r\n                             v-if=\"user_permissions.includes('can_print_asset_bincard')\"\r\n                            >                           \r\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n  <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>\r\n\r\n       \r\n         <!-- bincardTransactions registration form starts -->\r\n <form v-if=\"register_bincard\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerAssetBincardTransaction()\">\r\n        <h4 class=\"text-center\">REGISTER NEW RECORD</h4>\r\n        <div class=\"row mb-2\">\r\n    \r\n            <div class=\"col-md-2\">\r\n                <label class=\"form-label\">Date</label>\r\n                <input type=\"date\" class=\"form-control\" v-model=\"date\" required>\r\n            </div>\r\n  <div class=\"col-md-2\">\r\n     <label class=\"form-label\">Operation</label>\r\n            <Multiselect \r\n        v-model=\"direction\"\r\n        :options=\"directions\" \r\n        label=\"name\"  \r\n        placeholder=\"Select An Operation\"\r\n        :searchable=\"true\"\r\n        :close-on-select=\"true\"\r\n        required\r\n      />    \r\n  </div>\r\n\r\n\r\n            <div class=\"col-md-2\">\r\n                <label class=\"form-label\"> {{direction.name}} Amount  (LTs)</label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Amount\" v-model=\"quantity\" required step=\"any\">\r\n            </div>\r\n\r\n                        <div class=\"col-md-2\">\r\n                <label class=\"form-label\"> Rate (Tsh)</label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Rate\" v-model=\"rate\" required step=\"any\">\r\n            </div>\r\n\r\n                        \r\n                        <div class=\"col-md-2\">\r\n                <label class=\"form-label\">Initial Odometer Reading</label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Initial Reading\" v-model=\"initial_reading\" required step=\"any\">\r\n            </div>\r\n\r\n\r\n            <div class=\"col-md-2\">\r\n                <label class=\"form-label\">Expected Ratio</label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Expected Ratio\" v-model=\"ratio\" required  step=\"any\">\r\n            </div>\r\n\r\n            <div class=\"col-md-3\">\r\n                <label class=\"form-label\">Work Target </label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Work Target\" v-model=\"work_target\" required>\r\n            </div>\r\n\r\n            <div class=\"col-md-3\">\r\n                <label class=\"form-label\">Work Unit</label>\r\n  <Multiselect \r\n        v-model=\"unit\"\r\n        :options=\"units\" \r\n        label=\"short_name\"  \r\n        placeholder=\"Select Unit\"\r\n        :searchable=\"true\"\r\n        :close-on-select=\"true\"\r\n        required\r\n      />    \r\n            </div>\r\n\r\n            <div class=\"col-md-6\">\r\n                <label class=\"form-label\">Task</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter Task\" v-model=\"task\" step=\"any\" required>\r\n            </div>\r\n\r\n              <div class=\"col-md-12\">\r\n                <label class=\"form-label\">Enter Remark</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter Any Remark Concerning work or ratio variation\" v-model=\"description\" >\r\n            </div>\r\n\r\n        </div>\r\n          \r\n\r\n        <div class=\"text-center gap-2 justify-content-end\">\r\n            <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"register_bincard = false; resetForm();\">Cancel</button>\r\n            <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading\">\r\n                <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n                <span v-else>Register</span>\r\n            </button>\r\n        </div>\r\n    </form>\r\n             <!-- bincardTransactions registration form ends-->\r\n\r\n\r\n\r\n              <!-- loading spinner starts -->\r\n        <div v-if=\"loading\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                       <div class=\"table-responsive\">\r\n    <table class=\"table table-striped table-hover align-middle\">\r\n        <thead class=\"table-dark\">\r\n            <tr>\r\n                <th>Sno</th>\r\n                <th>Date</th>\r\n                <th>Action</th>\r\n                <th>Quantity</th>\r\n                <th>Task</th>\r\n                <th>Initial Reading</th>\r\n                <th>Final Reading</th>\r\n                <th>Expected Ratio</th>\r\n                <th>Work Target</th>\r\n                <th>Work Covered</th>\r\n                <th>Balance</th>\r\n                <th>Cost</th>\r\n                <th class=\"text-center\">Actions</th>\r\n            </tr>\r\n        </thead>\r\n      <tbody>\r\n    <template v-for=\"(transaction, index) in bincardTransactions\" :key=\"transaction.id\">\r\n\r\n        <tr>\r\n            <td>{{ index + 1 }}</td>\r\n            <td>{{ transaction.date }}</td>\r\n            <td>{{ transaction.action }}</td>\r\n            <td>{{ transaction.quantity }}</td>\r\n            <td>{{ transaction.task }}</td>\r\n            <td>{{ transaction.initial_reading }}</td>\r\n            <td>{{ transaction.final_reading }}</td>\r\n            <td>{{ transaction.expected_ratio }}</td>\r\n            <td>{{ transaction.work_target }} {{ transaction.unit }}</td>\r\n            <td>{{ transaction.work_covered ?? 0 }} {{ transaction.unit }}</td>\r\n            <td>{{ transaction.balance }}</td>\r\n            <td>{{ transaction.cost }}</td>\r\n            <td class=\"text-center\">\r\n                <a\r\n                    href=\"javascript:;\"\r\n                    class=\"edit me-2\"\r\n                    @click=\"openEditModal(transaction)\"\r\n                    data-bs-toggle=\"modal\"\r\n                    :data-bs-target=\"'#bincardTransactions-edit-modal'\"\r\n                >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"\r\n                        viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n                        stroke-width=\"1.5\" stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\" class=\"text-success\">\r\n                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                </a>\r\n            </td>\r\n        </tr>\r\n\r\n        <tr v-if=\"transaction.description\">\r\n            <td colspan=\"1\">\r\n\r\n            </td>\r\n            <td colspan=\"11\" class=\"bg-white text-danger\">\r\n                <strong>Remark:</strong> <i>{{ transaction.description }}</i>\r\n            </td>\r\n        </tr>\r\n\r\n    </template>\r\n</tbody>\r\n\r\n    </table>\r\n</div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n             <!-- Edit bincardTransactions modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"bincardTransactions-edit-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"bincardTransactionsEditModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-md\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"bincardTransactionsEditModalLabel\">Update Work Covered</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"  id=\"close_editing\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateRecord()\">\r\n        <div class=\"modal-body\">\r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-md-6\">\r\n              <label class=\"form-label\">Final Reading</label>\r\n              <input type=\"text\" placeholder=\"Enter FInal Reading\" class=\"form-control\" v-model=\"final_reading\" required>\r\n            </div>\r\n           \r\n             <div class=\"col-md-6\">\r\n              <label class=\"form-label\">Work Covered (KM)</label>\r\n              <input type=\"number\" class=\"form-control\" placeholder=\"Enter Work Covered\" v-model=\"work_covered\" step=\"any\" required >\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"resetForm()\" id=\"close_editing\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading\">\r\n            <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span v-else>Update</span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Edit bincardTransactions modal ends -->\r\n\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n     import { useRoute } from 'vue-router';\r\n    useMeta({ title: 'Asset Fuel Manager' });  \r\n    const route = useRoute();\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const tableShimmer = inject('tableShimmer');JSON.parse(localStorage.getItem(\"user\"))\r\n    const loadingSpinner = inject('loadingSpinner'); \r\n    const formatNumber = inject('formatNumber')\r\n    const register_bincard = ref(false);\r\n    const printBinCard =inject('printBinCard')\r\n    const columns = ref( ['Sno','date','action','quantity','task','initial_reading','final_reading','expected_ratio','work_target','work_covered','balance','cost','actions']);    \r\n    const bincardTransactions = ref([]);\r\n\r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['Sno','date', 'fuel_required','distance_cover','expected_ratio','expected_trips','trips_covered','fuel_balance',],        \r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n\r\n    const bincard = ref('')\r\n    const getAssetBincard = async () => {\r\n        loading.value = true;\r\n        try {\r\n            const response = await axiosInstance.get(`asset-bincards?asset_id=${route.params.asset_id}`);\r\n            bincard.value = response.data\r\n            bincardTransactions.value = response.data.transactions.map((item,index)=>({\r\n         Sno: index + 1,\r\n...item,\r\nquantity :item.quantity + ' Ltr',\r\nbalance : item.balance + ' Ltr',\r\ncost : formatNumber(item.quantity * item.rate),\r\nexpected_ratio : item.ratio + ' ' + response.data.asset.consuption_type,\r\nreading_difference:\r\n  (item.final_reading - item.initial_reading) >= 0\r\n    ? (item.final_reading - item.initial_reading) + ' ' + response.data.asset.consuption_type\r\n    : '---'\r\n            }\r\n            ))\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }finally{\r\n            loading.value = false;\r\n        }\r\n    };\r\n\r\n      const units = ref([])\r\n      const unit = ref('')\r\n      const getUnits = async () => {\r\n        loading.value = true;\r\n        const response = await axiosInstance.get('units')\r\n        units.value = response.data\r\n    };\r\n\r\n\r\n    const loading = ref(false);\r\n    const description = ref('')\r\n    const initial_reading = ref('')\r\n    const ratio = ref('')\r\n    const rate =ref('')\r\n    const date = ref('')\r\n    const work_target = ref('')\r\n    const quantity = ref('')\r\n    const task = ref('')\r\nconst registerAssetBincardTransaction = async () => {\r\n    loading.value = true;\r\n    const payload = {\r\n       asset_bincard_id: bincard.value.id,\r\n       registrar_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n       direction: direction.value.id,\r\n       unit: unit.value.short_name,\r\n       action : `${direction.value.id === 'INCREMENT' ? 'Received' : 'Issued'}`,\r\n       description : description.value,\r\n       task: task.value,\r\n       quantity: quantity.value,\r\n       date: date.value,\r\n       ratio: ratio.value,\r\n       rate : rate.value,\r\n       work_target: work_target.value,\r\n       initial_reading: initial_reading.value,\r\n    };\r\n\r\n    try {\r\n        const response = await axiosInstance.post('asset-bincard-transactions', payload);\r\n        getAssetBincard();\r\n        showMessage('Record registered successfully!');\r\n        resetForm();\r\n    } catch (error) {\r\n        console.log(error);\r\n        showError(error.message);\r\n    } finally {\r\n        loading.value = false;\r\n    }\r\n};\r\n\r\nconst resetForm = () => {\r\n     register_bincard.value = false;\r\n    direction.value = ''\r\n    task.value = ''\r\n    quantity.value = ''\r\n    date.value = ''\r\n    ratio.value = ''\r\n    work_target.value = ''\r\n    description.value = ''\r\n    initial_reading.value = ''\r\n};\r\n\r\n\r\nconst editId = ref(null);\r\nconst final_reading = ref('')\r\nconst openEditModal = (row) => {\r\n    work_covered.value = row.work_covered\r\n    editId.value = row.id\r\n    if(row.final_reading === null){\r\n        final_reading.value = row.initial_reading\r\n    }else{\r\n     final_reading.value = row.final_reading\r\n    }\r\n console.log(row.final_reading)\r\n};\r\n\r\n   const work_covered = ref('')\r\n   const updateRecord = async () => {\r\n    loading.value = true; \r\n    const payload = {\r\n        work_covered : work_covered.value,\r\n        final_reading : final_reading.value\r\n    };\r\n\r\n    try {\r\n        const response = await axiosInstance.put(`asset-bincard-transactions/${editId.value}`, payload);\r\n        getAssetBincard();\r\n        showMessage('Record updated successfully!');\r\n        document.getElementById('close_editing').click();\r\n    } catch (error) {\r\n      console.log(error);\r\n        showError(error.message);\r\n    } finally {\r\n        loading.value = false;\r\n    }\r\n};\r\n\r\n\r\nconst direction = ref('')\r\nconst directions = ref([\r\n    {\r\n        id : 'INCREMENT',\r\n        name : 'Received'\r\n    },\r\n\r\n      {\r\n        id : 'DECREMENT',\r\n        name : 'Issuing'\r\n    },\r\n\r\n])\r\nconst isRefreshing = ref(false)\r\n\r\n    \r\n    onMounted(() => {\r\n        getAssetBincard();\r\n        getUnits()\r\n    });\r\n</script>","import script from \"./bincard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./bincard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./bincard.vue?vue&type=style&index=0&id=50b4e33e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","route","useRoute","showMessage","inject","showError","user_permissions","JSON","parse","localStorage","getItem","permissions","tableShimmer","loadingSpinner","formatNumber","register_bincard","ref","printBinCard","bincardTransactions","axiosInstance","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axios","baseURL","process","bincard","getAssetBincard","async","loading","value","response","get","params","asset_id","data","transactions","map","item","index","Sno","quantity","balance","cost","rate","expected_ratio","ratio","asset","consuption_type","reading_difference","final_reading","initial_reading","error","message","units","unit","getUnits","description","date","work_target","task","registerAssetBincardTransaction","payload","asset_bincard_id","id","registrar_id","direction","short_name","action","post","resetForm","console","log","editId","openEditModal","row","work_covered","updateRecord","put","document","getElementById","click","directions","name","onMounted","__exports__"],"sourceRoot":""}