"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5826],{15826:function(e,s,a){a.r(s),a.d(s,{default:function(){return ce}});a(26699);var l=a(66252),t=a(49963),r=a(3577),i=a(2262),n=a(87066),o=a(56296);const c={class:"layout-px-spacing"},u=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>roles</span></li></ol></nav></div></li></ul>',1),d={class:"d-flex me-4 mt-2"},p={class:"ms-auto"},m=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),v=[m],g={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"100px"}},h=(0,l._)("span",{class:"text-primary spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",class:"bi bi-arrow-repeat",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z"}),(0,l._)("path",{d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z"}),(0,l._)("path",{d:"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z"})]),(0,l.Uk)(" Loading... ")],-1),w=[h],b={class:"row layout-top-spacing"},_={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},f={class:"panel p-0"},y={class:"row"},x=["onSubmit"],k=(0,l._)("h4",{class:"text-center"},"ROLE REGISTRATION FORM",-1),M={class:"row mb-2"},C={class:"col-md-3"},z=(0,l._)("label",{class:"form-label"},"Role Name",-1),D={class:"col-md-9"},H=(0,l._)("label",{class:"form-label"},"Role Description",-1),E={class:"text-center gap-2 justify-content-end"},N=(0,l._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),j={class:"d-flex justify-content-center mb-3"},A={class:"input-group input-group-md",style:{width:"700px"}},R=(0,l._)("span",{class:"input-group-text"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})])],-1),S={class:"col-md-6"},V={class:"card mb-3"},U={class:"card-header"},q={class:"card-title"},I={class:"card-subtitle text-muted mb-0"},L={class:"card-body text-start"},O={class:"d-flex"},B=["onClick"],Y=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),G=[Y],$=(0,l._)("div",{class:"text-center"},[(0,l._)("u",null,"PERMISSIONS")],-1),F=["onClick"],P={key:0},J={key:1},Q={key:0,class:"mt-2 mb-3"},K={class:"input-group input-group-sm mb-2"},T=(0,l._)("span",{class:"input-group-text"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})])],-1),W=["onUpdate:modelValue"],Z={key:1,class:"ps-3 list-unstyled mt-2"},X=["onClick"],ee={key:1,class:"text-danger ps-3 mt-2"},se={key:0},ae={class:"mt-2 mb-3"},le={class:"input-group input-group-sm mb-2"},te=(0,l._)("span",{class:"input-group-text"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})])],-1),re=["onUpdate:modelValue"],ie=["onClick"];var ne={setup(e){(0,o.j)({title:"Custom Table"});const s=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),a=(0,i.iH)([]),m=(0,i.iH)(""),h=(0,i.iH)(!1),Y=(0,i.iH)([]),ne=(0,i.iH)(!1),oe=(0,i.iH)(""),ce=(0,l.f3)("showMessage"),ue=(0,l.f3)("showError"),de=(0,l.f3)("whatsappAlert"),pe=(0,i.iH)({}),me=(0,i.iH)({}),ve=(0,i.iH)({}),ge=(0,i.iH)({}),he=(0,i.iH)({}),we=e=>{pe.value[e]=!pe.value[e]},be=e=>!0===pe.value[e],_e=e=>Y.value.filter((s=>!e.permissions.some((e=>e.id===s.id)))),fe=(e,s)=>{e.permissions.some((e=>e.id===s.id))||(e.permissions.push({...s}),Me(e,s))},ye=(e,l,t,r)=>{a.value[t].permissions.splice(r,1),s.delete(`/role-permission/${e.id}/${l.id}`).then((s=>{ce(s.data.message);const a=JSON.parse(localStorage.getItem("user")).name+" removed permmission "+l.name+" from "+e.name,t="255698267662",r="wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA=";de(a,r,t)}))},xe=()=>{h.value=!0,s.get("/roles").then((e=>{a.value=e.data,h.value=!1})).catch((e=>{ue(e.message),h.value=!1,console.error("Error fetching roles:",e.message)}))},ke=()=>{h.value=!0,s.get("/permission").then((e=>{Y.value=e.data,h.value=!1})).catch((e=>{ue(e.message),h.value=!1,console.error("Error fetching roles:",e.message)}))},Me=(e,a)=>{const l={role_id:e.id,permission_id:a.id};s.post("/role-permission",l).then((s=>{ce("Permission Added successfully!");const l=JSON.parse(localStorage.getItem("user")).name+" added permmission "+a.name+" to "+e.name,t="255698267662",r="wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA=";de(l,r,t),m.value="",oe.value=""})).catch((e=>{ue(e.message),console.error("Error registering Permission:",e)}))},Ce=(e,s)=>{const a=_e(e),l=me.value[s]||"",t=ve.value[s]||"";return a.filter((e=>{const s=e.name.toLowerCase().includes(l.toLowerCase()),a=""===t||e.category===t;return s&&a}))},ze=(e,s)=>{if(!e.permissions)return[];if(!ge.value[s]||!ge.value[s].trim())return e.permissions;const a=ge.value[s].toLowerCase();return e.permissions.filter((e=>e.name.toLowerCase().includes(a)))},De=(e,s)=>e.permissions?e.permissions.findIndex((e=>e.id===s)):-1,He=e=>{if(!a.value)return[];if(!he.value[e]||!he.value[e].trim())return a.value;const s=he.value[e]||"";return a.value.filter((e=>{const a=e.name.toLowerCase().includes(s.toLowerCase());return a}))},Ee=()=>{ne.value=!1,h.value=!0;const e={name:m.value,description:oe.value};s.post("/roles",e).then((e=>{xe(),h.value=!1,ce("role registered successfully!"),m.value="",oe.value=""})).catch((e=>{ue(e.message),h.value=!1,console.error("Error registering Order:",e.message)}))};return(0,l.bv)((()=>{xe(),ke()})),(e,s)=>((0,l.wg)(),(0,l.iD)("div",c,[u,(0,l._)("div",d,[(0,l._)("div",p,[(0,l._)("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=e=>ne.value=!ne.value)},v)])]),h.value?((0,l.wg)(),(0,l.iD)("div",g,w)):(0,l.kq)("",!0),(0,l._)("div",b,[(0,l._)("div",_,[(0,l._)("div",f,[(0,l._)("div",y,[ne.value?((0,l.wg)(),(0,l.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,t.iM)(Ee,["prevent"])},[k,(0,l._)("div",M,[(0,l._)("div",C,[z,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter role Name","onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),required:""},null,512),[[t.nr,m.value]])]),(0,l._)("div",D,[H,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter role Description","onUpdate:modelValue":s[2]||(s[2]=e=>oe.value=e),step:"any",required:""},null,512),[[t.nr,oe.value]])])]),(0,l._)("div",E,[(0,l._)("button",{type:"button",class:"btn btn-danger me-3",onClick:s[3]||(s[3]=e=>ne.value=!1)},"Cancel"),N])],40,x)):(0,l.kq)("",!0),(0,l._)("div",j,[(0,l._)("div",A,[R,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Search roles...","onUpdate:modelValue":s[4]||(s[4]=s=>he.value[e.index]=s)},null,512),[[t.nr,he.value[e.index]]])])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(He(e.index),((e,s)=>((0,l.wg)(),(0,l.iD)("div",S,[(0,l._)("div",V,[(0,l._)("div",U,[(0,l._)("h5",q,(0,r.zw)(e.name),1),(0,l._)("p",I,(0,r.zw)(e.description),1)]),(0,l._)("div",L,[(0,l._)("div",O,[(0,l._)("button",{class:"ms-auto btn btn-primary p-1",onClick:e=>we(s)},G,8,B)]),$,(0,l._)("div",null,[e.permissions&&e.permissions.length?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("button",{class:"btn btn-link p-0",onClick:e=>pe.value[`perm_${s}`]=!pe.value[`perm_${s}`]},[pe.value[`perm_${s}`]?((0,l.wg)(),(0,l.iD)("span",P,"Hide Permissions ▲")):((0,l.wg)(),(0,l.iD)("span",J,"Show Permissions ▼"))],8,F),pe.value[`perm_${s}`]?((0,l.wg)(),(0,l.iD)("div",Q,[(0,l._)("div",K,[T,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Filter assigned permissions...","onUpdate:modelValue":e=>ge.value[s]=e},null,8,W),[[t.nr,ge.value[s]]])])])):(0,l.kq)("",!0),pe.value[`perm_${s}`]?((0,l.wg)(),(0,l.iD)("ol",Z,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ze(e,s),((a,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t,class:"d-flex justify-content-between align-items-center"},[(0,l._)("span",null,(0,r.zw)(t+1)+"."+(0,r.zw)(a.name),1),(0,l._)("button",{class:"btn btn-danger btn-sm p-0 px-1 ms-1",onClick:l=>ye(e,a,s,De(e,a.id))}," × ",8,X)])))),128))])):(0,l.kq)("",!0)],64)):((0,l.wg)(),(0,l.iD)("div",ee," No permissions assigned to this role. "))]),be(s)?((0,l.wg)(),(0,l.iD)("div",se,[(0,l._)("div",ae,[(0,l._)("div",le,[te,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Search permissions...","onUpdate:modelValue":e=>me.value[s]=e},null,8,re),[[t.nr,me.value[s]]])])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Ce(e,s),(s=>((0,l.wg)(),(0,l.iD)("button",{key:s.id,class:"btn btn-success mt-1 p-0 px-2 ms-2",onClick:a=>fe(e,s)},(0,r.zw)(s.name),9,ie)))),128))])):(0,l.kq)("",!0)])])])))),256))])])])])]))}};const oe=ne;var ce=oe}}]);
//# sourceMappingURL=5826.aa308a88.js.map