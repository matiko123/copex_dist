{"version":3,"file":"js/7393.f661666e.js","mappings":"2gEAkGI,MAAMA,GAAQC,EAAAA,EAAAA,OAEdC,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,qBAEGC,EAAAA,EAAAA,IAAO,gBACDC,EAAAA,EAAAA,KAAI,GAD9B,MAEMC,GAAYF,EAAAA,EAAAA,IAAO,aAEnBG,GADmBC,KAAKC,MAAMC,aAAaC,QAAQ,SAASC,aAC/CR,EAAAA,EAAAA,IAAO,eACpBS,GAAeT,EAAAA,EAAAA,IAAO,gBAGtBU,IAFiBV,EAAAA,EAAAA,IAAO,mBAENC,EAAAA,EAAAA,KAAI,IACtBU,GAAUV,EAAAA,EAAAA,IAAI,CAAC,MAAM,OAAO,OAAO,cAAc,cAAc,WAAW,OAAO,OAAO,YAAY,YACpGW,GAAaX,EAAAA,EAAAA,IAAI,IAEjBY,GAAeZ,EAAAA,EAAAA,IAAI,CACrBa,QAAS,GACTC,cAAe,CAAC,GAAI,GAAI,KACxBC,KAAM,kCACNC,eAAgB,CAAEC,QAAS,uBAC3BC,SAAU,CAAC,MAAO,OAAO,aAAa,UACtCC,SAAU,CACNC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAEVC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACHC,MAAO,oCACPC,OAAQ,GACRC,kBAAmB,YACnBC,MAAO,YAEXC,kBAAkB,IAGhBC,EAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAIPC,EAAgBC,GACX,IAAIC,KAAKC,aAAa,QAAS,CAClCC,sBAAuB,EACvBC,sBAAuB,IACxBC,OAAOL,GAGRM,EAAmBC,UACrBnC,EAAgBoC,OAAQ,EACxB,IACI,MAAMC,QAAiBd,EAAce,IAAK,qCAAoCpD,EAAMqD,OAAOC,qBAC3FtC,EAAWkC,MAAQC,EAASI,KAAKC,KAAI,CAACC,EAAMC,KACxC,MAAMC,EAAWR,EAASI,KACrBK,MAAM,EAAGF,EAAQ,GACjBG,QAAO,CAACC,EAAKC,IAASD,EAAMC,EAAKC,SAAWD,EAAKE,cAAcC,kBAAkBC,MAAM,GAE5F,MAAO,IACAV,EACHW,IAAKV,EAAQ,EACbW,GAAIZ,EAAKY,GACTC,KAAM/D,EAAWkD,EAAKc,YACtBC,KAAMf,EAAKQ,cAAcC,kBAAkBO,OAC3CC,YAAajB,EAAKQ,cAAcS,YAChCP,KAAM1B,EAAagB,EAAKQ,cAAcC,kBAAkBC,MACxDQ,YAAalB,EAAKQ,cAAcC,kBAAkBS,YAClDC,KAAMnC,EAAagB,EAAKQ,cAAcC,kBAAkBC,KAAOV,EAAKO,UACpEA,SAAUP,EAAKO,SACfa,UAAWpC,EAAakB,GAExBmB,cAAerB,EAAKqB,cACpBb,cAAeR,EAAKQ,kBAG9B,MAAOc,GACLC,QAAQC,IAAIF,GACZzE,EAAUyE,EAAMG,SA1BpB,QA4BIpE,EAAgBoC,OAAQ,I,OAKhCiC,EAAAA,EAAAA,KAAU,KACNnC,O,igDClLR,MAAMoC,EAAc,EAEpB","sources":["webpack://cork-vue3/./src/views/report/labourPayments.vue","webpack://cork-vue3/./src/views/report/labourPayments.vue?d5db"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Labour Payments</span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n      \r\n        <div class=\"row mt-3\">\r\n            <div class=\"col-12\">\r\n                <h4 class=\"mb-3 text-center\">Labour Payments</h4>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Request Information Card -->\r\n        <div v-if=\"conversion.length > 0\" class=\"row mb-4\">\r\n            <div class=\"col-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h5 class=\"card-title mb-0\">Request Information</h5>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-4 text-start\">\r\n                                <p><strong>Project:</strong> {{ conversion[0]?.approval_list?.requisition?.project?.short_name || 'N/A' }}</p>\r\n                                <p><strong>Quantity:</strong> {{ formatNumber(conversion[0]?.approval_item?.requisition_items.quantity) || 'N/A'  }} </p>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4 text-start\">\r\n                                <p><strong>Requester:</strong> {{ conversion[0]?.approval_list?.requisition?.requester?.name || 'N/A' }}</p>\r\n                                <p><strong>Rate:</strong> {{ formatNumber(conversion[0]?.approval_item?.requisition_items.rate) || 'N/A'  }} </p>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4 text-start\">\r\n                               <p><strong>Request Date:</strong> {{ conversion[0]?.approval_list?.requisition?.date || 'N/A' }}</p>\r\n                               <p><strong>cost:</strong> {{ formatNumber(conversion[0]?.approval_item?.requisition_items.quantity * conversion[0]?.approval_item?.requisition_items.rate) || 'N/A'  }} </p>\r\n                            </div>\r\n                             <div class=\"col-md-12 text-start\">\r\n                                <p><strong>Description:</strong> {{ conversion[0]?.approval_list?.requisition?.description || 'N/A' }}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n              <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"conversion\" :columns=\"columns\" :options=\"table_option\">\r\n                            <template #actions=\"props\">\r\n                              \r\n                                <router-link :to=\"`/approval/${props.row.labour_request_id}`\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"primary\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n  </svg>\r\n                                </router-link>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n      \r\n    </div>\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n    .card {\r\n    pointer-events: none;\r\n}\r\n\r\n</style>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import { useRoute } from 'vue-router';\r\n    const route = useRoute();\r\n    \r\n    useMeta({ title: 'Labour Payments' });  \r\n    \r\n    const showMessage = inject('showMessage');\r\n    const conversion_factor = ref(false);\r\n    const showError = inject('showError');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const formatDate = inject('formatDate');\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingSpinner = inject('loadingSpinner'); \r\n    \r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['SNo','date','name','description','beneficiary','quantity','rate','cost','sub_total','actions']);    \r\n    const conversion = ref([]);\r\n    \r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'name','short_name','status'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n\r\n    const formatNumber = (num) => {\r\n        return new Intl.NumberFormat('en-US', {\r\n            minimumFractionDigits: 2,\r\n            maximumFractionDigits: 2\r\n        }).format(num);\r\n    };\r\n\r\n    const getLabourPayment = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await axiosInstance.get(`labour-payments?labour_request_id=${route.params.labour_request_id}`);\r\n            conversion.value = response.data.map((item, index) => {\r\n                const subtotal = response.data\r\n                    .slice(0, index + 1)\r\n                    .reduce((acc, curr) => acc + curr.quantity * curr.approval_item.requisition_items.rate, 0);\r\n                \r\n                return {\r\n                    ...item, // Keep the full item data\r\n                    SNo: index + 1,\r\n                    id: item.id,\r\n                    date: formatDate(item.created_at),\r\n                    name: item.approval_item.requisition_items.remark,\r\n                    description: item.approval_item.description,\r\n                    rate: formatNumber(item.approval_item.requisition_items.rate),\r\n                    beneficiary: item.approval_item.requisition_items.beneficiary,\r\n                    cost: formatNumber(item.approval_item.requisition_items.rate * item.quantity),\r\n                    quantity: item.quantity,\r\n                    sub_total: formatNumber(subtotal),\r\n                    // Store nested data for easy access\r\n                    approval_list: item.approval_list,\r\n                    approval_item: item.approval_item   \r\n                };\r\n            });\r\n        } catch (error) {\r\n            console.log(error);\r\n            showError(error.message);\r\n        } finally {\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n    \r\n\r\n    onMounted(() => {\r\n        getLabourPayment();\r\n    });\r\n</script>\r\n","import script from \"./labourPayments.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./labourPayments.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./labourPayments.vue?vue&type=style&index=0&id=523d1a55&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["route","useRoute","useMeta","title","inject","ref","showError","formatDate","JSON","parse","localStorage","getItem","permissions","tableShimmer","loading_spinner","columns","conversion","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","formatNumber","num","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","getLabourPayment","async","value","response","get","params","labour_request_id","data","map","item","index","subtotal","slice","reduce","acc","curr","quantity","approval_item","requisition_items","rate","SNo","id","date","created_at","name","remark","description","beneficiary","cost","sub_total","approval_list","error","console","log","message","onMounted","__exports__"],"sourceRoot":""}