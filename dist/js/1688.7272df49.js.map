{"version":3,"file":"js/1688.7272df49.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/budgets/index.vue","webpack://cork-vue3/./src/views/budgets/index.vue?29eb"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">\r\n        <ul class=\"navbar-nav flex-row\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Budgets </a></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>  \r\n\r\n\r\n<!-- budget title -->\r\n <h4 v-if=\"budget\" class=\"text-center\">{{ budget.name }}</h4>\r\n <h4 v-else class=\"text-center\">BUDGETS LIST</h4>\r\n\r\n\r\n\r\n        <div class=\"d-flex justify-content-between align-items-center\">\r\n            <div class=\"flex-grow-1 text-center\">\r\n<div  style=\"overflow:visible;\">\r\n    <div class=\"d-flex table-responsive\" style=\"overflow:visible;\">\r\n\r\n\r\n<div class=\"mb-2 ms-auto d-flex align-items-center gap-2\" style=\"overflow:visible;\">\r\n\r\n<!-- offcanvas start -->\r\n<div class=\"offcanvas offcanvas-end\" data-bs-scroll=\"true\" tabindex=\"-1\" id=\"offcanvasWithBothOptions\" aria-labelledby=\"offcanvasWithBothOptionsLabel\">\r\n  <div class=\"offcanvas-header\">\r\n    <h5 class=\"offcanvas-title\" id=\"offcanvasWithBothOptionsLabel\">PROJECT LISTS</h5>\r\n    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n  </div>\r\n  <div class=\"offcanvas-body\">\r\n  <div class=\"row\">\r\n  <div class=\"col-12\">\r\n <div\r\n  class=\"list-group\"\r\n  id=\"list-tab\"\r\n  role=\"tablist\"\r\n  v-bind=\"mobileView ? {\r\n    'data-bs-toggle': 'offcanvas',\r\n    'data-bs-target': '#budgetOffcanvas',\r\n    'aria-controls': 'budgetOffcanvas'\r\n  } : {}\"\r\n>\r\n\r\n      <a v-for=\"projectList in projects\" :key=\"projectList.id\" class=\"list-group-item list-group-item-action\" :id=\"'project-link-' + projectList.id\" data-bs-toggle=\"list\" :href=\"'#project-' + projectList.id\" role=\"tab\" :aria-controls=\"'project-' + projectList.id\" @click=\"project = projectList\" data-bs-dismiss=\"offcanvas\">{{ projectList.short_name }}</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n  </div>\r\n</div>\r\n <!-- offcanvas ends -->\r\n\r\n <!-- budgets offcanvas start -->\r\n<div class=\"offcanvas offcanvas-bottom\" data-bs-scroll=\"true\" tabindex=\"-1\" id=\"budgetOffcanvas\" aria-labelledby=\"budgetOffcanvasLabel\">\r\n  <div class=\"offcanvas-header\">\r\n    <h5 class=\"offcanvas-title\" id=\"budgetOffcanvasLabel\">BUDGET LISTS</h5>\r\n    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n  </div>\r\n  <div class=\"offcanvas-body\">\r\n  <div class=\"row\">\r\n  <div class=\"col-12\">\r\n    <div class=\"list-group\" id=\"list-tab\" role=\"tablist\"  >\r\n      <a v-for=\"list in budgets\" :key=\"list.id\" class=\"list-group-item list-group-item-action\" :id=\"'project-link-' + list.id\" data-bs-toggle=\"list\" :href=\"'#budget-' + list.id\" role=\"tab\" :aria-controls=\"'budget-' + list.id\"  data-bs-dismiss=\"offcanvas\"   @click=\"fillBudget(list)\">{{ list.name }}</a>\r\n      <span v-if=\"budgets_loading\" v-html=\"waitIndicator()\"></span>\r\n      <a class=\"list-group-item list-group-item-action\" id=\"new-budget\" data-bs-toggle=\"list\" href=\"javascript::(0)\" role=\"tab\" aria-controls=\"new-budget\"  data-bs-dismiss=\"offcanvas\"      \r\n       v-else v-if=\"user_permissions.includes('can_create_budget') \" \r\n       @click=\"newBudget=!newBudget,getBoqLines()\" >+ New Budget</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n  </div>\r\n</div>\r\n <!-- budgets offcanvas ends -->\r\n    <!-- offcanvas button starts -->\r\n    <div class=\"d-flex mb-2 me-1\">\r\n  <div class=\"ms-auto\">\r\n   \r\n        <button class=\"btn\" v-if=\"mobileView\"  data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-list-ul\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2\"/>\r\n</svg>\r\n</button>\r\n<div v-else>\r\n    <button v-if=\"budget && !budgetList\" \r\n    @click=\"budgetList =! budgetList\"\r\n    class=\"justify-content-center btn btn-primary mb-2\">View Budgets</button>\r\n    \r\n<button @click=\"budgetList =! budgetList\" v-else class=\"btn btn-outline-primary\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\">Select Project from the lists</button>\r\n  </div>\r\n</div>\r\n</div>\r\n\r\n    <!--offcanvas button ends -->\r\n\r\n</div>     \r\n    </div>\r\n<div v-if=\"project != ''\">   \r\n\r\n    <!-- Accordion Container -->\r\n     <div v-if=\"budgets_loading\"\r\n\r\n     v-html=\"pillShimmer()\"\r\n     >\r\n    </div>\r\n    <div\r\n     v-else\r\n    class=\"accordion\">\r\n\r\n            <!--budget offcanvas button starts -->\r\n    <div class=\"d-flex mb-2 me-1\" v-if=\"mobileView\">\r\n  <div class=\"ms-auto\">\r\n        <button class=\"btn btn-outline-primary\"  data-bs-toggle=\"offcanvas\" data-bs-target=\"#budgetOffcanvas\" aria-controls=\"budgetOffcanvas\">\r\n           View Budgets\r\n</button>\r\n  </div>\r\n</div>\r\n    <!--budget offcanvas button ends -->\r\n<!-- budgt pills starts -->\r\n   <div v-else  class=\"accordion-content\">\r\n    <span \r\n    v-if=\"budgetList\"\r\n      v-for=\"list in budgets\" \r\n      :key=\"list.id\"\r\n      class=\"budget-button project-button\" \r\n      @click=\"fillBudget(list)\"\r\n      :class=\"[\r\n        list.id === budget.id ? 'active-budget' : 'project-button',\r\n        getBudgetStatusClass(list)\r\n      ]\"\r\n      :title=\"'Click to select'\"\r\n    >\r\n      {{ list.name }}\r\n      <span \r\n        v-if=\"user_permissions.includes('can_delete_budget') && list.items_count == 0\" \r\n        class=\"close-mark\" \r\n        @click.stop=\"deleteBudget(list)\"\r\n      >\r\n        ×  \r\n      </span>\r\n    </span>\r\n    <span \r\n      v-if=\"user_permissions.includes('can_create_budget') && budgetList\" \r\n            @click=\"newBudget=!newBudget,getBoqLines()\"\r\n      class=\"budget-button new-project-button\" \r\n    >\r\n      + New Budget\r\n    </span>\r\n  </div>\r\n<!-- budget pills ends -->\r\n    \r\n    </div>\r\n  </div>\r\n<div v-else>\r\n    <h6 class=\"mt-1 text-success\">Please Select a project from the list</h6></div>\r\n\r\n    <!-- New Project Section -->\r\n           <form  @submit.prevent=\"addBudget()\">\r\n    <div v-if=\"newBudget\" class=\"d-flex flex-column align-items-center\">\r\n        <div class = \"row\">\r\n            <div class=\"col-md-5\">\r\n        <input \r\n          type=\"text\" \r\n          class=\"form-control\" \r\n          placeholder=\"Enter budget name\"\r\n          v-model=\"budget_name\"\r\n          required\r\n        >\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n        <input \r\n          type=\"number\" \r\n          class=\"form-control\" \r\n          placeholder=\"Enter Length of section\"\r\n          v-model=\"section_length\"\r\n          step=\"any\"\r\n        >\r\n        </div>\r\n\r\n            <div class=\"col-md-3\">\r\n                                   <Multiselect\r\n        v-model=\"unit\"\r\n        :options=\"units\"\r\n        placeholder=\"Select section Unit\"\r\n        label=\"short_name\"\r\n        :searchable=\"true\"        \r\n        :append-to-body=\"true\"\r\n    />\r\n        </div>\r\n\r\n          <div class=\"col-md-12\">\r\n                                   <Multiselect\r\n        v-model=\"boqLine\"\r\n        :options=\"boqLines\"\r\n        label=\"name\"\r\n        placeholder=\"Select Boq Lines\"\r\n        :searchable=\"true\"     \r\n        :multiple=\"true\"\r\n        track-by=\"id\"\r\n    />\r\n        </div>\r\n\r\n                <div class=\"col-md-12\">\r\n        <input \r\n          type=\"text\" \r\n          class=\"form-control\" \r\n          placeholder=\"Enter description\"\r\n          v-model=\"budget_descriptions\"\r\n        >\r\n        </div>\r\n        </div>\r\n      <div class=\"d-flex justify-content-center mt-2\"><button \r\n          type=\"button\" \r\n          class=\"btn btn-secondary mx-2\"\r\n          @click=\"newBudget = false\"\r\n        >\r\n          Cancel\r\n        </button>\r\n\r\n        <button \r\n          type=\"submit\" \r\n          class=\"btn btn-primary me-2\"\r\n          :disabled=\"loading\"\r\n        >\r\n        <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else> Add Budget</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n      </form>\r\n\r\n</div>\r\n\r\n        </div>    \r\n     </div>\r\n        <div>\r\n\r\n<div >\r\n\r\n<!-- budget status cards -->\r\n    <div v-if=\"showBudgetStatusCard\" class=\"d-flex justify-content-center my-4\">\r\n        <div class=\"budget-status-card-container mt-3 col-md-6\"> \r\n            <div class=\"card shadow border-start-primary h-100 p-4\" :class=\"'card-' + budgetStatusCardType\">\r\n                <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n                    <h4 class=\"card-title mb-0 text-center w-100\">{{ budgetStatusCardTitle }}</h4>\r\n                </div>\r\n                <div class=\"card-body\">\r\n                    <p class=\"card-text fs-5 text-start\">{{ budgetStatusCardMessage }}</p>\r\n                    <div v-if=\"budgetStatusRemarks\" class=\"mt-4\">\r\n                        <h5 class=\"fs-5 text-dark text-start\">Remarks:</h5>\r\n                        <p class=\"remarks-text fs-5 text-start\">{{ budgetStatusRemarks }}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n        <div v-else>\r\n\r\n\r\n<!-- budget and project details starts-->\r\n <div class=\"table-responsive\">\r\n               <table v-if=\"budget\" class=\"table table-bordered table-responsive table-striped\">\r\n                        <thead>\r\n                            <tr >\r\n                                 <a href=\"javascript:;\" class=\"edit me-3\" data-bs-toggle=\"modal\" :data-bs-target=\"'#allocation-modal'\">\r\n                                <th class=\"text-dark fw-bold\">ALLOCATED</th>\r\n                                </a>\r\n                                <th class=\"text-success\">BALANCE</th>\r\n                                 <th class=\"text-danger\">UNALLOCATED</th>\r\n                                 <th class=\"text-dark\">BUDGETED</th> \r\n                                 <th class=\"text-dark\">USED</th> \r\n                                <th class=\"text-dark\">STATUS</th> \r\n                            </tr>\r\n                             <tr>\r\n               <a href=\"javascript:;\" class=\"edit me-3\" data-bs-toggle=\"modal\" :data-bs-target=\"'#allocation-modal'\">\r\n                               \r\n                              <td \r\n                              >\r\n                               <span >\r\n                                   {{ formatNumber(budget.funded_amount) }}\r\n                                </span>\r\n                              \r\n                              </td>\r\n                              </a>\r\n                               <td>{{ formatNumber(budget.funded_amount - budget.total_used_cost) }}</td>\r\n                               <td>{{ formatNumber(budget.funded_amount - budget.total_cost) }}</td>\r\n                               <td>{{ formatNumber(budget.total_cost) }}</td>\r\n                               <td>{{ formatNumber(budget.total_used_cost) }}</td>\r\n                               <td>{{ budget.status }}</td>\r\n                              </tr>\r\n                              <tr>\r\n                                <td colspan=\"6\">BUDGET : {{ budget?.name }}</td>\r\n                              </tr>\r\n                        </thead>\r\n    </table> \r\n </div>\r\n\r\n <!-- budget and project details ends -->\r\n\r\n         <!-- funded amount modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"allocation-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editConversionFactorModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editConversionFactorModalLabel\">Budget allocation for {{ budget.name}}</h1>\r\n        <!-- <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeAllocationModal()\" id=\"close-allocation\"></button> -->\r\n        <router-link  :to=\"`/budget/allocation/${budget.id}`\" >     \r\n                            <button class=\"btn btn-primary\">view</button>\r\n                      </router-link>  \r\n      </div>\r\n     <form  @submit.prevent=\"addFund()\">\r\n        <div class=\"modal-body\">\r\n                                <div class=\"row g-2\">\r\n                                  <div class=\"col-md-6\">\r\n                                    <label for=\"funded amount\">ALLOCATED AMOUNT  {{ formatNumber(budget.funded_amount) }}</label>\r\n                                    <input type=\"number\" class=\"form-control\" placeholder=\"Add Funded amount\" v-model=\"fund_amount\" step=\"any\" min=\"1\" required>\r\n                                  </div>\r\n                                  \r\n                                  <div class=\"col-md-6\">\r\n                                    <label for=\"funded date\">Date</label>\r\n                                    <input type=\"date\" class=\"form-control\" v-model=\"fund_date\" required>\r\n                                  </div>\r\n                                  <div class=\"col-md-12\">\r\n                                    <label for=\"purpose\">Purpose</label>\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Enter purpose\" v-model=\"fund_description\" required>\r\n                                  </div>\r\n                                </div>\r\n              \r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeAllocationModal()\" id=\"close-allocation\">Close</button>\r\n             <button type=\"submit\" class=\"btn  btn-primary \"\r\n                                :disabled=\"loading\"\r\n                                ><span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n                              <span v-else>Submit</span>\r\n                              </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- funded amount modal ends -->\r\n       \r\n<!-- Action button starts -->\r\n <div class=\"d-flex\"  v-if=\"budget && mobileView\">\r\n  <div class=\"ms-auto\">\r\n<div class=\"btn-group\">\r\n  <button type=\"button\" class=\"btn btn-outline-primary dropdown-toggle\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n    Actions\r\n  </button>\r\n  <ul class=\"dropdown-menu\">\r\n    <li><a class=\"dropdown-item\" href=\"javascript:void(0);\"  \r\n       @click=\"getBudgetApprovals()\"         \r\n       data-bs-toggle=\"modal\" \r\n       data-bs-target=\"#budgetApprovals\">Budget Creation History</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"javascript:void(0);\"  \r\n      @click=\"printBudget(budget.id)\" >Print Original  Budget</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"javascript:void(0);\"   \r\n      @click=\"printReport\" >Print Budget With Consumption</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"javascript:void(0);\"   \r\n         v-if=\"budget.status === 'closed' && user_permissions.includes('can_open_budget')\"   \r\n         @click=\"changeBudgetStatus('open')\" \r\n         >Open Budget</a></li>\r\n             <li><a class=\"dropdown-item\" href=\"javascript:void(0);\"   \r\n         v-if=\"budget.status === 'open' && user_permissions.includes('can_close_budget')\"   \r\n         @click=\"changeBudgetStatus('closed')\" \r\n         >Close Budget</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"javascript:void(0);\"   \r\n          v-if=\"budget.status === 'closed' && user_permissions.includes('can_request_amendment')\"         \r\n          data-bs-toggle=\"modal\" data-bs-target=\"#amendments\"\r\n      >Request Amendment</a></li>\r\n    <li><a class=\"dropdown-item\" href=\"javascript:void(0);\" \r\n          @click=\"getAmendments()\"\r\n          data-bs-toggle=\"modal\" data-bs-target=\"#amendment-requests\"\r\n      >Budget Amendment Requests</a></li>\r\n    <li><hr class=\"dropdown-divider\"></li>\r\n    <li><router-link :to=\"`/budget-approvals/${budget.id}`\" class=\"dropdown-item\" href=\"javascript:void(0);\">LPO and Vouchers</router-link></li>\r\n  </ul>\r\n</div>\r\n  </div>\r\n </div>\r\n\r\n<!-- action button ends -->\r\n\r\n         <div v-else v-if=\"budget\" class=\"d-flex flex-wrap gap-2 mb-2 mt-4 justify-content-end align-items-center\">\r\n            <div class=\"btn-group flex-wrap \" style=\"gap: 8px;\">\r\n                  <button  \r\n        v-if=\"project && user_permissions.includes('can_create_budget')\"         \r\n        class=\"btn btn-dark\" \r\n        title=\"Budget Approvals\"\r\n        @click=\"getBudgetApprovals()\"\r\n        data-bs-toggle=\"modal\" \r\n        data-bs-target=\"#budgetApprovals\"\r\n    >\r\n   Budget Creation History\r\n    </button>\r\n                <button \r\n                v-if=\"budget && user_permissions.includes('can_print_budget')\"\r\n                    class=\"btn btn-success mx-2 mt-2\" \r\n                    @click=\"printBudget(budget.id)\" \r\n                    title=\"Print Report\"\r\n                    \r\n                    >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                        <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                    </svg>\r\n                    &nbsp;Print Budget\r\n                </button>\r\n                     <button \r\n                v-if=\"budget  && user_permissions.includes('can_print_budget')\"\r\n                    class=\"btn btn-success mx-2 mt-2\" \r\n                    @click=\"printReport\" \r\n                    title=\"Print Report\"\r\n                    >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                        <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                    </svg>\r\n                    &nbsp;Print With Consumption\r\n                </button>\r\n                  <button  \r\n                    v-if=\"budget.status === 'closed' && user_permissions.includes('can_request_amendment')\"         \r\n                    class=\"btn btn-info mt-2\" \r\n                     data-bs-toggle=\"modal\" data-bs-target=\"#amendments\"\r\n                    >\r\n              Request Amendment\r\n                </button>\r\n                <button  \r\n                    v-if=\"budget.status === 'open' && user_permissions.includes('can_close_budget')\"         \r\n                    class=\"btn btn-warning mt-2\" \r\n                    @click=\"changeBudgetStatus('closed')\" \r\n                    title=\"Close Budget\"\r\n                    :disabled=\"loading\"\r\n                    >\r\n                     <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n                     <span v-else>&nbsp;Close Budget </span>\r\n                </button>\r\n                <button  \r\n                    v-if=\"budget.status === 'closed' && user_permissions.includes('can_open_budget')\"         \r\n                    class=\"btn btn-success mt-2\" \r\n                     @click=\"changeBudgetStatus('open')\" \r\n                    title=\"Open Budget\"\r\n                     :disabled=\"loading\"\r\n                    >\r\n                     <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n                     <span v-else>&nbsp;Open Budget </span>\r\n                </button>\r\n\r\n                                <button  \r\n                    v-if=\"budget && user_permissions.includes('can_approve_budget_amendment')\"         \r\n                    class=\"btn btn-dark mt-2\" \r\n                    title=\"Amendment Requests\"\r\n                    @click=\"getAmendments()\"\r\n                     data-bs-toggle=\"modal\" data-bs-target=\"#amendment-requests\"\r\n                    >\r\nBudget Amendment Requisition\r\n                </button>\r\n                <router-link :to=\"`/budget-approvals/${budget.id}`\" class=\"btn btn-secondary\" >LPO and Vouchers</router-link>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!--Item form starts  -->\r\n<div class=\"d-flex\">\r\n  <div class=\"ms-auto mb-2\">\r\n                    <button \r\n                    v-if=\"budget.status === 'open' && user_permissions.includes('can_create_budget') && !add_item\"\r\n                    class=\"btn btn-primary mt-2\" \r\n                    @click=\"add_item =!add_item\" \r\n                    title=\"Add Item\"\r\n                     >\r\n                    &nbsp;Add Item\r\n                </button>\r\n                                <button \r\n                    v-if=\"budget.status === 'open' && user_permissions.includes('can_create_budget') && add_item\"\r\n                    class=\"btn btn-danger mt-2\" \r\n                    @click=\"add_item =!add_item\" \r\n                    title=\"Add Item\"\r\n                    >\r\n                    &nbsp;Close Item\r\n                </button>\r\n  </div>\r\n</div>\r\n<!-- item form ends -->\r\n<div v-if=\"budget\" class=\"table-responsive shadow-lg\"> \r\n<form v-if=\"add_item \" @submit.prevent=\"addItem()\">\r\n  <div class=\"row mt-2 justify-content-center g-2\">\r\n    <div class=\"col-md-6\">\r\n      <div class=\"input-group\">\r\n        <input type=\"text\" class=\"form-control\" placeholder=\"Add Item\" v-model=\"item_name\" required>\r\n        <button type=\"submit\" class=\"btn btn-primary\">\r\n          <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n          <span v-else>Save</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n\r\n\r\n<div class=\"table-responsive\" >\r\n<table class=\"table table-bordered mt-5\" >\r\n    <thead class=\"thead-light\" >\r\n        <tr>\r\n            <th>Sno:</th>\r\n            <th>Item</th>\r\n            <th>Description</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr v-for=\"(item,i)  in items\">\r\n\r\n            <td> {{ i + 1  }}</td>\r\n            <td> {{ item.name  }}</td>\r\n            <td>\r\n                <table class=\"table table-bordered table-responsive mt-5\">\r\n                   <thead class=\"thead-light\" style=\"position: sticky; top: 0; background: white; z-index: 5;\">\r\n                           <tr>\r\n                               <th>Sno:</th>\r\n                               <th>Item</th>\r\n                               <th>Specification</th>\r\n                               <th>Units</th>\r\n                               <th class=\"text-nowrap\">Qty 1</th>\r\n                               <th class=\"text-nowrap\">Qty 2</th>\r\n                               <th>Rate</th>\r\n                               <th>Cost</th>\r\n                               <th>\r\n                               <button\r\n                               v-if=\"budget.status ==='open'\"\r\n  class=\"btn btn-sm p-2\"\r\n  :class=\"item.id === add_description ? 'btn-danger' : 'btn-primary'\"\r\n  @click=\"add_description = item.id === add_description ? 0 : item.id\"\r\n>\r\n  <template v-if=\"item.id !== add_description\" >\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"24\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      stroke-width=\"2\"\r\n      stroke-linecap=\"round\"\r\n      stroke-linejoin=\"round\"\r\n      class=\"feather feather-plus-square\"\r\n    >\r\n      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n      <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line>\r\n      <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line>\r\n    </svg>\r\n  </template>\r\n\r\n  <template v-else>\r\n    close\r\n  </template>\r\n                               </button>\r\n\r\n                            </th>\r\n                           </tr>\r\n                       </thead>\r\n                       <tbody>\r\n                           <tr v-for=\"(desc,j)  in item.descriptions\"\r\n                           @click=\"fillEdits(desc,item.id)\"\r\n                             \r\n                           >\r\n                               <td> {{ j + 1  }}</td>\r\n                               <td> {{ desc.name  }}\r\n                                <br/>\r\n                                <span\r\n                                @click=\"getBudgetEdits(desc.id),no_edit=true\"\r\n                                data-bs-toggle=\"modal\" data-bs-target=\"#edits\"\r\n                                style=\"cursor: pointer;\" class=\"badge badge-danger\" title=\"Click to view edit history\" v-if=\"desc.last_editor\">Edited By {{ desc.last_editor }}\r\n                              </span>\r\n                               </td>\r\n                               <td> {{ desc.specification  }}</td>\r\n                               <td> {{ desc.units  }}</td>\r\n                               <td> {{ desc.quantity  }}</td>\r\n                               <td> {{ desc.quantity_2  }}</td>\r\n                               <td> {{ formatNumber(desc.cost)  }}</td>\r\n                               <td> \r\n                                Budgeted : {{ formatNumber(desc.cost * desc.quantity * desc.quantity_2) }}\r\n                                <br/>\r\n                                Used Cost  : {{ formatNumber(desc.used_cost) }}<br>\r\n                                Used Qty : {{ (desc.used_cost/desc.cost).toFixed(2) }}\r\n                                <hr style=\"border-top: 1px solid red\"/>\r\n                                Balance Budget : {{ formatNumber((desc.cost * desc.quantity * desc.quantity_2) - desc.used_cost) }}<br>\r\n                                Balance Qty :   {{ (((desc.cost * desc.quantity * desc.quantity_2) - desc.used_cost)/desc.cost).toFixed(2) }}\r\n                              </td>\r\n                               <td>\r\n                                         <svg \r\n                                         v-if=\"budget.status === 'closed'\"\r\n                                     xmlns=\"http://www.w3.org/2000/svg\" \r\n                                     width=\"28\" height=\"28\" \r\n                                     fill=\"currentColor\"\r\n                                      class=\"bi bi-eye text-secondary\" \r\n                                      viewBox=\"0 0 16 16\"\r\n                                      @click=\"getBudgetConsuption(desc,item),no_edit=true\"\r\n                                       data-bs-toggle=\"modal\" data-bs-target=\"#consuptions\"\r\n                                      >\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n            </svg>\r\n\r\n                <svg\r\n                 v-if=\"budget.status ==='open'\"\r\n                style=\"cursor: pointer;\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                 width=\"26\"\r\n                                  height=\"26\"                                 \r\n                                   fill=\"currentColor\"\r\n                                    class=\"bi bi-trash text-danger me-2\"\r\n                                     @click=\"deleteBudgetDescription(desc)\"\r\n                                     viewBox=\"0 0 16 16\">\r\n                                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n                                    <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n                                </svg>\r\n\r\n\r\n\r\n\r\n                               </td>\r\n                           </tr>\r\n                       </tbody>\r\n                </table>\r\n                              <!-- item description form starts -->\r\n                <form \r\n                @submit.prevent=\"addDescription(item.id)\"\r\n                v-if=\"add_description === item.id \" >\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Item </label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Enter Item\" v-model=\"description\" required>\r\n                        </div>\r\n                        <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Specification </label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Enter Specification\" v-model=\"specification\">\r\n                        </div>\r\n                         <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Unit</label>\r\n                             <Multiselect\r\n        v-model=\"unit\"\r\n        :options=\"units\"\r\n        label=\"short_name\"\r\n        track-by=\"id\"\r\n        placeholder=\"Select Unit\"\r\n        :searchable=\"true\"        \r\n        :append-to-body=\"true\"\r\n    />\r\n                    \r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Quantity</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 1\" v-model=\"quantity\" step=\"any\" required>\r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">quantity_2</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 2\" v-model=\"quantity_2\" step=\"any\" required>\r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Rate</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Rate\" v-model=\"rate\" step=\"any\" required>\r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Cost</label>\r\n                            <label class=\"form-control\">{{ Number(quantity * quantity_2 * rate).toLocaleString() }}/=</label>\r\n                        </div>\r\n                        \r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Save</label>\r\n                      \r\n                         \r\n                          <div class=\"btn-group\" role=\"group\">\r\n  <button type=\"submit\" class=\"btn btn-primary me-1\" :disabled=\"loading\">\r\n    <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n    <span v-else> Submit </span>\r\n  </button>\r\n\r\n  <button type=\"button\" class=\"btn btn-danger \" @click=\"add_description = false\">\r\n    Cancel\r\n  </button>\r\n</div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n               <!-- item description form ends -->\r\n\r\n               \r\n                <!-- item description form editing starts -->\r\n                                 <form \r\n                @submit.prevent=\"updateDescription(description_id)\"\r\n                v-if=\"edit_description === item.id && budget.status ==='open'\" >\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Item </label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Enter Item\" v-model=\"description\">\r\n                        </div>\r\n                        <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Specification </label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Enter Specification\" v-model=\"specification\">\r\n                        </div>\r\n                         <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Unit</label>\r\n                             <Multiselect\r\n        v-model=\"unit\"\r\n        :options=\"units\"\r\n        label=\"short_name\"\r\n        track-by=\"id\"\r\n        placeholder=\"Select Unit\"\r\n        :searchable=\"true\"        \r\n        :append-to-body=\"true\"\r\n    />\r\n                    \r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Quantity</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 1\" v-model=\"quantity\" step=\"any\">\r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Quantity_2</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 2\" v-model=\"quantity_2\" step=\"any\">\r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Rate</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Rate\" v-model=\"rate\" step=\"any\">\r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Cost</label>\r\n                            <label class=\"form-control\">{{ Number(quantity * quantity_2 * rate).toLocaleString() }}/=</label>\r\n                        </div>\r\n                          <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Save</label>\r\n                      \r\n                         \r\n                          <div class=\"btn-group\" role=\"group\">\r\n  <button type=\"submit\" class=\"btn btn-primary me-1\" :disabled=\"loading\">\r\n    <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n    <span v-else>Update</span>\r\n  </button>\r\n\r\n  <button type=\"button\" class=\"btn btn-danger \" @click=\"clearForm()\">\r\n    Cancel\r\n  </button>\r\n</div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n           \r\n                 <!-- item description form editing ends -->\r\n                  \r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n    <tfoot>\r\n    \r\n    <tr>\r\n        <td colspan=\"2\" class=\"text-start fw-bold\">\r\n            SUMMARY \r\n        </td>\r\n        <td>\r\n              <table class=\"table table-bordered table-responsive table-striped\">\r\n                        <thead>\r\n                            <tr >\r\n                                <th class=\"text-dark fw-bold\">ALLOCATED </th>\r\n                                <th class=\"text-success\">BALANCE</th>\r\n                                 <th class=\"text-danger\">UNALLOCATED</th>\r\n                                 <th class=\"text-dark\">BUDGETED</th> \r\n                                 <th class=\"text-dark\">USED</th> \r\n                            </tr>\r\n                            <tr>\r\n                               <td>{{ formatNumber(budget.funded_amount) }}</td>\r\n                               <td>{{ formatNumber(budget.funded_amount - budget.total_used_cost) }}</td>\r\n                               <td>{{ formatNumber(budget.funded_amount - budget.total_cost) }}</td>\r\n                               <td>{{ formatNumber(budget.total_cost) }}</td>\r\n                               <td>{{ formatNumber(budget.total_used_cost) }}</td>\r\n                              </tr>\r\n                        </thead>\r\n    </table> \r\n        </td>\r\n     \r\n\r\n    </tr>\r\n  \r\n</tfoot>\r\n</table>\r\n</div>                \r\n\r\n\r\n\r\n</div>\r\n</div>\r\n        </div>\r\n       \r\n    </div>\r\n<!-- budget Remarks starts -->\r\n<div class=\"modal fade mymodal \" id=\"consuptions\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog  modal-fullscreen modal-dialog-scrollable\"> <!-- Add scrollable class -->\r\n    <div class=\"modal-content\" >\r\n      \r\n      <!-- Fixed Header -->\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Budget Consumption Remarks</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\r\n        @click=\"clearForm()\"\r\n        ></button>\r\n      </div>\r\n\r\n      <!-- Scrollable Body -->\r\n      <div class=\"modal-body flex-grow-1 overflow-auto\">\r\n          <!-- Budget Info Card -->\r\n        <table class=\"table table-bordered table-responsive mb-3\">\r\n          <thead>\r\n            <tr>\r\n              <th colspan=\"8\" class=\"bg-light text-center text-dark fs-6\">Budget Details</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <th>Project:</th>\r\n              <td>{{ project.short_name }}</td>\r\n              <th>Budget Name:</th>\r\n              <td>{{ budget.name }}</td>\r\n               <th>Budget Item:</th>\r\n              <td>{{ currentBudgetItem}}</td>\r\n              <th>Description:</th>\r\n              <td>{{ budget_description.name }}</td>\r\n            </tr>\r\n           \r\n            <tr>\r\n              <th>Allocated Amount:</th>\r\n              <td>{{ formatNumber(budget.funded_amount) }} Tsh</td>\r\n              <th>Budget Cost:</th>\r\n              <td>{{ formatNumber(budget.total_cost) }} Tsh</td>\r\n              <th>Used Cost:</th>\r\n              <td>{{ formatNumber(budget.total_used_cost) }} Tsh</td>\r\n              <th>Balance:</th>\r\n              <td>{{ formatNumber(budget.funded_amount - budget.total_used_cost) }} Tsh</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <!-- add remark form starts -->\r\n<div class=\"d-flex\" v-if=\"!add_remark && user_permissions.includes('can_add_budget_consumption')\" >\r\n    <div class=\"ms-auto\">\r\n        <button class=\"btn btn-primary btn-sm \" @click=\"add_remark=! add_remark\"> Add Remark</button>\r\n        <!-- <button class=\"btn btn-primary btn-sm \" @click=\"printRemarkReport()\">Print</button> -->\r\n    </div>\r\n</div>\r\n  <form\r\n  v-if=\"add_remark\"\r\n  @submit.prevent=\"addBudgetRemark()\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-2\">\r\n        <input\r\n          v-model=\"description_cost\"\r\n          class=\"form-control mb-2\"\r\n          type=\"number\"\r\n          placeholder=\"Enter cost spent\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n       <div class=\"col-md-8\">\r\n        <input\r\n          v-model=\"approval_id\"\r\n          class=\"form-control mb-2\"\r\n          type=\"number\"\r\n          placeholder=\"Enter LPO number\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"col-md-2\">\r\n  <div class=\"btn-group w-100\" role=\"group\">\r\n    <button type=\"button\" class=\"btn btn-danger me-1\" @click=\"clearForm()\">Close</button>\r\n    <button type=\"submit\" class=\"btn btn-primary\"\r\n    :disabled=\"loading\"\r\n    >\r\n    <span\r\n    v-if=\"loading\" v-html=\"loadingSpinner()\"\r\n    ></span>\r\n    <span\r\n    v-else\r\n    >Save</span>\r\n        \r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n\r\n    </div>\r\n\r\n  </form>\r\n\r\n\r\n         <!-- add remark form ends -->\r\n        <div class=\"row layout-top-spacing\">\r\n          <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\"\r\n          >\r\n                      <div\r\n            v-if=\"loading\" v-html=\"tableShimmer()\"\r\n            ></div>\r\n            <div\r\n             v-else            \r\n            class=\"panel p-0\" >\r\n              <div class=\"custom-table table3\"   style=\"max-height: 95vh; overflow-y: auto;\">\r\n                <v-client-table :data=\"consuptions\" :columns=\"consuptionColumns\" >\r\n                   <template v-if=\"user_permissions.includes('can_delete_budget_description_remark')\"  #actions=\"props\">                        \r\n                             <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n                                 width=\"26\"\r\n                                  height=\"26\"                                 \r\n                                   fill=\"currentColor\"\r\n                                    class=\"bi bi-trash text-danger me-2\"\r\n                                     @click=\"deleteBudgetRemark(props.row,budget_description)\"\r\n                                     viewBox=\"0 0 16 16\">\r\n                                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n                                    <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n                                </svg>\r\n                                <router-link :to=\"`/approval/${props.row.approval_id}`\">\r\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-arrow-right\" style=\"cursor: pointer;\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8\"/>\r\n</svg>\r\n                                </router-link>\r\n\r\n                        </template>\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Fixed Footer -->\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"clearForm()\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n <!-- budget remarks ends -->\r\n  <!--budget edits modal starts  -->\r\n  <div class=\"modal fade mymodal \" id=\"edits\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog  modal-xl modal-dialog-scrollable\"> <!-- Add scrollable class -->\r\n    <div class=\"modal-content\" >\r\n      \r\n      <!-- Fixed Header -->\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Budget Item Editing Record</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\r\n        @click=\"clearForm()\"\r\n        ></button>\r\n      </div>\r\n\r\n      <!-- Scrollable Body -->\r\n      <div class=\"modal-body flex-grow-1 overflow-auto\">\r\n         <!-- add remark form ends -->\r\n        <div class=\"row layout-top-spacing\">\r\n          <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\"\r\n          >\r\n                      <div\r\n            v-if=\"loading\" v-html=\"tableShimmer()\"\r\n            ></div>\r\n            <div\r\n             v-else            \r\n            class=\"panel p-0\" >\r\n              <div class=\"custom-table table3\" >\r\n                <v-client-table :data=\"budgetEdits\" :columns=\"budgetEditColumns\" >\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Fixed Footer -->\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"clearForm()\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n  <!-- budget edits modal ends -->\r\n\r\n  <!-- amendment modal starts -->\r\n<div class=\"modal fade mymodal \" id=\"amendments\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog  modal-fullscreen modal-dialog-scrollable\"> <!-- Add scrollable class -->\r\n    <div class=\"modal-content\" >\r\n      \r\n      <!-- Fixed Header -->\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Budget Amendment Request</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\r\n        @click=\"clearAmendment()\"\r\n        ></button>\r\n      </div>\r\n\r\n      <!-- Scrollable Body -->\r\n      <div class=\"modal-body flex-grow-1 overflow-auto\">\r\n  <form\r\nv-if=\"add_amendment_item\"\r\n  @submit.prevent=\"pushItem()\">\r\n       <div class=\"row\">\r\n                        <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Item </label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Enter Item\" v-model=\"description\" required>\r\n                        </div>\r\n                         <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Unit</label>\r\n                             <Multiselect\r\n        v-model=\"unit\"\r\n        :options=\"units\"\r\n        label=\"short_name\"\r\n        track-by=\"id\"\r\n        placeholder=\"Select Unit\"\r\n        :searchable=\"true\"        \r\n        :append-to-body=\"true\"\r\n    />\r\n                    \r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Quantity</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 1\" v-model=\"quantity\" step=\"any\" required>\r\n                        </div>\r\n                         <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">quantity_2</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 2\" v-model=\"quantity_2\" step=\"any\" required>\r\n                        </div>\r\n                         <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Rate</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Rate\" v-model=\"rate\" step=\"any\" required>\r\n                        </div>\r\n                         <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Cost</label>\r\n                            <label class=\"form-control\">{{ Number(quantity * quantity_2 * rate).toLocaleString() }}/=</label>\r\n                        </div>\r\n                          <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Save</label>\r\n                      \r\n                         \r\n                            <button type=\"submit\" class=\"btn btn-primary\" >\r\n                                <span>\r\n                                  Add\r\n                              </span> \r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n  </form>\r\n\r\n\r\n         <!-- add remark form ends -->\r\n        <div class=\"row layout-top-spacing\">\r\n          <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\"\r\n          >\r\n                      <div\r\n            v-if=\"loading\" v-html=\"tableShimmer()\"\r\n            ></div>\r\n            <div\r\n             v-else            \r\n            class=\"panel p-0\" >\r\n              <div class=\"custom-table table3\"   style=\"max-height: 95vh; overflow-y: auto;\">\r\n                <v-client-table :data=\"amendmentItems\" :columns=\"amendmentItemColumns\" >\r\n                   <template v-if=\"user_permissions.includes('can_delete_budget_description_remark') && add_amendment_item\"  #actions=\"props\">                        \r\n                             <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n                                 width=\"16\"\r\n                                  height=\"16\"                                 \r\n                                   fill=\"currentColor\"\r\n                                    class=\"bi bi-trash text-danger\"\r\n                                     @click=\"pullItem(props.row.sno)\"\r\n                                     viewBox=\"0 0 16 16\">\r\n                                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n                                    <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n                                </svg>\r\n                            \r\n                        </template>\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Fixed Footer -->\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"clearAmendment()\">Close</button>\r\n        <button type=\"button\" class=\"btn btn-success\" :disabled=\"amendmentItems2.length ==  0 || loading\"\r\n        @click=\"sendAmendment()\"\r\n        v-if=\"add_amendment_item\"\r\n        >\r\n        <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else>Submit</span>\r\n      </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n <!-- amendment modal ends -->\r\n  <!-- amendment request modal starts -->\r\n   <div class=\"modal fade mymodal \" id=\"amendment-requests\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog  modal-fullscreen modal-dialog-scrollable\"> <!-- Add scrollable class -->\r\n    <div class=\"modal-content\" >\r\n      \r\n      <!-- Fixed Header -->\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Budget Amendment Request List</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\r\n        @click=\"clearAmendment()\"\r\n        ></button>\r\n      </div>\r\n\r\n      <!-- Scrollable Body -->\r\n      <div class=\"modal-body flex-grow-1 overflow-auto\">\r\n\r\n         <!-- add remark form ends -->\r\n        <div class=\"row layout-top-spacing\">\r\n             <div class=\"col-xl-6 col-lg-12 col-sm-12 layout-spacing\"\r\n          >\r\n                      <div\r\n            v-if=\"loading\" v-html=\"tableShimmer()\"\r\n            ></div>\r\n            <div\r\n             v-else            \r\n            class=\"panel p-0\" >\r\n              <div class=\"custom-table table3\" >\r\n                <v-client-table :data=\"amendmenLists\" :columns=\"amendmentListColumns\" >\r\n                    <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">{{ props.row.status.name }} </span>\r\n                    </template>\r\n\r\n                     <template #select=\"props\">\r\n                    <svg\r\n v-if=\"props.row.id === selectedAmendment.id\"\r\nxmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-check2-circle\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0\"/>\r\n  <path d=\"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z\"/>\r\n</svg>\r\n                 <svg\r\n\r\n                 @click=\"selectAmendment(props.row)\"\r\n                     v-else\r\n                       xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-circle\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16\"/>\r\n</svg>\r\n                  </template>\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n          <div class=\"col-xl-6 col-lg-12 col-sm-12 layout-spacing\"\r\n          >\r\n      <div v-if=\"selectedAmendment?.status?.name === 'Rejected'\" class=\"card border-danger shadow-sm my-3\">\r\n  <div class=\"card-header bg-danger text-white\">\r\n    <strong>Amendment Rejected</strong>\r\n  </div>\r\n  <div class=\"card-body text-start\">\r\n    <p><strong>Rejected By:</strong> {{ selectedAmendment.remarker }}</p>\r\n    <p><strong>Reason:</strong> {{ selectedAmendment.remark }}</p>\r\n  </div>\r\n</div>\r\n                      <div\r\n            v-if=\"loading\" v-html=\"tableShimmer()\"\r\n            ></div>\r\n            <div\r\n             v-else            \r\n            class=\"panel p-0\" >\r\n              <div class=\"custom-table table3\"  >\r\n                <v-client-table :data=\"amendmentItems\" :columns=\"amendmentListItemColumns\" >\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Fixed Footer -->\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"   @click=\"clearAmendment()\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n   <!-- amendment request modal ends -->\r\n\r\n               <!-- Budget approval modal starts -->\r\n  <div class=\"modal fade mymodal \" id=\"budgetApprovals\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog  modal-fullscreen \"> <!-- Add scrollable class -->\r\n    <div class=\"modal-content\" >\r\n      \r\n      <!-- Fixed Header -->\r\n      <div class=\"modal-header\">\r\n        <!-- <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">{{ approval_title }} </h1> -->\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\r\n        @click=\"closeModal()\"\r\n        ></button>\r\n      </div>\r\n\r\n      <div \r\n      class=\"d-flex justify-content-center my-3\">\r\n      </div>\r\n  \r\n      \r\n\r\n      <!-- Scrollable Body -->\r\n      <div class=\"modal-body flex-grow-1 overflow-auto\">\r\n        <div class=\"row layout-top-spacing\">\r\n          <div class=\"col-xl-6 col-lg-12 col-sm-12 layout-spacing\">\r\n            <div class=\"panel p-0\">\r\n              <div class=\"custom-table table3\" style=\"max-height: 600px; overflow-y: auto;\">\r\n                <div v-if=\"loading\" v-html=\"tableShimmer()\"></div>\r\n                <v-client-table v-else :data=\"budgetApprovals\" :columns=\"budgetApprovalColumns\" >\r\n                  <template #status=\"props\">\r\n                    <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                      {{ props.row.status.name }}\r\n                    </span>\r\n                  </template>\r\n                  <template #actions=\"props\">\r\n                      <span v-if=\"props.row\" class=\"text-success\" @click=\"selectBudget(props.row)\">\r\n                        <svg v-if=\"selectedNewBudget && props.row.id === selectedNewBudget.id\" xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-check2-circle\" viewBox=\"0 0 16 16\">\r\n                          <path d=\"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0\"/>\r\n                          <path d=\"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z\"/>\r\n                        </svg>\r\n                        <svg v-else xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-circle\" viewBox=\"0 0 16 16\">\r\n                          <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16\"/>\r\n                        </svg>\r\n                      </span>\r\n                    </template>\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Right Column - Budget Details -->\r\n          <div class=\"col-xl-6 col-lg-12 col-sm-12 layout-spacing\">\r\n            <div v-if=\"selectedNewBudget\" class=\"card mt-2 shadow p-3 border-0\">\r\n              <div class=\"card-header py-3\" :class=\"'bg-' + selectedNewBudget.status.color\">\r\n                <h6 class=\"mb-0 text-white\">Budget: {{ selectedNewBudget.budget.name || 'N/A' }}</h6>\r\n              </div>\r\n              <div class=\"card-body py-3\">\r\n                <p class=\"text-start mb-2\"><strong>Requested by:</strong> {{ selectedNewBudget.requester || 'N/A' }}</p>\r\n                <p class=\"text-start mb-2\"><strong>Description:</strong> {{ selectedNewBudget.description || 'N/A' }}</p>\r\n                <p class=\"text-start mb-0\" v-if=\"selectedNewBudget.status?.name === 'Rejected'\">\r\n                  <strong>Rejection remark:</strong> {{ selectedNewBudget.remark || 'N/A' }}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Fixed Footer -->\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\r\n         @click=\"closeModal()\"\r\n        >Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</div>\r\n             <!-- Budget approval modal ends -->\r\n              <!-- budget edit modal starts -->\r\n              \r\n                                 <div class=\"modal fade mymodal\" id=\"edit\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">{{ budget_description.name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close_modal\" ></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n              <form \r\n                @submit.prevent=\"updateDescription(description_id)\"\r\n                 >\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-12\">\r\n                            <label class=\"form-label\">Enter Any Remark </label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Enter Remark\" v-model=\"remark\">\r\n                        </div>\r\n\r\n                         <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Quantity</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 1\" v-model=\"quantity\" step=\"any\">\r\n                        </div>\r\n                         <div class=\"col-md-2\">\r\n                            <label class=\"form-label\">Quantity_2</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Qty 2\" v-model=\"quantity_2\" step=\"any\">\r\n                        </div>\r\n                         <div class=\"col-md-3\">\r\n                            <label class=\"form-label\">Rate</label>\r\n                            <input type=\"number\" class=\"form-control\" placeholder=\"Rate\" v-model=\"rate\" step=\"any\">\r\n                        </div>\r\n                         <div class=\"col-md-3\">\r\n                            <label class=\"form-label\">Cost</label>\r\n                            <label class=\"form-control\">{{ Number(quantity * quantity_2 * rate).toLocaleString() }}/=</label>\r\n                        </div>\r\n                          <div class=\"col-md-1\">\r\n                            <label class=\"form-label\">Save</label>\r\n                      \r\n                         \r\n                          <div class=\"btn-group\" role=\"group\">\r\n  <button type=\"submit\" class=\"btn btn-primary me-1\" :disabled=\"loading\">\r\n    <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n    <span v-else>Update</span>\r\n  </button>\r\n</div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\" id=\"close_modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<button data-bs-toggle=\"modal\" data-bs-target=\"#edit\" style=\"display: none;\" id=\"edit_button\"></button>\r\n               <!-- budget edit modal ends -->\r\n\r\n\r\n</template>\r\n\r\n\r\n<script setup>\r\n    import axios from 'axios';    \r\n    import { onMounted, ref,inject,watch, computed } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const user_id = JSON.parse(localStorage.getItem(\"user\")).id\r\n    useMeta({ title:'Budgets '});\r\n    const projects = ref(['']);\r\n    const project = ref('');\r\n    const newBudget= ref(false)\r\n    const showError = inject('showError');\r\n    const formatNumber = inject('formatNumber');\r\n    const showMessage = inject('showMessage');\r\n    const pillShimmer = inject('pillShimmer')\r\n    const tableShimmer = inject('tableShimmer')\r\n    const waitIndicator = inject('waitIndicator')\r\n    const loadingSpinner = inject('loadingSpinner')\r\n    const printBudget = inject('printBudget')\r\n             const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    const add_amendment_item = ref(true)\r\n    const budgets = ref([])\r\n    const budget = ref('')\r\n    const budgets_loading = ref(false)\r\n    const add_item = ref(false)\r\n    const add_description = ref('')\r\n    const edit_description = ref('')\r\n    const amend_description = ref('')\r\n    const items = ref([]);\r\n\r\nconst budgetEdits = ref([])\r\nconst budgetEditColumns = ['Sno','editor','remark','quantity','quantity_2','rate','cost']\r\nconst getBudgetEdits = async (id)=>{\r\n  loading.value = true\r\n  const response = await axiosInstance.get(`budget-edit-logs?description_id=${id}`)\r\n  budgetEdits.value = response.data.map((item,index)=>({\r\n    ...item,\r\n    Sno : index +1,\r\n    editor:item.editor.name,\r\n    quantity: item.from_quantity + '➡️' + item.to_quantity,\r\n    quantity_2: item.from_quantity_2 + '➡️' + item.to_quantity_2,\r\n    rate : formatNumber(item.from_rate) + ' ➡️ ' + formatNumber(item.to_rate),\r\n    cost : formatNumber(item.from_quantity * item.from_quantity_2 * item.from_rate) + ' ➡️ ' + formatNumber(item.to_quantity * item.to_quantity_2 * item.to_rate)\r\n  }))\r\n  loading.value = false\r\n}\r\n\r\n\r\n  \r\n\r\nconst amendDescription = async (id) => {\r\n  loading.value = true;\r\n  edit_description.value = amend_description.value\r\n  const payload = {\r\n    budget_item_description_id: id,\r\n    from_quantity: budget_description.value.quantity,\r\n    to_quantity: quantity.value,\r\n    from_quantity_2: budget_description.value.quantity_2,\r\n    to_quantity_2: quantity_2.value,\r\n    from_rate: budget_description.value.cost,\r\n    to_rate: rate.value,\r\n    remark: remark.value,\r\n    editor_id: JSON.parse(localStorage.getItem(\"user\")).id\r\n  };\r\n\r\n  try {\r\n    await axiosInstance.post('budget-edit-logs', payload);\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    const item = budget.value.items.find(i => i.descriptions.some(d => d.id === id));\r\n    if (item) {\r\n      const desc = item.descriptions.find(d => d.id === id);\r\n      if (desc) {\r\n        desc.last_editor =  user.name ;\r\n      }\r\n    }\r\n\r\n    clearForm();\r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.log(error);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n\r\nconst add_fund = ref(false)\r\nconst fund_amount = ref('')\r\nconst fund_description = ref('')\r\nconst fund_date = ref('')\r\n\r\nconst addFund = async() =>{\r\n  loading.value = true\r\n  const payload = {\r\n    budget_id: budget.value.id,\r\n    issuer_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n    amount: fund_amount.value,\r\n    description: fund_description.value,\r\n    date: fund_date.value,\r\n  }\r\n  try{\r\n  const response = await axiosInstance.post(`budget-allocations`,payload)\r\n   await addFunds();\r\n  showMessage('Fund added successfully')\r\n  document.getElementById('close-allocation').click();\r\n  getBudgets();\r\n     closeAllocationModal();\r\n  }catch(error){getBudgets\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n    loading.value= false\r\n    add_fund.value = false\r\n\r\n  }\r\n}\r\n\r\nconst addFunds = async() =>{\r\n  loading.value = true\r\n  const payload = {\r\n    funded_amount: budget.value.funded_amount + fund_amount.value\r\n  }\r\n  try{\r\n  const response = await axiosInstance.put(`budgets/${budget.value.id}`,payload)\r\nbudget.value.funded_amount = Number(budget.value.funded_amount) + Number(fund_amount.value)  }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n    loading.value= false\r\n    add_fund.value = false\r\n\r\n  }\r\n}\r\n\r\nconst closeAllocationModal = () => {\r\n  fund_amount.value = ''\r\n  fund_description.value = ''\r\n  fund_date.value = ''\r\n    };\r\n\r\n\r\nconst selectedAmendment = ref('')\r\nconst selectAmendment = (data) =>{\r\n   selectedAmendment.value = data\r\n   amendmentItems.value = data.items.map((item, index) => ({\r\n        ...item,\r\n        sno: index + 1,\r\n        qty: item.quantity,\r\n        qty2 : item.quantity_2,\r\n        sum : item.quantity * item.quantity_2,\r\n        cost : (item.quantity * item.quantity_2 * item.rate).toLocaleString()+ '/=',\r\n        rate : Number(item.rate).toLocaleString()+ '/='\r\n    }));\r\n}\r\n\r\nconst amendmentItems = ref([])\r\nconst amendmenLists = ref([])\r\nconst amendmentListColumns = [ 'sno','requester','status','date','select'];\r\nconst amendmentListItemColumns = [ 'sno','description','unit','qty','qty2','sum' ,'rate','cost'];\r\nconst amendmentItems2 = ref([])\r\nconst amendmentItemColumns = [ 'sno','description','unit','quantity' ,'quantity_2','rate','cost','actions'];\r\n\r\nconst clearItemForm = () =>{\r\n  description.value = '',\r\n  quantity.value = '',\r\n  quantity_2.value = ''\r\n  unit.value = '',\r\n  rate.value = '',\r\n  cost.value = ''\r\n}\r\n\r\n\r\nconst getAmendments = async() =>{\r\n  loading.value = true\r\n const response = await axiosInstance.get(`budget-amendments?budget_id=${budget.value.id}`)\r\n amendmenLists.value =  response.data.map((item, index) => ({\r\n        ...item,\r\n        sno: index + 1,\r\n        requester:item.requester.name,\r\n    }));\r\n\r\n    loading.value = false\r\n}\r\n\r\nconst clearAmendment = () =>{\r\n  amendmentItems.value = []\r\n  amendmentItems2.value = []\r\n  add_amendment_item.value = true\r\n  selectedAmendment.value = '';\r\n}\r\nconst i = ref(1);\r\nconst pushItem = () => {\r\n  const payload = {\r\n    sno : i.value,\r\n    description: description.value,\r\n    quantity :quantity.value,\r\n    quantity_2 : quantity_2.value,\r\n    rate: rate.value.toLocaleString()+ \"/=\",\r\n    unit : unit.value.short_name,\r\n    cost : (quantity.value * quantity_2.value * rate.value).toLocaleString() + \"/=\"\r\n  }\r\n    \r\n    const payload2 = {\r\n    sno : i.value,\r\n    description: description.value,\r\n    quantity :quantity.value,\r\n    quantity_2 : quantity_2.value,\r\n    unit : unit.value.short_name,\r\n    rate: rate.value,\r\n  }\r\n  amendmentItems.value.push(payload)\r\n  amendmentItems2.value.push(payload2)\r\n  i.value += 1;\r\n  clearItemForm()\r\n}\r\n\r\n    const pullItem = (sno) => {\r\n        amendmentItems.value = amendmentItems.value.filter(item => item.sno !== sno);\r\n        amendmentItems2.value = amendmentItems2.value.filter(item => item.sno !== sno);\r\n        amendmentItems.value.forEach((item, idx) => {\r\n            item.sno = idx + 1;\r\n            i.value = item.sno + 1\r\n        });\r\n         amendmentItems2.value.forEach((item, idx) => {\r\n            item.sno = idx + 1;\r\n            i.value = item.sno + 1\r\n        });\r\n    }\r\n\r\n    const sendAmendment = async () =>{\r\n      loading.value = true\r\n      const payload = {\r\n        items : amendmentItems2.value,\r\n        amendment : {\r\n          requester_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n          budget_id: budget.value.id\r\n        }\r\n      }\r\n     try{\r\n            const response = await axiosInstance.post('budget-amendments',payload)\r\n            showMessage('Amendment sent')\r\n            add_amendment_item.value = false\r\n     }catch(error){\r\n      showError(error.message)\r\n      console.log(error)\r\n     }finally{\r\n      loading.value = false\r\n     }\r\n    }\r\n\r\nconst changeBudgetStatus = async (data) =>{\r\n  loading.value = true\r\n  const payload = {\r\n    status : data\r\n  }\r\n\r\n  try{\r\n  const response = await axiosInstance.put(`budgets/${budget.value.id}`,payload)\r\n  showMessage('budget '+data)\r\n  budget.value.status = response.data.status\r\n  }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n    loading.value= false\r\n  }\r\n\r\n}\r\n    const approval_id = ref('')\r\n    const remark = ref('')\r\n    const description_cost = ref('')\r\n    const add_remark = ref(false)\r\n\r\nconst addBudgetRemark = async () => {\r\n  loading.value = true\r\n  try {\r\n    const payload = {   \r\n      date: new Date().toISOString().split('T')[0],\r\n      remarker_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n      approval_id: approval_id.value,\r\n      description: remark.value + 'This was created from LPO No: ' + approval_id.value,\r\n\r\n      // remarker: JSON.parse(localStorage.getItem(\"user\")).name,\r\n      budget_item_description_id: description_id.value,\r\n      cost: description_cost.value,          \r\n    }\r\n\r\n\r\n    const response = await axiosInstance.post(`budget-remarks`, payload);\r\n\r\n    // push new remark locally\r\n    const newRemark = response.data\r\n    let currentBalance = parseFloat(budget_description.value.quantity * budget_description.value.quantity_2 * budget_description.value.cost)\r\n\r\n    // update used_cost\r\n    budget_description.value.used_cost = (parseFloat(budget_description.value.used_cost || 0) + parseFloat(newRemark.cost)).toFixed(2)\r\n    budget.value.total_used_cost = budget.value.total_used_cost + newRemark.cost \r\n\r\n    consuptions.value = [...consuptions.value, {\r\n      sno: consuptions.value.length + 1,\r\n      id: newRemark.id,\r\n      approved_by: JSON.parse(localStorage.getItem(\"user\")).name,\r\n      date: newRemark.date,\r\n      debit: newRemark.cost > 0 ? Number(newRemark.cost).toLocaleString() + \" Tsh\" : \"--\",\r\n      credit: newRemark.cost < 0 ? Number(Math.abs(newRemark.cost)).toLocaleString() + \" Tsh\" : \"--\",\r\n      description: newRemark.description,\r\n      balance: 0 // will recalc below\r\n    }]\r\n\r\n    // recalculate balance for all\r\n    consuptions.value = consuptions.value.map((c, i) => {\r\n      currentBalance -= parseFloat(c.debit.replace(/[^0-9.-]+/g,\"\")) || 0\r\n      return { ...c, sno: i + 1, balance: currentBalance.toLocaleString() + \" Tsh\" }\r\n    })\r\n\r\n    getBudgetConsuption(budget_description.value);\r\n\r\n    showMessage(\"Remark added successfully\");\r\n    remark.value = \"\"; \r\n    description_cost.value = \"\";\r\n    approval_id.value = \"\";\r\n    add_remark.value = ''\r\n\r\n  } catch (error) {\r\n    showError(error.message);\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n\r\nconst showConfirmation = inject('showConfirmation')\r\n\r\nconst deleteBudgetRemark = async (item, desc) => {\r\n    showConfirmation('Delete Record','Are you sure you want to delete ' + item.description + ' with cost ' + item.debit,`budget-remarks/${item.id}`,'delete')\r\n\r\n      const itemCost = parseFloat(item.debit.replace(/[^0-9.-]+/g,\"\")) || 0\r\n      desc.used_cost = (parseFloat(desc.used_cost) - itemCost).toFixed(2)\r\n      budget.value.total_used_cost = (parseFloat(budget.value.total_used_cost) - itemCost).toFixed(2)\r\n      consuptions.value = consuptions.value.filter(c => c.id !== item.id)\r\n      let currentBalance = parseFloat(desc.quantity * desc.quantity_2 * desc.cost)\r\n      consuptions.value = consuptions.value.map((c, i) => {\r\n        currentBalance -= parseFloat(c.debit.replace(/[^0-9.-]+/g,\"\")) || 0\r\n        return { ...c, sno: i + 1, balance: currentBalance.toLocaleString() + \" Tsh\" }\r\n      })\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n   const consuptions = ref([])\r\n   const consuptionColumns = [ 'sno','approved_by','date' ,'description','debit','credit','balance','actions'];\r\n   const balance = ref(0)\r\n   const currentBudgetItem = ref('')\r\nconst getBudgetConsuption = async (desc,item) => {\r\n  consuptions.value = [];\r\n  loading.value = true;\r\n  currentBudgetItem.value = item.name\r\n\r\n  // initialize balance from desc.cost\r\n  balance.value = parseFloat(desc.quantity * desc.quantity_2 * desc.cost);\r\n\r\n  const response = await axiosInstance.get(\r\n    `budget-remarks?budget_item_description_id=${desc.id}`\r\n  );\r\n\r\n  consuptions.value = response.data.map((data, i) => {\r\n    balance.value -= parseFloat(data.cost);\r\n    return {\r\n      ...data,\r\n      sno: i + 1,\r\n      id: data.id,\r\n      approved_by: data.remarker.name,\r\n      date: data.date,\r\n      debit: data.cost > 0 ? Number(data.cost).toLocaleString() + \" Tsh\" : \"--\",\r\n      credit:\r\n        data.cost < 0\r\n          ? Number(Math.abs(data.cost)).toLocaleString() + \" Tsh\"\r\n          : \"--\",\r\n      description: data.description,\r\n      balance: balance.value.toLocaleString() + \" Tsh\",\r\n    };\r\n  });\r\n\r\n  loading.value = false;\r\n};\r\n\r\n\r\n\r\n   const description_id = ref('')\r\n   const budget_description = ref('')\r\n   const budget_description_clicks = ref(0)\r\n   const no_edit = ref(false)\r\n   const fillEdits = (item,id) =>{\r\n    budget_description.value = item\r\n    description_id.value = item.id\r\n    if(budget.value.status === 'open'){\r\n       if(user_permissions.includes('can_edit_budget') && no_edit.value == false){\r\n         amend_description.value = id\r\n         document.getElementById('edit_button').click()\r\n       }else{\r\n        budget_description_clicks.value += 1\r\n        if(budget_description_clicks.value >3){\r\n          showError('Access Denied')\r\n          budget_description_clicks.value = 0\r\n        }\r\n        return ;\r\n       }\r\n    }else{\r\n     edit_description.value = id\r\n    }\r\n      description.value = item.name\r\n      specification.value = item.specification || ''\r\n     quantity.value = item.quantity\r\n     quantity_2.value = item.quantity_2\r\n     rate.value = item.cost\r\n     unit.value = units.value.find(u => u.short_name === item.units);\r\n   }\r\n\r\nconst updateDescription = async (id) => {\r\n  remark.value = description.value\r\n  loading.value = true;\r\n  if (!unit.value && !amend_description.value) {\r\n    showError(\"Please fill all items\");\r\n    loading.value = false;\r\n    return;\r\n  }\r\n\r\n  const payload = {\r\n    id,\r\n    name: description.value,\r\n    specification: specification.value,\r\n    quantity: quantity.value ?? 0,\r\n    quantity_2: quantity_2.value ?? 0,\r\n    ...(unit.value?.short_name && { units: unit.value.short_name }),\r\n    cost: rate.value ?? 0,\r\n  };\r\n\r\n  try {\r\n    const response = await axiosInstance.put(`budget-item-descriptions/${id}`, payload)\r\n    document.getElementById('close_modal').click();\r\n    showMessage(\"Updated Successfully\");\r\n    \r\n    if(budget.value.status === 'open' ){\r\n      edit_description.value = amend_description.value\r\n    }\r\n    \r\n    const targetItem = items.value.find(i => i.id === edit_description.value);\r\n    if (targetItem && targetItem.descriptions) {\r\n      const index = targetItem.descriptions.findIndex(d => d.id === id);\r\n      if (index !== -1) {\r\n        const oldCost = targetItem.descriptions[index].cost * \r\n                        targetItem.descriptions[index].quantity * \r\n                        targetItem.descriptions[index].quantity_2;\r\n\r\n        const newCost = payload.cost * payload.quantity * payload.quantity_2;\r\n        targetItem.descriptions[index] = { ...targetItem.descriptions[index], ...payload };\r\n        budget.value.total_cost = budget.value.total_cost - oldCost + newCost;\r\n      }\r\n    }\r\n\r\n    if(budget.value.status === 'open') {\r\n      await amendDescription(id);\r\n    }\r\n    \r\n    clearForm();\r\n    \r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.log(error);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n    const units = ref('')\r\n    const getUnits = async ()=>{\r\n      const response = await axiosInstance.get('units')\r\n      units.value = response.data\r\n    }\r\n    const description = ref('')\r\n    const specification = ref('')\r\n    const quantity = ref('')\r\n    const quantity_2 = ref('')\r\n    const unit = ref('')\r\n    const rate = ref('')\r\n    const cost = ref(0)\r\nconst addDescription = async (id) => {\r\n  if(!unit.value){\r\n    showError(\"please enter unit\")\r\n    return ;\r\n  }\r\n    loading.value = true\r\n    const payload = {\r\n        budget_item_id : add_description.value,\r\n        name: description.value,\r\n        specification: specification.value,\r\n        quantity: quantity.value ?? 0,\r\n        quantity_2: quantity_2.value ?? 0,\r\n        units: unit.value.short_name,\r\n        cost : rate.value ?? 0,\r\n    };\r\n    \r\n\r\n    try {\r\n        const response = await axiosInstance.post('budget-item-descriptions', payload);\r\n        showMessage(\"Description added successfully\");\r\n        const targetItem = items.value.find(i => i.id === add_description.value);\r\n        if (targetItem) {\r\n            targetItem.descriptions = targetItem.descriptions || [];\r\n            targetItem.descriptions.push(payload);\r\n        }\r\n\r\n        clearForm();\r\n        getBudgets()\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n    }finally{\r\n        loading.value = false\r\n    }\r\n};\r\n\r\n\r\n\r\n    const item_name = ref('')\r\n    const addItem = async () =>{\r\n        loading.value = true\r\n        const payload = {\r\n            budget_id: budget.value.id,\r\n            name : item_name.value,\r\n        }\r\n        try {\r\n            const response = await axiosInstance.post('budget-items',payload)\r\n            showMessage(\"Item Added successfully\")\r\n             items.value.push(response.data)\r\n            getBudgets()\r\n            item_name.value = ''\r\n            add_item.value = false\r\n        }catch(error){\r\n            showError(error.message)\r\n           console.log(error)\r\n        }finally{\r\n            loading.value = false\r\n        }\r\n    }\r\n\r\n    const deleteBudget = async (data) =>{\r\n\r\n        // Find approval status for this budget\r\n        const approval = budgetApprovals.value.find(app => app.budget_id === data.id);\r\n        \r\n        // Only allow deletion if status is rejected or unapproved\r\n        if (approval && (approval.status?.name === 'Rejected' || approval.status?.name === 'Unapproved')) {\r\n            if(confirm (\"are you sure you want to delete budget \" + data.name)){\r\n                try{ \r\n                    budgets_loading.value = true\r\n                    await axiosInstance.delete(`budgets/${data.id}`)\r\n                    showMessage('Budget Deleted')\r\n                    getBudgets()\r\n                }catch(error){\r\n                    showError(error.message)\r\n                    console.log(error)\r\n                }\r\n            }\r\n        } else {\r\n            showError('Can only delete rejected or unapproved budgets')\r\n        }\r\n\r\n        \r\n    } \r\n\r\n    const clearForm = ()=>{\r\n        budget_name.value = ''\r\n        approval_id.value = ''\r\n        newBudget.value=false\r\n        item_name.value = ''\r\n        add_item.value = false\r\n        description.value = ''\r\n        quantity.value = ''\r\n        quantity_2.value = ''\r\n        unit.value = ''\r\n        rate.value = ''\r\n        cost.value = ''\r\n        add_description.value = ''\r\n        description_id.value = ''\r\n        edit_description.value = ''\r\n        description_cost.value = '',\r\n        remark.value = '',\r\n        add_remark.value = ''\r\n        amend_description.value = ''\r\n        remark.value = ''\r\n        specification.value = ''\r\n        no_edit.value = false,\r\n        boqLines.value = [],\r\n        boqLine.value = '',\r\n        newBudget.value = false,\r\n        section_length.value = '',\r\n        budget_descriptions.value = ''\r\n    }\r\n    const budget_remark = ref('')\r\n    const budget_name = ref('')\r\n    const budget_descriptions = ref('')\r\n    const loading = ref(false)\r\n\r\nconst section_length = ref('')\r\nconst addBudget = async () => {\r\n  if(boqLine.value.length == 0){\r\n    showError('Select atleast one budget line')\r\n    return ;\r\n  }\r\n  loading.value = true;\r\n  const payload = {\r\n    name: budget_name.value,\r\n    description: budget_descriptions.value,\r\n    project_id: project.value.id ,\r\n    section_length : section_length.value,\r\n    unit : unit.value.short_name,\r\n    boq_lines : boqLine.value\r\n  };\r\n\r\n  // console.log(payload)\r\n  // return ;\r\n  try {\r\n    // 1️⃣ Create the budget first\r\n    const response = await axiosInstance.post('budgets', payload);\r\n\r\n    // Extract the created budget's ID\r\n    const createdBudgetId = response.data.id;\r\n\r\n    // 2️⃣ Create the budget approval immediately\r\n    const approvalPayload = {\r\n      budget_id: createdBudgetId,\r\n      project_name: project.value.short_name,\r\n      status_id: 2,\r\n      requester_id: JSON.parse(localStorage.getItem(\"user\")).id \r\n    };\r\n\r\n    await axiosInstance.post('budget-approvals', approvalPayload);\r\n\r\n    // 3️⃣ Notify, refresh and clear form\r\n    showMessage('Budget Added and Approval Created');\r\n    getBudgets();\r\n    getBudgetApprovals();\r\n    clearForm();\r\n\r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.log(error);\r\n\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n\r\nconst showBudgetStatusCard = ref(false);\r\nconst budgetStatusCardType = ref('danger'); \r\nconst budgetStatusCardTitle = ref('');\r\nconst budgetStatusCardMessage = ref('');\r\nconst budgetStatusRemarks = ref('');\r\n\r\n\r\n\r\nconst budgetList = ref(false)\r\nconst fillBudget = (data) => {\r\nbudgetList.value = false\r\n\r\n  \r\n  const approval = budgetApprovals.value.find(app => app.budget_id === data.id);\r\n  \r\n  if (approval) {\r\n    if (approval.status?.name === 'approved') {\r\n      budget.value = data;\r\n      items.value = data.items;\r\n      showBudgetStatusCard.value = false;\r\n      console.log('Budget data loaded successfully');\r\n    } else if (approval.status?.name === 'Unapproved') {\r\n      showBudgetStatusCard.value = true;\r\n      budgetStatusCardType.value = 'warning';\r\n      budgetStatusCardTitle.value = 'Budget Unapproved';\r\n      budgetStatusCardMessage.value = 'This budget is pending approval and cannot be accessed yet.';\r\n      budgetStatusRemarks.value = approval.remark || 'No remarks provided.';\r\n      \r\n      budget.value = data;\r\n      items.value = [];\r\n    } else if (approval.status?.name === 'Rejected') {\r\n      showBudgetStatusCard.value = true;\r\n      budgetStatusCardType.value = 'danger';\r\n      budgetStatusCardTitle.value = 'Budget Rejected';\r\n      budgetStatusCardMessage.value = 'This budget has been rejected and cannot be accessed.';\r\n      budgetStatusRemarks.value = approval.remark || 'No rejection remarks provided.';\r\n      \r\n     \r\n      budget.value = data;\r\n      items.value = [];\r\n    }\r\n  } else {\r\n    \r\n     budget.value = data;\r\n      items.value = data.items;\r\n    showBudgetStatusCard.value = false;\r\n  }\r\n}\r\n\r\n   const selectedNewBudget = ref(null);\r\n const selectBudget = (budget) => {\r\n          selectedNewBudget.value = budget;  \r\n        };\r\n\r\nconst budgetApprovalColumns = ref(['Sno','budget_name','project_name','date_created','status','actions']);\r\nconst budgetApprovals = ref([]);\r\n const getBudgetApprovals = async () => {\r\n loading.value = true;\r\n  const response = await axiosInstance.get('budget-approvals');\r\n  budgetApprovals.value = response.data.map((item, index) => ({\r\n    ...item,\r\n    Sno: index + 1,\r\n    budget_name: item.budget?.name || 'N/A',\r\n    project: item.budget?.project_id || 'N/A', \r\n    project_name:item.budget?.project?.short_name,\r\n    requester: item.user.name || 'N/A',  \r\n    remark: item.remark || 'No rejection remark',\r\n    description: item.budget?.description || 'N/A',\r\n    date_created: new Date(item.created_at).toLocaleDateString(),\r\n    status: {\r\n        name: item.status?.name || 'N/A',\r\n        color: item.status?.color || 'default',\r\n    },\r\n  }));\r\n  loading.value = false;\r\n};\r\n\r\n const getBudgets = async () => {\r\n  budgets.value = []\r\n  budgets_loading.value = true;\r\n  try{\r\n  const response = await axiosInstance.get(`budgets?project_id=${project.value.id}`);\r\n  budgets.value = response.data;\r\n  }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n  budgets_loading.value = false;\r\n  }\r\n\r\n\r\n};\r\n\r\nconst loadData = async () => {\r\n  await getBudgetApprovals(); \r\n  await getBudgets();         \r\n};\r\n\r\nloadData();\r\n\r\n\r\n    watch(project, (newVal) => {\r\n        if (newVal && newVal.id) {\r\n            budget.value = ''\r\n            getBudgets();\r\n            clearForm()\r\n        }\r\n    });\r\n\r\n    \r\n\r\n     watch(budget, (newVal) => {\r\n        if (newVal ) {\r\n            items.value = newVal.items;  \r\n        }\r\n    });\r\n\r\n\r\n    const table_option = ref({\r\n    perPage: 10,\r\n    perPageValues: [5, 10, 20, 50],\r\n    skin: 'table table-hover',\r\n    columnsClasses: { actions: 'actions text-center' },\r\n    pagination: { nav: 'scroll', chunk: 5 },\r\n    texts: {\r\n        count: 'Showing {from} to {to} of {count}',\r\n        filter: '',\r\n        filterPlaceholder: 'Search...',\r\n        limit: 'Results:',\r\n    },\r\n    sortable: ['SNo', 'date_issued', 'fuel_issued'],\r\n    sortIcon: {\r\n        base: 'sort-icon-none',\r\n        up: 'sort-icon-asc',\r\n        down: 'sort-icon-desc',\r\n    },\r\n    resizableColumns: false,\r\n    searchable: true,\r\n\r\n});\r\n\r\nconst getProjects = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`projects?company_id=6&status=active`);\r\n        projects.value = response.data   \r\n        .filter(item => item.contracted === 'YES')\r\n        .filter(item => item.status === 'active');\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error)\r\n      \r\n    }\r\n};\r\n       const closeModal = ()=>{\r\n        const modalEl = document.querySelector('.modal.show');\r\n  if (modalEl) {\r\n    const modalInstance = bootstrap.Modal.getInstance(modalEl);\r\n    modalInstance?.hide();\r\n  }\r\n  document.body.classList.remove('modal-open');\r\n  document.body.style.overflow = 'auto';\r\n  document.body.style.paddingRight = '';\r\n    }\r\n\r\nconst whatsappAlert = inject('whatsappAlert');\r\n\r\n        const mobileView = ref(false)\r\n    const toggleMobileView = () => {\r\n        if (window.innerWidth < 991) {\r\n           mobileView.value = true \r\n        }\r\n    };\r\n\r\n onMounted(() => {  \r\n        toggleMobileView() \r\n        closeModal()\r\n        getProjects()\r\n        getUnits()\r\n        const message = JSON.parse(localStorage.getItem('user')).name + ' is in budget page';\r\n        const receiver = '255698267662'\r\n        const message_id = 'wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA='\r\n        whatsappAlert(message,message_id,receiver)\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst printReport = async () => {\r\n  if (!budget.value) {\r\n    showError(\"Please select a budget first\");\r\n    return;\r\n  }\r\n\r\n  const iframe = document.createElement(\"iframe\");\r\n  iframe.style.display = \"none\";\r\n  document.body.appendChild(iframe);\r\n\r\n  const currentDate = new Date().toLocaleDateString();\r\n\r\n  // Budget summary calculations\r\n  const allocatedAmount = budget.value.funded_amount || 0;\r\n  const totalBudgeted = budget.value.total_cost || 0;\r\n  const totalUsed = budget.value.total_used_cost || 0;\r\n  const totalBalance = totalBudgeted - totalUsed;\r\n  const unallocatedAmount = allocatedAmount - totalBudgeted;\r\n\r\n  const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Budget Report - ${budget.value.name}</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 14px; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }\r\n  .logo { width: 160px; height: auto; }\r\n  .report-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 14px; text-align: center; margin-left: auto; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; flex-grow: 1; }\r\n  .company-title h2 { margin: 5px 0; font-size: 18px; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 12px; line-height: 1.4; font-weight: normal; }\r\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 15px 0 8px 0; font-size: 16px; margin-top: 1.5rem; margin-bottom: 1.5rem; }\r\n  .budget-info table { width: 100%; border-collapse: collapse; margin-bottom: 12px; border: 1px solid #666; }\r\n  .budget-info th, .budget-info td { padding: 6px; border: 1px solid #666; font-size: 13px; text-align: center; }\r\n  .budget-info th { background-color: #f5f5f5; }\r\n  .item-name-title { font-weight: 900; font-size: 18px; text-align: left; margin: 20px 0 8px 0; padding: 10px; background-color: #222; color: white; border-radius: 5px; text-transform: uppercase; letter-spacing: 0.5px; }\r\n  .item-container { width: 100%; border: 1px solid #333; margin-bottom: 20px; padding: 10px; background-color: #fafafa; border-radius: 5px; }\r\n  .description-table { width: 100%; border-collapse: collapse; margin: 4px 0 8px 0; font-size: 12px; border: 1px solid #666; }\r\n  .description-table th, .description-table td { border: 1px solid #666; padding: 4px; }\r\n  .description-table th { background-color: #f8f8f8; }\r\n  .item-total-row { font-weight: bold; background-color: #d9d9d9; }\r\n  .text-right { text-align: right; }\r\n  .summary-row { font-weight: bold; background-color: #e9e9e9; }\r\n  .summary-row td:first-child { text-align: left; padding-left: 10px; }\r\n  .totals-table { width: 100%; border-collapse: collapse; margin-top: 20px; border: 1px solid #666; }\r\n  .totals-table th, .totals-table td { border: 1px solid #666; padding: 8px; text-align: center; font-size: 14px; font-weight: bold; }\r\n  .totals-table th { background-color: #f2f2f2; }\r\n  @media print { body { margin: 8mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"report-box\">\r\n     Report Date <br>\r\n    <span style=\"color:red;\">${currentDate}</span>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"reg-info\">\r\n  TIN: 135-489-247<br>\r\n  VRN: 40-032826C\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\r\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\r\n</div>\r\n\r\n<div class=\"section-title\">BUDGET DETAILS</div>\r\n<div><strong>BUDGET : ${budget.value.name} </strong></div> <br>\r\n<div class=\"item-container\">\r\n<div class=\"budget-info\">\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        <th>Project</th>\r\n        <th>Allocated Amount</th>\r\n        <th>Unallocated Amount</th>\r\n        <th>Budget Cost</th>\r\n        <th>Used Cost</th>\r\n        <th>Balance</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>${project.value.short_name}</td>\r\n        <td class=\"text-right\">${formatNumber(allocatedAmount)} </td>\r\n        <td class=\"text-right\">${formatNumber(unallocatedAmount)} </td>\r\n        <td class=\"text-right\">${formatNumber(totalBudgeted)} </td>\r\n        <td class=\"text-right\">${formatNumber(totalUsed)} </td>\r\n        <td class=\"text-right\">${formatNumber(totalBalance)} </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n</div>\r\n\r\n<div class=\"section-title\">BUDGET ITEMS DETAILS</div>\r\n\r\n${items.value.map((item, itemIndex) => {\r\n  let itemTotalBudgeted = 0;\r\n  let itemTotalUsed = 0;\r\n  let itemTotalBalance = 0;\r\n  \r\n  const descriptionsHtml = item.descriptions.map((desc, descIndex) => {\r\n    const descBudgeted = (desc.cost || 0) * (desc.quantity || 0) * (desc.quantity_2 || 1);\r\n    const descUsed = parseFloat(desc.used_cost) || 0;\r\n    const descBalance = descBudgeted - descUsed;\r\n    \r\n    itemTotalBudgeted += descBudgeted;\r\n    itemTotalUsed += descUsed;\r\n    itemTotalBalance += descBalance;\r\n    \r\n    return `\r\n      <tr>\r\n        <td>${desc.name || '-'}</td>\r\n        <td>${desc.units || '-'}</td>\r\n        <td class=\"text-right\">${desc.quantity || 0}</td>\r\n        <td class=\"text-right\">${desc.quantity_2 || 1}</td>\r\n        <td class=\"text-right\">${formatNumber(desc.cost || 0)}</td>\r\n        <td class=\"text-right\">${formatNumber(descBudgeted)}</td>\r\n        <td class=\"text-right\">${formatNumber(descUsed)}</td>\r\n        <td class=\"text-right\">${formatNumber(descBalance)}</td>\r\n      </tr>\r\n    `;\r\n  }).join('');\r\n  \r\n  return `\r\n    <div><strong>${item.name.toUpperCase()}</strong></div><br>\r\n    <div class=\"item-container\">\r\n      <table class=\"description-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Description</th>\r\n            <th>Units</th>\r\n            <th>Qty 1</th>\r\n            <th>Qty 2</th>\r\n            <th>Rate</th>\r\n            <th>Budgeted</th>\r\n            <th>Used</th>\r\n            <th>Balance</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          ${descriptionsHtml}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr class=\"item-total-row\">\r\n            <td colspan=\"5\" style=\"text-align: left; padding-left: 10px;\"><strong>Grand Total:</strong></td>\r\n            <td class=\"text-right\">${formatNumber(itemTotalBudgeted)}</td>\r\n            <td class=\"text-right\">${formatNumber(itemTotalUsed)}</td>\r\n            <td class=\"text-right\">${formatNumber(itemTotalBalance)}</td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    </div>\r\n  `;\r\n}).join('')}\r\n\r\n<table class=\"totals-table\">\r\n  <thead>\r\n    <tr>\r\n      <th colspan=\"3\">GRAND TOTAL SUMMARY</th>\r\n    </tr>\r\n    <tr>\r\n      <th>Total Budgeted</th>\r\n      <th>Total Used</th>\r\n      <th>Total Balance</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td class=\"text-right\">${formatNumber(totalBudgeted)} </td>\r\n      <td class=\"text-right\">${formatNumber(totalUsed)} </td>\r\n      <td class=\"text-right\">${formatNumber(totalBalance)} </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<div style=\"margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;\">\r\n  <p>© ${new Date().getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 135-489-247 | VRN: 40-032826C</p>\r\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n  const iframeDoc = iframe.contentWindow.document;\r\n  iframeDoc.open();\r\n  iframeDoc.write(printContent);\r\n  iframeDoc.close();\r\n\r\n  iframe.onload = () => {\r\n    iframe.contentWindow.focus();\r\n    iframe.contentWindow.print();\r\n    setTimeout(() => {\r\n      document.body.removeChild(iframe);\r\n    }, 1000);\r\n  };\r\n};\r\n\r\n\r\nconst getBudgetStatusClass = (budgetItem) => {\r\n  const approval = budgetApprovals.value.find(app => app.budget_id === budgetItem.id);\r\n  \r\n  if (approval) {\r\n    if (approval.status?.name === 'Unapproved') {\r\n      return 'status-unapproved'; // Purple for Unapproved\r\n    } else if (approval.status?.name === 'Approved') {\r\n      return 'status-approved'; // Green for Approved\r\n    } else if (approval.status?.name === 'Rejected') {\r\n      return 'status-rejected'; // Red for Rejected\r\n    }\r\n\r\n  }\r\n  \r\n  return ''; \r\n};\r\n\r\n\r\nconst boqLines = ref([])\r\nconst boqLine = ref('')\r\nconst getBoqLines = async()=>{\r\n  try{\r\n    const response = await axiosInstance.get(`project-boq-lines?project_id=${project.value.id}`)\r\n    boqLines.value = response.data.data\r\n  }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n    \r\n  }\r\n}\r\n\r\n\r\n\r\nconst deleteBudgetDescription = async (item) => {\r\n     no_edit.value = true\r\n     await  showConfirmation('Delete Record','Are you sure you want to delete ' + item.name + ' budget',`budget-item-descriptions/${item.id}?deleted=1&deleted_by_id=${user_id}`,'put')\r\n     no_edit.value = false\r\n}\r\n\r\n\r\n</script>\r\n<style scoped>\r\n.nav-link.active {\r\n    background-color: #007bff !important;\r\n    color: white !important;\r\n}\r\n\r\n.nav-item {\r\n    margin-right: 12px;\r\n    margin-left:5px;\r\n}\r\n\r\n.budgets-container {\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    max-width: 800px;\r\n    margin: 20px auto;\r\n    padding: 20px;\r\n    background: #f8f9fa;\r\n    border-radius: 10px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.budgets-title {\r\n    color: #2c3e50;\r\n    margin-bottom: 15px;\r\n    font-weight: 600;\r\n    text-align: center;\r\n}\r\n\r\n.budgets-buttons {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n}\r\n\r\n.budget-button {\r\n    display: inline-block;\r\n    padding: 10px 20px;\r\n    border-radius: 20px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n    text-align: center;\r\n    min-width: 120px;\r\n    border: none;\r\n    color: white;\r\n}\r\n\r\n.project-button {\r\n    background: linear-gradient(135deg, #2ecc71, #27ae60);\r\n}\r\n\r\n.active-budget {\r\n    background: linear-gradient(135deg, #498284, #019dcd);\r\n}\r\n\r\n.project-button:hover {\r\n    /* background: linear-gradient(135deg, #35e8ee, #308487); */\r\n        background: linear-gradient(135deg, #79d5d8, #225f61);\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 3px 6px rgba(0,0,0,0.15);\r\n}\r\n\r\n.new-project-button {\r\n    background: linear-gradient(135deg, #6da2c5, #010b11);\r\n}\r\n\r\n.new-project-button:hover {\r\n    background: linear-gradient(135deg, #2980b9, #1a6ea8);\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 3px 6px rgba(0,0,0,0.15);\r\n}\r\n.budget-button.project-button {\r\n  position: relative;\r\n  padding-right: 20px; /* Make space for the cross mark */\r\n}\r\n\r\n.close-mark {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.close-mark:hover {\r\n  color: red;\r\n}\r\n\r\n.budget-button {\r\n  margin: 2px;\r\n}\r\n\r\n/* Add these styles to your existing CSS */\r\n\r\n.status-unapproved {\r\n  background: linear-gradient(135deg, #8e44ad, #6c3483) !important; /* Purple gradient */\r\n}\r\n\r\n.status-unapproved:hover {\r\n  background: linear-gradient(135deg, #9b59b6, #7d3c98) !important; /* Lighter purple on hover */\r\n}\r\n\r\n/* If you need a red color for another status (e.g., Rejected) */\r\n.status-rejected {\r\n  background: linear-gradient(135deg, #e74c3c, #c0392b) !important; /* Red gradient */\r\n}\r\n\r\n.status-rejected:hover {\r\n  background: linear-gradient(135deg, #f1948a, #e74c3c) !important; /* Lighter red on hover */\r\n}\r\n\r\n/* If you want a green color for Approved status */\r\n.status-approved {\r\n  background: linear-gradient(135deg, #2ecc71, #27ae60) !important; /* Green gradient */\r\n}\r\n\r\n.status-approved:hover {\r\n  background: linear-gradient(135deg, #58d68d, #2ecc71) !important; /* Lighter green on hover */\r\n}\r\n\r\n/* Ensure these styles override the default project-button styles */\r\n.budget-button.project-button.status-unapproved,\r\n.budget-button.project-button.status-rejected,\r\n.budget-button.project-button.status-approved {\r\n  color: white !important;\r\n}\r\n\r\n.budget-button {\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.budget-button:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0a300aa8&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0a300aa8\"]])\n\nexport default __exports__"],"names":["user_permissions","JSON","parse","localStorage","getItem","permissions","user_id","id","useMeta","title","projects","ref","project","newBudget","showError","inject","formatNumber","showMessage","pillShimmer","tableShimmer","waitIndicator","loadingSpinner","printBudget","axiosInstance","axios","baseURL","process","add_amendment_item","budgets","budget","budgets_loading","add_item","add_description","edit_description","amend_description","items","budgetEdits","budgetEditColumns","getBudgetEdits","async","loading","value","response","get","data","map","item","index","Sno","editor","name","quantity","from_quantity","to_quantity","quantity_2","from_quantity_2","to_quantity_2","rate","from_rate","to_rate","cost","amendDescription","payload","budget_item_description_id","budget_description","remark","editor_id","post","user","find","i","descriptions","some","d","desc","last_editor","clearForm","error","message","console","log","add_fund","fund_amount","fund_description","fund_date","addFund","budget_id","issuer_id","amount","description","date","addFunds","document","getElementById","click","getBudgets","closeAllocationModal","funded_amount","put","Number","selectedAmendment","selectAmendment","amendmentItems","sno","qty","qty2","sum","toLocaleString","amendmenLists","amendmentListColumns","amendmentListItemColumns","amendmentItems2","amendmentItemColumns","clearItemForm","unit","getAmendments","requester","clearAmendment","pushItem","short_name","payload2","push","pullItem","filter","forEach","idx","sendAmendment","amendment","requester_id","changeBudgetStatus","status","approval_id","description_cost","add_remark","addBudgetRemark","Date","toISOString","split","remarker_id","description_id","newRemark","currentBalance","parseFloat","used_cost","toFixed","total_used_cost","consuptions","length","approved_by","debit","credit","Math","abs","balance","c","replace","getBudgetConsuption","showConfirmation","deleteBudgetRemark","itemCost","consuptionColumns","currentBudgetItem","remarker","budget_description_clicks","no_edit","fillEdits","includes","specification","units","u","updateDescription","targetItem","findIndex","oldCost","newCost","total_cost","getUnits","addDescription","budget_item_id","item_name","addItem","deleteBudget","approval","budgetApprovals","app","confirm","delete","budget_name","boqLines","boqLine","section_length","budget_descriptions","addBudget","project_id","boq_lines","createdBudgetId","approvalPayload","project_name","status_id","getBudgetApprovals","showBudgetStatusCard","budgetStatusCardType","budgetStatusCardTitle","budgetStatusCardMessage","budgetStatusRemarks","budgetList","fillBudget","selectedNewBudget","selectBudget","budgetApprovalColumns","date_created","created_at","toLocaleDateString","color","loadData","watch","newVal","perPage","perPageValues","skin","columnsClasses","actions","pagination","nav","chunk","texts","count","filterPlaceholder","limit","sortable","sortIcon","base","up","down","resizableColumns","searchable","getProjects","contracted","closeModal","modalEl","querySelector","modalInstance","bootstrap","Modal","getInstance","hide","body","classList","remove","style","overflow","paddingRight","whatsappAlert","mobileView","toggleMobileView","window","innerWidth","onMounted","receiver","message_id","printReport","iframe","createElement","display","appendChild","currentDate","allocatedAmount","totalBudgeted","totalUsed","totalBalance","unallocatedAmount","printContent","itemIndex","itemTotalBudgeted","itemTotalUsed","itemTotalBalance","descriptionsHtml","descIndex","descBudgeted","descUsed","descBalance","join","toUpperCase","getFullYear","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","getBudgetStatusClass","budgetItem","getBoqLines","deleteBudgetDescription","__exports__"],"sourceRoot":""}