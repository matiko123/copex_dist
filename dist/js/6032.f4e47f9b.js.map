{"version":3,"file":"js/6032.f4e47f9b.js","mappings":"28DA+EIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,kBAEjB,MAAMC,GAAcC,EAAAA,EAAAA,IAAO,eAErBC,GAAUC,EAAAA,EAAAA,IAAI,CAAC,KAAM,cAAe,cAAe,cAAe,UAAW,cAAe,SAAU,aAAa,aAAa,YAChIC,GAASD,EAAAA,EAAAA,IAAI,IACbE,GAAYF,EAAAA,EAAAA,IAAI,IAChBG,GAAkBH,EAAAA,EAAAA,KAAI,GACtBI,GAAeJ,EAAAA,EAAAA,IAAI,OAGnBK,GAAiBC,EAAAA,EAAAA,KAAS,IACD,QAAvBF,EAAaG,MACNN,EAAOM,MAEPN,EAAOM,MAAMC,QAAOC,GAAQA,EAAKC,OAASN,EAAaG,UAKhEI,GAAcL,EAAAA,EAAAA,KAAS,KACzB,MAAMM,EAAQV,EAAUK,MAAMM,KAAIJ,GAAQA,EAAKC,OAC/C,MAAO,IAAI,IAAII,IAAIF,IAAQJ,QAAOE,GAAQA,OAIxCK,EAAe,KACU,QAAvBX,EAAaG,MACbN,EAAOM,MAAQ,IAAIL,EAAUK,OAG7BN,EAAOM,MAAQL,EAAUK,MAAMC,QAAOC,GAAQA,EAAKC,OAASN,EAAaG,QAI7EN,EAAOM,MAAQN,EAAOM,MAAMM,KAAI,CAACJ,EAAMO,KAAP,IACzBP,EACHQ,IAAKD,EAAQ,OAKfE,EAAgBC,IAClBC,QAAQ,kDACRjB,EAAgBI,OAAQ,EACpBc,EACCC,OAAQ,IAAGH,KACXI,MAAMC,IACHC,IACAtB,EAAgBI,OAAQ,EACA,MAApBiB,EAASE,OACV7B,EAAY,gCAEX8B,EAAU,yBACVC,QAAQC,MAAM,yBAA0BL,EAASM,KAAKC,aAG7DC,OAAOH,IACJD,QAAQC,MAAM,yBAA0BA,EAAME,cAUpDJ,EAAaI,IACbE,OAAOC,KACTD,OAAOC,KAAKC,KAAK,CACfC,KAAM,QACNxC,MAAO,QACPyC,KAAMN,EACNO,QAAS,QAGXC,MAAM,UAAYR,IAIhBS,GAAexC,EAAAA,EAAAA,IAAI,CACvByC,QAAS,GACTC,cAAe,CAAC,EAAG,GAAI,GAAI,IAC3BC,KAAM,oBACNC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACLC,MAAO,oCACPxC,OAAQ,GACRyC,kBAAmB,YACnBC,MAAO,YAETC,SAAU,CAAC,KAAM,cAAe,cAAe,UAAW,cAAe,SAAU,aAAa,aAAc,eAC9GC,SAAU,CACRC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAERC,kBAAkB,IAGdnC,EAAgBoC,EAAAA,EAAAA,OAAa,CACjCC,QAAS,2DACTC,QAAS,CACP,eAAgB,mBAChB,OAAU,sBAKRC,EAAa,KAEjB,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAMC,QAAU,OACvBH,SAASI,KAAKC,YAAYN,GAG1B,MAAMO,EAAerE,EAAQQ,MAGvB8D,EAAwC,MAAvBjE,EAAaG,MAAgB,YAAe,IAAGH,EAAaG,QAGnF,IAAI+D,EAAgB,qGAIeD,koCA0CzBA,0DACgC,IAAIE,MAAOC,uGAIzCJ,EAAavD,KAAI4D,GAAQ,OAAMC,EAAWD,YAAaE,KAAK,8EAOxEtE,EAAeE,MAAMqE,SAAQC,IAC3BP,GAAgB,OAChBF,EAAaQ,SAAQH,IAGjBH,GADU,aAARG,EACe,OAAMI,EAAIJ,IAAQ,SAElB,OAAMI,EAAIJ,IAAQ,aAGvCH,GAAgB,WAIlBA,GAAiB,uFAQjB,MAAMQ,EAAYjB,EAAOkB,cAAcjB,SACvCgB,EAAUE,OACVF,EAAUG,MAAMX,GAChBQ,EAAUI,QAGVrB,EAAOsB,OAAS,KACdtB,EAAOkB,cAAcK,QACrBvB,EAAOkB,cAAcM,QAGrBC,YAAW,KACTxB,SAASI,KAAKqB,YAAY1B,KACzB,OAKDa,EAAcrC,GACXA,EACJmD,QAAQ,KAAM,KACdA,QAAQ,KAAM,KACdC,cACAC,MAAM,KACN7E,KAAI8E,GAAQA,EAAKC,OAAO,GAAGC,cAAgBF,EAAKG,MAAM,KACtDnB,KAAK,KAIJoB,GAAgB/F,EAAAA,EAAAA,IAAI,CAAC,KACrByB,EAAcuE,UAClB7F,EAAgBI,OAAQ,EAExB,IACE,MAAMiB,QAAiBH,EAAc4E,IAAI,IACzCrE,QAAQsE,IAAI1E,EAASM,KAAKA,MAC1BiE,EAAcxF,MAAQiB,EAASM,KAAKA,KAEhCN,EAASM,MAAiC,YAAzBN,EAASM,KAAKJ,QAAwByE,MAAMC,QAAQ5E,EAASM,KAAKA,MAGvF,MAAOD,GACPF,EAAUE,EAAME,SAAW,wBAC3BH,QAAQC,MAAM,aAAcA,GAV9B,QAYE1B,EAAgBI,OAAQ,I,OAI5B8F,EAAAA,EAAAA,KAAU,KACR5E,O,ymCCvUN,MAAM6E,EAAc,EAEpB","sources":["webpack://cork-vue3/./src/views/masters/remark_records.vue","webpack://cork-vue3/./src/views/masters/remark_records.vue?41ee"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">\r\n  \r\n        <div class=\"seperator-header layout-top-spacing\">\r\n            <div class=\"d-flex justify-content-between mt-3\">\r\n              <button class=\"btn btn-dark me-2 px-3\" @click=\"$router.go(-1)\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8\"/>\r\n  </svg>\r\n                </button>\r\n                \r\n                <div class=\"d-flex align-items-center\">\r\n                    <!-- Type filter dropdown -->\r\n                    <div class=\"dropdown me-3\">\r\n                        <select class=\"form-select\" v-model=\"selectedType\" @change=\"filterByType\">\r\n                            <option value=\"all\">All Types</option>\r\n                            <option v-for=\"type in uniqueTypes\" :key=\"type\" :value=\"type\">{{ type }}</option>\r\n                        </select>\r\n                    </div>\r\n                    \r\n                    <!-- Print button -->\r\n                    <button class=\"btn btn-success\" @click=\"printTable\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-printer me-1\">\r\n                            <polyline points=\"6 9 6 2 18 2 18 9\"></polyline>\r\n                            <path d=\"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\"></path>\r\n                            <rect x=\"6\" y=\"14\" width=\"12\" height=\"8\"></rect>\r\n                        </svg>\r\n                        Print Report\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n  \r\n        <div class=\"mt-3 mx-2\">     \r\n          <div v-if=\"loading_spinner\" class=\"text-center text-primary mt-2 mb-2\">\r\n            <span class=\"text-sm\">\r\n              <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n              Please wait ... \r\n            </span>\r\n          </div>\r\n        </div>   \r\n      \r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table\">\r\n                        <v-client-table :data=\"remarksRecord\" :columns=\"columns\" :options=\"table_option\">\r\n                            <!-- Simple display of quantity from endpoint -->\r\n                            <template #actions=\"props\">\r\n                              <a  href=\"javascript:void(0);\" title=\"Delete\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\">\r\n                                   <svg\r\n                                       xmlns=\"http://www.w3.org/2000/svg\"\r\n                                       width=\"24\"\r\n                                       height=\"24\"\r\n                                       viewBox=\"0 0 24 24\"\r\n                                       fill=\"none\"\r\n                                       stroke=\"currentColor\"\r\n                                       stroke-width=\"1.5\"\r\n                                       stroke-linecap=\"round\"\r\n                                       stroke-linejoin=\"round\"\r\n                                       class=\"text-danger\"\r\n                                       @click=\"deleteRemark(props.row.id);\"\r\n                                   >\r\n                                       <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                       <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                   </svg>\r\n                               </a>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script setup>\r\n    import { onMounted, ref, computed,inject } from 'vue';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Activity Logs' });\r\n    import axios from 'axios';\r\n    const showMessage = inject('showMessage');\r\n    // Add quantity to columns\r\n    const columns = ref(['id', 'sender_name' ,'description', 'remark_type', 'type_id', 'remarker_id', 'status', 'created_at','updated_at','actions']);\r\n    const Spares = ref([]);\r\n    const allSpares = ref([]); // Store all data for filtering\r\n    const loading_spinner = ref(false);\r\n    const selectedType = ref('all');\r\n    \r\n    // Computed property for filtered data\r\n    const filteredSpares = computed(() => {\r\n        if (selectedType.value === 'all') {\r\n            return Spares.value;\r\n        } else {\r\n            return Spares.value.filter(item => item.type === selectedType.value);\r\n        }\r\n    });\r\n    \r\n    // Computed property to get unique types for dropdown\r\n    const uniqueTypes = computed(() => {\r\n        const types = allSpares.value.map(item => item.type);\r\n        return [...new Set(types)].filter(type => type); // Remove empty values\r\n    });\r\n    \r\n    // Filter function\r\n    const filterByType = () => {\r\n        if (selectedType.value === 'all') {\r\n            Spares.value = [...allSpares.value]; // Show all data\r\n        } else {\r\n            // Filter data by selected type\r\n            Spares.value = allSpares.value.filter(item => item.type === selectedType.value);\r\n        }\r\n        \r\n        // Update SNo after filtering\r\n        Spares.value = Spares.value.map((item, index) => ({\r\n            ...item,\r\n            SNo: index + 1\r\n        }));\r\n    };\r\n    \r\n\r\n    const deleteRemark = (id) => {\r\n    if (confirm(\"Are you sure you want to delete this remark?\")) {\r\n        loading_spinner.value = true;\r\n            axiosInstance\r\n            .delete(`/${id}`)\r\n            .then((response) => {\r\n                fetchSpares();\r\n                loading_spinner.value = false;\r\n                if (response.status === 200) {\r\n                   showMessage('Remark Deleted successfully');\r\n                } else {\r\n                    showError('Fail to Delete Remark');\r\n                    console.error(\"Error deleting remark:\", response.data.message);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error deleting remark:\", error.message);\r\n            });  \r\n    \r\n   }\r\n   else{\r\n    return;\r\n   }\r\n    };\r\n\r\n    // Define local error handling functions\r\n    const showError = (message) => {\r\n      if (window.Swal) {\r\n        window.Swal.fire({\r\n          icon: 'error',\r\n          title: 'Error',\r\n          text: message,\r\n          padding: '2em',\r\n        });\r\n      } else {\r\n        alert('Error: ' + message);\r\n      }\r\n    };\r\n    \r\n    const table_option = ref({\r\n      perPage: 10,\r\n      perPageValues: [5, 10, 20, 50],\r\n      skin: 'table table-hover',\r\n      pagination: { nav: 'scroll', chunk: 5 },\r\n      texts: {\r\n        count: 'Showing {from} to {to} of {count}',\r\n        filter: '',\r\n        filterPlaceholder: 'Search...',\r\n        limit: 'Results:',\r\n      },\r\n      sortable: ['id', 'description', 'remark_type', 'type_id', 'remarker_id', 'status', 'created_at','updated_at', 'sender_name'],\r\n      sortIcon: {\r\n        base: 'sort-icon-none',\r\n        up: 'sort-icon-asc',\r\n        down: 'sort-icon-desc',\r\n      },\r\n      resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n      baseURL: 'https://bcftrack.trustdigital.space/public/api/v1/remark',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    });\r\n    \r\n    // Function to print the table directly - now uses filtered data\r\n    const printTable = () => {\r\n      // Create a hidden iframe for printing\r\n      const iframe = document.createElement('iframe');\r\n      iframe.style.display = 'none';\r\n      document.body.appendChild(iframe);\r\n      \r\n      // Get all columns\r\n      const printColumns = columns.value;\r\n      \r\n      // Get the type filter text for the title\r\n      const typeFilterText = selectedType.value === ' ' ? 'All Types' : ` ${selectedType.value}`;\r\n      \r\n      // Create HTML content for printing\r\n      let printContent = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n          <title>Activity Logs Report- ${typeFilterText}</title>\r\n          <style>\r\n            body {\r\n              font-family: Arial, sans-serif;\r\n              margin: 20px;\r\n            }\r\n            h1 {\r\n              text-align: center;\r\n              margin-bottom: 10px;\r\n            }\r\n            h2 {\r\n              text-align: center;\r\n              margin-bottom: 20px;\r\n              font-size: 16px;\r\n              color: #666;\r\n            }\r\n            table {\r\n              width: 100%;\r\n              border-collapse: collapse;\r\n              margin-bottom: 20px;\r\n            }\r\n            th, td {\r\n              border: 1px solid #ddd;\r\n              padding: 8px;\r\n              text-align: left;\r\n            }\r\n            th {\r\n              background-color: #f2f2f2;\r\n              font-weight: bold;\r\n            }\r\n            tr:nth-child(even) {\r\n              background-color: #f9f9f9;\r\n            }\r\n            .print-date {\r\n              text-align: right;\r\n              margin-bottom: 20px;\r\n              font-size: 12px;\r\n            }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <h1>Activity Logs Report</h1> <br> <br>\r\n          <h2>${typeFilterText}</h2>\r\n          <div class=\"print-date\">Printed on: ${new Date().toLocaleString()}</div>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                ${printColumns.map(col => `<th>${capitalize(col)}</th>`).join('')}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n      `;\r\n      \r\n      // Add filtered rows to the print content\r\n      filteredSpares.value.forEach(row => {\r\n        printContent += '<tr>';\r\n        printColumns.forEach(col => {\r\n          // Handle special case for quantity\r\n          if (col === 'quantity') {\r\n            printContent += `<td>${row[col] || 0}</td>`;\r\n          } else {\r\n            printContent += `<td>${row[col] || ''}</td>`;\r\n          }\r\n        });\r\n        printContent += '</tr>';\r\n      });\r\n      \r\n      // Close the HTML structure\r\n      printContent += `\r\n            </tbody>\r\n          </table>\r\n        </body>\r\n        </html>\r\n      `;\r\n      \r\n      // Write to the iframe and print it\r\n      const iframeDoc = iframe.contentWindow.document;\r\n      iframeDoc.open();\r\n      iframeDoc.write(printContent);\r\n      iframeDoc.close();\r\n      \r\n      // Wait for content to load before printing\r\n      iframe.onload = () => {\r\n        iframe.contentWindow.focus();\r\n        iframe.contentWindow.print();\r\n        \r\n        // Remove the iframe after printing (or after a timeout)\r\n        setTimeout(() => {\r\n          document.body.removeChild(iframe);\r\n        }, 1000);\r\n      };\r\n    };\r\n    \r\n    // Helper function to capitalize column names for display\r\n    const capitalize = (text) => {\r\n      return text\r\n        .replace(/_/g, ' ') // Replace all underscores with spaces\r\n        .replace(/-/g, ' ') // Replace all hyphens with spaces\r\n        .toLowerCase()\r\n        .split(' ')\r\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n        .join(' ');\r\n    };\r\n    \r\n\r\n    const remarksRecord = ref(['']);\r\n    const fetchSpares = async () => {\r\n      loading_spinner.value = true;\r\n      \r\n      try {\r\n        const response = await axiosInstance.get('');\r\n        console.log(response.data.data);\r\n        remarksRecord.value = response.data.data;\r\n        // Handle the specific response structure from your API\r\n        if (response.data && response.data.status === \"success\" && Array.isArray(response.data.data)) {\r\n         \r\n        }\r\n      } catch (error) {\r\n        showError(error.message || \"Failed to fetch data\");\r\n        console.error(\"API error:\", error);\r\n      } finally {\r\n        loading_spinner.value = false;\r\n      }\r\n    };\r\n    \r\n    onMounted(() => {\r\n      fetchSpares();\r\n    });\r\n</script>\r\n  \r\n<style>\r\n   .mymodal{\r\n    background-color: rgba(122, 122, 122, 0.653);\r\n   }\r\n   \r\n   @media print {\r\n     .layout-px-spacing {\r\n       margin: 0 !important;\r\n       padding: 0 !important;\r\n     }\r\n     \r\n     .seperator-header,\r\n     .panel-heading,\r\n     .custom-table .VueTables__search,\r\n     .custom-table .VueTables__limit,\r\n     .custom-table .VueTables__pagination {\r\n       display: none !important;\r\n     }\r\n     \r\n     .panel {\r\n       box-shadow: none !important;\r\n       border: none !important;\r\n     }\r\n   }\r\n</style> \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import script from \"./remark_records.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./remark_records.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./remark_records.vue?vue&type=style&index=0&id=5a1f5241&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","showMessage","inject","columns","ref","Spares","allSpares","loading_spinner","selectedType","filteredSpares","computed","value","filter","item","type","uniqueTypes","types","map","Set","filterByType","index","SNo","deleteRemark","id","confirm","axiosInstance","delete","then","response","fetchSpares","status","showError","console","error","data","message","catch","window","Swal","fire","icon","text","padding","alert","table_option","perPage","perPageValues","skin","pagination","nav","chunk","texts","count","filterPlaceholder","limit","sortable","sortIcon","base","up","down","resizableColumns","axios","baseURL","headers","printTable","iframe","document","createElement","style","display","body","appendChild","printColumns","typeFilterText","printContent","Date","toLocaleString","col","capitalize","join","forEach","row","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","replace","toLowerCase","split","word","charAt","toUpperCase","slice","remarksRecord","async","get","log","Array","isArray","onMounted","__exports__"],"sourceRoot":""}