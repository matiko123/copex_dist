"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[7979],{97979:function(e,l,a){a.r(l),a.d(l,{default:function(){return Yt}});a(26699);var t=a(66252),n=a(49963),s=a(2262),i=a(3577),o=a(26212),r=a.n(o),d=a(87066),u=a(56296),c=a(42119);const v={class:"layout-px-spacing"},m=(0,t.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Requisitions</span></li></ol></nav></div></li></ul>',1),p={class:"d-flex justify-content-between align-items-center mb-3"},b={key:0,class:"flex-grow-1 text-center"},g=(0,t._)("h3",{class:"mb-0"}," REQUISITIONS",-1),y=(0,t._)("button",{type:"submit",class:"input-group-text bg-white border-start-0"},[(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n      0-10 5 5 0 0 1 0 10z"})])],-1),_={class:"d-flex align-items-center gap-2"},h={key:0},w=["disabled"],f={key:0,class:"spinner-border spinner-border-sm text-success ms-2",role:"status","aria-hidden":"true"},k={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},x=(0,t._)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),S=(0,t._)("line",{x1:"12",y1:"8",x2:"12",y2:"16"},null,-1),q=(0,t._)("line",{x1:"8",y1:"12",x2:"16",y2:"12"},null,-1),V=[x,S,q],D={key:1},U={key:0},C={key:1},H={key:2,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},R=(0,t._)("polyline",{points:"3 6 5 6 21 6"},null,-1),T=(0,t._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0  \r\n                               1-2-2V6m3 0V4a2 2 0 0 \r\n                               1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),$=[R,T],I={key:3,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-check2-circle",viewBox:"0 0 16 16"},j=(0,t._)("path",{d:"M2.5 8a5.5 5.5 0 0 1 \r\n                               8.25-4.764.5.5 \r\n                               0 0 0 .5-.866A6.5 6.5 \r\n                               0 1 0 14.5 8a.5.5 \r\n                               0 0 0-1 0 5.5 5.5 \r\n                               0 1 1-11 0"},null,-1),N=(0,t._)("path",{d:"M15.354 3.354a.5.5 \r\n                               0 0 0-.708-.708L8 \r\n                               9.293 5.354 6.646a.5.5 \r\n                               0 1 0-.708.708l3 3a.5.5 \r\n                               0 0 0 .708 0z"},null,-1),A=[j,N],M=["onSubmit"],z={class:"text-center mb-4"},E={class:"row mb-3"},O={class:"col-md-8 col-lg-9"},L={class:"row g-2"},P={class:"col-2"},B=(0,t._)("label",{class:"form-label small"},"Proforma?",-1),W={class:"border rounded px-2 py-2 d-flex align-items-center"},Y={class:"small"},Q={class:"col-sm-6 col-md-4 col-lg-3"},F=(0,t._)("label",{class:"form-label small"},"Requisition Date",-1),J={key:0,class:"col-sm-6 col-md-4 col-lg-3"},G=(0,t._)("label",{class:"form-label small"},"Required Date",-1),X={key:1,class:"col-md-4"},Z=(0,t._)("label",{class:"form-label small"},"Select Approval Chain",-1),K={key:0,class:"row"},ee={key:0,class:"col-md-6 col-lg-4 mb-2"},le=(0,t._)("label",{class:"form-label small"},"Select Requisition Type",-1),ae={key:1,class:"col-md-6 col-lg-4 mb-2"},te=(0,t._)("label",{class:"form-label small"},"Select Group",-1),ne={key:2,class:"col-md-6 col-lg-4 mb-2"},se=(0,t._)("label",{class:"form-label small"},"Select Store",-1),ie={class:"col-md-6 col-lg-3 mb-2"},oe=(0,t._)("label",{class:"form-label small"},"Select Project",-1),re={key:3,class:"col-md-6 col-lg-4 mb-2"},de={class:"form-label small"},ue=["innerHTML"],ce={key:1},ve={key:4,class:"col-md-6 col-lg-4 mb-2"},me=(0,t._)("label",{class:"form-label small"},"Select An Item",-1),pe={key:5,class:"col-md-6 col-lg-4 mb-2"},be=(0,t._)("label",{class:"form-label small"},"Select Description",-1),ge={key:6,class:"col-md-6 col-lg-5 mb-2"},ye=(0,t._)("label",{class:"form-label small"},"Select Subcontractor",-1),_e={key:7,class:"col-md-6 col-lg-4 mb-2"},he=(0,t._)("label",{class:"form-label small"},"Proforma (PDF only)",-1),we={class:"col-md-12"},fe={key:1,class:"row mb-3"},ke=(0,t._)("div",{class:"col-12 mb-2"},[(0,t._)("h6",{class:"border-bottom pb-2"},"Add Items")],-1),xe={class:"col-md-6 col-lg-3 mb-2"},Se=(0,t._)("label",{class:"form-label small"},"Select Item",-1),qe={class:"col-md-6 col-lg-2 mb-2"},Ve=(0,t._)("label",{class:"form-label small"},"Unit",-1),De={class:"col-md-6 col-lg-3 mb-2"},Ue=(0,t._)("label",{class:"form-label small"},"Description",-1),Ce={class:"col-md-6 col-lg-2 mb-2"},He={class:"form-label small"},Re=["disabled"],Te={class:"col-md-6 col-lg-2 mb-2"},$e={class:"form-label small"},Ie={key:0},je={key:1},Ne={key:0,class:"form-control form-control-sm"},Ae=["disabled"],Me={key:0,class:"col-md-6 col-lg-2 mb-2"},ze={class:"form-label small"},Ee={class:"form-control form-control-sm"},Oe={key:1,class:"col-md-6 col-lg-3 mb-2"},Le=(0,t._)("label",{class:"form-label small"},"Select An Asset",-1),Pe={key:2,class:"col-md-6 col-lg-3 mb-2"},Be=(0,t._)("label",{class:"form-label small"}," Receiver ",-1),We={key:3,class:"col-md-6 col-lg-4 mb-2"},Ye={class:"form-label small"},Qe={class:"col-md-12 col-lg-12 mb-2 text-end"},Fe=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},[(0,t._)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,t._)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,t._)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1),Je=(0,t.Uk)(" Add Item "),Ge=[Fe,Je],Xe={key:2,class:"row mb-3"},Ze={class:"col-12"},Ke={class:"table-responsive custom-table table3"},el=["onClick"],ll=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},[(0,t._)("polyline",{points:"3 6 5 6 21 6"}),(0,t._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),al=[ll],tl={class:"d-flex flex-wrap gap-2 justify-content-end mt-4"},nl=["disabled"],sl={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},il={key:1},ol=["innerHTML"],rl={key:0,class:"row layout-top-spacing"},dl={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ul=["innerHTML"],cl={key:1,class:"panel p-0"},vl={class:"custom-table table3"},ml={class:"d-flex justify-content-center align-items-center gap-2"},pl=["onClick"],bl=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-info","data-bs-toggle":"modal","data-bs-target":"#requisitionItems"},[(0,t._)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,t._)("circle",{cx:"12",cy:"12",r:"3"})],-1),gl=[bl],yl=["onClick"],_l=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,t._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,t._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),hl=[_l],wl=["onClick"],fl=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,t._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),kl=[fl],xl=["onClick"],Sl=(0,t._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},null,-1),ql=(0,t._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},null,-1),Vl=[Sl,ql],Dl={class:"modal fade mymodal",id:"requisitionItems","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Ul={class:"modal-dialog modal-fullscreen"},Cl={class:"modal-content"},Hl={class:"modal-header"},Rl=(0,t._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Requisition Items",-1),Tl={class:"modal-body"},$l={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Il={class:"panel p-0"},jl={class:"custom-table table3 table-responsive"},Nl={class:"table table-bordered table-striped"},Al=(0,t._)("th",null,"Req#",-1),Ml=(0,t._)("th",null,"Requester",-1),zl=(0,t._)("th",null,"Requested",-1),El={key:0},Ol=(0,t._)("th",null,"Source",-1),Ll=(0,t._)("th",null,"Purpose",-1),Pl=(0,t._)("th",null,"Project",-1),Bl=(0,t._)("th",null,"Status",-1),Wl={key:0},Yl={key:0},Ql={colspan:"7"},Fl=(0,t._)("b",null," Brief Description : ",-1),Jl={key:1},Gl={colspan:"7"},Xl=(0,t._)("b",null," Remark : ",-1),Zl={class:"mb-2 text-center fw-bold",style:{"font-size":"x-large"}},Kl=(0,t._)("strong",null,"Total Cost: ",-1),ea={key:0,class:"mb-2 text-center"},la={class:"btn-group mb-3"},aa=["disabled"],ta=["disabled"],na=["disabled"],sa=["disabled"],ia={key:0,class:"btn-group mb-3 me-2"},oa=["disabled"],ra=["innerHTML"],da={key:1},ua={key:1,class:"mb-2"},ca={key:2,class:"input-group"},va=["placeholder"],ma=["disabled"],pa=["innerHTML"],ba={key:1},ga={class:"row layout-top-spacing"},ya=(0,t._)("div",{class:"col-12 d-flex align-items-center justify-content-between"},null,-1),_a={key:0,class:"mt-2 col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ha={class:"panel p-0"},wa={class:"custom-table table3"},fa={class:"table table-bordered table-striped"},ka=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"Item Requested"),(0,t._)("th",null,"Item Issued"),(0,t._)("th",null,"Quantity Issuing"),(0,t._)("th",null,"Item Condition")])],-1),xa=["placeholder","onUpdate:modelValue","max"],Sa={type:"number",class:"form-control"},qa={class:"panel p-0"},Va={class:"custom-table table3"},Da={key:3},Ua={class:"d-flex justify-content-center align-items-center gap-2"},Ca=["onClick"],Ha=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary","data-bs-toggle":"modal","data-bs-target":"#edit-requisition-items-modal"},[(0,t._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,t._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),Ra=[Ha],Ta=(0,t._)("button",{class:"btn btn-outline-primary"},"Diesel",-1),$a=(0,t._)("button",{class:"btn btn-outline-primary"},"Budget",-1),Ia={key:0,class:"mt-3"},ja=(0,t._)("h4",{class:"text-center text-danger"},"Rejection Details",-1),Na={class:"table table-bordered table-striped align-middle"},Aa=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"Sno"),(0,t._)("th",null,"Rejected By"),(0,t._)("th",null,"Date"),(0,t._)("th",null,"Reason")])],-1),Ma=(0,t._)("td",null,"Director",-1),za={key:1,class:"col-xl-6 col-lg-12 col-sm-12 layout-spacing"},Ea={class:"panel p-3 position-relative"},Oa=["href"],La=(0,t._)("h4",{class:"text-center"},"Proforma Invoice",-1),Pa=["src"],Ba={class:"modal fade mymodal",id:"edit-requisition-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editRequisitionModalLabel","aria-hidden":"true"},Wa={class:"modal-dialog modal-xl"},Ya={class:"modal-content"},Qa={class:"modal-header"},Fa=(0,t._)("h1",{class:"modal-title fs-5",id:"editRequisitionModalLabel"},"Edit Requisition",-1),Ja={class:"modal-body"},Ga={class:"row"},Xa={class:"col-md-4"},Za=(0,t._)("label",{for:"description"},"Status",-1),Ka={class:"col-md-4"},et=(0,t._)("label",{class:"form-label small"},"Select Project",-1),lt={class:"col-md-4"},at=(0,t._)("label",{class:"form-label small"},"Select Subcontractor",-1),tt={class:"row"},nt={class:"col-md-4"},st=(0,t._)("label",{class:"form-label small"},"Select Vendor",-1),it={class:"col-md-4"},ot=(0,t._)("label",{class:"form-label small"},"Select Approval Chain",-1),rt={class:"col-md-4"},dt=(0,t._)("label",{for:"description"},"beneficiary",-1),ut={class:"row"},ct={class:"col-md-12"},vt=(0,t._)("label",{for:"description"},"Description ",-1),mt={class:"modal-footer"},pt=["disabled"],bt={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},gt={key:1},yt={class:"modal fade mymodal",id:"edit-requisition-items-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editRequisitionItemsModalLabel","aria-hidden":"true"},_t={class:"modal-dialog modal-xl"},ht={class:"modal-content"},wt={class:"modal-header"},ft=(0,t._)("h1",{class:"modal-title fs-5",id:"editRequisitionItemsModalLabel"},"Edit Requisition Items",-1),kt={class:"modal-body"},xt={class:"row"},St={class:"col-md-3"},qt=(0,t._)("label",{for:"item"},"Item",-1),Vt={class:"col-md-3"},Dt=(0,t._)("label",{for:"units"},"Units",-1),Ut={class:"col-md-3"},Ct=(0,t._)("label",{for:"quantity"},"Quantity",-1),Ht={class:"col-md-3"},Rt=(0,t._)("label",{for:"rate"},"Rate",-1),Tt={class:"col-md-4"},$t=(0,t._)("label",{class:"form-label small"},"Select An Asset",-1),It={class:"col-md-4"},jt=(0,t._)("label",{class:"form-label small"},"Select Vendor",-1),Nt={class:"col-md-4"},At=(0,t._)("label",{for:"description"},"beneficiary",-1),Mt={class:"col-md-12"},zt=(0,t._)("label",{for:"description"},"Description",-1),Et={class:"modal-footer"},Ot=["disabled"],Lt={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},Pt={key:1};var Bt={setup(e){const l=new Date,a=l.toISOString().split("T")[0];(0,u.j)({title:"Requisitions "+a});const o=d.Z.create({baseURL:"https://bushman.ink/api/v1/"}),x=(0,s.iH)(!1),S=(0,t.f3)("waitIndicator"),q=(0,s.iH)(""),R=()=>kn.value,T=(0,c.tv)(),j=(0,c.yj)(),N=(0,s.iH)(["General","budget","labour","construction materials","spares"]),Fe=(0,s.iH)([]),Je=JSON.parse(localStorage.getItem("user")).permissions,ll=JSON.parse(localStorage.getItem("user")).id,bl=(0,s.iH)([]),_l=(0,s.iH)(""),fl=(0,s.iH)(!1),Sl=(0,s.iH)(""),ql=(0,t.f3)("tableShimmer"),Ha=(0,t.f3)("formatNumber"),Bt=(0,t.f3)("formatDate"),Wt=(0,t.f3)("loadingSpinner"),Yt=(0,s.iH)((new Date).toISOString().split("T")[0]),Qt=(0,s.iH)(""),Ft=(0,s.iH)(""),Jt=(0,s.iH)(""),Gt=(0,s.iH)(""),Xt=(0,s.iH)(),Zt=(0,s.iH)(""),Kt=(0,s.iH)([]),en=(0,s.iH)(0),ln=(0,s.iH)(""),an=(0,s.iH)([]),tn=(0,s.iH)(!1),nn=(0,s.iH)(["sno","ref_no","requester","purpose","type","project","date","cost","status","remark","actions"]),sn=(0,s.iH)(!1),on=(0,t.f3)("showMessage"),rn=(0,t.f3)("showError"),dn=(0,s.iH)([]),un=(0,s.iH)([]),cn=(0,s.iH)(""),vn=(0,s.iH)([""]),mn=(0,s.iH)([]),pn=(0,s.iH)(""),bn=(0,s.iH)(""),gn=(0,s.iH)(!1),yn=(0,s.iH)(""),_n=(0,s.iH)([]),hn=async()=>{const e=await o.get("vendors");_n.value=e.data},wn=(0,s.iH)([]),fn=async()=>{const e=await o.get("machines");wn.value=e.data.map((e=>({...e,name:e.name+" - "+e.type_name})))},kn=(0,t.Fl)((()=>{let e=an.value;if(Je.includes("is_md")&&(e=gn.value?e.filter((e=>["Rejected","On Hold","Remarked"].includes(e.status?.key))):e.filter((e=>["Unapproved","approved"].includes(e.status?.key)))),q.value){const l=q.value.toLowerCase();e=e.filter((e=>e.requester&&e.requester.toLowerCase().includes(l)||e.project&&e.project.toLowerCase().includes(l)||e.description&&e.description.toLowerCase().includes(l)||e.remark&&e.remark.toLowerCase().includes(l)||e.items&&e.items.some((e=>e.description&&e.description.toLowerCase().includes(l)||e.receiver&&e.receiver.toLowerCase().includes(l)||e.remark&&e.remark.toLowerCase().includes(l)))))}return e})),xn=(0,s.iH)([]),Sn=(0,s.iH)(""),qn=async()=>{const e=await o.get("projects");xn.value=e.data},Vn=(0,s.iH)([]),Dn=(0,s.iH)(""),Un=async e=>{Dn.value="",x.value=!0;const l=await o.get(`budgets?project_id=${e}`);Vn.value=l.data.filter((e=>"closed"===e.status)),x.value=!1};(0,t.YP)(Sn,(e=>{e&&Un(e.id)})),(0,t.YP)(_l,(e=>{e&&(dn.value=[],un.value=[],Vn.value=[],Dn.value="",Sn.value="",Zn())})),(0,t.YP)(Sl,(e=>{e&&(os(),Sl.value=e,dn.value=[],un.value=[],Zn())}));const Cn=(0,s.iH)([]),Hn=(0,s.iH)("");(0,t.YP)(Dn,(e=>{e&&(Cn.value=e.items)}));const Rn=(0,s.iH)([]),Tn=(0,s.iH)(""),$n=(0,s.iH)(""),In=(0,s.iH)("");(0,t.YP)(Hn,(e=>{e&&(Rn.value=e.descriptions,Ft.value=e.name)})),(0,t.YP)(Tn,(e=>{e&&(In.value=e.quantity*e.quantity_2,$n.value=e.quantity*e.quantity_2*e.cost-e.used_cost,en.value=e.id,es.value=e.name,Zt.value=e.units)}));const jn=(0,s.iH)([]),Nn=(0,s.iH)(""),An=async()=>{const e=await o.get("subcontractor-agreements");jn.value=e.data.map((e=>({...e,name:e.project.short_name+" - "+e.item+"( "+e.subcontracted_to+" )"})))};(0,t.YP)((()=>j.params.status_id),(e=>{tn.value=!0,hs()}));const Mn=async()=>{const e=await o.get("units");mn.value=e.data},zn=async e=>{fl.value=!0;const l={status_id:Qt.value,remark:Xt.value,...3==Qt.value&&{approval:{approval_group_id:e.approval_group_id,source:"requisition",source_id:e.id,requester_id:e.requester_id,items:e.items}}};try{await o.put(`requisitions/${e.id}`,l);hs(),on("Saved Successfully"),document.getElementById("close-requisition-modal").click()}catch(a){console.log(a),rn(a.message)}finally{fl.value=!1}},En=async()=>{if(fl.value=!0,6!=Sl.value.id){const l={requester_id:JSON.parse(localStorage.getItem("user")).id,approval_group_id:Sl.value.id,source_id:vs.value.id,source:"requisition",items:ns.value,remark:bn.value};try{await o.post("approval-lists",l);on(Sl.value.name+" created!"),os(),T.push(`/approval-chains/${Sl.value.id}`)}catch(e){console.error(e),rn(e.response.data.message)}finally{fl.value=!1}}else{vn.value=ns.value.map((e=>({requisition_item_id:e.id,quantity:e.issued_quantity?e.issued_quantity:0,store_item_id:e.store_item.id})));const l={issueData:{requisition_id:vs.value.id,issuer_id:JSON.parse(localStorage.getItem("user")).id},issueItems:vn.value};try{const e=await o.post("good-issue-notes",l);on(e.data.message),T.push("/good-issue-notes")}catch(e){rn(e.message),console.log(e)}finally{fl.value=!1}}},On=((0,t.Fl)((()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})),(0,s.iH)({perPage:50,perPageValues:[50,100,200,500],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","role_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1})),Ln=(0,s.iH)([]),Pn=async()=>{try{const e=await o.get("incidences?company_id=6");Ln.value=e.data}catch(e){rn(e.message),console.log(e)}},Bn=(0,s.iH)([]),Wn=async e=>{const l=await o.get(e);Bn.value=l.data.map(((e,l)=>({...e,SNo:l+1,name:e.name+(e.description?" - "+e.description:""),unit:e.unit??"---"})))},Yn=(0,s.iH)([]),Qn=async()=>{const e=await o.get("/labour-types");Yn.value=e.data},Fn=(0,s.iH)([]),Jn=async()=>{const e=await o.get("/statuses");Fn.value=e.data},Gn=e=>{cn.value=e.target.files[0]};(0,t.YP)(_l,(e=>{"spares"===e&&Wn("get-spares"),"labour"===e&&Qn(),"construction materials"===e&&Wn("get-materials")})),(0,t.YP)(Ft,(e=>{"labour"===_l.value&&e&&(Gt.value=e.rate)}));const Xn=(0,s.iH)(1),Zn=()=>{Jt.value="",Gt.value="",Xt.value="",Ft.value="",es.value="",Zt.value="",Kn.value="",Tn.value="",Hn.value="",pn.value="",bn.value="",yn.value=""},Kn=(0,s.iH)(""),es=(0,s.iH)(""),ls=()=>{_l.value="",Yt.value="",ln.value="",Jt.value="",Gt.value="",Xt.value="",Ft.value="",dn.value=[],un.value=[],sn.value=!1,bn.value="",Sl.value=""},as=()=>{if(!Jt.value)return void rn("Fill in all fields");let e=en.value,l="";6===Sl?.value?.id&&Ft.value?(e=Ft.value.id,l=Ft.value.name):Ft.value&&(e=Ft.value.id);const a={Sno:Xn.value,item_id:e,quantity:Jt.value,units:Zt.value?.short_name||Zt.value,rate:Number(Gt.value).toLocaleString()+"/=",item:["spares","labour","construction materials"].includes(_l.value)?Ft.value.name:Ft.value,description:Kn?.value?es.value+" For "+Kn.value.name:es.value,total:Number(Gt.value*Jt.value).toLocaleString()+"/=",receiver:pn.value.name??bn.value??"No Receiver"},t={Sno:Xn.value,item_id:e||en.value,quantity:Jt.value,rate:Gt.value,remark:["spares","labour","construction materials"].includes(_l.value)?Ft.value.name:Ft.value,description:Kn?.value?es.value+" For "+Kn.value.name:es.value,units:Zt.value?.short_name||Zt.value,asset_id:Kn.value.id,vendor_id:pn.value.id,beneficiary:bn.value};Xn.value=Xn.value+1,dn.value.push(a),un.value.push(t),Zn()},ts=e=>{dn.value=dn.value.filter((l=>l.Sno!==e)),un.value=un.value.filter((l=>l.Sno!==e)),dn.value.forEach(((e,l)=>{e.Sno=l+1})),un.value.forEach(((e,l)=>{e.Sno=l+1})),Xn.value=dn.value.length+1},ns=(0,s.iH)([]),ss=(0,s.iH)(["Sno","item","description","units","quantity","rate","total","receiver","actions"]),is=(0,s.iH)(["Sno","item","units","description","quantity","rate","total","receiver","actions"]),os=()=>{ns.value=[],Sl.value="",Xt.value="",Qt.value="",Dn.value="",Hn.value="",Sn.value="",Zt.value="",Ft.value="",Jt.value="",Gt.value="",es.value="",_l.value="",Tn.value="",Vn.value=[],Cn.value=[],Rn.value=[],gs.value=""},rs=(0,s.iH)([]),ds=e=>{rs.value.includes(e)?rs.value=rs.value.filter((l=>l!==e)):rs.value.push(e)},us=(0,s.iH)(""),cs=(0,s.iH)(""),vs=(0,s.iH)(""),ms=async e=>{vs.value=e,Kt.value=e.remarks,us.value=e.attachment,cs.value=e.subcontractor,e.subcontractor&&Vs(e.subcontractor,e.project),ns.value=e.items.map(((e,l)=>({...e,Sno:l+1,item:e.remark,asset_id:e.asset_id,description:e.description,rate:Number(e.rate).toLocaleString()+"/=",total:(e.quantity*e.rate).toLocaleString()+"/=",issued_quantity:"",store_item:""})))},ps=(0,s.iH)(0),bs=(0,s.iH)(!1),gs=(0,s.iH)(""),ys=(0,t.f3)("whatsappAlert"),_s=async()=>{bs.value=!0;const e=new FormData;e.append("requisition",JSON.stringify({date:Yt.value,description:gs.value,project_id:Sn.value.id,vendor_id:pn.value.id,required_date:ln.value,requester_id:JSON.parse(localStorage.getItem("user")).id,beneficiary:bn.value,subcontractor_agreement_id:Nn.value.id,approval_group_id:Sl.value.id})),e.append("type",JSON.stringify({name:_l.value,item_id:ps.value})),e.append("items",JSON.stringify(un.value)),cn.value&&e.append("image",cn.value);try{const l=await o.post("create-requisition",e,{headers:{"Content-Type":"multipart/form-data"}}),a=un.value.reduce(((e,l)=>e+l.quantity*l.rate),0),t=`Requisition with cost ${Ha(a)} was created by `+JSON.parse(localStorage.getItem("user")).name,n="wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhggQUM5QUMyMzIyRUVEMTJBOTNBNTIwQjRCMTA3QUNGQTQA",s=["255697315583","255698267662"];s.forEach((e=>{ys(t,n,e)})),on(l.data.message),bs.value=!1,6==Sl.value.id&&T.push("/requisition-group/6/all"),ls(),hs()}catch(l){rn(l.message),bs.value=!1,console.log(l)}},hs=()=>{const e=j.params.status_id;let l="requisitions";e&&"all"!==e&&(l+=`?status_id=${e}`),o.get(l).then((e=>{an.value=e.data.map(((e,l)=>{bl.value.find((l=>l.id===e.requisition_type_id));return{...e,beneficiary:e.beneficiary?e.beneficiary:e.vendor?e.vendor:"",ref_no:e.id,date:Bt(e.created_at),Sno:l+1,requester_id:e.requester_id,requester_email:e.requester_email,type:e.type,purpose:e.approval_group,attachment:e.attachment?"https://bushman.ink/api/v1//../../../"+e.attachment:null,status_id:e.status.id,cost:Ha(e.items.reduce(((e,l)=>e+l.quantity*l.rate),0)),status:{key:e.status,class:e.status_color}}})),tn.value=!1})).catch((e=>{rn(e.message),tn.value=!1}))},ws=(0,s.iH)([]),fs=async e=>{const l=await o.get(`get-store-items?store_id=${e}`);ws.value=l.data},ks=(0,s.iH)(""),xs=(0,s.iH)(""),Ss=async()=>{const e=await o.get("stores");ks.value=e.data.map((e=>({...e,name:e.project+" - "+e.name})))};(0,t.YP)(xs,(e=>{ws.value=[""],fs(e.id)}));const qs=()=>{"budget"===_l.value&&Jt.value*Gt.value>$n.value&&(Gt.value="",rn("Cost should not exceed "+Ha($n.value))),6===Sl?.value?.id&&Ft.value&&Jt.value>Ft.value.balance_quantity&&(Jt.value=Ft.value.balance_quantity,rn("only "+Jt.value+" available"))},Vs=async(e,l)=>{try{const a=new Date,t=String(a.getDate()).padStart(2,"0"),n=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear(),i=`${t}/${n}`,o=`${t}/${n}/${s}`,r=`${t}.${n}.${s}`,d=`${o}, ${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,u=`${String(e.id).padStart(3,"0")}/${i}`,c=`${e.id}`,v=`${e.id}/${s}`,m=e.payments&&e.payments.length>0?e.payments.reduce(((e,l)=>e+Number(l.quantity)),0):0,p=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Subcontractor Agreement Details</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\n  .logo { width: 160px; height: auto; }\n  .agreement-box { border: 1px solid #000; padding: 5px 10px; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; }\n  .company-title h2 { margin: 5px 0; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; }\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n  .title { text-align: center; font-weight: bold; margin: 20px 0 10px 0; }\n  .details-list { margin-top: 15px; line-height: 1.6; }\n  .details-list div { margin-bottom: 4px; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  table.items th, table.items td { border: 1px solid #000; padding: 6px; font-weight: normal; }\n  table.items thead tr th { background-color: #f8f8f8; border: 1px solid #000; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n<div class="header">\n  <img src="https://bushman.ink/copex.jpg" class="logo" />\n  <div class="agreement-box">\n    Agreement ID:<br>\n    <span style="color:red;">${u}</span>\n  </div>\n</div>\n\n<div class="reg-info">\n  TIN: 103-826-519<br>\n  VRN: 20-01-017530R\n</div>\n\n<div class="company-title">\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\n</div>\n\n<div class="section-title">SUBCONTRACTOR AGREEMENT DETAILS</div>\n<div class="title">${l.toUpperCase()} - ${e.item.toUpperCase()}</div>\n\n<div style="display: flex; justify-content: space-between; align-items: center;">\n  <div class="text-start"><strong>NOTICE NO. 00${v}</strong></div>\n  <div class="text-end"><strong>Date: ${r}</strong></div>\n</div>\n\n<div class="text-center"><strong>REF: SUBCONTRACTING NOTICE No. ${c}</strong></div>\n\n<div class="text-start"><p>Refer the subject matter above</p></div>\n<div class="text-start"><p>This form as internal notice on subcontracting piece work on <strong>${e.item.toUpperCase()}</strong></p></div>\n\n<div class="details-list">\n  <div><strong>Subcontracted:</strong> ${e.subcontracted_to}</div><br>\n  <div><strong>Item Description:</strong> ${e.item}</div><br>\n  <div><strong>Contracted Quantity:</strong> ${e.quantity}</div><br>\n  <div><strong>This payment certificate:</strong> ${e.payment_term.name}</div><br>\n  <div><strong>Subcontracted To:</strong> ${e.subcontracted_to}</div><br>\n  <div><strong>Payment Details:</strong> ${e.payment_number}</div><br>\n  <div><strong>Subcontracting Unit Price:</strong> TZS ${Ha(e.rate)} per ${e.unit}</div><br>\n  <div><strong>Total Amount of Contract:</strong> TZS ${Ha(e.quantity*e.rate)}</div><br>\n  <div><strong>Total Amount Archived:</strong></div><br>\n  <div><strong>This Certificate Payable Amount:</strong> ${Ha(m)} </div>\n</div>\n\n${e.payments&&e.payments.length>0?`\n<div class="section-title">PAYMENT HISTORY</div>\n<table class="items">\n  <thead>\n    <tr>\n      <th style="width: 30px;"><strong>Sno.</strong></th>\n      <th><strong>Date</strong></th>\n      <th><strong>Description</strong></th>\n      <th><strong>Amount</strong></th>\n    </tr>\n  </thead>\n  <tbody>\n    ${e.payments.map(((e,l)=>{const a=new Date(e.created_at),t=`${String(a.getDate()).padStart(2,"0")}.${String(a.getMonth()+1).padStart(2,"0")}.${a.getFullYear()}`;return`\n        <tr>\n          <td class="text-center">${l+1}</td>\n          <td class="text-center">${t}</td>\n          <td class="text-center">${e.description||""}</td>\n          <td class="text-center">${Ha(e.quantity)}</td>\n        </tr>\n      `})).join("")}\n  </tbody>\n</table>\n`:""}\n\n<div style="margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;">\n  <p>Â© ${(new Date).getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 135-489-247 | VRN: 40-032826C</p>\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\n</div>\n\n<div style="margin-top: 10px; font-size: 11px; text-align: left;">\n  ${d}\n</div>\n\n</body>\n</html>\n`,b=new Blob([p],{type:"text/html"});cs.value=URL.createObjectURL(b)}catch(a){rn(`Failed to generate agreement details: ${a.message}`)}},Ds=()=>{const e=document.querySelector(".modal.show");if(e){const l=bootstrap.Modal.getInstance(e);l?.hide()}document.body.classList.remove("modal-open"),document.body.style.overflow="auto",document.body.style.paddingRight="",os()},Us=async()=>{tn.value=!0;try{const e={subcontractor_agreement_id:Nn.value?.id,approval_group_id:Sl.value.id,description:Rs.value,project_id:Ts.value?.id||null,vendor_id:pn.value?.id,beneficiary:bn.value,status_id:$s.value?.id};await o.put(`/update-requisition/${Cs.value.id}`,e),hs(),document.getElementById("close_modal").click(),on("Requisition updated successfully"),js()}catch(e){rn(e.message),console.log(e)}finally{tn.value=!1}},Cs=(0,s.iH)(null),Hs=(0,s.iH)(null),Rs=(0,s.iH)(""),Ts=(0,s.iH)(""),$s=(0,s.iH)(""),Is=e=>{console.log("Editing row:",e),console.log("row.status_id:",e.status_id),console.log("row.status:",e.status),console.log("Statuses array:",Fn.value),Cs.value={...e},Ts.value=e.project_id&&xn.value.find((l=>l.id===e.project_id))||"",Nn.value=e.subcontractor_agreement_id&&jn.value.find((l=>l.id===e.subcontractor_agreement_id))||"",pn.value=e.vendor_id&&_n.value.find((l=>l.id===e.vendor_id))||"",Sl.value=e.approval_group_id&&Ln.value.find((l=>l.id===e.approval_group_id))||"",Rs.value=e.description,bn.value=e.beneficiary,$s.value=e.status_id&&Fn.value.find((l=>l.id===e.status_id))||""},js=()=>{Cs.value=null,Hs.value=null,Nn.value="",Ts.value="",es.value="",pn.value="",Sl.value="",bn.value="",$s.value=""},Ns=async()=>{tn.value=!0;try{const e={requisition_type_id:Hs.value.requisition_type_id,remark:Ft.value,quantity:Jt.value,rate:Gt.value,vendor_id:pn.value?.id,beneficiary:bn.value,description:es.value,units:Zt.value?.short_name||Zt.value,asset_id:Kn.value?.id};await o.put(`/requisition-type-items/${Hs.value.id}`,e),hs(),document.getElementById("close_editing").click(),on("Requisition item updated successfully"),js()}catch(e){rn(e.message),console.log(e)}finally{tn.value=!1}},As=e=>{Hs.value=e,"labour"===_l.value?Ft.value=Yn.value.find((l=>l.name===e.remark))||e.remark:["spares","construction materials"].includes(_l.value)?Ft.value=Bn.value.find((l=>l.name===e.remark))||e.remark:Ft.value=e.remark,Zt.value=mn.value.find((l=>l.short_name===e.units))||e.units,Jt.value=e.quantity,"string"===typeof e.rate?Gt.value=Number(e.rate.replace(/[^0-9.]/g,""))||0:Gt.value=Number(e.rate)||0,es.value=e.description,Kn.value=wn.value.find((l=>l.id===e.asset_id))||"",pn.value=_n.value.find((l=>l.id===e.vendor_id))||"",bn.value=pn.value?"":e.receiver},Ms=(0,s.iH)(""),zs=async()=>{const e=await o.get("activity-statuses/1");Ms.value=e.data,"open"===Ms.value.status&&setTimeout((async()=>{Ms.value.status="closed",await o.put("activity-statuses/1",{status:"closed"})}),6e4)},Es=(0,s.iH)(""),Os=async()=>{const e=await o.get("activity-statuses/9");Es.value=e.data},Ls=async e=>{try{const l=document.createElement("iframe");l.style.display="none",document.body.appendChild(l);const a=new Date(e.created_at||new Date),t=(a.getDate().toString().padStart(2,"0"),(a.getMonth()+1).toString().padStart(2,"0"),a.getFullYear(),`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Print Requisition</title>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 10px; font-size: 13px; }\n  .company-title { text-align: center; }\n  .company-title h1 { margin: 5px 0; }\n  .title { text-align: center; font-size: 20px; margin: 15px 0; }\n  hr { border: 0; border-top: 0.4px solid #000; margin: 10px 0; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  table th, table td { border: 0.5px solid #000; padding: 6px; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  .signature-line { border-top: 1px solid #000; width: 120px; margin: 50px auto 5px; }\n  .vendor-details { display: flex; justify-content: space-between; margin-top: 10px; }\n  .vendor-details table { width: 48%; border-collapse: collapse; }\n  .approval-chain-container { page-break-inside: avoid; margin-top: 40px; }\n  table.approval-chain { width: 100%; border-collapse: collapse; page-break-inside: avoid; }\n  table.approval-chain td { page-break-inside: avoid; }\n  @media print { body { margin: 10mm; } }\n</style>\n</head>\n<body>\n\n<div>REQUISITION NO. ${e.ref_no}</div>\n\n<div class="company-title">\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n</div>\n\n<hr>\n\n<div class="title">REQUISITION : ${e?.project?.toUpperCase()??"NO PROJECT"}</div>\n<hr>\n\n${e.purpose.toLowerCase().includes("voucher")?"":'\n<h3>VENDOR DETAILS</h3>\n<div class="vendor-details">\n  <table>\n    <tr><td style="width:35%;"><strong>Vendor Name</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>Address</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>Location</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n  </table>\n  <table>\n    <tr><td style="width:35%;"><strong>Phone</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>Email</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>TIN / VRN</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n  </table>\n</div>\n\n'}\n\n<p>Please provide the following as per requisition details below</p>\n<h3>CURRENCY : TSH</h3>\n\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>ITEM</th>\n      <th>DESCRIPTION</th>\n      <th>QTY</th>\n      <th>RATE</th>\n      <th>TOTAL</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${e.items.map(((e,l)=>`\n      <tr>\n        <td class="text-center">${l+1}</td>\n        <td>${e.remark||"N/A"}</td>\n        <td>${e.description||"N/A"}</td>\n        <td class="text-right">${e.quantity||0}</td>\n        <td class="text-right">${Number(e.rate||0).toLocaleString()}/=</td>\n        <td class="text-right">${(e.quantity*e.rate||0).toLocaleString()}/=</td>\n      </tr>\n    `)).join("")}\n    <tr>\n      <td colspan="6" class="text-right"><strong>TOTAL ${e.cost}</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n${e.description?`<p><strong>Note:</strong> ${e.description}</p>`:""}\n\n<div class="approval-chain-container">\n  <div class="title">APPROVAL CHAIN</div>\n  <table class="approval-chain">\n    <tr>\n      <td class="text-center">\n        <div style="font-weight:bold;">Prepared By</div>\n        <div class="signature-line"></div>\n        <div>${e.requester}</div>\n      </td>\n      <td class="text-center">\n        <div style="font-weight:bold;">Checked By</div>\n        <div class="signature-line"></div>\n        <div>Engineer</div>\n      </td>\n      <td class="text-center">\n        <div style="font-weight:bold;">Verified By</div>\n        <div class="signature-line"></div>\n        <div>Sr Accountant</div>\n      </td>\n      <td class="text-center">\n        <div style="font-weight:bold;">Approved By</div>\n        <div class="signature-line"></div>\n        <div>Director</div>\n      </td>\n    </tr>\n  </table>\n</div>\n${e.purpose.toLowerCase().includes("voucher")?'\n<div style="display: flex; justify-content: space-between;margin-top:20px; text-align: center; width: 100%;">\n  <div style="flex: 1;">\n    <div class="signature-line"></div>\n    <div>Receiver\'s Signature</div>\n  </div>\n  <div style="flex: 1;">\n    <div class="signature-line"></div>\n    <div>Date Received</div>\n  </div>\n</div>\n  ':""}\n\n</body>\n</html>\n`),n=l.contentWindow.document;n.open(),n.write(t),n.close(),l.onload=()=>{l.contentWindow.focus(),l.contentWindow.print(),setTimeout((()=>document.body.removeChild(l)),1e3)}}catch(l){rn(l.message)}},Ps=(0,s.iH)(!1),Bs=(0,t.f3)("showConfirmation"),Ws=(0,t.f3)("waitIndicator"),Ys=async e=>{try{Ps.value=!0;const l=await Bs("Delete Requisition",`Are you sure you want to delete Requisition No. ${e.ref_no} with cost ${e.cost}?`,`update-requisition/${e.id}?deleted=1`,"put");l?.refresh&&hs()}catch(l){console.error(l),rn(l.message)}finally{Ps.value=!1}};return(0,t.bv)((async()=>{Fe.value=N.value.filter((e=>"General"!==e||Je.includes("can_create_general_requisitions"))),tn.value=!0,zs(),Os(),hs(),Pn(),Mn(),Ss(),hn(),An(),fn(),qn(),Jn()})),(e,l)=>{const a=(0,t.up)("v-client-table"),o=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",v,[m,(0,t._)("div",p,[sn.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",b,[g,(0,t._)("form",{onSubmit:l[1]||(l[1]=(0,n.iM)((e=>R()),["prevent"])),class:"input-group container"},[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":l[0]||(l[0]=e=>q.value=e)},null,512),[[n.nr,q.value]]),y],32)])),(0,t._)("div",_,[(0,s.SU)(Je).includes("can_create_requisition")?((0,t.wg)(),(0,t.iD)("div",h,[sn.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:l[2]||(l[2]=e=>sn.value=!0),disabled:tn.value},[tn.value?((0,t.wg)(),(0,t.iD)("span",f)):((0,t.wg)(),(0,t.iD)("svg",k,V))],8,w))])):(0,t.kq)("",!0),sn.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",D,[(0,s.SU)(Je).includes("is_md")?((0,t.wg)(),(0,t.iD)("button",{key:0,type:"button",onClick:l[3]||(l[3]=e=>gn.value=!gn.value),class:(0,i.C_)(["btn d-flex align-items-center",gn.value?"btn-primary":"btn-outline-danger"])},[gn.value?((0,t.wg)(),(0,t.iD)("span",C,"All")):((0,t.wg)(),(0,t.iD)("span",U,"Trashed")),gn.value?((0,t.wg)(),(0,t.iD)("svg",I,A)):((0,t.wg)(),(0,t.iD)("svg",H,$))],2)):(0,t.kq)("",!0)]))])]),sn.value?((0,t.wg)(),(0,t.iD)("form",{key:0,class:"p-3 border rounded bg-white shadow",onSubmit:(0,n.iM)(_s,["prevent"]),id:"close"},[(0,t._)("h4",z,(0,i.zw)(Sl.value?.name?.toUpperCase()??" REQUISITIONS")+" REGISTRATION FORM",1),(0,t._)("div",E,[(0,t._)("div",O,[(0,t._)("div",L,[(0,t._)("div",P,[B,(0,t._)("div",W,[(0,t._)("input",{type:"checkbox",class:"form-check-input me-2",onChange:l[4]||(l[4]=e=>ds("proforma"))},null,32),(0,t._)("span",Y,(0,i.zw)(rs.value.includes("proforma")?"Yes":"No"),1)])]),(0,t._)("div",Q,[F,(0,t.wy)((0,t._)("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":l[5]||(l[5]=e=>Yt.value=e)},null,512),[[n.nr,Yt.value]])]),Yt.value?((0,t.wg)(),(0,t.iD)("div",J,[G,(0,t.wy)((0,t._)("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":l[6]||(l[6]=e=>ln.value=e)},null,512),[[n.nr,ln.value]])])):(0,t.kq)("",!0),ln.value?((0,t.wg)(),(0,t.iD)("div",X,[Z,(0,t.Wm)((0,s.SU)(r()),{class:"w-100",modelValue:Sl.value,"onUpdate:modelValue":l[7]||(l[7]=e=>Sl.value=e),placeholder:"Create an incidence",label:"name",options:Ln.value},null,8,["modelValue","options"])])):(0,t.kq)("",!0)])])]),Sl.value?((0,t.wg)(),(0,t.iD)("div",K,[[6].includes(Sl.value.id)?((0,t.wg)(),(0,t.iD)("div",ae,[te,(0,t.Wm)((0,s.SU)(r()),{modelValue:_l.value,"onUpdate:modelValue":l[9]||(l[9]=e=>_l.value=e),options:["construction materials","spares"],placeholder:"Select Group",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue"])])):((0,t.wg)(),(0,t.iD)("div",ee,[le,(0,t.Wm)((0,s.SU)(r()),{modelValue:_l.value,"onUpdate:modelValue":l[8]||(l[8]=e=>_l.value=e),options:Fe.value,placeholder:"Select Requisition Type",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])),6===Sl.value?.id?((0,t.wg)(),(0,t.iD)("div",ne,[se,(0,t.Wm)((0,s.SU)(r()),{modelValue:xs.value,"onUpdate:modelValue":l[10]||(l[10]=e=>xs.value=e),options:ks.value,placeholder:"Select Store",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),(0,t._)("div",ie,[oe,(0,t.Wm)((0,s.SU)(r()),{modelValue:Sn.value,"onUpdate:modelValue":l[11]||(l[11]=e=>Sn.value=e),options:xn.value,placeholder:"Select A Project",searchable:!0,label:"short_name",multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),"budget"===_l.value?((0,t.wg)(),(0,t.iD)("div",re,[(0,t._)("label",de,[x.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:(0,s.SU)(S)()},null,8,ue)):((0,t.wg)(),(0,t.iD)("span",ce,"Select A Budget"))]),(0,t.Wm)((0,s.SU)(r()),{disabled:x.value,modelValue:Dn.value,"onUpdate:modelValue":l[12]||(l[12]=e=>Dn.value=e),options:Vn.value,placeholder:"Select A Budget",searchable:!0,label:"name",multple:"false",required:!0,"allow-empty":!1},null,8,["disabled","modelValue","options"])])):(0,t.kq)("",!0),Dn.value?((0,t.wg)(),(0,t.iD)("div",ve,[me,(0,t.Wm)((0,s.SU)(r()),{modelValue:Hn.value,"onUpdate:modelValue":l[13]||(l[13]=e=>Hn.value=e),options:Cn.value,placeholder:"Select An Item",searchable:!0,label:"name",multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),Hn.value?((0,t.wg)(),(0,t.iD)("div",pe,[be,(0,t.Wm)((0,s.SU)(r()),{modelValue:Tn.value,"onUpdate:modelValue":l[14]||(l[14]=e=>Tn.value=e),options:Rn.value,placeholder:"Select An Option",searchable:!0,label:"name",multple:"false",required:!1,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),Tn.value?.name?.toLowerCase().includes("subcontractor")||rs.value.includes("subcontractor")?((0,t.wg)(),(0,t.iD)("div",ge,[ye,(0,t.Wm)((0,s.SU)(r()),{modelValue:Nn.value,"onUpdate:modelValue":l[15]||(l[15]=e=>Nn.value=e),options:jn.value,placeholder:"Select Subcontractor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),rs.value.includes("proforma")?((0,t.wg)(),(0,t.iD)("div",_e,[he,(0,t._)("input",{type:"file",class:"form-control form-control-sm",onChange:Gn,accept:"application/pdf"},null,32)])):(0,t.kq)("",!0),(0,t._)("div",we,[(0,t.wy)((0,t._)("textarea",{class:"form-control",placeholder:"Enter Brief Description of the requisition","onUpdate:modelValue":l[16]||(l[16]=e=>gs.value=e),required:""},null,512),[[n.nr,gs.value]])])])):(0,t.kq)("",!0),_l.value?((0,t.wg)(),(0,t.iD)("div",fe,[ke,(0,t._)("div",xe,[Se,"labour"===_l.value?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:0,modelValue:Ft.value,"onUpdate:modelValue":l[17]||(l[17]=e=>Ft.value=e),options:Yn.value,placeholder:"Select Labour",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])):6===Sl.value?.id?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:1,modelValue:Ft.value,"onUpdate:modelValue":l[18]||(l[18]=e=>Ft.value=e),options:ws.value,placeholder:"Select Store Item",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])):"spares"===_l.value||"construction materials"===_l.value?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:2,modelValue:Ft.value,"onUpdate:modelValue":l[19]||(l[19]=e=>Ft.value=e),options:Bn.value,placeholder:"Select Option",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])):(0,t.kq)("",!0),(0,t.wy)((0,t._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":l[20]||(l[20]=e=>Ft.value=e),placeholder:"Enter Item"},null,512),[[n.nr,Ft.value]])]),(0,t._)("div",qe,[Ve,(0,t.Wm)((0,s.SU)(r()),{modelValue:Zt.value,"onUpdate:modelValue":l[21]||(l[21]=e=>Zt.value=e),options:mn.value,placeholder:"Unit",label:"short_name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",De,[Ue,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":l[22]||(l[22]=e=>es.value=e),placeholder:"Enter Description"},null,512),[[n.nr,es.value]])]),(0,t._)("div",Ce,[(0,t._)("label",He," Quantity "+(0,i.zw)(Tn.value?" Budgeted : "+Tn.value.quantity*Tn.value.quantity_2:Ft.value?.balance_quantity?" Available : "+Ft.value.balance_quantity:""),1),(0,t.wy)((0,t._)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":l[23]||(l[23]=e=>Jt.value=e),placeholder:"Qty",step:"any",disabled:["budget"].includes(_l.value)&&!Tn.value||6===Sl.value?.id&&!Ft.value},null,8,Re),[[n.nr,Jt.value]])]),(0,t._)("div",Te,[(0,t._)("label",$e,["labour"===_l.value?((0,t.wg)(),(0,t.iD)("span",Ie,"Labour Rate")):((0,t.wg)(),(0,t.iD)("span",je,"Rate "+(0,i.zw)(Tn.value?" Budgeted : "+(0,s.SU)(Ha)(Tn.value.cost):""),1))]),"labour"===_l.value?((0,t.wg)(),(0,t.iD)("label",Ne,(0,i.zw)(Gt.value.toLocaleString())+"/=",1)):(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",{key:1,type:"number",class:"form-control form-control-sm","onUpdate:modelValue":l[24]||(l[24]=e=>Gt.value=e),placeholder:"Enter rate",step:"any",onInput:l[25]||(l[25]=e=>qs()),disabled:["budget"].includes(_l.value)&&!Tn.value},null,40,Ae)),[[n.nr,Gt.value]])]),6!==Sl.value?.id?((0,t.wg)(),(0,t.iD)("div",Me,[(0,t._)("label",ze,(0,i.zw)(Tn.value?" Balance : "+(0,s.SU)(Ha)($n.value):"Cost"),1),(0,t._)("label",Ee,(0,i.zw)((0,s.SU)(Ha)(Jt.value*Gt.value)),1)])):(0,t.kq)("",!0),6!==Sl.value?.id?((0,t.wg)(),(0,t.iD)("div",Oe,[Le,(0,t.Wm)((0,s.SU)(r()),{modelValue:Kn.value,"onUpdate:modelValue":l[26]||(l[26]=e=>Kn.value=e),options:wn.value,placeholder:"Select An Asset",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),6!==Sl.value?.id?((0,t.wg)(),(0,t.iD)("div",Pe,[Be,(0,t.Wm)((0,s.SU)(r()),{modelValue:yn.value,"onUpdate:modelValue":l[27]||(l[27]=e=>yn.value=e),options:["Vendor","Beneficiary"],placeholder:"Select Receiver"},null,8,["modelValue"])])):(0,t.kq)("",!0),6!==Sl.value?.id?((0,t.wg)(),(0,t.iD)("div",We,[(0,t._)("label",Ye,(0,i.zw)(yn.value),1),"Vendor"===yn.value?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:0,modelValue:pn.value,"onUpdate:modelValue":l[28]||(l[28]=e=>pn.value=e),options:_n.value,placeholder:"Select Vendor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])):(0,t.kq)("",!0),"Beneficiary"===yn.value?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",{key:1,type:"text",placeholder:"Enter Beneficiary Name",class:"form-control form-control-sm","onUpdate:modelValue":l[29]||(l[29]=e=>bn.value=e)},null,512)),[[n.nr,bn.value]]):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("div",Qe,[(0,t._)("button",{type:"button",class:"btn btn-outline-success btn-sm mt-4",onClick:l[30]||(l[30]=e=>as())},Ge)])])):(0,t.kq)("",!0),dn.value.length>0?((0,t.wg)(),(0,t.iD)("div",Xe,[(0,t._)("div",Ze,[(0,t._)("div",Ke,[(0,t.Wm)(a,{data:dn.value,columns:is.value,options:On.value},{actions:(0,t.w5)((e=>[(0,t._)("a",{href:"javascript:void(0);",title:"Delete",onClick:l=>ts(e.row.Sno)},al,8,el)])),_:1},8,["data","columns","options"])])])])):(0,t.kq)("",!0),(0,t._)("div",tl,[(0,t._)("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:l[31]||(l[31]=e=>os())},"Clear"),(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:l[32]||(l[32]=e=>(sn.value=!1,os())),id:"cancel"},"Cancel"),(0,t._)("button",{type:"submit",class:"btn btn-primary btn-sm",disabled:tn.value||dn.value.length<=0||bs.value},[bs.value?((0,t.wg)(),(0,t.iD)("span",sl)):((0,t.wg)(),(0,t.iD)("span",il,"Register"))],8,nl)])],40,M)):(0,t.kq)("",!0),tn.value?((0,t.wg)(),(0,t.iD)("div",{key:1,innerHTML:(0,s.SU)(ql)()},null,8,ol)):((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[sn.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",rl,[(0,t._)("div",dl,[Ps.value?((0,t.wg)(),(0,t.iD)("div",{key:0,innerHTML:(0,s.SU)(Ws)()},null,8,ul)):((0,t.wg)(),(0,t.iD)("div",cl,[(0,t._)("div",vl,[(0,t.Wm)(a,{data:(0,s.SU)(kn),columns:nn.value,options:On.value},{status:(0,t.w5)((e=>[(0,t._)("span",{class:(0,i.C_)(["badge inv-status","badge-"+e.row.status.class])},(0,i.zw)(e.row.status.key),3)])),sno:(0,t.w5)((({index:e})=>[(0,t.Uk)((0,i.zw)(e+0),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",ml,[(0,t._)("a",{href:"javascript:void(0);",title:"View","data-bs-toggle":"modal","data-bs-target":"#view_requisition",onClick:l=>ms(e.row)},gl,8,pl),(0,s.SU)(Je).includes("can_edit_requisition")?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:void(0);",title:"Edit",onClick:l=>Is(e.row),"data-bs-toggle":"modal","data-bs-target":"#edit-requisition-modal"},hl,8,yl)):(0,t.kq)("",!0),(0,s.SU)(Je).includes("can_print_lpo")?((0,t.wg)(),(0,t.iD)("a",{key:1,href:"javascript:void(0);",onClick:l=>Ls(e.row),class:"text-success me-2"},kl,8,wl)):(0,t.kq)("",!0),(0,s.SU)(Je).includes("can_delete_requisition")?((0,t.wg)(),(0,t.iD)("svg",{key:2,onClick:l=>Ys(e.row),style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-trash text-danger",viewBox:"0 0 16 16"},Vl,8,xl)):(0,t.kq)("",!0)])])),_:1},8,["data","columns","options"])])]))])]))],64)),(0,t._)("div",Dl,[(0,t._)("div",Ul,[(0,t._)("div",Cl,[(0,t._)("div",Hl,[Rl,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[33]||(l[33]=e=>os()),id:"close-requisition-modal"})]),(0,t._)("div",Tl,[(0,t._)("div",$l,[(0,t._)("div",Il,[(0,t._)("div",jl,[(0,t._)("table",Nl,[(0,t._)("thead",null,[(0,t._)("tr",null,[Al,Ml,zl,"Unapproved"!==vs.value.status?.key?((0,t.wg)(),(0,t.iD)("th",El,(0,i.zw)(vs.value.status?.key),1)):(0,t.kq)("",!0),Ol,Ll,Pl,Bl])]),(0,t._)("tbody",null,[(0,t._)("tr",null,[(0,t._)("td",null,(0,i.zw)(vs.value.id),1),(0,t._)("td",null,(0,i.zw)(vs.value.requester),1),(0,t._)("td",null,(0,i.zw)(vs.value.date),1),"Unapproved"!==vs.value.status?.key?((0,t.wg)(),(0,t.iD)("td",Wl,(0,i.zw)((0,s.SU)(Bt)(vs.value.approved_at)),1)):(0,t.kq)("",!0),(0,t._)("td",null,(0,i.zw)(vs.value.type),1),(0,t._)("td",null,(0,i.zw)(vs.value.purpose),1),(0,t._)("td",null,(0,i.zw)(vs.value.project),1),(0,t._)("td",null,[(0,t._)("span",{class:(0,i.C_)(["mb-0 badge",`badge-${vs.value.status?.class}`])},(0,i.zw)(vs.value.status?.key),3)])]),vs.value.description?((0,t.wg)(),(0,t.iD)("tr",Yl,[(0,t._)("td",Ql,[Fl,(0,t.Uk)(" "+(0,i.zw)(vs.value.description),1)])])):(0,t.kq)("",!0),vs.value.remark?((0,t.wg)(),(0,t.iD)("tr",Jl,[(0,t._)("td",Gl,[Xl,(0,t.Uk)(" "+(0,i.zw)(vs.value.remark),1)])])):(0,t.kq)("",!0)])])])])]),(0,t._)("div",Zl,[Kl,(0,t._)("span",null,(0,i.zw)(vs.value?.items?.reduce(((e,l)=>{const a=Number(l.quantity)||0,t=Number(l.rate)||0;return e+a*t}),0).toLocaleString()+"/="),1)]),"approved"!==vs.value.status?.key&&(0,s.SU)(Je).includes("can_approve_requisition")?((0,t.wg)(),(0,t.iD)("div",ea,[(0,t._)("div",la,[(0,t._)("button",{class:"btn btn-primary me-2",onClick:l[34]||(l[34]=e=>Qt.value=3),disabled:fl.value},"Approve",8,aa),(0,t._)("button",{class:"btn btn-danger me-2",onClick:l[35]||(l[35]=e=>Qt.value=4),disabled:fl.value},"Reject",8,ta),(0,t._)("button",{class:"btn btn-warning me-2",onClick:l[36]||(l[36]=e=>(Qt.value=17,Xt.value=vs.value.remark)),disabled:fl.value},"Hold Request",8,na),(0,t._)("button",{class:"btn btn-info me-2",onClick:l[37]||(l[37]=e=>(Qt.value=14,Xt.value=vs.value.remark)),disabled:fl.value},"Remark",8,sa)]),vs.value.requester_id==(0,s.SU)(ll)&&"closed"===Es.value?.status?((0,t.wg)(),(0,t.iD)("div",ia,[(0,t._)("button",{class:"btn btn-success",onClick:l[38]||(l[38]=e=>{Qt.value=3,zn(vs.value)}),disabled:fl.value},[fl.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:(0,s.SU)(Wt)()},null,8,ra)):((0,t.wg)(),(0,t.iD)("span",da,"Activate"))],8,oa)])):(0,t.kq)("",!0),Qt.value?((0,t.wg)(),(0,t.iD)("div",ua,[(0,t._)("span",{class:(0,i.C_)(["badge rounded-pill",{"bg-danger":4==Qt.value,"bg-success":3==Qt.value,"bg-warning":17==Qt.value,"bg-info":3!=Qt.value&&4!=Qt.value}]),style:{"font-size":"1rem"}},(0,i.zw)(3==Qt.value?"Approve Request":17==Qt.value?"Hold Request":4==Qt.value?"Reject Request":"Fill Remark"),3)])):(0,t.kq)("",!0),Qt.value?((0,t.wg)(),(0,t.iD)("div",ca,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:3==Qt.value?"Enter Approval Remark":4==Qt.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":l[39]||(l[39]=e=>Xt.value=e)},null,8,va),[[n.nr,Xt.value]]),(0,t._)("button",{class:"btn btn-primary",type:"button",disabled:fl.value,onClick:l[40]||(l[40]=e=>zn(vs.value))},[fl.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:(0,s.SU)(Wt)()},null,8,pa)):((0,t.wg)(),(0,t.iD)("span",ba,"Save"))],8,ma)])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("form",{onSubmit:l[41]||(l[41]=(0,n.iM)((e=>En()),["prevent"]))},[(0,t._)("div",ga,[ya,6===Sl.value?.id&&xs.value?((0,t.wg)(),(0,t.iD)("div",_a,[(0,t._)("div",ha,[(0,t._)("div",wa,[(0,t._)("table",fa,[ka,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(ns.value,(e=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id},[(0,t._)("td",null,(0,i.zw)(e.item),1),(0,t._)("td",null,[(0,t.Wm)((0,s.SU)(r()),{modelValue:e.store_item,"onUpdate:modelValue":l=>e.store_item=l,options:ws.value,placeholder:"Select Item",searchable:!0,multple:"false",label:"name",required:!0,"allow-empty":!1},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,t._)("td",null,[(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",placeholder:"available "+e.store_item.balance_quantity,"onUpdate:modelValue":l=>e.issued_quantity=l,required:"",max:e.store_item.balance_quantity},null,8,xa),[[n.nr,e.issued_quantity]])]),(0,t._)("td",null,[(0,t._)("label",Sa,(0,i.zw)(e.store_item.condition??"Select Item First"),1)])])))),128))])])])])])):(0,t.kq)("",!0),(0,t._)("div",{class:(0,i.C_)(["col-lg-12","col-sm-12","layout-spacing",us.value?"col-xl-6":"col-xl-12"])},[(0,t._)("div",qa,[(0,t._)("div",Va,[(0,t.Wm)(a,{data:ns.value,columns:ss.value,options:On.value},{description:(0,t.w5)((e=>[vs.value.subcontractor?((0,t.wg)(),(0,t.j4)(o,{key:0,class:"btn btn-outline-primary",to:`/subcontractor/${vs.value.subcontractor.id}`},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.description),1)])),_:2},1032,["to"])):e.row.asset_id&&"jobcard"!==vs.value.type?((0,t.wg)(),(0,t.j4)(o,{key:1,class:"btn btn-outline-primary",to:`/assets/fuel-statement/${e.row.asset_id}`},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.description),1)])),_:2},1032,["to"])):"jobcard"===vs.value.type?((0,t.wg)(),(0,t.j4)(o,{key:2,class:"btn btn-outline-primary",to:`/jobcard/${vs.value.item_id}/${e.row.asset_id}`},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.description),1)])),_:2},1032,["to"])):((0,t.wg)(),(0,t.iD)("span",Da,(0,i.zw)(e.row.description),1))])),actions:(0,t.w5)((e=>[(0,t._)("div",Ua,[(0,s.SU)(Je).includes("can_edit_requisition")?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:void(0);",title:"Edit",onClick:l=>As(e.row)},Ra,8,Ca)):(0,t.kq)("",!0),e.row.asset_id?((0,t.wg)(),(0,t.j4)(o,{key:1,to:`/assets/fuel-statement/${e.row.asset_id}`,onClick:Ds},{default:(0,t.w5)((()=>[Ta])),_:2},1032,["to"])):(0,t.kq)("",!0),"budget"===vs.value.type?((0,t.wg)(),(0,t.j4)(o,{key:2,to:`/requisition-budget/${e.row.item_id}`,onClick:Ds},{default:(0,t.w5)((()=>[$a])),_:2},1032,["to"])):(0,t.kq)("",!0)])])),_:1},8,["data","columns","options"])])]),Kt.value.length>0?((0,t.wg)(),(0,t.iD)("div",Ia,[ja,(0,t._)("table",Na,[Aa,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Kt.value,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id},[(0,t._)("td",null,(0,i.zw)(l+1),1),Ma,(0,t._)("td",null,(0,i.zw)(new Date(e.created_at).toLocaleDateString("en-GB")),1),(0,t._)("td",null,(0,i.zw)(e.remark),1)])))),128))])])])):(0,t.kq)("",!0)],2),us.value?((0,t.wg)(),(0,t.iD)("div",za,[(0,t._)("div",Ea,[(0,t._)("a",{href:us.value,target:"_blank",class:"stretched-link"},null,8,Oa),La,(0,t._)("embed",{src:us.value,type:"application/pdf",width:"100%",height:"600px"},null,8,Pa)])])):(0,t.kq)("",!0)])],32)]),(0,t._)("div",{class:"modal-footer"},[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:os},"Close")])])])]),(0,t._)("div",Ba,[(0,t._)("div",Wa,[(0,t._)("div",Ya,[(0,t._)("div",Qa,[Fa,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[42]||(l[42]=e=>js())})]),(0,t._)("form",{onSubmit:l[52]||(l[52]=(0,n.iM)((e=>Us()),["prevent"]))},[(0,t._)("div",Ja,[(0,t._)("div",Ga,[(0,t._)("div",Xa,[Za,(0,t.Wm)((0,s.SU)(r()),{modelValue:$s.value,"onUpdate:modelValue":l[43]||(l[43]=e=>$s.value=e),options:Fn.value,placeholder:"Select Status",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",Ka,[(0,t._)("div",null,[et,(0,t.Wm)((0,s.SU)(r()),{modelValue:Ts.value,"onUpdate:modelValue":l[44]||(l[44]=e=>Ts.value=e),options:xn.value,placeholder:"Select A Project",searchable:!0,label:"short_name","track-by":"id",multple:"false",required:!0,"allow-empty":!0,onRemove:l[45]||(l[45]=e=>Sn.value=null)},null,8,["modelValue","options"])])]),(0,t._)("div",lt,[at,(0,t.Wm)((0,s.SU)(r()),{modelValue:Nn.value,"onUpdate:modelValue":l[46]||(l[46]=e=>Nn.value=e),options:jn.value,placeholder:"Select Subcontractor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])]),(0,t._)("div",tt,[(0,t._)("div",nt,[(0,t._)("div",null,[st,(0,t.Wm)((0,s.SU)(r()),{modelValue:pn.value,"onUpdate:modelValue":l[47]||(l[47]=e=>pn.value=e),options:_n.value,placeholder:"Select Vendor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])]),(0,t._)("div",it,[ot,(0,t.Wm)((0,s.SU)(r()),{class:"w-100",modelValue:Sl.value,"onUpdate:modelValue":l[48]||(l[48]=e=>Sl.value=e),placeholder:"Create an incidence",label:"name",options:Ln.value},null,8,["modelValue","options"])]),(0,t._)("div",rt,[dt,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[49]||(l[49]=e=>bn.value=e),class:"form-control",placeholder:"beneficiary"},null,512),[[n.nr,bn.value]])])]),(0,t._)("div",ut,[(0,t._)("div",ct,[vt,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[50]||(l[50]=e=>Rs.value=e),class:"form-control",placeholder:"Enter description"},null,512),[[n.nr,Rs.value]])])])]),(0,t._)("div",mt,[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:l[51]||(l[51]=e=>js()),id:"close_modal"},"Close"),(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:tn.value||bs.value},[tn.value||bs.value?((0,t.wg)(),(0,t.iD)("span",bt)):((0,t.wg)(),(0,t.iD)("span",gt,"Edit"))],8,pt)])],32)])])]),(0,t._)("div",yt,[(0,t._)("div",_t,[(0,t._)("div",ht,[(0,t._)("div",wt,[ft,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[53]||(l[53]=e=>js())})]),(0,t._)("form",{onSubmit:l[63]||(l[63]=(0,n.iM)((e=>Ns()),["prevent"]))},[(0,t._)("div",kt,[(0,t._)("div",xt,[(0,t._)("div",St,[qt,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[54]||(l[54]=e=>Ft.value=e),class:"form-control",placeholder:"Enter Item",required:""},null,512),[[n.nr,Ft.value]])]),(0,t._)("div",Vt,[Dt,(0,t.Wm)((0,s.SU)(r()),{modelValue:Zt.value,"onUpdate:modelValue":l[55]||(l[55]=e=>Zt.value=e),options:mn.value,placeholder:"Select Unit",label:"short_name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",Ut,[Ct,(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":l[56]||(l[56]=e=>Jt.value=e),class:"form-control",placeholder:"Enter Quantity",min:"0",required:"",step:"any"},null,512),[[n.nr,Jt.value]])]),(0,t._)("div",Ht,[Rt,(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":l[57]||(l[57]=e=>Gt.value=e),class:"form-control",placeholder:"Enter Rate",min:"0",required:"",step:"any"},null,512),[[n.nr,Gt.value]])]),(0,t._)("div",Tt,[$t,(0,t.Wm)((0,s.SU)(r()),{modelValue:Kn.value,"onUpdate:modelValue":l[58]||(l[58]=e=>Kn.value=e),options:wn.value,placeholder:"Select An Asset",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",It,[jt,(0,t.Wm)((0,s.SU)(r()),{modelValue:pn.value,"onUpdate:modelValue":l[59]||(l[59]=e=>pn.value=e),options:_n.value,placeholder:"Select Vendor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",Nt,[At,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[60]||(l[60]=e=>bn.value=e),class:"form-control",placeholder:"beneficiary"},null,512),[[n.nr,bn.value]])]),(0,t._)("div",Mt,[zt,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[61]||(l[61]=e=>es.value=e),class:"form-control",placeholder:"Enter Description"},null,512),[[n.nr,es.value]])])])]),(0,t._)("div",Et,[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:l[62]||(l[62]=e=>js()),id:"close_editing"},"Close"),(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:tn.value||bs.value},[tn.value||bs.value?((0,t.wg)(),(0,t.iD)("span",Lt)):((0,t.wg)(),(0,t.iD)("span",Pt,"Update"))],8,Ot)])],32)])])])])}}};const Wt=Bt;var Yt=Wt}}]);
//# sourceMappingURL=7979.065f355f.js.map