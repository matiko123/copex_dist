{"version":3,"file":"js/8452.e035796b.js","mappings":"q0EAoH2BA,EAAAA,EAAAA,IAAI,MAA3B,MACMC,GAAWD,EAAAA,EAAAA,IAAI,CACnB,CACEE,GAAI,GACJC,KAAK,SAEN,CACCD,GAAI,GACJC,KAAK,aAGHC,GAAkBJ,EAAAA,EAAAA,KAAI,GACtBK,GAAcC,EAAAA,EAAAA,IAAO,eACrBC,GAAiBD,EAAAA,EAAAA,IAAO,kBACxBE,GAAYF,EAAAA,EAAAA,IAAO,aACnBG,GAAeH,EAAAA,EAAAA,IAAO,gBACtBI,GAAeJ,EAAAA,EAAAA,IAAO,iBAC5BK,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,kBAErB,MAAMC,GAASb,EAAAA,EAAAA,IAAI,IACbc,GAASd,EAAAA,EAAAA,IAAI,IACbe,GAAOf,EAAAA,EAAAA,IAAI,IACXgB,GAAchB,EAAAA,EAAAA,IAAI,IAClBiB,GAAUjB,EAAAA,EAAAA,KAAI,GACdkB,EAA2BC,UAC/BF,EAAQG,OAAQ,EACjB,MAAMC,EAAU,CACfC,UAAYT,EAAOO,MAAMlB,GACzBqB,cAAgBT,EAAOM,OAGxB,UACwBI,EAAcC,IAAK,wBAAuBT,EAAYI,MAAMlB,KAAKmB,GACxFhB,EAAY,cACZqB,IACAC,SAASC,eAAe,SAASC,QAChChB,EAAOO,MAAQ,GACfN,EAAOM,MAAQ,GACfL,EAAKK,MAAQ,GACd,MAAMU,GACNC,QAAQC,IAAIF,GACZtB,EAAUsB,EAAMG,SAVjB,QAYChB,EAAQG,OAAQ,IAORc,GAAelC,EAAAA,EAAAA,IAAI,CACrBmC,QAAS,GACTC,cAAe,CAAE,GAAG,IAAI,IAAI,IAAI,KAChCC,KAAM,kCACNC,eAAgB,CAAEC,QAAS,uBAC3BC,SAAU,CAAC,KAAM,aAAa,OAAO,eAAe,sBAAsB,mBAAmB,UAC7FC,SAAU,CACNC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAEVC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACHC,MAAO,oCACPC,OAAQ,GACRC,kBAAmB,YACnBC,MAAO,YAEXC,kBAAkB,IAGhB7B,EAAgB8B,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAKXC,GAAqBzD,EAAAA,EAAAA,IAAI,IACzB0D,GAA4B1D,EAAAA,EAAAA,IAAI,CAAC,MAAO,OAAO,cAAc,WAAW,SAAS,SAAS,SAAS,YACnG0B,EAAwBP,UACxB,IACF,MAAMwC,QAAiBnC,EAAcoC,IAAK,wBAC1CH,EAAmBrC,MAAQuC,EAASE,KAAKC,KAAI,CAACC,EAAKC,KAAN,IACxCD,EACHE,IAAKD,EAAQ,EACbE,OAAQH,EAAKG,OAAO/D,KACpBY,KAAMgD,EAAKI,KAAOzD,EAAaqD,EAAKK,SAAWL,EAAKI,MAAQ,qBAC5DrD,OAAQiD,EAAKxC,eAAiB,UAE/B,MAAMO,GACHtB,EAAUsB,EAAMG,SAChBF,QAAQC,IAAIF,GAXd,QAaE1B,EAAgBgB,OAAQ,I,OAQ5BiD,EAAAA,EAAAA,KAAU,KACR3C,O,ysDCvNN,MAAM4C,EAAc,EAEpB","sources":["webpack://cork-vue3/./src/views/jobcards/outsideMaintenances.vue","webpack://cork-vue3/./src/views/jobcards/outsideMaintenances.vue?a1e7"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Outside Maintenances</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class=\"d-flex me-4 mt-2\">\r\n                         \r\n        <button class=\"btn btn-dark me-2 px-3\" @click=\"$router.go(-1)\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8\"/>\r\n</svg>\r\n                </button>\r\n      \r\n                    </div>  \r\n\r\n\r\n\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                                      <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n                        <v-client-table v-else :data=\"outsideMaintenance\" :columns=\"outsideMaintenanceColumns\" :options=\"table_option\" >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">{{ props.row.status.name }}</span>\r\n                            </template>\r\n                            <template #actions=\"props\"\r\n                            >\r\n\r\n                        \r\n                                    <svg\r\n                                    v-if=\"props.row.status.id == 11\"\r\n                                                                data-bs-toggle=\"modal\" data-bs-target=\"#return-form\"\r\n                                                                @click=\"maintenance = props.row\"\r\n                                    xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n                            \r\n            \r\n                                \r\n                            </template>\r\n                           \r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- return form modal starts -->\r\n<div class=\"modal fade\" id=\"return-form\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-lg\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">OUTSIDE MAINTAINENCE RETURN NOTE</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n       <form @submit.prevent=\"updateOutsideMaintenance()\">\r\n      <div class=\"modal-body\">\r\n   \r\n  <div class=\"mb-3 row\">\r\n    <div class=\"col-md-12\">\r\n      <label class=\"col-form-label\">Status :</label>\r\n      <Multiselect\r\n        v-model=\"status\"\r\n        :options=\"statuses\"\r\n        :close-on-select=\"true\"\r\n        label=\"name\"\r\n        placeholder=\"Select Status\"\r\n        :searchable=\"true\"\r\n      />\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"mb-3\">\r\n    <label for=\"message-text\" class=\"col-form-label\">Return Remark:</label>\r\n    <textarea class=\"form-control\" id=\"message-text\" placeholder=\"Enter Return Remark\" v-model=\"remark\"></textarea>\r\n  </div>\r\n\r\n\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"close\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading\">\r\n          <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n          <span v-else>Save</span>\r\n        </button>\r\n      </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n         <!-- return form modal ends -->\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, ref,inject,watch,nextTick } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n\r\n    const machine_filter = ref(null);\r\n    const statuses = ref([\r\n      {\r\n        id: 12,\r\n        name:\"Fixed\"\r\n      },\r\n       {\r\n        id: 13,\r\n        name:\"Unfixed\"\r\n      }\r\n    ])\r\n    const loading_spinner = ref(true);\r\n    const showMessage = inject('showMessage');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const showError = inject('showError');\r\n    const tableShimmer = inject('tableShimmer');\r\n    const formatNumber = inject('formatNumber');\r\n    useMeta({ title: 'Jobcard Lists' });\r\n\r\nconst status = ref('')\r\nconst remark = ref('')\r\nconst cost = ref('')\r\nconst maintenance = ref('')\r\nconst loading = ref(false)\r\nconst updateOutsideMaintenance = async ()  =>{\r\n  loading.value = true\r\n const payload = {\r\n  status_id : status.value.id,\r\n  return_remark : remark.value,\r\n }\r\n\r\n try{\r\n  const response = await axiosInstance.put(`outside-maintenances/${maintenance.value.id}`,payload)\r\n  showMessage('Data saved')\r\n  getOutsideMaintenance()\r\n  document.getElementById('close').click()\r\n   status.value = '',\r\n   remark.value = '',\r\n   cost.value = ''\r\n }catch(error){\r\n  console.log(error)\r\n  showError(error.message)\r\n }finally{\r\n  loading.value = false\r\n\r\n }\r\n}\r\n\r\n\r\n\r\n    const table_option = ref({\r\n        perPage: 50,\r\n        perPageValues: [ 50,100,200,500,1000],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'vehicle_no','date','service_type','current_service_kms','next_service_kms','status'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n  \r\n\r\nconst outsideMaintenance = ref([])\r\nconst outsideMaintenanceColumns = ref(['sno', 'item','description','quantity','vendor','status','remark','actions']);\r\nconst getOutsideMaintenance = async () =>{\r\n      try{\r\n    const response = await axiosInstance.get(`outside-maintenances`)\r\n    outsideMaintenance.value = response.data.map((item,index)=>({\r\n      ...item,\r\n      sno: index + 1,\r\n      vendor: item.vendor.name,\r\n      cost: item.rate ? formatNumber(item.quantity * item.rate) : 'no cost negotiated',\r\n      remark: item.return_remark ?? '---'\r\n    }))\r\n    }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n    }finally{\r\n        loading_spinner.value = false\r\n    }\r\n}\r\n\r\n\r\n  \r\n\r\n\r\n    onMounted(() => {\r\n      getOutsideMaintenance()\r\n    });\r\n</script>\r\n\r\n","import script from \"./outsideMaintenances.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./outsideMaintenances.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["ref","statuses","id","name","loading_spinner","showMessage","inject","loadingSpinner","showError","tableShimmer","formatNumber","useMeta","title","status","remark","cost","maintenance","loading","updateOutsideMaintenance","async","value","payload","status_id","return_remark","axiosInstance","put","getOutsideMaintenance","document","getElementById","click","error","console","log","message","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axios","baseURL","process","outsideMaintenance","outsideMaintenanceColumns","response","get","data","map","item","index","sno","vendor","rate","quantity","onMounted","__exports__"],"sourceRoot":""}