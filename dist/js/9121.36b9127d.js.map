{"version":3,"file":"js/9121.36b9127d.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/globalSearch.js","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue?f760","webpack://cork-vue3/./src/views/hr/employees/attendance.vue","webpack://cork-vue3/./src/views/hr/employees/attendance.vue?6225"],"sourcesContent":["export function globalSearch(data, keyword) {\r\n  const lowerKeyword = keyword.toLowerCase().trim()\r\n  if (!lowerKeyword) return data\r\n\r\n  const containsKeyword = obj => {\r\n    if (obj == null) return false\r\n    if (typeof obj === 'string') return obj.toLowerCase().includes(lowerKeyword)\r\n    if (Array.isArray(obj)) return obj.some(containsKeyword)\r\n    if (typeof obj === 'object')\r\n      return Object.values(obj).some(containsKeyword)\r\n    return false\r\n  }\r\n\r\n  return data.filter(item => containsKeyword(item))\r\n}","<template>\r\n     <form @submit.prevent class=\"input-group container\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control border-end-0\"\r\n      placeholder=\"Search a word...\"\r\n      v-model=\"filter\"\r\n    >\r\n    <span class=\"input-group-text bg-white border-start-0\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z\"/>\r\n      </svg>\r\n    </span>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\n\r\n\r\nconst emit = defineEmits(['update:filterValue'])\r\nconst props = defineProps({\r\n  filterValue: String\r\n})\r\nconst filter = ref(props.filterValue || null)\r\n\r\nwatch(filter, val => emit('update:filterValue', val))\r\n</script>\r\n","import script from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Attendances</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span> Employee Attendance </span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <!-- compamy settings starts -->\r\n    <teleport to=\"#breadcrumb\">\r\n         <ul class=\"navbar-nav flex-row ms-auto\">\r\n                <li class=\"nav-item more-dropdown\">\r\n                    <div class=\"dropdown custom-dropdown-icon\">\r\n                        <a href=\"javascript:;\" class=\"nav-link dropdown-toggle\" id=\"ddlSettings\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                            <span>Select a company</span>\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"24\"\r\n                                height=\"24\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                stroke-width=\"2\"\r\n                                stroke-linecap=\"round\"\r\n                                stroke-linejoin=\"round\"\r\n                                class=\"feather feather-chevron-down\"\r\n                            >\r\n                                <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n                            </svg>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"ddlSettings\">\r\n                            <li @click=\"getData(5)\"><a class=\"dropdown-item\" data-value=\"Mail\" href=\"javascript:void(0);\">BUSHMAN SAFARI</a></li>\r\n                            <li @click=\"getData(6)\"><a class=\"dropdown-item\" data-value=\"Settings\" href=\"javascript:void(0);\">COPEX CONTRACTORS</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n    </teleport>\r\n\r\n <h3 class=\"text-center\">\r\n  {{ company_id == 5 ? 'BUSHMAN SAFARI TRACKERS ATTENDANCE' : company_id == 6 ? 'COPEX CONTRACTORS ATTENDANCE' : null }}\r\n</h3>\r\n\r\n        <div class=\"d-flex justify-content-end align-items-center mb-3\">\r\n            <div class=\"d-flex align-items-center gap-2 me-2\">\r\n                <input \r\n                    type=\"date\" \r\n                    v-model=\"selectedDate\" \r\n                    @change=\"getEmployeeAttendances\"\r\n                    class=\"form-control form-control-sm\" \r\n                    style=\"width: 150px;\"\r\n                />\r\n            </div>\r\n            <button @click=\"printAttendance()\" class=\"btn btn-success\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n                    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\r\n                </svg>\r\n            </button>\r\n        </div> \r\n        \r\n              <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"attendances\" :columns=\"columns\" :options=\"table_option\">\r\n                            <template #status=\"props\">\r\n                                <span \r\n                                    class=\"badge\" \r\n                                    :class=\"{\r\n                                        'bg-success': props.row.status === 'Check In',\r\n                                        'bg-danger': props.row.status === 'absent',\r\n                                        'bg-info': props.row.status === 'On Leave'\r\n                                    }\"\r\n                                >\r\n                                    {{ props.row.status }}\r\n                                </span>\r\n                            </template>\r\n                             <template #actions=\"props\">\r\n                              <svg \r\n                               data-bs-toggle=\"modal\" data-bs-target=\"#fill-attendance\"\r\n                               @click=\"selected_employee = props.row\"\r\n                              style=\"cursor: pointer;\" v-if=\"props.row.status === 'absent'\" xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-eye text-primary\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n  <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n</svg>\r\n                            </template>\r\n\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n\r\n    </div>\r\n\r\n    <!-- attendance filling modal starts -->\r\n                      <div class=\"modal fade mymodal\" id=\"fill-attendance\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\"> EMPLOYEE ATTENDANCE FOR <i><b>{{ selected_employee?.name }}</b></i>  ON  <i>{{ selectedDate }}</i></h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close-attendance\" ></button>\r\n      </div>\r\n      <div class=\"modal-body\" >\r\n         <div class=\"row\">\r\n                <div class=\"col-md-3\">\r\n                        <label class=\"form-label\">Select Status</label>\r\n                                           <Multiselect\r\n  v-model=\"status\"\r\n  :options=\"['PRESENT','On Leave']\"\r\n  placeholder=\"Select Status\"  \r\n  :searchable=\"true\" \r\n  :allow-empty=\"false\"\r\n/>        \r\n                </div>\r\n                                           <div class=\"col-md-6\" >\r\n                          <label class=\"form-label\">Enter Attendance Time</label>\r\n                         <input class=\"form-control\" type=\"datetime-local\" step=\"any\" v-model=\"time\">\r\n\r\n                        </div>\r\n                                              <div class=\"col-md-12\"  >\r\n                          <label class=\"form-label\">Enter Brief Description</label>\r\n                          <input class=\"form-control\" type=\"text\" step=\"any\" v-model=\"description\" placeholder=\"Enter Brief description\">\r\n                        </div>\r\n         </div>\r\n\r\n\r\n         \r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"button\" class=\"btn btn-success btn-sm py-2 px-2\" @click=\"fillAttendance()\" :disabled=\"sending || !time\">\r\n        <span v-if=\"sending\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else>Save</span>\r\n        </button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n     <!-- attendance filling modal ends -->\r\n</template>\r\n<script setup>\r\n    import { onMounted, ref, inject, computed } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import globalSearchField from '@/components/reusables/globalSearchField.vue';\r\n    import { globalSearch } from '@/components/reusables/globalSearch';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    useMeta({ title: 'Employee Attendance' });  \r\n    const company_id = ref('');\r\n    const showError = inject('showError');\r\n    const formatNumber = inject('formatNumber');\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['SNo', 'name', 'status', 'check_in_time','description','actions']);    \r\n    const attendances = ref([]);\r\n    const selectedDate = ref(new Date().toISOString().split('T')[0]);\r\n    \r\n\r\n    const status = ref('')\r\n    const description = ref('')\r\n    const time = ref('')\r\n\r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 30, 50, 100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'name', 'status', 'check_in_time'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const selected_employee = ref('')\r\n\r\n    const getEmployeeAttendances = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await axiosInstance.get(`head-office-attendances?date=${selectedDate.value}&company_id=${company_id.value}`);\r\n            attendances.value = response.data.map((item, index) => ({\r\n                ...item,\r\n                SNo: index + 1,\r\n                name: item.name,\r\n                status: item.status,\r\n                check_in_time: item.check_in_time || '--'\r\n            }));\r\n        } catch (error) {\r\n          console.log(error)\r\n            showError(error.message);\r\n        }finally{\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n    const printAttendance = async () => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    const companyName = company_id.value == 5 ? 'BUSHMAN SAFARI TRACKERS' : company_id.value == 6 ? 'COPEX CONTRACTORS CO.LTD' : 'COMPANY';\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Employee Attendance Report</title>\r\n<style>\r\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\r\n  .text-style { font-family: 'Courier New', monospace; }\r\n  .company-title { text-align: center; }\r\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; page-break-inside: auto; }\r\n  thead { display: table-header-group; }\r\n  tfoot { display: table-footer-group; }\r\n  tr { page-break-inside: avoid; page-break-after: auto; }\r\n  th, td { border: 0.5px solid #000; padding: 6px; }\r\n  th { background-color: #f8f8f8; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\r\n  .badge { padding: 4px 8px; border-radius: 4px; font-weight: bold; }\r\n  .badge-present { background-color: #28a745; color: white; }\r\n  .badge-absent { background-color: #dc3545; color: white; }\r\n  .summary-row { page-break-inside: avoid; }\r\n  @media print { \r\n    body { margin: 10mm; } \r\n    table { page-break-inside: auto; }\r\n    tr { page-break-inside: avoid; page-break-after: auto; }\r\n    thead { display: table-header-group; }\r\n    tfoot { display: table-footer-group; }\r\n  }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"company-title text-style\">\r\n  <i>\r\n  <h1>${companyName}</h1>\r\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\r\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\r\n  </i>\r\n</div>\r\n\r\n<hr style=\"margin-top:20px\">\r\n\r\n<div class=\"title text-style\">\r\n  EMPLOYEE ATTENDANCE REPORT\r\n</div>\r\n\r\n<div class=\"text-center text-style\">\r\n  <b>Date:</b> ${selectedDate.value}\r\n</div>\r\n\r\n<hr>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>No.</th>\r\n      <th>Employee Name</th>\r\n      <th class=\"text-center\">Status</th>\r\n      <th class=\"text-center\">Check-in Time</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${attendances.value.map((attendance, index) => `\r\n    <tr>\r\n      <td>${index + 1}</td>\r\n      <td>${attendance.name || 'N/A'}</td>\r\n      <td class=\"text-center\">\r\n        <span class=\"badge ${attendance.status === 'present' ? 'badge-present' : 'badge-absent'}\">\r\n          ${attendance.status || 'N/A'}\r\n        </span>\r\n      </td>\r\n      <td class=\"text-center\">${attendance.check_in_time || '--'}</td>\r\n    </tr>\r\n    `).join('')}\r\n  </tbody>\r\n  <tfoot>\r\n    <tr class=\"summary-row\">\r\n      <td colspan=\"4\" class=\"text-right\">\r\n        <strong>Total Employees: ${attendances.value.length}</strong> | \r\n        <strong>Present: ${attendances.value.filter(a => a.status === 'present').length}</strong> | \r\n        <strong>Absent: ${attendances.value.filter(a => a.status === 'absent').length}</strong>\r\n      </td>\r\n    </tr>\r\n  </tfoot>\r\n</table>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print attendance report: ${error.message}`);\r\n  }\r\n};\r\n\r\nconst clearForm = ()=>{\r\n    time.value = '',\r\n    status.value = '',\r\n    description.value = ''\r\n}\r\n    \r\n    const getData = (id) => {\r\n         company_id.value = id; \r\n         getEmployeeAttendances() \r\n        }    \r\n        \r\n        const loadingSpinner = inject('loadingSpinner')\r\n        const sending = ref(false)\r\n        const fillAttendance = async()=>{\r\n            sending.value = true\r\n            const payload = {\r\n                emp_device_id : selected_employee.value.emp_device_id,\r\n                check_in_time : time.value,\r\n                punch_status : status.value ==='PRESENT' ? 'Check_in' : 'On Leave',\r\n                supervisor_id : JSON.parse(localStorage.getItem(\"user\")).id,\r\n                description : description.value\r\n            }\r\n\r\n               try{\r\n          const response = await axiosInstance.post('head-office-attendances',payload)\r\n          document.getElementById('close-attendance').click()\r\n          getEmployeeAttendances()\r\n          clearForm()\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n      sending.value = false\r\n   }\r\n        }\r\n  onMounted(async () => {\r\n    // // Fetch employee attendances on mount\r\n    // await getEmployeeAttendances();\r\n  });\r\n</script>\r\n","import script from \"./attendance.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./attendance.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["globalSearch","data","keyword","lowerKeyword","toLowerCase","trim","containsKeyword","obj","includes","Array","isArray","some","Object","values","filter","item","ref","props","filterValue","watch","val","emit","__exports__","useMeta","title","company_id","showError","inject","tableShimmer","loading_spinner","columns","attendances","selectedDate","Date","toISOString","split","status","description","time","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","selected_employee","getEmployeeAttendances","async","value","response","get","map","index","SNo","name","check_in_time","error","console","log","message","printAttendance","iframe","document","createElement","style","display","body","appendChild","companyName","printContent","attendance","join","length","a","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","clearForm","getData","id","loadingSpinner","sending","fillAttendance","payload","emp_device_id","punch_status","supervisor_id","JSON","parse","localStorage","getItem","post","getElementById","click","onMounted"],"sourceRoot":""}