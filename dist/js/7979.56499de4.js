"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[7979],{97979:function(e,l,a){a.r(l),a.d(l,{default:function(){return Jt}});a(26699);var t=a(66252),n=a(49963),s=a(2262),i=a(3577),o=a(26212),r=a.n(o),d=a(87066),u=a(56296),c=a(42119);const v={class:"layout-px-spacing"},m=(0,t.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Requisitions</span></li></ol></nav></div></li></ul>',1),p={class:"d-flex justify-content-between align-items-center mb-3"},b={key:0,class:"flex-grow-1 text-center"},g=(0,t._)("h3",{class:"mb-0"}," REQUISITIONS",-1),y=(0,t._)("button",{type:"submit",class:"input-group-text bg-white border-start-0"},[(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n      0-10 5 5 0 0 1 0 10z"})])],-1),_={class:"d-flex align-items-center gap-2"},h={key:0},w=["disabled"],f={key:0,class:"spinner-border spinner-border-sm text-success ms-2",role:"status","aria-hidden":"true"},k={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},x=(0,t._)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),S=(0,t._)("line",{x1:"12",y1:"8",x2:"12",y2:"16"},null,-1),q=(0,t._)("line",{x1:"8",y1:"12",x2:"16",y2:"12"},null,-1),V=[x,S,q],D={key:1},U={key:0},C={key:1},H={key:2,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},R=(0,t._)("polyline",{points:"3 6 5 6 21 6"},null,-1),T=(0,t._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0  \r\n                               1-2-2V6m3 0V4a2 2 0 0 \r\n                               1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),$=[R,T],I={key:3,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-check2-circle",viewBox:"0 0 16 16"},j=(0,t._)("path",{d:"M2.5 8a5.5 5.5 0 0 1 \r\n                               8.25-4.764.5.5 \r\n                               0 0 0 .5-.866A6.5 6.5 \r\n                               0 1 0 14.5 8a.5.5 \r\n                               0 0 0-1 0 5.5 5.5 \r\n                               0 1 1-11 0"},null,-1),M=(0,t._)("path",{d:"M15.354 3.354a.5.5 \r\n                               0 0 0-.708-.708L8 \r\n                               9.293 5.354 6.646a.5.5 \r\n                               0 1 0-.708.708l3 3a.5.5 \r\n                               0 0 0 .708 0z"},null,-1),N=[j,M],z=["onSubmit"],A={class:"text-center mb-4"},E={class:"row mb-3"},O={class:"col-md-8 col-lg-9"},L={class:"row g-2"},B={class:"col-2"},P=(0,t._)("label",{class:"form-label small"},"Proforma?",-1),W={class:"border rounded px-2 py-2 d-flex align-items-center"},Y={class:"small"},Q={class:"col-sm-6 col-md-4 col-lg-3"},F=(0,t._)("label",{class:"form-label small"},"Requisition Date",-1),J={key:0,class:"col-sm-6 col-md-4 col-lg-3"},G=(0,t._)("label",{class:"form-label small"},"Required Date",-1),X={key:1,class:"col-md-4"},Z=(0,t._)("label",{class:"form-label small"},"Select Approval Chain",-1),K={key:0,class:"row"},ee={key:0,class:"col-md-6 col-lg-4 mb-2"},le=(0,t._)("label",{class:"form-label small"},"Select Requisition Type",-1),ae={key:1,class:"col-md-6 col-lg-4 mb-2"},te=(0,t._)("label",{class:"form-label small"},"Select Group",-1),ne={key:2,class:"col-md-6 col-lg-4 mb-2"},se=(0,t._)("label",{class:"form-label small"},"Select Store",-1),ie={class:"col-md-6 col-lg-3 mb-2"},oe=(0,t._)("label",{class:"form-label small"},"Select Project",-1),re={key:3,class:"col-md-6 col-lg-4 mb-2"},de={class:"form-label small"},ue=["innerHTML"],ce={key:1},ve={key:4,class:"col-md-6 col-lg-4 mb-2"},me=(0,t._)("label",{class:"form-label small"},"Select An Item",-1),pe={key:5,class:"col-md-6 col-lg-4 mb-2"},be=(0,t._)("label",{class:"form-label small"},"Select Description",-1),ge={key:6,class:"col-md-6 col-lg-5 mb-2"},ye=(0,t._)("label",{class:"form-label small"},"Select Subcontractor",-1),_e={key:7,class:"col-md-6 col-lg-4 mb-2"},he=(0,t._)("label",{class:"form-label small"},"Proforma (PDF only)",-1),we={class:"col-md-12"},fe={key:1,class:"row mb-3"},ke=(0,t._)("div",{class:"col-12 mb-2"},[(0,t._)("h6",{class:"border-bottom pb-2"},"Add Items")],-1),xe={class:"col-md-6 col-lg-3 mb-2"},Se=(0,t._)("label",{class:"form-label small"},"Select Item",-1),qe={class:"col-md-6 col-lg-2 mb-2"},Ve=(0,t._)("label",{class:"form-label small"},"Unit",-1),De={class:"col-md-6 col-lg-3 mb-2"},Ue=(0,t._)("label",{class:"form-label small"},"Description",-1),Ce={class:"col-md-6 col-lg-2 mb-2"},He={class:"form-label small"},Re=["disabled"],Te={class:"col-md-6 col-lg-2 mb-2"},$e={class:"form-label small"},Ie={key:0},je={key:1},Me={key:0,class:"form-control form-control-sm"},Ne=["disabled"],ze={key:0,class:"col-md-6 col-lg-2 mb-2"},Ae={class:"form-label small"},Ee={class:"form-control form-control-sm"},Oe={key:1,class:"col-md-6 col-lg-3 mb-2"},Le=(0,t._)("label",{class:"form-label small"},"Select An Asset",-1),Be={key:2,class:"col-md-6 col-lg-3 mb-2"},Pe=(0,t._)("label",{class:"form-label small"}," Receiver ",-1),We={key:3,class:"col-md-6 col-lg-4 mb-2"},Ye={class:"form-label small"},Qe={class:"col-md-12 col-lg-12 mb-2 text-end"},Fe=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},[(0,t._)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,t._)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,t._)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1),Je=(0,t.Uk)(" Add Item "),Ge=[Fe,Je],Xe={key:2,class:"row mb-3"},Ze={class:"col-12"},Ke={class:"table-responsive custom-table table3"},el=["onClick"],ll=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},[(0,t._)("polyline",{points:"3 6 5 6 21 6"}),(0,t._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),al=[ll],tl={class:"d-flex flex-wrap gap-2 justify-content-end mt-4"},nl=(0,t._)("svg",{style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),(0,t._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})],-1),sl=(0,t.Uk)(" Clear "),il=[nl,sl],ol=["disabled"],rl={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},dl={key:1},ul=["innerHTML"],cl={key:0,class:"row layout-top-spacing"},vl={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ml=["innerHTML"],pl={key:1,class:"panel p-0"},bl={class:"custom-table table3"},gl={class:"d-flex justify-content-center align-items-center gap-2"},yl=["onClick"],_l=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-info","data-bs-toggle":"modal","data-bs-target":"#requisitionItems"},[(0,t._)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,t._)("circle",{cx:"12",cy:"12",r:"3"})],-1),hl=[_l],wl=["onClick"],fl=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,t._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,t._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),kl=[fl],xl=["onClick"],Sl=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,t._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),ql=[Sl],Vl=["onClick"],Dl=(0,t._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},null,-1),Ul=(0,t._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},null,-1),Cl=[Dl,Ul],Hl={class:"modal fade mymodal",id:"requisitionItems","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Rl={class:"modal-dialog modal-fullscreen"},Tl={class:"modal-content"},$l={class:"modal-header"},Il=(0,t._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Requisition Items",-1),jl={class:"modal-body"},Ml={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Nl={class:"panel p-0"},zl={class:"custom-table table3 table-responsive"},Al={class:"table table-bordered table-striped"},El=(0,t._)("th",null,"Req#",-1),Ol=(0,t._)("th",null,"Requester",-1),Ll=(0,t._)("th",null,"Requested",-1),Bl={key:0},Pl=(0,t._)("th",null,"Source",-1),Wl=(0,t._)("th",null,"Purpose",-1),Yl=(0,t._)("th",null,"Project",-1),Ql=(0,t._)("th",null,"Status",-1),Fl={key:0},Jl={key:0},Gl={colspan:"7"},Xl=(0,t._)("b",null," Brief Description : ",-1),Zl={key:1},Kl={colspan:"7"},ea=(0,t._)("b",null," Remark : ",-1),la={class:"mb-2 text-center fw-bold",style:{"font-size":"x-large"}},aa=(0,t._)("strong",null,"Total Cost: ",-1),ta={key:0,class:"mb-2 text-center"},na={class:"btn-group mb-3"},sa=["disabled"],ia=["disabled"],oa=["disabled"],ra=["disabled"],da={key:0,class:"btn-group mb-3 me-2"},ua=["disabled"],ca=["innerHTML"],va={key:1},ma={key:1,class:"mb-2"},pa={key:2,class:"input-group"},ba=["placeholder"],ga=["disabled"],ya=["innerHTML"],_a={key:1},ha={class:"row layout-top-spacing"},wa=(0,t._)("div",{class:"col-12 d-flex align-items-center justify-content-between"},null,-1),fa={key:0,class:"mt-2 col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ka={class:"panel p-0"},xa={class:"custom-table table3"},Sa={class:"table table-bordered table-striped"},qa=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"Item Requested"),(0,t._)("th",null,"Item Issued"),(0,t._)("th",null,"Quantity Issuing"),(0,t._)("th",null,"Item Condition")])],-1),Va=["placeholder","onUpdate:modelValue","max"],Da={type:"number",class:"form-control"},Ua={class:"panel p-0"},Ca={class:"custom-table table3"},Ha={key:3},Ra={class:"d-flex justify-content-center align-items-center gap-2"},Ta=["onClick"],$a=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary","data-bs-toggle":"modal","data-bs-target":"#edit-requisition-items-modal"},[(0,t._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,t._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),Ia=[$a],ja=(0,t._)("button",{class:"btn btn-outline-primary"},"Diesel",-1),Ma=(0,t._)("button",{class:"btn btn-outline-primary"},"Budget",-1),Na={key:0,class:"mt-3"},za=(0,t._)("h4",{class:"text-center text-danger"},"Rejection Details",-1),Aa={class:"table table-bordered table-striped align-middle"},Ea=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"Sno"),(0,t._)("th",null,"Rejected By"),(0,t._)("th",null,"Date"),(0,t._)("th",null,"Reason")])],-1),Oa=(0,t._)("td",null,"Director",-1),La={key:1,class:"col-xl-6 col-lg-12 col-sm-12 layout-spacing"},Ba={class:"panel p-3 position-relative"},Pa=["href"],Wa=(0,t._)("h4",{class:"text-center"},"Proforma Invoice",-1),Ya=["src"],Qa={class:"modal fade mymodal",id:"edit-requisition-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editRequisitionModalLabel","aria-hidden":"true"},Fa={class:"modal-dialog modal-xl"},Ja={class:"modal-content"},Ga={class:"modal-header"},Xa=(0,t._)("h1",{class:"modal-title fs-5",id:"editRequisitionModalLabel"},"Edit Requisition",-1),Za={class:"modal-body"},Ka={class:"row"},et={class:"col-md-4"},lt=(0,t._)("label",{for:"description"},"Status",-1),at={class:"col-md-4"},tt=(0,t._)("label",{class:"form-label small"},"Select Project",-1),nt={class:"col-md-4"},st=(0,t._)("label",{class:"form-label small"},"Select Subcontractor",-1),it={class:"row"},ot={class:"col-md-4"},rt=(0,t._)("label",{class:"form-label small"},"Select Vendor",-1),dt={class:"col-md-4"},ut=(0,t._)("label",{class:"form-label small"},"Select Approval Chain",-1),ct={class:"col-md-4"},vt=(0,t._)("label",{for:"description"},"beneficiary",-1),mt={class:"row"},pt={class:"col-md-12"},bt=(0,t._)("label",{for:"description"},"Description ",-1),gt={class:"modal-footer"},yt=["disabled"],_t={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},ht={key:1},wt={class:"modal fade mymodal",id:"edit-requisition-items-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editRequisitionItemsModalLabel","aria-hidden":"true"},ft={class:"modal-dialog modal-xl"},kt={class:"modal-content"},xt={class:"modal-header"},St=(0,t._)("h1",{class:"modal-title fs-5",id:"editRequisitionItemsModalLabel"},"Edit Requisition Items",-1),qt={class:"modal-body"},Vt={class:"row"},Dt={class:"col-md-3"},Ut=(0,t._)("label",{for:"item"},"Item",-1),Ct={class:"col-md-3"},Ht=(0,t._)("label",{for:"units"},"Units",-1),Rt={class:"col-md-3"},Tt=(0,t._)("label",{for:"quantity"},"Quantity",-1),$t={class:"col-md-3"},It=(0,t._)("label",{for:"rate"},"Rate",-1),jt={class:"col-md-4"},Mt=(0,t._)("label",{class:"form-label small"},"Select An Asset",-1),Nt={class:"col-md-4"},zt=(0,t._)("label",{class:"form-label small"},"Select Vendor",-1),At={class:"col-md-4"},Et=(0,t._)("label",{for:"description"},"beneficiary",-1),Ot={class:"col-md-12"},Lt=(0,t._)("label",{for:"description"},"Description",-1),Bt={class:"modal-footer"},Pt=["disabled"],Wt={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},Yt={key:1};var Qt={setup(e){const l=new Date,a=l.toISOString().split("T")[0];(0,u.j)({title:"Requisitions "+a});const o=d.Z.create({baseURL:"https://bushman.ink/api/v1/"}),x=(0,s.iH)(!1),S=(0,t.f3)("waitIndicator"),q=(0,s.iH)(""),R=()=>xn.value,T=(0,c.tv)(),j=(0,c.yj)(),M=(0,s.iH)(["General","budget","labour","construction materials","spares"]),Fe=(0,s.iH)([]),Je=JSON.parse(localStorage.getItem("user")).permissions,ll=JSON.parse(localStorage.getItem("user")).id,nl=(0,s.iH)([]),sl=(0,s.iH)(""),_l=(0,s.iH)(!1),fl=(0,s.iH)(""),Sl=(0,t.f3)("tableShimmer"),Dl=(0,t.f3)("formatNumber"),Ul=(0,t.f3)("formatDate"),$a=(0,t.f3)("loadingSpinner"),Qt=(0,s.iH)((new Date).toISOString().split("T")[0]),Ft=(0,s.iH)(""),Jt=(0,s.iH)(""),Gt=(0,s.iH)(""),Xt=(0,s.iH)(""),Zt=(0,s.iH)(),Kt=(0,s.iH)(""),en=(0,s.iH)([]),ln=(0,s.iH)(0),an=(0,s.iH)(""),tn=(0,s.iH)([]),nn=(0,s.iH)(!1),sn=(0,s.iH)(["sno","ref_no","requester","purpose","type","project","date","cost","status","remark","actions"]),on=(0,s.iH)(!1),rn=(0,t.f3)("showMessage"),dn=(0,t.f3)("showError"),un=(0,s.iH)([]),cn=(0,s.iH)([]),vn=(0,s.iH)(""),mn=(0,s.iH)([""]),pn=(0,s.iH)([]),bn=(0,s.iH)(""),gn=(0,s.iH)(""),yn=(0,s.iH)(!1),_n=(0,s.iH)(""),hn=(0,s.iH)([]),wn=async()=>{const e=await o.get("vendors");hn.value=e.data},fn=(0,s.iH)([]),kn=async()=>{const e=await o.get("machines");fn.value=e.data.map((e=>({...e,name:e.name+" - "+e.type_name})))},xn=(0,t.Fl)((()=>{let e=tn.value;if(Je.includes("is_md")&&(e=yn.value?e.filter((e=>["Rejected","On Hold","Remarked"].includes(e.status?.key))):e.filter((e=>["Unapproved","approved"].includes(e.status?.key)))),q.value){const l=q.value.toLowerCase();e=e.filter((e=>e.requester&&e.requester.toLowerCase().includes(l)||e.project&&e.project.toLowerCase().includes(l)||e.description&&e.description.toLowerCase().includes(l)||e.remark&&e.remark.toLowerCase().includes(l)||e.items&&e.items.some((e=>e.description&&e.description.toLowerCase().includes(l)||e.receiver&&e.receiver.toLowerCase().includes(l)||e.remark&&e.remark.toLowerCase().includes(l)))))}return e})),Sn=(0,s.iH)([]),qn=(0,s.iH)(""),Vn=async()=>{const e=await o.get("projects");Sn.value=e.data},Dn=(0,s.iH)([]),Un=(0,s.iH)(""),Cn=async e=>{Un.value="",x.value=!0;const l=await o.get(`budgets?project_id=${e}`);Dn.value=l.data.filter((e=>"closed"===e.status)),x.value=!1};(0,t.YP)(qn,(e=>{e&&Cn(e.id)})),(0,t.YP)(sl,(e=>{e&&(un.value=[],cn.value=[],Dn.value=[],Un.value="",qn.value="",Kn())})),(0,t.YP)(fl,(e=>{e&&(rs(),fl.value=e,un.value=[],cn.value=[],Kn())}));const Hn=(0,s.iH)([]),Rn=(0,s.iH)("");(0,t.YP)(Un,(e=>{e&&(Hn.value=e.items)}));const Tn=(0,s.iH)([]),$n=(0,s.iH)(""),In=(0,s.iH)(""),jn=(0,s.iH)("");(0,t.YP)(Rn,(e=>{e&&(Tn.value=e.descriptions,Jt.value=e.name)})),(0,t.YP)($n,(e=>{e&&(jn.value=e.quantity*e.quantity_2,In.value=e.quantity*e.quantity_2*e.cost-e.used_cost,ln.value=e.id,ls.value=e.name,Kt.value=e.units)}));const Mn=(0,s.iH)([]),Nn=(0,s.iH)(""),zn=async()=>{const e=await o.get("subcontractor-agreements");Mn.value=e.data.map((e=>({...e,name:e.project.short_name+" - "+e.item+"( "+e.subcontracted_to+" )"})))};(0,t.YP)((()=>j.params.status_id),(e=>{nn.value=!0,ws()}));const An=async()=>{const e=await o.get("units");pn.value=e.data},En=async e=>{_l.value=!0;const l={status_id:Ft.value,remark:Zt.value,...3==Ft.value&&{approval:{approval_group_id:e.approval_group_id,source:"requisition",source_id:e.id,requester_id:e.requester_id,items:e.items}}};try{await o.put(`requisitions/${e.id}`,l);ws(),rn("Saved Successfully"),document.getElementById("close-requisition-modal").click()}catch(a){console.log(a),dn(a.message)}finally{_l.value=!1}},On=async()=>{if(_l.value=!0,6!=fl.value.id){const l={requester_id:JSON.parse(localStorage.getItem("user")).id,approval_group_id:fl.value.id,source_id:ms.value.id,source:"requisition",items:ss.value,remark:gn.value};try{await o.post("approval-lists",l);rn(fl.value.name+" created!"),rs(),T.push(`/approval-chains/${fl.value.id}`)}catch(e){console.error(e),dn(e.response.data.message)}finally{_l.value=!1}}else{mn.value=ss.value.map((e=>({requisition_item_id:e.id,quantity:e.issued_quantity?e.issued_quantity:0,store_item_id:e.store_item.id})));const l={issueData:{requisition_id:ms.value.id,issuer_id:JSON.parse(localStorage.getItem("user")).id},issueItems:mn.value};try{const e=await o.post("good-issue-notes",l);rn(e.data.message),T.push("/good-issue-notes")}catch(e){dn(e.message),console.log(e)}finally{_l.value=!1}}},Ln=((0,t.Fl)((()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})),(0,s.iH)({perPage:50,perPageValues:[50,100,200,500],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","role_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1})),Bn=(0,s.iH)([]),Pn=async()=>{try{const e=await o.get("incidences?company_id=6");Bn.value=e.data}catch(e){dn(e.message),console.log(e)}},Wn=(0,s.iH)([]),Yn=async e=>{const l=await o.get(e);Wn.value=l.data.map(((e,l)=>({...e,SNo:l+1,name:e.name+(e.description?" - "+e.description:""),unit:e.unit??"---"})))},Qn=(0,s.iH)([]),Fn=async()=>{const e=await o.get("/labour-types");Qn.value=e.data},Jn=(0,s.iH)([]),Gn=async()=>{const e=await o.get("/statuses");Jn.value=e.data},Xn=e=>{vn.value=e.target.files[0]};(0,t.YP)(sl,(e=>{"spares"===e&&Yn("get-spares"),"labour"===e&&Fn(),"construction materials"===e&&Yn("get-materials")})),(0,t.YP)(Jt,(e=>{"labour"===sl.value&&e&&(Xt.value=e.rate)}));const Zn=(0,s.iH)(1),Kn=()=>{Gt.value="",Xt.value="",Zt.value="",Jt.value="",ls.value="",Kt.value="",es.value="",$n.value="",Rn.value="",gn.value="",_n.value=""},es=(0,s.iH)(""),ls=(0,s.iH)(""),as=()=>{sl.value="",Qt.value="",an.value="",Gt.value="",Xt.value="",Zt.value="",Jt.value="",un.value=[],cn.value=[],on.value=!1,gn.value="",fl.value="",bn.value=""},ts=()=>{if(!Gt.value)return void dn("Fill in all fields");let e=ln.value,l="";6===fl?.value?.id&&Jt.value?(e=Jt.value.id,l=Jt.value.name):Jt.value&&(e=Jt.value.id);const a={Sno:Zn.value,item_id:e,quantity:Gt.value,units:Kt.value?.short_name||Kt.value,rate:Number(Xt.value).toLocaleString()+"/=",item:["spares","labour","construction materials"].includes(sl.value)?Jt.value.name:Jt.value,description:es?.value?ls.value+" For "+es.value.name:ls.value,total:Number(Xt.value*Gt.value).toLocaleString()+"/=",receiver:gn.value||bn.value?.name||"No Receiver"};if(!bn.value?.id&&!gn.value)return void dn("Vendor or Beneficiary is required");const t={Sno:Zn.value,item_id:e||ln.value,quantity:Gt.value,rate:Xt.value,remark:["spares","labour","construction materials"].includes(sl.value)?Jt.value.name:Jt.value,description:es?.value?ls.value+" For "+es.value.name:ls.value,units:Kt.value?.short_name||Kt.value,asset_id:es.value?.id||null,vendor_id:gn.value?null:bn.value?.id||null,beneficiary:gn.value||null};Zn.value=Zn.value+1,un.value.push(a),cn.value.push(t),Kn()},ns=e=>{un.value=un.value.filter((l=>l.Sno!==e)),cn.value=cn.value.filter((l=>l.Sno!==e)),un.value.forEach(((e,l)=>{e.Sno=l+1})),cn.value.forEach(((e,l)=>{e.Sno=l+1})),Zn.value=un.value.length+1},ss=(0,s.iH)([]),is=(0,s.iH)(["Sno","item","description","units","quantity","rate","total","receiver","actions"]),os=(0,s.iH)(["Sno","item","units","description","quantity","rate","total","receiver","actions"]),rs=()=>{ss.value=[],fl.value="",Zt.value="",Ft.value="",Un.value="",Rn.value="",qn.value="",Kt.value="",Jt.value="",Gt.value="",Xt.value="",ls.value="",sl.value="",$n.value="",Dn.value=[],Hn.value=[],Tn.value=[],ys.value="",un.value=[],cn.value=[],bn.value=""},ds=(0,s.iH)([]),us=e=>{ds.value.includes(e)?ds.value=ds.value.filter((l=>l!==e)):ds.value.push(e)},cs=(0,s.iH)(""),vs=(0,s.iH)(""),ms=(0,s.iH)(""),ps=async e=>{ms.value=e,en.value=e.remarks,cs.value=e.attachment,vs.value=e.subcontractor,e.subcontractor&&Ds(e.subcontractor,e.project),ss.value=e.items.map(((e,l)=>({...e,Sno:l+1,item:e.remark,asset_id:e.asset_id,description:e.description,rate:Number(e.rate).toLocaleString()+"/=",total:(e.quantity*e.rate).toLocaleString()+"/=",issued_quantity:"",store_item:""})))},bs=(0,s.iH)(0),gs=(0,s.iH)(!1),ys=(0,s.iH)(""),_s=(0,t.f3)("whatsappAlert"),hs=async()=>{gs.value=!0;const e=new FormData;e.append("requisition",JSON.stringify({date:Qt.value,description:ys.value,project_id:qn.value.id,vendor_id:bn.value.id,required_date:an.value,requester_id:JSON.parse(localStorage.getItem("user")).id,beneficiary:gn.value,subcontractor_agreement_id:Nn.value.id,approval_group_id:fl.value.id})),e.append("type",JSON.stringify({name:sl.value,item_id:bs.value})),e.append("items",JSON.stringify(cn.value)),vn.value&&e.append("image",vn.value);try{const l=await o.post("create-requisition",e,{headers:{"Content-Type":"multipart/form-data"}}),a=cn.value.reduce(((e,l)=>e+l.quantity*l.rate),0),t=`Requisition with cost ${Dl(a)} was created by `+JSON.parse(localStorage.getItem("user")).name,n="wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhggQUM5QUMyMzIyRUVEMTJBOTNBNTIwQjRCMTA3QUNGQTQA",s=["255697315583","255698267662"];s.forEach((e=>{_s(t,n,e)})),rn(l.data.message),gs.value=!1,6==fl.value.id&&T.push("/requisition-group/6/all"),as(),ws()}catch(l){dn(l.message),gs.value=!1,console.log(l)}},ws=()=>{const e=j.params.status_id;let l="requisitions";e&&"all"!==e&&(l+=`?status_id=${e}`),o.get(l).then((e=>{tn.value=e.data.map(((e,l)=>{nl.value.find((l=>l.id===e.requisition_type_id));return{...e,beneficiary:e.beneficiary?e.beneficiary:e.vendor?e.vendor:"",ref_no:e.id,date:Ul(e.created_at),Sno:l+1,requester_id:e.requester_id,requester_email:e.requester_email,type:e.type,purpose:e.approval_group,attachment:e.attachment?"https://bushman.ink/api/v1//../../../"+e.attachment:null,status_id:e.status.id,cost:Dl(e.items.reduce(((e,l)=>e+l.quantity*l.rate),0)),status:{key:e.status,class:e.status_color}}})),nn.value=!1})).catch((e=>{dn(e.message),nn.value=!1}))},fs=(0,s.iH)([]),ks=async e=>{const l=await o.get(`get-store-items?store_id=${e}`);fs.value=l.data},xs=(0,s.iH)(""),Ss=(0,s.iH)(""),qs=async()=>{const e=await o.get("stores");xs.value=e.data.map((e=>({...e,name:e.project+" - "+e.name})))};(0,t.YP)(Ss,(e=>{fs.value=[""],ks(e.id)}));const Vs=()=>{"budget"===sl.value&&Gt.value*Xt.value>In.value&&(Xt.value="",dn("Cost should not exceed "+Dl(In.value))),6===fl?.value?.id&&Jt.value&&Gt.value>Jt.value.balance_quantity&&(Gt.value=Jt.value.balance_quantity,dn("only "+Gt.value+" available"))},Ds=async(e,l)=>{try{const a=new Date,t=String(a.getDate()).padStart(2,"0"),n=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear(),i=`${t}/${n}`,o=`${t}/${n}/${s}`,r=`${t}.${n}.${s}`,d=`${o}, ${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,u=`${String(e.id).padStart(3,"0")}/${i}`,c=`${e.id}`,v=`${e.id}/${s}`,m=e.payments&&e.payments.length>0?e.payments.reduce(((e,l)=>e+Number(l.quantity)),0):0,p=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Subcontractor Agreement Details</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\n  .logo { width: 160px; height: auto; }\n  .agreement-box { border: 1px solid #000; padding: 5px 10px; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; }\n  .company-title h2 { margin: 5px 0; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; }\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n  .title { text-align: center; font-weight: bold; margin: 20px 0 10px 0; }\n  .details-list { margin-top: 15px; line-height: 1.6; }\n  .details-list div { margin-bottom: 4px; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  table.items th, table.items td { border: 1px solid #000; padding: 6px; font-weight: normal; }\n  table.items thead tr th { background-color: #f8f8f8; border: 1px solid #000; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n<div class="header">\n  <img src="https://bushman.ink/copex.jpg" class="logo" />\n  <div class="agreement-box">\n    Agreement ID:<br>\n    <span style="color:red;">${u}</span>\n  </div>\n</div>\n\n<div class="reg-info">\n  TIN: 103-826-519<br>\n  VRN: 20-01-017530R\n</div>\n\n<div class="company-title">\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\n</div>\n\n<div class="section-title">SUBCONTRACTOR AGREEMENT DETAILS</div>\n<div class="title">${l.toUpperCase()} - ${e.item.toUpperCase()}</div>\n\n<div style="display: flex; justify-content: space-between; align-items: center;">\n  <div class="text-start"><strong>NOTICE NO. 00${v}</strong></div>\n  <div class="text-end"><strong>Date: ${r}</strong></div>\n</div>\n\n<div class="text-center"><strong>REF: SUBCONTRACTING NOTICE No. ${c}</strong></div>\n\n<div class="text-start"><p>Refer the subject matter above</p></div>\n<div class="text-start"><p>This form as internal notice on subcontracting piece work on <strong>${e.item.toUpperCase()}</strong></p></div>\n\n<div class="details-list">\n  <div><strong>Subcontracted:</strong> ${e.subcontracted_to}</div><br>\n  <div><strong>Item Description:</strong> ${e.item}</div><br>\n  <div><strong>Contracted Quantity:</strong> ${e.quantity}</div><br>\n  <div><strong>This payment certificate:</strong> ${e.payment_term.name}</div><br>\n  <div><strong>Subcontracted To:</strong> ${e.subcontracted_to}</div><br>\n  <div><strong>Payment Details:</strong> ${e.payment_number}</div><br>\n  <div><strong>Subcontracting Unit Price:</strong> TZS ${Dl(e.rate)} per ${e.unit}</div><br>\n  <div><strong>Total Amount of Contract:</strong> TZS ${Dl(e.quantity*e.rate)}</div><br>\n  <div><strong>Total Amount Archived:</strong></div><br>\n  <div><strong>This Certificate Payable Amount:</strong> ${Dl(m)} </div>\n</div>\n\n${e.payments&&e.payments.length>0?`\n<div class="section-title">PAYMENT HISTORY</div>\n<table class="items">\n  <thead>\n    <tr>\n      <th style="width: 30px;"><strong>Sno.</strong></th>\n      <th><strong>Date</strong></th>\n      <th><strong>Description</strong></th>\n      <th><strong>Amount</strong></th>\n    </tr>\n  </thead>\n  <tbody>\n    ${e.payments.map(((e,l)=>{const a=new Date(e.created_at),t=`${String(a.getDate()).padStart(2,"0")}.${String(a.getMonth()+1).padStart(2,"0")}.${a.getFullYear()}`;return`\n        <tr>\n          <td class="text-center">${l+1}</td>\n          <td class="text-center">${t}</td>\n          <td class="text-center">${e.description||""}</td>\n          <td class="text-center">${Dl(e.quantity)}</td>\n        </tr>\n      `})).join("")}\n  </tbody>\n</table>\n`:""}\n\n<div style="margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;">\n  <p>Â© ${(new Date).getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 135-489-247 | VRN: 40-032826C</p>\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\n</div>\n\n<div style="margin-top: 10px; font-size: 11px; text-align: left;">\n  ${d}\n</div>\n\n</body>\n</html>\n`,b=new Blob([p],{type:"text/html"});vs.value=URL.createObjectURL(b)}catch(a){dn(`Failed to generate agreement details: ${a.message}`)}},Us=()=>{const e=document.querySelector(".modal.show");if(e){const l=bootstrap.Modal.getInstance(e);l?.hide()}document.body.classList.remove("modal-open"),document.body.style.overflow="auto",document.body.style.paddingRight="",rs()},Cs=async()=>{nn.value=!0;try{const e={subcontractor_agreement_id:Nn.value?.id,approval_group_id:fl.value.id,description:Ts.value,project_id:$s.value?.id||null,vendor_id:bn.value?.id,beneficiary:gn.value,status_id:Is.value?.id};await o.put(`/update-requisition/${Hs.value.id}`,e),ws(),document.getElementById("close_modal").click(),rn("Requisition updated successfully"),Ms()}catch(e){dn(e.message),console.log(e)}finally{nn.value=!1}},Hs=(0,s.iH)(null),Rs=(0,s.iH)(null),Ts=(0,s.iH)(""),$s=(0,s.iH)(""),Is=(0,s.iH)(""),js=e=>{console.log("Editing row:",e),console.log("row.status_id:",e.status_id),console.log("row.status:",e.status),console.log("Statuses array:",Jn.value),Hs.value={...e},$s.value=e.project_id&&Sn.value.find((l=>l.id===e.project_id))||"",Nn.value=e.subcontractor_agreement_id&&Mn.value.find((l=>l.id===e.subcontractor_agreement_id))||"",bn.value=e.vendor_id&&hn.value.find((l=>l.id===e.vendor_id))||"",fl.value=e.approval_group_id&&Bn.value.find((l=>l.id===e.approval_group_id))||"",Ts.value=e.description,gn.value=e.beneficiary,Is.value=e.status_id&&Jn.value.find((l=>l.id===e.status_id))||""},Ms=()=>{Hs.value=null,Rs.value=null,Nn.value="",$s.value="",ls.value="",bn.value="",fl.value="",gn.value="",Is.value=""},Ns=async()=>{nn.value=!0;try{const e={requisition_type_id:Rs.value.requisition_type_id,remark:Jt.value,quantity:Gt.value,rate:Xt.value,vendor_id:bn.value?.id,beneficiary:gn.value,description:ls.value,units:Kt.value?.short_name||Kt.value,asset_id:es.value?.id};await o.put(`/requisition-type-items/${Rs.value.id}`,e),ws(),document.getElementById("close_editing").click(),rn("Requisition item updated successfully"),Ms()}catch(e){dn(e.message),console.log(e)}finally{nn.value=!1}},zs=e=>{Rs.value=e,"labour"===sl.value?Jt.value=Qn.value.find((l=>l.name===e.remark))||e.remark:["spares","construction materials"].includes(sl.value)?Jt.value=Wn.value.find((l=>l.name===e.remark))||e.remark:Jt.value=e.remark,Kt.value=pn.value.find((l=>l.short_name===e.units))||e.units,Gt.value=e.quantity,"string"===typeof e.rate?Xt.value=Number(e.rate.replace(/[^0-9.]/g,""))||0:Xt.value=Number(e.rate)||0,ls.value=e.description,es.value=fn.value.find((l=>l.id===e.asset_id))||"",bn.value=hn.value.find((l=>l.id===e.vendor_id))||"",gn.value=bn.value?"":e.receiver},As=(0,s.iH)(""),Es=async()=>{const e=await o.get("activity-statuses/1");As.value=e.data,"open"===As.value.status&&setTimeout((async()=>{As.value.status="closed",await o.put("activity-statuses/1",{status:"closed"})}),6e4)},Os=(0,s.iH)(""),Ls=async()=>{const e=await o.get("activity-statuses/9");Os.value=e.data},Bs=async e=>{try{const l=document.createElement("iframe");l.style.display="none",document.body.appendChild(l);const a=new Date(e.created_at||new Date),t=(a.getDate().toString().padStart(2,"0"),(a.getMonth()+1).toString().padStart(2,"0"),a.getFullYear(),`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Print Requisition</title>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 10px; font-size: 13px; }\n  .company-title { text-align: center; }\n  .company-title h1 { margin: 5px 0; }\n  .title { text-align: center; font-size: 20px; margin: 15px 0; }\n  hr { border: 0; border-top: 0.4px solid #000; margin: 10px 0; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  table th, table td { border: 0.5px solid #000; padding: 6px; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  .signature-line { border-top: 1px solid #000; width: 120px; margin: 50px auto 5px; }\n  .vendor-details { display: flex; justify-content: space-between; margin-top: 10px; }\n  .vendor-details table { width: 48%; border-collapse: collapse; }\n  .approval-chain-container { page-break-inside: avoid; margin-top: 40px; }\n  table.approval-chain { width: 100%; border-collapse: collapse; page-break-inside: avoid; }\n  table.approval-chain td { page-break-inside: avoid; }\n  @media print { body { margin: 10mm; } }\n</style>\n</head>\n<body>\n\n<div>REQUISITION NO. ${e.ref_no}</div>\n\n<div class="company-title">\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n</div>\n\n<hr>\n\n<div class="title">REQUISITION : ${e?.project?.toUpperCase()??"NO PROJECT"}</div>\n<hr>\n\n${e.purpose.toLowerCase().includes("voucher")?"":'\n<h3>VENDOR DETAILS</h3>\n<div class="vendor-details">\n  <table>\n    <tr><td style="width:35%;"><strong>Vendor Name</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>Address</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>Location</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n  </table>\n  <table>\n    <tr><td style="width:35%;"><strong>Phone</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>Email</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n    <tr><td><strong>TIN / VRN</strong></td><td style="border-bottom:1px solid #000;">&nbsp;</td></tr>\n  </table>\n</div>\n\n'}\n\n<p>Please provide the following as per requisition details below</p>\n<h3>CURRENCY : TSH</h3>\n\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>ITEM</th>\n      <th>DESCRIPTION</th>\n      <th>QTY</th>\n      <th>RATE</th>\n      <th>TOTAL</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${e.items.map(((e,l)=>`\n      <tr>\n        <td class="text-center">${l+1}</td>\n        <td>${e.remark||"N/A"}</td>\n        <td>${e.description||"N/A"}</td>\n        <td class="text-right">${e.quantity||0}</td>\n        <td class="text-right">${Number(e.rate||0).toLocaleString()}/=</td>\n        <td class="text-right">${(e.quantity*e.rate||0).toLocaleString()}/=</td>\n      </tr>\n    `)).join("")}\n    <tr>\n      <td colspan="6" class="text-right"><strong>TOTAL ${e.cost}</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n${e.description?`<p><strong>Note:</strong> ${e.description}</p>`:""}\n\n<div class="approval-chain-container">\n  <div class="title">APPROVAL CHAIN</div>\n  <table class="approval-chain">\n    <tr>\n      <td class="text-center">\n        <div style="font-weight:bold;">Prepared By</div>\n        <div class="signature-line"></div>\n        <div>${e.requester}</div>\n      </td>\n      <td class="text-center">\n        <div style="font-weight:bold;">Checked By</div>\n        <div class="signature-line"></div>\n        <div>Engineer</div>\n      </td>\n      <td class="text-center">\n        <div style="font-weight:bold;">Verified By</div>\n        <div class="signature-line"></div>\n        <div>Sr Accountant</div>\n      </td>\n      <td class="text-center">\n        <div style="font-weight:bold;">Approved By</div>\n        <div class="signature-line"></div>\n        <div>Director</div>\n      </td>\n    </tr>\n  </table>\n</div>\n${e.purpose.toLowerCase().includes("voucher")?'\n<div style="display: flex; justify-content: space-between;margin-top:20px; text-align: center; width: 100%;">\n  <div style="flex: 1;">\n    <div class="signature-line"></div>\n    <div>Receiver\'s Signature</div>\n  </div>\n  <div style="flex: 1;">\n    <div class="signature-line"></div>\n    <div>Date Received</div>\n  </div>\n</div>\n  ':""}\n\n</body>\n</html>\n`),n=l.contentWindow.document;n.open(),n.write(t),n.close(),l.onload=()=>{l.contentWindow.focus(),l.contentWindow.print(),setTimeout((()=>document.body.removeChild(l)),1e3)}}catch(l){dn(l.message)}},Ps=(0,s.iH)(!1),Ws=(0,t.f3)("showConfirmation"),Ys=(0,t.f3)("waitIndicator"),Qs=async e=>{try{Ps.value=!0;const l=await Ws("Delete Requisition",`Are you sure you want to delete Requisition No. ${e.ref_no} with cost ${e.cost}?`,`update-requisition/${e.id}?deleted=1`,"put");l?.refresh&&ws()}catch(l){console.error(l),dn(l.message)}finally{Ps.value=!1}};return(0,t.bv)((async()=>{Fe.value=M.value.filter((e=>"General"!==e||Je.includes("can_create_general_requisitions"))),nn.value=!0,Es(),Ls(),ws(),Pn(),An(),qs(),wn(),zn(),kn(),Vn(),Gn()})),(e,l)=>{const a=(0,t.up)("v-client-table"),o=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",v,[m,(0,t._)("div",p,[on.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",b,[g,(0,t._)("form",{onSubmit:l[1]||(l[1]=(0,n.iM)((e=>R()),["prevent"])),class:"input-group container"},[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":l[0]||(l[0]=e=>q.value=e)},null,512),[[n.nr,q.value]]),y],32)])),(0,t._)("div",_,[(0,s.SU)(Je).includes("can_create_requisition")?((0,t.wg)(),(0,t.iD)("div",h,[on.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:l[2]||(l[2]=e=>on.value=!0),disabled:nn.value},[nn.value?((0,t.wg)(),(0,t.iD)("span",f)):((0,t.wg)(),(0,t.iD)("svg",k,V))],8,w))])):(0,t.kq)("",!0),on.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",D,[(0,s.SU)(Je).includes("is_md")?((0,t.wg)(),(0,t.iD)("button",{key:0,type:"button",onClick:l[3]||(l[3]=e=>yn.value=!yn.value),class:(0,i.C_)(["btn d-flex align-items-center",yn.value?"btn-primary":"btn-outline-danger"])},[yn.value?((0,t.wg)(),(0,t.iD)("span",C,"All")):((0,t.wg)(),(0,t.iD)("span",U,"Trashed")),yn.value?((0,t.wg)(),(0,t.iD)("svg",I,N)):((0,t.wg)(),(0,t.iD)("svg",H,$))],2)):(0,t.kq)("",!0)]))])]),on.value?((0,t.wg)(),(0,t.iD)("form",{key:0,class:"p-3 border rounded bg-white shadow",onSubmit:(0,n.iM)(hs,["prevent"]),id:"close"},[(0,t._)("h4",A,(0,i.zw)(fl.value?.name?.toUpperCase()??" REQUISITIONS")+" REGISTRATION FORM",1),(0,t._)("div",E,[(0,t._)("div",O,[(0,t._)("div",L,[(0,t._)("div",B,[P,(0,t._)("div",W,[(0,t._)("input",{type:"checkbox",class:"form-check-input me-2",onChange:l[4]||(l[4]=e=>us("proforma"))},null,32),(0,t._)("span",Y,(0,i.zw)(ds.value.includes("proforma")?"Yes":"No"),1)])]),(0,t._)("div",Q,[F,(0,t.wy)((0,t._)("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":l[5]||(l[5]=e=>Qt.value=e)},null,512),[[n.nr,Qt.value]])]),Qt.value?((0,t.wg)(),(0,t.iD)("div",J,[G,(0,t.wy)((0,t._)("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":l[6]||(l[6]=e=>an.value=e)},null,512),[[n.nr,an.value]])])):(0,t.kq)("",!0),an.value?((0,t.wg)(),(0,t.iD)("div",X,[Z,(0,t.Wm)((0,s.SU)(r()),{class:"w-100",modelValue:fl.value,"onUpdate:modelValue":l[7]||(l[7]=e=>fl.value=e),placeholder:"Create an incidence",label:"name",options:Bn.value},null,8,["modelValue","options"])])):(0,t.kq)("",!0)])])]),fl.value?((0,t.wg)(),(0,t.iD)("div",K,[[6].includes(fl.value.id)?((0,t.wg)(),(0,t.iD)("div",ae,[te,(0,t.Wm)((0,s.SU)(r()),{modelValue:sl.value,"onUpdate:modelValue":l[9]||(l[9]=e=>sl.value=e),options:["construction materials","spares"],placeholder:"Select Group",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue"])])):((0,t.wg)(),(0,t.iD)("div",ee,[le,(0,t.Wm)((0,s.SU)(r()),{modelValue:sl.value,"onUpdate:modelValue":l[8]||(l[8]=e=>sl.value=e),options:Fe.value,placeholder:"Select Requisition Type",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])),6===fl.value?.id?((0,t.wg)(),(0,t.iD)("div",ne,[se,(0,t.Wm)((0,s.SU)(r()),{modelValue:Ss.value,"onUpdate:modelValue":l[10]||(l[10]=e=>Ss.value=e),options:xs.value,placeholder:"Select Store",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),(0,t._)("div",ie,[oe,(0,t.Wm)((0,s.SU)(r()),{modelValue:qn.value,"onUpdate:modelValue":l[11]||(l[11]=e=>qn.value=e),options:Sn.value,placeholder:"Select A Project",searchable:!0,label:"short_name",multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),"budget"===sl.value?((0,t.wg)(),(0,t.iD)("div",re,[(0,t._)("label",de,[x.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:(0,s.SU)(S)()},null,8,ue)):((0,t.wg)(),(0,t.iD)("span",ce,"Select A Budget"))]),(0,t.Wm)((0,s.SU)(r()),{disabled:x.value,modelValue:Un.value,"onUpdate:modelValue":l[12]||(l[12]=e=>Un.value=e),options:Dn.value,placeholder:"Select A Budget",searchable:!0,label:"name",multple:"false",required:!0,"allow-empty":!1},null,8,["disabled","modelValue","options"])])):(0,t.kq)("",!0),Un.value?((0,t.wg)(),(0,t.iD)("div",ve,[me,(0,t.Wm)((0,s.SU)(r()),{modelValue:Rn.value,"onUpdate:modelValue":l[13]||(l[13]=e=>Rn.value=e),options:Hn.value,placeholder:"Select An Item",searchable:!0,label:"name",multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),Rn.value?((0,t.wg)(),(0,t.iD)("div",pe,[be,(0,t.Wm)((0,s.SU)(r()),{modelValue:$n.value,"onUpdate:modelValue":l[14]||(l[14]=e=>$n.value=e),options:Tn.value,placeholder:"Select An Option",searchable:!0,label:"name",multple:"false",required:!1,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),$n.value?.name?.toLowerCase().includes("subcontractor")||ds.value.includes("subcontractor")?((0,t.wg)(),(0,t.iD)("div",ge,[ye,(0,t.Wm)((0,s.SU)(r()),{modelValue:Nn.value,"onUpdate:modelValue":l[15]||(l[15]=e=>Nn.value=e),options:Mn.value,placeholder:"Select Subcontractor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),ds.value.includes("proforma")?((0,t.wg)(),(0,t.iD)("div",_e,[he,(0,t._)("input",{type:"file",class:"form-control form-control-sm",onChange:Xn,accept:"application/pdf"},null,32)])):(0,t.kq)("",!0),(0,t._)("div",we,[(0,t.wy)((0,t._)("textarea",{class:"form-control",placeholder:"Enter Brief Description of the requisition","onUpdate:modelValue":l[16]||(l[16]=e=>ys.value=e),required:""},null,512),[[n.nr,ys.value]])])])):(0,t.kq)("",!0),sl.value?((0,t.wg)(),(0,t.iD)("div",fe,[ke,(0,t._)("div",xe,[Se,"labour"===sl.value?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:0,modelValue:Jt.value,"onUpdate:modelValue":l[17]||(l[17]=e=>Jt.value=e),options:Qn.value,placeholder:"Select Labour",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])):6===fl.value?.id?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:1,modelValue:Jt.value,"onUpdate:modelValue":l[18]||(l[18]=e=>Jt.value=e),options:fs.value,placeholder:"Select Store Item",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])):"spares"===sl.value||"construction materials"===sl.value?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:2,modelValue:Jt.value,"onUpdate:modelValue":l[19]||(l[19]=e=>Jt.value=e),options:Wn.value,placeholder:"Select Option",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])):(0,t.kq)("",!0),(0,t.wy)((0,t._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":l[20]||(l[20]=e=>Jt.value=e),placeholder:"Enter Item"},null,512),[[n.nr,Jt.value]])]),(0,t._)("div",qe,[Ve,(0,t.Wm)((0,s.SU)(r()),{modelValue:Kt.value,"onUpdate:modelValue":l[21]||(l[21]=e=>Kt.value=e),options:pn.value,placeholder:"Unit",label:"short_name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",De,[Ue,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":l[22]||(l[22]=e=>ls.value=e),placeholder:"Enter Description"},null,512),[[n.nr,ls.value]])]),(0,t._)("div",Ce,[(0,t._)("label",He," Quantity "+(0,i.zw)($n.value?" Budgeted : "+$n.value.quantity*$n.value.quantity_2:Jt.value?.balance_quantity?" Available : "+Jt.value.balance_quantity:""),1),(0,t.wy)((0,t._)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":l[23]||(l[23]=e=>Gt.value=e),placeholder:"Qty",step:"any",disabled:["budget"].includes(sl.value)&&!$n.value||6===fl.value?.id&&!Jt.value},null,8,Re),[[n.nr,Gt.value]])]),(0,t._)("div",Te,[(0,t._)("label",$e,["labour"===sl.value?((0,t.wg)(),(0,t.iD)("span",Ie,"Labour Rate")):((0,t.wg)(),(0,t.iD)("span",je,"Rate "+(0,i.zw)($n.value?" Budgeted : "+(0,s.SU)(Dl)($n.value.cost):""),1))]),"labour"===sl.value?((0,t.wg)(),(0,t.iD)("label",Me,(0,i.zw)(Xt.value.toLocaleString())+"/=",1)):(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",{key:1,type:"number",class:"form-control form-control-sm","onUpdate:modelValue":l[24]||(l[24]=e=>Xt.value=e),placeholder:"Enter rate",step:"any",onInput:l[25]||(l[25]=e=>Vs()),disabled:["budget"].includes(sl.value)&&!$n.value},null,40,Ne)),[[n.nr,Xt.value]])]),6!==fl.value?.id?((0,t.wg)(),(0,t.iD)("div",ze,[(0,t._)("label",Ae,(0,i.zw)($n.value?" Balance : "+(0,s.SU)(Dl)(In.value):"Cost"),1),(0,t._)("label",Ee,(0,i.zw)((0,s.SU)(Dl)(Gt.value*Xt.value)),1)])):(0,t.kq)("",!0),6!==fl.value?.id?((0,t.wg)(),(0,t.iD)("div",Oe,[Le,(0,t.Wm)((0,s.SU)(r()),{modelValue:es.value,"onUpdate:modelValue":l[26]||(l[26]=e=>es.value=e),options:fn.value,placeholder:"Select An Asset",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,t.kq)("",!0),6!==fl.value?.id?((0,t.wg)(),(0,t.iD)("div",Be,[Pe,(0,t.Wm)((0,s.SU)(r()),{modelValue:_n.value,"onUpdate:modelValue":l[27]||(l[27]=e=>_n.value=e),options:["Vendor","Beneficiary"],placeholder:"Select Receiver"},null,8,["modelValue"])])):(0,t.kq)("",!0),6!==fl.value?.id?((0,t.wg)(),(0,t.iD)("div",We,[(0,t._)("label",Ye,(0,i.zw)(_n.value),1),"Vendor"===_n.value?((0,t.wg)(),(0,t.j4)((0,s.SU)(r()),{key:0,modelValue:bn.value,"onUpdate:modelValue":l[28]||(l[28]=e=>bn.value=e),options:hn.value,placeholder:"Select Vendor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1,disabled:bn.value?.id},null,8,["modelValue","options","disabled"])):(0,t.kq)("",!0),"Beneficiary"===_n.value?(0,t.wy)(((0,t.wg)(),(0,t.iD)("input",{key:1,type:"text",placeholder:"Enter Beneficiary Name",class:"form-control form-control-sm","onUpdate:modelValue":l[29]||(l[29]=e=>gn.value=e)},null,512)),[[n.nr,gn.value]]):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("div",Qe,[(0,t._)("button",{type:"button",class:"btn btn-outline-success btn-sm mt-4",onClick:l[30]||(l[30]=e=>ts())},Ge)])])):(0,t.kq)("",!0),un.value.length>0?((0,t.wg)(),(0,t.iD)("div",Xe,[(0,t._)("div",Ze,[(0,t._)("div",Ke,[(0,t.Wm)(a,{data:un.value,columns:os.value,options:Ln.value},{actions:(0,t.w5)((e=>[(0,t._)("a",{href:"javascript:void(0);",title:"Delete",onClick:l=>ns(e.row.Sno)},al,8,el)])),_:1},8,["data","columns","options"])])])])):(0,t.kq)("",!0),(0,t._)("div",tl,[(0,t._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l[31]||(l[31]=e=>rs())},il),(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:l[32]||(l[32]=e=>(on.value=!1,rs())),id:"cancel"},"Cancel"),(0,t._)("button",{type:"submit",class:"btn btn-primary btn-sm",disabled:nn.value||un.value.length<=0||gs.value},[gs.value?((0,t.wg)(),(0,t.iD)("span",rl)):((0,t.wg)(),(0,t.iD)("span",dl,"Register"))],8,ol)])],40,z)):(0,t.kq)("",!0),nn.value?((0,t.wg)(),(0,t.iD)("div",{key:1,innerHTML:(0,s.SU)(Sl)()},null,8,ul)):((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[on.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",cl,[(0,t._)("div",vl,[Ps.value?((0,t.wg)(),(0,t.iD)("div",{key:0,innerHTML:(0,s.SU)(Ys)()},null,8,ml)):((0,t.wg)(),(0,t.iD)("div",pl,[(0,t._)("div",bl,[(0,t.Wm)(a,{data:(0,s.SU)(xn),columns:sn.value,options:Ln.value},{status:(0,t.w5)((e=>[(0,t._)("span",{class:(0,i.C_)(["badge inv-status","badge-"+e.row.status.class])},(0,i.zw)(e.row.status.key),3)])),sno:(0,t.w5)((({index:e})=>[(0,t.Uk)((0,i.zw)(e+0),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",gl,[(0,t._)("a",{href:"javascript:void(0);",title:"View","data-bs-toggle":"modal","data-bs-target":"#view_requisition",onClick:l=>ps(e.row)},hl,8,yl),(0,s.SU)(Je).includes("can_edit_requisition")?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:void(0);",title:"Edit",onClick:l=>js(e.row),"data-bs-toggle":"modal","data-bs-target":"#edit-requisition-modal"},kl,8,wl)):(0,t.kq)("",!0),(0,s.SU)(Je).includes("can_print_lpo")?((0,t.wg)(),(0,t.iD)("a",{key:1,href:"javascript:void(0);",onClick:l=>Bs(e.row),class:"text-success me-2"},ql,8,xl)):(0,t.kq)("",!0),(0,s.SU)(Je).includes("can_delete_requisition")?((0,t.wg)(),(0,t.iD)("svg",{key:2,onClick:l=>Qs(e.row),style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-trash text-danger",viewBox:"0 0 16 16"},Cl,8,Vl)):(0,t.kq)("",!0)])])),_:1},8,["data","columns","options"])])]))])]))],64)),(0,t._)("div",Hl,[(0,t._)("div",Rl,[(0,t._)("div",Tl,[(0,t._)("div",$l,[Il,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[33]||(l[33]=e=>rs()),id:"close-requisition-modal"})]),(0,t._)("div",jl,[(0,t._)("div",Ml,[(0,t._)("div",Nl,[(0,t._)("div",zl,[(0,t._)("table",Al,[(0,t._)("thead",null,[(0,t._)("tr",null,[El,Ol,Ll,"Unapproved"!==ms.value.status?.key?((0,t.wg)(),(0,t.iD)("th",Bl,(0,i.zw)(ms.value.status?.key),1)):(0,t.kq)("",!0),Pl,Wl,Yl,Ql])]),(0,t._)("tbody",null,[(0,t._)("tr",null,[(0,t._)("td",null,(0,i.zw)(ms.value.id),1),(0,t._)("td",null,(0,i.zw)(ms.value.requester),1),(0,t._)("td",null,(0,i.zw)(ms.value.date),1),"Unapproved"!==ms.value.status?.key?((0,t.wg)(),(0,t.iD)("td",Fl,(0,i.zw)((0,s.SU)(Ul)(ms.value.approved_at)),1)):(0,t.kq)("",!0),(0,t._)("td",null,(0,i.zw)(ms.value.type),1),(0,t._)("td",null,(0,i.zw)(ms.value.purpose),1),(0,t._)("td",null,(0,i.zw)(ms.value.project),1),(0,t._)("td",null,[(0,t._)("span",{class:(0,i.C_)(["mb-0 badge",`badge-${ms.value.status?.class}`])},(0,i.zw)(ms.value.status?.key),3)])]),ms.value.description?((0,t.wg)(),(0,t.iD)("tr",Jl,[(0,t._)("td",Gl,[Xl,(0,t.Uk)(" "+(0,i.zw)(ms.value.description),1)])])):(0,t.kq)("",!0),ms.value.remark?((0,t.wg)(),(0,t.iD)("tr",Zl,[(0,t._)("td",Kl,[ea,(0,t.Uk)(" "+(0,i.zw)(ms.value.remark),1)])])):(0,t.kq)("",!0)])])])])]),(0,t._)("div",la,[aa,(0,t._)("span",null,(0,i.zw)(ms.value?.items?.reduce(((e,l)=>{const a=Number(l.quantity)||0,t=Number(l.rate)||0;return e+a*t}),0).toLocaleString()+"/="),1)]),"approved"!==ms.value.status?.key&&(0,s.SU)(Je).includes("can_approve_requisition")?((0,t.wg)(),(0,t.iD)("div",ta,[(0,t._)("div",na,[(0,t._)("button",{class:"btn btn-primary me-2",onClick:l[34]||(l[34]=e=>Ft.value=3),disabled:_l.value},"Approve",8,sa),(0,t._)("button",{class:"btn btn-danger me-2",onClick:l[35]||(l[35]=e=>Ft.value=4),disabled:_l.value},"Reject",8,ia),(0,t._)("button",{class:"btn btn-warning me-2",onClick:l[36]||(l[36]=e=>(Ft.value=17,Zt.value=ms.value.remark)),disabled:_l.value},"Hold Request",8,oa),(0,t._)("button",{class:"btn btn-info me-2",onClick:l[37]||(l[37]=e=>(Ft.value=14,Zt.value=ms.value.remark)),disabled:_l.value},"Remark",8,ra)]),ms.value.requester_id==(0,s.SU)(ll)&&"closed"===Os.value?.status?((0,t.wg)(),(0,t.iD)("div",da,[(0,t._)("button",{class:"btn btn-success",onClick:l[38]||(l[38]=e=>{Ft.value=3,En(ms.value)}),disabled:_l.value},[_l.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:(0,s.SU)($a)()},null,8,ca)):((0,t.wg)(),(0,t.iD)("span",va,"Activate"))],8,ua)])):(0,t.kq)("",!0),Ft.value?((0,t.wg)(),(0,t.iD)("div",ma,[(0,t._)("span",{class:(0,i.C_)(["badge rounded-pill",{"bg-danger":4==Ft.value,"bg-success":3==Ft.value,"bg-warning":17==Ft.value,"bg-info":3!=Ft.value&&4!=Ft.value}]),style:{"font-size":"1rem"}},(0,i.zw)(3==Ft.value?"Approve Request":17==Ft.value?"Hold Request":4==Ft.value?"Reject Request":"Fill Remark"),3)])):(0,t.kq)("",!0),Ft.value?((0,t.wg)(),(0,t.iD)("div",pa,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:3==Ft.value?"Enter Approval Remark":4==Ft.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":l[39]||(l[39]=e=>Zt.value=e)},null,8,ba),[[n.nr,Zt.value]]),(0,t._)("button",{class:"btn btn-primary",type:"button",disabled:_l.value,onClick:l[40]||(l[40]=e=>En(ms.value))},[_l.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:(0,s.SU)($a)()},null,8,ya)):((0,t.wg)(),(0,t.iD)("span",_a,"Save"))],8,ga)])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("form",{onSubmit:l[41]||(l[41]=(0,n.iM)((e=>On()),["prevent"]))},[(0,t._)("div",ha,[wa,6===fl.value?.id&&Ss.value?((0,t.wg)(),(0,t.iD)("div",fa,[(0,t._)("div",ka,[(0,t._)("div",xa,[(0,t._)("table",Sa,[qa,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(ss.value,(e=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id},[(0,t._)("td",null,(0,i.zw)(e.item),1),(0,t._)("td",null,[(0,t.Wm)((0,s.SU)(r()),{modelValue:e.store_item,"onUpdate:modelValue":l=>e.store_item=l,options:fs.value,placeholder:"Select Item",searchable:!0,multple:"false",label:"name",required:!0,"allow-empty":!1},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,t._)("td",null,[(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",placeholder:"available "+e.store_item.balance_quantity,"onUpdate:modelValue":l=>e.issued_quantity=l,required:"",max:e.store_item.balance_quantity},null,8,Va),[[n.nr,e.issued_quantity]])]),(0,t._)("td",null,[(0,t._)("label",Da,(0,i.zw)(e.store_item.condition??"Select Item First"),1)])])))),128))])])])])])):(0,t.kq)("",!0),(0,t._)("div",{class:(0,i.C_)(["col-lg-12","col-sm-12","layout-spacing",cs.value?"col-xl-6":"col-xl-12"])},[(0,t._)("div",Ua,[(0,t._)("div",Ca,[(0,t.Wm)(a,{data:ss.value,columns:is.value,options:Ln.value},{description:(0,t.w5)((e=>[ms.value.subcontractor?((0,t.wg)(),(0,t.j4)(o,{key:0,class:"btn btn-outline-primary",to:`/subcontractor/${ms.value.subcontractor.id}`},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.description),1)])),_:2},1032,["to"])):e.row.asset_id&&"jobcard"!==ms.value.type?((0,t.wg)(),(0,t.j4)(o,{key:1,class:"btn btn-outline-primary",to:`/assets/fuel-statement/${e.row.asset_id}`},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.description),1)])),_:2},1032,["to"])):"jobcard"===ms.value.type?((0,t.wg)(),(0,t.j4)(o,{key:2,class:"btn btn-outline-primary",to:`/jobcard/${ms.value.item_id}/${e.row.asset_id}`},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.description),1)])),_:2},1032,["to"])):((0,t.wg)(),(0,t.iD)("span",Ha,(0,i.zw)(e.row.description),1))])),actions:(0,t.w5)((e=>[(0,t._)("div",Ra,[(0,s.SU)(Je).includes("can_edit_requisition")?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:void(0);",title:"Edit",onClick:l=>zs(e.row)},Ia,8,Ta)):(0,t.kq)("",!0),e.row.asset_id?((0,t.wg)(),(0,t.j4)(o,{key:1,to:`/assets/fuel-statement/${e.row.asset_id}`,onClick:Us},{default:(0,t.w5)((()=>[ja])),_:2},1032,["to"])):(0,t.kq)("",!0),"budget"===ms.value.type?((0,t.wg)(),(0,t.j4)(o,{key:2,to:`/requisition-budget/${e.row.item_id}`,onClick:Us},{default:(0,t.w5)((()=>[Ma])),_:2},1032,["to"])):(0,t.kq)("",!0)])])),_:1},8,["data","columns","options"])])]),en.value.length>0?((0,t.wg)(),(0,t.iD)("div",Na,[za,(0,t._)("table",Aa,[Ea,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(en.value,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id},[(0,t._)("td",null,(0,i.zw)(l+1),1),Oa,(0,t._)("td",null,(0,i.zw)(new Date(e.created_at).toLocaleDateString("en-GB")),1),(0,t._)("td",null,(0,i.zw)(e.remark),1)])))),128))])])])):(0,t.kq)("",!0)],2),cs.value?((0,t.wg)(),(0,t.iD)("div",La,[(0,t._)("div",Ba,[(0,t._)("a",{href:cs.value,target:"_blank",class:"stretched-link"},null,8,Pa),Wa,(0,t._)("embed",{src:cs.value,type:"application/pdf",width:"100%",height:"600px"},null,8,Ya)])])):(0,t.kq)("",!0)])],32)]),(0,t._)("div",{class:"modal-footer"},[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:rs},"Close")])])])]),(0,t._)("div",Qa,[(0,t._)("div",Fa,[(0,t._)("div",Ja,[(0,t._)("div",Ga,[Xa,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[42]||(l[42]=e=>Ms())})]),(0,t._)("form",{onSubmit:l[52]||(l[52]=(0,n.iM)((e=>Cs()),["prevent"]))},[(0,t._)("div",Za,[(0,t._)("div",Ka,[(0,t._)("div",et,[lt,(0,t.Wm)((0,s.SU)(r()),{modelValue:Is.value,"onUpdate:modelValue":l[43]||(l[43]=e=>Is.value=e),options:Jn.value,placeholder:"Select Status",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",at,[(0,t._)("div",null,[tt,(0,t.Wm)((0,s.SU)(r()),{modelValue:$s.value,"onUpdate:modelValue":l[44]||(l[44]=e=>$s.value=e),options:Sn.value,placeholder:"Select A Project",searchable:!0,label:"short_name","track-by":"id",multple:"false",required:!0,"allow-empty":!0,onRemove:l[45]||(l[45]=e=>qn.value=null)},null,8,["modelValue","options"])])]),(0,t._)("div",nt,[st,(0,t.Wm)((0,s.SU)(r()),{modelValue:Nn.value,"onUpdate:modelValue":l[46]||(l[46]=e=>Nn.value=e),options:Mn.value,placeholder:"Select Subcontractor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])]),(0,t._)("div",it,[(0,t._)("div",ot,[(0,t._)("div",null,[rt,(0,t.Wm)((0,s.SU)(r()),{modelValue:bn.value,"onUpdate:modelValue":l[47]||(l[47]=e=>bn.value=e),options:hn.value,placeholder:"Select Vendor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])]),(0,t._)("div",dt,[ut,(0,t.Wm)((0,s.SU)(r()),{class:"w-100",modelValue:fl.value,"onUpdate:modelValue":l[48]||(l[48]=e=>fl.value=e),placeholder:"Create an incidence",label:"name",options:Bn.value},null,8,["modelValue","options"])]),(0,t._)("div",ct,[vt,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[49]||(l[49]=e=>gn.value=e),class:"form-control",placeholder:"beneficiary"},null,512),[[n.nr,gn.value]])])]),(0,t._)("div",mt,[(0,t._)("div",pt,[bt,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[50]||(l[50]=e=>Ts.value=e),class:"form-control",placeholder:"Enter description"},null,512),[[n.nr,Ts.value]])])])]),(0,t._)("div",gt,[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:l[51]||(l[51]=e=>Ms()),id:"close_modal"},"Close"),(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:nn.value||gs.value},[nn.value||gs.value?((0,t.wg)(),(0,t.iD)("span",_t)):((0,t.wg)(),(0,t.iD)("span",ht,"Edit"))],8,yt)])],32)])])]),(0,t._)("div",wt,[(0,t._)("div",ft,[(0,t._)("div",kt,[(0,t._)("div",xt,[St,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[53]||(l[53]=e=>Ms())})]),(0,t._)("form",{onSubmit:l[63]||(l[63]=(0,n.iM)((e=>Ns()),["prevent"]))},[(0,t._)("div",qt,[(0,t._)("div",Vt,[(0,t._)("div",Dt,[Ut,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[54]||(l[54]=e=>Jt.value=e),class:"form-control",placeholder:"Enter Item",required:""},null,512),[[n.nr,Jt.value]])]),(0,t._)("div",Ct,[Ht,(0,t.Wm)((0,s.SU)(r()),{modelValue:Kt.value,"onUpdate:modelValue":l[55]||(l[55]=e=>Kt.value=e),options:pn.value,placeholder:"Select Unit",label:"short_name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",Rt,[Tt,(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":l[56]||(l[56]=e=>Gt.value=e),class:"form-control",placeholder:"Enter Quantity",min:"0",required:"",step:"any"},null,512),[[n.nr,Gt.value]])]),(0,t._)("div",$t,[It,(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":l[57]||(l[57]=e=>Xt.value=e),class:"form-control",placeholder:"Enter Rate",min:"0",required:"",step:"any"},null,512),[[n.nr,Xt.value]])]),(0,t._)("div",jt,[Mt,(0,t.Wm)((0,s.SU)(r()),{modelValue:es.value,"onUpdate:modelValue":l[58]||(l[58]=e=>es.value=e),options:fn.value,placeholder:"Select An Asset",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",Nt,[zt,(0,t.Wm)((0,s.SU)(r()),{modelValue:bn.value,"onUpdate:modelValue":l[59]||(l[59]=e=>bn.value=e),options:hn.value,placeholder:"Select Vendor",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",At,[Et,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[60]||(l[60]=e=>gn.value=e),class:"form-control",placeholder:"beneficiary"},null,512),[[n.nr,gn.value]])]),(0,t._)("div",Ot,[Lt,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[61]||(l[61]=e=>ls.value=e),class:"form-control",placeholder:"Enter Description"},null,512),[[n.nr,ls.value]])])])]),(0,t._)("div",Bt,[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:l[62]||(l[62]=e=>Ms()),id:"close_editing"},"Close"),(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:nn.value||gs.value},[nn.value||gs.value?((0,t.wg)(),(0,t.iD)("span",Wt)):((0,t.wg)(),(0,t.iD)("span",Yt,"Update"))],8,Pt)])],32)])])])])}}};const Ft=Qt;var Jt=Ft}}]);
//# sourceMappingURL=7979.56499de4.js.map