"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[9121],{58483:function(e,t,a){a.d(t,{i:function(){return n}});a(26699);function n(e,t){const a=t.toLowerCase().trim();if(!a)return e;const n=e=>null!=e&&("string"===typeof e?e.toLowerCase().includes(a):Array.isArray(e)?e.some(n):"object"===typeof e&&Object.values(e).some(n));return e.filter((e=>n(e)))}},86500:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(66252),l=a(49963),s=a(2262);const o=(0,n._)("span",{class:"input-group-text bg-white border-start-0"},[(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,n._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z"})])],-1);var i={props:{filterValue:String},emits:["update:filterValue"],setup(e,{emit:t}){const a=e,i=(0,s.iH)(a.filterValue||null);return(0,n.YP)(i,(e=>t("update:filterValue",e))),(e,t)=>((0,n.wg)(),(0,n.iD)("form",{onSubmit:t[1]||(t[1]=(0,l.iM)((()=>{}),["prevent"])),class:"input-group container"},[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e)},null,512),[[l.nr,i.value]]),o],32))}};const r=i;var d=r},9121:function(e,t,a){a.r(t),a.d(t,{default:function(){return se}});var n=a(66252),l=a(3577),s=a(49963),o=a(2262),i=a(87066),r=a(56296),d=(a(86500),a(58483),a(26212)),c=a.n(d);const u={class:"layout-px-spacing"},p=(0,n.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Attendances</a></li><li class="breadcrumb-item active" aria-current="page"><span> Employee Attendance </span></li></ol></nav></div></li></ul>',1),m={class:"navbar-nav flex-row ms-auto"},v={class:"nav-item more-dropdown"},b={class:"dropdown custom-dropdown-icon"},g=(0,n._)("a",{href:"javascript:;",class:"nav-link dropdown-toggle",id:"ddlSettings","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n._)("span",null,"Select a company"),(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},[(0,n._)("polyline",{points:"6 9 12 15 18 9"})])],-1),h={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"ddlSettings"},f=(0,n._)("a",{class:"dropdown-item","data-value":"Mail",href:"javascript:void(0);"},"BUSHMAN SAFARI",-1),w=[f],y=(0,n._)("a",{class:"dropdown-item","data-value":"Settings",href:"javascript:void(0);"},"COPEX CONTRACTORS",-1),_=[y],x={key:0,class:"text-center"},k={class:"d-flex justify-content-end align-items-center mb-3"},C={class:"d-flex align-items-center gap-2 me-2"},S=(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,n._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,n._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),E=[S],A=["innerHTML"],T={key:2,class:"row layout-top-spacing"},N={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},H={class:"panel p-0"},O={class:"custom-table table3"},R=["onClick"],M=(0,n._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"},null,-1),z=(0,n._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"},null,-1),D=[M,z],V={class:"modal fade mymodal",id:"fill-attendance","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},P={class:"modal-dialog modal-xl"},L={class:"modal-content"},U={class:"modal-header"},$={class:"modal-title fs-5",id:"staticBackdropLabel"},B=(0,n.Uk)(" EMPLOYEE ATTENDANCE FOR "),j=(0,n.Uk)(" ON "),I=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close-attendance"},null,-1),Y={class:"modal-body"},F={class:"row"},W={class:"col-md-3"},X=(0,n._)("label",{class:"form-label"},"Select Status",-1),q={class:"col-md-6"},K=(0,n._)("label",{class:"form-label"},"Enter Attendance Time",-1),Z={class:"col-md-12"},J=(0,n._)("label",{class:"form-label"},"Enter Brief Description",-1),G={class:"modal-footer"},Q=(0,n._)("button",{type:"button",class:"btn btn-danger btn-sm py-2 px-2","data-bs-dismiss":"modal"},"Close",-1),ee=["disabled"],te=["innerHTML"],ae={key:1};var ne={setup(e){(0,r.j)({title:"Employee Attendance"});const t=(0,o.iH)(""),a=(0,n.f3)("showError"),d=((0,n.f3)("formatNumber"),(0,n.f3)("tableShimmer")),f=(0,o.iH)(!1),y=(0,o.iH)(["SNo","name","status","check_in_time","description","actions"]),S=(0,o.iH)([]),M=(0,o.iH)((new Date).toISOString().split("T")[0]),z=(0,o.iH)(""),ne=(0,o.iH)(""),le=(0,o.iH)(""),se=(0,o.iH)({perPage:20,perPageValues:[20,30,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name","status","check_in_time"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),oe=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),ie=(0,o.iH)(""),re=async()=>{f.value=!0;try{const e=await oe.get(`head-office-attendances?date=${M.value}&company_id=${t.value}`);S.value=e.data.map(((e,t)=>({...e,SNo:t+1,name:e.name,status:e.status,check_in_time:e.check_in_time||"--"})))}catch(e){console.log(e),a(e.message)}finally{f.value=!1}},de=async()=>{try{const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const a=5==t.value?"BUSHMAN SAFARI TRACKERS":6==t.value?"COPEX CONTRACTORS CO.LTD":"COMPANY",n=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Employee Attendance Report</title>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .company-title { text-align: center; }\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; page-break-inside: auto; }\n  thead { display: table-header-group; }\n  tfoot { display: table-footer-group; }\n  tr { page-break-inside: avoid; page-break-after: auto; }\n  th, td { border: 0.5px solid #000; padding: 6px; }\n  th { background-color: #f8f8f8; font-weight: bold; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\n  .badge { padding: 4px 8px; border-radius: 4px; font-weight: bold; }\n  .badge-present { background-color: #28a745; color: white; }\n  .badge-absent { background-color: #dc3545; color: white; }\n  .summary-row { page-break-inside: avoid; }\n  @media print { \n    body { margin: 10mm; } \n    table { page-break-inside: auto; }\n    tr { page-break-inside: avoid; page-break-after: auto; }\n    thead { display: table-header-group; }\n    tfoot { display: table-footer-group; }\n  }\n</style>\n</head>\n<body>\n\n<div class="company-title text-style">\n  <i>\n  <h1>${a}</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n\n<hr style="margin-top:20px">\n\n<div class="title text-style">\n  EMPLOYEE ATTENDANCE REPORT\n</div>\n\n<div class="text-center text-style">\n  <b>Date:</b> ${M.value}\n</div>\n\n<hr>\n\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Employee Name</th>\n      <th class="text-center">Status</th>\n      <th class="text-center">Check-in Time</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${S.value.map(((e,t)=>`\n    <tr>\n      <td>${t+1}</td>\n      <td>${e.name||"N/A"}</td>\n      <td class="text-center">\n        <span class="badge ${"present"===e.status?"badge-present":"badge-absent"}">\n          ${e.status||"N/A"}\n        </span>\n      </td>\n      <td class="text-center">${e.check_in_time||"--"}</td>\n    </tr>\n    `)).join("")}\n  </tbody>\n  <tfoot>\n    <tr class="summary-row">\n      <td colspan="4" class="text-right">\n        <strong>Total Employees: ${S.value.length}</strong> | \n        <strong>Present: ${S.value.filter((e=>"present"===e.status)).length}</strong> | \n        <strong>Absent: ${S.value.filter((e=>"absent"===e.status)).length}</strong>\n      </td>\n    </tr>\n  </tfoot>\n</table>\n\n</body>\n</html>\n`,l=e.contentWindow.document;l.open(),l.write(n),l.close(),e.onload=()=>{e.contentWindow.focus(),e.contentWindow.print(),setTimeout((()=>{document.body.removeChild(e)}),1e3)}}catch(e){a(`Failed to print attendance report: ${e.message}`)}},ce=()=>{le.value="",z.value="",ne.value="",ie.value="",le.value="",z.value="",ne.value=""},ue=e=>{t.value=e,re()},pe=(0,n.f3)("loadingSpinner"),me=(0,o.iH)(!1),ve=async()=>{me.value=!0;const e={emp_device_id:ie.value.emp_device_id,check_in_time:le.value,punch_status:"PRESENT"===z.value?"Check In":"On Leave",supervisor_id:JSON.parse(localStorage.getItem("user")).id,description:ne.value};try{await oe.post("head-office-attendances",e);document.getElementById("close-attendance").click(),re(),ce()}catch(t){a(t.message),console.log(t)}finally{me.value=!1}};return(0,n.bv)((async()=>{})),(e,a)=>{const i=(0,n.up)("v-client-table");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",u,[p,((0,n.wg)(),(0,n.j4)(n.lR,{to:"#breadcrumb"},[(0,n._)("ul",m,[(0,n._)("li",v,[(0,n._)("div",b,[g,(0,n._)("ul",h,[(0,n._)("li",{onClick:a[0]||(a[0]=e=>ue(5))},w),(0,n._)("li",{onClick:a[1]||(a[1]=e=>ue(6))},_)])])])])])),t.value?((0,n.wg)(),(0,n.iD)("h3",x,(0,l.zw)(5==t.value?"BUSHMAN SAFARI TRACKERS ATTENDANCE":6==t.value?"COPEX CONTRACTORS ATTENDANCE":null)+" "+(0,l.zw)(M.value),1)):(0,n.kq)("",!0),(0,n._)("div",k,[(0,n._)("div",C,[(0,n.wy)((0,n._)("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=e=>M.value=e),onChange:re,class:"form-control form-control-sm",style:{width:"150px"}},null,544),[[s.nr,M.value]])]),(0,n._)("button",{onClick:a[3]||(a[3]=e=>de()),class:"btn btn-success"},E)]),f.value?((0,n.wg)(),(0,n.iD)("div",{key:1,innerHTML:(0,o.SU)(d)()},null,8,A)):((0,n.wg)(),(0,n.iD)("div",T,[(0,n._)("div",N,[(0,n._)("div",H,[(0,n._)("div",O,[(0,n.Wm)(i,{data:S.value,columns:y.value,options:se.value},{status:(0,n.w5)((e=>[(0,n._)("span",{class:(0,l.C_)(["badge",{"bg-success":"Check In"===e.row.status,"bg-danger":"absent"===e.row.status,"bg-info":"On Leave"===e.row.status}])},(0,l.zw)(e.row.status),3)])),actions:(0,n.w5)((e=>["absent"===e.row.status?((0,n.wg)(),(0,n.iD)("svg",{key:0,"data-bs-toggle":"modal","data-bs-target":"#fill-attendance",onClick:t=>ie.value=e.row,style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-eye text-primary",viewBox:"0 0 16 16"},D,8,R)):(0,n.kq)("",!0)])),_:1},8,["data","columns","options"])])])])]))]),(0,n._)("div",V,[(0,n._)("div",P,[(0,n._)("div",L,[(0,n._)("div",U,[(0,n._)("h1",$,[B,(0,n._)("i",null,[(0,n._)("b",null,(0,l.zw)(ie.value?.name),1)]),j,(0,n._)("i",null,(0,l.zw)(M.value),1)]),I]),(0,n._)("div",Y,[(0,n._)("div",F,[(0,n._)("div",W,[X,(0,n.Wm)((0,o.SU)(c()),{modelValue:z.value,"onUpdate:modelValue":a[4]||(a[4]=e=>z.value=e),options:["PRESENT","On Leave"],placeholder:"Select Status",searchable:!0,"allow-empty":!1},null,8,["modelValue"])]),(0,n._)("div",q,[K,(0,n.wy)((0,n._)("input",{class:"form-control",type:"datetime-local",step:"any","onUpdate:modelValue":a[5]||(a[5]=e=>le.value=e)},null,512),[[s.nr,le.value]])]),(0,n._)("div",Z,[J,(0,n.wy)((0,n._)("input",{class:"form-control",type:"text",step:"any","onUpdate:modelValue":a[6]||(a[6]=e=>ne.value=e),placeholder:"Enter Brief description"},null,512),[[s.nr,ne.value]])])])]),(0,n._)("div",G,[Q,(0,n._)("button",{type:"button",class:"btn btn-success btn-sm py-2 px-2",onClick:a[7]||(a[7]=e=>ve()),disabled:me.value||!le.value},[me.value?((0,n.wg)(),(0,n.iD)("span",{key:0,innerHTML:(0,o.SU)(pe)()},null,8,te)):((0,n.wg)(),(0,n.iD)("span",ae,"Save"))],8,ee)])])])])],64)}}};const le=ne;var se=le}}]);
//# sourceMappingURL=9121.f0df486e.js.map