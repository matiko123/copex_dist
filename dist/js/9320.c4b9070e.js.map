{"version":3,"file":"js/9320.c4b9070e.js","mappings":"osWA+eIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,qBACjB,MAAMC,GAAkBC,EAAAA,EAAAA,KAAI,GACtBC,GAAkBD,EAAAA,EAAAA,KAAI,GACtBE,EAAW,kDACXC,GAAcC,EAAAA,EAAAA,IAAO,eACrBC,GAAYD,EAAAA,EAAAA,IAAO,aAEnBE,GAAWN,EAAAA,EAAAA,KAAI,GACfO,GAAsBP,EAAAA,EAAAA,IAAI,GAC1BQ,EAAsB,KACxBD,EAAoBE,OAAS,EAE1BF,EAAoBE,OAAO,GAC1BH,EAAUG,OAAO,EACjBF,EAAoBE,MAAM,GACrBF,EAAoBE,MAAM,IAC/BH,EAAUG,OAAM,IAItBC,GAAuBC,IACzB,IAAKA,GAAQC,YAAa,OAAO,EAEjC,IAAIC,EAAY,EAchB,MAZA,CAAC,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,UAAUC,SAAQC,IACnF,MAAMC,EAAQL,EAAOC,YAAYG,GAE5BC,GAAmB,QAAVA,IAEO,aAAjBA,EAAMC,OACNJ,GAAa,EACW,iBAAjBG,EAAMC,SACbJ,GAAa,QAIdK,WAAWL,EAAUM,QAAQ,KAKlCC,IAAWpB,EAAAA,EAAAA,IAAI,IACfqB,IAAmBrB,EAAAA,EAAAA,IAAI,IACnBsB,GAAeC,UAErBC,EAAAA,EAAAA,IACQ,uDACLC,MAAMC,IACDC,MAAMC,QAAQF,EAASG,MACzBT,GAASX,MAAQiB,EAASG,KAAKC,KAAIC,IAAW,CAC5CC,GAAID,EAAQC,GACZC,KAAMF,EAAQE,UAGlBC,cAAczB,MAAQ,gCAAkC0B,MAAMC,QAC9DC,QAAQF,MAAMD,cAAczB,WAG7B6B,OAAOH,IACNE,QAAQF,MAAM,+BAAgCA,EAAMC,YAMrDG,SAAQ,UAMTC,IAAcxC,EAAAA,EAAAA,IAAI,IAClByC,IAAqBzC,EAAAA,EAAAA,IAAI,IACzB0C,IAAc1C,EAAAA,EAAAA,IAAI,IAClB2C,IAAa3C,EAAAA,EAAAA,IAAI,IACjB4C,IAAe5C,EAAAA,EAAAA,IAAI,GACnB6C,IAAe7C,EAAAA,EAAAA,KAAI,IAAI8C,MAAOC,cAAcC,MAAM,KAAK,IACvDC,IAAajD,EAAAA,EAAAA,IAAI,GACjBkD,IAAclD,EAAAA,EAAAA,IAAI,IAClBmD,IAAYnD,EAAAA,EAAAA,IAAI,IAChBiB,IAASjB,EAAAA,EAAAA,IAAI,gBACboD,IAAWpD,EAAAA,EAAAA,IAAI,IACfqD,IAASrD,EAAAA,EAAAA,IAAI,IACbsD,IAAatD,EAAAA,EAAAA,IAAI,IACjBuD,IAAWvD,EAAAA,EAAAA,IAAI,IACfwD,IAAYxD,EAAAA,EAAAA,MACZyD,IAAmBzD,EAAAA,EAAAA,IAAI,GACvB0D,GAAcC,IAClB,MAAMC,EAAI,IAAId,KAAKa,GACnB,OAAOC,EAAEb,cAAcC,MAAM,KAAK,IAE9Ba,IAAqB7D,EAAAA,EAAAA,IAAI,IACzB8D,IAAU9D,EAAAA,EAAAA,IAAI,MAEd+D,GAAgBxC,MAAAA,IAChByC,QAAQ,mDACN/D,EAAgBQ,OAAQ,EACpBe,EAAAA,EAAAA,UACS,GAAEtB,oBAA2B8B,KACrCP,MAAMC,IACHuC,KACAvB,GAAYjC,MAAM,GAClByD,KACAjE,EAAgBQ,OAAQ,EACA,MAApBiB,EAASyC,OACVhE,EAAY,gCAEXE,EAAU,yBACVgC,QAAQF,MAAM,uBAAwBT,EAASG,KAAKO,aAG3DE,OAAOH,IACJ9B,EAAU8B,EAAMC,SAChBC,QAAQF,MAAM,yBAA0BA,QASlDiC,GAAa7C,UACnBtB,EAAgBQ,OAAM,EACpBV,EAAgBU,OAAQ,EACxB,MAAM4D,EAAc,CAClB,UAAalB,GAAU1C,MACvB,UAAaiD,GAAWR,GAAYzC,OACpC,WAAc6C,GAAW7C,MACzB,SAAY8C,GAAS9C,MACrB,QAAYY,GAAiBZ,MAAMwB,KACnC,UAAcuB,GAAU/C,MACxB,SAAY2C,GAAS3C,MACrB,OAAUQ,GAAOR,MACjB,OAAU4C,GAAO5C,MACjB,mBAAqBoD,GAAmBpD,MACxC,QAAUqD,GAAQrD,OAAS,GAG7B,IACE,MAAMiB,QAAiBF,EAAAA,EAAAA,KAAY,GAAEtB,mBAA2BmE,GACzC,KAAnB3C,EAASyC,QACTF,KACAC,KACAb,GAAO5C,MAAM,GACfN,EAAY,+BACRkB,GAAiBZ,MAAQ,GACzB+C,GAAU/C,MAAQ,EAClBR,EAAgBQ,OAAM,IAG1BJ,EAAU,0BACNJ,EAAgBQ,OAAM,EAE1B4B,QAAQF,MAAMT,IAEhB,MAAOS,OACHlC,EAAgBQ,OAAM,EAE1B4B,QAAQF,MAAM,2BAA4BA,OAC1C9B,EAAU8B,MAAMC,WAKdkC,GAAc/C,MAAAA,IACd,MAAMgD,EAAS,CACT,UAAYlB,GAAO5C,OAEvB+D,GAAU/D,MAAS,OAAQgE,EAAQ9D,OAAO+D,YAAa,IAAKD,EAAQ9D,OAAOsB,KAAO,OAAQwC,EAAQE,UAAW,MAAOtB,GAAO5C,MAC3H,IACI,MAAMiB,QAAiBF,EAAAA,EAAAA,MAAa,GAAEtB,oBAA2BuE,EAAQzC,KAAKuC,GAEtD,KAAnB7C,EAASyC,QACVd,GAAO5C,MAAQ,GACfmE,KACAzE,EAAY,4BACZ8D,OAGAZ,GAAO5C,MAAM,GACbJ,EAAU,wBACVgC,QAAQF,MAAMA,QAEpB,MAAOA,OACLkB,GAAO5C,MAAO,GACd4B,QAAQF,MAAM,uBAAwBA,OACtC9B,EAAU8B,MAAMC,WAItByC,GAAW,CAAClE,EAAOqB,EAAG2B,KACxBV,GAAWxC,MAAQuB,EACnBmB,GAAU1C,MAAQE,EAAOqB,GACzBQ,GAAY/B,MAAQE,EAAOsB,KAC3BQ,GAAmBhC,MAAQE,EAAO+D,YAClC/B,GAAYlC,MAAQE,EAAOmE,KAC3BpC,GAAYjC,MAAQE,EAAO+B,YAC3BQ,GAAYzC,MAAQkD,EACpBM,KACAc,YAAW,KACP,MAAMC,EAAUC,SAASC,eAAe,SAAWlD,GACnD,GAAIgD,EAAS,CAET,MAAMG,EAAQC,OAAOC,UAAY,IAAID,OAAOC,UAAUC,MAAMN,GAAW,KACnEG,GACAA,EAAMI,UAGf,MAEDC,GAAe,KACjB,MAAMC,EAAW5C,GAAapC,MAAQ,IAAIqC,KAAKD,GAAapC,OAAS,IAAIqC,KACnE/B,EAAM0E,EAASC,SAGfC,EAAU,IAAI7C,KAAK2C,GAEzBE,EAAQC,QAAQH,EAASI,WAAa9E,EAAM,EAAI,GAAK,GAErD,MAAM+E,EAAY,GAElB,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,MAAMnC,EAAI,IAAId,KAAK6C,GACnB/B,EAAEgC,QAAQD,EAAQE,UAAYE,GAC9BD,EAAUE,KAAKpC,EAAEb,cAAcC,MAAM,KAAK,IAG9C,OAAO8C,GAELG,GAAY1E,UACZxB,EAAgBU,OAAO,EACvB,MAAM8D,EAAS,CACT,KAAQ/B,GAAY/B,MACpB,YAAeiC,GAAYjC,MAAMwB,KACjC,QAAWS,GAAYjC,MAAMuB,GAC7B,YAAcS,GAAmBhC,MACjC,KAAQ,EACR,WAAcgD,GAAiBhD,MAAMuB,GACrC,aAAeyB,GAAiBhD,MAAMyF,YAGpC7D,QAAQ8D,IAAI5B,GAClB,IACI,MAAM7C,QAAiBF,EAAAA,EAAAA,KAAY,GAAEtB,WAAkBqE,GACvD7B,GAAYjC,MAAM,GAChByD,KACsB,KAAnBxC,EAASyC,OACVhE,EAAY,6BAGZE,EAAU,wBACVgC,QAAQF,MAAMA,QAGpB,MAAOA,OACLE,QAAQF,MAAM,0BAA2BA,OACzC9B,EAAU8B,MAAMC,WAKlBgE,IAAUpG,EAAAA,EAAAA,IAAI,IACdqG,IAAkBrG,EAAAA,EAAAA,IAAI,IACtBkE,GAAe3C,UACjBtB,EAAgBQ,OAAO,EACvB,IACI,MAAMiB,QAAiBF,EAAAA,EAAAA,IAAW,GAAEtB,iBAAwB2C,GAAapC,SACzE4F,GAAgB5F,MAAOiB,EAASG,KAC5BF,MAAMC,QAAQF,EAASG,MAC3BuE,GAAQ3F,MAAQiC,GAAYjC,MACtBiB,EAASG,KAAKyE,QAAO3F,GAAUA,EAAO+B,cAAgBA,GAAYjC,QAClEiB,EAASG,KAEfuE,GAAQ3F,MAAQ,GAEhBR,EAAgBQ,OAAM,EACxB,MAAO0B,OACLlC,EAAgBQ,OAAM,EACtB4B,QAAQF,MAAM,0BAA2BA,SAG/CoE,GAAY,KACoB,IAA9B9C,GAAiBhD,MAAMuB,GAC3BoE,GAAQ3F,MAAQ4F,GAAgB5F,OAEhC2F,GAAQ3F,MAAO4F,GAAgB5F,MAC/B2F,GAAQ3F,MAAQ2F,GAAQ3F,MAAM6F,QAAO3F,GAAUA,EAAO6F,aAAe/C,GAAiBhD,MAAMuB,OAIlFyE,IAAezG,EAAAA,EAAAA,IAAI,IACnB0G,GAAmBnF,UACzBtB,EAAgBQ,OAAO,EACvB,IACI,MAAMiB,QAAiBF,EAAAA,EAAAA,IAAW,GAAEtB,iBACpCuG,GAAahG,MAAQiB,EAASG,KAAKyE,QAAOK,GAAwB,aAAhBA,EAAKxC,SACvDlE,EAAgBQ,OAAM,EACxB,MAAO0B,OACLlC,EAAgBQ,OAAM,EACtB4B,QAAQF,MAAM,+BAAgCA,SAIhDsC,IAAUzE,EAAAA,EAAAA,IAAI,IACd4G,IAAc5G,EAAAA,EAAAA,KAAI,GAClBiE,GAAe1C,UACjBtB,EAAgBQ,OAAQ,EACxB,IACI,MAAMiB,QAAiBF,EAAAA,EAAAA,IAClB,GAAEtB,2BAAkCiD,GAAU1C,mBAAmByC,GAAYzC,SAElFgE,GAAQhE,MAAQiB,EAASG,KACzBe,GAAenC,MAAQgE,GAAQhE,MAAMqD,SAAW,EAChD8C,GAAYnG,OAASiB,EAASG,MAA8C,IAAtCgF,OAAOC,KAAKpF,EAASG,MAAMkF,OACjE9G,EAAgBQ,OAAQ,EAC1B,MAAO0B,OACLE,QAAQF,MAAM,2BAA4BA,OAC1ClC,EAAgBQ,OAAQ,IAKzBuG,IAAWhH,EAAAA,EAAAA,IAAI,IACfiH,GAAgB1F,UACnBtB,EAAgBQ,OAAQ,EACxB,IACI,MAAMiB,QAAiBF,EAAAA,EAAAA,IAClB,uDAELwF,GAASvG,MAAQiB,EAASG,KAC1B5B,EAAgBQ,OAAQ,EAC1B,MAAO0B,OACLE,QAAQF,MAAM,2BAA4BA,OAC1ClC,EAAgBQ,OAAQ,IAI9ByG,GAAmB,KAErB,MAAMC,EAASlC,SAASmC,cAAc,UACtCD,EAAOE,MAAMC,QAAU,OACvBrC,SAASsC,KAAKC,YAAYL,GAE1B,MAAMrB,EAAYN,KAEZiC,EAAmBC,IACrB,MAAM9D,EAAI,IAAId,KAAK4E,GACb3G,EAAM4G,OAAO/D,EAAEiC,WAAW+B,SAAS,EAAG,KACtCC,EAAQF,OAAO/D,EAAEkE,WAAa,GAAGF,SAAS,EAAG,KAC7CG,EAAOJ,OAAO/D,EAAEoE,eAAeC,OAAO,GAC5C,MAAQ,GAAElH,KAAO8G,KAASE,KAGxBG,EAAkB9B,GAAQ3F,MAAM6F,QAAO3F,GACxCD,GAAoBC,GAAUwH,OAAOxH,EAAOmE,MAASnE,EAAOyH,cAAgB,IAG3EC,EAAgB,uiCAqBGZ,EAAgB3B,EAAU,UAAU2B,EAAgB,IAAI3E,KAAK,IAAIA,KAAKgD,EAAU,IAAIwC,UAAY,+CAC7F7E,GAAiBhD,MAAMyF,YAAc,2QAQ3C,CAAC,MAAO,MAAO,OAAQ,SAAU,MAAO,MAAO,OAAOpE,KAAIf,GAAQ,OAAMA,WAAYwH,KAAK,0QAQ7FL,EAAgBpG,KAAI,CAACnB,EAAQoF,IAAO,sFAELA,EAAI,8DACJpF,EAAOsB,iEACPtB,EAAO+D,iDAC9B,CAAC,UAAW,YAAa,WAAY,SAAU,WAAY,SAAU,UAAU5C,KAAIf,GAAQ,mGAEnFJ,EAAOC,cAAcG,IAAME,QAAU,6EAE5CsH,KAAK,4DACkB7H,GAAoBC,6DACvBwH,OAAOxH,EAAOyH,eAAeI,6EAC7BL,OAAOxH,EAAOmE,MAAM0D,gHAElC9H,GAAoBC,GAAUwH,OAAOxH,EAAOmE,MAASnE,EAAOyH,eAAgBI,+GAG1FD,KAAK,qTAQIL,EAAgBO,QAAO,CAACC,EAAK/H,IAClB+H,GAAQhI,GAAoBC,GAAUwH,OAAOxH,EAAOmE,MAASnE,EAAOyH,gBAC5E,GAAGI,saAiB5BG,EAAYxB,EAAOyB,cAAc3D,SACvC0D,EAAUE,OACVF,EAAUG,MAAMT,GAChBM,EAAUI,QAGV5B,EAAO6B,OAAS,KACZ7B,EAAOyB,cAAcK,QACrB9B,EAAOyB,cAAcM,QAGrBnE,YAAW,KACPE,SAASsC,KAAK4B,YAAYhC,KAC3B,OAKLiC,IAAOpJ,EAAAA,EAAAA,IAAI,MACXqJ,IAAmBrJ,EAAAA,EAAAA,IAAI,KAE5BsJ,EAAAA,EAAAA,KAAU,KACH,MAAMC,EAAaC,aAAaC,QAAQ,QACxCL,GAAK3I,MAAQiJ,KAAKC,MAAMJ,GACxBF,GAAiB5I,MAAQ2I,GAAK3I,MAAMmJ,YACpC3C,KACA/C,KACA5C,KACAoF,KACAmD,QAIR,MAAMC,IAAkB9J,EAAAA,EAAAA,KAAI,GACtB+J,IAAU/J,EAAAA,EAAAA,IAAI,IACdwE,IAAYxE,EAAAA,EAAAA,IAAI,IAChBgK,IAAYhK,EAAAA,EAAAA,KAAI,GAChBiK,IAAajK,EAAAA,EAAAA,KAAI,GACjBkK,GAAgBR,KAAKC,MAAMH,aAAaC,QAAQ,SAASzH,GACzDmI,GAAe,oDAGfC,GAAkB,KACpBN,GAAgBrJ,OAAQ,EACxB4J,KAEApF,SAASsC,KAAKF,MAAMiD,SAAW,UAI7BC,GAAmB,KACrBT,GAAgBrJ,OAAQ,EACxB+D,GAAU/D,MAAQ,GAElBwE,SAASsC,KAAKF,MAAMiD,SAAW,IAI7BD,GAAe9I,UACjB0I,GAAWxJ,OAAQ,EACnB,IAEI,MAAMiB,QAAiBF,EAAAA,EAAAA,IAAW,GAAE2I,sCAAgDtH,GAAapC,SAE7FiB,EAASG,MAAQF,MAAMC,QAAQF,EAASG,KAAKA,MAC7CkI,GAAQtJ,MAAQiB,EAASG,KAAKA,KACvBH,EAASG,MAAQF,MAAMC,QAAQF,EAASG,MAC/CkI,GAAQtJ,MAAQiB,EAASG,KAEzBkI,GAAQtJ,MAAQ,GAIpBsE,YAAW,KACP,MAAMyF,EAAYvF,SAASwF,cAAc,sBACrCD,IAAWA,EAAUE,UAAYF,EAAUG,gBAChD,KACL,MAAOxI,OACLE,QAAQF,MAAM,0BAA2BA,OACzC9B,EAAU,0BAnBd,QAqBI4J,GAAWxJ,OAAQ,IAIjBmK,GAAarJ,MAAAA,IACd,MAAMsJ,EAAc,CACrB,OAAS,cAAgBnB,KAAKC,MAAMH,aAAaC,QAAQ,SAASxH,MAEtE,UAC2B6I,GAAcC,IAAK,WAAU/I,IAAK6I,GACzD1K,EAAY,WACZ0J,KACF,MAAO1H,OACLE,QAAQF,MAAM,SAAUA,SAK1B2I,GAAgBtJ,EAAAA,EAAAA,OAAa,CAC3BwJ,QAASC,gCAEXC,IAAyBlL,EAAAA,EAAAA,IAAI,GAC7BmL,IAAkBnL,EAAAA,EAAAA,IAAI,CAAC,KACvB6J,GAAwBtI,UAC1B,IACI,MAAMG,QAAiBoJ,GAAcM,IAAK,gCAC1CD,GAAiB1K,MAAQiB,EAASG,KAAKA,KAAKyE,QAAOK,GAAwB,cAAhBA,EAAKxC,SAChE+G,GAAuBzK,MAAQiB,EAASG,KAAKwJ,gBAC/C,MAAOlJ,OACLE,QAAQF,MAAM,oCAAqCA,OACnD9B,EAAU,oCAAsC8B,MAAMT,UAAUG,MAAMO,SAAWD,MAAMC,UAN3F,QAQI6H,GAAWxJ,OAAQ,IAKrBmE,GAAarD,UACf,GAAKiD,GAAU/D,MAAM6K,OAArB,CAKAtB,GAAUvJ,OAAQ,EAClB,IAEI,MAAM8K,EAAa,CACfC,YAAatB,GACbuB,YAAajH,GAAU/D,MACvBiL,YAAa,YACbC,QAAS,EACTC,UAAW/I,GAAapC,MACxBoL,SAAUnC,KAAKC,MAAMH,aAAaC,QAAQ,SAASxH,KACnD6J,YAAY,IAAIhJ,MAAOC,eAGrBrB,QAAiBF,EAAAA,EAAAA,KAAW2I,GAAcoB,GAExB,MAApB7J,EAASyC,QAAsC,MAApBzC,EAASyC,SAChCzC,EAASG,MACTgI,KACAE,GAAQtJ,MAAMuF,KAAKtE,EAASG,OAE5BkI,GAAQtJ,MAAMuF,KAAKuF,GAEvB/G,GAAU/D,MAAQ,GAClBsE,YAAW,KACP,MAAMyF,EAAYvF,SAASwF,cAAc,sBACrCD,IAAWA,EAAUE,UAAYF,EAAUG,gBAChD,MAET,MAAOxI,OACLE,QAAQF,MAAM,uBAAwBA,OACtC9B,EAAU,yBA7Bd,QA+BI2J,GAAUvJ,OAAQ,QApClBJ,EAAU,2B,OAyClB0L,EAAAA,EAAAA,IAAMlJ,IAAc,KACZiH,GAAgBrJ,OAChB4J,Q,01TCrkCR,MAAM2B,IAA2B,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://cork-vue3/./src/views/report/allowance.vue","webpack://cork-vue3/./src/views/report/allowance.vue?eac1"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing horizontal-scroll-container\">\r\n        <div class=\"d-flex justify-content-between align-items-center horizontal-scroll-content\">\r\n            <div class=\"flex-grow-1 text-center\">\r\n\r\n\r\n<div class=\"container mt-5\">\r\n     <!--notification starts  -->\r\n    <div class=\"mb-5 d-flex\" v-if=\"allowance_remark_count!= 0\">\r\n        <div class=\"ms-auto\" >\r\n      <div class=\"dropdown nav-item notification-dropdown btn-group\" >\r\n <a href=\"javascript:;\" id=\"ddlnotify\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\r\n   class=\"btn dropdown-toggle nav-link position-relative p-0 shadow\" >\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"\r\n       viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n       stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n       class=\"feather feather-bell text-danger\"\r\n       style=\"transform:scale(2)\"\r\n       >\r\n    <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path>\r\n    <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path>\r\n  </svg>\r\n  <span class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\r\n    {{ allowance_remark_count}}\r\n  </span>\r\n</a>\r\n\r\n\r\n  <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"ddlnotify\">\r\n    <li v-for=\"allowance in allowanceRemarks \"  class=\"dropdown-item\">\r\n      <div class=\"media\">\r\n        <div class=\"media-aside align-self-start\" >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"\r\n               fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n               stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n               class=\"feather feather-server\">\r\n            <rect x=\"2\" y=\"2\" width=\"20\" height=\"8\" rx=\"2\" ry=\"2\"></rect>\r\n            <rect x=\"2\" y=\"14\" width=\"20\" height=\"8\" rx=\"2\" ry=\"2\"></rect>\r\n            <line x1=\"6\" y1=\"6\" x2=\"6\" y2=\"6\"></line>\r\n            <line x1=\"6\" y1=\"18\" x2=\"6\" y2=\"18\"></line>\r\n          </svg>\r\n        </div>\r\n        <div class=\"media-body\" >\r\n          <div class=\"data-info\" >\r\n            <h6 class=\"mb-0\">From : {{ allowance.sender_name }}</h6>\r\n            <p class=\"mb-0 \"> {{allowance.description}}    <button class=\"btn btn-success p-1 btn-sm me-1\" style=\"cursor:pointer\" @click=\"readRemark(allowance.id)\">✔</button></p>\r\n         \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  </ul>\r\n</div>\r\n        </div>\r\n    </div>        \r\n<!-- notification ends -->\r\n</div>\r\n\r\n\r\n<div class=\"mt-5\">\r\n   <div class=\"text-center\"> <h4 class=\"budgets-title\" @click=\"sylvesterIncrement()\">WEEKLY ALLOWANCE</h4>  </div>\r\n    <div class=\"d-flex align-items-center\">\r\n       \r\n        <div class=\"mx-auto\">\r\n           Search Date \r\n           <input type=\"date\" class=\"text-center form-control form-control-sm w-auto\" v-model=\"changed_date\" @change=\"fetchLabours\">\r\n        </div>\r\n          <div class=\"mx-auto\">\r\n           Labour type \r\n          <select v-model=\"labour_type\" class=\"form-control\" @change=\"fetchLabours\">\r\n            <option value=\"\">All Labours</option>\r\n            <option v-for=\"labour in labour_types\" :value=\"labour.name\">{{ labour.name }}</option>\r\n          </select>\r\n        </div>\r\n          <div class=\"mx-auto\">\r\n          Project \r\n          <select v-model=\"selected_project\" class=\"form-control\" @change=\"useFilter()\">\r\n            <option value=0>All Projects</option>\r\n            <option v-for=\"project in projects\" :value=\"project\">{{ project.short_name }}</option>\r\n          </select>\r\n        </div>\r\n        <div class=\"ms-auto\">\r\n            <button class=\"btn btn-success me-2\" @click=\"printWeeklyWages\">\r\n                         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\" me-2 bi bi-printer\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n            <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n            </svg>\r\n                Print\r\n            </button>\r\n            <button class=\"btn btn-info me-2\" @click=\"openRemarkModal\" title=\"Add Remark\" >\r\n                <svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"16\" \r\n                    height=\"16\" \r\n                    fill=\"currentColor\" \r\n                    viewBox=\"0 0 24 24\"\r\n                    style=\"cursor: pointer;\"\r\n                >\r\n                    <path d=\"M4 4h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-4 4v-16a2 2 0 0 1 2-2z\" \r\n                        stroke=\"currentColor\" \r\n                        stroke-width=\"2\" \r\n                        fill=\"none\" \r\n                        stroke-linejoin=\"round\"/>\r\n                </svg>\r\n                Add Remark\r\n            </button>\r\n            <button @click=\"add_labour_form =! add_labour_form\" class=\"btn btn-primary\">Add Labour</button>\r\n    \r\n        </div>\r\n    </div>\r\n\r\n\r\n                       <!--labour  form starts  -->\r\n                       <div v-if=\"add_labour_form\"  class=\"mt-3 p-3 border rounded bg-light mb-2\">\r\n    <h5 class=\"mb-3\">Add Labour</h5>\r\n    <div class=\"form-group mb-3 d-flex align-items-center col-12\">\r\n        <form @submit.prevent=\"addLabour\"  class=\"row d-flex align-items-center col-12\">\r\n            <div class=\"col-md-3 col-10\">\r\n                <input type=\"text\" class=\"form-control\"  v-model=\"labour_name\" placeholder=\"Enter Labour name\" required>\r\n            </div>\r\n            <div class=\"col-md-3 col-10\">\r\n                <input type=\"text\" class=\"form-control\"  v-model=\"labour_designation\" placeholder=\"Enter Designation\" required>\r\n            </div>\r\n\r\n            <div class=\"col-md-3 col-10\">\r\n               <multiselect \r\n                v-model=\"labour_type\"\r\n                :searchable=\"true\"\r\n                :options=\"labour_types\"\r\n                :multiple=\"false\"\r\n                required\r\n                track-by=\"id\"\r\n                label=\"name\"\r\n                ></multiselect>\r\n            </div>\r\n\r\n        <div class=\"col-md-3 col-10\">\r\n               <select v-model=\"selected_project\" class=\"form-control\"  required >\r\n            <option value=0>Select Project</option>\r\n            <option v-for=\"project in projects\" :value=\"project\">{{ project.short_name }}</option>\r\n          </select>\r\n            </div>\r\n\r\n            <div class=\"d-flex mt-2\">\r\n                <div class=\"ms-auto\">\r\n <button type=\"submit\" class=\" btn btn-primary w-100\">Submit</button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n<!-- labour form ends -->\r\n <!-- loading spinner starts -->\r\n<div v-if=\"loading_spinner\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n</div>\r\n <!-- loading spinner ends -->  \r\n   \r\n<!-- boq tabale starts -->\r\n<div class=\"allowance-table-container\">\r\n<table class=\"table table-bordered mt-4\">\r\n    <thead class=\"thead-light\">\r\n        <tr>\r\n            <th rowspan=\"2\" class=\"align-middle text-dark\">SN</th>\r\n            <th rowspan=\"2\" class=\"align-middle text-dark\">Name</th>\r\n            <th rowspan=\"2\" class=\"align-middle text-dark\">Designation</th>\r\n            <th colspan=\"7\" class=\"text-center text-dark\">Days (Tuesday - Monday)</th>\r\n            <th rowspan=\"2\" class=\"align-middle text-dark\">Days</th>\r\n            <th rowspan=\"2\" class=\"align-middle text-dark\">Advance</th>\r\n            <th rowspan=\"2\" class=\"align-middle text-dark\">Rate</th>\r\n            <th rowspan=\"2\" class=\"align-middle text-dark\">Total</th>\r\n        </tr>\r\n        <tr>\r\n            <th class=\"text-dark text-center\">Tuesday</th>\r\n            <th class=\"text-dark text-center\">Wednesday</th>\r\n            <th class=\"text-dark text-center\">Thursday</th>\r\n            <th class=\"text-dark text-center\">Friday</th>\r\n            <th class=\"text-dark text-center\">Saturday</th>\r\n            <th class=\"text-dark text-center\">Sunday</th>\r\n            <th class=\"text-dark text-center\">Monday</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n         <td\r\n  v-for=\"(date, idx) in getWeekDates()\" \r\n  :key=\"'date-' + idx\"\r\n  class=\"text-center text-muted small\"\r\n>\r\n  {{ date }}\r\n</td>\r\n\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n        </tr>\r\n        <tr v-for=\"(labour, i) in labours\" :key=\"labour.id\">\r\n            <td class=\"text-start\">{{ i + 1 }}</td>\r\n            <td class=\"text-start\">{{ labour.name }}</td>\r\n            <td class=\"text-start\">{{ labour.designation }}</td>\r\n            <td\r\n                v-for=\"(day, idx) in ['Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday','Monday']\"\r\n                :key=\"day\"\r\n                class=\"text-center\"\r\n                  @click=\"getModal(labour, labour.id, getWeekDates()[idx])\"\r\n            >\r\n                <span\r\n                    style=\"cursor:pointer\"\r\n                >\r\n                    <span v-if=\"labour.weekly_work && labour.weekly_work[day] && labour.weekly_work[day].hours !== '---'\">\r\n                        <span\r\n                            class=\"badge px-2\"\r\n                            :class=\"labour.weekly_work[day].target === 'Achieved' ? 'bg-success' : 'bg-danger'\"\r\n                        >\r\n                            {{ labour.weekly_work[day].target }}\r\n                        </span>\r\n                    </span>\r\n                    <span v-else>\r\n                        <!-- <span class=\"badge bg-info px-2\">\r\n                            not filled\r\n                        </span> -->\r\n \r\n                    </span>\r\n                </span>\r\n            </td>\r\n            <td class=\"text-center\">\r\n                {{ calculateDaysWorked(labour) }}\r\n            </td>\r\n             <td class=\"text-end\">{{ Number(labour.total_advance).toLocaleString() }}/=</td>\r\n            <td class=\"text-end\">{{ Number(labour.rate ).toLocaleString() }}/=</td>\r\n            <td class=\"text-end\">\r\n                {{ ((Number(labour.rate) * calculateDaysWorked(labour)) - labour.total_advance ).toLocaleString() }}/=\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n</div>\r\n <!-- boq table ends -->\r\n \r\n</div>\r\n\r\n\r\n\r\n            </div>    \r\n        </div>\r\n        <div>\r\n      <!--Item form starts  -->\r\n\r\n\r\n\r\n                              <!-- modal starts  -->\r\n<div class=\"modal fade custom-backdrop mymodal\" data-bs-backdrop=\"false\" :id=\"'modal-' + form_modal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-xl \">\r\n     <div class=\"modal-content \" >\r\n        <div class=\"modal-header\">\r\n          <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">Daily Work Allowance</h1>\r\n     \r\n          <button type=\"button\"  class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" ></button>\r\n        </div>\r\n     <div class=\"modal-body\">\r\n          <!-- Preview Section -->\r\n           <!-- loading spinner starts -->\r\n<div v-if=\"loading_spinner\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n</div>\r\n<div v-else>\r\n          <div class=\"mb-4\">\r\n                <div class=\"row g-2 align-items-center\">\r\n                     <div class=\"col-md-3 col-6 \">\r\n                          <div class=\"fw-bold text-secondary small\">Date</div>\r\n                          <div class=\"fs-6 \">{{ labour_date }}</div>\r\n                     </div>\r\n                     <div class=\"col-md-3 col-6\">\r\n                          <div class=\"fw-bold text-secondary small\">Labourer Name</div>\r\n                          <div class=\"fs-6 text-start\">{{ labour_name }} </div>\r\n                     </div>\r\n                     <div class=\"col-md-3 col-6\">\r\n                          <div class=\"fw-bold text-secondary small\">Designation</div>\r\n                          <div class=\"fs-6\">{{ labour_designation }}</div>\r\n                     </div>\r\n                     <div class=\"col-md-3 col-6\">\r\n                          <div class=\"fw-bold text-secondary small\">Daily Wages</div>\r\n                          <div class=\"fs-6\">{{ (labour_rate).toLocaleString() }}/=</div>\r\n                     </div>\r\n                     \r\n                </div>\r\n                <hr>\r\n          </div>\r\n\r\n          <form v-if=\"workLogForm\" @submit.prevent=\"addWorkLog()\">\r\n                <div class=\"row g-3\">\r\n                     <div class=\"col-md-2\">\r\n                          <label class=\"form-label\">Start Hour </label>\r\n                          <input type=\"time\" class=\"form-control\" v-model=\"start_hour\" required>\r\n                     </div>\r\n                     <div class=\"col-md-2\">\r\n                          <label class=\"form-label\">End Hour</label>\r\n                          <input type=\"time\" class=\"form-control\" v-model=\"end_hour\" required>\r\n                     </div>\r\n                      <div class=\"col-md-2\">\r\n                          <label class=\"form-label\">Advance</label>\r\n                          <input type=\"number\" class=\"form-control\" v-model=\"advance\" placeholder=\"Advance\">\r\n                     </div>\r\n                    <div class=\"col-md-6\">\r\n                          <label class=\"form-label\">Activity</label>\r\n                          <input type=\"text\" class=\"form-control\"  v-model=\"activity\" required placeholder=\"Enter activity\">\r\n                     </div>\r\n                   \r\n                       <div v-if=\"labour_type == 'driver'\" class=\"col-md-6\">\r\n                          <label class=\"form-label\">Select Machine</label>\r\n                          <multiselect \r\n                v-model=\"selected_machine\"\r\n                :searchable=\"true\"\r\n                :options=\"machines\"\r\n                :multiple=\"false\"\r\n                required\r\n                track-by=\"id\"\r\n                label=\"name\"\r\n                ></multiselect>\r\n                     </div>\r\n                     <div v-if=\"labour_type == 'driver'\" class=\"col-md-6\" >\r\n                          <label class=\"form-label\">Fuel Used </label>\r\n                          <input type=\"number\" class=\"form-control\" placeholder=\"enter fuel used\" v-model=\"fuel_used\" required step=\"any\">\r\n                     </div>\r\n                     <div class=\"col-md-10\">\r\n                          <label class=\"form-label\">Target</label>\r\n                          <input type=\"text\" class=\"form-control\" v-model=\"target_description\" required placeholder=\"Enter Target\">\r\n                     </div>\r\n                       <div class=\"col-md-2\">\r\n                    <label class=\"form-label\">Status</label>\r\n                          <select v-model=\"target\" class=\"form-control\" required>\r\n                                <option value=\"Achieved\">Achieved</option>\r\n                                <option value=\"Not achieved\">Not achieved</option>\r\n                          </select>\r\n                     </div>\r\n                     <div class=\"col-md-12\">\r\n                          <label class=\"form-label\">Remark</label>\r\n                          <textarea placeholder=\"Enter Remark\" class=\"form-control\" v-model=\"remark\" required></textarea>\r\n                     </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                     <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" >Close</button>\r\n                     <button type=\"submit\" class=\"btn btn-secondary\" >Save changes</button>\r\n                </div>\r\n          </form>\r\n          <div v-else>\r\n            <div class=\"d-flex\">\r\n                <div class=\"ms-auto\">\r\n                   <button class=\"btn btn-danger\" @click=\"deleteWorkLog(workLog.id)\">Clear Record</button>\r\n                </div>\r\n            </div>\r\n                <h5 class=\"mb-3\">Work Log Details</h5>\r\n                <div class=\"row g-3\">\r\n                     <div class=\"col-md-6\">\r\n                          <div class=\"card p-3 h-100 text-start\">\r\n                                <div class=\"mb-2\"><strong>Date:</strong> {{ workLog.work_date }}</div>\r\n                                <div class=\"mb-2\"><strong>Labourer Name:</strong> {{ labour_name }}</div>\r\n                                <div class=\"mb-2\"><strong>Designation:</strong> {{ labour_designation }}</div>\r\n                                <div class=\"mb-2\"><strong>Daily Wages:</strong> {{ (labour_rate).toLocaleString() }}/=</div>\r\n                                   <div class=\"mb-2\"><strong>Advance:</strong> {{ (labour_advance).toLocaleString() }}/=</div>\r\n                          </div>\r\n                     </div>\r\n                     <div class=\"col-md-6\">\r\n                          <div class=\"card p-3 h-100 text-start\">\r\n                                <div class=\"mb-2\"><strong>Start Hour:</strong> {{ workLog.start_hour }}</div>\r\n                                <div  class=\"mb-2\"><strong>End Hour:</strong> {{ workLog.end_hour }}</div>\r\n                                <div v-if=\"workLog.machine !== null \" class=\"mb-2\"><strong>Machine:</strong> {{ workLog.machine }}</div>\r\n                                <div v-if=\"workLog.fuel_used != 0.00 \"  class=\"mb-2\"><strong>Fuel Used :</strong> {{ workLog.fuel_used }} Litres</div>\r\n                                <div class=\"mb-2\"><strong>Target:</strong> {{ workLog.target_description }}</div>\r\n                                <div class=\"mb-2\"><strong>Status:</strong> {{ workLog.target }}</div>\r\n                          </div>\r\n                     </div>\r\n                     <div class=\"col-12\">\r\n                          <div class=\"card p-3 text-start\">\r\n                                <div class=\"mb-2 text-start\"><strong>Activity:</strong> <span class=\"text-muted\">{{ workLog.activity }}</span></div>\r\n                                <div class=\"mb-2 text-start\"><strong>Remark:</strong> <span class=\"text-muted\">{{ workLog.remark }}</span></div>\r\n                                  <div v-if=\"workLog.md_remark !== null \" class=\"mb-2 text-start\"><strong>MD's Remark:</strong> <span class=\"text-muted\">{{ workLog.md_remark }}</span></div>\r\n                          </div>\r\n                     </div>\r\n                </div>\r\n                <div class=\"row mt-2\" v-if=\"workLog.md_remark === null && user_permissions.includes('is_md') \">\r\n                    <div class=\"col-md-0\">\r\n                        <form @submit.prevent=\"addMdRemark(workLog)\">\r\n                        <label class=\"form-label me-2\">MD's Remark</label>\r\n                          <textarea placeholder=\"Enter Remark\" class=\"form-control\" v-model=\"remark\" required></textarea>\r\n                          <div class=\"text-center\">\r\n                             <button type=\"submit\" class=\" mt-2 text-center btn btn-primary\">Send</button>\r\n                          </div>\r\n                        </form>\r\n                         \r\n                        </div>\r\n                </div>\r\n                <div class=\"modal-footer mt-3\">\r\n                     <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" >Close</button>\r\n                </div>\r\n          </div>\r\n</div>\r\n <!-- loading spinner ends -->  \r\n\r\n     </div>\r\n     </div>\r\n</div>\r\n\r\n</div>\r\n\r\n\r\n\r\n                               <!-- modal ends -->\r\n<!-- marequee starts -->\r\n <div v-if=\"sylvester\" style=\"background-color:yellow;padding-top:1px\">\r\n    <h4 class=\"mt-4 mb-1\">  <marquee>MD ANATAKA WATU WAKUTANE CONFERENCE ROOM KWA AJILI YA MKUTANO .ASANTENI</marquee></h4>\r\n </div>\r\n\r\n <!-- marquee ends -->\r\n        </div>\r\n       \r\n    </div>\r\n\r\n    <!-- Remark Modal -->\r\n    <div v-if=\"showRemarkModal\" class=\"remark-modal-overlay\">\r\n        <div class=\"remark-modal-container\">\r\n            <!-- Modal Header -->\r\n            <div class=\"remark-modal-header\">\r\n                <h5 class=\"remark-modal-title\">Remark(s) On Weekly Allowance</h5>\r\n                <button type=\"button\" class=\"remark-modal-close\" @click=\"closeRemarkModal\">×</button>\r\n            </div>\r\n            \r\n            <!-- Modal Body - Chat messages -->\r\n            <div class=\"remark-modal-body\">\r\n                <div v-for=\"(remark, index) in remarks\" :key=\"index\" class=\"remark-message-container\">\r\n                    <div :class=\"[\r\n                        'remark-message', \r\n                        remark.remarker_id == currentUserId ? 'remark-message-own' : 'remark-message-other'\r\n                    ]\">\r\n                        <div class=\"remark-sender\">\r\n                            {{ remark.remarker_id == currentUserId ? 'You' : (remark.remarker || remark.sender_name) }}\r\n                        </div>\r\n                        <div class=\"remark-text\">{{ remark.description }}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <!-- Modal Footer - Input field -->\r\n            <div class=\"remark-modal-footer\">\r\n                <input \r\n                    type=\"text\" \r\n                    v-model=\"newremark\" \r\n                    class=\"remark-input\" \r\n                    placeholder=\"Enter your remark\"\r\n                />\r\n                <div class=\"remark-modal-buttons\">\r\n                    <button class=\"remark-btn remark-btn-close\" @click=\"closeRemarkModal\">Close</button>\r\n                    <button \r\n                        class=\"remark-btn remark-btn-save\" \r\n                        @click=\"saveRemark\" \r\n                        :disabled=\"isSending || !newremark.trim()\"\r\n                    >\r\n                        Save\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Modal backdrop -->\r\n    <div v-if=\"showRemarkModal\" class=\"modal-backdrop fade show\"></div>\r\n\r\n</template>\r\n\r\n\r\n\r\n<script setup>\r\n    import axios from 'axios';    \r\n    import { onMounted, ref, inject, watch } from 'vue';\r\n     import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css'\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n     import Multiselect from '@suadelabs/vue3-multiselect';\r\n    useMeta({ title: 'Weekly Allowance' });\r\n    const add_labour_form = ref(false);\r\n    const loading_spinner = ref(false);\r\n    const base_url = \"https://construction.trustdigital.space/api/v1/\";\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n\r\n    const sylvester= ref(false);\r\n    const sylvester_increment = ref(0);\r\n    const sylvesterIncrement =  () => {\r\n        sylvester_increment.value += 1;\r\n\r\n        if(sylvester_increment.value>=3){\r\n            sylvester.value= true;\r\n            sylvester_increment.value=1;\r\n        }else if(sylvester_increment.value<3){\r\n            sylvester.value=false;\r\n        }\r\n    }\r\n\r\nconst calculateDaysWorked = (labour) => {\r\n    if (!labour?.weekly_work) return 0;\r\n\r\n    let totalDays = 0;\r\n\r\n    ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].forEach(day => {\r\n        const entry = labour.weekly_work[day];\r\n\r\n        if (!entry || entry === '---') return;\r\n\r\n        if (entry.target === 'Achieved') {\r\n            totalDays += 1;\r\n        } else if (entry.target === 'Not achieved') {\r\n            totalDays += 0.5;\r\n        }\r\n    });\r\n\r\n    return parseFloat(totalDays.toFixed(1));\r\n};\r\n\r\n\r\n\r\nconst machines = ref([]);\r\nconst selected_machine = ref('');\r\n   const  fetchMachines= async () => {\r\n   // loading_spinner = true;\r\n    axios\r\n      .get(`https://bcftrack.trustdigital.space/api/v1/machines`)\r\n      .then((response) => {\r\n        if (Array.isArray(response.data)) {\r\n          machines.value = response.data.map(machine => ({\r\n            id: machine.id,\r\n            name: machine.name,        \r\n          }));\r\n        } else {\r\n        error_message.value = \"Error fetching machine data: \" + error.message;\r\n        console.error(error_message.value);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching machine data:\", error.message);\r\n        \r\n      }\r\n      \r\n    )\r\n     \r\n      .finally(() => {\r\n      //  loading_spinner = false;\r\n      });\r\n}\r\n\r\n\r\nconst labour_name = ref('');\r\nconst labour_designation = ref('');\r\nconst labour_type = ref('');\r\nconst labour_rate= ref('');\r\nconst labour_advance=ref(0);\r\nconst changed_date = ref(new Date().toISOString().split('T')[0]);\r\nconst form_modal = ref(0);\r\nconst labour_date = ref('');\r\nconst labour_id = ref('');\r\nconst target = ref('Not achieved');\r\nconst activity = ref('');\r\nconst remark = ref('');\r\nconst start_hour = ref('');\r\nconst end_hour = ref('');\r\nconst fuel_used = ref();\r\nconst selected_project = ref(0)\r\nconst formatDate = (date) => {\r\n  const d = new Date(date);\r\n  return d.toISOString().split('T')[0]; // gives YYYY-MM-DD\r\n};\r\nconst target_description = ref('');\r\nconst advance = ref(null);\r\n\r\nconst deleteWorkLog = async (id) => {\r\n  if (confirm(\"Are you sure you want to delete this record ?\")) {\r\n        loading_spinner.value = true;\r\n            axios\r\n            .delete(`${base_url}daily-work-logs/${id}`)\r\n            .then((response) => {\r\n                fetchWorkLog();\r\n                labour_type.value='';\r\n                fetchLabours();\r\n                loading_spinner.value = false;\r\n                if (response.status === 200) {\r\n                   showMessage('Record Deleted Successfully');\r\n                } else {\r\n                    showError('Fail to Delete Record');\r\n                    console.error(\"Error delete record:\", response.data.message);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                console.error(\"Error deletion Record:\", error);\r\n            });  \r\n    \r\n   }\r\n   else{\r\n    return;\r\n   }\r\n} \r\n\r\nconst addWorkLog = async () => { \r\nloading_spinner.value=true;\r\n  add_labour_form.value = false;\r\n  const worklogdata = {\r\n    'labour_id': labour_id.value,\r\n    'work_date': formatDate(labour_date.value),\r\n    'start_hour': start_hour.value,\r\n    'end_hour': end_hour.value,\r\n    'machine' : selected_machine.value.name ,\r\n    'fuel_used' : fuel_used.value,\r\n    'activity': activity.value,\r\n    'target': target.value,\r\n    'remark': remark.value,\r\n    'target_description':target_description.value,\r\n    'advance':advance.value || 0,\r\n  };\r\n\r\n  try {\r\n    const response = await axios.post(`${base_url}daily-work-logs`, worklogdata);\r\n    if (response.status == 201) {\r\n        fetchWorkLog();\r\n        fetchLabours();\r\n        remark.value='';\r\n      showMessage(\"Work log added Successfully\");\r\n          selected_machine.value = '',\r\n          fuel_used.value = 0.00,\r\n          loading_spinner.value=false;\r\n\r\n    } else {\r\n      showError(\"Failed to Add Work Log\");\r\n          loading_spinner.value=false;\r\n\r\n      console.error(response);\r\n    }\r\n  } catch (error) {\r\n        loading_spinner.value=false;\r\n\r\n    console.error('Error fetching work Log:', error);\r\n    showError(error.message);\r\n  }\r\n};\r\n\r\n\r\nconst addMdRemark = async (workLog) => {\r\n      const itemdata={\r\n            'md_remark':remark.value,             \r\n              }\r\n        newremark.value  = \"For \"+ workLog.labour.designation +\" \"+ workLog.labour.name + \" on \"+ workLog.work_date +\" , \"+ remark.value \r\n        try {\r\n            const response = await axios.patch(`${base_url}daily-work-logs/${workLog.id}`,itemdata);\r\n             \r\n             if (response.status == 200) {\r\n                remark.value = \"\";\r\n                saveRemark(); \r\n                showMessage(\"Remark added Succesfully\");\r\n                fetchWorkLog();\r\n             }\r\n             else{\r\n                remark.value='';\r\n                showError(\"Failed to add Remark\");\r\n                console.error(error);       \r\n             }\r\n        } catch (error) {\r\n            remark.value ='';\r\n            console.error('Error Adding Remark:', error);\r\n            showError(error.message);\r\n        }\r\n    };  \r\n\r\nconst getModal = (labour,id,date) => {\r\n    form_modal.value = id;\r\n    labour_id.value = labour.id;\r\n    labour_name.value = labour.name;\r\n    labour_designation.value = labour.designation;\r\n    labour_rate.value = labour.rate;\r\n    labour_type.value = labour.labour_type;\r\n    labour_date.value = date;\r\n    fetchWorkLog();\r\n    setTimeout(() => {\r\n        const modalEl = document.getElementById('modal-' + id);\r\n        if (modalEl) {\r\n            // Bootstrap 5 modal\r\n            const modal = window.bootstrap ? new window.bootstrap.Modal(modalEl) : null;\r\n            if (modal) {\r\n                modal.show();\r\n            }\r\n        }\r\n    }, 100);\r\n}\r\nconst getWeekDates = () => {\r\n    const selected = changed_date.value ? new Date(changed_date.value) : new Date();\r\n    const day = selected.getDay(); // 0=Sunday, 1=Monday, 2=Tuesday, ..., 6=Saturday\r\n    \r\n    // Find Tuesday of the current week\r\n    const tuesday = new Date(selected);\r\n    const diffToTuesday = day <= 2 ? 2 - day : 9 - day; // Tuesday is day 2\r\n    tuesday.setDate(selected.getDate() - (day - 2 + 7) % 7);\r\n    \r\n    const weekDates = [];\r\n    // Add 7 days (Tuesday to next Monday)\r\n    for (let i = 0; i < 7; i++) {\r\n        const d = new Date(tuesday);\r\n        d.setDate(tuesday.getDate() + i);\r\n        weekDates.push(d.toISOString().split('T')[0]);\r\n    }\r\n    \r\n    return weekDates; // Now contains Tuesday to next Monday\r\n};\r\nconst addLabour = async () => {\r\n      add_labour_form.value= false;\r\n      const itemdata={\r\n            'name': labour_name.value, \r\n            'labour_type': labour_type.value.name ,\r\n            'type_id' :labour_type.value.id,\r\n            'designation':labour_designation.value,\r\n            'rate': 0,\r\n            'project_id': selected_project.value.id,\r\n            'project_name':selected_project.value.short_name\r\n              }\r\n\r\n              console.log(itemdata);\r\n        try {\r\n            const response = await axios.post(`${base_url}labours`,itemdata);\r\n            labour_type.value='';\r\n              fetchLabours();\r\n             if (response.status == 201) {\r\n                showMessage(\"Labour added Succesfully\");\r\n             }\r\n             else{\r\n                showError(\"Failed to Add Labour\");\r\n                console.error(error);\r\n                \r\n             }\r\n        } catch (error) {\r\n            console.error('Error fetching labours:', error);\r\n            showError(error.message);\r\n        }\r\n    };      \r\n\r\n\r\n    const labours = ref([]);\r\n    const originalLabours = ref([]);\r\n    const fetchLabours = async () => {\r\n        loading_spinner.value= true;\r\n        try {\r\n            const response = await axios.get(`${base_url}labours?date=${changed_date.value}`);\r\n            originalLabours.value= response.data;\r\n            if (Array.isArray(response.data)) {\r\n            labours.value = labour_type.value\r\n                ? response.data.filter(labour => labour.labour_type === labour_type.value)\r\n                : response.data;\r\n            } else {\r\n            labours.value = [];\r\n            }\r\n            loading_spinner.value=false;\r\n        } catch (error) {\r\n            loading_spinner.value=false;\r\n            console.error('Error fetching labours:', error);\r\n        }\r\n    };\r\nconst useFilter = () => {\r\n    if (selected_project.value.id === 0) {\r\n    labours.value = originalLabours.value;\r\n    }else{\r\n    labours.value= originalLabours.value;    \r\n    labours.value = labours.value.filter(labour => labour.project_id === selected_project.value.id);\r\n    }\r\n};\r\n    \r\n        const labour_types = ref([]);\r\n        const fetchLabourTypes = async () => {\r\n        loading_spinner.value= true;\r\n        try {\r\n            const response = await axios.get(`${base_url}labour-types`);\r\n            labour_types.value = response.data.filter(item => item.status === \"approved\");\r\n            loading_spinner.value=false;\r\n        } catch (error) {\r\n            loading_spinner.value=false;\r\n            console.error('Error fetching labour types:', error);\r\n        }\r\n    };\r\n\r\n    const workLog = ref('');\r\n    const workLogForm = ref(false);\r\n    const fetchWorkLog = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await axios.get(\r\n                `${base_url}day-work-log?labour_id=${labour_id.value}&work_date=${labour_date.value}`\r\n            );\r\n            workLog.value = response.data;\r\n            labour_advance.value = workLog.value.advance ?? 0;\r\n            workLogForm.value = !response.data || Object.keys(response.data).length === 0;\r\n            loading_spinner.value = false;\r\n        } catch (error) {\r\n            console.error('Error fetching work log:', error);\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n\r\n     const projects = ref([])\r\n     const fetchProjects = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await axios.get(\r\n                `https://bcftrack.trustdigital.space/api/v1/projects`\r\n            );\r\n            projects.value = response.data\r\n            loading_spinner.value = false;\r\n        } catch (error) {\r\n            console.error('Error fetching projects:', error);\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\nconst printWeeklyWages = () => {\r\n    // Create a hidden iframe for printing\r\n    const iframe = document.createElement('iframe');\r\n    iframe.style.display = 'none';\r\n    document.body.appendChild(iframe);\r\n\r\n    const weekDates = getWeekDates();\r\n\r\n    const formatPrintDate = (dateStr) => {\r\n        const d = new Date(dateStr);\r\n        const day = String(d.getDate()).padStart(2, '0');\r\n        const month = String(d.getMonth() + 1).padStart(2, '0');\r\n        const year = String(d.getFullYear()).slice(-2);\r\n        return `${day}.${month}.${year}`;\r\n    };\r\n\r\n    const filteredLabours = labours.value.filter(labour => \r\n        (calculateDaysWorked(labour) * Number(labour.rate)) - labour.total_advance > 0\r\n    );\r\n\r\n    const printContent = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>Weekly Wages Report</title>\r\n            <style>\r\n                body { font-family: Arial, sans-serif; margin: 20px; }\r\n                table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\r\n                th, td { border: 1px solid #000; padding: 8px; text-align: center; }\r\n                th { background-color: ; font-weight: bold; }\r\n                .text-start { text-align: left; }\r\n                .text-end { text-align: right; }\r\n                .text-center { text-align: center; }\r\n                .total-row { font-weight: bold; background-color: #e9ecef; }\r\n                .signature-section { margin-top: 50px; display: flex; justify-content: space-between; }\r\n                .signature-line { border-top: 1px solid #000; width: 200px; margin-top: 60px; text-align: center; padding-top: 5px; }\r\n            </style>\r\n        </head>\r\n        <body>\r\n            <center>\r\n                <h1>Weekly Wages Report</h1>\r\n                <h2>Week : ${formatPrintDate(weekDates[0])} to ${formatPrintDate(new Date(new Date(weekDates[5]).getTime() + 86400000))}</h2>\r\n                <h3>Project : ${selected_project.value.short_name ?? \"All Projects \"}</h3>\r\n            </center>\r\n            <table>\r\n                <thead>\r\n                    <tr >\r\n                        <th>SN</th>\r\n                        <th>Name</th>\r\n                        <th>Designation</th>\r\n                        ${['Tue', 'Wed', 'Thur', 'Friday', 'Sat', 'Sun', 'Mon'].map(day => `<th>${day}</th>`).join('')}\r\n                        <th>Days</th>\r\n                        <th>Advance</th>\r\n                        <th>Rate</th>\r\n                        <th>Total</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${filteredLabours.map((labour, i) => `\r\n                        <tr>\r\n                            <td class=\"text-start\">${i + 1}</td>\r\n                            <td class=\"text-start\">${labour.name}</td>\r\n                            <td class=\"text-start\">${labour.designation}</td>\r\n                            ${['Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday', 'Monday'].map(day => `\r\n                                <td class=\"text-center\">\r\n                                    ${labour.weekly_work?.[day]?.target || '-'}\r\n                                </td>\r\n                            `).join('')}\r\n                            <td class=\"text-center\">${calculateDaysWorked(labour)}</td>\r\n                            <td class=\"text-end\">${Number(labour.total_advance).toLocaleString()}/=</td>\r\n                            <td class=\"text-end\">${Number(labour.rate).toLocaleString()}/=</td>\r\n                            <td class=\"text-end\">\r\n                                ${(((calculateDaysWorked(labour) * Number(labour.rate)) - labour.total_advance ).toLocaleString())}/=\r\n                            </td>\r\n                        </tr>\r\n                    `).join('')}\r\n                    <tr class=\"total-row\">\r\n                        <td></td>\r\n                        <td></td>\r\n                        <td></td>\r\n                        <td colspan=\"10\" class=\"text-end\">Grand Total:</td>\r\n                        <td class=\"text-end\">\r\n                            ${\r\n                                filteredLabours.reduce((sum, labour) => {\r\n                                    return sum + ((calculateDaysWorked(labour) * Number(labour.rate)) - labour.total_advance);\r\n                                }, 0).toLocaleString()\r\n                            }/=\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <div class=\"signature-section\">\r\n                <div class=\"signature-line\">Prepared by</div>\r\n                <div class=\"signature-line\">Checked by</div>\r\n                <div class=\"signature-line\">Approved by</div>\r\n            </div>\r\n        </body>\r\n        </html>\r\n    `;\r\n\r\n    // Write to the iframe and print\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    // Wait for content to load before printing\r\n    iframe.onload = () => {\r\n        iframe.contentWindow.focus();\r\n        iframe.contentWindow.print();\r\n\r\n        // Remove the iframe after printing\r\n        setTimeout(() => {\r\n            document.body.removeChild(iframe);\r\n        }, 1000);\r\n    };\r\n};\r\n\r\n\r\nconst user = ref(null);\r\nconst user_permissions = ref([]);\r\n\r\n onMounted(() => {\r\n        const storedUser = localStorage.getItem(\"user\");\r\n        user.value = JSON.parse(storedUser);\r\n        user_permissions.value = user.value.permissions;\r\n        fetchProjects();\r\n        fetchLabours();\r\n        fetchMachines();\r\n        fetchLabourTypes()\r\n        fetchAllowanceRemarks();\r\n    });\r\n\r\n// Add these variables for the remark functionality\r\nconst showRemarkModal = ref(false);\r\nconst remarks = ref([]);\r\nconst newremark = ref('');\r\nconst isSending = ref(false);\r\nconst isfetching = ref(false);\r\nconst currentUserId = JSON.parse(localStorage.getItem(\"user\")).id;\r\nconst remarkApiUrl = \"https://bcftrack.trustdigital.space/api/v1/remark\";\r\n\r\n// Function to open the remark modal\r\nconst openRemarkModal = () => {\r\n    showRemarkModal.value = true;\r\n    fetchRemarks();\r\n    // Prevent body scrolling when modal is open\r\n    document.body.style.overflow = 'hidden';\r\n};\r\n\r\n// Function to close the remark modal\r\nconst closeRemarkModal = () => {\r\n    showRemarkModal.value = false;\r\n    newremark.value = '';\r\n    // Restore body scrolling\r\n    document.body.style.overflow = '';\r\n};\r\n\r\n// Function to fetch remarks\r\nconst fetchRemarks = async () => {\r\n    isfetching.value = true;\r\n    try {\r\n        // Use the current week date to fetch relevant remarks\r\n        const response = await axios.get(`${remarkApiUrl}?remark_type=allowance&week_date=${changed_date.value}`);\r\n        \r\n        if (response.data && Array.isArray(response.data.data)) {\r\n            remarks.value = response.data.data;\r\n        } else if (response.data && Array.isArray(response.data)) {\r\n            remarks.value = response.data;\r\n        } else {\r\n            remarks.value = [];\r\n        }\r\n        \r\n        // Scroll to the bottom of remarks after they load\r\n        setTimeout(() => {\r\n            const modalBody = document.querySelector('.remark-modal-body');\r\n            if (modalBody) modalBody.scrollTop = modalBody.scrollHeight;\r\n        }, 100);\r\n    } catch (error) {\r\n        console.error('Error fetching remarks:', error);\r\n        showError(\"Failed to load remarks\");\r\n    } finally {\r\n        isfetching.value = false;\r\n    }\r\n};\r\n\r\n    const readRemark = async (id) => {\r\n         const remarkStatus ={\r\n        'status':'checked by ' + JSON.parse(localStorage.getItem(\"user\")).name ,\r\n              }\r\n    try {\r\n        const response = await axiosInstance.put(`/remark/${id}`,remarkStatus);\r\n        showMessage('checked');\r\n        fetchAllowanceRemarks(); \r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n    }\r\n};\r\n\r\n\r\nconst axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\nconst allowance_remark_count = ref(0);\r\nconst allowanceRemarks= ref(['']);\r\nconst fetchAllowanceRemarks = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`remark?remark_type=allowance`);\r\n        allowanceRemarks.value = response.data.data.filter(item => item.status === \"unchecked\");\r\n        allowance_remark_count.value = response.data.unchecked_count;\r\n    } catch (error) {\r\n        console.error('Error fetching allowance remark :', error);\r\n        showError(\"Failed to load allowance remark \" + (error.response?.data?.message || error.message));\r\n    } finally {\r\n        isfetching.value = false;\r\n    }\r\n}  \r\n\r\n// Function to save a new remark\r\nconst saveRemark = async () => {\r\n    if (!newremark.value.trim()) {\r\n        showError(\"Remark cannot be empty\");\r\n        return;\r\n    }\r\n    \r\n    isSending.value = true;\r\n    try {\r\n        // Create the payload with the correct field names and type\r\n        const remarkData = {\r\n            remarker_id: currentUserId,\r\n            description: newremark.value,\r\n            remark_type: \"allowance\",\r\n            type_id: 0,\r\n            week_date: changed_date.value,\r\n            remarker: JSON.parse(localStorage.getItem(\"user\")).name,\r\n            created_at: new Date().toISOString()\r\n        };\r\n        \r\n        const response = await axios.post(remarkApiUrl, remarkData);\r\n        \r\n        if (response.status === 201 || response.status === 200) {\r\n            if (response.data) {\r\n                fetchAllowanceRemarks();\r\n                remarks.value.push(response.data);\r\n            } else {\r\n                remarks.value.push(remarkData);\r\n            }\r\n            newremark.value = '';\r\n            setTimeout(() => {\r\n                const modalBody = document.querySelector('.remark-modal-body');\r\n                if (modalBody) modalBody.scrollTop = modalBody.scrollHeight;\r\n            }, 100);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error saving remark:', error);\r\n        showError(\"Failed to save remark\");\r\n    } finally {\r\n        isSending.value = false;\r\n    }\r\n};\r\n\r\n// Add a watcher to reload remarks when the week date changes\r\nwatch(changed_date, () => {\r\n    if (showRemarkModal.value) {\r\n        fetchRemarks();\r\n    }\r\n});         \r\n\r\n\r\n</script>\r\n<style scoped>\r\n/* Enable horizontal scrolling for the entire page */\r\n.horizontal-scroll-container {\r\n  width: 100%;\r\n  overflow-x: auto;\r\n  -webkit-overflow-scrolling: touch; /* For smooth scrolling on iOS */\r\n  padding-bottom: 20px; /* Add some padding at the bottom */\r\n}\r\n\r\n.horizontal-scroll-content {\r\n  min-width: 768px; /* Minimum width to ensure content doesn't get too compressed */\r\n  width: max-content; /* Allow content to determine width */\r\n  padding: 0 15px; /* Add some padding on the sides */\r\n}\r\n\r\n/* Make sure tables maintain their structure */\r\ntable {\r\n  width: 100%;\r\n  min-width: 768px; /* Ensure table doesn't get too narrow */\r\n}\r\n\r\n/* Ensure the modal appears above the scrollable content */\r\n.modal.show {\r\n  z-index: 1050;\r\n}\r\n\r\n/* Add a visual indicator for horizontal scrolling on mobile */\r\n@media (max-width: 767px) {\r\n  .horizontal-scroll-container::after {\r\n    content: \"\";\r\n    position: fixed;\r\n    top: 50%;\r\n    right: 0;\r\n    width: 20px;\r\n    height: 40px;\r\n    background: rgba(0, 0, 0, 0.1);\r\n    border-radius: 20px 0 0 20px;\r\n    transform: translateY(-50%);\r\n    pointer-events: none;\r\n    z-index: 10;\r\n    animation: pulse 2s infinite;\r\n  }\r\n  \r\n  @keyframes pulse {\r\n    0% { opacity: 0.2; }\r\n    50% { opacity: 0.8; }\r\n    100% { opacity: 0.2; }\r\n  }\r\n}\r\n\r\n/* Mobile Modal Styles */\r\n.mobile-modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 9999;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.mobile-modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: #fff;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 10000;\r\n}\r\n\r\n.mobile-modal-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 15px;\r\n  border-bottom: 1px solid #dee2e6;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.mobile-modal-title {\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.mobile-modal-close {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  padding: 0;\r\n  cursor: pointer;\r\n  color: #6c757d;\r\n}\r\n\r\n.mobile-modal-body {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.mobile-modal-footer {\r\n  border-top: 1px solid #dee2e6;\r\n  padding: 10px;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.mobile-loading {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n}\r\n\r\n.remarks-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.no-remarks {\r\n  text-align: center;\r\n  color: #6c757d;\r\n  padding: 30px 0;\r\n}\r\n\r\n.remark-item {\r\n  background-color: #f1f3f5;\r\n  border-radius: 10px;\r\n  padding: 12px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n}\r\n\r\n.remark-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 5px;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.remark-content {\r\n  white-space: pre-wrap;\r\n  word-break: break-word;\r\n}\r\n\r\n.remark-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.remark-input {\r\n  width: 100%;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  padding: 10px;\r\n  font-size: 1rem;\r\n  resize: none;\r\n}\r\n\r\n.remark-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\r\n}\r\n\r\n.remark-submit-btn {\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.remark-submit-btn:disabled {\r\n  background-color: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* Floating Action Button */\r\n.floating-action-button {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 56px;\r\n  height: 56px;\r\n  border-radius: 50%;\r\n  background-color: #007bff;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.3);\r\n  z-index: 1000;\r\n  cursor: pointer;\r\n  font-size: 24px;\r\n}\r\n\r\n/* Add a pulse animation to make the button more noticeable */\r\n@keyframes pulse {\r\n  0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.7); }\r\n  70% { box-shadow: 0 0 0 10px rgba(0, 123, 255, 0); }\r\n  100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }\r\n}\r\n\r\n.floating-action-button {\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n.floating-action-button:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n/* Remark Modal Styles (Matching the image exactly) */\r\n.remark-modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 9999;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.remark-modal-container {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 90%;\r\n  max-width: 400px;\r\n  height: 80%;\r\n  max-height: 600px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.remark-modal-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 15px 20px;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  background-color: white;\r\n}\r\n\r\n.remark-modal-title {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.remark-modal-close {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  line-height: 1;\r\n  padding: 0;\r\n  cursor: pointer;\r\n  color: #666;\r\n}\r\n\r\n.remark-modal-body {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n  background-color: #f5f5f5;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.remark-message-container {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n}\r\n\r\n.remark-message {\r\n  max-width: 80%;\r\n  padding: 10px 15px;\r\n  border-radius: 8px;\r\n  background-color: #e0e0e0;\r\n  position: relative;\r\n}\r\n\r\n.remark-message-own {\r\n  align-self: flex-end;\r\n  margin-left: auto;\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.remark-message-other {\r\n  align-self: flex-start;\r\n  background-color: #e0e0e0;\r\n}\r\n\r\n.remark-sender {\r\n  font-weight: 500;\r\n  margin-bottom: 5px;\r\n  color: #333;\r\n}\r\n\r\n.remark-text {\r\n  word-break: break-word;\r\n  color: #333;\r\n}\r\n\r\n.remark-modal-footer {\r\n  padding: 15px;\r\n  border-top: 1px solid #e0e0e0;\r\n  background-color: white;\r\n}\r\n\r\n.remark-input {\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  margin-bottom: 10px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.remark-modal-buttons {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.remark-btn {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n}\r\n\r\n.remark-btn-close {\r\n  background-color: #9c27b0;\r\n  color: white;\r\n}\r\n\r\n.remark-btn-save {\r\n  background-color: #4361ee;\r\n  color: white;\r\n}\r\n\r\n.remark-btn:disabled {\r\n  opacity: 0.7;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* Floating Action Button for Mobile */\r\n.remark-fab {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 56px;\r\n  height: 56px;\r\n  border-radius: 50%;\r\n  background-color: #4361ee;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.3);\r\n  z-index: 1000;\r\n  cursor: pointer;\r\n  font-size: 24px;\r\n}\r\n\r\n.remark-fab:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n/* Full-width container styles */\r\n.allowance-table-container {\r\n  width: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n}\r\n\r\n/* Remove any default padding from parent containers */\r\n.layout-px-spacing {\r\n  padding: 0 !important;\r\n}\r\n\r\n.horizontal-scroll-container {\r\n  width: 100%;\r\n  max-width: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.horizontal-scroll-content {\r\n  width: 100%;\r\n  max-width: 100%;\r\n  margin: 0;\r\n  padding: 0 15px;\r\n}\r\n\r\n/* Centered Remark Modal Styles */\r\n.remark-modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    z-index: 9999;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.remark-modal-container {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 80%;\r\n    max-width: 800px;\r\n    background-color: white;\r\n    border-radius: 8px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n    max-height: 80vh;\r\n}\r\n\r\n.remark-modal-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 20px 30px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    background-color: #f8f9fa;\r\n}\r\n\r\n.remark-modal-title {\r\n    margin: 0;\r\n    font-size: 1.5rem;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.remark-modal-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 2rem;\r\n    line-height: 1;\r\n    padding: 0;\r\n    cursor: pointer;\r\n    color: #666;\r\n    transition: color 0.2s;\r\n    width: 40px;\r\n    height: 40px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 50%;\r\n}\r\n\r\n.remark-modal-close:hover {\r\n    color: #333;\r\n    background-color: rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.remark-modal-body {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 30px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    max-height: calc(85vh - 140px);\r\n}\r\n\r\n.remarks-list {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    margin-bottom: 30px;\r\n}\r\n\r\n.no-remarks {\r\n    text-align: center;\r\n    color: #6c757d;\r\n    padding: 60px 0;\r\n    font-style: italic;\r\n    font-size: 1.1rem;\r\n}\r\n\r\n.remarks-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 20px;\r\n}\r\n\r\n.remark-item {\r\n    background-color: #f8f9fa;\r\n    border-radius: 10px;\r\n    padding: 20px;\r\n    box-shadow: 0 2px 5px rgba(0,0,0,0.08);\r\n    border-left: 5px solid #4361ee;\r\n}\r\n\r\n.remark-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: 12px;\r\n    font-size: 1rem;\r\n}\r\n\r\n.remark-author {\r\n    font-weight: 600;\r\n    color: #495057;\r\n}\r\n\r\n.remark-date {\r\n    color: #6c757d;\r\n}\r\n\r\n.remark-content {\r\n    white-space: pre-wrap;\r\n    word-break: break-word;\r\n    color: #212529;\r\n    line-height: 1.6;\r\n    font-size: 1.05rem;\r\n}\r\n\r\n.new-remark-form {\r\n    margin-top: auto;\r\n    border-top: 1px solid #e9ecef;\r\n    padding-top: 25px;\r\n}\r\n\r\n.new-remark-form textarea {\r\n    resize: none;\r\n    border: 1px solid #ced4da;\r\n    border-radius: 8px;\r\n    padding: 15px;\r\n    font-size: 1.05rem;\r\n    transition: border-color 0.2s;\r\n    height: 120px;\r\n}\r\n\r\n.new-remark-form textarea:focus {\r\n    border-color: #4361ee;\r\n    box-shadow: 0 0 0 0.25rem rgba(67, 97, 238, 0.25);\r\n}\r\n\r\n.new-remark-form .btn {\r\n    padding: 10px 20px;\r\n    font-size: 1rem;\r\n    border-radius: 6px;\r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 1900px) {\r\n    .remark-modal-container {\r\n        width: 75%;\r\n        max-width: 2000px;\r\n    }\r\n}\r\n\r\n@media (max-width: 992px) {\r\n    .remark-modal-container {\r\n        width: 80%;\r\n        min-width: 500px;\r\n    }\r\n    \r\n    .remark-modal-header {\r\n        padding: 15px 25px;\r\n    }\r\n    \r\n    .remark-modal-body {\r\n        padding: 25px;\r\n    }\r\n    \r\n    .remark-modal-title {\r\n        font-size: 1.3rem;\r\n    }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .remark-modal-container {\r\n        width: 90%;\r\n        min-width: 400px;\r\n        max-height: 90vh;\r\n    }\r\n    \r\n    .remark-modal-header {\r\n        padding: 15px 20px;\r\n    }\r\n    \r\n    .remark-modal-body {\r\n        padding: 20px;\r\n    }\r\n    \r\n    .new-remark-form textarea {\r\n        height: 100px;\r\n    }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n    .remark-modal-container {\r\n        width: 95%;\r\n        min-width: auto;\r\n        height: 85vh;\r\n    }\r\n    \r\n    .remark-modal-header {\r\n        padding: 12px 15px;\r\n    }\r\n    \r\n    .remark-modal-body {\r\n        padding: 15px;\r\n    }\r\n    \r\n    .remark-modal-title {\r\n        font-size: 1.2rem;\r\n    }\r\n    \r\n    .remark-item {\r\n        padding: 15px;\r\n    }\r\n}\r\n\r\n .mymodal{\r\n  background-color: rgba(122, 122, 122, 0.653);\r\n }\r\n\r\n</style>\r\n","import script from \"./allowance.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./allowance.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./allowance.vue?vue&type=style&index=0&id=167b195c&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-167b195c\"]])\n\nexport default __exports__"],"names":["useMeta","title","add_labour_form","ref","loading_spinner","base_url","showMessage","inject","showError","sylvester","sylvester_increment","sylvesterIncrement","value","calculateDaysWorked","labour","weekly_work","totalDays","forEach","day","entry","target","parseFloat","toFixed","machines","selected_machine","fetchMachines","async","axios","then","response","Array","isArray","data","map","machine","id","name","error_message","error","message","console","catch","finally","labour_name","labour_designation","labour_type","labour_rate","labour_advance","changed_date","Date","toISOString","split","form_modal","labour_date","labour_id","activity","remark","start_hour","end_hour","fuel_used","selected_project","formatDate","date","d","target_description","advance","deleteWorkLog","confirm","fetchWorkLog","fetchLabours","status","addWorkLog","worklogdata","addMdRemark","itemdata","newremark","workLog","designation","work_date","saveRemark","getModal","rate","setTimeout","modalEl","document","getElementById","modal","window","bootstrap","Modal","show","getWeekDates","selected","getDay","tuesday","setDate","getDate","weekDates","i","push","addLabour","short_name","log","labours","originalLabours","filter","useFilter","project_id","labour_types","fetchLabourTypes","item","workLogForm","Object","keys","length","projects","fetchProjects","printWeeklyWages","iframe","createElement","style","display","body","appendChild","formatPrintDate","dateStr","String","padStart","month","getMonth","year","getFullYear","slice","filteredLabours","Number","total_advance","printContent","getTime","join","toLocaleString","reduce","sum","iframeDoc","contentWindow","open","write","close","onload","focus","print","removeChild","user","user_permissions","onMounted","storedUser","localStorage","getItem","JSON","parse","permissions","fetchAllowanceRemarks","showRemarkModal","remarks","isSending","isfetching","currentUserId","remarkApiUrl","openRemarkModal","fetchRemarks","overflow","closeRemarkModal","modalBody","querySelector","scrollTop","scrollHeight","readRemark","remarkStatus","axiosInstance","put","baseURL","process","allowance_remark_count","allowanceRemarks","get","unchecked_count","trim","remarkData","remarker_id","description","remark_type","type_id","week_date","remarker","created_at","watch","__exports__"],"sourceRoot":""}