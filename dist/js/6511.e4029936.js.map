{"version":3,"file":"js/6511.e4029936.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/machines.vue","webpack://cork-vue3/./src/views/masters/machines.vue?9ee1"],"sourcesContent":["<template>\r\n  <div class=\"layout-px-spacing\">\r\n   \r\n          <ul class=\"navbar-nav flex-row\">\r\n              <li>\r\n                  <div class=\"page-header\">\r\n                      <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                          <ol class=\"breadcrumb\">\r\n                              <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                              <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Assets</span></li>\r\n                          </ol>\r\n                      </nav>\r\n                  </div>\r\n              </li>\r\n          </ul>\r\n\r\n      \r\n                <!-- loading spinner starts -->\r\n                 <div class=\"mt-5\" v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n        \r\n      \r\n  <div v-if=\"!loading_spinner\" class=\"seperator-header layout-top-spacing\">\r\n    <!-- Centered Widget Container -->\r\n    <div class=\"d-flex \">\r\n          <div class=\"d-flex justify-content-between align-items-center mb-4 mt-3\">\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n            <button v-if=\"user_permissions.includes('can_register_asset')\" class=\"btn btn-primary px-4 py-2\" @click=\"register_machine=!register_machine\">\r\n                <i class=\"bi bi-plus me-2\"></i>Add New\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    \r\n        <div  class=\"ms-auto col-xl-5 col-lg-6 col-md-8 col-sm-10\">\r\n            <div class=\"widget widget-statistics h-100 shadow card\" @click=\"navigateToMachines\" style=\"cursor: pointer;\">\r\n                <div class=\"widget-content p-4\">\r\n                    <div class=\"row \">\r\n                        <div class=\"col-md-3 col-sm-6 col-6\">           \r\n                            <div class=\"widget  widget-statistics h-100 shadow card\">\r\n                                <div \r\n                                    class=\"w-detail\" \r\n                                    @click=\"showAllCategories\"\r\n                                    :class=\"{ 'active-filter': activeFilter === null }\"\r\n                                >\r\n                                    <p class=\"w-title mb-2 text-muted\">All</p>\r\n                                    <p class=\"w-stats text-info fs-3 fw-bold\">{{ totalcount }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                          <div class=\"col-md-3 col-sm-6 col-6\">           \r\n                            <div class=\"widget  widget-statistics h-100 shadow card\">\r\n                                <div \r\n                                    class=\"w-detail\" \r\n                                    @click=\"filterByCategory(1, 'machine')\"\r\n                                    :class=\"{ 'active-filter': activeFilter === 1 }\"\r\n                                >\r\n                                    <p class=\"w-title mb-2 text-muted\">Total Machines</p>\r\n                                    <p class=\"w-stats text-primary fs-3 fw-bold\">{{ totalmachine }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-3 col-sm-6 col-6\">\r\n                            <div class=\"widget widget-statistics h-100 shadow card\" >\r\n                                <div \r\n                                    class=\"w-detail\" \r\n                                    @click=\"filterByCategory(2, 'vehicle')\"\r\n                                    :class=\"{ 'active-filter': activeFilter === 2 }\"\r\n                                >\r\n                                    <p class=\"w-title mb-2 text-muted\">Total Vehicles</p>\r\n                                    <p class=\"w-stats text-success fs-3 fw-bold\">{{ totalVehicles }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-3 col-sm-6 col-6\">             \r\n                            <div class=\"widget widget-statistics h-100 shadow card\">\r\n                                <div \r\n                                    class=\"w-detail\" \r\n                                    @click=\"filterByCategory(3, 'supervision')\"\r\n                                    :class=\"{ 'active-filter': activeFilter === 3 }\"\r\n                                >\r\n                                    <p class=\"w-title mb-2 text-muted\">Total Supervision</p>\r\n                                    <p class=\"w-stats text-dark fs-3 fw-bold\">{{ totalsupervision }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n       \r\n \r\n      <div  class=\"mt-3 mx-2\">\r\n        <!-- add consumer starts -->\r\n        <form class=\"p-3 border rounded bg-white shadow\" v-if=\"register_machine\" id=\"consumer\" @submit.prevent=\"registerMachine\">\r\n    <h3 class=\"text-center\">MACHINE REGISTRATION </h3>\r\n    <div class=\"row mb-2\">\r\n        <div class=\"col-md-4\">\r\n            <label class=\"form-label\">Registration  No</label>\r\n            <input type=\"text\" class=\"form-control\" v-model=\"machine_name\" name=\"Machine_name\" required>\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n            <label class=\"form-label\">Category </label>\r\n            <Multiselect \r\n              v-model=\"category\"\r\n              :options=\"[\r\n                {id: '1', name: 'Machine'},\r\n                {id: '2', name: 'Vehicle'},\r\n                {id: '3', name: 'Supervision'}\r\n              ]\"\r\n              label=\"name\"\r\n              track-by=\"id\"\r\n              placeholder=\"Select Category\"\r\n              :searchable=\"true\"\r\n              :close-on-select=\"true\"\r\n              required\r\n            />\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n            <label class=\"form-label\">Select Type </label>\r\n            <Multiselect \r\n              v-model=\"selected_machine_type\"\r\n              :options=\"machines_type\" \r\n              label=\"name\"  \r\n              track-by=\"id\" \r\n              placeholder=\"Select Type\"\r\n              :searchable=\"true\"\r\n              :close-on-select=\"true\"\r\n              required\r\n            />\r\n            <!-- <Multiselect \r\n              v-model=\"selected_machine_type\"\r\n              :options=\"machines_type\" \r\n              label=\"name\"  \r\n              track-by=\"id\" \r\n              placeholder=\"Select a Machine\"\r\n              :searchable=\"true\"\r\n              :close-on-select=\"true\"\r\n              @select=\"onMachineSelected\"\r\n            /> -->\r\n        </div>\r\n    </div>\r\n    <div class=\"row mb-2\">\r\n        <div class=\"col-md-4\">\r\n            <label class=\"form-label\">Average Ratio</label>\r\n            <input type=\"number\" class=\"form-control\" v-model=\"machine_ratio\" name=\"ratio\" step=\"any\" >\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n            <label class=\"form-label\">Capacity</label>\r\n            <input type=\"number\" class=\"form-control\" v-model=\"machine_capacity\" name=\"capacity\" required step=\"any\" >\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n            <label class=\"form-label\">Reserve Litre</label>\r\n            <input type=\"number\" class=\"form-control\" v-model=\"machine_reserve_litre\" name=\"reserve_litre\" required step=\"any\" >\r\n        </div>\r\n    </div>\r\n    <div class=\"d-flex gap-2 justify-content-end\">\r\n        <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n        <button type=\"button\" class=\"btn btn-danger\" onclick=\"document.getElementById('consumer').style.display='none'\">Cancel</button>\r\n    </div>\r\n</form>\r\n         \r\n     </div>   \r\n    \r\n      <!-- table ends -->\r\n       <!-- notificatio starts -->\r\n    <div class=\"toast-container position-fixed top-0 end-0 p-3\" style=\"z-index: 11\">\r\n      <div\r\n        class=\"toast align-items-center text-dark border-0\"\r\n        role=\"alert\"\r\n        aria-live=\"assertive\"\r\n        aria-atomic=\"true\"\r\n        ref=\"toast\"\r\n        style=\"background-color: #afe8fa\"\r\n      >\r\n        <div class=\"d-flex\">\r\n          <div class=\"toast-body\">\r\n            Registration successful! Redirecting to user/home...\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close btn-close-dark me-2 m-auto\"\r\n            data-bs-dismiss=\"toast\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n      <div v-if=\"!loading_spinner\" class=\"row layout-top-spacing\">\r\n          <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n              <div class=\"panel br-6 p-0\">\r\n                  <div class=\"custom-table\">\r\n                      <v-client-table :data=\"filteredMachines\" :columns=\"columns\" :options=\"table_option\">\r\n                          <template #actions=\"props\">\r\n                              <div class=\"actions text-center\">\r\n                                  <div class=\"btn-group\" role=\"group\">\r\n                                    <button type=\"button\"\r\n                                    class=\"btn btn-sm btn-outline-success me-1\" @click=\"setEditFormValues(props.row)\" data-bs-toggle=\"modal\" data-bs-target=\"#asset-edit-modal\" v-if=\"user_permissions.includes('is_programmer')\" title=\"Edit\">\r\n                                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                      </svg>\r\n                                    </button>\r\n                                    <router-link :to=\"`/assets/fuel-statement/${props.row.id}`\" v-if=\"props.row.consumptions_count\" class=\"btn btn-sm btn-primary me-1 text-nowrap\">\r\n                                      FUEL ({{ props.row.consumptions_count }})\r\n                                    </router-link>\r\n                                    <router-link :to=\"`/asset/jobcards/${props.row.id}`\" v-if=\"props.row.job_cards_count\" class=\"btn btn-sm btn-secondary me-1 text-nowrap\">\r\n                                      JOBCARDS ({{ props.row.job_cards_count }})\r\n                                    </router-link>\r\n\r\n                                      <router-link :to=\"`/asset/bincards/${props.row.id}`\" class=\"btn btn-sm btn-dark text-nowrap\" v-if=\"props.row.bincards_count\">\r\n                                      Fuel Manager ({{ props.row.bincards_count }})\r\n                                    </router-link>\r\n                                  </div>\r\n                              </div>\r\n                          </template>\r\n\r\n                      </v-client-table>\r\n\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n\r\n              <!-- Edit asset modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"asset-edit-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editAssetModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editAssetModalLabel\">Edit Asset</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"clearForm()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateMachine()\">\r\n        <div class=\"modal-body\">\r\n\r\n            <div class=\"row mb-3\">\r\n    <div class=\"col-md-3\">\r\n      <label class=\"form-label\">Name</label>\r\n      <input type=\"text\" class=\"form-control\" v-model=\"machine_name\">\r\n    </div>\r\n    <div class=\"col-md-3\">\r\n      <label class=\"form-label\">Category</label>\r\n      <Multiselect \r\n        v-model=\"category\"\r\n        :options=\"[\r\n          {id: '1', name: 'Machine'},\r\n          {id: '2', name: 'Vehicle'},\r\n          {id: '3', name: 'Supervision'}\r\n        ]\"\r\n        label=\"name\"\r\n        track-by=\"id\"\r\n        placeholder=\"Select Category\"\r\n        :searchable=\"true\"\r\n        :close-on-select=\"true\"\r\n        required\r\n      />\r\n    </div>\r\n    <div class=\"col-md-3\">\r\n      <label class=\"form-label\">Type</label>\r\n      <Multiselect \r\n        v-model=\"selected_machine_type\"\r\n        :options=\"machines_type\" \r\n        label=\"name\"  \r\n        track-by=\"id\" \r\n        placeholder=\"Select Type\"\r\n        :searchable=\"true\"\r\n        :close-on-select=\"true\"\r\n        required\r\n      />\r\n    </div>\r\n    <div class=\"col-md-3\">\r\n      <label class=\"form-label\">Ratio</label>\r\n      <input type=\"number\" class=\"form-control bg-white\" step=\"any\" v-model=\"machine_ratio\">\r\n    </div>\r\n    <div class=\"col-md-4\">\r\n      <label class=\"form-label\">Capacity</label>\r\n      <input type=\"number\" class=\"form-control bg-white\" step=\"any\" v-model=\"machine_capacity\">\r\n    </div>\r\n    <div class=\"col-md-4\">\r\n      <label class=\"form-label\">Reserve Litre</label>\r\n      <input type=\"text\" class=\"form-control bg-white\" v-model=\"machine_reserve_litre\">\r\n    </div>\r\n      <div class=\"col-md-4\">\r\n      <label class=\"form-label\">Consuption Type</label>\r\n    <Multiselect \r\n      v-model=\"consuption_type\"\r\n      :options=\"[\r\n        {id: '1', name: 'Km/Litre'},\r\n        {id: '2', name: 'Litre/hr'}\r\n      ]\"\r\n      label=\"name\"\r\n      track-by=\"id\"\r\n      placeholder=\"Select Consumption Type\"\r\n      :searchable=\"true\"\r\n      :close-on-select=\"true\"\r\n      required\r\n    />\r\n    </div>\r\n  </div>\r\n\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"clearForm()\" id=\"close_editing\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading_spinner\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            <span v-else>Edit</span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Edit asset modal ends -->\r\n</div>\r\n</template>\r\n\r\n<script setup>\r\n  import { onMounted, ref,inject } from 'vue';\r\n  import Multiselect from '@suadelabs/vue3-multiselect';\r\n  import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n  import { useMeta } from '@/composables/use-meta';\r\n  useMeta({ title: 'Default Order Sorting Table' });\r\n  import axios from 'axios';\r\n// import { get } from 'core-js/core/dict'; // Removed incorrect import\r\n// Reactive properties\r\nconst searchQuery = ref('');\r\nconst activeFilter = ref(null);\r\nconst showSearch = ref(false);\r\nconst filteredMachines = ref([]);\r\nconst allMachines = ref([]);\r\n  const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n  const columns = ref(['SNo','id', 'name','type','consuption', 'capacity','ratio', 'reserve_litre', 'actions']);\r\n  const machines_type = ref([]);\r\n  const loading_spinner = ref(false);\r\n  const register_machine = ref(false);\r\n  const consuption_type=ref('');\r\n   const loadingIndicator = inject('loadingIndicator');\r\n  const showMessage = inject('showMessage');\r\n  const showError = inject('showError');  \r\n const table_option = ref({\r\n  perPage: 100,\r\n  perPageValues: [100 , 200 ,500],\r\n  skin: 'table table-hover',\r\n  columnsClasses: { actions: 'actions text-center' },\r\n  pagination: { nav: 'scroll', chunk: 5 },\r\n  texts: {\r\n    count: 'Showing {from} to {to} of {count}',\r\n    filter: '',\r\n    filterPlaceholder: 'Search...',\r\n    limit: 'Results:',\r\n  },\r\n  sortable: ['SNo', 'name', 'type', 'ratio', 'capacity', 'reserve_litre'],\r\n  sortIcon: {\r\n    base: 'sort-icon-none',\r\n    up: 'sort-icon-asc',\r\n    down: 'sort-icon-desc',\r\n  },\r\n  resizableColumns: false,\r\n});\r\n\r\n  const axiosInstance = axios.create({\r\n      baseURL: process.env.VUE_APP_API_BASE_URL\r\n  });\r\n  \r\n\r\nconst fetchMachines = async () => {\r\n  loading_spinner.value = true;\r\n  axiosInstance\r\n    .get(`/machines`)\r\n    .then((response) => {\r\n      totalmachine.value = response.data.filter(machine => machine.category_id === 1).length;\r\n      totalVehicles.value = response.data.filter(machine => machine.category_id === 2).length;\r\n      totalsupervision.value = response.data.filter(machine => machine.category_id === 3).length;\r\n      totalcount.value = response.data.length;\r\n      \r\n      if (Array.isArray(response.data)) {\r\n        allMachines.value = response.data.map((machine, index) => ({\r\n          ...machine,\r\n          SNo: index + 1,\r\n          id: machine.id,\r\n          name: machine.name,\r\n          type: machine.type_name,\r\n          make: machine.make,\r\n          fuel_type: machine.fuel_type,\r\n          model: machine.model,\r\n          type_id: machine.type_id,\r\n          ratio: machine.ratio,\r\n          category: machine.category_id === 1 ? 'machine' : \r\n                   machine.category_id === 2 ? 'vehicle' : \r\n                   machine.category_id === 3 ? 'supervision' : 'no category',\r\n          capacity: machine.capacity,\r\n          category_id: machine.category_id,\r\n          reserve_litre: machine.reserve_litre,\r\n          consuption: machine.consuption_type,\r\n        }));\r\n        \r\n        // Initially show all machines\r\n        filteredMachines.value = [...allMachines.value];\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error fetching machine data:\", error.message);\r\n    })\r\n    .finally(() => {\r\n      loading_spinner.value = false;\r\n    });\r\n}\r\n\r\n const showAllCategories = () => {\r\n  activeFilter.value = null;\r\n  filteredMachines.value = [...allMachines.value];\r\n  showSearch.value = false;\r\n};\r\n\r\n\r\n\r\nconst filterByCategory = (categoryId, categoryName) => {\r\n  if (activeFilter.value === categoryId) {\r\n    activeFilter.value = null;\r\n    filteredMachines.value = [...allMachines.value];\r\n    showSearch.value = false;\r\n  } else {\r\n    activeFilter.value = categoryId;\r\n    filteredMachines.value = allMachines.value.filter(\r\n      machine => machine.category_id === categoryId\r\n    );\r\n    showSearch.value = true;\r\n    searchQuery.value = categoryName; \r\n  }\r\n};\r\n\r\n\r\nconst fetchMachineTypes = () => {\r\n  loading_spinner.value = true;\r\n  axiosInstance\r\n    .get(`/machine-types`)\r\n    .then((response) => {\r\n      if (Array.isArray(response.data)) {\r\n        machines_type.value = response.data;\r\n      } else {\r\n        console.error(\"Invalid response format\");\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error fetching machine types:\", error.message);\r\n    })\r\n    .finally(() => {\r\n      loading_spinner.value = false;\r\n    });\r\n}\r\n\r\nconst machine_name = ref('');\r\nconst selected_machine_type= ref('');\r\nconst machine_ratio = ref('');\r\nconst machine_capacity =ref ('');\r\nconst machine_reserve_litre=ref('');\r\nconst category = ref('');\r\nconst totalVehicles = ref(0);\r\nconst totalmachine = ref(0);\r\nconst totalsupervision = ref(0);\r\nconst totalcount = ref(0);\r\n\r\nconst registerMachine = () => {\r\n      register_machine.value = false;\r\n      loading_spinner.value = true;\r\n      const machineData = {\r\n          name: machine_name.value,\r\n          type_name:selected_machine_type.value.name,\r\n          type_id:selected_machine_type.value.id,\r\n          category_id:category.value.id,\r\n          ratio:machine_ratio.value,\r\n          capacity:machine_capacity.value,\r\n          reserve_litre:machine_reserve_litre.value,\r\n      };\r\n\r\n      axiosInstance\r\n          .post('/machines', machineData)\r\n          .then((response) => {\r\n              clearForm();\r\n              fetchMachines();\r\n              loading_spinner.value = false;\r\n             console.log(\"type name\",selected_machine_type.value.name);\r\n          })\r\n          .catch((error) => {\r\n              console.error(\"Error registering machine\", error);\r\n          });\r\n  };\r\n\r\n\r\n  const updateMachine = async () => {\r\n    loading_spinner.value = true;\r\n    const updateMachineData = {\r\n      name: machine_name.value,\r\n      type_name: selected_machine_type.value.name,\r\n      type_id: selected_machine_type.value.id,\r\n      category_id: category.value,\r\n      ratio: machine_ratio.value,\r\n      capacity: machine_capacity.value,\r\n      reserve_litre: machine_reserve_litre.value,\r\n      consuption_type: consuption_type.value.name,\r\n    };\r\n      try {\r\n    const response = await axiosInstance.put(`/machines/${selectedId.value}`, updateMachineData);\r\n    clearForm();\r\n    fetchMachines();\r\n    document.getElementById('close_editing').click();\r\n    showMessage(\"Updated successfully\");\r\n  } catch (error) {\r\n    console.error(error);\r\n    showError(error.message);\r\n  } finally {\r\n    loading_spinner.value = false;\r\n  }\r\n};\r\n\r\n  const clearForm = () => {\r\n  machine_name.value = '';\r\n  category.value = '';\r\n  selected_machine_type.value = '';\r\n  machine_ratio.value = '';\r\n  machine_capacity.value = '';\r\n  machine_reserve_litre.value = '';\r\n};\r\n\r\nconst selectedId = ref(null);\r\nconst setEditFormValues = (machine) => {\r\n  selectedId.value = machine.id; // Set the selectedId to the machine's ID\r\n  machine_name.value = machine.name;\r\n  category.value = machine.category_id;\r\n  \r\n  // Find the corresponding machine type in machines_type array\r\n  const machineType = machines_type.value.find(type => type.id === machine.type_id);\r\n  selected_machine_type.value = machineType || '';\r\n  \r\n  machine_ratio.value = machine.ratio;\r\n  machine_capacity.value = machine.capacity;\r\n  machine_reserve_litre.value = machine.reserve_litre;\r\n};\r\n\r\n  onMounted(() => {\r\n       fetchMachines();\r\n       fetchMachineTypes();\r\n  });\r\n\r\n  const selectedMachine = ref(null);\r\n</script>\r\n\r\n<style scoped>\r\n .mymodal{\r\n  background-color: rgba(122, 122, 122, 0.653);\r\n }\r\n\r\n\r\n /* Add this to highlight the active filter */\r\n.active-filter {\r\n  background-color: rgba(0, 123, 255, 0.1);\r\n  border-radius: 4px;\r\n  padding: 5px;\r\n  position: relative;\r\n}\r\n</style> \r\n","import script from \"./machines.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./machines.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./machines.vue?vue&type=style&index=0&id=0ecddadf&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0ecddadf\"]])\n\nexport default __exports__"],"names":["useMeta","title","searchQuery","ref","activeFilter","showSearch","filteredMachines","allMachines","user_permissions","JSON","parse","localStorage","getItem","permissions","columns","machines_type","loading_spinner","register_machine","consuption_type","loadingIndicator","inject","showMessage","showError","table_option","perPage","perPageValues","skin","columnsClasses","actions","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","sortable","sortIcon","base","up","down","resizableColumns","axiosInstance","axios","baseURL","process","fetchMachines","async","value","get","then","response","totalmachine","data","machine","category_id","length","totalVehicles","totalsupervision","totalcount","Array","isArray","map","index","SNo","id","name","type","type_name","make","fuel_type","model","type_id","ratio","category","capacity","reserve_litre","consuption","catch","error","console","message","finally","showAllCategories","filterByCategory","categoryId","categoryName","fetchMachineTypes","machine_name","selected_machine_type","machine_ratio","machine_capacity","machine_reserve_litre","registerMachine","machineData","post","clearForm","log","updateMachine","updateMachineData","put","selectedId","document","getElementById","click","setEditFormValues","machineType","find","onMounted","__exports__"],"sourceRoot":""}