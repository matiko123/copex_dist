{"version":3,"file":"js/9057.9ead36b8.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/role.vue","webpack://cork-vue3/./src/views/masters/role.vue?65fc"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>roles</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class=\"d-flex me-4 mt-2\">\r\n                        <div class=\"ms-auto\">\r\n                            <button class=\"btn btn-primary\" @click=\"role_registration =! role_registration\">                           \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n  <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>  \r\n                    <!-- role registration form starts -->\r\n <form v-if=\"role_registration\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerRole\">\r\n        <h4 class=\"text-center\">ROLE  REGISTRATION FORM</h4>\r\n        <div class=\"row mb-2\">\r\n    \r\n            <div class=\"col-md-4\">\r\n                <label class=\"form-label\">Role Name</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter role Name\" v-model=\"name\" required>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label class=\"form-label\">Description</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter role Description\" v-model=\"description\" step=\"any\" required>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label class=\"form-label\">Path</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter Path\" v-model=\"path\" step=\"any\" required>\r\n            </div>\r\n        </div>\r\n        <div class=\"text-center gap-2 justify-content-end\">\r\n            <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"role_registration = false\">Cancel</button>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n        </div>\r\n    </form>\r\n             <!-- item registration form ends-->\r\n \r\n                           <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n        \r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"items\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n                                 <a href=\"javascript:;\" class=\"edit me-2\" >\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                                data-bs-toggle=\"modal\" \r\n                                                data-bs-target=\"#edit_role\"\r\n                                                @click=\"edit_role(props.row)\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                    </a>\r\n                                \r\n                                <a href=\"javascript:void(0);\" title=\"Delete\" @click=\"deleteRole(props.row.id)\">\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-danger\"\r\n                                    >\r\n                                        <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                    </svg>\r\n                                </a>\r\n                              \r\n\r\n\r\n \r\n                                \r\n                            </template>\r\n                           \r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        \r\n<!-- role edit modal starts -->\r\n<div class=\"modal fade\" id=\"edit_role\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-lg\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">ROLE EDITING</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close_editing\" @click=\"clearForm\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateRole()\">\r\n      <div class=\"modal-body\">\r\n        <div class=\"row mb-2\">\r\n            <div class=\"col-md-4\">\r\n                <label class=\"form-label\">Role Name</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"editName\" placeholder=\"Enter Role Name\" required>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label class=\"form-label\">Description</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"editDescription\" placeholder=\"Enter Description\" required>\r\n            </div>\r\n       \r\n      \r\n            <div class=\"col-md-4\">\r\n                <label class=\"form-label\">Path</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"editPath\" placeholder=\"Enter Path\">\r\n            </div>\r\n            </div>\r\n       \r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-success py-2 px-2\">\r\n          <div v-if=\"sending\" class=\"spinner-border text-white\" role=\"status\">\r\n            <span class=\"sr-only\"></span>\r\n          </div>\r\n          <span v-else>Save changes</span>\r\n        </button>\r\n      </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n    </div>\r\n\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    import Swal from 'sweetalert2';\r\n\r\n    useMeta({ title: 'Custom Table' });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    const loadingIndicator = inject('loadingIndicator');\r\n    \r\n    const roles = ref([]);\r\n    const name = ref('');\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['id', 'name','description', 'path','actions']);\r\n    const items = ref([]);\r\n    const role_registration = ref(false);\r\n    const description = ref('');\r\n    const path = ref('');\r\n    const editId = ref(null);\r\n    const editName = ref('');\r\n    const editDescription = ref('');\r\n    const editPath = ref('');\r\n    const sending = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [ 10, 20, 50],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'role_name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const getRoles = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/roles')\r\n            .then((response) => {\r\n               roles.value = response.data;\r\n                items.value = response.data; // Bind the data to items\r\n                loading_spinner.value = false;\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                loading_spinner.value = false;\r\n                console.error(\"Error fetching roles:\", error.message);\r\n            });\r\n    };\r\n\r\n    const deleteRole = (id) => {\r\n        Swal.fire({\r\n            title: 'Are you sure?',\r\n            text: \"You won't be able to revert this!\",\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, delete it!'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                loading_spinner.value = true;\r\n                axiosInstance.delete(`/roles/${id}`)\r\n                    .then((response) => {\r\n                        getRoles();\r\n                        showMessage(response.data.message);\r\n                        loading_spinner.value = false;\r\n                        Swal.fire(\r\n                            'Deleted!',\r\n                            'Role has been deleted.',\r\n                            'success'\r\n                        )\r\n                    });\r\n            }\r\n        })\r\n    };\r\n\r\n    const registerRole = () => {\r\n        role_registration.value = false;\r\n        loading_spinner.value = true;\r\n        const itemData = {\r\n            name: name.value,\r\n            description: description.value,\r\n            path: path.value\r\n        };\r\n\r\n        axiosInstance\r\n            .post('/roles', itemData)\r\n            .then((response) => {\r\n                getRoles();\r\n                loading_spinner.value = false;\r\n                showMessage('role registered successfully!');\r\n                name.value = '';\r\n                description.value = '';\r\n                path.value = '';\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                loading_spinner.value = false;\r\n                console.error(\"Error registering Order:\", error.message);\r\n            });\r\n    };\r\n\r\n\r\nconst edit_role = (row) => {\r\n    editId.value = row.id;\r\n    editName.value = row.name;\r\n    editDescription.value = row.description;\r\n    editPath.value = row.path;\r\n};\r\n\r\nconst updateRole = () => {\r\n    sending.value = true;\r\n    const roleData = {\r\n        name: editName.value,\r\n        description: editDescription.value,\r\n        path: editPath.value\r\n    };\r\n\r\n    axiosInstance.put(`/roles/${editId.value}`, roleData)\r\n        .then((response) => {\r\n            getRoles();\r\n            sending.value = false;\r\n            document.getElementById('close_editing').click();\r\n            showMessage('Role updated successfully!');\r\n        })\r\n        .catch((error) => {\r\n            sending.value = false;\r\n            showError(error.message);\r\n            console.error(\"Error updating role:\", error.message);\r\n        });\r\n};\r\n\r\nconst clearForm = () => {\r\n    editId.value = null;\r\n    editName.value = '';\r\n    editDescription.value = '';\r\n    editPath.value = '';\r\n};\r\n\r\n\r\n\r\n    onMounted(() => {\r\n        getRoles();\r\n    });\r\n</script>\r\n","import script from \"./role.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./role.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./role.vue?vue&type=style&index=0&id=3491d284&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","loadingIndicator","inject","roles","ref","name","loading_spinner","columns","items","role_registration","description","path","editId","editName","editDescription","editPath","sending","showMessage","showError","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","getRoles","value","get","then","response","data","catch","error","message","console","deleteRole","id","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","delete","registerRole","itemData","post","edit_role","row","updateRole","roleData","put","document","getElementById","click","clearForm","onMounted","__exports__"],"sourceRoot":""}