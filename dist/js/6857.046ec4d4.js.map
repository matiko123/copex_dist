{"version":3,"file":"js/6857.046ec4d4.js","mappings":"oqiBAyiCIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,iBAKjB,MAAMC,EAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAGPC,GAAcC,EAAAA,EAAAA,IAAO,eACrBC,GAAYD,EAAAA,EAAAA,IAAO,aACnBE,GAAeF,EAAAA,EAAAA,IAAO,gBACtBG,GAAmBH,EAAAA,EAAAA,IAAO,oBAC1BI,GAAeJ,EAAAA,EAAAA,IAAO,gBACtBK,IAAeL,EAAAA,EAAAA,IAAO,iBACtBM,IAAaN,EAAAA,EAAAA,IAAO,cACpBO,GAAmBC,KAAKC,MAAMC,aAAaC,QAAQ,SAASC,YAC5DC,IAAkBC,EAAAA,EAAAA,KAAI,GACtBC,IAAUD,EAAAA,EAAAA,IAAI,CAAC,MAAO,OAAO,cAAc,WAAW,OAAO,OAAO,cAAc,YAClFE,IAAmBF,EAAAA,EAAAA,IAAI,CAAC,MAAO,WAAW,OAAO,aACjDG,IAAsBH,EAAAA,EAAAA,IAAI,CAAC,MAAO,OAAO,QAAQ,WAAW,aAAa,OAAO,OAAO,YAAY,UAAU,YAC7GI,IAAsBJ,EAAAA,EAAAA,IAAI,CAAC,MAAO,cAAc,cAAc,OAAO,OAAO,YAC5EK,IAAQL,EAAAA,EAAAA,IAAI,IACZM,IAAkBN,EAAAA,EAAAA,IAAI,MACrBjB,GAAU,sBACVwB,IAAcP,EAAAA,EAAAA,IAAI,IACnBQ,GAAiBC,IACnBH,GAAgBI,MAAQD,EACxBE,GAAOF,EAAQG,IACfC,KACAC,MAEFC,IAAiBf,EAAAA,EAAAA,IAAI,GACrBgB,GAAc,KAClBD,GAAeL,OAAS,IAEhBO,IAAejB,EAAAA,EAAAA,IAAI,CACrBkB,QAAS,IACTC,cAAe,CAAC,IAAK,IAAK,KAC1BC,KAAM,kCACNC,eAAgB,CAAEC,QAAS,uBAC3BC,SAAU,CAAC,KAAM,gBACjBC,SAAU,CACNC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAEVC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACHC,MAAO,oCACPC,OAAQ,GACRC,kBAAmB,YACnBC,MAAO,YAEXC,kBAAkB,IAGlBC,IAAiBrC,EAAAA,EAAAA,IAAI,IACpBc,GAAoBwB,UAC1BD,GAAe3B,MAAQ,GACxB6B,GAAQ7B,OAAQ,EAChB,IACE,MAAM8B,QAAiB3D,EAAc4D,IAAK,gCAA+BnC,GAAgBI,MAAME,MAC/FyB,GAAe3B,MAAQ8B,EAASE,KAAKC,KAAI,CAACC,EAAMC,KAAP,IACpCD,EACHE,IAAKD,EAAQ,EACbE,KAAMvD,GAAWoD,EAAKG,MAAQH,EAAKI,YACnCC,SAAUL,EAAKI,WACfE,WAAYN,EAAKM,WAAWP,KAAI,CAACQ,EAAUC,KAAX,IAC3BD,EACHL,IAAKM,EAAW,EAChBC,KAAMF,EAASE,MAAMC,YAAe,cAGxC,MAAOC,GACPC,QAAQC,IAAIF,GACZpE,EAAUoE,EAAMG,SAflB,QAiBEnB,GAAQ7B,OAAQ,IAMNiD,IAAyBC,EAAAA,EAAAA,KAAS,IACzCrD,GAAYG,MAGV2B,GAAe3B,MAAMuB,QAAO4B,IACjC,MAAMC,EAAQvD,GAAYG,MAAMqD,cAChC,OACEF,EAAOG,aAAaD,cAAcE,SAASH,IAC3CD,EAAOK,aAAaH,cAAcE,SAASH,IAC3CD,EAAOM,YAAYC,MAAML,cAAcE,SAASH,IAChDD,EAAOd,MAAMkB,SAASH,IACtBD,EAAOQ,QAAQN,cAAcE,SAASH,IACtCD,EAAOX,YAAYoB,MAAKnB,GACtBA,EAASA,UAAUY,cAAcE,SAASH,IAC1CX,EAASE,MAAMC,YAAYS,cAAcE,SAASH,QAZ/CzB,GAAe3B,QAmBhB6D,GAAc,KAChBxE,GAAgBW,OAAQ,EACxB7B,EAAc4D,IAAI,aAAa+B,MAAMhC,IACjCnC,GAAMK,MAAQ8B,EAASE,KACtBT,QAAOW,GAA4B,QAApBA,EAAK6B,aACpB9B,KAAI,CAACC,EAAMC,KAAP,IACED,EACH8B,IAAK7B,EAAQ,EACbjC,GAAIgC,EAAKhC,GACT+D,aAAa/B,EAAK+B,aAAaC,iBAAiB,SAEpD7E,GAAgBW,OAAQ,MAI1BmE,IAAM7E,EAAAA,EAAAA,IAAI,GACV8E,IAAM9E,EAAAA,EAAAA,IAAI,IACV+E,IAAY/E,EAAAA,EAAAA,IAAI,IAChBW,GAAS2B,MAAAA,IACXC,GAAQ7B,OAAQ,EACpB,IACI,MAAM8B,QAAiB3D,EAAc4D,IAAK,mBAAkB7B,YAAaiE,GAAInE,SAC7EoE,GAAIpE,MAAQ8B,EAASE,KAAKA,KAC1BqC,GAAUrE,MAAQ8B,EAASE,KAAKqC,UAClC,MAAOxB,GACRpE,EAAUoE,EAAMG,SAChBF,QAAQC,IAAIF,GANb,QAQIhB,GAAQ7B,OAAQ,IAId6B,IAAUvC,EAAAA,EAAAA,IAAI,IACdgF,IAAUhF,EAAAA,EAAAA,IAAI,IACda,GAAayB,UACjB2C,KACAD,GAAQtE,MAAQ,GACf6B,GAAQ7B,OAAQ,EACf,IACG,MAAM8B,QAAiB3D,EAAc4D,IAAK,sBAAqBnC,GAAgBI,MAAME,MACrFoE,GAAQtE,MAAQ8B,EAASE,KAC3B,MAAMa,GACLpE,EAAUoE,EAAMG,SAChBF,QAAQC,IAAIF,GALd,QAOEhB,GAAQ7B,OAAQ,EAGlBwE,GAAS,IAGNC,IAAanF,EAAAA,EAAAA,IAAI,IACjBoF,IAAkBpF,EAAAA,EAAAA,IAAI,IACvBiF,GAAgB3C,UACnB6C,GAAWzE,MAAQ,GACnB8C,QAAQC,IAAI0B,GAAWzE,OACvB6B,GAAQ7B,OAAQ,EACf,IACG,MAAM8B,QAAiB3D,EAAc4D,IAAK,+BAA8BnC,GAAgBI,MAAME,MAC9FuE,GAAWzE,MAAQ8B,EAASE,KAC5B0C,GAAgB1E,MAAQ8B,EAASE,KAAKrC,MAAMsC,KAAI,CAACC,EAAKC,KAAN,IAC5CD,EACHE,IAAMD,EAAQ,EACdwC,oBAAsBzC,EAAKyC,oBAC3BC,QAAU1C,EAAK0C,QACf1C,KAAOA,EAAKyB,OACZkB,KAAOjG,EAAasD,EAAK2C,MACzBC,KAAOlG,EAAasD,EAAK4C,UAG5B,MAAMjC,GACLpE,EAAUoE,EAAMG,SAChBF,QAAQC,IAAIF,GAfd,QAiBEhB,GAAQ7B,OAAQ,IAIZ+E,IAAazF,EAAAA,EAAAA,KAAI,GACrB0F,GAAmB,KACjBC,OAAOC,WAAa,MACrBH,GAAW/E,OAAQ,KAItBmF,EAAAA,EAAAA,IAAMhB,IAAMiB,IACZA,GACAnF,GAAOL,GAAgBI,MAAME,OAIrC,MAAMmF,IAAqB/F,EAAAA,EAAAA,IAAI,IACzBgG,IAAyBhG,EAAAA,EAAAA,IAAI,MAC7BiG,GAAiB,CAACC,EAAeC,KACrCJ,GAAmBrF,MAAQwF,EAC3BF,GAAuBtF,MAAQyF,GAG3BC,IAASpG,EAAAA,EAAAA,IAAI,IACbqG,IAAcrG,EAAAA,EAAAA,IAAI,IAClBsG,IAActG,EAAAA,EAAAA,IAAI,IAClBuG,IAAyBvG,EAAAA,EAAAA,IAAI,IAC7BwG,IAA0BxG,EAAAA,EAAAA,IAAI,KAEpC6F,EAAAA,EAAAA,IAAMO,IAASN,IACTA,IAAQO,GAAY3F,MAAQoF,EAAOzF,WAEzCwF,EAAAA,EAAAA,IAAMS,IAAcR,IACdA,IAAQS,GAAuB7F,MAAQoF,EAAOW,iBAGpD,MAAMC,IAAY1G,EAAAA,EAAAA,KAAI,GAChB2G,GAAerE,UACjBoE,GAAUhG,OAAQ,EACjB,MAAMkG,EAAU,CACbtB,QAAQkB,GAAwB9F,MAAME,GACtCiG,YAAYnH,KAAKC,MAAMC,aAAaC,QAAQ,SAASe,GACrDsD,YAAa,gBAAkB4C,GAAiBpG,MAAMqG,YAAc,QAASD,GAAiBpG,MAAMwD,YACpGnB,MAAM,IAAIiE,MAAOC,cAAcC,MAAM,KAAK,GAC1C1B,KAAM2B,WAAWL,GAAiBpG,MAAM8E,KAAK4B,QAAQ,SAAU,MAEnE,UACQvI,EAAcwI,IAAK,kCAAiCP,GAAiBpG,MAAM2E,sBAAuBuB,GACxGU,SAASC,eAAe,uBAAuBC,QAC/CvI,EAAY,gCACZwI,KACAC,KACAC,KACA,MAAOpE,GACPpE,EAAUoE,EAAMG,SAChBF,QAAQC,IAAIF,GATd,QAWEmD,GAAUhG,OAAQ,IAIhBoG,IAAmB9G,EAAAA,EAAAA,IAAI,IACvB4H,GAAyBC,IAC7Bf,GAAiBpG,MAAQmH,GAGvBF,GAAiB,KACrBvB,GAAO1F,MAAQ,GACf4F,GAAY5F,MAAQ,GACpB8F,GAAwB9F,MAAQ,IAG5B+G,GAAwBnF,UACvB6C,GAAWzE,MAAQ,GAClB,IACG,MAAM8B,QAAiB3D,EAAc4D,IAAK,+BAA8BnC,GAAgBI,MAAME,MAC9FuE,GAAWzE,MAAQ8B,EAASE,KAC5B0C,GAAgB1E,MAAQ8B,EAASE,KAAKrC,MAAMsC,KAAI,CAACC,EAAKC,KAAN,IAC5CD,EACHE,IAAMD,EAAQ,EACdwC,oBAAsBzC,EAAKyC,oBAC3BC,QAAU1C,EAAK0C,QACf1C,KAAOA,EAAKyB,OACZkB,KAAOjG,EAAasD,EAAK2C,MACzBC,KAAOlG,EAAasD,EAAK4C,UAG5B,MAAMjC,GACLpE,EAAUoE,EAAMG,SAChBF,QAAQC,IAAIF,KAKdmE,GAAqBpF,UACvB0C,GAAQtE,MAAQ,GACd,IACG,MAAM8B,QAAiB3D,EAAc4D,IAAK,sBAAqBnC,GAAgBI,MAAME,MACrFoE,GAAQtE,MAAQ8B,EAASE,KAC3B,MAAMa,GACLpE,EAAUoE,EAAMG,SAChBF,QAAQC,IAAIF,KAKVuE,IAAe9H,EAAAA,EAAAA,IAAI,IACpB+H,GAAwBzF,UAC7BvC,GAAgBW,OAAQ,EACtB,IACI,MAAM8B,QAAiB3D,EAAc4D,IAAK,6CAA4CuF,GAAoBtH,MAAME,MAChHkH,GAAapH,MAAQ8B,EAASE,KAAKC,KAAI,CAACC,EAAMC,KAAP,IAChCD,EACP8B,IAAK7B,EAAQ,EACbE,KAAMvD,GAAWoD,EAAKG,MACtBmB,YAAatB,EAAKsB,YACjBsB,KAAMlG,EAAasD,EAAK4C,MACxByC,YAAarF,EAAKsF,UAAU9D,KAC7B+D,eAAgBvF,EAAKsF,UAAUE,UAEjC,MAAO7E,GACLpE,EAAUoE,EAAMG,SAZpB,QAcI3D,GAAgBW,OAAQ,IAI1BsH,IAAsBhI,EAAAA,EAAAA,IAAI,MAC1BqI,GAAmBR,IACvB,MAAMzB,EAASpB,GAAQtE,MAAM4H,MAAKC,GAChCA,EAAElI,OAAOiE,MAAK1B,GACZA,EAAK6D,cAAcnC,MAAKkE,GAAQA,EAAK5H,KAAOiH,EAAIjH,SAG9C6H,EAAarC,GAAQ/F,OAAOiI,MAAK1F,GACrCA,EAAK6D,cAAcnC,MAAKkE,GAAQA,EAAK5H,KAAOiH,EAAIjH,OAGlDoH,GAAoBtH,MAAQ,IACvBmH,EACHvB,YAAa,IACRmC,EACHrC,OAAQA,IAGZ2B,GAAqBF,IAGrBa,GAAiB,KACrBV,GAAoBtH,MAAQ,MAGxBiI,IAAkB3I,EAAAA,EAAAA,IAAI,IACtB4I,GAAoBtG,UACvB,MAAME,QAAiB3D,EAAc4D,IAAI,mBACzCkG,GAAgBjI,MAAQ8B,EAASE,MAI9BmG,IAAmB7I,EAAAA,EAAAA,IAAI,GACvB8I,IAAQ9I,EAAAA,EAAAA,IAAI,IACZ+I,IAAe/I,EAAAA,EAAAA,IAAI,CAAC,MAAM,OAAO,WAAW,OAAO,OAAO,cAC1DkF,GAAY8D,IAChBA,EAAmBC,OAAOD,GAE1BF,GAAMpI,MAAQsE,GAAQtE,MAAMwI,SAAQ9C,GAClCA,EAAO/F,MAAM6I,SAAQtG,GACnBA,EAAK6D,aACFxE,QAAOuG,GAA6B,IAArBQ,GAA0BR,EAAKQ,mBAAqBA,IACnErG,KAAI,CAAC6F,EAAM3F,KAAP,IACA2F,EACH1F,IAAKD,EAAQ,EACbD,KAAM4F,EAAKpE,KACX+E,UAAWX,EAAKW,SAAWX,EAAKY,YAAYxE,iBAC5CW,KAAMjG,EAAakJ,EAAKhD,MACxBA,KAAMlG,EAAakJ,EAAKW,SAAWX,EAAKY,WAAaZ,EAAKhD,MAC1D6D,UAAY/J,EAAakJ,EAAKa,oB,OAOpCC,EAAAA,EAAAA,KAAU,KACN/E,KACAmB,KACAkD,KACAtB,SAASC,eAAe,gBAAgBC,W,25nBCl5ChD,MAAM+B,IAA2B,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://cork-vue3/./src/views/test/index.vue","webpack://cork-vue3/./src/views/test/index.vue?351f"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Projects</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Overview</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n<!-- tab starts -->\r\n<h5 class=\"text-center\" :style=\"mobileView ? 'font-size:15px':''\">PROJECT OVERVIEW {{ selectedProject ?' FOR ' + selectedProject.short_name:'' }}</h5>\r\n\r\n<!-- offcanvas start -->\r\n\r\n<div class=\"offcanvas offcanvas-start\" data-bs-scroll=\"true\" tabindex=\"-1\" id=\"offcanvasWithBothOptions\" aria-labelledby=\"offcanvasWithBothOptionsLabel\">\r\n  <div class=\"offcanvas-header\">\r\n    <h5 class=\"offcanvas-title\" id=\"offcanvasWithBothOptionsLabel\">PROJECT LISTS</h5>\r\n    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n  </div>\r\n  <div class=\"offcanvas-body\">\r\n  <div class=\"row\">\r\n  <div class=\"col-12\">\r\n    <div class=\"list-group\" id=\"list-tab\" role=\"tablist\"  >\r\n      <span v-if=\"loading_spinner\" v-html=\"waitIndicator()\"></span>\r\n      <a v-for=\"project in items\" :key=\"project.id\" class=\"list-group-item list-group-item-action\" :id=\"'project-link-' + project.id\" data-bs-toggle=\"list\" :href=\"'#project-' + project.id\" role=\"tab\" :aria-controls=\"'project-' + project.id\" @click.prevent=\"selectProject(project)\" data-bs-dismiss=\"offcanvas\">{{ project.short_name }}</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n  </div>\r\n</div>\r\n <!-- offcanvas ends -->\r\n\r\n\r\n   <button class=\"btn\" v-if=\"mobileView\"  data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-list-ul\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2\"/>\r\n</svg>\r\n</button>\r\n<button v-else class=\"btn btn-outline-primary\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\" id=\"project-list\">Select Project from the lists</button>\r\n\r\n\r\n\r\n<!-- projects list  starts-->\r\n\r\n      <div v-if=\"!selectedProject\" class=\"tab-pane  mt-5\"><h5>No project selected</h5></div>\r\n<div class=\"tab-content\" id=\"nav-tabContent\">\r\n  <div\r\n    v-if=\"selectedProject\"\r\n    class=\"tab-pane fade show active\"\r\n    :id=\"'project-' + selectedProject.id\"\r\n    role=\"tabpanel\"\r\n    :aria-labelledby=\"'project-link-' + selectedProject.id\"\r\n  >\r\n    <!-- project tab starts -->\r\n\r\n    <div class=\"panel-body pill-justify-centered tabs\">\r\n      <ul class=\"nav nav-pills mb-3 mt-3 justify-content-center\" id=\"justify-center-pills-tab\" role=\"tablist\">\r\n        <li class=\"nav-item\">\r\n          <a\r\n            class=\"nav-link active\"\r\n            id=\"justify-center-pills-details-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#justify-center-pills-details\"\r\n            role=\"tab\"\r\n            aria-controls=\"justify-center-pills-details\"\r\n            aria-selected=\"true\"\r\n          >\r\n            PROJECT DETAILS\r\n          </a>\r\n        </li>\r\n\r\n        <li class=\"nav-item\">\r\n          <a\r\n            class=\"nav-link\"\r\n            id=\"justify-center-pills-boq-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#justify-center-pills-boq\"\r\n            role=\"tab\"\r\n            aria-controls=\"justify-center-pills-boq\"\r\n            aria-selected=\"false\"\r\n          >\r\n            BILL OF QUANTITY\r\n          </a>\r\n        </li>\r\n\r\n        <li class=\"nav-item\">\r\n          <a\r\n            class=\"nav-link\"\r\n            id=\"justify-center-pills-planning-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#justify-center-pills-planning\"\r\n            role=\"tab\"\r\n            aria-controls=\"justify-center-pills-planning\"\r\n            aria-selected=\"false\"\r\n          >\r\n            BUDGETS \r\n          </a>\r\n        </li>\r\n\r\n          <li class=\"nav-item\">\r\n          <a\r\n            class=\"nav-link\"\r\n            id=\"ipc-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#ipc\"\r\n            role=\"tab\"\r\n            aria-controls=\"ipc\"\r\n            aria-selected=\"false\"\r\n          >\r\n            PROVISIONAL IPC \r\n          </a>\r\n        </li>\r\n\r\n          <li class=\"nav-item\">\r\n          <a\r\n            class=\"nav-link\"\r\n            id=\"activities-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#activities\"\r\n            role=\"tab\"\r\n            aria-controls=\"activities\"\r\n            aria-selected=\"false\"\r\n          >\r\n            SITE ACTIVITIES \r\n          </a>\r\n        </li>\r\n\r\n           <li class=\"nav-item\" >\r\n          <a\r\n            class=\"nav-link\"\r\n            id=\"analysis-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#analysis\"\r\n            role=\"tab\"\r\n            aria-controls=\"analysis\"\r\n            aria-selected=\"false\"\r\n          >\r\n            PROJECT ANALYSIS\r\n          </a>\r\n             </li>\r\n\r\n      </ul>\r\n\r\n      <div class=\"tab-content\" id=\"justify-center-pills-tabContent\">\r\n\r\n        <!-- PROJECT DETAILS -->\r\n        <div\r\n          class=\"tab-pane fade show active\"\r\n          id=\"justify-center-pills-details\"\r\n          role=\"tabpanel\"\r\n          aria-labelledby=\"justify-center-pills-details-tab\"\r\n        >\r\n          <h4 class=\"mb-4\">Project Details!</h4>\r\n\r\n          <ul class=\"list-group list-group-flush mb-4\">\r\n            <li class=\"list-group-item\">Project Short Name : {{ selectedProject.short_name }}</li>\r\n            <li class=\"list-group-item\">Project Full Name : {{ selectedProject.project_name }}</li>\r\n            <li class=\"list-group-item\">Contract Number : {{ selectedProject.contract_number }}</li>\r\n            <li class=\"list-group-item\">Financial Year : {{ selectedProject.financial_year }}</li>\r\n            <li class=\"list-group-item\">Project Cost : {{ selectedProject.project_cost }}</li>\r\n            <li class=\"list-group-item\">Client : {{ selectedProject.project_cost }}</li>\r\n            <li class=\"list-group-item\">Start Date : {{ selectedProject.start_date }}</li>\r\n            <li class=\"list-group-item\">End Date : {{ selectedProject.end_date }}</li>\r\n            <li class=\"list-group-item\">Project Progress : 0%\r\n\r\n                <div class=\"progress br-30 mt-2 \" min=\"0\" style=\"height : 30px\">\r\n    <div role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\" aria-valuenow=\"90\" class=\"progress-bar bg-primary\" style=\"width: 0%;\">\r\n        <!-- <div class=\"progress-title \"><span>Currently at Stone Pitching</span><span>90%</span></div> -->\r\n        <div class=\"progress-title \"><span></span><span>0%</span></div>\r\n      </div>\r\n</div>\r\n\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <!-- BILL OF QUANTITY -->\r\n        <div\r\n          class=\"tab-pane fade\"\r\n          id=\"justify-center-pills-boq\"\r\n          role=\"tabpanel\"\r\n          aria-labelledby=\"justify-center-pills-boq-tab\"\r\n        >\r\n          <!-- boq table starts -->\r\n         <div v-if=\"boq.length > 0 \" style=\"max-height: 600px; overflow-y: auto;\" >\r\n  <table class=\"table table-bordered mt-4\">\r\n      <thead class=\"thead-light\" style=\"position: sticky; top: 0; background: white; z-index: 5;\">\r\n              <tr>\r\n                <th scope=\"col\" class=\"text-dark\">Code/SN</th>\r\n                <th scope=\"col\" class=\"text-dark\">Description</th>\r\n                <th scope=\"col\" class=\"text-dark\">Unit</th>\r\n                <th scope=\"col\" class=\"text-dark\">Quantity</th>\r\n                <th scope=\"col\" class=\"text-dark\">Rate</th>\r\n                <th scope=\"col\" class=\"text-dark\">Total</th>\r\n              </tr>\r\n            </thead>\r\n     <tbody >\r\n        <tr >\r\n    <td colspan=\"6\" class=\"bg-dark text-white\" >\r\n      Bill of Quantity {{ selectedProject.project_name }}\r\n    </td>\r\n  </tr>\r\n<template v-for=\"(series, i) in boq\" :key=\"'series-' + i\">\r\n  <tr>\r\n    <th colspan=\"1\" class=\"text-center\">SERIES {{ i + 1 }}</th>\r\n    <th colspan=\"5\" class=\"text-start\">{{ series.name }}</th>\r\n  </tr>\r\n\r\n  <template v-for=\"(section, j) in series.sections\" :key=\"'section-' + j\">\r\n    <tr>\r\n      <th colspan=\"1\" class=\"text-center\">Section {{ i + 1 }}.{{ j + 1 }}</th>\r\n      <th colspan=\"5\" class=\"text-start\">{{ section.name }}</th>\r\n    </tr>\r\n\r\n    <template v-for=\"(line, a) in section.lines\" :key=\"'line-' + a\">\r\n      <tr>\r\n        <td class=\"text-center\">{{ String.fromCharCode(97 + a) }}</td>\r\n        <td class=\"text-start\">{{ line.name }}</td>\r\n        <td>{{ line.unit }}</td>\r\n        <td>{{ Number(line.quantity).toLocaleString() }}</td>\r\n        <td class=\"text-end\">{{  Number(line.rate).toLocaleString() }}</td>\r\n        <td class=\"text-end\">{{(line.rate * line.quantity).toLocaleString() }}</td>\r\n      </tr>\r\n    </template>\r\n\r\n    <template v-for=\"(sub, k) in section.sub_sections\" :key=\"'sub-' + k\">\r\n      <tr>\r\n        <th colspan=\"1\" class=\"text-center\">{{ i + 1 }}.{{ j + 1 }}.{{ k + 1 }}</th>\r\n        <th colspan=\"5\" class=\"text-start\">{{ sub.name }}</th>\r\n      </tr>\r\n\r\n      <template v-for=\"(line, b) in sub.lines\" :key=\"'subline-' + b\">\r\n        <tr>\r\n          <td class=\"text-center\">{{ String.fromCharCode(97 + b) }}</td>\r\n          <td class=\"text-start\">{{ line.name }}</td>\r\n          <td>{{ line.unit }}</td>\r\n          <td>{{ line.quantity }}</td>\r\n          <td class=\"text-end\">{{ line.rate.toLocaleString() }}</td>\r\n          <td class=\"text-end\">{{ (line.rate * line.quantity).toLocaleString() }}</td>\r\n        </tr>\r\n      </template>\r\n    </template>\r\n  </template>\r\n</template>\r\n  <div v-if=\"boq.lenght == 0\">No Series Set for this project</div>\r\n</tbody>\r\n\r\n          </table>\r\n        <div v-if=\"boq.length === 0 && selectedProject\" class=\"text-center\">No BoQ set for this project</div>\r\n        <div class=\"mx-4\">\r\n  <h5 v-if=\"project\" class=\"text-center bg-dark\">Summary</h5>\r\n\r\n  <div v-for=\"series in boq\" class=\"row\" :key=\"series.id\">\r\n    <div class=\"col-md-9 fw-bold\">\r\n      <p class=\"fw-bold\">Series {{ series.name }}</p>\r\n    </div>\r\n    <div class=\"col-md-3 text-end\">\r\n      {{\r\n        series.sections.reduce((sAcc, section) => {\r\n          const sectionLinesTotal = section.lines.reduce((lAcc, line) => lAcc + line.quantity * line.rate, 0);\r\n          const subSectionsTotal = section.sub_sections.reduce((ssAcc, sub) => \r\n            ssAcc + sub.lines.reduce((lAcc, line) => lAcc + line.quantity * line.rate, 0), 0\r\n          );\r\n          return sAcc + sectionLinesTotal + subSectionsTotal;\r\n        }, 0).toLocaleString()\r\n      }}\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"row\">\r\n    <div class=\"col-md-9 fw-bold\">\r\n      <p class=\"fw-bold\">A Total of Bills</p>\r\n    </div>\r\n    <div class=\"col-md-3 text-end\">\r\n      {{\r\n        boq.reduce((totalAcc, series) => \r\n          totalAcc + series.sections.reduce((sAcc, section) => {\r\n            const sectionLinesTotal = section.lines.reduce((lAcc, line) => lAcc + line.quantity * line.rate, 0);\r\n            const subSectionsTotal = section.sub_sections.reduce((ssAcc, sub) => \r\n              ssAcc + sub.lines.reduce((lAcc, line) => lAcc + line.quantity * line.rate, 0), 0\r\n            );\r\n            return sAcc + sectionLinesTotal + subSectionsTotal;\r\n          }, 0), 0\r\n        ).toLocaleString()\r\n      }}\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n           <!-- boq table ends -->\r\n        </div>\r\n        <div v-else>\r\n          <span v-if=\"loading\" v-html=\"loadingIndicator()\"></span>\r\n          <span v-else>\r\n           No BOQ for this project!\r\n          </span>\r\n        </div>\r\n        </div>\r\n\r\n        <!-- PLANNING /BUDGETS -->\r\n        <div\r\n          class=\"tab-pane fade\"\r\n          id=\"justify-center-pills-planning\"\r\n          role=\"tabpanel\"\r\n          aria-labelledby=\"justify-center-pills-planning-tab\"\r\n        >\r\n          <h4 class=\"mb-4\">Project Planning </h4>\r\n          <!-- planning accordion starts -->\r\n<div class=\"accordion accordion-flush\" id=\"accordionFlushExample\">\r\n   <div v-for=\"budget in budgets\" class=\"accordion-item\">\r\n    <h2 class=\"accordion-header\">\r\n      <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" :data-bs-target=\"`#budget-${budget.id}`\" aria-expanded=\"false\" aria-controls=\"flush-collapseOne\">\r\n        {{ budget.name }}  :  {{ formatNumber(budget.total_used_cost) }}\r\n      </button>\r\n    </h2>\r\n    <div :id=\"`budget-${budget.id}`\" class=\"accordion-collapse collapse\" data-bs-parent=\"#accordionFlushExample\">\r\n      <div class=\"accordion-body\">\r\n        \r\n        <!-- Items Accordion -->\r\n        <div class=\"accordion accordion-flush\" :id=\"`itemsAccordion-${budget.id}`\">\r\n          <div v-for=\"(item, index) in budget.items\" class=\"accordion-item\" style=\"border:1px solid green\">\r\n            <h2 class=\"accordion-header\">\r\n              <button class=\"accordion-button collapsed\" type=\"button\" \r\n                      data-bs-toggle=\"collapse\" \r\n                      :data-bs-target=\"`#item-${item.id}`\" \r\n                      aria-expanded=\"false\">\r\n                {{ index + 1 }}. {{ item.name }} &nbsp;&nbsp;&nbsp; Budgeted: {{ formatNumber(item.total_budget_items_cost) }} &nbsp;&nbsp;&nbsp; Used: {{ formatNumber(item.total_used_cost) }} &nbsp;&nbsp;&nbsp; Balance: {{ formatNumber(Number(item.total_budget_items_cost) - Number(item.total_used_cost)) }}\r\n              </button>\r\n            </h2>\r\n            <div :id=\"`item-${item.id}`\" \r\n                 class=\"accordion-collapse collapse\" \r\n                 :data-bs-parent=\"`#itemsAccordion-${budget.id}`\">\r\n              <div class=\"accordion-body\">\r\n                \r\n                <!-- Descriptions v-client-table -->\r\n                 <div class=\"panel p-0\">\r\n                <div class=\"custom-table\">\r\n                  <v-client-table :data=\"item.descriptions\" :columns=\"descriptionsColumns\" :options=\"table_option\">\r\n                    <template #Sno=\"props\">\r\n                      {{ props.index + 0 }}\r\n                    </template>\r\n                    <template #actions=\"props\">\r\n                      <a href=\"javascript:void(0);\" \r\n                         title=\"View Details\" \r\n                         data-bs-toggle=\"modal\" \r\n                         data-bs-target=\"#view-description-modal\"\r\n                         @click=\"viewDescription(props.row);\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" \r\n                             width=\"24\" \r\n                             height=\"24\" \r\n                             viewBox=\"0 0 24 24\" \r\n                             fill=\"none\" \r\n                             stroke=\"currentColor\" \r\n                             stroke-width=\"1.5\" \r\n                             stroke-linecap=\"round\" \r\n                             stroke-linejoin=\"round\"\r\n                             class=\"text-primary\">\r\n                          <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                          <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                        </svg>\r\n                      </a>\r\n                    </template>\r\n                    <template #rate=\"props\">\r\n                      {{ formatNumber(props.row.cost) }}\r\n                    </template>\r\n                    <template #cost=\"props\">\r\n                      {{ formatNumber(props.row.total_budget_item_description_cost) }}\r\n                    </template>\r\n                    <template #used_cost=\"props\">\r\n                      {{ formatNumber(props.row.used_cost) }}\r\n                    </template>\r\n                    <template #balance=\"props\">\r\n                      {{ formatNumber(props.row.total_budget_item_description_cost - parseFloat(props.row.used_cost || 0)) }}\r\n                    </template>\r\n                  </v-client-table>\r\n                </div>\r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n  </div>\r\n     <div class=\"accordion-item\">\r\n    <h2 class=\"accordion-header\">\r\n      <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" :data-bs-target=\"`#unbudgeted`\" aria-expanded=\"false\" aria-controls=\"flush-collapseOne\">\r\n        UNBUDGETED COSTS : {{ formatNumber(unbudgeted?.total_cost ?? 0) }}\r\n      </button>\r\n    </h2>\r\n    <div :id=\"`unbudgeted`\" class=\"accordion-collapse collapse\" data-bs-parent=\"#accordionFlushExample\">\r\n      <div class=\"accordion-body\">\r\n            \r\n                    <div class=\"custom-table\">\r\n\r\n\r\n                         <v-client-table :data=\"unbudgetedItems\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #actions=\"props\">\r\n                            <button \r\n                          v-if=\"user_permissions.includes('can_add_budget_consumption')\"\r\n                   class=\"btn btn-outline-secondary ms-2\" \r\n                   title=\"Assign Budget\"\r\n                   data-bs-toggle=\"modal\"\r\n                   data-bs-target=\"#assign-budget-modal\"\r\n                   @click=\"openAssignBudgetModal(props.row)\"\r\n                 >\r\n                   Assign Budget\r\n                         </button>\r\n\r\n                            </template>   \r\n                        </v-client-table>\r\n\r\n\r\n</div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n     <span v-if=\"loading\" v-html=\"loadingIndicator()\"></span>\r\n  <div v-else v-if=\"budgets.length == 0\">No planned Budget For this project</div>\r\n</div>\r\n           <!-- planning accordion ends -->\r\n        </div>\r\n\r\n        <!-- PROVISIONAL IPC -->\r\n           <div\r\n          class=\"tab-pane fade\"\r\n          id=\"ipc\"\r\n          role=\"tabpanel\"\r\n          aria-labelledby=\"ipc-tab\"\r\n        >\r\n        <div class=\"d-flex flex-column align-items-center mb-4\">\r\n    <nav aria-label=\"Page navigation\">\r\n        <ul class=\"pagination justify-content-center\" style=\"cursor: pointer;\">\r\n            \r\n            <li class=\"page-item disabled\">\r\n                <a class=\"page-link\" href=\"#\" aria-label=\"Previous\">\r\n                    <span aria-hidden=\"true\">&laquo;</span>\r\n                </a>\r\n            </li>\r\n<li \r\n    v-for=\"i in ipc_count + 1\" \r\n    class=\"page-item\" :class=\"{ active: ipc === i }\"\r\n    @click=\"ipc = i\"\r\n>\r\n    <span class=\"page-link\" >IPC.0{{ i }} </span>\r\n</li>\r\n\r\n            <li class=\"page-item disabled\">\r\n                <a class=\"page-link\" href=\"#\" aria-label=\"Next\">\r\n                    <span aria-hidden=\"true\">&raquo;</span>\r\n                </a>\r\n            </li>\r\n\r\n        </ul>\r\n    </nav>\r\n\r\n    <div v-if=\"loading\" v-html=\"waitIndicator()\"></div>\r\n</div>\r\n<div class=\"table-responsive\"  style=\"max-height: 600px; overflow-y: auto;\">\r\n          <table class=\"table table-bordered mt-4\">\r\n      <thead class=\"thead-light\" style=\"position: sticky; top: 0; background: white; z-index: 5;\">\r\n                      <tr>\r\n                <th  colspan=\"6\" class=\"text-dark text-center \">Original BoQ</th>\r\n                <th colspan=\"2\" class=\"text-dark text-nowrap text-center \">Previous IPC</th>\r\n                <th colspan=\"2\"  class=\"text-dark text-nowrap text-center\" style=\"background-color: beige;border: 1px solid black;\">This IPC</th>\r\n                <th colspan=\"2\"  class=\"text-dark text-nowrap text-center\">Remaining Balance</th>\r\n              </tr>\r\n        <tr>\r\n                <th scope=\"col\" class=\"text-dark\">Code/SN</th>\r\n                <th scope=\"col\" class=\"text-dark\">Description</th>\r\n                <th scope=\"col\" class=\"text-dark\">Unit</th>\r\n                <th scope=\"col\" class=\"text-dark\">Qty</th>\r\n                <th scope=\"col\" class=\"text-dark\">Rate</th>\r\n                <th scope=\"col\" class=\"text-dark\">Total</th>\r\n                <!-- previous ipc -->\r\n                   <th scope=\"col\" class=\"text-dark\">Qty</th>\r\n                <th scope=\"col\" class=\"text-dark\">Total</th>\r\n                <!-- this ipc -->\r\n                   <th scope=\"col\" class=\"text-dark\" style=\"background-color: beige;border: 1px solid black;\">Qty</th>\r\n                <th scope=\"col\" class=\"text-dark\" style=\"background-color: beige;border: 1px solid black;\">Total</th>\r\n                <!-- balance -->\r\n                   <th scope=\"col\" class=\"text-dark\">Qty</th>\r\n                <th scope=\"col\" class=\"text-dark\">Total</th>\r\n              </tr>\r\n            </thead>\r\n     <tbody >\r\n<template v-for=\"(series, i) in boq\" :key=\"'series-' + i\">\r\n  <tr>\r\n    <th colspan=\"1\" class=\"text-center\">SERIES {{ i + 1 }}</th>\r\n    <th colspan=\"5\" class=\"text-start\">{{ series.name }}</th>\r\n  </tr>\r\n\r\n  <template v-for=\"(section, j) in series.sections\" :key=\"'section-' + j\">\r\n    <tr>\r\n      <th colspan=\"1\" class=\"text-center\">Section {{ i + 1 }}.{{ j + 1 }}</th>\r\n      <th colspan=\"5\" class=\"text-start\">{{ section.name }}</th>\r\n    </tr>\r\n\r\n    <template v-for=\"(line, a) in section.lines\" :key=\"'line-' + a\">\r\n      <tr >\r\n        <td class=\"text-center\">{{ String.fromCharCode(97 + a) }}</td>\r\n        <td class=\"text-start\">{{ line.name }}</td>\r\n        <td>{{ line.unit }}</td>\r\n        <td>{{ line.quantity }}</td>\r\n        <td class=\"text-end\">{{  Number(line.rate).toLocaleString() }}</td>\r\n        <td class=\"text-end\">{{(line.rate * line.quantity).toLocaleString() }}</td>\r\n                  <!-- previous ipc -->\r\n          <td @click=\"showError(`You Can't edit previous IPC`)\">{{ line?.previous_progress?.quantity ?? 0 }}</td>\r\n           <td>{{ ((line?.previous_progress?.quantity ?? 0)* line.rate).toLocaleString() }}</td>\r\n          <!-- this ipc -->\r\n            <td style=\"cursor: pointer;background-color: beige;border: 3px solid white;\" >\r\n            <span >\r\n             {{ line?.progress?.quantity ?? 0 }}\r\n            </span>\r\n            </td>\r\n          <!-- remaining balance -->\r\n          <td>{{ ((line?.progress?.quantity ?? 0)* line.rate).toLocaleString()  }}</td>\r\n             <td>{{ (Number(line.quantity) - (Number(line?.progress?.quantity ?? 0) +  Number(line?.previous_progress?.quantity ?? 0)))  }}</td>\r\n          <td>{{ ((line.quantity - (Number(line?.progress?.quantity ?? 0) +  Number(line?.previous_progress?.quantity ?? 0))) * line.rate).toLocaleString() }}</td>\r\n      </tr>\r\n    </template>\r\n\r\n    <template v-for=\"(sub, k) in section.sub_sections\" :key=\"'sub-' + k\">\r\n      <tr>\r\n        <th colspan=\"1\" class=\"text-center\">{{ i + 1 }}.{{ j + 1 }}.{{ k + 1 }}</th>\r\n        <th colspan=\"5\" class=\"text-start\">{{ sub?.name }}</th>\r\n      </tr>\r\n\r\n      <template v-for=\"(line, b) in sub.lines\" :key=\"'subline-' + b\">\r\n        <tr>\r\n          <td class=\"text-center\">{{ String.fromCharCode(97 + b) }}</td>\r\n          <td class=\"text-start\">{{ line?.name }}</td>\r\n          <td>{{ line.unit }}</td>\r\n          <td>{{ line.quantity }}</td>\r\n          <td class=\"text-end\">{{ line.rate.toLocaleString() }}</td>\r\n          <td class=\"text-end\">{{ (line.rate * line.quantity).toLocaleString() }}</td>\r\n          <!-- previous ipc -->\r\n          <td>{{ line?.progress?.quantity ?? 0 }}</td>\r\n          <td>{{ ((line?.progress?.quantity ?? 0)* line.rate).toLocaleString() }}</td>\r\n          <!-- this ipc -->\r\n          <td  style=\"cursor: pointer;background-color: beige;border: 3px solid white;\" @click=\"fillEdit(line.id,line?.progress?.quantity ?? 0)\" >\r\n            <span >\r\n             {{ line?.progress?.quantity ?? 0 }}\r\n            </span>\r\n          </td>\r\n          <td>{{ ((line?.progress?.quantity ?? 0)* line.rate).toLocaleString() }}</td>\r\n            <!-- remaining balance -->\r\n          <td>{{ (line.quantity - ((line?.progress?.quantity ?? 0) +  (line?.previous_progress?.quantity ?? 0)))  }}</td>\r\n          <td>{{ ((line.quantity - ((line?.progress?.quantity ?? 0) +  (line?.previous_progress?.quantity ?? 0))) * line.rate).toLocaleString() }}</td>\r\n        </tr>\r\n      </template>\r\n    </template>\r\n  </template>\r\n</template>\r\n  <div v-if=\"boq.lenght == 0\">No Series Set for this project</div>\r\n</tbody>\r\n  <tfoot class=\"thead-light\" style=\"position: sticky; top: 0; background: white; z-index: 5;\">\r\n        <tr>\r\n                <th colspan=\"5\" class=\"text-dark text-end\">GRAND TOTAL</th>\r\n                <th scope=\"col\" class=\"text-dark\">\r\n      {{\r\n        boq.reduce((totalAcc, series) => \r\n          totalAcc + series.sections.reduce((sAcc, section) => {\r\n            const sectionLinesTotal = section.lines.reduce((lAcc, line) => lAcc + line.quantity * line.rate, 0);\r\n            const subSectionsTotal = section.sub_sections.reduce((ssAcc, sub) => \r\n              ssAcc + sub.lines.reduce((lAcc, line) => lAcc + line.quantity * line.rate, 0), 0\r\n            );\r\n            return sAcc + sectionLinesTotal + subSectionsTotal;\r\n          }, 0), 0\r\n        ).toLocaleString()\r\n      }}\r\n                </th>\r\n                <th scope=\"col\" class=\"text-dark\">&nbsp;</th>\r\n                <th scope=\"col\" class=\"text-dark\">\r\n{{\r\n  boq.reduce((t, s) =>\r\n    t + s.sections.reduce((st, sec) =>\r\n      st\r\n      + sec.lines.reduce((l, ln) => l + ((ln?.previous_progress?.quantity ?? 0) * ln.rate), 0)\r\n      + sec.sub_sections.reduce((ss, sub) =>\r\n        ss + sub.lines.reduce((l, ln) => l + ((ln?.previous_progress?.quantity ?? 0) * ln.rate), 0)\r\n      , 0)\r\n    , 0)\r\n  , 0).toLocaleString()\r\n}}\r\n</th>\r\n\r\n                <th scope=\"col\" class=\"text-dark\">&nbsp;</th>\r\n              <th scope=\"col\" class=\"text-dark\">\r\n{{\r\n  boq.reduce((t, s) =>\r\n    t + s.sections.reduce((st, sec) =>\r\n      st\r\n      + sec.lines.reduce((l, ln) => l + ((ln?.progress?.quantity ?? 0) * ln.rate), 0)\r\n      + sec.sub_sections.reduce((ss, sub) =>\r\n        ss + sub.lines.reduce((l, ln) => l + ((ln?.progress?.quantity ?? 0) * ln.rate), 0)\r\n      , 0)\r\n    , 0)\r\n  , 0).toLocaleString()\r\n}}\r\n</th>\r\n\r\n                <th scope=\"col\" class=\"text-dark\">&nbsp;</th>\r\n<th scope=\"col\" class=\"text-dark\">\r\n{{\r\n  boq.reduce((t, s) =>\r\n    t + s.sections.reduce((st, sec) =>\r\n      st\r\n      + sec.lines.reduce((l, ln) => {\r\n        const qty = Number(ln.quantity) || 0\r\n        const rate = Number(ln.rate) || 0\r\n        const prev = Number(ln?.previous_progress?.quantity) || 0\r\n        const curr = Number(ln?.progress?.quantity) || 0\r\n        return l + ((qty - (prev + curr)) * rate)\r\n      }, 0)\r\n      + sec.sub_sections.reduce((ss, sub) =>\r\n        ss + sub.lines.reduce((l, ln) => {\r\n          const qty = Number(ln.quantity) || 0\r\n          const rate = Number(ln.rate) || 0\r\n          const prev = Number(ln?.previous_progress?.quantity) || 0\r\n          const curr = Number(ln?.progress?.quantity) || 0\r\n          return l + ((qty - (prev + curr)) * rate)\r\n        }, 0)\r\n      , 0)\r\n    , 0)\r\n  , 0).toLocaleString()\r\n}}\r\n</th>\r\n\r\n\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n</div>\r\n\r\n        <div v-if=\"boq.length === 0 && selectedProject\" class=\"text-center\">No BoQ set for this project</div>\r\n        </div>\r\n\r\n        <!-- SITE ACTIVITIES -->\r\n \r\n        <div\r\n          class=\"tab-pane fade\"\r\n          id=\"activities\"\r\n          role=\"tabpanel\"\r\n          aria-labelledby=\"activities-tab\"\r\n        >\r\n  <div class=\"panel p-0 mt-3\">\r\n    <!-- <h5 class=\"text-center mt-3\">SITE WORK REPORT </h5> -->\r\n  <div v-if=\"loading\" v-html=\"waitIndicator()\"></div>\r\n  <div class=\"text-center\" v-if=\"siteWorkReport.length == 0 && !loading\">No Report Made for this site</div>\r\n    <!-- Add New Button -->\r\n    <div class=\"d-flex me-5\">\r\n      <div class=\"ms-auto d-flex gap-5\">\r\n        <input \r\n          type=\"text\" \r\n          v-model=\"searchQuery\" \r\n          class=\"form-control form-control-sm\" \r\n          style=\"width: 250px;\"\r\n          placeholder=\"Search work carried out...\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Reports Displayed as Cards -->\r\n    <div class=\"row mt-4\">\r\n      <div\r\n        v-for=\"(report) in filteredSiteWorkReport \"\r\n        :key=\"report.id\"\r\n        class=\"col-12 col-md-6 mb-4\"\r\n      >\r\n        <div class=\"card shadow\">\r\n          <div class=\"card-body\">\r\n            <div class=\"d-flex justify-content-between align-items-center\">\r\n              <h5 class=\"card-title text-dark fw-bold text-start mb-0\">\r\n                {{ report?.report_name || 'Untitled Report' }}{{ report?.description ? `(${report?.description})` : '' }} {{ report?.date }}\r\n              </h5>\r\n            </div>\r\n\r\n\r\n\r\n            <div class = \"my-4\">\r\n            <p class=\"text-muted mb-1 text-start\"><strong>Supervisor:</strong> {{ report.supervisor?.name }}</p>\r\n           <p v-if=\"report.remark\" class=\"text-muted mb-1 text-start mt-3\"><strong>Remark:</strong> {{ report.remark }}</p>\r\n\r\n            <div class=\"panel p-0 mt-3\">\r\n         <div class=\"custom-table table3 mt-3\">\r\n  <v-client-table \r\n    :data=\"report.activities\" \r\n    :columns=\"activity_columns\" \r\n    :options=\"table_option\">\r\n  </v-client-table>\r\n</div>\r\n            </div>\r\n\r\n</div>\r\n\r\n\r\n<!-- Attachments Section -->\r\n<div class=\"row mt-3\" v-if=\"report.attachments && report.attachments.length > 0\">\r\n  <div class=\"col-12\">\r\n    <h6 class=\"text-start fw-bold mb-3\">Activity Attachments</h6>\r\n    <div class=\"row g-3\">\r\n      <div \r\n  v-for=\"attachment in report.attachments\" \r\n  :key=\"attachment.id\"\r\n  :class=\"report.attachments.length > 6 ? 'col-md-3 col-sm-6' : report.attachments.length > 4 ? 'col-md-4 col-sm-6' : 'col-md-6 col-sm-6'\"\r\n>\r\n        <div class=\"card shadow-sm h-100\">\r\n  <div class=\"card-body p-2\">\r\n    <div class=\"attachment-preview mb-2\" style=\"height: 150px; overflow: hidden; border-radius: 9px; display: flex; align-items: center; justify-content: center; background-color: #f8f9fa;\">\r\n      <img \r\n        :src=\"`${baseURL}/${attachment.file_path}`\" \r\n        :alt=\"attachment.description\"\r\n        style=\"max-width: 100%; max-height: 100%; object-fit: contain; cursor: pointer;\"\r\n        @click=\"viewAttachment(`${baseURL}/${attachment.file_path}`, attachment)\"\r\n        data-bs-toggle=\"modal\" \r\n        data-bs-target=\"#view-attachment-modal\"\r\n      >\r\n    </div>\r\n    <div class=\"d-flex justify-content-between align-items-center\">\r\n      <p class=\"mb-1 small text-muted\">\r\n        <strong>{{ attachment.description || ' ' }}</strong>\r\n      </p>\r\n      \r\n    </div>\r\n  </div>\r\n</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n            <!-- Footer Actions -->\r\n<div class=\"card-footer bg-transparent border-0 d-flex justify-content-between\">\r\n  \r\n    </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  \r\n</div>\r\n        </div>\r\n\r\n         <!-- analysis starts -->\r\n                   <div\r\n          class=\"tab-pane fade\"\r\n          id=\"analysis\"\r\n          role=\"tabpanel\"\r\n          aria-labelledby=\"analysis-tab\"\r\n        >\r\n        <div class=\"d-flex flex-column align-items-center mb-4\">\r\n        <nav>\r\n          <div class=\"nav nav-tabs \" id=\"nav-tab\" role=\"tablist\">\r\n      <button\r\n  class=\"nav-link cost-nav\"\r\n  :class=\"{ active: selectedCategory === 0 }\"\r\n  @click=\"selectedCategory = 0; getCosts(0)\"\r\n>\r\n  ALL COSTS\r\n</button>\r\n\r\n<button\r\n  v-for=\"category in cost_categories\"\r\n  :key=\"category.id\"\r\n  class=\"nav-link cost-nav\"\r\n  :class=\"{ active: selectedCategory === category.id }\"\r\n  @click=\"selectedCategory = category.id; getCosts(category.id)\"\r\n>\r\n  {{ category.name }}\r\n</button>\r\n\r\n          </div>\r\n        </nav>\r\n\r\n        <div class=\"tab-content\" id=\"nav-tabContent\">\r\n          <div \r\n            v-for=\"(category, index) in cost_categories\" \r\n            :key=\"category.id\"\r\n            class=\"tab-pane fade\"\r\n            :class=\"{ 'show active': index === 0 }\"\r\n            :id=\"`nav-category-${category.id}`\"\r\n            role=\"tabpanel\"\r\n            :aria-labelledby=\"`nav-category-${category.id}-tab`\"\r\n            tabindex=\"0\"\r\n          >\r\n       <h5 class=\"mt-3\">\r\n  {{ selectedCategory === 0\r\n    ? 'ALL COSTS'\r\n    : cost_categories.find(c => c.id === selectedCategory)?.name\r\n  }}\r\n</h5>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"loading\" v-html=\"waitIndicator()\"></div>\r\n   \r\n\r\n</div>\r\n      <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\" style=\"max-height: 600px; overflow-y: auto;\">\r\n                        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n                        <v-client-table v-else :data=\"costs\" :columns=\"cost_columns\" :options=\"table_option\" >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n\r\n  <a  href=\"javascript:void(0)\" class=\"text-success\" title=\"Edit\" \r\n     @click=\"openEditModal(props.row)\" data-bs-toggle=\"modal\" \r\n     :data-bs-target=\"'#edit-user-modal'\">\r\n   <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-primary\"\r\n                                    >\r\n                                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                    </svg>\r\n  </a>\r\n\r\n</template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n\r\n         <!-- analysis ends -->\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <!-- project tab ends -->\r\n  </div>\r\n  \r\n</div>\r\n\r\n\r\n\r\n <!-- projects list ends -->\r\n\r\n   <!-- view  attachment starts -->\r\n<div class=\"modal fade mymodal\" id=\"view-attachment-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"attachmentModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-fullscreen\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"attachmentModalLabel\">Attachment</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n        <div class=\"modal-body p-0\">\r\n  <div class=\"attachment-wrapper\">\r\n    <img \r\n      v-if=\"selectedAttachment\" \r\n      :src=\"selectedAttachment\" \r\n      alt=\"Attachment\"\r\n      class=\"attachment-img\"\r\n      :style=\"{ transform: `rotate(${rotationDegree}deg)` }\"\r\n    >\r\n  </div>\r\n</div>\r\n        <div class=\"modal-footer\">\r\n               <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" class=\"bi bi-repeat\" viewBox=\"0 0 16 16\" @click=\"rotateImage\">\r\n  <path d=\"M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z\"/>\r\n</svg>\r\n          <button type=\"button\" class=\"btn btn-danger ms-4\" data-bs-dismiss=\"modal\">Close</button>\r\n        </div>\r\n     \r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- view attachment ends -->\r\n\r\n <!-- tab ends -->\r\n                    <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n    </div>\r\n\r\n  <!-- assign budget modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"assign-budget-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"assignBudgetModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"assignBudgetModalLabel\">Assign Budget for Ref no.: {{ requisition_item.approval_id }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"assignBudget()\">\r\n        <div class=\"modal-body\">\r\n\r\n\r\n            <!-- Item Info -->\r\n            <div class=\"mb-4\" v-if=\"requisition_item\">\r\n              <h5 class=\"mb-3\">Item Information</h5>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-4 mt-3\">\r\n                  <p class=\"mb-3\" style=\"font-size: 1.05rem;\"><strong>Item:</strong> {{ requisition_item.item || 'N/A' }}</p>\r\n                 <p class=\"mb-3\" style=\"font-size: 1.05rem;\"><strong>Cost:</strong> {{ requisition_item.cost || 'N/A' }}</p>\r\n                </div>\r\n                <div class=\"col-md-4 mt-3\">\r\n                  <p class=\"mb-3\" style=\"font-size: 1.05rem;\"><strong>Quantity:</strong> {{ requisition_item.quantity || 'N/A' }}</p>\r\n                  <p class=\"mb-3\" style=\"font-size: 1.05rem;\"><strong>Description:</strong> {{ requisition_item.description || '--' }}</p>\r\n                </div>\r\n                <div class=\"col-md-4 mt-3\">\r\n                  <p class=\"mb-3\" style=\"font-size: 1.05rem;\"><strong>Rate:</strong> {{ requisition_item.rate || 'N/A' }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n\r\n          \r\n            <div class=\"row mb-3\">\r\n              <div class=\"col-md-6\">\r\n                  <label class=\"form-label small\">Select A Budget</label>\r\n                  <multiselect\r\n                    v-model=\"budget\"\r\n                    :options=\"budgets\"\r\n                    placeholder=\"Select A Budget\"\r\n                    :searchable=\"true\"\r\n                    label=\"name\"\r\n                    :allow-empty=\"false\"\r\n                  />\r\n                </div>\r\n\r\n                <div class=\"col-md-6\" v-if=\"budget\">\r\n                  <label class=\"form-label small\">Select An Item</label>\r\n                  <multiselect\r\n                    v-model=\"budget_item\"\r\n                    :options=\"budgetItems\"\r\n                    placeholder=\"Select An Item\"\r\n                    :searchable=\"true\"\r\n                    label=\"name\"\r\n                    :allow-empty=\"false\"\r\n                  />\r\n                </div>\r\n\r\n                <div class=\"col-md-12\" v-if=\"budget_item\">\r\n                  <label class=\"form-label small\">Select Description</label>\r\n                  <multiselect\r\n                    v-model=\"budget_item_description\"\r\n                    :options=\"budgetItemDescriptions\"\r\n                    placeholder=\"Select An Option\"\r\n                    :searchable=\"true\"\r\n                    label=\"name\"\r\n                    :allow-empty=\"false\"\r\n                  />\r\n                </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\" id=\"close_assign_budget\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"Assigning\">\r\n            <span v-if=\"Assigning\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Assign\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n    <!-- assign budget modal ends -->\r\n\r\n<!-- view budget item description consumption modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"view-description-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"viewDescriptionModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-fullscreen\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"viewDescriptionModalLabel\">\r\n          Budget Item Description Consumption for {{ selectedDescription?.name || 'N/A' }}\r\n        </h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n        <div class=\"modal-body\">\r\n          <!-- Budget and Project Information -->\r\n          <table class=\"table table-bordered table-responsive mb-3\">\r\n            <thead>\r\n              <tr>\r\n                <th colspan=\"8\" class=\"bg-light text-center text-dark fs-6\">Budget Details</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <th>Project:</th>\r\n                <td>{{ selectedProject?.short_name || '--' }}</td>\r\n                <th>Budget Name:</th>\r\n                <td>{{ selectedDescription?.budget_item?.budget?.name || '--' }}</td>\r\n                <th>Budget Item:</th>\r\n                <td>{{ selectedDescription?.budget_item?.name || '--' }}</td>\r\n                <th>Description:</th>\r\n                <td>{{ selectedDescription?.name || '--' }}</td>\r\n              </tr>\r\n             \r\n              <tr>\r\n                <th>Unit:</th>\r\n                <td>{{ selectedDescription?.units || '--' }}</td>\r\n                <th>Quantity:</th>\r\n                <td>{{ formatNumber(selectedDescription?.quantity) || '--' }}</td>\r\n                <th>Rate:</th>\r\n                <td>{{ formatNumber(selectedDescription?.cost) || '--' }} </td>\r\n                <th>Total Cost:</th>\r\n                <td>{{ formatNumber(selectedDescription?.total_budget_item_description_cost) || '--' }} </td>\r\n              </tr>\r\n              <tr>\r\n                <th>Used Quantity:</th>\r\n                <td>{{ selectedDescription?.cost && selectedDescription?.used_cost ? (selectedDescription.used_cost / selectedDescription.cost).toFixed(2) : '--' }}</td>\r\n                <th>Used Cost:</th>\r\n                <td>{{ formatNumber(selectedDescription?.used_cost) || '--' }} </td>\r\n                <th>Balance:</th>\r\n                <td colspan=\"3\">{{ formatNumber((selectedDescription?.total_budget_item_description_cost || 0) - (selectedDescription?.used_cost || 0)) || '--' }} </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                      <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n                        <v-client-table v-else :data=\"consumptions\" :columns=\"consumptionsColumns\" :options=\"table_option\">\r\n                            <template #actions=\"props\">\r\n                             <router-link :to=\"`/approval/${props.row.approval_id}`\">\r\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-arrow-right\" style=\"cursor: pointer;\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8\"/>\r\n</svg>\r\n                                </router-link>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeViewModal()\">Close</button>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- view budget item description consumption modal starts -->\r\n\r\n\r\n</template>\r\n<script setup>\r\n    import { onMounted, ref,watch ,computed} from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\n    import { inject } from 'vue';\r\n    import Multiselect from \"@suadelabs/vue3-multiselect\";\r\n    import \"@suadelabs/vue3-multiselect/dist/vue3-multiselect.css\";\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');    \r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const formatNumber = inject('formatNumber')\r\n    const waitIndicator =inject('waitIndicator')\r\n    const formatDate = inject('formatDate')\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['Sno', 'item','description','quantity','rate','cost','approval_id','actions']);\r\n    const activity_columns = ref(['Sno', 'activity','unit','quantity']);\r\n    const descriptionsColumns = ref(['Sno', 'name','units','quantity','quantity_2','rate','cost','used_cost','balance','actions']);\r\n    const consumptionsColumns = ref(['SNo', 'approved_by','description','cost','date','actions']);\r\n    const items = ref([]);\r\n    const selectedProject = ref(null);\r\n     const baseURL = 'https://bushman.ink';\r\n     const searchQuery = ref('');\r\n    const selectProject = (project) => {\r\n        selectedProject.value = project;\r\n        getBoq(project.id)\r\n        getBudgets()\r\n        getSiteWorkReport()\r\n    };\r\nconst rotationDegree = ref(0); \r\nconst rotateImage = () => {\r\n  rotationDegree.value += 90; \r\n};\r\n    const table_option = ref({\r\n        perPage: 100,\r\n        perPageValues: [100, 200 ,500],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'service_name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n  const siteWorkReport = ref([])\r\n   const getSiteWorkReport = async () => {\r\n   siteWorkReport.value = []\r\n  loading.value = true;\r\n  try {\r\n    const response = await axiosInstance.get(`work-carried-outs?project_id=${selectedProject.value.id}`);\r\n    siteWorkReport.value = response.data.map((item, index) => ({\r\n      ...item,\r\n      Sno: index + 1,\r\n      date: formatDate(item.date || item.created_at),\r\n      raw_date: item.created_at,\r\n      activities: item.activities.map((activity, actIndex) => ({\r\n        ...activity,\r\n        Sno: actIndex + 1,\r\n        unit: activity.unit?.short_name  || 'N/A'\r\n      }))\r\n    }));\r\n  } catch (error) {\r\n    console.log(error);\r\n    showError(error.message);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n\r\n\r\n        const filteredSiteWorkReport = computed(() => {\r\n  if (!searchQuery.value) {\r\n    return siteWorkReport.value;\r\n  }\r\n  return siteWorkReport.value.filter(report => {\r\n    const query = searchQuery.value.toLowerCase();\r\n    return (\r\n      report.report_name?.toLowerCase().includes(query) ||\r\n      report.description?.toLowerCase().includes(query) ||\r\n      report.supervisor?.name?.toLowerCase().includes(query) ||\r\n      report.date?.includes(query) ||\r\n      report.remark?.toLowerCase().includes(query) ||\r\n      report.activities?.some(activity => \r\n        activity.activity?.toLowerCase().includes(query) ||\r\n        activity.unit?.short_name?.toLowerCase().includes(query)\r\n      )\r\n    );\r\n  });\r\n});\r\n\r\n\r\n    const getProjects = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/projects').then((response) => {\r\n            items.value = response.data\r\n            .filter(item => item.contracted === 'YES')\r\n            .map((item, index) => ({\r\n                ...item,\r\n                SNo: index + 1,\r\n                id: item.id,\r\n                project_cost:item.project_cost.toLocaleString()+\"/=\",\r\n            }));\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n\r\n    const ipc = ref(1)\r\n    const boq = ref([]);\r\n    const ipc_count = ref('')\r\n    const getBoq = async (id) => {\r\n        loading.value = true\r\n    try {\r\n        const response = await axiosInstance.get(`/boq?project_id=${id}&ipc_no=${ipc.value}`);\r\n        boq.value = response.data.data\r\n        ipc_count.value = response.data.ipc_count\r\n    } catch (error) {\r\n     showError(error.message)\r\n     console.log(error)\r\n    }finally{\r\n        loading.value = false\r\n    }\r\n};\r\n\r\n    const loading = ref('')\r\n    const budgets = ref([])\r\n    const getBudgets = async()=>{\r\n      getUnBudgeted()\r\n      budgets.value = []\r\n       loading.value = true\r\n        try{\r\n           const response = await axiosInstance.get(`budgets?project_id=${selectedProject.value.id}`)\r\n           budgets.value = response.data\r\n        }catch(error){\r\n          showError(error.message)\r\n          console.log(error)\r\n        }finally{\r\n          loading.value = false\r\n        }\r\n\r\n        getCosts(0)\r\n    }\r\n\r\n     const unbudgeted = ref([])\r\n     const unbudgetedItems = ref([])\r\n    const getUnBudgeted = async()=>{\r\n       unbudgeted.value = []\r\n       console.log(unbudgeted.value)\r\n       loading.value = true\r\n        try{\r\n           const response = await axiosInstance.get(`unbudgeted-costs?project_id=${selectedProject.value.id}`)\r\n           unbudgeted.value = response.data\r\n           unbudgetedItems.value = response.data.items.map((item,index)=>({\r\n            ...item,\r\n            Sno : index + 1,\r\n            requisition_item_id : item.requisition_item_id,  \r\n            item_id : item.item_id,\r\n            item : item.remark,\r\n            rate : formatNumber(item.rate),\r\n            cost : formatNumber(item.cost)\r\n           }))\r\n           \r\n        }catch(error){\r\n          showError(error.message)\r\n          console.log(error)\r\n        }finally{\r\n          loading.value = false\r\n        }\r\n    }\r\n\r\n        const mobileView = ref(false)\r\n    const toggleMobileView = () => {\r\n        if (window.innerWidth < 991) {\r\n           mobileView.value = true \r\n        }\r\n    };\r\n\r\n        watch(ipc, (newVal) => {\r\n    if (newVal) {\r\n        getBoq(selectedProject.value.id)\r\n    }\r\n});\r\n\r\nconst selectedAttachment = ref('');\r\nconst selectedAttachmentData = ref(null);\r\nconst viewAttachment = (attachmentUrl, attachment) => {\r\n  selectedAttachment.value = attachmentUrl;\r\n  selectedAttachmentData.value = attachment; // Store attachment data\r\n};\r\n\r\nconst budget = ref(\"\");\r\nconst budgetItems = ref([]);\r\nconst budget_item = ref(\"\");\r\nconst budgetItemDescriptions = ref([]);\r\nconst budget_item_description = ref(\"\");\r\n\r\nwatch(budget, (newVal) => {\r\n  if (newVal) budgetItems.value = newVal.items;\r\n});\r\nwatch(budget_item, (newVal) => {\r\n  if (newVal) budgetItemDescriptions.value = newVal.descriptions;\r\n});\r\n\r\nconst Assigning = ref(false)\r\nconst assignBudget = async () => {\r\n    Assigning.value = true;\r\n     const payload = {\r\n        item_id:budget_item_description.value.id,\r\n        remarker_id:JSON.parse(localStorage.getItem('user')).id,\r\n        description: 'From LPO No. ' + requisition_item.value.approval_id + ' for '+ requisition_item.value.description,\r\n        date: new Date().toISOString().split('T')[0],\r\n        cost: parseFloat(requisition_item.value.cost.replace(/[,/=]/g, '')),\r\n      };\r\n    try {\r\n      await axiosInstance.put(`/assign-requisition-type-items/${requisition_item.value.requisition_item_id}`, payload);\r\n      document.getElementById('close_assign_budget').click();\r\n      showMessage(\"Budget assigned successfully\");\r\n      getReactiveUnBudgeted()\r\n      getReactiveBudgets()\r\n      closeEditModal();\r\n    } catch (error) {\r\n      showError(error.message);\r\n      console.log(error)\r\n    } finally {\r\n      Assigning.value = false;\r\n    }\r\n  };\r\n\r\n  const requisition_item = ref('')\r\n  const openAssignBudgetModal = (row) => {\r\n    requisition_item.value = row;\r\n};\r\n\r\nconst closeEditModal = () => {\r\n  budget.value = \"\";\r\n  budget_item.value = \"\";\r\n  budget_item_description.value = \"\";\r\n};\r\n\r\nconst getReactiveUnBudgeted = async()=>{\r\n       unbudgeted.value = []\r\n        try{\r\n           const response = await axiosInstance.get(`unbudgeted-costs?project_id=${selectedProject.value.id}`)\r\n           unbudgeted.value = response.data\r\n           unbudgetedItems.value = response.data.items.map((item,index)=>({\r\n            ...item,\r\n            Sno : index + 1,\r\n            requisition_item_id : item.requisition_item_id,  \r\n            item_id : item.item_id,\r\n            item : item.remark,\r\n            rate : formatNumber(item.rate),\r\n            cost : formatNumber(item.cost)\r\n           }))\r\n           \r\n        }catch(error){\r\n          showError(error.message)\r\n          console.log(error)\r\n        }\r\n    \r\n}\r\n\r\n  const getReactiveBudgets = async()=>{\r\n      budgets.value = []\r\n        try{\r\n           const response = await axiosInstance.get(`budgets?project_id=${selectedProject.value.id}`)\r\n           budgets.value = response.data\r\n        }catch(error){\r\n          showError(error.message)\r\n          console.log(error)\r\n        }finally{\r\n        }\r\n    }\r\n\r\n      const consumptions = ref([])\r\n     const getBudgetConsumption  = async () => {\r\n      loading_spinner.value = true;\r\n        try {\r\n            const response = await axiosInstance.get(`budget-remarks?budget_item_description_id=${selectedDescription.value.id}`);\r\n            consumptions.value = response.data.map((item, index) => ({\r\n                ...item,\r\n            SNo: index + 1,\r\n            date: formatDate(item.date),\r\n            description: item.description,\r\n             cost: formatNumber(item.cost),\r\n             approved_by: item.remarker?.name,\r\n            remarker_email: item.remarker?.email,\r\n            }));\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }finally{\r\n            loading_spinner.value = false;            \r\n        }\r\n    };\r\n\r\n    const selectedDescription = ref(null);\r\n    const viewDescription = (row) => {\r\n      const budget = budgets.value.find(b => \r\n        b.items?.some(item => \r\n          item.descriptions?.some(desc => desc.id === row.id)\r\n        )\r\n      );\r\n      const budgetItem = budget?.items?.find(item => \r\n        item.descriptions?.some(desc => desc.id === row.id)\r\n      );\r\n      \r\n      selectedDescription.value = {\r\n        ...row,\r\n        budget_item: {\r\n          ...budgetItem,\r\n          budget: budget\r\n        }\r\n      };\r\n      getBudgetConsumption(row);\r\n    };\r\n\r\nconst closeViewModal = () => {\r\n  selectedDescription.value = null;\r\n};\r\n\r\nconst cost_categories = ref([])\r\nconst getCostCategories = async ()=>{\r\n   const response = await axiosInstance.get('cost-categories')\r\n   cost_categories.value = response.data\r\n}\r\n\r\n\r\nconst selectedCategory = ref(0)\r\nconst costs = ref([])\r\nconst cost_columns = ref(['Sno','item','quantity','rate','cost','used_cost'])\r\nconst getCosts = (cost_category_id) => {\r\n  cost_category_id = Number(cost_category_id)\r\n\r\n  costs.value = budgets.value.flatMap(budget =>\r\n    budget.items.flatMap(item =>\r\n      item.descriptions\r\n        .filter(desc => cost_category_id === 0 || desc.cost_category_id === cost_category_id)\r\n        .map((desc, index) => ({\r\n          ...desc,\r\n          Sno: index + 1,\r\n          item: desc.name,\r\n          quantity: (desc.quantity * desc.quantity_2).toLocaleString(),\r\n          rate: formatNumber(desc.cost),\r\n          cost: formatNumber(desc.quantity * desc.quantity_2 * desc.cost),\r\n          used_cost : formatNumber(desc.used_cost)\r\n        }))\r\n    )\r\n  )\r\n}\r\n\r\n\r\n    onMounted(() => {\r\n        getProjects();\r\n        toggleMobileView()\r\n        getCostCategories()\r\n        document.getElementById('project-list').click()\r\n    });\r\n</script>\r\n\r\n<style scoped>\r\n.accordion-button:focus {\r\n    box-shadow: none !important;\r\n    border-color: transparent !important;\r\n    outline: none !important;\r\n}\r\n\r\n.accordion-button {\r\n    border-bottom: 1px solid #ddd !important;\r\n}\r\n\r\n\r\n.attachment-wrapper {\r\n  width: 100%;\r\n  height: 100%; \r\n  overflow: hidden;\r\n}\r\n\r\n.attachment-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;   \r\n  object-position: center;\r\n  object-fit: contain;\r\n}\r\n\r\n.cost-nav {\r\n  color: rgb(2, 88, 75);\r\n}\r\n\r\n.cost-nav.active {\r\n  background-color: rgba(65, 119, 148, 0.742);\r\n  color: white;\r\n}\r\n\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=423795c4&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-423795c4\"]])\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","showMessage","inject","showError","tableShimmer","loadingIndicator","formatNumber","waitIndicator","formatDate","user_permissions","JSON","parse","localStorage","getItem","permissions","loading_spinner","ref","columns","activity_columns","descriptionsColumns","consumptionsColumns","items","selectedProject","searchQuery","selectProject","project","value","getBoq","id","getBudgets","getSiteWorkReport","rotationDegree","rotateImage","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","siteWorkReport","async","loading","response","get","data","map","item","index","Sno","date","created_at","raw_date","activities","activity","actIndex","unit","short_name","error","console","log","message","filteredSiteWorkReport","computed","report","query","toLowerCase","report_name","includes","description","supervisor","name","remark","some","getProjects","then","contracted","SNo","project_cost","toLocaleString","ipc","boq","ipc_count","budgets","getUnBudgeted","getCosts","unbudgeted","unbudgetedItems","requisition_item_id","item_id","rate","cost","mobileView","toggleMobileView","window","innerWidth","watch","newVal","selectedAttachment","selectedAttachmentData","viewAttachment","attachmentUrl","attachment","budget","budgetItems","budget_item","budgetItemDescriptions","budget_item_description","descriptions","Assigning","assignBudget","payload","remarker_id","requisition_item","approval_id","Date","toISOString","split","parseFloat","replace","put","document","getElementById","click","getReactiveUnBudgeted","getReactiveBudgets","closeEditModal","openAssignBudgetModal","row","consumptions","getBudgetConsumption","selectedDescription","approved_by","remarker","remarker_email","email","viewDescription","find","b","desc","budgetItem","closeViewModal","cost_categories","getCostCategories","selectedCategory","costs","cost_columns","cost_category_id","Number","flatMap","quantity","quantity_2","used_cost","onMounted","__exports__"],"sourceRoot":""}