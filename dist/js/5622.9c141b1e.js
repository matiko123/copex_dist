"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5622],{58483:function(e,a,t){t.d(a,{i:function(){return l}});t(26699);function l(e,a){const t=a.toLowerCase().trim();if(!t)return e;const l=e=>null!=e&&("string"===typeof e?e.toLowerCase().includes(t):Array.isArray(e)?e.some(l):"object"===typeof e&&Object.values(e).some(l));return e.filter((e=>l(e)))}},95622:function(e,a,t){t.r(a),t.d(a,{default:function(){return ta}});t(26699);var l=t(66252),s=t(3577),i=t(2262),n=t(49963),u=t(26212),o=t.n(u),r=t(87066),c=t(56296),d=t(58483),v=t(42119);const p={class:"layout-px-spacing"},m=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Requisitions</span></li></ol></nav></div></li></ul>',1),_={class:"d-flex align-items-center justify-content-between mb-3"},b={class:"flex-grow-1 text-center"},g={class:"d-flex"},y={key:0},w={key:1},k={key:2,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},h=(0,l._)("polyline",{points:"3 6 5 6 21 6"},null,-1),f=(0,l._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 \r\n                 1-2-2V6m3 0V4a2 2 0 0 \r\n                 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),q=[h,f],S={key:3,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-check2-circle",viewBox:"0 0 16 16"},H=(0,l._)("path",{d:"M2.5 8a5.5 5.5 0 0 1 \r\n                 8.25-4.764.5.5 \r\n                 0 0 0 .5-.866A6.5 6.5 \r\n                 0 1 0 14.5 8a.5.5 \r\n                 0 0 0-1 0 5.5 5.5 \r\n                 0 1 1-11 0"},null,-1),x=(0,l._)("path",{d:"M15.354 3.354a.5.5 \r\n                 0 0 0-.708-.708L8 \r\n                 9.293 5.354 6.646a.5.5 \r\n                 0 1 0-.708.708l3 3a.5.5 \r\n                 0 0 0 .708 0z"},null,-1),I=[H,x],D=(0,l.Uk)("Issue Note"),U=(0,l._)("span",{class:"input-group-text bg-white border-start-0"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z"})])],-1),C={key:0,class:"d-flex me-4 mt-1"},z=(0,l._)("div",{class:"ms-auto"},null,-1),R=[z],j=["innerHTML"],P={key:0,class:"row layout-top-spacing"},V={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},L={class:"panel p-0"},N={class:"custom-table table3"},M=["onClick"],E=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-info","data-bs-toggle":"modal","data-bs-target":"#requisitionItems"},[(0,l._)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,l._)("circle",{cx:"12",cy:"12",r:"3"})],-1),T=[E],B=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-arrow-bar-right",viewBox:"0 0 16 16"},[(0,l._)("path",{"fill-rule":"evenodd",d:"M6 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L12.293 7.5H6.5A.5.5 0 0 0 6 8m-2.5 7a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5"})],-1),Y={class:"modal fade mymodal",id:"requisitionItems","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},A={class:"modal-dialog modal-fullscreen"},O={class:"modal-content"},$={class:"modal-header"},W=(0,l._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Requisition Items",-1),F={class:"modal-body"},Q={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},J={class:"panel p-0"},G={class:"custom-table table3"},K={class:"table table-bordered table-striped"},Z=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Requester"),(0,l._)("th",null,"Date Requested"),(0,l._)("th",null,"Source"),(0,l._)("th",null,"Purpose"),(0,l._)("th",null,"Project"),(0,l._)("th",null,"Status")])],-1),X={key:0},ee={colspan:"5"},ae=(0,l._)("b",null," Brief Description : ",-1),te={key:1},le={colspan:"5"},se=(0,l._)("b",null," Remark : ",-1),ie={class:"mb-2 text-center fw-bold",style:{"font-size":"x-large"}},ne=(0,l._)("strong",null,"Total Cost: ",-1),ue={key:0,class:"mb-2 text-center"},oe={class:"btn-group mb-3"},re=["disabled"],ce=["disabled"],de=["disabled"],ve=["disabled"],pe={key:0,class:"mb-2"},me={key:1,class:"input-group"},_e=["placeholder"],be=["disabled"],ge=["innerHTML"],ye={key:1},we={class:"row layout-top-spacing"},ke={class:"col-12 d-flex align-items-center justify-content-between"},he={key:0,class:"d-flex align-items-center"},fe=["disabled"],qe={key:0,class:"spinner-border text-white",role:"status"},Se={key:1},He={key:0,class:"mt-2 col-xl-12 col-lg-12 col-sm-12 layout-spacing"},xe={class:"panel p-0"},Ie={class:"custom-table table3"},De={class:"table table-bordered table-striped"},Ue=(0,l._)("th",null,"Sno",-1),Ce=(0,l._)("th",null,"Item Requested",-1),ze=(0,l._)("th",null,"Description",-1),Re=(0,l._)("th",null,"Quantity",-1),je={key:0},Pe={key:1},Ve={key:0},Le=["placeholder","onUpdate:modelValue","max","min","onInput"],Ne={key:1},Me=(0,l._)("br",null,null,-1),Ee={key:2},Te={key:1},Be={type:"number",class:"form-control"},Ye={class:"panel p-0"},Ae={class:"custom-table table3"},Oe={key:2,class:"col-xl-6 col-lg-12 col-sm-12 layout-spacing"},$e={class:"panel p-3 position-relative"},We=["href"],Fe=(0,l._)("h4",{class:"text-center"},"Proforma Invoice",-1),Qe=["src"],Je={key:3,class:"col-xl-6 col-lg-12 col-sm-12 layout-spacing"},Ge={class:"panel p-3 position-relative"},Ke=["href"],Ze=(0,l._)("h4",{class:"text-center"},"Subcontractor's Agreement",-1),Xe=["src"];var ea={setup(e){(0,c.j)({title:"Requisition Group"});const a=r.Z.create({baseURL:"https://bushman.ink/api/v1/"}),t=(0,i.iH)(!1),u=((0,v.tv)(),(0,v.yj)()),h=JSON.parse(localStorage.getItem("user")).permissions,f=(0,i.iH)([]),H=(0,i.iH)(""),x=(0,i.iH)(!1),z=(0,i.iH)(""),E=(0,l.f3)("tableShimmer"),ea=(0,l.f3)("formatNumber"),aa=(0,l.f3)("loadingSpinner"),ta=(0,i.iH)(""),la=(0,i.iH)(""),sa=(0,i.iH)(""),ia=(0,i.iH)(""),na=(0,i.iH)(),ua=(0,i.iH)(""),oa=(0,i.iH)([]),ra=(0,i.iH)(0),ca=(0,i.iH)([]),da=(0,i.iH)(!1),va=(0,i.iH)(["sno","ref_no","requester","purpose","type","project","date","cost","status","remark","actions"]),pa=(0,i.iH)(!1),ma=(0,l.f3)("showMessage"),_a=(0,l.f3)("showError"),ba=(0,i.iH)(""),ga=(0,i.iH)([]),ya=(0,i.iH)(""),wa=(0,l.Fl)((()=>h.includes("is_md")?t.value?(0,d.i)(ca.value,ya.value).filter((e=>["Rejected","On Hold","Remarked"].includes(e.status?.key))):(0,d.i)(ca.value,ya.value).filter((e=>["Unapproved","approved","Issued","Partial Issued"].includes(e.status?.key))):(0,d.i)(ca.value,ya.value))),ka=(0,i.iH)([]),ha=async()=>{const e=await a.get("machines");ka.value=e.data.map((e=>({...e,name:e.name+" - "+e.type_name})))},fa=(0,i.iH)([]),qa=(0,i.iH)(""),Sa=async()=>{const e=await a.get("projects");fa.value=e.data},Ha=(0,i.iH)([]),xa=(0,i.iH)(""),Ia=async e=>{const t=await a.get(`budgets?project_id=${e}`);Ha.value=t.data.filter((e=>"closed"===e.status))};(0,l.YP)(qa,(e=>{e&&Ia(e.id)}));const Da=(0,i.iH)([]),Ua=(0,i.iH)("");(0,l.YP)(xa,(e=>{e&&(Da.value=e.items)}));const Ca=(0,i.iH)([]),za=(0,i.iH)(""),Ra=(0,i.iH)(""),ja=(0,i.iH)("");(0,l.YP)(Ua,(e=>{e&&(Ca.value=e.descriptions,la.value=e.name)})),(0,l.YP)(za,(e=>{e&&(ja.value=e.quantity*e.quantity_2,Ra.value=e.quantity*e.quantity_2*e.cost-e.used_cost,ra.value=e.id,Ya.value=e.name,ua.value=e.units)})),(0,l.YP)((()=>u.params.status_id),(e=>{da.value=!0,Za()}));const Pa=async()=>{const e=await a.get("units");ga.value=e.data},Va=async e=>{x.value=!0;const t={status_id:ta.value,remark:na.value,...3==ta.value&&6!=Ka&&{approval:{approval_group_id:e.approval_group_id,source:"requisition",source_id:e.id,requester_id:JSON.parse(localStorage.getItem("user")).id,items:e.items}}};try{await a.put(`requisitions/${e.id}`,t);Za(),ma("Saved Successfully"),document.getElementById("close-issue-modal").click()}catch(l){console.log(l),_a(l.message)}finally{x.value=!1}},La=async()=>{x.value=!0;const e={issueData:{requisition_id:Qa.value.id,issuer_id:JSON.parse(localStorage.getItem("user")).id,destination_store_id:ba.value.id,source_store_id:tt.value.id,remark:"SENT TO "+ba.value.name},issueItems:Aa.value.filter((e=>Number(e.issued_quantity)>0)).map((e=>({requisition_item_id:e.id,store_item_id:e.store_item.id,quantity:e.issued_quantity})))};try{await a.post("good-issue-notes",e);ma("Issued to "+ba.value.name),Za(),document.getElementById("close-issue-modal").click()}catch(t){_a(t.message),console.log(t)}finally{x.value=!1}},Na=(0,i.iH)({perPage:50,perPageValues:[50,100,200,500],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","role_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),Ma=(0,i.iH)([]),Ea=async e=>{const t=await a.get(e);Ma.value=t.data.map(((e,a)=>({...e,SNo:a+1,name:e.name+(e.description?" - "+e.description:""),unit:e.unit??"---"})))},Ta=(0,i.iH)([]),Ba=async()=>{const e=await a.get("/labour-types");Ta.value=e.data};(0,l.YP)(H,(e=>{"spares"===e&&Ea("get-spares"),"labour"===e&&Ba(),"construction materials"===e&&Ea("get-materials")})),(0,l.YP)(la,(e=>{"labour"===H.value&&e&&(ia.value=e.rate)}));const Ya=(0,i.iH)(""),Aa=(0,i.iH)([]),Oa=(0,i.iH)(["Sno","item","description","units","quantity","rate","total"]),$a=()=>{Aa.value=[],z.value="",na.value="",ta.value="",xa.value="",Ua.value="",qa.value="",ua.value="",la.value="",sa.value="",ia.value="",Ya.value="",H.value="",za.value="",Ha.value=[],Da.value=[],Ca.value=[],tt.value="",ba.value=""},Wa=(0,i.iH)(""),Fa=(0,i.iH)(""),Qa=(0,i.iH)(""),Ja=e=>{Qa.value=e,oa.value=e.remarks,Wa.value=e.attachment,Fa.value=e.subcontractor?.attachment?"https://copex.trustdigital.space/"+e.subcontractor.attachment:null,Aa.value=e.items.map(((e,a)=>({...e,Sno:a+1,item:e.remark,description:e.description,rate:Number(e.rate).toLocaleString()+"/=",total:(e.quantity*e.rate).toLocaleString()+"/=",issued_quantity:"",store_item:""})))},Ga=u.params.status_id,Ka=u.params.approval_group_id,Za=()=>{let e="requisitions";e+=Ga&&"all"!==Ga?`?status_id=${Ga}&approval_group_id=${Ka}`:`?approval_group_id=${Ka}`,a.get(e).then((e=>{ca.value=e.data.map(((e,a)=>{f.value.find((a=>a.id===e.requisition_type_id));return{...e,ref_no:e.id,Sno:a+1,requester_email:e.requester_email,type:e.type,purpose:e.approval_group,attachment:e.attachment?"https://copex.trustdigital.space/"+e.attachment:null,status_id:e.status.id,cost:ea(e.items.reduce(((e,a)=>e+a.quantity*a.rate),0)),status:(()=>{const a=e.items.reduce(((e,a)=>e+Number(a.quantity)),0);return"Issued"===e.status&&Number(e.issued_items)<a?{key:"Partial Issued",class:"warning"}:{key:e.status,class:e.status_color}})()}})),da.value=!1})).catch((e=>{_a(e.message),da.value=!1}))},Xa=(0,i.iH)([]),et=async e=>{const t=await a.get(`get-store-items?store_id=${e}`);Xa.value=t.data},at=(0,i.iH)(""),tt=(0,i.iH)(""),lt=async()=>{const e=await a.get("stores");at.value=e.data.map((e=>({...e,name:e.project+" - "+e.name})))};(0,l.YP)(tt,(e=>{Xa.value=[""],et(e.id)}));return(0,l.bv)((async()=>{da.value=!0,Za(),Pa(),lt(),ha(),Sa()})),(e,a)=>{const u=(0,l.up)("router-link"),r=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)("div",p,[m,(0,l._)("div",_,[(0,l._)("div",b,[(0,l._)("h3",null,(0,s.zw)(6==(0,i.SU)(Ka)?"STORE ISSUING REQUISITION":"REQUISITIONS"),1)]),(0,l._)("div",g,[(0,i.SU)(h).includes("is_md")?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:(0,s.C_)(["me-2 btn d-flex align-items-center",t.value?"btn-primary":"btn-outline-danger"]),onClick:a[0]||(a[0]=e=>t.value=!t.value)},[t.value?((0,l.wg)(),(0,l.iD)("span",w,"All")):((0,l.wg)(),(0,l.iD)("span",y,"Trashed")),t.value?((0,l.wg)(),(0,l.iD)("svg",S,I)):((0,l.wg)(),(0,l.iD)("svg",k,q))],2)):(0,l.kq)("",!0),(0,l.Wm)(u,{to:"/good-issue-notes",class:"btn btn-primary"},{default:(0,l.w5)((()=>[D])),_:1})])]),(0,l._)("form",{onSubmit:a[2]||(a[2]=(0,n.iM)((()=>{}),["prevent"])),class:"input-group container"},[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":a[1]||(a[1]=e=>ya.value=e)},null,512),[[n.nr,ya.value]]),U],32),(0,i.SU)(h).includes("can_create_requisition")?((0,l.wg)(),(0,l.iD)("div",C,R)):(0,l.kq)("",!0),da.value?((0,l.wg)(),(0,l.iD)("div",{key:1,innerHTML:(0,i.SU)(E)()},null,8,j)):((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[pa.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",P,[(0,l._)("div",V,[(0,l._)("div",L,[(0,l._)("div",N,[(0,l.Wm)(r,{data:(0,i.SU)(wa),columns:va.value,options:Na.value},{status:(0,l.w5)((e=>[(0,l._)("span",{class:(0,s.C_)(["badge inv-status","badge-"+e.row.status.class])},(0,s.zw)(e.row.status.key),3)])),sno:(0,l.w5)((({index:e})=>[(0,l.Uk)((0,s.zw)(e+0),1)])),actions:(0,l.w5)((e=>[(0,l._)("a",{href:"javascript:void(0);",title:"View","data-bs-toggle":"modal","data-bs-target":"#view_requisition",onClick:a=>Ja(e.row)},T,8,M),"Issued"===e.row.status.key||"Partial Issued"===e.row.status.key?((0,l.wg)(),(0,l.j4)(u,{key:0,to:`/good-issue-notes/${e.row.id}`},{default:(0,l.w5)((()=>[B])),_:2},1032,["to"])):(0,l.kq)("",!0)])),_:1},8,["data","columns","options"])])])])]))],64)),(0,l._)("div",Y,[(0,l._)("div",A,[(0,l._)("div",O,[(0,l._)("div",$,[W,(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:a[3]||(a[3]=e=>$a()),id:"close-issue-modal"})]),(0,l._)("div",F,[(0,l._)("div",Q,[(0,l._)("div",J,[(0,l._)("div",G,[(0,l._)("table",K,[Z,(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,(0,s.zw)(Qa.value.requester),1),(0,l._)("td",null,(0,s.zw)(Qa.value.date),1),(0,l._)("td",null,(0,s.zw)(Qa.value.type),1),(0,l._)("td",null,(0,s.zw)(Qa.value.purpose),1),(0,l._)("td",null,(0,s.zw)(Qa.value.project),1),(0,l._)("td",null,[(0,l._)("span",{class:(0,s.C_)(["mb-0 badge",`badge-${Qa.value.status?.class}`])},(0,s.zw)(Qa.value.status?.key),3)])]),Qa.value.description?((0,l.wg)(),(0,l.iD)("tr",X,[(0,l._)("td",ee,[ae,(0,l.Uk)(" "+(0,s.zw)(Qa.value.description),1)])])):(0,l.kq)("",!0),Qa.value.remark?((0,l.wg)(),(0,l.iD)("tr",te,[(0,l._)("td",le,[se,(0,l.Uk)(" "+(0,s.zw)(Qa.value.remark),1)])])):(0,l.kq)("",!0)])])])])]),(0,l._)("div",ie,[ne,(0,l._)("span",null,(0,s.zw)(Qa.value?.items?.reduce(((e,a)=>{const t=Number(a.quantity)||0,l=Number(a.rate)||0;return e+t*l}),0).toLocaleString()+"/="),1)]),"Unapproved"!==Qa.value.status?.key&&"Remarked"!==Qa.value.status?.key&&"Rejected"!==Qa.value.status?.key||!(0,i.SU)(h).includes("is_md")?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",ue,[(0,l._)("div",oe,[(0,i.SU)(h).includes("is_programmer")?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-secondary me-2",onClick:a[4]||(a[4]=e=>ta.value=2),disabled:x.value},"Unapprove",8,re)):(0,l.kq)("",!0),(0,l._)("button",{class:"btn btn-primary me-2",onClick:a[5]||(a[5]=e=>ta.value=3),disabled:x.value},"Approve",8,ce),(0,l._)("button",{class:"btn btn-danger me-2",onClick:a[6]||(a[6]=e=>ta.value=4),disabled:x.value},"Reject",8,de),(0,l._)("button",{class:"btn btn-info",onClick:a[7]||(a[7]=e=>(ta.value=14,na.value=Qa.value.remark)),disabled:x.value},"Remark",8,ve)]),ta.value?((0,l.wg)(),(0,l.iD)("div",pe,[(0,l._)("span",{class:(0,s.C_)(["badge rounded-pill",{"bg-secondary":2==ta.value,"bg-danger":4==ta.value,"bg-success":3==ta.value,"bg-info":3!=ta.value&&4!=ta.value}]),style:{"font-size":"1rem"}},(0,s.zw)(3==ta.value?"Approve Request":4==ta.value?"Reject Request":2==ta.value?"Unapprove":"Fill Remark"),3)])):(0,l.kq)("",!0),ta.value?((0,l.wg)(),(0,l.iD)("div",me,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:3==ta.value?"Enter Approval Remark":4==ta.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":a[8]||(a[8]=e=>na.value=e)},null,8,_e),[[n.nr,na.value]]),(0,l._)("button",{class:"btn btn-primary",type:"button",disabled:x.value,onClick:a[9]||(a[9]=e=>Va(Qa.value))},[x.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,i.SU)(aa)()},null,8,ge)):((0,l.wg)(),(0,l.iD)("span",ye,"Save"))],8,be)])):(0,l.kq)("",!0)])),(0,l._)("form",{onSubmit:a[12]||(a[12]=(0,n.iM)((e=>La()),["prevent"]))},[(0,l._)("div",we,[(0,l._)("div",ke,["approved"!==Qa.value.status?.key&&"Partial Issued"!==Qa.value.status?.key||!(0,i.SU)(h).includes("can_create_issue_note")?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",he,[(0,l.Wm)((0,i.SU)(o()),{class:"me-2",modelValue:tt.value,"onUpdate:modelValue":a[10]||(a[10]=e=>tt.value=e),placeholder:"Select Source Store",label:"name",options:at.value,style:{width:"300px"},"allow-empty":!1},null,8,["modelValue","options"]),(0,l.Wm)((0,i.SU)(o()),{class:"me-2",modelValue:ba.value,"onUpdate:modelValue":a[11]||(a[11]=e=>ba.value=e),placeholder:"Select Destination Store",label:"name",options:at.value,style:{width:"300px"},"allow-empty":!1},null,8,["modelValue","options"]),tt.value?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"submit",class:"btn btn-primary btn-sm ms-2",disabled:x.value||!ba.value},[x.value?((0,l.wg)(),(0,l.iD)("div",qe)):((0,l.wg)(),(0,l.iD)("div",Se,"Issue"))],8,fe)):(0,l.kq)("",!0)]))]),6==(0,i.SU)(Ka)?((0,l.wg)(),(0,l.iD)("div",He,[(0,l._)("div",xe,[(0,l._)("div",Ie,[(0,l._)("table",De,[(0,l._)("thead",null,[(0,l._)("tr",null,[Ue,Ce,ze,Re,(0,i.SU)(h).includes("can_create_issue_note")&&"Issued"!==Qa.value.status?.key&&tt.value?((0,l.wg)(),(0,l.iD)("th",je,"Quantity Issuing")):(0,l.kq)("",!0),(0,i.SU)(h).includes("can_create_issue_note")&&"Issued"!==Qa.value.status?.key&&tt.value?((0,l.wg)(),(0,l.iD)("th",Pe,"Item Condition")):(0,l.kq)("",!0)])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Aa.value,((e,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,(0,s.zw)(a+1),1),(0,l._)("td",null,(0,s.zw)(e.item),1),(0,l._)("td",null,(0,s.zw)(e.description),1),(0,i.SU)(h).includes("can_create_issue_note")&&"Issued"!==Qa.value.status?.key&&tt.value?((0,l.wg)(),(0,l.iD)("td",Ve,[(0,l.Wm)((0,i.SU)(o()),{modelValue:e.store_item,"onUpdate:modelValue":a=>e.store_item=a,options:Xa.value,placeholder:"Select Item",searchable:!0,multple:"false",label:"name",required:!0,"allow-empty":!1,onSelect:a=>e.issued_quantity=""},null,8,["modelValue","onUpdate:modelValue","options","onSelect"])])):(0,l.kq)("",!0),(0,l._)("td",null,[(0,i.SU)(h).includes("can_create_issue_note")&&"Issued"!==Qa.value.status?.key&&tt.value&&e.store_item?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number",class:"form-control w-50",placeholder:"available "+e?.store_item?.balance_quantity??0,"onUpdate:modelValue":a=>e.issued_quantity=a,max:Math.min(e.store_item.balance_quantity,e.quantity),min:.1,onInput:a=>e.issued_quantity=Math.min(e.issued_quantity,e.store_item.balance_quantity,e.quantity-e.issued),step:"any"},null,40,Le)),[[n.nr,e.issued_quantity,void 0,{number:!0}]]):(0,l.kq)("",!0),"Unapproved"!==Qa.value.status?.key&&"Issued"!==Qa.value.status?.key?((0,l.wg)(),(0,l.iD)("div",Ne,[(0,l._)("span",null,"Issued : "+(0,s.zw)(e.issued.toLocaleString()),1),Me,(0,l._)("span",null,"Pending : "+(0,s.zw)((e.quantity-e.issued).toLocaleString()),1)])):((0,l.wg)(),(0,l.iD)("div",Ee,[(0,l._)("span",null,(0,s.zw)(Number(e.quantity).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]))]),(0,i.SU)(h).includes("can_create_issue_note")&&"Issued"!==Qa.value.status?.key&&tt.value?((0,l.wg)(),(0,l.iD)("td",Te,[(0,l._)("label",Be,(0,s.zw)(e.store_item.condition??"Select Item First"),1)])):(0,l.kq)("",!0)])))),128))])])])])])):(0,l.kq)("",!0),6==!(0,i.SU)(Ka)?((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,s.C_)(["col-lg-12","col-sm-12","layout-spacing",Wa.value||Fa.value?"col-xl-6":"col-xl-12"])},[(0,l._)("div",Ye,[(0,l._)("div",Ae,[(0,l.Wm)(r,{data:Aa.value,columns:Oa.value,options:Na.value},null,8,["data","columns","options"])])])],2)):(0,l.kq)("",!0),Wa.value?((0,l.wg)(),(0,l.iD)("div",Oe,[(0,l._)("div",$e,[(0,l._)("a",{href:Wa.value,target:"_blank",class:"stretched-link"},null,8,We),Fe,(0,l._)("embed",{src:Wa.value,type:"application/pdf",width:"100%",height:"600px"},null,8,Qe)])])):(0,l.kq)("",!0),Fa.value?((0,l.wg)(),(0,l.iD)("div",Je,[(0,l._)("div",Ge,[(0,l._)("a",{href:Fa.value,target:"_blank",class:"stretched-link"},null,8,Ke),Ze,(0,l._)("embed",{src:Fa.value,type:"application/pdf",width:"100%",height:"600px"},null,8,Xe)])])):(0,l.kq)("",!0)])],32)]),(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:$a},"Close")])])])])])}}};const aa=ea;var ta=aa}}]);
//# sourceMappingURL=5622.9c141b1e.js.map