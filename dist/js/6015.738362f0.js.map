{"version":3,"file":"js/6015.738362f0.js","mappings":"ohEAoHIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,UAEjB,MAAMC,GAASC,EAAAA,EAAAA,MAITC,IADWC,EAAAA,EAAAA,IAAI,OACJA,EAAAA,EAAAA,IAAI,aACfC,GAAiBD,EAAAA,EAAAA,KAAI,GACrBE,GAAQF,EAAAA,EAAAA,IAAI,IACZG,GAAWH,EAAAA,EAAAA,IAAI,IAEfI,IADQJ,EAAAA,EAAAA,IAAI,KACIK,EAAAA,EAAAA,IAAO,kBACvBC,EAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAGNC,EAAQC,UACbV,EAAgBW,OAAQ,EACtB,IACA,MAAMC,QAAiBP,EAAcQ,KACnC,cACA,CACEZ,MAAOA,EAAMU,MACbT,SAASA,EAASS,QAItB,GAAIC,EAASE,KAAKC,MAAO,CACvBC,EAAY,iBAAmBJ,EAASE,KAAKG,KAAKC,MAClDC,aAAaC,QAAQ,QAASR,EAASE,KAAKC,OAC5CI,aAAaC,QAAQ,OAAQC,KAAKC,UAAUV,EAASE,KAAKG,OACzDrB,EAAO2B,KAAM,GAAEX,EAASE,KAAKG,KAAKO,QAClC,MAAMC,EAAWJ,KAAKK,MAAMP,aAAaQ,QAAQ,SAAST,KAAO,kBAC3DU,EAAa,iFACbC,EAAY,CAAC,eAAe,gBAChCA,EAAUC,SAAQC,IACf5B,EAAcsB,EAAQG,EAAWG,OAMzC,MAAOC,GACP,GAAIA,EAAMpB,UACR,GAA8B,MAA1BoB,EAAMpB,SAASqB,OAAgB,CACjCC,EAAUF,EAAMpB,SAASE,KAAKkB,OAAUA,EAAMpB,SAASE,KAAKW,SAC5DU,QAAQC,IAAIJ,GACX,MAAMP,EAAW,qBAAuBxB,EAAMU,MAAQ,6BAAgCqB,EAAMpB,SAASE,KAAKkB,OAASA,EAAMpB,SAASE,KAAKW,SACjIG,EAAa,iEACbC,EAAY,CAAC,eAAe,gBAClCA,EAAUC,SAAQC,IACf5B,EAAcsB,EAAQG,EAAWG,YAKrCG,EAAUF,EAAMP,SAChBzB,EAAgBW,OAAQ,EAvC5B,QA0CAX,EAAgBW,OAAQ,IAKtBK,GAAcZ,EAAAA,EAAAA,IAAO,eACrB8B,GAAY9B,EAAAA,EAAAA,IAAO,aAEnBiC,EAAe,KACM,aAAnBvC,EAASa,MACTb,EAASa,MAAQ,OAEjBb,EAASa,MAAQ,Y,wlCCzL7B,MAAM2B,EAAc,EAEpB,S","sources":["webpack://cork-vue3/./src/views/login.vue","webpack://cork-vue3/./src/views/login.vue?6051"],"sourcesContent":["<template>\r\n    <div class=\"form auth-boxed\">\r\n        <div class=\"form-container outer\">\r\n            <div class=\"form-form\">\r\n                <div class=\"form-form-wrap\">\r\n                    <div class=\"form-container\">\r\n                        <div class=\"form-content\">\r\n\r\n                            <img src=\"@/assets/images/logo.png\" class=\"navbar-logo\" alt=\"logo\" style=\"width: 150px; height: auto;\" />\r\n\r\n                            \r\n                            <p class=\"\">Log in to your account to continue.</p>\r\n\r\n                            <div ref=\"toast\" class=\"toast\">\r\n                         <div class=\"toast-body\"></div>\r\n                        </div>\r\n\r\n                            <form class=\"text-start\" @submit.prevent=\"login\">\r\n                                <div class=\"form\">\r\n                                    <div id=\"username-field\" class=\"field-wrapper input\">\r\n                                        <label for=\"username\">EMAIL</label>\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"feather feather-user\"\r\n                                        >\r\n                                            <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\r\n                                            <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\r\n                                        </svg>\r\n                                        <input v-model=\"email\" type=\"email\" class=\"form-control\" placeholder=\"e.g user@gmail.com\" />\r\n                                    </div>\r\n\r\n                                    <div id=\"password-field\" class=\"field-wrapper input mb-2\">\r\n                                        <div class=\"d-flex justify-content-between\">\r\n                                            <label for=\"password\">PASSWORD</label>\r\n                                           \r\n                                        </div>\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"feather feather-lock\"\r\n                                        >\r\n                                            <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\r\n                                            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\r\n                                        </svg>\r\n                                        <input :type=\"pwd_type\" v-model=\"password\" class=\"form-control\" placeholder=\"Password\" />\r\n                                        <svg\r\n                                            @click=\"set_pwd_type\"\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"2\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            id=\"toggle-password\"\r\n                                            class=\"feather feather-eye\"\r\n                                        >\r\n                                            <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                                            <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                                        </svg>\r\n                                    </div>\r\n                                    <div class=\"d-sm-flex justify-content-between\">\r\n                                        <div class=\"field-wrapper\">\r\n                                            <button type=\"submit\" class=\"btn btn-primary\"\r\n                                            :class=\"{disabled:loading_spinner}\"\r\n                                            >\r\n                                                <div v-if=\"loading_spinner\" class=\"d-flex flex-column align-items-center\">\r\n                                                    \r\n                                                        <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                        Please wait ...\r\n                                                </div>\r\n                                               \r\n                                                <div v-else>Log In</div>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    \r\n\r\n \r\n                                     \r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\n\r\n    import {  ref,inject } from 'vue';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    import '@/assets/sass/authentication/auth-boxed.scss';\r\n    import axios from \"axios\";\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Login' });\r\n    import { useRouter } from 'vue-router';\r\n    const router = useRouter();\r\n\r\n\r\n    const toastref = ref(null);\r\n    const pwd_type = ref('password');\r\n    const loading_spinner= ref(false);\r\n    const email = ref(\"\");\r\n    const password = ref(\"\");\r\n    const error = ref({ })\r\n    const whatsappAlert = inject('whatsappAlert');\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const  login = async () => {\r\n      loading_spinner.value = true;\r\n        try {\r\n        const response = await axiosInstance.post(\r\n          \"/user/login\", \r\n          {\r\n            email: email.value,\r\n            password:password.value,\r\n          }\r\n        );\r\n\r\n        if (response.data.token) {\r\n          showMessage(\"Welcome Back! \" + response.data.user.name);\r\n          localStorage.setItem('token', response.data.token);\r\n          localStorage.setItem('user', JSON.stringify(response.data.user));\r\n           router.push(`${response.data.user.path}`);\r\n           const message =  JSON.parse(localStorage.getItem(\"user\")).name + ' just Logged In'\r\n           const message_id = \"wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhggQUM5QUMyMzIyRUVEMTJBOTNBNTIwQjRCMTA3QUNGQTQA\"\r\n           const receivers = ['255697315583','255698267662']\r\n             receivers.forEach(receiver => {\r\n                whatsappAlert(message,message_id,receiver)\r\n             });\r\n        //   setTimeout(() => {\r\n        //     router.push(`${response.data.user.path}`);\r\n        //   }, 500);\r\n        }\r\n      } catch (error) {\r\n        if (error.response) {\r\n          if (error.response.status === 401) {\r\n            showError(error.response.data.error ??  error.response.data.message );\r\n            console.log(error)\r\n             const message =  \"User with Email \\n\" + email.value + \" failed to Log In due to \" +  (error.response.data.error ?? error.response.data.message);\r\n             const message_id = \"wamid.HBgMMjU1Njk3MzE1NTgzFQIAEhgUM0Y1QkU5OUFGQkQxMjk4QTk5QUUA\"\r\n             const receivers = ['255697315583','255698267662']\r\n             receivers.forEach(receiver => {\r\n                whatsappAlert(message,message_id,receiver)\r\n             });\r\n              \r\n          }\r\n        } else {\r\n            showError(error.message);\r\n            loading_spinner.value = false;\r\n        }\r\n      } finally {\r\n        loading_spinner.value = false;\r\n      }\r\n     }\r\n\r\n    \r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n\r\n    const set_pwd_type = () => {\r\n        if (pwd_type.value === 'password') {\r\n            pwd_type.value = 'text';\r\n        } else {\r\n            pwd_type.value = 'password';\r\n        }\r\n    };\r\n</script>\r\n","import script from \"./login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./login.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","router","useRouter","pwd_type","ref","loading_spinner","email","password","whatsappAlert","inject","axiosInstance","axios","baseURL","process","login","async","value","response","post","data","token","showMessage","user","name","localStorage","setItem","JSON","stringify","push","path","message","parse","getItem","message_id","receivers","forEach","receiver","error","status","showError","console","log","set_pwd_type","__exports__"],"sourceRoot":""}