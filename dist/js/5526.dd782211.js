"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5526],{15526:function(e,a,l){l.r(a),l.d(a,{default:function(){return Te}});l(26699);var t=l(66252),s=l(2262),o=l(49963),i=l(3577),n=l(87066),r=l(56296),c=l(26212),d=l.n(c),u=l(86455),m=l.n(u);const v={class:"layout-px-spacing"},p=(0,t.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Items</span></li></ol></nav></div></li></ul>',1),b={class:"d-flex me-4 mt-2"},_={class:"ms-auto"},g=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,t._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),h=[g],y=["innerHTML"],w=["onSubmit"],f=(0,t._)("h4",{class:"text-center"},"ITEM REGISTRATION FORM",-1),k={class:"row mb-2"},C={class:"col-md-3"},x=(0,t._)("label",{class:"form-label"},"Item Name",-1),H={class:"col-md-3"},I=(0,t._)("label",{class:"form-label"},"Item ",-1),M={class:"col-md-6"},S=(0,t._)("label",{class:"form-label"},"Item Description",-1),V={class:"text-center gap-2 justify-content-end"},U=(0,t._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),D={class:"modal fade",id:"edit_role","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},E={class:"modal-dialog modal-lg"},z={class:"modal-content"},B={class:"modal-header"},T={class:"modal-title fs-5",id:"staticBackdropLabel"},q={class:"modal-body"},L={class:"row mb-2"},R={class:"col-md-4"},N=(0,t._)("label",{class:"form-label"},"Item Name",-1),j={class:"col-md-4"},A=(0,t._)("label",{class:"form-label"},"Description",-1),O={class:"col-md-4"},P=(0,t._)("label",{class:"form-label"},"Item Category",-1),W={class:"modal-footer"},Y=(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm py-2 px-2","data-bs-dismiss":"modal"},"Close",-1),G={type:"submit",class:"btn btn-success py-2 px-2"},Z={key:0,class:"spinner-border text-white",role:"status"},$=(0,t._)("span",{class:"sr-only"},null,-1),F=[$],J={key:1},K={class:"row layout-top-spacing"},Q={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},X={class:"panel p-0"},ee={class:"custom-table table3"},ae={href:"javascript:;",class:"edit me-2"},le=["onClick"],te=(0,t._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),se=(0,t._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1),oe=[te,se],ie=["onClick"],ne=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-cash-coin",viewBox:"0 0 16 16"},[(0,t._)("path",{"fill-rule":"evenodd",d:"M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0"}),(0,t._)("path",{d:"M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z"}),(0,t._)("path",{d:"M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z"}),(0,t._)("path",{d:"M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567"})],-1),re=[ne],ce=["onClick"],de=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},[(0,t._)("polyline",{points:"3 6 5 6 21 6"}),(0,t._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),ue=[de],me={class:"modal fade mymodal",id:"rates","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ve={class:"modal-dialog modal-xl"},pe={class:"modal-content"},be={class:"modal-header"},_e={class:"modal-title fs-5",id:"staticBackdropLabel"},ge=(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close-rate-ragistry"},null,-1),he={class:"modal-body"},ye={class:"row layout-top-spacing",style:{"max-height":"67vh","overflow-y":"auto"}},we={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},fe={class:"panel p-0"},ke={class:"custom-table table3"},Ce={class:"row p-2"},xe={class:"col-md-8"},He=(0,t._)("label",{class:"form-label"},"Customizable Rate ",-1),Ie={class:"col-md-4"},Me=(0,t._)("label",{class:"form-label"},"Date Customized",-1),Se={class:"modal-footer"},Ve=(0,t._)("button",{type:"button",class:"btn btn-danger py-2 px-2","data-bs-dismiss":"modal"},"Close",-1),Ue=["disabled"],De=["innerHTML"],Ee={key:1};var ze={setup(e){(0,r.j)({title:"Custom Table"});const a=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),l=(0,s.iH)(""),c=JSON.parse(localStorage.getItem("user")).permissions,u=(0,t.f3)("loadingIndicator"),g=(0,t.f3)("formatNumber"),$=(0,t.f3)("loadingSpinner"),te=(0,s.iH)(""),se=(0,s.iH)(!1),ne=(0,s.iH)(""),de=(0,s.iH)(["Sno","id","name","description","category","rate","actions"]),ze=(0,s.iH)([]),Be=(0,s.iH)([]),Te=(0,s.iH)(!1),qe=(0,s.iH)(""),Le=(0,s.iH)(""),Re=(0,s.iH)(""),Ne=(0,s.iH)({}),je=(0,s.iH)(null),Ae=(0,s.iH)(!1),Oe=(0,s.iH)({perPage:100,perPageValues:[100,200,500],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),Pe=()=>{se.value=!0,a.get("/item-list").then((e=>{ze.value=e.data.map(((e,a)=>({...e,Sno:a+1,category:e.category?e.category.name:"",rate:g(e.rates_avg_rate??0)}))),se.value=!1}))},We=()=>{se.value=!0,a.get("/store-item-categories").then((e=>{Be.value=e.data,se.value=!1}))},Ye=()=>{Te.value=!1,se.value=!0;const e={name:te.value,category_id:ne.value.id,description:qe.value};a.post("/item-list",e).then((e=>{Pe(),se.value=!1,Ge("Item registered successfully!"),201===e.data.status||console.error(e.data.message)})).catch((e=>{console.error(e),Ze(e.response.data.message)})),se.value=!1},Ge=(0,t.f3)("showMessage"),Ze=(0,t.f3)("showError"),$e=e=>{m().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((l=>{l.isConfirmed&&(se.value=!0,a.delete(`/item-list/${e}`).then((e=>{Pe(),Ge(e.data.message),se.value=!1})))}))},Fe=e=>{je.value=e.id,Le.value=e.name,Re.value=e.description,Ne.value=e.category,Ne.value=Be.value.find((a=>a.name===e.category))},Je=()=>{Ae.value=!0;const e={name:Le.value,category_id:Ne.value.id,description:Re.value};a.put(`/item-list/${je.value}`,e).then((e=>{Pe(),Ae.value=!1,document.getElementById("close_editing").click(),Ge("Item updated successfully!")})).catch((e=>{Ae.value=!1,Ze(e.message),console.error("Error updating item:",e.message)}))},Ke=()=>{Xe.value="",ea.value="",document.getElementById("close-rate-ragistry").click()},Qe=(0,s.iH)(!1),Xe=(0,s.iH)(""),ea=(0,s.iH)(""),aa=async()=>{Qe.value=!0;const e={item_id:l.value.id,rate:Xe.value,date:ea.value};try{await a.post("item-rates",e);Ge("Rate Saved!"),Pe(),Ke()}catch(t){console.log(t),Ze(t.message)}finally{Qe.value=!1}};return(0,t.bv)((()=>{Pe(),We()})),(e,a)=>{const n=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",v,[p,(0,t._)("div",b,[(0,t._)("div",_,[(0,t._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=e=>Te.value=!Te.value)},h)])]),se.value?((0,t.wg)(),(0,t.iD)("div",{key:0,innerHTML:(0,s.SU)(u)()},null,8,y)):(0,t.kq)("",!0),Te.value?((0,t.wg)(),(0,t.iD)("form",{key:1,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,o.iM)(Ye,["prevent"])},[f,(0,t._)("div",k,[(0,t._)("div",C,[x,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"Enter Item Name","onUpdate:modelValue":a[1]||(a[1]=e=>te.value=e),required:""},null,512),[[o.nr,te.value]])]),(0,t._)("div",H,[I,(0,t.Wm)((0,s.SU)(d()),{modelValue:ne.value,"onUpdate:modelValue":a[2]||(a[2]=e=>ne.value=e),options:Be.value,"track-by":"id",label:"name",placeholder:"Select Item Category",searchable:!0,multiple:!1,required:""},null,8,["modelValue","options"])]),(0,t._)("div",M,[S,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"Enter Item Description","onUpdate:modelValue":a[3]||(a[3]=e=>qe.value=e)},null,512),[[o.nr,qe.value]])])]),(0,t._)("div",V,[(0,t._)("button",{type:"button",class:"btn btn-danger me-3",onClick:a[4]||(a[4]=e=>Te.value=!1)},"Cancel"),U])],40,w)):(0,t.kq)("",!0),(0,t._)("div",D,[(0,t._)("div",E,[(0,t._)("div",z,[(0,t._)("div",B,[(0,t._)("h1",T,"ITEM EDITING "+(0,i.zw)(ne.value),1),(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close_editing",onClick:Ke})]),(0,t._)("form",{onSubmit:a[8]||(a[8]=(0,o.iM)((e=>Je()),["prevent"]))},[(0,t._)("div",q,[(0,t._)("div",L,[(0,t._)("div",R,[N,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=e=>Le.value=e),placeholder:"Enter Item Name",required:""},null,512),[[o.nr,Le.value]])]),(0,t._)("div",j,[A,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>Re.value=e),placeholder:"Enter Description",required:""},null,512),[[o.nr,Re.value]])]),(0,t._)("div",O,[P,(0,t.Wm)((0,s.SU)(d()),{modelValue:Ne.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Ne.value=e),options:Be.value,"track-by":"id",label:"name",placeholder:"Select Item Category",searchable:!0,multiple:!1,required:""},null,8,["modelValue","options"])])])]),(0,t._)("div",W,[Y,(0,t._)("button",G,[Ae.value?((0,t.wg)(),(0,t.iD)("div",Z,F)):((0,t.wg)(),(0,t.iD)("span",J,"Save changes"))])])],32)])])]),(0,t._)("div",K,[(0,t._)("div",Q,[(0,t._)("div",X,[(0,t._)("div",ee,[(0,t.Wm)(n,{data:ze.value,columns:de.value,options:Oe.value},{status:(0,t.w5)((e=>[(0,t._)("span",{class:(0,i.C_)(["badge inv-status","badge-"+e.row.status.class])},(0,i.zw)(e.row.status.key),3)])),actions:(0,t.w5)((e=>[(0,t._)("a",ae,[((0,t.wg)(),(0,t.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary","data-bs-toggle":"modal","data-bs-target":"#edit_role",onClick:a=>Fe(e.row)},oe,8,le))]),(0,t._)("a",{href:"javascript:void(0);",class:"text-success","data-bs-toggle":"modal","data-bs-target":"#rates",onClick:a=>l.value=e.row},re,8,ie),(0,s.SU)(c).includes("can_delete_item")?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:void(0);",title:"Delete",onClick:a=>$e(e.row.id)},ue,8,ce)):(0,t.kq)("",!0)])),_:1},8,["data","columns","options"])])])])])]),(0,t._)("div",me,[(0,t._)("div",ve,[(0,t._)("div",pe,[(0,t._)("div",be,[(0,t._)("h1",_e,"RATE CUSTOMIZATION "+(0,i.zw)(l.value.name?.toUpperCase())+" "+(0,i.zw)(l.value.description?.toUpperCase()),1),ge]),(0,t._)("div",he,[(0,t._)("div",ye,[(0,t._)("div",we,[(0,t._)("div",fe,[(0,t._)("div",ke,[(0,t._)("div",Ce,[(0,t._)("div",xe,[He,(0,t.wy)((0,t._)("input",{class:"form-control",type:"number",step:"any",placeholder:"Enter Rate","onUpdate:modelValue":a[9]||(a[9]=e=>Xe.value=e)},null,512),[[o.nr,Xe.value]])]),(0,t._)("div",Ie,[Me,(0,t.wy)((0,t._)("input",{class:"form-control",type:"date","onUpdate:modelValue":a[10]||(a[10]=e=>ea.value=e),required:""},null,512),[[o.nr,ea.value]])])])])])])])]),(0,t._)("div",Se,[Ve,(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:Qe.value||!ea.value,onClick:a[11]||(a[11]=e=>aa())},[Qe.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:(0,s.SU)($)()},null,8,De)):((0,t.wg)(),(0,t.iD)("span",Ee,"Save"))],8,Ue)])])])])],64)}}};const Be=ze;var Te=Be}}]);
//# sourceMappingURL=5526.dd782211.js.map