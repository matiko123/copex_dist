"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[9121],{58483:function(e,t,n){n.d(t,{i:function(){return a}});n(26699);function a(e,t){const n=t.toLowerCase().trim();if(!n)return e;const a=e=>null!=e&&("string"===typeof e?e.toLowerCase().includes(n):Array.isArray(e)?e.some(a):"object"===typeof e&&Object.values(e).some(a));return e.filter((e=>a(e)))}},86500:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(66252),o=n(49963),s=n(2262);const r=(0,a._)("span",{class:"input-group-text bg-white border-start-0"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z"})])],-1);var l={props:{filterValue:String},emits:["update:filterValue"],setup(e,{emit:t}){const n=e,l=(0,s.iH)(n.filterValue||null);return(0,a.YP)(l,(e=>t("update:filterValue",e))),(e,t)=>((0,a.wg)(),(0,a.iD)("form",{onSubmit:t[1]||(t[1]=(0,o.iM)((()=>{}),["prevent"])),class:"input-group container"},[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e)},null,512),[[o.nr,l.value]]),r],32))}};const i=l;var c=i},9121:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(66252),o=n(3577),s=n(49963),r=n(2262),l=n(87066),i=n(56296);n(86500),n(58483),n(26212);const c={class:"layout-px-spacing"},d=(0,a.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Attendances</a></li><li class="breadcrumb-item active" aria-current="page"><span> Employee Attendance </span></li></ol></nav></div></li></ul>',1),u={class:"navbar-nav flex-row ms-auto"},p={class:"nav-item more-dropdown"},m={class:"dropdown custom-dropdown-icon"},b=(0,a._)("a",{href:"javascript:;",class:"nav-link dropdown-toggle",id:"ddlSettings","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,a._)("span",null,"Select a company"),(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},[(0,a._)("polyline",{points:"6 9 12 15 18 9"})])],-1),v={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"ddlSettings"},g=(0,a._)("a",{class:"dropdown-item","data-value":"Mail",href:"javascript:void(0);"},"BUSHMAN SAFARI",-1),h=[g],f=(0,a._)("a",{class:"dropdown-item","data-value":"Settings",href:"javascript:void(0);"},"COPEX CONTRACTORS",-1),w=[f],y={class:"text-center"},x={class:"d-flex justify-content-end align-items-center mb-3"},_={class:"d-flex align-items-center gap-2 me-2"},C=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,a._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),k=[C],A=["innerHTML"],S={key:1,class:"row layout-top-spacing"},T={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},E={class:"panel p-0"},N={class:"custom-table table3"};var R={setup(e){(0,i.j)({title:"Employee Attendance"});const t=(0,r.iH)(""),n=(0,a.f3)("showError"),g=((0,a.f3)("formatNumber"),(0,a.f3)("tableShimmer")),f=((0,a.f3)("printPendingGrnItemsReport"),(0,r.iH)(!1)),C=(0,r.iH)(["SNo","name","status","check_in_time"]),R=(0,r.iH)([]),H=((0,r.iH)(""),(0,r.iH)((new Date).toISOString().split("T")[0])),O=(0,r.iH)({perPage:20,perPageValues:[20,30,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name","status","check_in_time"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),M=l.Z.create({baseURL:"https://bushman.ink/api/v1/"}),P=async()=>{f.value=!0;try{const e=await M.get(`head-office-attendances?date=${H.value}&company_id=${t.value}`);R.value=e.data.map(((e,t)=>({SNo:t+1,name:e.name,status:e.status,check_in_time:e.check_in_time||"--"})))}catch(e){console.log(e),n(e.message)}finally{f.value=!1}},$=async()=>{try{const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const n=5==t.value?"BUSHMAN SAFARI TRACKERS":6==t.value?"COPEX CONTRACTORS CO.LTD":"COMPANY",a=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Employee Attendance Report</title>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .company-title { text-align: center; }\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; page-break-inside: auto; }\n  thead { display: table-header-group; }\n  tfoot { display: table-footer-group; }\n  tr { page-break-inside: avoid; page-break-after: auto; }\n  th, td { border: 0.5px solid #000; padding: 6px; }\n  th { background-color: #f8f8f8; font-weight: bold; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\n  .badge { padding: 4px 8px; border-radius: 4px; font-weight: bold; }\n  .badge-present { background-color: #28a745; color: white; }\n  .badge-absent { background-color: #dc3545; color: white; }\n  .summary-row { page-break-inside: avoid; }\n  @media print { \n    body { margin: 10mm; } \n    table { page-break-inside: auto; }\n    tr { page-break-inside: avoid; page-break-after: auto; }\n    thead { display: table-header-group; }\n    tfoot { display: table-footer-group; }\n  }\n</style>\n</head>\n<body>\n\n<div class="company-title text-style">\n  <i>\n  <h1>${n}</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n\n<hr style="margin-top:20px">\n\n<div class="title text-style">\n  EMPLOYEE ATTENDANCE REPORT\n</div>\n\n<div class="text-center text-style">\n  <b>Date:</b> ${H.value}\n</div>\n\n<hr>\n\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Employee Name</th>\n      <th class="text-center">Status</th>\n      <th class="text-center">Check-in Time</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${R.value.map(((e,t)=>`\n    <tr>\n      <td>${t+1}</td>\n      <td>${e.name||"N/A"}</td>\n      <td class="text-center">\n        <span class="badge ${"present"===e.status?"badge-present":"badge-absent"}">\n          ${e.status||"N/A"}\n        </span>\n      </td>\n      <td class="text-center">${e.check_in_time||"--"}</td>\n    </tr>\n    `)).join("")}\n  </tbody>\n  <tfoot>\n    <tr class="summary-row">\n      <td colspan="4" class="text-right">\n        <strong>Total Employees: ${R.value.length}</strong> | \n        <strong>Present: ${R.value.filter((e=>"present"===e.status)).length}</strong> | \n        <strong>Absent: ${R.value.filter((e=>"absent"===e.status)).length}</strong>\n      </td>\n    </tr>\n  </tfoot>\n</table>\n\n</body>\n</html>\n`,o=e.contentWindow.document;o.open(),o.write(a),o.close(),e.onload=()=>{e.contentWindow.focus(),e.contentWindow.print(),setTimeout((()=>{document.body.removeChild(e)}),1e3)}}catch(e){n(`Failed to print attendance report: ${e.message}`)}},z=e=>{t.value=e,P()};return(0,a.bv)((async()=>{})),(e,n)=>{const l=(0,a.up)("v-client-table");return(0,a.wg)(),(0,a.iD)("div",c,[d,((0,a.wg)(),(0,a.j4)(a.lR,{to:"#breadcrumb"},[(0,a._)("ul",u,[(0,a._)("li",p,[(0,a._)("div",m,[b,(0,a._)("ul",v,[(0,a._)("li",{onClick:n[0]||(n[0]=e=>z(5))},h),(0,a._)("li",{onClick:n[1]||(n[1]=e=>z(6))},w)])])])])])),(0,a._)("h3",y,(0,o.zw)(5==t.value?"BUSHMAN SAFARI TRACKERS ATTTENDANCE":6==t.value?"COPEX CONTRACTORS ATTENDANCE":null),1),(0,a._)("div",x,[(0,a._)("div",_,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":n[2]||(n[2]=e=>H.value=e),onChange:P,class:"form-control form-control-sm",style:{width:"150px"}},null,544),[[s.nr,H.value]])]),(0,a._)("button",{onClick:n[3]||(n[3]=e=>$()),class:"btn btn-success"},k)]),f.value?((0,a.wg)(),(0,a.iD)("div",{key:0,innerHTML:(0,r.SU)(g)()},null,8,A)):((0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",T,[(0,a._)("div",E,[(0,a._)("div",N,[(0,a.Wm)(l,{data:R.value,columns:C.value,options:O.value},{status:(0,a.w5)((e=>[(0,a._)("span",{class:(0,o.C_)(["badge",{"bg-success":"present"===e.row.status,"bg-danger":"absent"===e.row.status}])},(0,o.zw)(e.row.status),3)])),_:1},8,["data","columns","options"])])])])]))])}}};const H=R;var O=H}}]);
//# sourceMappingURL=9121.3ed77e59.js.map