{"version":3,"file":"js/5622.9c141b1e.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/globalSearch.js","webpack://cork-vue3/./src/views/requisitions/requisitionGroup.vue","webpack://cork-vue3/./src/views/requisitions/requisitionGroup.vue?1f1a"],"sourcesContent":["export function globalSearch(data, keyword) {\r\n  const lowerKeyword = keyword.toLowerCase().trim()\r\n  if (!lowerKeyword) return data\r\n\r\n  const containsKeyword = obj => {\r\n    if (obj == null) return false\r\n    if (typeof obj === 'string') return obj.toLowerCase().includes(lowerKeyword)\r\n    if (Array.isArray(obj)) return obj.some(containsKeyword)\r\n    if (typeof obj === 'object')\r\n      return Object.values(obj).some(containsKeyword)\r\n    return false\r\n  }\r\n\r\n  return data.filter(item => containsKeyword(item))\r\n}","<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Requisitions</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n<div class=\"d-flex align-items-center justify-content-between mb-3\">\r\n  <div class=\"flex-grow-1 text-center\">\r\n    <h3>{{ approval_group_id == 6 ? \"STORE ISSUING REQUISITION\" : \"REQUISITIONS\" }}</h3>\r\n  </div>\r\n\r\n  <div class=\"d-flex\">\r\n    <button \r\n      v-if=\"user_permissions.includes('is_md')\"\r\n      type=\"button\"\r\n      class=\"me-2 btn d-flex align-items-center\"\r\n      @click=\"showTrash = !showTrash\"\r\n      :class=\"showTrash ? 'btn-primary' : 'btn-outline-danger'\"\r\n    >\r\n      <span v-if=\"!showTrash\">Trashed</span>\r\n      <span v-else>All</span>\r\n\r\n      <svg v-if=\"!showTrash\"\r\n           xmlns=\"http://www.w3.org/2000/svg\"\r\n           width=\"26\" height=\"26\"\r\n           viewBox=\"0 0 26 26\"\r\n           fill=\"none\"\r\n           stroke=\"currentColor\"\r\n           stroke-width=\"1.5\"\r\n           stroke-linecap=\"round\"\r\n           stroke-linejoin=\"round\">\r\n        <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 \r\n                 1-2-2V6m3 0V4a2 2 0 0 \r\n                 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n      </svg>\r\n\r\n      <svg v-else\r\n           xmlns=\"http://www.w3.org/2000/svg\" \r\n           width=\"26\" height=\"26\" \r\n           fill=\"currentColor\" \r\n           class=\"bi bi-check2-circle\" \r\n           viewBox=\"0 0 16 16\">\r\n        <path d=\"M2.5 8a5.5 5.5 0 0 1 \r\n                 8.25-4.764.5.5 \r\n                 0 0 0 .5-.866A6.5 6.5 \r\n                 0 1 0 14.5 8a.5.5 \r\n                 0 0 0-1 0 5.5 5.5 \r\n                 0 1 1-11 0\"/>\r\n        <path d=\"M15.354 3.354a.5.5 \r\n                 0 0 0-.708-.708L8 \r\n                 9.293 5.354 6.646a.5.5 \r\n                 0 1 0-.708.708l3 3a.5.5 \r\n                 0 0 0 .708 0z\"/>\r\n      </svg>\r\n    </button>\r\n    <router-link to=\"/good-issue-notes\" class=\"btn btn-primary\">Issue Note</router-link>\r\n  </div>\r\n</div>\r\n\r\n\r\n             <form @submit.prevent class=\"input-group container\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control border-end-0\"\r\n      placeholder=\"Search a word...\"\r\n      v-model=\"filter\"\r\n    >\r\n    <span class=\"input-group-text bg-white border-start-0\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z\"/>\r\n      </svg>\r\n    </span>\r\n  </form>\r\n            <div \r\n              v-if=\"user_permissions.includes('can_create_requisition')\"\r\n            class=\"d-flex me-4 mt-1\">\r\n                        <div class=\"ms-auto\">\r\n \r\n                        </div>\r\n                    </div>  \r\n\r\n\r\n\r\n\r\n\r\n\r\n                  \r\n\r\n                           <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner \" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n         \r\n\r\n            <!-- requisition table starts -->\r\n        <div \r\n        v-else\r\n        v-if=\"!role_registration\" class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"filteredRequisitions\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                            </template>\r\n                            <template #sno=\"{ index }\">\r\n    {{ index + 0 }}\r\n  </template>\r\n                            <template #actions=\"props\">\r\n\r\n                            \r\n                                 \r\n                                 <a href=\"javascript:void(0);\" title=\"View\" data-bs-toggle=\"modal\" data-bs-target=\"#view_requisition\"\r\n                                \r\n                                 @click=\"fillItems(props.row)\"\r\n                                 >\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-info\"\r\n                                        data-bs-toggle=\"modal\" data-bs-target=\"#requisitionItems\"\r\n                                        \r\n                                    >\r\n                                        <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                                        <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                                    </svg>\r\n                                </a>\r\n\r\n                                <router-link \r\n                                v-if=\"props.row.status.key === 'Issued' || props.row.status.key === 'Partial Issued'\"\r\n                                :to=\"`/good-issue-notes/${props.row.id}`\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-arrow-bar-right\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M6 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L12.293 7.5H6.5A.5.5 0 0 0 6 8m-2.5 7a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5\"/>\r\n</svg>\r\n                                </router-link>\r\n\r\n                \r\n                            </template>\r\n                           \r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            <!-- requisition table ends -->\r\n\r\n            <!-- requisition items sterts -->\r\n<div class=\"modal fade mymodal\" id=\"requisitionItems\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-fullscreen\">\r\n    <div class=\"modal-content\">\r\n      <!-- Header -->\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Requisition Items</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"clearForm()\" id=\"close-issue-modal\"></button>\r\n      </div>\r\n\r\n      <!-- Body -->\r\n      <div class=\"modal-body\">\r\n                     <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3 \">\r\n<table class=\"table table-bordered table-striped\">\r\n      <thead >\r\n        <tr>\r\n          <th>Requester</th>\r\n          <th>Date Requested</th>\r\n          <th>Source</th>\r\n          <th>Purpose</th>\r\n          <th>Project</th>\r\n          <th>Status</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr >\r\n          <td>{{ requisition.requester }}</td>\r\n          <td>{{ requisition.date }}</td>\r\n           <td>{{ requisition.type }}</td>\r\n          <td>{{ requisition.purpose }}</td>\r\n          <td>{{ requisition.project }}</td>\r\n          <td> <span class=\"mb-0 badge\" :class=\"`badge-${requisition.status?.class}`\">\r\n                  {{ requisition.status?.key }}\r\n                </span></td>\r\n        </tr>\r\n     <tr v-if=\"requisition.description\">\r\n      <td colspan=\"5\"><b> Brief Description : </b> {{ requisition.description }}</td>\r\n    </tr>\r\n      <tr v-if=\"requisition.remark\">\r\n      <td colspan=\"5\"> <b> Remark :  </b> {{ requisition.remark }}</td>\r\n    </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    </div>\r\n    </div>\r\n    </div>\r\n\r\n                <!-- approval button starts -->\r\n                     <div class=\"mb-2 text-center fw-bold\" style=\"font-size: x-large;\">\r\n      <strong>Total Cost: </strong>\r\n      <span>\r\n        {{\r\n          requisition?.items?.reduce((sum, item) => {\r\n            const qty = Number(item.quantity) || 0;\r\n            const rate = Number(item.rate) || 0;\r\n            return sum + qty * rate;\r\n          }, 0).toLocaleString() + '/='\r\n        }}\r\n      </span>\r\n    </div>\r\n  <div v-if=\"(requisition.status?.key === 'Unapproved' || requisition.status?.key === 'Remarked' || requisition.status?.key === 'Rejected' ) && user_permissions.includes('is_md')\" class=\"mb-2 text-center\">\r\n  <div class=\"btn-group mb-3\">\r\n    <button v-if=\"user_permissions.includes('is_programmer')\" class=\"btn btn-secondary me-2\" @click=\"status = 2\" :disabled=\"spinner\">Unapprove</button>\r\n    <button class=\"btn btn-primary me-2\" @click=\"status = 3\" :disabled=\"spinner\">Approve</button>\r\n    <button class=\"btn btn-danger me-2\" @click=\"status = 4\" :disabled=\"spinner\">Reject</button>\r\n    <button class=\"btn btn-info\" @click=\"status = 14,remark = requisition.remark\" :disabled=\"spinner\">Remark</button>\r\n  </div>\r\n\r\n  <div v-if=\"status\" class=\"mb-2\">\r\n    <span\r\n      class=\"badge rounded-pill\"\r\n      :class=\"{\r\n        'bg-secondary': status == 2,\r\n        'bg-danger': status == 4,\r\n        'bg-success': status == 3,\r\n        'bg-info': status != 3 && status != 4\r\n      }\"\r\n      style=\"font-size: 1rem;\"\r\n    >\r\n      {{\r\n        status == 3\r\n          ? 'Approve Request'\r\n          : status == 4\r\n          ? 'Reject Request'\r\n            : status == 2\r\n          ? 'Unapprove'\r\n          : 'Fill Remark'\r\n      }}\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"input-group\" v-if=\"status\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control\"\r\n      :placeholder=\"status == 3 ? 'Enter Approval Remark' : status == 4 ? 'Enter Rejection Remark' : 'Enter Remark'\"\r\n      v-model=\"remark\"\r\n    >\r\n    <button class=\"btn btn-primary\" type=\"button\" :disabled=\"spinner\" @click=\"fillRequisitionRemark(requisition)\">\r\n      <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Save</span>\r\n    </button>\r\n  </div>\r\n\r\n</div>\r\n\r\n         <!-- approval button ends -->\r\n\r\n        <form  @submit.prevent=\"registerIncidence()\">\r\n          <div class=\"row layout-top-spacing\">\r\n            \r\n            <!-- Status & Incidence -->\r\n            <div class=\"col-12  d-flex align-items-center justify-content-between\">\r\n     \r\n              <div\r\n              v-if=\"(requisition.status?.key === 'approved' || (requisition.status?.key === 'Partial Issued' )) && user_permissions.includes('can_create_issue_note')\"\r\n              class=\"d-flex align-items-center\">\r\n       \r\n \r\n\r\n                <multiselect\r\n                class=\"me-2\"\r\n                  v-model=\"store\"\r\n                  placeholder=\"Select Source Store\"\r\n                  label=\"name\"\r\n                  :options=\"stores\"\r\n                  style=\"width: 300px;\"\r\n                  :allow-empty=\"false\"\r\n                ></multiselect>\r\n\r\n                 <multiselect\r\n                class=\"me-2\"\r\n                  v-model=\"destination_store\"\r\n                  placeholder=\"Select Destination Store\"\r\n                  label=\"name\"\r\n                  :options=\"stores\"\r\n                  style=\"width: 300px;\"\r\n                  :allow-empty=\"false\"\r\n                ></multiselect>\r\n                \r\n\r\n\r\n                <button\r\n                  v-if=\"store\"\r\n                  type=\"submit\"\r\n                  class=\"btn btn-primary btn-sm ms-2\"\r\n                  :disabled=\"spinner || !destination_store\"\r\n                >\r\n                  <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\"></div>\r\n                  <div v-else>Issue</div>\r\n                </button>\r\n              </div>\r\n\r\n          \r\n              \r\n            </div>\r\n                 <!-- <div v-if=\"approval_group_id == 6 && requisition?.status?.key === 'approved' && store \" class=\"mt-2 col-xl-12 col-lg-12 col-sm-12 layout-spacing\"> -->\r\n\r\n                  <div v-if=\"approval_group_id == 6 \" class=\"mt-2 col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n\r\n                  <div class=\"panel p-0\">\r\n                <div class=\"custom-table table3\">\r\n                  <table class=\"table table-bordered table-striped\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Sno</th>\r\n                        <th>Item Requested</th>\r\n                        <th>Description</th>\r\n                        <th>Quantity</th>\r\n                        <th v-if=\"user_permissions.includes('can_create_issue_note') && (requisition.status?.key !== 'Issued' ) && store\">Quantity Issuing</th>\r\n                        <th v-if=\"user_permissions.includes('can_create_issue_note') && (requisition.status?.key !== 'Issued' ) && store \">Item Condition</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"(item,index) in requisitionItems\" :key=\"item.id\">\r\n                        <td>{{ index + 1 }}</td>\r\n                        <td>{{ item.item }}</td>\r\n                        <td>{{ item.description }}</td>\r\n                        <td v-if=\"user_permissions.includes('can_create_issue_note') && (requisition.status?.key !== 'Issued' ) && store\">\r\n                          <multiselect\r\n                            v-model=\"item.store_item\"\r\n                            :options=\"storeItems\"\r\n                            placeholder=\"Select Item\"\r\n                            :searchable=\"true\"\r\n                            multple=\"false\"\r\n                            label=\"name\"\r\n                            :required=\"true\"\r\n                            :allow-empty=\"false\"\r\n                            @select=\"item.issued_quantity = ''\"\r\n                          ></multiselect>\r\n                        </td>\r\n                        <td>\r\n                          <input \r\n                     v-if=\"user_permissions.includes('can_create_issue_note') && (requisition.status?.key !== 'Issued') && store && item.store_item\"   \r\n  type=\"number\"\r\n  class=\"form-control w-50\"\r\n  :placeholder=\"'available ' + item?.store_item?.balance_quantity ?? 0\"\r\n  v-model.number=\"item.issued_quantity\"\r\n  :max=\"Math.min(item.store_item.balance_quantity, item.quantity)\"\r\n  :min=\"0.1\"\r\n  @input=\"item.issued_quantity = Math.min(item.issued_quantity, item.store_item.balance_quantity, item.quantity - item.issued )\"\r\n step=\"any\"\r\n\r\n  />\r\n  <div v-if=\"requisition.status?.key !== 'Unapproved' && requisition.status?.key !== 'Issued'\">\r\n<span>Issued : {{ item.issued.toLocaleString() }}</span><br/>\r\n<span>Pending : {{ (item.quantity - item.issued).toLocaleString() }}</span>\r\n\r\n  </div>\r\n  <div v-else>\r\n    <span>{{ Number(item.quantity).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) }}</span>\r\n  </div>\r\n\r\n                        </td>\r\n\r\n                         <td\r\n                         v-if=\"user_permissions.includes('can_create_issue_note') && (requisition.status?.key !== 'Issued') && store\"\r\n                         >\r\n                          <label\r\n                            type=\"number\"\r\n                            class=\"form-control\"\r\n                          >{{item.store_item.condition ??'Select Item First'}}</label>\r\n                        </td>\r\n\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- Requisition Items -->\r\n            <div v-if=\"!approval_group_id == 6 \" :class=\"['col-lg-12', 'col-sm-12', 'layout-spacing', proforma || subcontractor ? 'col-xl-6' : 'col-xl-12']\">\r\n              <div class=\"panel p-0\">\r\n                <div class=\"custom-table table3\">\r\n                  <v-client-table :data=\"requisitionItems\" :columns=\"itemColumns\" :options=\"table_option\"></v-client-table>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <!-- Issuing Items -->\r\n  \r\n\r\n            <!-- Proforma -->\r\n       <div class=\"col-xl-6 col-lg-12 col-sm-12 layout-spacing\" v-if=\"proforma\">\r\n  <div class=\"panel p-3 position-relative\">\r\n    <a :href=\"proforma\" target=\"_blank\" class=\"stretched-link\"></a>\r\n    <h4 class=\"text-center\">Proforma Invoice</h4>\r\n    <embed :src=\"proforma\" type=\"application/pdf\" width=\"100%\" height=\"600px\" />\r\n  </div>\r\n</div>\r\n\r\n       <div class=\"col-xl-6 col-lg-12 col-sm-12 layout-spacing\" v-if=\"subcontractor\">\r\n  <div class=\"panel p-3 position-relative\">\r\n    <a :href=\"subcontractor\" target=\"_blank\" class=\"stretched-link\"></a>\r\n    <h4 class=\"text-center\">Subcontractor's Agreement</h4>\r\n    <embed :src=\"subcontractor\" type=\"application/pdf\" width=\"100%\" height=\"600px\" />\r\n  </div>\r\n</div>\r\n\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n      <!-- Footer -->\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"clearForm\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<!-- requisition items ends -->\r\n\r\n\r\n\r\n   \r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import { onMounted, ref,inject,computed,watch } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    import { globalSearch } from '@/components/reusables/globalSearch';\r\n\r\n    useMeta({ title: 'Requisition Group' });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    import { useRouter, useRoute } from 'vue-router';\r\n    const showTrash = ref(false);\r\n    const router = useRouter();\r\n    const route = useRoute(); // Import useRoute from vue-router\r\n     const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const requisitionTypes = ref([]);\r\n    const requisition_type = ref('');\r\n    const spinner = ref(false)\r\n    const incidence = ref('')\r\n    const tableShimmer = inject('tableShimmer');\r\n    const formatNumber = inject('formatNumber');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const status = ref('')\r\n    const item = ref('')\r\n    const quantity = ref('')\r\n    const rate = ref('')\r\n    const remark = ref()\r\n    const units = ref('')\r\n    const remarks = ref([])\r\n    const item_id = ref(0)\r\n    const requisitions = ref([]);\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['sno','ref_no', 'requester','purpose','type','project','date','cost','status','remark',  'actions']);\r\n    const role_registration = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const destination_store = ref('')\r\n    const unitList = ref([])\r\n\r\n       const filter = ref('')\r\n\r\n\r\nconst filteredRequisitions = computed(() => {\r\n  if(user_permissions.includes('is_md')){\r\nif (showTrash.value) {\r\n    return globalSearch(requisitions.value, filter.value).filter(r =>\r\n      ['Rejected', 'On Hold', 'Remarked'].includes(r.status?.key)\r\n    );\r\n  } else {\r\n    return globalSearch(requisitions.value, filter.value).filter(r =>\r\n      ['Unapproved', 'approved','Issued','Partial Issued'].includes(r.status?.key)\r\n    );\r\n  }\r\n  }else{\r\n   return globalSearch(requisitions.value, filter.value);\r\n  }\r\n  \r\n});\r\n\r\n\r\n\r\n\r\nconst assets= ref([])\r\nconst getAssets = async ()=>{\r\n  const response = await axiosInstance.get('machines')\r\n  assets.value = response.data.map((item)=>({\r\n  ...item,\r\n  name : item.name + ' - ' + item.type_name\r\n  }))\r\n}\r\n\r\nconst projects = ref([])\r\nconst project = ref('')\r\n\r\nconst getProjects = async ()=>{\r\n  const response = await axiosInstance.get('projects')\r\n  projects.value = response.data\r\n}\r\n\r\nconst budgets = ref([])\r\nconst budget = ref('')\r\nconst getBudgets = async (id) => {\r\n  const response = await axiosInstance.get(`budgets?project_id=${id}`)\r\n  budgets.value = response.data.filter(b => b.status === 'closed')\r\n}\r\n\r\n\r\nwatch(project, (newVal) => {\r\n    if (newVal) {\r\n        getBudgets(newVal.id)\r\n    }\r\n});\r\n\r\n\r\nconst budgetItems = ref([])\r\nconst budget_item = ref('')\r\nwatch(budget, (newVal) => {\r\n    if (newVal) {\r\n         budgetItems.value = newVal.items\r\n    }\r\n});\r\n\r\nconst budgetItemDescriptions = ref([])\r\nconst budget_item_description = ref('')\r\nconst max_cost = ref('')\r\nconst max_quantity = ref('')\r\nwatch(budget_item, (newVal) => {\r\n    if (newVal) {\r\n         budgetItemDescriptions.value = newVal.descriptions\r\n         item.value = newVal.name\r\n    }\r\n});\r\n\r\nwatch(budget_item_description, (newVal) => {\r\n    if (newVal) {\r\n         max_quantity.value = newVal.quantity * newVal.quantity_2,\r\n         max_cost.value = (newVal.quantity * newVal.quantity_2 * newVal.cost) - newVal.used_cost\r\n         item_id.value = newVal.id\r\n         description.value = newVal.name\r\n         units.value = newVal.units\r\n    }\r\n});\r\n\r\n\r\n\r\nwatch(() => route.params.status_id, (newStatusId) => {\r\n  loading_spinner.value = true;\r\n  getRequisitions();\r\n});\r\n\r\n\r\nconst getUnits = async ()=>{\r\n  const response = await axiosInstance.get('units')\r\n  unitList.value = response.data\r\n}\r\n\r\nconst fillRequisitionRemark = async (requisition) => {\r\n  spinner.value = true\r\n  const payload = {\r\n    status_id: status.value,\r\n    remark: remark.value,\r\n    ...(status.value == 3 && approval_group_id != 6 && {\r\n      approval: {\r\n        approval_group_id: requisition.approval_group_id,\r\n        source: 'requisition',\r\n        source_id: requisition.id,\r\n        requester_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n        items: requisition.items\r\n      }\r\n    })\r\n  }\r\n\r\n//   console.log(payload)\r\n//   return ;\r\n  try{\r\n    const response = await axiosInstance.put(`requisitions/${requisition.id}`,payload)\r\n     getRequisitions();\r\n    showMessage(\"Saved Successfully\")\r\n    document.getElementById('close-issue-modal').click()\r\n  }catch(error){\r\n    console.log(error)\r\n    showError(error.message)\r\n  }finally{\r\n    spinner.value = false\r\n  }\r\n}\r\n    const registerIncidence = async () => {\r\n      spinner.value = true;\r\n      const payload = {\r\n        issueData: {\r\n          requisition_id: requisition.value.id,\r\n          issuer_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n          destination_store_id: destination_store.value.id,\r\n          source_store_id : store.value.id,\r\n          remark : 'SENT TO ' + destination_store.value.name\r\n        },\r\n        issueItems: requisitionItems.value\r\n          .filter(item => Number(item.issued_quantity) > 0)\r\n          .map(item => ({\r\n            requisition_item_id: item.id,\r\n            store_item_id: item.store_item.id,\r\n            quantity: item.issued_quantity\r\n          }))\r\n      };\r\n      \r\n      try {\r\n        const response = await axiosInstance.post('good-issue-notes', payload);\r\n        showMessage('Issued to ' + destination_store.value.name);\r\n        getRequisitions();\r\n        document.getElementById('close-issue-modal').click();\r\n      } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n      } finally {\r\n        spinner.value = false;\r\n      }\r\n    }\r\n\r\n    \r\n    const table_option = ref({\r\n        perPage: 50,\r\n        perPageValues: [  50 ,100 ,200 ,500 ],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'role_name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n\r\nconst items_list = ref([])\r\n    const getItems = async (source) => {\r\n        const response = await  axiosInstance.get(source)\r\n        items_list.value = response.data.map((item, index) => ({\r\n            ...item,\r\n            SNo: index + 1,\r\n            name : item.name + (item.description ? ' - ' + item.description : ''),\r\n            unit:item.unit ?? '---'\r\n        }));\r\n    };\r\n\r\n    const labours = ref([])\r\n    const getLabours = async () => {\r\n        const response = await axiosInstance.get('/labour-types')\r\n        labours.value = response.data\r\n    };\r\n\r\n\r\n    \r\n\r\n\r\n\r\nwatch(requisition_type, (newVal) => {\r\n    if (newVal === 'spares') getItems('get-spares');\r\n    if (newVal === 'labour') getLabours();\r\n    if (newVal === 'construction materials') getItems('get-materials');\r\n});\r\n\r\nwatch(item, (newVal) => {\r\n    if (requisition_type.value === 'labour' && newVal) {\r\n        rate.value = newVal.rate\r\n    }\r\n});\r\n\r\n\r\n\r\nconst description = ref('')\r\n\r\n\r\n\r\n    const requisitionItems = ref([])\r\n const itemColumns = ref(['Sno','item','description','units', 'quantity','rate','total']);\r\n\r\n\r\n    const clearForm = () =>{\r\n      requisitionItems.value= ([])\r\n      incidence.value = '',\r\n      remark.value = '',\r\n      status.value = ''\r\n      budget.value = ''\r\n      budget_item.value = ''\r\n      project.value = ''\r\n      units.value = ''\r\n      item.value = ''\r\n      quantity.value = ''\r\n      rate.value = ''\r\n      description.value = ''\r\n      requisition_type.value = ''\r\n      budget_item_description.value = ''\r\n      budgets.value = []\r\n      budgetItems.value = []\r\n      budgetItemDescriptions.value = []\r\n      store.value = ''\r\n      destination_store.value = ''\r\n    }\r\n\r\n\r\n    const proforma = ref('')\r\n    const subcontractor = ref('')\r\n    const requisition = ref('')\r\n    const fillItems = (req) => {\r\n    requisition.value = req\r\n    remarks.value = req.remarks\r\n    proforma.value = req.attachment\r\n    subcontractor.value = req.subcontractor?.attachment \r\n    ? 'https://copex.trustdigital.space/' + req.subcontractor.attachment \r\n    : null\r\n\r\n    requisitionItems.value = req.items.map((item, index) => ({\r\n        ...item,\r\n        Sno: index + 1,\r\n        item: item.remark,\r\n        description :item.description,\r\n        // rate: Number(item.rate).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + '/=',\r\n        rate: Number(item.rate).toLocaleString()+'/=',\r\n        total : (item.quantity * item.rate).toLocaleString()+'/=',\r\n        issued_quantity : '',\r\n        store_item: ''\r\n    }));\r\n\r\n    }\r\n\r\n\r\n\r\n  const status_id = route.params.status_id; \r\n  const approval_group_id = route.params.approval_group_id; \r\n  \r\n  const getRequisitions = () => {\r\n  let url = \"requisitions\";\r\n  if (status_id && status_id !== \"all\") {\r\n    url += `?status_id=${status_id}&approval_group_id=${approval_group_id}`;\r\n  }else{\r\n     url += `?approval_group_id=${approval_group_id}`;\r\n  }\r\n  \r\n  axiosInstance.get(url)\r\n    .then((response) => {\r\n      requisitions.value = response.data.map((item, index) => {\r\n        const type = requisitionTypes.value.find(t => t.id === item.requisition_type_id);\r\n        return {\r\n          ...item,\r\n          ref_no : item.id,\r\n          Sno: index + 1,\r\n          requester_email: item.requester_email,\r\n          type: item.type,\r\n          purpose : item.approval_group,\r\n          attachment: item.attachment ? 'https://copex.trustdigital.space/' + item.attachment : null,\r\n          status_id: item.status.id,\r\n          cost: formatNumber(item.items.reduce((total, it) => total + it.quantity * it.rate, 0)),\r\n            status: (() => {\r\n            // Calculate total quantity of all items\r\n            const totalQuantity = item.items.reduce((sum, it) => sum + Number(it.quantity), 0);\r\n            // If status is 'Issued' and issued_items < total quantity, set to 'Partial Issued'\r\n            if (item.status === 'Issued' && Number(item.issued_items) < totalQuantity) {\r\n              return {\r\n              key: 'Partial Issued',\r\n              class: 'warning'\r\n              };\r\n            }\r\n            return {\r\n              key: item.status,\r\n              class: item.status_color\r\n            };\r\n            })(),\r\n        };\r\n      });\r\n      loading_spinner.value = false;\r\n    })\r\n    .catch((error) => {\r\n      showError(error.message);\r\n      loading_spinner.value = false;\r\n    });\r\n};\r\n\r\n    \r\n    \r\n    const storeItems = ref([])\r\n    const getStoreItems = async (id) =>{\r\n      const response = await axiosInstance.get(`get-store-items?store_id=${id}`)\r\n      storeItems.value  = response.data\r\n    }\r\n\r\n       const stores = ref('')\r\n       const store = ref('')\r\n        const getStores = async () =>{\r\n      const response = await axiosInstance.get('stores')\r\n      stores.value  = response.data.map((item)=>({\r\n        ...item,\r\n        name : item.project + ' - ' + item.name\r\n      }))\r\n    }\r\n\r\n    watch(store, (newVal) => {\r\n      storeItems.value = ['']\r\n        getStoreItems(newVal.id)\r\n});\r\n\r\nconst enforceMax = () => {\r\n  if(requisition_type.value ==='budget'){\r\n      if (quantity.value > max_quantity.value ) {\r\n        quantity.value = max_quantity.value\r\n        showError(\"only \"+ quantity.value + \" available\")\r\n      }\r\n\r\n       if ((quantity.value * rate.value) > max_cost.value ) {\r\n        rate.value = ''\r\n        showError(\"Cost should not exceed \"+ formatNumber(max_cost.value) )\r\n      }\r\n  }\r\n\r\n    }\r\n\r\n   \r\n    onMounted(async () => {\r\n        loading_spinner.value = true;\r\n        getRequisitions();\r\n        getUnits()\r\n        getStores()\r\n        getAssets()\r\n        getProjects()\r\n    });\r\n</script>\r\n","import script from \"./requisitionGroup.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./requisitionGroup.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["globalSearch","data","keyword","lowerKeyword","toLowerCase","trim","containsKeyword","obj","includes","Array","isArray","some","Object","values","filter","item","useMeta","title","axiosInstance","axios","baseURL","process","showTrash","ref","route","useRouter","useRoute","user_permissions","JSON","parse","localStorage","getItem","permissions","requisitionTypes","requisition_type","spinner","incidence","tableShimmer","inject","formatNumber","loadingSpinner","status","quantity","rate","remark","units","remarks","item_id","requisitions","loading_spinner","columns","role_registration","showMessage","showError","destination_store","unitList","filteredRequisitions","computed","value","r","key","assets","getAssets","async","response","get","map","name","type_name","projects","project","getProjects","budgets","budget","getBudgets","id","b","watch","newVal","budgetItems","budget_item","items","budgetItemDescriptions","budget_item_description","max_cost","max_quantity","descriptions","quantity_2","cost","used_cost","description","params","status_id","newStatusId","getRequisitions","getUnits","fillRequisitionRemark","payload","approval_group_id","approval","requisition","source","source_id","requester_id","put","document","getElementById","click","error","console","log","message","registerIncidence","issueData","requisition_id","issuer_id","destination_store_id","source_store_id","store","issueItems","requisitionItems","Number","issued_quantity","requisition_item_id","store_item_id","store_item","post","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","items_list","getItems","index","SNo","unit","labours","getLabours","itemColumns","clearForm","proforma","subcontractor","fillItems","req","attachment","Sno","toLocaleString","total","url","then","find","t","requisition_type_id","ref_no","requester_email","type","purpose","approval_group","reduce","it","totalQuantity","sum","issued_items","class","status_color","catch","storeItems","getStoreItems","stores","getStores","onMounted","__exports__"],"sourceRoot":""}