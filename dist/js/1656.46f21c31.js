"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[1656],{58483:function(e,a,t){t.d(a,{i:function(){return l}});t(26699);function l(e,a){const t=a.toLowerCase().trim();if(!t)return e;const l=e=>null!=e&&("string"===typeof e?e.toLowerCase().includes(t):Array.isArray(e)?e.some(l):"object"===typeof e&&Object.values(e).some(l));return e.filter((e=>l(e)))}},86500:function(e,a,t){t.d(a,{Z:function(){return d}});var l=t(66252),n=t(49963),i=t(2262);const o=(0,l._)("span",{class:"input-group-text bg-white border-start-0"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z"})])],-1);var s={props:{filterValue:String},emits:["update:filterValue"],setup(e,{emit:a}){const t=e,s=(0,i.iH)(t.filterValue||null);return(0,l.YP)(s,(e=>a("update:filterValue",e))),(e,a)=>((0,l.wg)(),(0,l.iD)("form",{onSubmit:a[1]||(a[1]=(0,n.iM)((()=>{}),["prevent"])),class:"input-group container"},[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e)},null,512),[[n.nr,s.value]]),o],32))}};const r=s;var d=r},61656:function(e,a,t){t.r(a),t.d(a,{default:function(){return ea}});t(26699);var l=t(66252),n=t(2262),i=t(3577),o=t(49963),s=t(87066),r=t(56296),d=t(26212),c=t.n(d),u=t(86500),m=t(58483);const v={class:"layout-px-spacing"},p=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Bin Cards</span></li></ol></nav></div></li></ul>',1),b={class:"d-flex"},h={class:"ms-auto w-25"},y=["innerHTML"],_={key:1,class:"d-flex align-items-center me-4 mt-2 my-4 position-relative w-100"},g={class:"flex-grow-1 text-center"},f={class:"m-0"},w={key:0},x={key:1},k={class:"d-flex justify-content-center align-items-center mt-2"},C={key:0,class:"ms-auto"},S=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l.Uk)(),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),V=[S],H={class:"my-4"},D=["onSubmit"],U=(0,l._)("h4",{class:"text-center"},"REGISTER BIN CARD ",-1),z={class:"row mb-2"},M={class:"col-md-3"},N=(0,l._)("label",{class:"form-label small"},"Item Source",-1),q={key:0,class:"col-md-3"},E=(0,l._)("label",{class:"form-label"}," Name",-1),B={key:1,class:"col-md-4"},R=(0,l._)("label",{class:"form-label small"},"Select Store",-1),I={key:2,class:"col-md-5"},Q=(0,l._)("label",{class:"form-label small"},"Select Item ",-1),$={key:3,class:"col-md-2"},A=(0,l._)("label",{class:"form-label small"},"Unit",-1),j={class:"text-center gap-2 justify-content-end"},F=(0,l._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),L={key:2},O={key:3,class:"accordion accordion-flush",id:"accordionFlushExample"},T={class:"accordion-header"},W=["data-bs-target","aria-controls"],P=["id"],Y={class:"accordion-body"},J={class:"d-flex justify-content-end mb-3"},Z=["onClick"],G=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),X=[G],K=["onClick"],ee=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,l._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),ae=[ee],te={class:"panel p-0 mt-3"},le={class:"custom-table table3 mt-3"},ne=["onClick"],ie=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary",style:{cursor:"pointer"},title:"Edit Activity"},[(0,l._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),oe=[ie],se=["onClick"],re={key:0,class:"spinner-border spinner-border-sm text-danger",role:"status","aria-hidden":"true",style:{width:"24px",height:"24px"}},de={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},ce=(0,l._)("polyline",{points:"3 6 5 6 21 6"},null,-1),ue=(0,l._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),me=[ce,ue],ve={key:0,class:"alert alert-light text-center"},pe={class:"modal fade mymodal",id:"add-item-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"itemModalLabel","aria-hidden":"true"},be={class:"modal-dialog modal-xl"},he={class:"modal-content"},ye={class:"modal-header"},_e={class:"modal-title fs-5",id:"itemModalLabel"},ge={class:"modal-body"},fe={class:"row mb-3"},we={class:"col-md-4"},xe=(0,l._)("label",{for:"quantity"}," Ref No",-1),ke={class:"col-md-4"},Ce=(0,l._)("label",{for:"quantity"}," Received Quantity",-1),Se={class:"col-md-4"},Ve=(0,l._)("label",{for:"quantity"}," Isused Quantity",-1),He={class:"col-md-12"},De=(0,l._)("label",{for:"remark"}," Remark",-1),Ue={class:"modal-footer"},ze=["disabled"],Me=["innerHTML"],Ne=(0,l._)("span",null,"Save",-1),qe={class:"modal fade mymodal",id:"edit-conversion-factor-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editConversionFactorModalLabel","aria-hidden":"true"},Ee={class:"modal-dialog modal-xl"},Be={class:"modal-content"},Re={class:"modal-header"},Ie=(0,l._)("h1",{class:"modal-title fs-5",id:"editConversionFactorModalLabel"},"Edit Conversion Factor",-1),Qe={class:"modal-body"},$e={class:"row mb-3"},Ae={class:"col-md-4"},je=(0,l._)("label",{for:"quantity"}," Ref No",-1),Fe={class:"col-md-4"},Le=(0,l._)("label",{for:"quantity"}," Received Quantity",-1),Oe={class:"col-md-4"},Te=(0,l._)("label",{for:"quantity"}," Issued Quantity",-1),We={class:"col-md-12"},Pe=(0,l._)("label",{for:"remark"}," Remark",-1),Ye={class:"modal-footer"},Je={type:"submit",class:"btn btn-primary"},Ze={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},Ge=(0,l.Uk)(" Edit ");var Xe={setup(e){(0,r.j)({title:"Bin Cards"});const a=(0,l.f3)("loadingIndicator"),t=(0,l.f3)("showMessage"),d=(0,n.iH)(!1),S=(0,l.f3)("showError"),G=JSON.parse(localStorage.getItem("user")).permissions,ee=(0,l.f3)("formatDate"),ie=((0,l.f3)("tableShimmer"),(0,l.f3)("loadingSpinner")),ce=(0,n.iH)(""),ue=(0,n.iH)(!1),Xe=(0,n.iH)(["SNo","date","ref_no","received_Qty","issued_Qty","balance_Qty","remark","authorized_by","actions"]),Ke=(0,n.iH)(""),ea=(0,n.iH)(""),aa=(0,n.iH)(""),ta=(0,n.iH)(""),la=(0,n.iH)(""),na=(0,n.iH)([]),ia=(0,n.iH)(null),oa=(0,n.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","ref_no","received_Qty","issued_Qty","balance_Qty"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),sa=s.Z.create({baseURL:"https://bushman.ink/api/v1/"}),ra=(0,n.iH)([]),da=async()=>{try{const e=await sa.get("/units");ra.value=e.data}catch(e){S(e.message)}},ca=(0,n.iH)([]),ua=e=>{if(!e)return[];let a=0;return e.map(((e,t)=>{const l=parseFloat(e.received)||0,n=parseFloat(e.issued)||0;return a+=l-n,{id:e.id,SNo:t+1,ref_no:e.ref_no,received_Qty:e.received,issued_Qty:e.issued,balance_Qty:a.toFixed(2),remark:e.remark,date:ee(e.created_at),authorized_by:e.issuer?.name||"N/A"}}))},ma=(0,l.Fl)((()=>{if(!ia.value)return[];const e=(0,m.i)(ca.value,ce.value);return e.filter((e=>e.store_item&&e.store_item.store_id===ia.value.id))})),va=(0,l.Fl)((()=>ma.value.map((e=>{if(!e.items||0===e.items.length)return{...e,balance:0};const a=e.items.reduce(((e,a)=>{const t=parseFloat(a.received)||0,l=parseFloat(a.issued)||0;return e+(t-l)}),0);return{...e,balance:a.toFixed(2)}})))),pa=async()=>{ue.value=!0;try{const e=await sa.get("bin-cards");ca.value=e.data.map(((e,a)=>({...e,SNo:a+1,id:e.id,name:e.name,unit:e.unit,unit_name:e.unit,description:e.description,remark:e.remark,items:e.items})))}catch(e){S(e.message)}finally{ue.value=!1}},ba=async()=>{const e=ca.value.find((e=>"general"===la.value&&e.name===Ke.value||!("store"!==la.value||!za.value||e.store_item_id!==za.value.id)));if(e)return void S("A bin card already exists!");d.value=!1;const a={name:Ke.value??za.value.name,unit:ta.value.short_name,description:aa.value,remark:ea.value,store_item_id:za.value.id??"",issuer_id:JSON.parse(localStorage.getItem("user")).id};try{await sa.post("/bin-cards",a);pa(),t("Bin Card registered!"),ha()}catch(l){S(l.message),console.log(l)}},ha=()=>{Ke.value="",ta.value="",aa.value="",za.value="",Ua.value=[],Ca.value="",la.value=""},ya=e=>{wa.value=e.id,ka.value=e},_a=(0,n.iH)(!1),ga=(0,n.iH)(""),fa=(0,n.iH)(""),wa=(0,n.iH)(""),xa=(0,n.iH)(""),ka=((0,n.iH)(""),(0,n.iH)("")),Ca=(0,n.iH)(""),Sa=async()=>{_a.value=!0;const e={bin_card_id:wa.value,ref_no:xa.value,received:ga.value,issued:fa.value,issuer_id:JSON.parse(localStorage.getItem("user")).id,remark:ea.value};try{await sa.post("bin-card-items",e);await pa(),document.getElementById("close_item").click(),t("Bin Card Item added")}catch(a){console.log(a),S(a.message)}finally{_a.value=!1}},Va=()=>{xa.value="",ga.value="",fa.value="",ea.value=""},Ha=e=>{const a=document.createElement("iframe");a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.border="none",document.body.appendChild(a);const t=ua(e.items),l=t.map((e=>`\n            <tr>\n                <td>${e.SNo}</td>\n                <td>${e.ref_no}</td>\n                <td>${e.received_Qty}</td>\n                <td>${e.issued_Qty}</td>\n                <td>${e.balance_Qty}</td>\n                <td>${e.remark}</td>\n                <td>${e.authorized_by}</td>\n                <td>${e.date}</td>      \n            </tr>\n        `)).join(""),n=(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),i=`\n            <!DOCTYPE html>\n            <html>\n            <head>\n            <title>Bin Card - ${e.name??e.store_item?.item?.name}</title>\n            <style>\n                .header { display: flex; justify-content: space-between; align-items: flex-start; }\n                body { font-family: Arial, sans-serif; margin: 40px; font-size: 14px; }\n                .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }\n                .logo { width: 160px; height: auto; }\n                .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n                .report-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 14px; text-align: center; border-radius: 5px; }\n                .company-title { text-align: center; margin-top: 10px; }\n                .company-title h2 { margin: 5px 0; font-size: 18px; }\n                .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 12px; line-height: 1.4; font-weight: normal; }\n                .summary-title { margin-top: 30px; margin-bottom: 2px; font-size: 16px; font-weight: bold;  }\n                .info { margin: 20px 0; }\n                .info p { margin: 5px 0; }\n                table { width: 100%; border-collapse: collapse; margin-top: 20px; border: 1px solid #666; }\n                th, td { border: 1px solid #666; padding: 6px; font-size: 13px; text-align: left; }\n                th { background-color: #f2f2f2; font-weight: bold; }\n                .text-right { text-align: right; }\n                .text-center { text-align: center; }\n                .total-row { background-color: #f0f0f0; font-weight: bold; }\n                @media print { body { margin: 8mm; } .no-print { display: none; } }\n            </style>\n            </head>\n            <body>\n                <div class="header">\n                    <img src="https://bushman.ink/copex.jpg" class="logo" />\n                    <div class="report-box">\n                        Bin Card No. <br>\n                        <span style="color:red;"> 00${e.id}/${n.split("/").slice(0,2).join("/")}</span>\n                    </div>\n                </div>\n\n                <div class="reg-info">\n                    TIN: 135-489-247<br>\n                    VRN: 40-032826-C\n                </div>\n\n                <div class="company-title">\n                    <h2>COPEX CONTRACTORS CO.LTD</h2>\n                    <div>Msamvu, P.O.BOX 678, Morogoro</div>\n                    <div>Mobile, 0713 000 777, 0657 111 555</div>\n                </div>\n                \n                <h2 style="text-align: center;">BIN CARD</h2>\n                \n                <h3 class="header">Bin Card Details</h3>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Item</th>\n                            <th>Unit</th>\n                            <th>Condition</th>\n                            <th>Current Balance</th>\n                            <th>Description</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td class="text-center">${e.name??e.store_item?.item?.name}</td>\n                            <td class="text-center">${e.unit_name||e.store_item?.item?.unit}</td>\n                            <td class="text-center">${e.store_item?.item_condition||"N/A"}</td>\n                            <td class="text-center">${e.balance}</td>\n                            <td class="text-center"> ${e.description||"N/A"}</td>\n                        </tr>\n                    </tbody>\n                </table>\n                \n                <h3 class="header">Bin Card Items</h3>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>S.No</th>\n                            <th>Ref No</th>\n                            <th>Received</th>\n                            <th>Issued </th>\n                            <th>Balance</th>\n                            <th>Remark</th>\n                            <th>Authorized By</th> \n                            <th>Date</th>       \n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${l}\n                    </tbody>\n                </table>\n            </body>\n            </html>\n        `,o=a.contentWindow.document;o.open(),o.write(i),o.close(),a.onload=()=>{a.contentWindow.focus(),a.contentWindow.print(),setTimeout((()=>{document.body.removeChild(a)}),1e3)}},Da=()=>{sa.get("/get-stores").then((e=>{na.value=e.data}))},Ua=(0,n.iH)([]),za=(0,n.iH)(""),Ma=e=>{sa.get(`/get-store-items?store_id=${e}`).then((e=>{Ua.value=e.data.map(((e,a)=>({...e,SNo:a+1,name:e?.name+" "+(e?.condition??""),category:e?.category_name,used:e?.used_quantity||0,balance:e?.balance_quantity||0,stock:e?.total_quantity||0,checked:!1}))),ue.value=!1}))};(0,l.YP)(Ca,(e=>{za.value="",Ua.value=[""],Ma(e.id)}));const Na=(0,n.iH)(null),qa=async e=>{Na.value=e.id;try{await sa.delete(`/bin-card-items/${e.id}`),await Ea(),t("Bin Card Item deleted successfully")}catch(a){console.error(a),S(a.message)}finally{Na.value=null}},Ea=async()=>{const e=await sa.get("bin-cards");ca.value=e.data.map(((e,a)=>({...e,SNo:a+1,id:e.id,name:e.name,unit:e.unit,unit_name:e.unit,description:e.description,remark:e.remark,items:e.items})))},Ba=(0,n.iH)(""),Ra=()=>{xa.value="",ga.value="",fa.value="",ea.value=""},Ia=e=>{console.log("Editing item:",e),Ba.value=e.id,xa.value=e.ref_no,ga.value=e.received_Qty,fa.value=e.issued_Qty,ea.value=e.remark},Qa=async()=>{ue.value=!0;const e={ref_no:xa.value,received:ga.value,issued:fa.value,remark:ea.value};try{await sa.put(`bin-card-items/${Ba.value}`,e);Ea(),t("Bin Card Item updated"),document.getElementById("close_editing").click(),Ra()}catch(a){console.log(a),S(a.message)}finally{ue.value=!1}};return(0,l.bv)((()=>{pa(),da(),Da()})),(e,t)=>{const s=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",v,[p,(0,l._)("div",b,[(0,l._)("div",h,[(0,l.Wm)((0,n.SU)(c()),{modelValue:ia.value,"onUpdate:modelValue":t[0]||(t[0]=e=>ia.value=e),options:na.value,placeholder:"select store",label:"name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])])]),ue.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,n.SU)(a)()},null,8,y)):((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("div",g,[(0,l._)("h3",f,[ia.value?((0,l.wg)(),(0,l.iD)("span",w,"BIN CARDS FOR "+(0,i.zw)(ia.value.name),1)):((0,l.wg)(),(0,l.iD)("span",x," SELECT A STORE TO VIEW BIN CARDS"))]),(0,l._)("div",k,[(0,l.Wm)(u.Z,{filterValue:ce.value,"onUpdate:filterValue":t[1]||(t[1]=e=>ce.value=e)},null,8,["filterValue"])])]),ia.value&&(0,n.SU)(G).includes("can_create_bin_card")?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=e=>d.value=!d.value)},V)])):(0,l.kq)("",!0)])),(0,l._)("div",H,[d.value?((0,l.wg)(),(0,l.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,o.iM)(ba,["prevent"])},[U,(0,l._)("div",z,[(0,l._)("div",M,[N,(0,l.Wm)((0,n.SU)(c()),{modelValue:la.value,"onUpdate:modelValue":t[3]||(t[3]=e=>la.value=e),options:["store","general"],placeholder:"select source",searchable:!0,multiple:!1,required:!0,"allow-empty":!0},null,8,["modelValue"])]),"general"===la.value?((0,l.wg)(),(0,l.iD)("div",q,[E,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Name","onUpdate:modelValue":t[4]||(t[4]=e=>Ke.value=e),required:""},null,512),[[o.nr,Ke.value]])])):(0,l.kq)("",!0),"store"===la.value?((0,l.wg)(),(0,l.iD)("div",B,[R,(0,l.Wm)((0,n.SU)(c()),{modelValue:Ca.value,"onUpdate:modelValue":t[5]||(t[5]=e=>Ca.value=e),options:na.value,placeholder:"select store",label:"name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,l.kq)("",!0),Ca.value?((0,l.wg)(),(0,l.iD)("div",I,[Q,(0,l.Wm)((0,n.SU)(c()),{modelValue:za.value,"onUpdate:modelValue":t[6]||(t[6]=e=>za.value=e),options:Ua.value,placeholder:"select item",label:"name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,l.kq)("",!0),"general"===la.value?((0,l.wg)(),(0,l.iD)("div",$,[A,(0,l.Wm)((0,n.SU)(c()),{modelValue:ta.value,"onUpdate:modelValue":t[7]||(t[7]=e=>ta.value=e),options:ra.value,placeholder:"select unit",label:"short_name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,l.kq)("",!0)]),(0,l._)("div",j,[(0,l._)("button",{type:"button",class:"btn btn-danger me-3",onClick:t[8]||(t[8]=e=>{d.value=!1,ha()})},"Cancel"),F])],40,D)):(0,l.kq)("",!0)]),ia.value?((0,l.wg)(),(0,l.iD)("div",O,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(va),((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"accordion-item",key:e.id},[(0,l._)("h2",T,[(0,l._)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapse-"+e.id,"aria-expanded":"false","aria-controls":"flush-collapse-"+e.id},(0,i.zw)(a+1)+" :    "+(0,i.zw)(e.name??e.store_item?.item?.name)+"    "+(0,i.zw)(e.store_item.item.description)+"    "+(0,i.zw)(e.store_item?.item_condition)+"        :   "+(0,i.zw)(e.balance)+"   "+(0,i.zw)(e.unit_name||e.store_item?.item?.unit)+"   "+(0,i.zw)(e.description),9,W)]),(0,l._)("div",{id:"flush-collapse-"+e.id,class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},[(0,l._)("div",Y,[(0,l._)("div",J,[(0,l._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#add-item-modal",onClick:a=>ya(e)},X,8,Z),(0,l._)("button",{class:"btn btn-success ms-2",onClick:a=>Ha(e)},ae,8,K)]),(0,l._)("div",te,[(0,l._)("div",le,[(0,l.Wm)(s,{data:ua(e.items),columns:Xe.value,options:oa.value},{actions:(0,l.w5)((e=>[(0,n.SU)(G).includes("can_edit_bin_card_items")?((0,l.wg)(),(0,l.iD)("a",{key:0,href:"javascript:;",class:"edit me-3",onClick:a=>Ia(e.row),"data-bs-toggle":"modal","data-bs-target":"#edit-conversion-factor-modal"},oe,8,ne)):(0,l.kq)("",!0),(0,n.SU)(G).includes("can_delete_bin_card_items")?((0,l.wg)(),(0,l.iD)("a",{key:1,href:"javascript:;",class:"cancel",onClick:a=>qa(e.row)},[Na.value===e.row.id?((0,l.wg)(),(0,l.iD)("span",re)):((0,l.wg)(),(0,l.iD)("svg",de,me))],8,se)):(0,l.kq)("",!0)])),_:2},1032,["data","columns","options"])])])])],8,P)])))),128)),0===(0,n.SU)(va).length?((0,l.wg)(),(0,l.iD)("div",ve," No bin cards found for the selected store ")):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("div",L))]),(0,l._)("div",pe,[(0,l._)("div",be,[(0,l._)("div",he,[(0,l._)("div",ye,[(0,l._)("h1",_e,"Add Bin Card Entry For "+(0,i.zw)(ka.value.name??ka.value.store_item?.item?.name),1),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[9]||(t[9]=e=>Va()),id:"close_item"})]),(0,l._)("form",{onSubmit:t[15]||(t[15]=(0,o.iM)((e=>Sa()),["prevent"]))},[(0,l._)("div",ge,[(0,l._)("div",fe,[(0,l._)("div",we,[xe,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>xa.value=e),class:"form-control",placeholder:"Enter Ref No",step:"any",required:""},null,512),[[o.nr,xa.value]])]),(0,l._)("div",ke,[Ce,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=e=>ga.value=e),class:"form-control",placeholder:"Enter Received Quantity",step:"any"},null,512),[[o.nr,ga.value]])]),(0,l._)("div",Se,[Ve,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>fa.value=e),class:"form-control",placeholder:"Enter Issued Quantity",step:"any"},null,512),[[o.nr,fa.value]])]),(0,l._)("div",He,[De,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>ea.value=e),class:"form-control",placeholder:"Enter Remark"},null,512),[[o.nr,ea.value]])])])]),(0,l._)("div",Ue,[(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[14]||(t[14]=e=>Va()),id:"close_item"},"Close"),(0,l._)("button",{class:"btn btn-primary me-2 mt-1",disabled:_a.value},[_a.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,n.SU)(ie)()},null,8,Me)):(0,l.kq)("",!0),Ne],8,ze)])],32)])])]),(0,l._)("div",qe,[(0,l._)("div",Ee,[(0,l._)("div",Be,[(0,l._)("div",Re,[Ie,(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[16]||(t[16]=e=>Ra())})]),(0,l._)("form",{onSubmit:t[22]||(t[22]=(0,o.iM)((e=>Qa(Ba.value)),["prevent"]))},[(0,l._)("div",Qe,[(0,l._)("div",$e,[(0,l._)("div",Ae,[je,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=e=>xa.value=e),class:"form-control",placeholder:"Enter Ref No",step:"any"},null,512),[[o.nr,xa.value]])]),(0,l._)("div",Fe,[Le,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=e=>ga.value=e),class:"form-control",placeholder:"Enter Quantity",step:"any"},null,512),[[o.nr,ga.value]])]),(0,l._)("div",Oe,[Te,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=e=>fa.value=e),class:"form-control",placeholder:"Enter Quantity",step:"any"},null,512),[[o.nr,fa.value]])]),(0,l._)("div",We,[Pe,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=e=>ea.value=e),class:"form-control",placeholder:"Enter Remark"},null,512),[[o.nr,ea.value]])])])]),(0,l._)("div",Ye,[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[21]||(t[21]=e=>Ra()),id:"close_editing"},"Close"),(0,l._)("button",Je,[ue.value?((0,l.wg)(),(0,l.iD)("span",Ze)):(0,l.kq)("",!0),Ge])])],32)])])])],64)}}};const Ke=Xe;var ea=Ke}}]);
//# sourceMappingURL=1656.46f21c31.js.map