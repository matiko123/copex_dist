{"version":3,"file":"js/7180.a2aa4a88.js","mappings":"g6FA2LIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,iBAIjB,MAAMC,EAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAGPC,GAAQC,EAAAA,EAAAA,MACRC,GAAUC,EAAAA,EAAAA,KAAI,GACdC,GAAeC,EAAAA,EAAAA,IAAO,gBACtBC,GAAiBD,EAAAA,EAAAA,IAAO,kBAExBE,GADOC,KAAKC,MAAMC,aAAaC,QAAQ,UACrBR,EAAAA,EAAAA,KAAI,IACtBS,GAAUT,EAAAA,EAAAA,IAAI,CAAC,MAAM,YAAY,eAAgB,OAAO,cAAc,oBAAoB,oBAAoB,WAAW,gBAAgB,WACzIU,GAAeV,EAAAA,EAAAA,IAAI,CAAC,MAAO,OAAO,oBAAoB,oBAAoB,WAE1EW,KADcT,EAAAA,EAAAA,IAAO,gBACTA,EAAAA,EAAAA,IAAO,cACnBU,IAAaV,EAAAA,EAAAA,IAAO,cAEpBW,KADaX,EAAAA,EAAAA,IAAO,eACVF,EAAAA,EAAAA,IAAI,KACdc,IAAOd,EAAAA,EAAAA,IAAI,IAIXe,IAHmBV,KAAKC,MAAMC,aAAaC,QAAQ,SAASQ,aAG7ChB,EAAAA,EAAAA,IAAI,CACrBiB,QAAS,IACTC,cAAe,CAAC,IAAI,IAAK,KACzBC,KAAM,kCACNC,eAAgB,CAAEC,QAAS,uBAC3BC,SAAU,GACVC,SAAU,CACNC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAEVC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACHC,MAAO,oCACPC,OAAQ,GACRC,kBAAmB,YACnBC,MAAO,YAEXC,kBAAkB,KAGhBC,IAAQpC,EAAAA,EAAAA,IAAI,IACZqC,IAAOrC,EAAAA,EAAAA,IAAI,IACXsC,GAAaC,IACfH,GAAMI,MAAQD,EACdF,GAAKG,MAAQD,EACb1B,GAAQ2B,MAAQD,EAAK1B,SAAW,GAChCC,GAAK0B,MAAQD,EAAKzB,MAAQ,GAC1B2B,GAAWD,MAAQD,EAAKG,MAAMC,KAAI,CAACC,EAAKC,KAAN,IAC3BD,EACHE,IAAMD,EAAQ,EACdD,KAAOA,EAAKA,KAAK9B,UAMnBiC,IAAc/C,EAAAA,EAAAA,IAAI,IACtBgD,GAAiBC,UACrB,IACE,MAAMC,QAAiBzD,EAAc0D,IAAI,qBAEnCT,EAAQQ,EAASX,KACpBP,QAAOK,GAA2B,IAAnBA,EAAKe,YACpBC,SAAQhB,GAAQA,EAAKK,MAAMC,KAAI,CAACW,EAAGT,KAAJ,IAC3BS,EACHC,IAAMV,EAAQ,EACdW,UAAYF,EAAGG,oBACfb,KAAOU,EAAGV,KAAK9B,KACf4C,YAAcJ,EAAGV,KAAKc,YACtBC,kBAAoBL,EAAGM,kBACvBC,kBAAmBP,EAAGQ,kBACtBC,SAAWT,EAAGM,kBAAoBN,EAAGQ,kBACrCE,cAAgBpD,GAAW0C,EAAGW,YAC9BC,aACI7B,EAAK6B,cAAcrD,QAAQsD,WAC3B,MACA9B,EAAK6B,cAAcpD,WAK3BiC,GAAYP,MAAQE,EACpB,MAAO0B,GACPzD,GAAUyD,EAAMC,SAzBlB,QA2BEjE,EAAgBoC,OAAQ,KAMxB8B,EAAAA,EAAAA,KACI,IAAMzE,EAAM0E,SACZ,KACAnE,EAAgBoC,OAAQ,EACxBQ,OAEA,CAAEwB,MAAM,IAIZ,MAAM/B,IAAazC,EAAAA,EAAAA,IAAI,I,OAEvByE,EAAAA,EAAAA,KAAU,KACNrE,EAAgBoC,OAAQ,EACxBQ,Q,wuGCrSR,MAAM0B,EAAc,EAEpB","sources":["webpack://cork-vue3/./src/views/goodReturnNotes/pending.vue","webpack://cork-vue3/./src/views/goodReturnNotes/pending.vue?b5a3"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\"\r\n                                    >Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\" ><span>Good Return Notes Summary</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <h4 class=\"text-center\">GOOD RETURN NOTES</h4>\r\n                    <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"returnNotes\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #actions=\"props\">\r\n                                <div class=\"d-flex justify-content-center align-items-center\"></div>\r\n                              \r\n                                        <a href=\"javascript:;\" class=\"edit me-2\" \r\n                                             data-bs-toggle=\"modal\" \r\n                                             data-bs-target=\"#view_store\"\r\n                                             id=\"back-modal\"\r\n                                            @click=\"fillModal(props.row)\"\r\n                                        >\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"text-primary bi bi-eye\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n  <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n</svg>\r\n\r\n                                        </a>\r\n                                        \r\n                        \r\n                            </template>\r\n                     <template #item=\"props\">\r\n                       <span :class=\"props.row.shortage > 0 ? 'text-danger': 'text-dark'\">{{ props.row.item }}</span>     \r\n                    </template>\r\n                     <template #remark=\"props\">\r\n                       <span :class=\"props.row.shortage > 0 ? 'text-danger': 'text-dark'\">{{ props.row.remark }}</span>     \r\n                    </template>\r\n                      <template #date_returned=\"props\">\r\n                       <span :class=\"props.row.shortage > 0 ? 'text-danger': 'text-dark'\">{{ props.row.date_returned}}</span>     \r\n                    </template>\r\n                      <template #quantity_received=\"props\">\r\n                       <span :class=\"props.row.shortage > 0 ? 'text-danger': 'text-dark'\">{{ props.row.quantity_received }}</span>     \r\n                    </template>\r\n                      <template #shortage=\"props\">\r\n                       <span :class=\"props.row.shortage > 0 ? 'text-danger': 'text-dark'\">{{ props.row.shortage }}</span>     \r\n                    </template>\r\n                      <template #source_store=\"props\">\r\n                       <span :class=\"props.row.shortage > 0 ? 'text-danger': 'text-dark'\">{{ props.row.source_store }}</span>     \r\n                    </template>\r\n                      </v-client-table>\r\n                      \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n   </div>\r\n \r\n\r\n\r\n\r\n\r\n\r\n     <!-- store preview modal starts -->\r\n          <div class=\"modal fade mymodal\" id=\"view_store\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\"> {{ store.project }} - {{ store.name }} </h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\" @click=\"clearForm\"></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n\r\n \r\n    <form \r\n    v-if=\"note.status_id === 9\"\r\n    @submit.prevent=\"receiverRemark(note)\">\r\n\r\n          <div class=\"row layout-top-spacing\" style=\"max-height: 67vh; overflow-y: auto;\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <table class=\"table table-bordered mb-4\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Item</th>\r\n                                    <th>Returned Quantity</th>\r\n                                    <th>Received Quantity</th>\r\n                                    <th>Remark</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(item, idx) in storeItems\" :key=\"item.id || idx\">\r\n                                    <td>{{ item.item }}</td>\r\n                                    <td>{{ item.returned_quantity }}</td>\r\n                                    <td>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            class=\"form-control\"\r\n                                            v-model=\"item.received_quantity\"\r\n                                            placeholder=\"Enter received quantity\"\r\n                                            min=\"0\"\r\n                                            required\r\n                                        />\r\n                                    </td>\r\n                                    <td>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            class=\"form-control\"\r\n                                            v-model=\"item.remark\"\r\n                                            placeholder=\"Enter Remark\"\r\n                                        />\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n        <textarea class=\"form-control\" placeholder=\"Enter General Remarks\"  v-model=\"remark\" ></textarea>\r\n        <div class=\"d-flex\">\r\n            <div class=\"ms-auto\">\r\n              <button type=\"submit\" class=\"btn btn-primary mt-1\" :disabled=\"sending\">\r\n                <span v-if=\"sending\" v-html=\"loadingSpinner()\">\r\n                </span>\r\n                <span v-else>\r\n                  Submit\r\n                </span>\r\n            </button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n          <div v-else class=\"row layout-top-spacing\" style=\"max-height: 67vh; overflow-y: auto;\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"storeItems\" :columns=\"itemsColumns\" :options=\"table_option\" >\r\n                            <template #actions=\"props\">\r\n                                <div class=\"d-flex justify-content-center align-items-center\"></div>                \r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    <div v-if=\"note.remark\" class=\"mb-3\">\r\n        <label class=\"form-label fw-bold\">Remark:</label>\r\n        <div class=\"border rounded p-3 bg-light\">\r\n            {{ note.remark }}\r\n        </div>\r\n    </div >\r\n\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n      <!-- store preview modal ends -->\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject,watch } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Return Notes' });\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n     import { useRoute } from 'vue-router';\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    \r\n    const route = useRoute();\r\n    const sending = ref(false)\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['Sno','return_no','source_store', 'item','description','quantity_returned','quantity_received','shortage','date_returned','remark']);\r\n    const itemsColumns = ref(['SNo', 'item','returned_quantity','received_quantity','remark']);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const formatDate = inject('formatDate');\r\n    const enforceMax = inject('enforceMax');\r\n    const project = ref('')\r\n    const name = ref('')\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n\r\n\r\n    const table_option = ref({\r\n        perPage: 100,\r\n        perPageValues: [100,200, 500],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: [],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n    \r\n    const store = ref('')\r\n    const note = ref('')\r\n    const fillModal = (data) => {\r\n        store.value = data;\r\n        note.value = data\r\n        project.value = data.project || '';\r\n        name.value = data.name || '';\r\n        storeItems.value = data.items.map((item,index)=>({\r\n            ...item,\r\n            SNo : index + 1,\r\n            item : item.item.name,\r\n        }))\r\n    }\r\n\r\n\r\n\r\n    const returnNotes = ref([])\r\nconst getReturnNotes = async () => {\r\n  try {\r\n    const response = await axiosInstance.get('good-return-notes');\r\n\r\n    const items = response.data\r\n      .filter(note => note.status_id === 9)\r\n      .flatMap(note => note.items.map((it,index)=>({\r\n        ...it,\r\n        Sno : index + 1,\r\n        return_no : it.good_return_note_id,\r\n        item : it.item.name,\r\n        description : it.item.description,\r\n        quantity_returned : it.returned_quantity,\r\n        quantity_received :it.received_quantity,\r\n        shortage : it.returned_quantity - it.received_quantity,\r\n        date_returned : formatDate(it.created_at),\r\n        source_store:\r\n            note.source_store?.project.short_name +\r\n            ' : ' +\r\n            note.source_store?.name\r\n      }))\r\n\r\n      );\r\n\r\n    returnNotes.value = items;\r\n  } catch (error) {\r\n    showError(error.message);\r\n  } finally {\r\n    loading_spinner.value = false;\r\n\r\n  }\r\n};\r\n\r\n\r\n    watch(\r\n        () => route.params,\r\n        () => {\r\n        loading_spinner.value = true;\r\n        getReturnNotes();\r\n        },\r\n        { deep: true }\r\n    );\r\n\r\n\r\n    const storeItems = ref([])\r\n\r\n    onMounted(() => {\r\n        loading_spinner.value = true;\r\n        getReturnNotes();\r\n    });\r\n</script>\r\n","import script from \"./pending.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./pending.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./pending.vue?vue&type=style&index=0&id=5b6f471e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","route","useRoute","sending","ref","tableShimmer","inject","loadingSpinner","loading_spinner","JSON","parse","localStorage","getItem","columns","itemsColumns","showError","formatDate","project","name","table_option","permissions","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","store","note","fillModal","data","value","storeItems","items","map","item","index","SNo","returnNotes","getReturnNotes","async","response","get","status_id","flatMap","it","Sno","return_no","good_return_note_id","description","quantity_returned","returned_quantity","quantity_received","received_quantity","shortage","date_returned","created_at","source_store","short_name","error","message","watch","params","deep","onMounted","__exports__"],"sourceRoot":""}