{"version":3,"file":"js/999.f3ecce23.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/globalSearch.js","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue?f760","webpack://cork-vue3/./src/views/assets/bincards.vue","webpack://cork-vue3/./src/views/assets/bincards.vue?dbf2"],"sourcesContent":["export function globalSearch(data, keyword) {\r\n  const lowerKeyword = keyword.toLowerCase().trim()\r\n  if (!lowerKeyword) return data\r\n\r\n  const containsKeyword = obj => {\r\n    if (obj == null) return false\r\n    if (typeof obj === 'string') return obj.toLowerCase().includes(lowerKeyword)\r\n    if (Array.isArray(obj)) return obj.some(containsKeyword)\r\n    if (typeof obj === 'object')\r\n      return Object.values(obj).some(containsKeyword)\r\n    return false\r\n  }\r\n\r\n  return data.filter(item => containsKeyword(item))\r\n}","<template>\r\n     <form @submit.prevent class=\"input-group container\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control border-end-0\"\r\n      placeholder=\"Search a word...\"\r\n      v-model=\"filter\"\r\n    >\r\n    <span class=\"input-group-text bg-white border-start-0\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z\"/>\r\n      </svg>\r\n    </span>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\n\r\n\r\nconst emit = defineEmits(['update:filterValue'])\r\nconst props = defineProps({\r\n  filterValue: String\r\n})\r\nconst filter = ref(props.filterValue || null)\r\n\r\nwatch(filter, val => emit('update:filterValue', val))\r\n</script>\r\n","import script from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"layout-px-spacing\">  \r\n    <ul class=\"navbar-nav flex-row mt-2\">\r\n      <li>\r\n        <div class=\"page-header\">\r\n          <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb\">\r\n              <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Assets</a></li>\r\n              <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Fuel Cards</span></li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n\r\n    <!-- Centered Header -->\r\n    <div class=\"flex-grow-1 text-center\">\r\n                <h3 class=\"m-0\">ASSET BIN CARDS</h3>\r\n                <div class=\"d-flex justify-content-center align-items-center mt-2\">\r\n                    <global-search-field\r\n                        v-model:filterValue=\"filter\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n\r\n      <div class=\"d-flex justify-content-end mb-3\">\r\n                <button class=\"btn btn-primary\" @click=\"asset_bincard = !asset_bincard\">\r\n                   <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\"> <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/> <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/> </svg>\r\n                </button>\r\n            </div>\r\n\r\n      <div class=\"my-4\">\r\n            <!-- item registration form starts -->\r\n            <form v-if=\"asset_bincard\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerBinCard\">\r\n                <h4 class=\"text-center\">REGISTER BIN CARD </h4>\r\n\r\n                <div class=\"row mb-2\">\r\n                    <div class=\"col-md-6\">\r\n                        <label class=\"form-label\">Select Asset</label>\r\n                        <Multiselect \r\n                            v-model=\"asset\"\r\n                            :options=\"assets\" \r\n                            label=\"name\"  \r\n                            track-by=\"id\" \r\n                            placeholder=\"Select An Asset\"\r\n                            :searchable=\"true\"\r\n                            :close-on-select=\"true\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div class=\"col-md-6\">\r\n                        <label class=\"form-label\">Description</label>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Enter Description\" v-model=\"description\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"text-center gap-2 justify-content-end\">\r\n                    <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"asset_bincard = false; resetForm();\">Cancel</button>\r\n                    <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading\">\r\n                        <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n                        <span v-else>Register</span>\r\n                    </button>\r\n                </div>\r\n            </form>\r\n            <!-- item registration form ends-->\r\n        </div>\r\n         <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n    <!-- Bin Cards List -->\r\n    <div v-else class=\"accordion accordion-flush\" id=\"accordionFlushExample\">\r\n      <div class=\"accordion-item\" v-for=\"(card, index) in filteredData\" :key=\"card.id\">\r\n        <h2 class=\"accordion-header\">\r\n          <button class=\"accordion-button collapsed\" type=\"button\"\r\n                  data-bs-toggle=\"collapse\"\r\n                  :data-bs-target=\"'#flush-collapse-' + index\"\r\n                  aria-expanded=\"false\"\r\n                  :aria-controls=\"'flush-collapse-' + index\">\r\n             {{ card.asset }} &nbsp;&nbsp;&nbsp; Consumption Type: {{ card.consuption_type || '--' }} &nbsp;&nbsp;&nbsp;  Balance: {{ card.balance }} &nbsp; ltrs\r\n          </button>\r\n        </h2>\r\n        <div :id=\"'flush-collapse-' + index\" class=\"accordion-collapse collapse\" data-bs-parent=\"#accordionFlushExample\">\r\n          <div class=\"accordion-body\">\r\n\r\n            <div class=\"d-flex justify-content-end mb-3\">  \r\n              <button class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#add-item-modal\" @click=\"openAddTransactionModal(card)\"> \r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n                  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                  <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n                </svg>\r\n              </button>\r\n              <button class=\"btn btn-success ms-2\" @click=\"printBinCard(card.asset_id)\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                  <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                  <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                </svg>\r\n              </button>\r\n            </div> \r\n\r\n            <div class=\"panel p-0 mt-3\">                            \r\n              <div class=\"custom-table table3 mt-3\" >\r\n                                <v-client-table \r\n  :data=\"getTableData(card.transactions)\"\r\n  :columns=\"transactionColumns\"\r\n  :options=\"table_option\">\r\n     <template #actions=\"props\">\r\n                              \r\n                                <a v-if=\"!props.row.final || props.row.final === '--' || !props.row.work_covered || props.row.work_covered === '--'\" href=\"javascript:;\" class=\"edit me-3\" @click=\"openEditModal(props.row); getUnits()\" data-bs-toggle=\"modal\" :data-bs-target=\"'#edit-transaction-modal'\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye text-primary\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n  <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n</svg>\r\n                                </a>\r\n                            </template>\r\n</v-client-table>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n       <!-- add transaction starts -->\r\n    <div class=\"modal fade mymodal\" id=\"add-item-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"itemModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-xl\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"itemModalLabel\">Create Bin Card Transaction for {{ selectedCard?.asset }}</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closebinCardModal()\" id=\"close_item\"></button>\r\n                </div>\r\n                <form @submit.prevent=\"addTransaction()\">\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"row mb-3\">\r\n                           <div class=\"col-md-3\">\r\n    <label for=\"direction\">Transaction Type</label>\r\n    <Multiselect\r\n        v-model=\"direction\"\r\n        :options=\"directions\"\r\n        label=\"label\"\r\n        track-by=\"value\"\r\n        placeholder=\"Select Direction\"\r\n        :searchable=\"true\"\r\n        :allow-empty=\"false\"\r\n        required\r\n    />\r\n</div>\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"quantity\">Quantity</label>\r\n                                <input type=\"number\" v-model=\"quantity\" class=\"form-control\" placeholder=\"Enter Quantity\">\r\n                            </div>\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"date\">Date</label>\r\n                                <input type=\"date\" v-model=\"date\" class=\"form-control\">\r\n                            </div>\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"ratio\">Ratio</label>\r\n                                <input type=\"number\" v-model=\"ratio\" class=\"form-control\" placeholder=\"Enter Ratio\" required>\r\n                            </div>\r\n                            \r\n                            <div class=\"col-md-4\">\r\n                                <label for=\"initial_reading\">Initial ordometer Reading</label>\r\n                                <input type=\"number\" v-model=\"initial_reading\" class=\"form-control\" placeholder=\"Enter Initial Reading\" required>\r\n                            </div>\r\n           \r\n                            <div class=\"col-md-4\">\r\n                                <label for=\"work_target\">Work Target</label>\r\n                                <input type=\"number\" v-model=\"work_target\" class=\"form-control\" placeholder=\"Enter Work Target\">\r\n                            </div>\r\n                            <div class=\"col-md-4\">\r\n                                <label for=\"unit\">Unit</label>\r\n                                <Multiselect\r\n                                    v-model=\"unit\"\r\n                                    :options=\"units\"\r\n                                    label=\"short_name\"\r\n                                    track-by=\"id\"\r\n                                    placeholder=\"Select Unit\"\r\n                                    :searchable=\"true\"\r\n                                    :allow-empty=\"false\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12\">\r\n                                <label for=\"task\">Task</label>\r\n                                <input type=\"text\" v-model=\"task\" class=\"form-control\" placeholder=\"Enter Task\">\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" @click=\"closebinCardModal()\" id=\"close_item\">Close</button>\r\n                        <button class=\"btn btn-primary me-2 mt-1\" :disabled=\"isSending\">\r\n                            <span v-if=\"isSending\" v-html=\"loadingSpinner()\"></span>\r\n                            <span>Save</span>\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- add transaction ends -->\r\n\r\n             <!-- Edit bin card item  modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"edit-transaction-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editTransactionModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editTransactionModalLabel\"> {{ selectedCard?.asset }} Bin Card Transaction</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateBinCardTransaction()\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row mb-3\">\r\n                <div class=\"col-md-4\">\r\n                                <label for=\"initial_reading\">Initial Ordometer Reading</label>\r\n                                <input type=\"number\" v-model=\"initial_reading\" class=\"form-control\" placeholder=\"Enter Initial Reading\" readonly>\r\n                            </div>\r\n                            <div class=\"col-md-4\">\r\n                                <label for=\"final_reading\">Final Ordometer Reading</label>\r\n                                <input type=\"number\" v-model=\"final_reading\" class=\"form-control\" placeholder=\"Enter Final Reading\">\r\n                            </div>\r\n                             <div class=\"col-md-4\">\r\n                                <label for=\"work_covered\">Work Covered</label>\r\n                                <input type=\"number\" v-model=\"work_covered\" class=\"form-control\" placeholder=\"Enter Work Covered\">\r\n                            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"close_transaction_editing\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Save\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Edit bin card item modal ends -->\r\n\r\n  </div>\r\n</template>\r\n\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject, computed } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import globalSearchField from '@/components/reusables/globalSearchField.vue';\r\n    import { globalSearch } from '@/components/reusables/globalSearch';\r\n    \r\n    useMeta({ title: 'binCards' });  \r\n    \r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const tableShimmer = inject('tableShimmer');JSON.parse(localStorage.getItem(\"user\"))\r\n    const loadingSpinner = inject('loadingSpinner'); \r\n    const formatNumber = inject('formatNumber');\r\n    const asset_bincard = ref(false);\r\n    \r\n    const loading_spinner = ref(false);\r\n    const transactionColumns = ref(['SNo','task','ratio','description','initial','final','work_target','work_covered','unit','quantity','balance','date','actions']);\r\n    const binCards = ref([]);\r\n    const filter = ref('')\r\n\r\n    const filteredData = computed(() => {\r\n      return globalSearch(binCards.value, filter.value);\r\n    });\r\n\r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },       \r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const directions = ref([\r\n        { label: 'Received', value: 'INCREMENT' },\r\n        { label: 'Issued',   value: 'DECREMENT' }\r\n    ]);\r\n \r\n  \r\n    const getAssetBincard = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await axiosInstance.get('asset-bincards');\r\n          binCards.value = response.data.map((item, index) => ({\r\n  ...item,\r\n  SNo: index + 1,\r\n  consuption_type: item.asset.consuption_type,\r\n  asset: item.asset.name + \"-\" + item.asset.type_name,\r\n  fuel_required: item.amount + 'Ltrs',\r\n  balance: item.balance,\r\n  distance_cover: item.distance_cover + 'KM',\r\n  expected_trips: item.expected_trips + ' (' + item.description + ')',\r\n  transactions: item.transactions\r\n}));\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }finally{\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n    const getTableData = (transactions) => {\r\n  return transactions.map((tx, index) => ({\r\n    SNo: index + 1,\r\n    id: tx.id,\r\n    date: tx.date,\r\n    ref_no: tx.id,\r\n    task: tx.task,\r\n    ratio: tx.ratio,\r\n    direction: tx.direction,\r\n    description: tx.description,\r\n    unit: tx.unit,\r\n    quantity: tx.quantity,\r\n    initial: tx.initial_reading || '--',\r\n    final: tx.final_reading || '--',\r\n    work_covered: tx.work_covered || '--',\r\n    work_target: tx.work_target || '--',\r\n    balance: tx.balance,\r\n    rate: tx.rate,\r\n    cost: formatNumber(tx.rate * tx.quantity),\r\n    remark: tx.remark || '-'\r\n  }));\r\n};\r\n\r\n    const loading = ref(false);\r\n    const registerBinCard = async () => {\r\n        loading.value = true;\r\n        \r\n        // Check if asset already has a bin card\r\n        const existingBinCard = binCards.value.find(card => card.asset_id === asset.value.id);\r\n        if (existingBinCard) {\r\n            showError('This asset already has a bin card registered!');\r\n            loading.value = false;\r\n            return;\r\n        }\r\n        \r\n        const payload = {\r\n           asset_id: asset.value.id,\r\n           registrar_id:JSON.parse(localStorage.getItem(\"user\")).id,\r\n           description : description.value,\r\n           remark : remark.value\r\n        };\r\n\r\n        try {\r\n            const response = await axiosInstance.post('asset-bincards', payload);\r\n            GetReactiveBinCards();\r\n            showMessage('Record registered successfully!');\r\n            resetForm();\r\n        } catch (error) {\r\n          console.log(error);\r\n            showError(error.message);\r\n        } finally {\r\n            loading.value = false;\r\n        }\r\n    };\r\n\r\n    const resetForm = () => {\r\n   asset_bincard.value = false;\r\n   description.value = ''\r\n   remark.value = ''\r\n};\r\n\r\nconst selectedCard = ref(null);\r\nconst openAddTransactionModal = (card) => {\r\n    console.log(card);\r\n    selectedCard.value = card;\r\n};\r\n\r\nconst direction = ref('');\r\nconst quantity = ref('');\r\nconst rate = ref('');\r\nconst task = ref('');\r\nconst initial_reading = ref('');\r\nconst ratio = ref('');\r\nconst description = ref('');\r\nconst final_reading = ref('');\r\nconst work_target = ref('');\r\nconst work_covered = ref('');\r\nconst remark = ref('');\r\nconst isSending = ref(false);\r\nconst date = ref('');\r\n\r\nconst addTransaction = async () => {\r\n    isSending.value = true;\r\n    const payload = {\r\n        asset_bincard_id: selectedCard.value.id,\r\n        date: date.value,\r\n        direction: direction.value.value,\r\n        quantity: quantity.value,\r\n        rate: rate.value,\r\n        registrar_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n        task: task.value,\r\n        initial_reading: initial_reading.value,\r\n        final_reading: final_reading.value,\r\n        unit: unit.value.short_name,\r\n        ratio: ratio.value,\r\n        work_target: work_target.value,\r\n        work_covered: work_covered.value,\r\n        description: direction.value.label,\r\n        remark: remark.value\r\n    };\r\n\r\n    try {\r\n        const response = await axiosInstance.post('asset-bincard-transactions', payload);\r\n        GetReactiveBinCards();\r\n        showMessage('Transaction added successfully!');\r\n        document.getElementById('close_item').click();\r\n        closebinCardModal();\r\n    } catch (error) {\r\n        console.log(error);\r\n        showError(error.message);\r\n    } finally {\r\n        isSending.value = false;\r\n    }\r\n};\r\n\r\nconst closebinCardModal = () => {\r\n    direction.value = '';\r\n    quantity.value = '';\r\n    rate.value = '';\r\n    date.value = '';\r\n    task.value = '';\r\n    initial_reading.value = '';\r\n    final_reading.value = '';\r\n    ratio.value = '';\r\n    work_target.value = '';\r\n    work_covered.value = '';\r\n    description.value = '';\r\n    remark.value = '';\r\n};\r\n\r\n\r\nconst assets = ref([])\r\nconst asset = ref('')\r\nconst getAssets = async () => {\r\n   try{\r\n      const response = await axiosInstance.get('machines')\r\n      assets.value = response.data.map((item)=>({\r\n        ...item,\r\n        name : item.name + ' '+ item.type_name\r\n      }))\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n\r\n   }\r\n};\r\n\r\nconst editId = ref(null);\r\nconst openEditModal = (row) => {\r\n    console.log(row);\r\n    initial_reading.value = row.initial;\r\n    final_reading.value = row.final;\r\n    work_covered.value = row.work_covered;\r\n    editId.value = row.id;\r\n};\r\n\r\nconst updateBinCardTransaction = async () => {\r\n    isSending.value = true; \r\n    const payload = {\r\n        initial_reading: initial_reading.value,\r\n        final_reading: final_reading.value,\r\n        work_covered: work_covered.value,\r\n    };\r\n\r\n    try {\r\n        const response = await axiosInstance.put(`asset-bincard-transactions/${editId.value}`, payload);\r\n        GetReactiveBinCards();\r\n        showMessage('Transaction updated successfully!');\r\n        document.getElementById('close_transaction_editing').click();\r\n    } catch (error) {\r\n        console.log(error);\r\n        showError(error.message);\r\n    } finally {\r\n        isSending.value = false;\r\n    }\r\n};\r\n\r\n const GetReactiveBinCards = async () => {\r\nconst response = await axiosInstance.get('asset-bincards');\r\nbinCards.value = response.data.map((item, index) => ({\r\n  ...item,\r\n  SNo: index + 1,\r\n  consuption_type: item.asset.consuption_type,\r\n  asset: item.asset.name + \"-\" + item.asset.type_name,\r\n  fuel_required: item.amount + 'Ltrs',\r\n  balance: item.balance,\r\n  distance_cover: item.distance_cover + 'KM',\r\n  expected_trips: item.expected_trips + ' (' + item.description + ')',\r\n  transactions: item.transactions\r\n}));\r\n }\r\n\r\n const units = ref([])\r\n const unit = ref('')\r\nconst getUnits = async () => {\r\n  try {\r\n    const response = await axiosInstance.get('units');\r\n    units.value = response.data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    showError(error.message);\r\n  }\r\n};\r\n\r\n const printBinCard = inject('printBinCard');\r\n    \r\n    onMounted(() => {\r\n        getAssetBincard();\r\n        getAssets()\r\n        getUnits()\r\n    });\r\n</script>","import script from \"./bincards.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./bincards.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./bincards.vue?vue&type=style&index=0&id=0ec1b380&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["globalSearch","data","keyword","lowerKeyword","toLowerCase","trim","containsKeyword","obj","includes","Array","isArray","some","Object","values","filter","item","ref","props","filterValue","watch","val","emit","__exports__","useMeta","title","showMessage","inject","showError","loadingIndicator","JSON","parse","localStorage","getItem","permissions","loadingSpinner","formatNumber","asset_bincard","loading_spinner","transactionColumns","binCards","filteredData","computed","value","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","directions","label","getAssetBincard","async","response","get","map","index","SNo","consuption_type","asset","name","type_name","fuel_required","amount","balance","distance_cover","expected_trips","description","transactions","error","message","getTableData","tx","id","date","ref_no","task","ratio","direction","unit","quantity","initial","initial_reading","final","final_reading","work_covered","work_target","rate","cost","remark","loading","registerBinCard","existingBinCard","find","card","asset_id","payload","registrar_id","post","GetReactiveBinCards","resetForm","console","log","selectedCard","openAddTransactionModal","isSending","addTransaction","asset_bincard_id","short_name","document","getElementById","click","closebinCardModal","assets","getAssets","editId","openEditModal","row","updateBinCardTransaction","put","units","getUnits","printBinCard","onMounted"],"sourceRoot":""}