"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[2320],{58483:function(t,e,n){n.d(e,{i:function(){return a}});n(26699);function a(t,e){const n=e.toLowerCase().trim();if(!n)return t;const a=t=>null!=t&&("string"===typeof t?t.toLowerCase().includes(n):Array.isArray(t)?t.some(a):"object"===typeof t&&Object.values(t).some(a));return t.filter((t=>a(t)))}},86500:function(t,e,n){n.d(e,{Z:function(){return d}});var a=n(66252),i=n(49963),l=n(2262);const s=(0,a._)("span",{class:"input-group-text bg-white border-start-0"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z"})])],-1);var o={props:{filterValue:String},emits:["update:filterValue"],setup(t,{emit:e}){const n=t,o=(0,l.iH)(n.filterValue||null);return(0,a.YP)(o,(t=>e("update:filterValue",t))),(t,e)=>((0,a.wg)(),(0,a.iD)("form",{onSubmit:e[1]||(e[1]=(0,i.iM)((()=>{}),["prevent"])),class:"input-group container"},[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t)},null,512),[[i.nr,o.value]]),s],32))}};const r=o;var d=r},92320:function(t,e,n){n.r(e),n.d(e,{default:function(){return Hn}});n(26699);var a=n(66252),i=n(3577),l=n(2262),s=n(49963),o=n(87066),r=n(56296),d=n(86500),c=n(58483),u=n(42119),p=n(69218),v=n(80599),g=n.n(v);const m=t=>((0,a.dD)("data-v-0807524d"),t=t(),(0,a.Cn)(),t),h={class:"layout-px-spacing"},b={class:"navbar-nav flex-row mt-2"},y={class:"page-header"},x={class:"breadcrumb-one","aria-label":"breadcrumb"},_={class:"breadcrumb"},w={class:"breadcrumb-item"},f={href:"javascript:;"},k=m((()=>(0,a._)("li",{class:"breadcrumb-item active","aria-current":"page"}," Purchase / Payment Approal Chain ",-1))),q={class:"offcanvas offcanvas-end","data-bs-scroll":"true",tabindex:"-1",id:"offcanvasWithBothOptions","aria-labelledby":"offcanvasWithBothOptionsLabel"},C=m((()=>(0,a._)("div",{class:"offcanvas-header justify-content-between"},[(0,a._)("h5",{class:"offcanvas-title",id:"offcanvasWithBothOptionsLabel"},"VENDOR LISTS"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1))),$=["innerHTML"],D={key:1,class:"offcanvas-body"},z={class:"row"},H={class:"col-12"},S={class:"mb-3"},R={class:"list-group",id:"list-tab",role:"tablist"},O=["onClick"],A={key:0,class:"text-center mt-3 text-muted"},N={class:"d-flex justify-content-end mb-3"},T={key:0,class:"btn","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},V=m((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-list-ul",viewBox:"0 0 16 16"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"})],-1))),L=[V],U={key:1,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},P={key:0,class:"text-center my-3 text-muted",style:{"font-size":"1.1rem"}},j={key:1},E={class:"my-3"},M={class:"d-flex align-items-center justify-content-between mb-3 p-3"},B={class:"flex-grow-1"},I=m((()=>(0,a._)("h5",{class:"mb-3 text-center"},"Vendor Details",-1))),W={class:"row"},F={class:"col-md-6"},Y={class:"mb-3 ms-8"},J=m((()=>(0,a._)("strong",null,"Vendor:",-1))),Q={class:"mb-3 ms-8"},X=m((()=>(0,a._)("strong",null,"Phone:",-1))),Z={class:"mb-3 ms-8"},K=m((()=>(0,a._)("strong",null,"Email:",-1))),G={class:"col-md-6"},tt={class:"mb-3 ms-7"},et=m((()=>(0,a._)("strong",null,"Location:",-1))),nt={class:"mb-3 ms-7"},at=m((()=>(0,a._)("strong",null,"Address:",-1))),it={class:"mb-3 ms-7"},lt=m((()=>(0,a._)("strong",null,"Total Transactions Cost: ",-1))),st={class:"text-dark fw-bold"},ot={key:0,class:"d-flex justify-content-end mb-3"},rt=m((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,a._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1))),dt=(0,a.Uk)(" Print "),ct=[rt,dt],ut={class:"row layout-top-spacing"},pt={key:0,class:"col-12 text-center py-5"},vt=m((()=>(0,a._)("h5",{class:"text-muted"},"Please select a vendor from the list to view approval items",-1))),gt=[vt],mt=["innerHTML"],ht={key:2,class:"col-12 text-center py-5"},bt=m((()=>(0,a._)("h5",{class:"text-muted"},"No Transactions found for the selected vendor",-1))),yt=[bt],xt={key:3,class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},_t={class:"panel p-0"},wt={class:"custom-table table3"},ft=["onClick"],kt=m((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-eye",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),(0,a._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"})],-1))),qt=[kt],Ct=["onClick"],$t=m((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,a._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1))),Dt=[$t],zt=["onClick"],Ht=m((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-download",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v3.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3.5a.5.5 0 0 1 1 0v3.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-3.5a.5.5 0 0 1 .5-.5"}),(0,a._)("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"})],-1))),St=[Ht],Rt={class:"modal-dialog modal-fullscreen",role:"document"},Ot={class:"modal-content"},At={class:"modal-header"},Nt=m((()=>(0,a._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Approval Chain ",-1))),Tt={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Vt={class:"panel p-0"},Lt={class:"custom-table table3 table-responsive"},Ut={class:"table table-bordered table-striped"},Pt=m((()=>(0,a._)("th",null,"Order No",-1))),jt=m((()=>(0,a._)("th",null,"Requester",-1))),Et=m((()=>(0,a._)("th",null,"Date Requested",-1))),Mt=m((()=>(0,a._)("th",null,"Purpose",-1))),Bt=m((()=>(0,a._)("th",null,"Approval Chain",-1))),It={key:0},Wt={key:1},Ft={key:0},Yt={key:1},Jt=m((()=>(0,a._)("th",null,"Awaits",-1))),Qt=m((()=>(0,a._)("th",null,"Cost",-1))),Xt={key:2},Zt={key:0},Kt={key:1},Gt=m((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,a._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1))),te=[Gt],ee=(0,a.Uk)(" view History "),ne={key:0},ae={colspan:"8"},ie=m((()=>(0,a._)("b",null," Brief Description : ",-1))),le={key:0},se={key:1},oe={colspan:"8"},re=m((()=>(0,a._)("b",null," Remark : ",-1))),de={class:"modal-body"},ce={key:0,class:"d-flex justify-content-center mb-2"},ue={class:"btn-group"},pe=["disabled"],ve=["disabled"],ge=["disabled"],me={key:1,class:"mb-2 text-center"},he={key:2,class:"input-group"},be=["placeholder"],ye=["disabled"],xe=["innerHTML"],_e={key:1},we={class:"custom-table table3 table-responsive"},fe={class:"table"},ke=m((()=>(0,a._)("br",null,null,-1))),qe=m((()=>(0,a._)("br",null,null,-1))),Ce={key:0,class:"text-dark"},$e=(0,a.Uk)(),De=m((()=>(0,a._)("br",null,null,-1))),ze={key:1,class:"text-dark"},He=m((()=>(0,a._)("h4",{class:"text-center",style:{"font-size":"1.3rem"}},"APPROVAL ITEMS",-1))),Se={class:"d-flex justify-content-center mb-3"},Re={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Oe={class:"panel p-0"},Ae={class:"custom-table table3 table-responsive"},Ne={class:"table table-bordered table-striped"},Te=m((()=>(0,a._)("th",null,"ID",-1))),Ve=m((()=>(0,a._)("th",null,"Item",-1))),Le=m((()=>(0,a._)("th",null,"Decription",-1))),Ue=m((()=>(0,a._)("th",null,"Quantity",-1))),Pe=m((()=>(0,a._)("th",null,"Rate",-1))),je=m((()=>(0,a._)("th",null,"Total",-1))),Ee=m((()=>(0,a._)("th",null,"Receiver",-1))),Me={key:0,class:"text-center"},Be=m((()=>(0,a._)("th",null,"Actions",-1))),Ie={key:1},We={key:0},Fe={key:1},Ye=["onClick"],Je={key:0},Qe=m((()=>(0,a._)("br",null,null,-1))),Xe=m((()=>(0,a._)("br",null,null,-1))),Ze={key:1},Ke=m((()=>(0,a._)("br",null,null,-1))),Ge=["onUpdate:modelValue"],tn=["onClick"],en=["onUpdate:modelValue"],nn=m((()=>(0,a._)("br",null,null,-1))),an={key:0},ln={key:0,class:"text-center"},sn=["onClick"],on=m((()=>(0,a._)("path",{d:"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0"},null,-1))),rn=m((()=>(0,a._)("path",{d:"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"},null,-1))),dn=[on,rn],cn=["onClick"],un=m((()=>(0,a._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},null,-1))),pn=[un],vn=["onUpdate:modelValue","onInput"],gn=["onUpdate:modelValue"],mn=["onUpdate:modelValue"],hn=m((()=>(0,a._)("button",{class:"btn btn-outline-primary me-2"},"Diesel ",-1))),bn=m((()=>(0,a._)("button",{class:"btn btn-outline-primary me-2"},"Budget",-1))),yn=m((()=>(0,a._)("button",{class:"btn btn-outline-primary me-2"},"Subcontractor",-1))),xn=["onClick"],_n=m((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,a._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1))),wn=[_n],fn={class:"modal-footer"},kn=["disabled"],qn=["innerHTML"],Cn={key:1};var $n={setup(t){const e=(0,a.f3)("waitIndicator"),n=(0,l.iH)("");(0,r.j)({title:"Vendor Report"});const v=(0,u.yj)(),m=o.Z.create({baseURL:"https://bushman.ink/api/v1/"}),V=(0,l.iH)(!1),rt=()=>{V.value=!V.value},dt=(0,l.iH)(""),vt=(0,l.iH)(""),bt=JSON.parse(localStorage.getItem("user")).permissions,kt=(0,l.iH)(!1),$t=(JSON.parse(localStorage.getItem("user")).id,(0,l.iH)(0)),Ht=(0,l.iH)(JSON.parse(localStorage.getItem("user")).role),Gt=(0,l.iH)(["Sno","requisition","approval","purpose","type","requester","project","cost","status","date","awaits","actions"]),on=((0,l.iH)(["Sno","item","description","quantity","rate","total","actions"]),(0,l.iH)([])),rn=((0,a.f3)("whatsappAlert"),(0,l.iH)([])),un=(0,l.iH)({perPage:50,perPageValues:[50,100,200],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1,headings:{vendor:function(){return _n.value?"Beneficiary":"Vendor"}}}),_n=(0,a.Fl)((()=>"4"==v.params.group_id||"8"==v.params.group_id)),$n=()=>{Ln.value="",ea.value="",V.value=!1,dt.value=""},Dn=((0,a.f3)("showMessage"),(0,a.f3)("showError")),zn=(0,a.f3)("formatNumber"),Hn=(0,a.f3)("tableShimmer"),Sn=(0,a.f3)("formatDate"),Rn=(0,a.f3)("loadingSpinner"),On=(0,a.f3)("enforceMax"),An=(0,l.iH)([]),Nn=(0,l.iH)({}),Tn=(0,l.iH)(""),Vn=(0,l.iH)(""),Ln=(0,l.iH)(""),Un=(0,l.iH)(!1),Pn=(0,l.iH)(null);let jn=null;const En=(0,l.iH)(!1),Mn=(0,l.iH)(null),Bn=t=>{Mn.value=t.id,Wn()},In=(0,a.Fl)((()=>on.value.length?on.value.reduce(((t,e)=>{const n="string"===typeof e.cost?parseFloat(e.cost.replace(/,/g,"")):parseFloat(e.cost)||0;return t+n}),0):0)),Wn=async()=>{En.value=!0;try{const t=await m.get("vendor-approvals?vendor_id="+Mn.value);on.value=t.data.map(((t,e)=>{let n=t.status;4!=t.last_checked_in?.status?.id&&14!=t.last_checked_in?.status?.id||(n={name:t.last_checked_in.status.name,color:t.last_checked_in.status.color});let a=t.awaiting_approval?.name||"no one";4!=t.last_checked_in?.status?.id&&14!=t.last_checked_in?.status?.id||(a="no one");let i=t.awaiting_approval?.role_id||null;return 4!=t.last_checked_in?.status?.id&&14!=t.last_checked_in?.status?.id||(i=null),{...t,status:n,Sno:e+1,purpose:t.approval_group,type:t.requisition_type??t?.source,approval:"0"+t.id,approval_id:t.id,requisition:t?.requisition_id??t?.source_id,requester:t.requester?.name??t?.requester,requester_id:t.requester?.id,awaits:a,awaiter_role_id:i,vendor:t.vendor&&t.vendor.name?t.vendor.name:t.beneficiary,vendor_data:t.vendor,date:Sn(t.date),created_at:t.date,last_checked:Sn(t.last_checked_in?.approved_at),cost:t.items?zn(t.items.reduce(((t,e)=>t+(e?.quantity||0)*(e.requisition_items?.rate||0)),0)):0,approved_at:t.last_checked_in?.approved_at?new Date(t.last_checked_in.approved_at).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):null}})),on.value.sort(((t,e)=>{const n=Number(Ht.value),a=t.awaiter_role_id===n,i=e.awaiter_role_id===n;return a&&!i?-1:!a&&i?1:0}))}catch(t){Dn(t.message),console.error(t)}finally{En.value=!1}},Fn=(0,a.Fl)((()=>(0,c.i)(on.value,n.value)));(0,a.YP)((()=>v.params.group_id),((t,e)=>{t!==e&&(sa(),Wn())}));const Yn=(0,l.iH)(""),Jn=(0,l.iH)(0),Qn=(0,l.iH)(""),Xn=(0,l.iH)(""),Zn=(0,l.iH)(""),Kn=(0,l.iH)(""),Gn=(0,l.iH)(""),ta=t=>{Gn.value=t,rn.value=t.items.map(((t,e)=>({...t,order_item_id:t?.requisition_items?.id,Sno:e+1,item:t?.requisition_items?.remark,description:t?.requisition_items?.description+(t.description?" ( "+t.description+" )":""),rate:Number(t?.rate).toLocaleString()+"/=",total:(t?.quantity*t?.rate).toLocaleString()+"/=",selected:!1,rate_original:t?.rate,requesting_quantity:"",request_description:""}))),Xn.value=t.awaits,Kn.value=t.approval_description,An.value=(t.roles_sequence||[]).slice(),Yn.value=t.roles_sequence?.length>0?t.roles_sequence[t.roles_sequence.length-1].role_id:null,Nn.value=t.awaiting_approval||{},Tn.value=t.awaiting_approval?.role_id||null,Vn.value=t.id,Qn.value=t.date,Jn.value=t,Zn.value=t,Un.value=!1},ea=(0,l.iH)(""),na=async(t,e)=>{$t.value=t.items.reduce(((t,e)=>t+e.quantity*e.requisition_items?.rate),0);try{const e=new Date(t.created_at),n=`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}`,a=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Print Voucher</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; font-weight: 500; color: #000; }\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\n  .logo { width: 160px; height: auto; }\n  .voucher-box { border: 1px solid #000; padding: 5px 10px; font-weight: 600; font-size: 8px; color: #000; margin-left: auto; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; color: #000; }\n  .company-title h2 { margin: 5px 0; font-weight: 700; color: #000; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 11px; line-height: 1.4; font-weight: 500; color: #000; }\n  .section-title { text-align: center; font-weight: 700; text-decoration: underline; margin: 20px 0 10px 0; color: #000; }\n  .title { text-align: center; font-weight: 700; margin: 20px 0 10px 0; color: #000; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; border-radius: 4px; overflow: hidden; }\n  table.details td, table.items th, table.items td, .signatures th, .signatures td { border: 0.5px solid #000; padding: 6px; font-weight: 500; color: #000; }\n  table.items thead tr th { background-color: #f8f8f8; border-bottom: 1px solid #000; font-weight: 700; color: #000; }\n  .text-right { text-align: right; color: #000; }\n  .text-center { text-align: center; color: #000; }\n  .text-success { color: green; font-weight: 600; }\n  .signature-area { margin-top: 30px; }\n  .signature-line { border-top: 1px solid #000; width: 200px; display: inline-block; margin-top: 50px; }\n  .text-danger { color: red; font-weight: 600; }\n  strong { font-weight: 700; color: #000; }\n  p { color: #000; }\n  td { color: #000; }\n  th { color: #000; }\n  div { color: #000; }\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n<div class="header">\n  <img src="${p}" class="logo" />\n  <div class="voucher-box">\n    ${t.type.toLowerCase().includes("voucher")||t.type.toLowerCase().includes("labour")?"Voucher":"LPO"} NO: <br>\n    <span style="color:red; font-weight: 700;">${("0000"+t.approval).slice(-4)}/${n}</span>\n  </div>\n</div>\n<div class="reg-info">\n  TIN: 135-489-247<br>\n  VRN: 40-032826C\n</div>\n<div class="company-title">\n  <h3>COPEX CONTRACTORS CO.LTD</h3>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\n</div>\n<div class="section-title"> ${t?.purpose?.toUpperCase()} DETAILS</div>\n\n<div class="title">PROJECT :  ${t?.project?.toUpperCase()??"NO PROJECT"}</div>\n\n<p><strong>ORDER ITEMS</strong></p>\n<table class="items">\n  <thead>\n    <tr>\n      <th>SN</th>\n      <th>Item</th>\n      <th>Description</th>\n      <th>Quantity</th>\n      <th>Rate</th>\n      <th>Total</th>\n      <th>Receiver</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${t.items.map(((t,e)=>`\n    <tr>\n      <td>${e+1}</td>\n      <td>${t.requisition_items?.remark||"N/A"}</td>\n      <td>${t.requisition_items?.description+(t.description?" , "+t.description:"")||"N/A"}</td>\n      <td class="text-right">${t.requisition_items?.quantity||"0"}</td>\n      <td class="text-right">${Number(t.requisition_items?.rate||0).toLocaleString()}/=</td>\n      <td class="text-right">${(t.quantity*t.requisition_items?.rate||0).toLocaleString()}/=</td>\n      <td>${t.receiver||t.beneficiary||"N/A"}</td>\n    </tr>\n    `)).join("")}\n ${t.description?`\n  <tr>\n    <td colspan="7" style="text-align:start; color: #000;">\n      <strong>Brief Description :</strong> ${t.description+(t.approval_description?" , "+t.approval_description:"")} \n    </td>\n  </tr>\n`:""}\n    <tr>\n     <td colspan="7" style="text-align:right; color: #000;"><strong>TOTAL</strong>  <strong>${$t.value.toLocaleString()}/=</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n<div class="section-title">APPROVAL CHAIN </div>\n<table class="signatures" style="margin-top: 20px;">\n  <thead>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <th>${t.name||"N/A"}</th>\n            `)).join("")}\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <td class="text-center ${3==t?.status?.id?"text-success":"text-danger"}">${t?.status?.name??"Pending"}</td>\n       `)).join("")}\n      </tr>\n  </tbody>\n</table>\n\n${t.purpose.toLowerCase().includes("voucher")?`\n<div class="signature-area" style="display: flex; justify-content: space-between; margin-top: 20px;">\n  <div style="text-align: center;">\n    \n<div style="text-align: center; margin-top: 30px;">\n  <div style="margin-bottom: 5px; color: #000;">\n    <strong>${t.beneficiary||"&nbsp;"}</strong>\n  </div>\n  <div style="border-bottom: 1px solid #000; width: 200px; margin: 0 auto;"></div>\n</div>    <p><strong>Received By:</strong></p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p><strong>Receiver's Signature</strong></p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p><strong>Received Date</strong></p>\n  </div>\n</div>\n`:""}\n</body>\n</html>\n`,i={margin:10,filename:`voucher_${("0000"+t.approval).slice(-4)}_${n}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};await g()().from(a).set(i).save()}catch(n){Dn(`Failed to download PDF: ${n.message}`)}},aa=async(t,e)=>{const n=t.requisition_items.beneficiary||e.type.toLowerCase().includes("labour");$t.value=e.items.reduce(((t,e)=>t+e.quantity*e.rate),0);try{const a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a);new Date(e.created_at);const i=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Print</title>\n<style>\nbody { font-family:'Courier New', monospace; margin:40px; font-size:13px }\n.company-title { text-align:center }\n.title { text-align:center; font-size:20px; margin:15px 0 }\ntable { width:100%; border-collapse:collapse; margin-top:10px }\nth,td { border:0.5px solid #000; padding:6px }\n.text-right { text-align:right }\n.text-center { text-align:center }\n.signature-line { border-top:1px solid #000; width:200px; margin-top:40px }\nhr { border-top:0.5px solid #000 }\n@media print { body { margin:10mm } }\n</style>\n</head>\n<body>\n\n<div style="font-size:18px">\n${n?"VOUCHER":"ORDER"} NO:\n<span style="color:red">${("0000"+e.approval).slice(-4)}</span>\n</div>\n\n<div class="company-title">\n<h1>COPEX CONTRACTORS CO.LTD</h1>\n<div>Msamvu, P.O.BOX 678, Morogoro</div>\n<div>0713 000 777, 0657 111 555</div>\n<div>TIN: 135-489-247 &nbsp; VRN: 40-032826C</div>\n</div>\n\n<hr>\n\n<div class="title">\n${n?"VOUCHER":"PURCHASE ORDER"} :\n${e?.project?.toUpperCase()??"NO PROJECT"}\n</div>\n\n${n?"":`\n<div style="display:flex;gap:20px">\n<div style="flex:1">\n<table>\n<tr><th colspan="2">Vendor</th></tr>\n<tr><td>Name</td><td>${t.vendor?.name||""}</td></tr>\n<tr><td>Location</td><td>${t.vendor?.location||""}</td></tr>\n<tr><td>Email</td><td>${t.vendor?.email||""}</td></tr>\n<tr><td>Phone</td><td>${t.vendor?.phone||""}</td></tr>\n<tr><td>Address</td><td>${t.vendor?.address||""}</td></tr>\n</table>\n</div>\n\n<div style="width:35%">\n<table>\n<tr><td>Date</td><td>${Sn(e.created_at)}</td></tr>\n<tr><td>LPO No</td><td>${("00"+t.requisition_items.id).slice(-4)}</td></tr>\n</table>\n</div>\n</div>\n`}\n\n<p>Please provide the following as per requisition details below</p>\n\n<table>\n<thead>\n<tr>\n<th>Item</th>\n<th>Description</th>\n<th>Qty</th>\n<th>Rate</th>\n<th>Total</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>${t.requisition_items?.remark||"N/A"}</td>\n<td>${t.requisition_items?.description||"N/A"}</td>\n<td class="text-right">${t.quantity}</td>\n<td class="text-right">${Number(t.rate_original).toLocaleString()}/=</td>\n<td class="text-right">${(t.quantity*t.rate_original).toLocaleString()}/=</td>\n</tr>\n\n${e.description?`\n<tr>\n<td colspan="5">\nBrief Description:\n${e.description}${e.approval_description?", "+e.approval_description:""}\n</td>\n</tr>\n`:""}\n\n<tr>\n<td colspan="5" class="text-right">\n<strong>TOTAL ${$t.value.toLocaleString()}/=</strong>\n</td>\n</tr>\n</tbody>\n</table>\n\n<h3 class="text-center">APPROVAL CHAIN</h3>\n<table class="signatures" style="margin-top: 10px;">\n  <tbody>\n    <tr>\n          ${e.roles_sequence.map((t=>`\n      <td style="border-bottom:1px solid #000;border-top:1px solid #fff;border-right:1px solid #fff;border-left:1px solid #fff;" class="text-center ${3==t?.status?.id?"text-success":"text-danger"}">${t?.status?.name??"Pending"}</td>\n       `)).join("")}\n      </tr>\n  </tbody>\n    <tfooter>\n    <tr>\n          ${e.roles_sequence.map((t=>`\n      <th style="border-bottom:1px solid #fff;border-top:1px solid #fff;border-right:55px solid #fff;border-left:1px solid #fff;">${t.name||"N/A"}</td>\n            `)).join("")}\n    </tr>\n\n  </tfooter>\n</table>\n${n?`\n<div style="display:flex;justify-content:space-between;margin-top:30px">\n<div class="text-center">\n<div class="signature-line"></div>\n<p>Received By : ${t.requisition_items.beneficiary||t.beneficiary||""}</p>\n</div>\n\n<div class="text-center">\n<div class="signature-line"></div>\n<p>Date</p>\n</div>\n</div>\n`:""}\n\n</body>\n</html>\n`,l=a.contentWindow.document;l.open(),l.write(i),l.close(),a.onload=()=>{a.contentWindow.focus(),a.contentWindow.print(),setTimeout((()=>document.body.removeChild(a)),1e3)}}catch(a){Dn(a.message)}},ia=async(t,e)=>{$t.value=t.items.reduce(((t,e)=>t+e?.quantity*e?.rate),0);try{const n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n);new Date;const a=new Date(t.created_at),i=(a.getDate().toString().padStart(2,"0"),(a.getMonth()+1).toString().padStart(2,"0"),`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Print Voucher</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n  .header {  display: flex; justify-content: space-between; align-items: flex-start;font-weight:bold }\n  .logo { width: 160px; height: auto; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .voucher-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; }\n  .company-title h2 { margin: 5px 0; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; font-weight: normal; }\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n  .title { text-align: center;   margin: 10px 0 10px 0; font-size:20px }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; border-radius: 4px; overflow: hidden; }\n  table.details td, table.items th, table.items td, .signatures th, .signatures td { border: 0.5px solid #000; padding: 6px; font-weight: normal; }\n  table.items thead tr th { background-color: #f8f8f8; border-bottom: 1px solid #000; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  .text-success { color: green; }\n .signature-area { margin-top: 30px; }\n  .signature-line { border-top: 1px solid #000; width: 200px; display: inline-block; margin-top: 50px; }\n  .text-danger { color: red; }\n  hr {\n  border: 0;\n  border-top: 0.4px solid #000 !important;\n  opacity: 1 !important;\n  margin: 0px 0;\n}\n\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n<div class="text-style" style="font-size:20px">\n  ${t.purpose.toLowerCase().includes("voucher")?"VOUCHER":"LPO"}  NO. ${t.approval}/${new Date(t.created_at).getFullYear().toString().slice(-2)}\n</div>\n<div class="company-title text-style">\n  <i>\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> , 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247    <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n<hr style="margin-top:20px">\n<div class="title text-style">  ${t?.purpose?.toUpperCase()} :  ${t?.project?.toUpperCase()??"NO PROJECT"}</div>\n<hr>\n${t.purpose.toLowerCase().includes("voucher")?"":`\n\n<div style="display:flex;justify-content:space-between;gap:20px;margin-top:10px;font-size:13px;">\n  <div style="flex:1;border:1px solid #f0f0f0;padding:8px;">\n  <table style="width:100%; border-collapse: collapse;">\n  <tr><td style="background:#333; border-top:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000; padding:5px;width:2cm">\n  <b>Vendor</b>\n</td>\n</tr>\n  <tr ><td>Name</td><td style="border-bottom:1px solid #000;">${e?.name||""}</td></tr>\n  <tr ><td>Address</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.address||""}</td></tr>\n  <tr ><td>City</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.location||""}</td></tr>\n  <tr ><td>Phone</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.phone||""}</td></tr>\n  <tr ><td >TIN</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.tin||""}</td></tr>\n  <tr ><td >VRN</td><td  class="text-style" style="border-bottom:1px solid #000;">${e?.vrn||""}</td></tr>\n</table>\n\n  </div>\n  <div style="width:35%;border:1px solid #f0f0f0;padding:8px;margin-top:1cm">\n    <table style="width:100%;border-collapse:collapse;">\n      <tr><td class="text-style"> ${t.purpose.toLowerCase().includes("voucher")?"VOUCHER":"LPO"} :</td><td class="text-style">0${t?.id||""}/${new Date(t.created_at).getFullYear().toString().slice(-2)}</td></tr>\n      <tr><td class="text-style"> ${t.purpose.toLowerCase().includes("voucher")?"VOUCHER":"LPO"} DATE:</td><td class="text-style">${Sn(t.created_at)}</td></tr>\n      <tr><td class="text-style">REQ:</td><td class="text-style">${t?.requisition||""}</td></tr>\n      <tr><td class="text-style">REQ DATE:</td><td class="text-style">${Sn(t.requested_date)}</td></tr>\n      <tr><td class="text-style">STATUS:</td><td class="text-style">${t?.status.name||""}</td></tr>\n      <tr><td class="text-style">AWAITS:</td><td class="text-style">${t?.awaits||""}</td></tr>\n    </table>\n  </div>\n</div>\n<br>\n\n  </tbody>\n</table>\n    `}\n\n<p class="text-style">Please provide the following as per requisition details below</p>\n<h2 class="text-style">CURRENCY : TSH</h2>\n<table class="items">\n  <thead>\n    <tr>\n      <th class="text-style">No.</th>\n      <th class="text-style">ITEM NAME</th>\n      <th class="text-style">DESCRIPTION</th>\n      <th class="text-style">QUANTITY</th>\n      <th class="text-style">RATE</th>\n      <th class="text-style">TOTAL</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${t.items.map(((t,e)=>`\n    <tr>\n      <td class="text-style">${e+1}</td>\n      <td class="text-style">${t.requisition_items?.remark||"N/A"}</td>\n      <td class="text-style">${t.requisition_items?.description||"N/A"}</td>\n      <td class="text-style text-right">${t?.quantity||"0"}</td>\n      <td class=" text-style text-right">${Number(t?.rate||0).toLocaleString()}/=</td>\n      <td class="text-style text-right">${(t?.quantity*t?.rate||0).toLocaleString()}/=</td>\n    </tr>\n\n    `)).join("")}\n\n    <tr>\n     <td colspan="6" class="text-style" style="text-align:right;"><strong>TOTAL</strong>  <strong>${$t.value.toLocaleString()}/=</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n<h2 style="text-style">Note : </h2>\n<p class="text-style">${t.description??""}</p>\n<div class="title text-style" style="margin-top:40px">APPROVAL CHAIN</div>\n<table class="signatures" style="margin-top: 10px;">\n  <tbody>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <td style="border-bottom:1px solid #000;border-top:1px solid #fff;border-right:1px solid #fff;border-left:1px solid #fff;" class="text-center ${3==t?.status?.id?"text-success":"text-danger"}">${t?.status?.name??"Pending"}</td>\n       `)).join("")}\n      </tr>\n  </tbody>\n    <tfooter>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <th style="border-bottom:1px solid #fff;border-top:1px solid #fff;border-right:55px solid #fff;border-left:1px solid #fff;">${t.name||"N/A"}</td>\n            `)).join("")}\n    </tr>\n\n  </tfooter>\n</table>\n\n\n\n${t.purpose.toLowerCase().includes("voucher")?`\n    <div class="title text-style" style="margin-top:40px;margin-bottom:-20px">BENEFICIARY</div>\n\n<div class="signature-area" style="display: flex; justify-content: space-between; margin-top: 20px;">\n  <div style="text-align: center;">\n<div style="text-align: center; margin-top: 30px;">\n  \x3c!-- Beneficiary name above the line --\x3e\n  <div class="text-style" style="margin-bottom: 5px;">\n    <strong>${t.beneficiary||"&nbsp;"}</strong>\n  </div>\n\n  \x3c!-- The signature line --\x3e\n  <div style="border-bottom: 1px solid #000; width: 200px; margin: 0 auto;"></div>\n</div>    <p>Received By: </p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p>Receiver's Signature</p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p>Received Date</p>\n  </div>\n</div>\n`:""}\n</body>\n</html>\n`),l=n.contentWindow.document;l.open(),l.write(i),l.close(),n.onload=()=>{n.contentWindow.focus(),n.contentWindow.print(),setTimeout((()=>{document.body.removeChild(n)}),1e3)}}catch(n){Dn(`Failed to print voucher: ${n.message}`)}},la=(0,l.iH)(""),sa=async()=>{la.value="";const t=await m.get(`approval-groups/${v.params.group_id}`);la.value=t.data},oa=(0,l.iH)(),ra=t=>{bt.includes("can_edit_approval_items")&&Ht.value==Nn.value.role_id&&"no one"!==Xn.value&&(oa.value=t)},da=async()=>{try{const t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);const e=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Vendor Report</title>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .company-title { text-align: center; }\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  th, td { border: 0.5px solid #000; padding: 6px; }\n  th { background-color: #f8f8f8; font-weight: bold; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\n  @media print { body { margin: 10mm; } }\n</style>\n</head>\n<body>\n\n<div class="company-title text-style">\n  <i>\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n\n<hr style="margin-top:20px">\n\n<div class="title text-style">\n  VENDOR REPORT\n</div>\n\n<hr>\n\n<div class="text-style" style="margin: 20px 0; display: flex; justify-content: space-between; gap: 20px;">\n  <div style="flex: 1;">\n    <p><strong>Vendor:</strong> ${on.value.find((t=>t.items&&t.items.length>0&&t.items[0].vendor))?.items[0].vendor.name||"N/A"}</p>\n    <p><strong>Phone:</strong> ${on.value.find((t=>t.items&&t.items.length>0&&t.items[0].vendor))?.items[0].vendor.phone||"N/A"}</p>\n    <p><strong>Email:</strong> ${on.value.find((t=>t.items&&t.items.length>0&&t.items[0].vendor))?.items[0].vendor.email||"N/A"}</p>\n  </div>\n  <div style="flex: 1;">\n    <p><strong>Address:</strong> ${on.value.find((t=>t.items&&t.items.length>0&&t.items[0].vendor))?.items[0].vendor.address||"N/A"}</p>\n    <p><strong>Location:</strong> ${on.value.find((t=>t.items&&t.items.length>0&&t.items[0].vendor))?.items[0].vendor.location||"N/A"}</p>\n  </div>\n</div>\n\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Ref.</th>\n      <th>Purpose</th>\n      <th>Type</th>\n      <th>Requester</th>\n      <th>Project</th>\n      <th>Date</th>\n      <th class="text-right">Cost</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${on.value.map(((t,e)=>`\n    <tr>\n      <td>${e+1}</td>\n      <td>${t.approval}</td>\n      <td>${t.purpose}</td>\n      <td>${t.type}</td>\n      <td>${t.requester}</td>\n      <td>${t.project||"N/A"}</td>\n      <td>${t.date}</td>\n      <td class="text-right">${t.cost}</td>\n    </tr>\n    `)).join("")}\n    <tr>\n      <td colspan="7" class="text-right"><strong>TOTAL:</strong></td>\n      <td class="text-right"><strong>${zn(on.value.reduce(((t,e)=>{const n="string"===typeof e.cost?parseFloat(e.cost.replace(/,/g,"")):e.cost;return t+(isNaN(n)?0:n)}),0))}</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n</body>\n</html>\n`,n=t.contentWindow.document;n.open(),n.write(e),n.close(),t.onload=()=>{t.contentWindow.focus(),t.contentWindow.print(),setTimeout((()=>{document.body.removeChild(t)}),1e3)}}catch(t){Dn(`Failed to print report: ${t.message}`)}},ca=(0,l.iH)([]),ua=(0,l.iH)(""),pa=(0,a.Fl)((()=>(0,c.i)(ca.value,ua.value))),va=(0,l.iH)(!1),ga=async()=>{va.value=!0;try{const t=await m.get("vendors");ca.value=t.data}catch(t){Dn(`Failed to fetch vendors: ${t.message}`)}finally{va.value=!1}};return(0,a.bv)((()=>{JSON.parse(localStorage.getItem("user")).name;ga(),sa(),Pn.value&&(jn=()=>{Un.value=!1,kt.value=!1},Pn.value.addEventListener("hidden.bs.modal",jn));const t=document.getElementById("offcanvasWithBothOptions");if(t){const e=new bootstrap.Offcanvas(t);e.show()}})),(0,a.Jd)((()=>{Pn.value&&jn&&Pn.value.removeEventListener("hidden.bs.modal",jn)})),(t,o)=>{const r=(0,a.up)("router-link"),c=(0,a.up)("v-client-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",h,[(0,a._)("ul",b,[(0,a._)("li",null,[(0,a._)("div",y,[(0,a._)("nav",x,[(0,a._)("ol",_,[(0,a._)("li",w,[(0,a._)("a",f,(0,i.zw)(la.value.group),1)]),k])])])])]),(0,a._)("div",q,[C,va.value?((0,a.wg)(),(0,a.iD)("div",{key:0,innerHTML:(0,l.SU)(e)()},null,8,$)):((0,a.wg)(),(0,a.iD)("div",D,[(0,a._)("div",z,[(0,a._)("div",H,[(0,a._)("div",S,[(0,a.Wm)(d.Z,{filterValue:ua.value,"onUpdate:filterValue":o[0]||(o[0]=t=>ua.value=t)},null,8,["filterValue"])]),(0,a._)("div",R,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,l.SU)(pa),(t=>((0,a.wg)(),(0,a.iD)("a",{key:t.id,onClick:e=>Bn(t),class:(0,i.C_)(["list-group-item list-group-item-action",{active:Mn.value===t.id}]),"data-bs-dismiss":"offcanvas",href:"javascript:void(0);"},(0,i.zw)(t.name),11,O)))),128))]),0===(0,l.SU)(pa).length&&ua.value?((0,a.wg)(),(0,a.iD)("div",A,' No vendors found matching "'+(0,i.zw)(ua.value)+'" ',1)):(0,a.kq)("",!0)])])]))]),(0,a._)("div",N,[t.mobileView?((0,a.wg)(),(0,a.iD)("button",T,L)):((0,a.wg)(),(0,a.iD)("button",U,"Select Vendor from the lists"))]),Mn.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",P," Please select a vendor from the list to view its transactions ")),Mn.value?((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",E,[(0,a.Wm)(d.Z,{filterValue:n.value,"onUpdate:filterValue":o[1]||(o[1]=t=>n.value=t)},null,8,["filterValue"])]),(0,a._)("div",M,[(0,a._)("div",B,[I,(0,a._)("div",W,[(0,a._)("div",F,[(0,a._)("p",Y,[J,(0,a.Uk)(" "+(0,i.zw)(ca.value.find((t=>t.id===Mn.value))?.name||"--"),1)]),(0,a._)("p",Q,[X,(0,a.Uk)(" "+(0,i.zw)(ca.value.find((t=>t.id===Mn.value))?.phone||"--"),1)]),(0,a._)("p",Z,[K,(0,a.Uk)(" "+(0,i.zw)(ca.value.find((t=>t.id===Mn.value))?.email||"--"),1)])]),(0,a._)("div",G,[(0,a._)("p",tt,[et,(0,a.Uk)(" "+(0,i.zw)(ca.value.find((t=>t.id===Mn.value))?.location||"--"),1)]),(0,a._)("p",nt,[at,(0,a.Uk)(" "+(0,i.zw)(ca.value.find((t=>t.id===Mn.value))?.address||"--"),1)]),(0,a._)("p",it,[lt,(0,a._)("span",st,(0,i.zw)((0,l.SU)(In).toLocaleString())+"/=",1)])])])])]),on.value.length>0?((0,a.wg)(),(0,a.iD)("div",ot,[(0,a._)("button",{class:"btn btn-success",onClick:o[2]||(o[2]=t=>da())},ct)])):(0,a.kq)("",!0),(0,a._)("div",ut,[Mn.value?En.value?((0,a.wg)(),(0,a.iD)("div",{key:1,innerHTML:(0,l.SU)(Hn)()},null,8,mt)):0===on.value.length?((0,a.wg)(),(0,a.iD)("div",ht,yt)):((0,a.wg)(),(0,a.iD)("div",xt,[(0,a._)("div",_t,[(0,a._)("div",wt,[(0,a.Wm)(c,{data:(0,l.SU)(Fn),columns:Gt.value,options:un.value},{status:(0,a.w5)((t=>[(0,a._)("span",{class:(0,i.C_)(["badge inv-status","badge-"+t.row.status.color])},(0,i.zw)(t.row.status.name),3)])),requisition:(0,a.w5)((t=>["Labour Request"===t.row.type?((0,a.wg)(),(0,a.j4)(r,{key:0,class:"text-primary",to:`/approval/${t.row.requisition}`,title:"Click to see requisition"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.requisition),1)])),_:2},1032,["to"])):((0,a.wg)(),(0,a.j4)(r,{key:1,class:"text-primary",to:`/requisition/${t.row.requisition}`,title:"Click to see requisition"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.requisition),1)])),_:2},1032,["to"]))])),actions:(0,a.w5)((t=>[(0,a._)("a",{onClick:e=>ta(t.row),"data-bs-toggle":"modal","data-bs-target":"#approval",href:"javascript:void(0);",class:"text-primary"},qt,8,ft),(0,l.SU)(bt).includes("can_print_lpo")?((0,a.wg)(),(0,a.iD)("a",{key:0,href:"javascript:void(0);",onClick:e=>ia(t.row,t.row.vendor_data),class:"text-success me-2"},Dt,8,Ct)):(0,a.kq)("",!0),(0,l.SU)(bt).includes("can_print_lpo")?((0,a.wg)(),(0,a.iD)("a",{key:1,href:"javascript:void(0);",onClick:e=>na(t.row,t.row.vendor_data),class:"text-dark"},St,8,zt)):(0,a.kq)("",!0)])),_:1},8,["data","columns","options"])])])])):((0,a.wg)(),(0,a.iD)("div",pt,gt))])])):(0,a.kq)("",!0)]),(0,a._)("div",{class:"modal fade mymodal",id:"approval",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"false",ref_key:"approvalModal",ref:Pn},[(0,a._)("div",Rt,[(0,a._)("div",Ot,[(0,a._)("div",At,[Nt,(0,a._)("button",{type:"button","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close",class:"btn-close",onClick:o[3]||(o[3]=t=>$n()),id:"close-approval-modal"})]),(0,a._)("div",Tt,[(0,a._)("div",Vt,[(0,a._)("div",Lt,[(0,a._)("table",Ut,[(0,a._)("thead",null,[(0,a._)("tr",null,[Pt,jt,Et,Mt,Bt,Zn.value.project?((0,a.wg)(),(0,a.iD)("th",It,"Project")):(0,a.kq)("",!0),Zn.value.vendor?((0,a.wg)(),(0,a.iD)("th",Wt,[Zn.value?.type?.toLowerCase().includes("voucher")?((0,a.wg)(),(0,a.iD)("span",Ft," Beneficiary ")):((0,a.wg)(),(0,a.iD)("span",Yt," Vendor "))])):(0,a.kq)("",!0),Jt,Qt,(0,l.SU)(bt).includes("can_print_lpo")?((0,a.wg)(),(0,a.iD)("th",Xt,"Action")):(0,a.kq)("",!0)])]),(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("td",null,(0,i.zw)(Zn.value?.approval),1),(0,a._)("td",{onClick:o[4]||(o[4]=t=>ia(Zn.value,Zn.value.vendor_data))},(0,i.zw)(Zn.value.requester),1),(0,a._)("td",null,(0,i.zw)(Zn.value?.date),1),(0,a._)("td",null,(0,i.zw)(Zn.value?.type),1),(0,a._)("td",null,(0,i.zw)(Zn.value?.purpose),1),Zn.value.project?((0,a.wg)(),(0,a.iD)("td",Zt,(0,i.zw)(Zn.value.project),1)):(0,a.kq)("",!0),Zn.value.vendor?((0,a.wg)(),(0,a.iD)("td",Kt,(0,i.zw)(Zn.value.vendor),1)):(0,a.kq)("",!0),(0,a._)("td",null,(0,i.zw)(Zn.value?.awaits),1),(0,a._)("td",null,(0,i.zw)(Zn.value?.cost),1),(0,a._)("td",null,[(0,l.SU)(bt).includes("can_print_lpo")?((0,a.wg)(),(0,a.iD)("a",{key:0,href:"javascript:void(0);",onClick:o[5]||(o[5]=t=>ia(Zn.value,Zn.value.vendor_data)),class:"text-success me-2"},te)):(0,a.kq)("",!0),"Labour Request"===Zn.value.purpose&&(0,l.SU)(bt).includes("can_create_labour_voucher")?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:o[6]||(o[6]=t=>rt()),class:"btn btn-outline-primary"},"Create Voucher")):(0,a.kq)("",!0),"Labour Request"===Zn.value.purpose?((0,a.wg)(),(0,a.j4)(r,{key:2,to:`/report/labour-payments/${Zn.value.id}`,class:"text-primary"},{default:(0,a.w5)((()=>[ee])),_:1},8,["to"])):(0,a.kq)("",!0)])]),Zn.value.description?((0,a.wg)(),(0,a.iD)("tr",ne,[(0,a._)("td",ae,[ie,(0,a.Uk)(" "+(0,i.zw)(Zn.value.description)+" ",1),Kn.value?((0,a.wg)(),(0,a.iD)("span",le," ( "+(0,i.zw)(Kn.value)+" )",1)):(0,a.kq)("",!0)])])):(0,a.kq)("",!0),Zn.value.remark?((0,a.wg)(),(0,a.iD)("tr",se,[(0,a._)("td",oe,[re,(0,a.Uk)(" "+(0,i.zw)(Zn.value.remark),1)])])):(0,a.kq)("",!0)])])])])]),(0,a._)("div",de,[Ht.value==Nn.value.role_id&&"no one"!==Xn.value?((0,a.wg)(),(0,a.iD)("div",ce,[(0,a._)("div",ue,[(0,a._)("button",{class:"btn btn-primary me-2",onClick:o[7]||(o[7]=t=>Ln.value=3),disabled:kt.value}," Check ",8,pe),(0,a._)("button",{class:"btn btn-danger me-2",onClick:o[8]||(o[8]=t=>Ln.value=4),disabled:kt.value}," Reject ",8,ve),(0,a._)("button",{class:"btn btn-info",onClick:o[9]||(o[9]=t=>Ln.value=14),disabled:kt.value}," Remark ",8,ge)])])):(0,a.kq)("",!0),Ln.value?((0,a.wg)(),(0,a.iD)("div",me,[(0,a._)("span",{class:(0,i.C_)(["badge rounded-pill",{"bg-danger":4==Ln.value,"bg-success":3==Ln.value,"bg-info":14==Ln.value}]),style:{"font-size":"1rem"}},(0,i.zw)(3==Ln.value?"Check / Approve Request":4==Ln.value?"Reject Request":"Fill Remark"),3)])):(0,a.kq)("",!0),Ln.value?((0,a.wg)(),(0,a.iD)("div",he,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:3==Ln.value?"Enter Approval Remark":4==Ln.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":o[10]||(o[10]=t=>ea.value=t)},null,8,be),[[s.nr,ea.value]]),(0,a._)("button",{onClick:o[11]||(o[11]=e=>t.onApproveClick()),class:"btn btn-primary me-2",type:"button",disabled:kt.value},[kt.value?((0,a.wg)(),(0,a.iD)("span",{key:0,innerHTML:(0,l.SU)(Rn)()},null,8,xe)):((0,a.wg)(),(0,a.iD)("span",_e,"Save"))],8,ye)])):(0,a.kq)("",!0),(0,a._)("div",we,[(0,a._)("table",fe,[(0,a._)("thead",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(An.value,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.role_id||t.position||t.name},[(0,a.Uk)((0,i.zw)(t.name)+" ",1),ke])))),128))])]),(0,a._)("tbody",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(An.value,((t,e)=>((0,a.wg)(),(0,a.iD)("td",{key:t.role_id||t.position||e,class:(0,i.C_)(t?.status?.color?"text-"+t.status.color:"text-danger")},[(0,a._)("span",null,(0,i.zw)(t?.status?.name??"Unchecked"),1),qe,t.approved_at?((0,a.wg)(),(0,a.iD)("span",Ce,"Checked At :"+(0,i.zw)((0,l.SU)(Sn)(t.approved_at)),1)):(0,a.kq)("",!0),$e,De,t.remark?((0,a.wg)(),(0,a.iD)("span",ze,"Remark : "+(0,i.zw)(t.remark),1)):(0,a.kq)("",!0)],2)))),128))])])])]),He,(0,a._)("div",Se,[V.value?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"text",class:"form-control",style:{"max-width":"350px","font-size":"1rem"},placeholder:"Enter Brief Description ","onUpdate:modelValue":o[12]||(o[12]=t=>vt.value=t)},null,512)),[[s.nr,vt.value]]):(0,a.kq)("",!0)]),(0,a._)("div",Re,[(0,a._)("div",Oe,[(0,a._)("div",Ae,[(0,a._)("table",Ne,[(0,a._)("thead",null,[(0,a._)("tr",null,[Te,Ve,Le,Ue,Pe,je,Ee,V.value?((0,a.wg)(),(0,a.iD)("th",Me,"select")):(0,a.kq)("",!0),Be])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(rn.value,(t=>((0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",null,(0,i.zw)(t.order_item_id),1),(0,a._)("td",null,(0,i.zw)(t.item),1),(0,a._)("td",null,["budget"!==Zn.value.requisition_type||t.requisition_items.asset_id?((0,a.wg)(),(0,a.iD)("span",Ie,[t.selected?((0,a.wg)(),(0,a.iD)("span",We,(0,i.zw)(t.description)+" ( "+(0,i.zw)(t.request_description)+" ) ",1)):((0,a.wg)(),(0,a.iD)("span",Fe,(0,i.zw)(t.description),1))])):((0,a.wg)(),(0,a.j4)(r,{key:0,class:"btn btn-outline-primary",to:`/requisition-budget/${t.requisition_items.item_id}`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.description),1)])),_:2},1032,["to"]))]),(0,a._)("td",{onClick:e=>ra(t.id)},[(0,a.Uk)((0,i.zw)(t.quantity)+" ",1),t?.requested_sum?((0,a.wg)(),(0,a.iD)("span",Je,[Qe,(0,a.Uk)(" Requested : "+(0,i.zw)(t?.requested_sum)+" ",1),Xe,(0,a.Uk)(" Balance :"+(0,i.zw)((t.quantity-t?.requested_sum).toFixed(2)),1)])):(0,a.kq)("",!0),t.selected?((0,a.wg)(),(0,a.iD)("span",Ze,[Ke,(0,a.Uk)("Requesting : "+(0,i.zw)(t.requesting_quantity),1)])):(0,a.kq)("",!0),oa.value==t.id?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:2,type:"number",class:"form-control",placeholder:"Quantity",step:"any","onUpdate:modelValue":e=>t.quantity=e},null,8,Ge)),[[s.nr,t.quantity]]):(0,a.kq)("",!0)],8,Ye),(0,a._)("td",{onClick:e=>ra(t.id)},[(0,a.Uk)((0,i.zw)(t.rate)+" ",1),oa.value==t.id?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"number",class:"form-control",placeholder:"Quantity",step:"any","onUpdate:modelValue":e=>t.rate_original=e},null,8,en)),[[s.nr,t.rate_original]]):(0,a.kq)("",!0)],8,tn),(0,a._)("td",null,[(0,a._)("span",null,[(0,a.Uk)((0,i.zw)((0,l.SU)(zn)(t.quantity*t.rate_original)),1),nn]),t.selected?((0,a.wg)(),(0,a.iD)("span",an," Requesting : "+(0,i.zw)((0,l.SU)(zn)(t.requesting_quantity*t.rate_original)),1)):(0,a.kq)("",!0)]),(0,a._)("td",null,(0,i.zw)(t.receiver??t.beneficiary),1),V.value?((0,a.wg)(),(0,a.iD)("td",ln,[t.selected?((0,a.wg)(),(0,a.iD)("svg",{key:0,onClick:e=>t.selected=!t.selected,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-check2-circle",viewBox:"0 0 16 16"},dn,8,sn)):((0,a.wg)(),(0,a.iD)("svg",{key:1,onClick:e=>t.selected=!t.selected,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-circle",viewBox:"0 0 16 16"},pn,8,cn)),t.selected?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:2,type:"number",placeholder:"enter quantity",class:"form-control w-75",step:"any","onUpdate:modelValue":e=>t.requesting_quantity=e,onInput:e=>t.requesting_quantity=(0,l.SU)(On)(t.requesting_quantity,(t.quantity-t?.requested_sum).toFixed(2))},null,40,vn)),[[s.nr,t.requesting_quantity]]):(0,a.kq)("",!0),t.selected?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:3,type:"text",placeholder:"enter Description",class:"form-control w-75 mt-1","onUpdate:modelValue":e=>t.request_description=e},null,8,gn)),[[s.nr,t.request_description]]):(0,a.kq)("",!0),t.selected?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:4,type:"text",placeholder:"enter Beneficiary",class:"form-control w-75 mt-1","onUpdate:modelValue":e=>t.receiver=e},null,8,mn)),[[s.nr,t.receiver]]):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("td",null,[t.requisition_items.asset_id?((0,a.wg)(),(0,a.j4)(r,{key:0,to:`/assets/fuel-statement/${t.requisition_items.asset_id}`,class:"me-2"},{default:(0,a.w5)((()=>[hn])),_:2},1032,["to"])):(0,a.kq)("",!0),"budget"===Zn.value.requisition_type?((0,a.wg)(),(0,a.j4)(r,{key:1,to:`/requisition-budget/${t.requisition_items.item_id}`},{default:(0,a.w5)((()=>[bn])),_:2},1032,["to"])):(0,a.kq)("",!0),Gn.value.subcontractor_agreement_id?((0,a.wg)(),(0,a.j4)(r,{key:2,to:`/subcontractor/${Gn.value.subcontractor_agreement_id}`},{default:(0,a.w5)((()=>[yn])),_:1},8,["to"])):(0,a.kq)("",!0),(0,l.SU)(bt).includes("can_print_lpo")?((0,a.wg)(),(0,a.iD)("button",{key:3,class:"btn btn-outline-success",onClick:e=>aa(t,Zn.value)},wn,8,xn)):(0,a.kq)("",!0)])])))),256))])])])])])]),(0,a._)("div",fn,[(0,a._)("button",{type:"button",class:"btn btn-primary","data-dismiss":"modal","data-bs-dismiss":"modal",onClick:o[13]||(o[13]=t=>$n())},"close"),V.value?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-success",onClick:o[14]||(o[14]=e=>t.createApproval()),disabled:En.value},[En.value?((0,a.wg)(),(0,a.iD)("span",{key:0,innerHTML:(0,l.SU)(Rn)()},null,8,qn)):((0,a.wg)(),(0,a.iD)("span",Cn,"Submit"))],8,kn)):(0,a.kq)("",!0)])])])],512)],64)}}},Dn=n(83744);const zn=(0,Dn.Z)($n,[["__scopeId","data-v-0807524d"]]);var Hn=zn}}]);
//# sourceMappingURL=2320.8f2111b6.js.map