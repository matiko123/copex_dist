{"version":3,"file":"js/808.b1b7d0a1.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/conversionFactor.vue","webpack://cork-vue3/./src/views/masters/conversionFactor.vue?04a1"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Conversion Factor</span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n                            <button class=\"btn btn-primary \" @click=\"conversion_factor =! conversion_factor\">                           \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n  <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>\r\n\r\n       \r\n         <!-- item registration form starts -->\r\n <form v-if=\"conversion_factor\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerConversionFactor\">\r\n        <h4 class=\"text-center\">REGISTER CONVERSION FACTOR</h4>\r\n        <div class=\"row mb-2\">\r\n    \r\n            <div class=\"col-md-4\">\r\n                <label class=\"form-label\">Conversion  Name</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter Conversion Name\" v-model=\"name\" required>\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n            <label class=\"form-label small\">Unit</label>\r\n            <multiselect \r\n                v-model=\"units\"\r\n                :options= \"unitList\"\r\n                placeholder=\"select unit\"\r\n                label=\"short_name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n            <div class=\"col-md-4\" >\r\n                    <label class=\"form-label\">Conversion Quantity</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter Conversion Quantity\" v-model=\"quantity\" required>\r\n                </div>\r\n\r\n        </div>\r\n        <div class=\"text-center gap-2 justify-content-end\">\r\n            <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"conversion_factor = false; resetForm();\">Cancel</button>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n        </div>\r\n    </form>\r\n             <!-- item registration form ends-->\r\n\r\n              <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"conversion\" :columns=\"columns\" :options=\"table_option\">\r\n                            <template #actions=\"props\">\r\n                              \r\n                                <a href=\"javascript:;\" class=\"edit me-3\" @click=\"openEditModal(props.row)\" data-bs-toggle=\"modal\" :data-bs-target=\"'#edit-conversion-factor-modal'\">\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"2\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"feather feather-edit-3\"\r\n                                    >\r\n                                        <path d=\"M12 20h9\"></path>\r\n                                        <path d=\"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\"></path>\r\n                                    </svg>\r\n                                </a>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Edit conversion factor modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"edit-conversion-factor-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editConversionFactorModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editConversionFactorModalLabel\">Edit Conversion Factor</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateConversionFactor(conversion_factor_id)\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row mb-3\">\r\n                <div class=\"col-md-4\">\r\n                <label for=\"name\">name</label>\r\n              <input type=\"text\" v-model=\"name\" class=\"form-control\" placeholder=\"name\" required>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n            <label class=\"form-label small\">Unit</label>\r\n            <multiselect \r\n                v-model=\"units\"\r\n                :options= \"unitList\"\r\n                placeholder=\"select unit\"\r\n                label=\"short_name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"quantity\">Quantity</label>\r\n              <input type=\"number\" v-model=\"quantity\" class=\"form-control\" placeholder=\"Enter Quantity\" min=\"1\" required>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\" id=\"close_editing\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Edit conversion factor modal ends -->\r\n      \r\n    </div>\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    \r\n    useMeta({ title: 'Gate Passes' });  \r\n    \r\n    const showMessage = inject('showMessage');\r\n    const conversion_factor = ref(false);\r\n    const showError = inject('showError');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const formatDate = inject('formatDate');\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingSpinner = inject('loadingSpinner'); \r\n    \r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['SNo','name','unit_name','quantity', 'actions']);    \r\n    const name = ref('');\r\n    const quantity = ref('');\r\n    const units = ref('');\r\n    const items = ref([]);\r\n    const conversion = ref([]);\r\n    const conversion_factor_id = ref('');\r\n\r\n    \r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'name','short_name','status'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const unitList = ref([]);\r\n    const getUnits = async () => {\r\n        try {\r\n            const response = await axiosInstance.get('/units');\r\n            unitList.value = response.data;\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }\r\n    };\r\n\r\n    const getConversionFactor = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await axiosInstance.get('conversion-factors');\r\n            conversion.value = response.data.map((item, index) => ({\r\n                SNo: index + 1,\r\n                id: item.id,\r\n                name: item.name,\r\n                unit: item.unit,\r\n                unit_name:item.unit?.short_name,\r\n                quantity: item.quantity,\r\n            }));\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }finally{\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n    \r\n    const registerConversionFactor = async () => {\r\n        conversion_factor.value = false;\r\n        loading_spinner.value = true;\r\n        const itemData = {\r\n            name: name.value,\r\n            unit_id: units.value.id,\r\n            quantity: quantity.value,\r\n        };\r\n    \r\n        try {\r\n            const response = await axiosInstance.post('/conversion-factors', itemData);\r\n            getConversionFactor();\r\n            showMessage('Conversion Factor registered successfully!');\r\n            resetForm();\r\n        } catch (error) {\r\n            showError(error.message);\r\n        } finally {\r\n            loading_spinner.value = false;\r\n        }\r\n    };    \r\n\r\n    const resetForm = () => {\r\n    name.value = '';\r\n    units.value = '';\r\n    quantity.value = '';\r\n};\r\n\r\n    const updateConversionFactor = async (id) => {\r\n        loading_spinner.value = true;\r\n        const payload = {\r\n            name: name.value,\r\n            unit_id: units.value.id,\r\n            quantity: quantity.value,\r\n        };\r\n        try {\r\n            const response = await axiosInstance.put(`/conversion-factors/${id}`, payload);\r\n          \r\n            getConversionFactor();\r\n            showMessage('Conversion Factor updated successfully!');\r\n            document.getElementById('close_editing').click();\r\n            closeEditModal();\r\n        } catch (error) {\r\n            showError(error.message);\r\n        } finally {\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n    const openEditModal = (row) => {\r\n        conversion_factor_id.value = row.id;\r\n        name.value = row.name;\r\n        units.value = row.unit;\r\n        quantity.value = row.quantity;\r\n    };\r\n\r\n    const closeEditModal = () => {\r\n        name.value = '';\r\n        units.value = '';\r\n        quantity.value = '';\r\n    };\r\n\r\n    const deleteConversionFactor = (row) => {\r\n        if (confirm(\"Are you sure you want to delete this Conversion Factor?\")) {\r\n            loading_spinner.value = true;\r\n            axiosInstance.delete(`/conversion-factors/${row.id}`)\r\n                .then((response) => {\r\n                    getConversionFactor();\r\n                    loading_spinner.value = false;\r\n                    showMessage('Conversion Factor deleted successfully!');\r\n                })\r\n                .catch((error) => {\r\n                    showError(error.message);\r\n                    loading_spinner.value = false;\r\n                });\r\n        }\r\n    };\r\n\r\n\r\n    onMounted(() => {\r\n        getConversionFactor();\r\n        getUnits()\r\n    });\r\n</script>","import script from \"./conversionFactor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./conversionFactor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./conversionFactor.vue?vue&type=style&index=0&id=32fab738&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","showMessage","inject","conversion_factor","ref","showError","tableShimmer","JSON","parse","localStorage","getItem","permissions","loading_spinner","columns","name","quantity","units","conversion","conversion_factor_id","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","unitList","getUnits","async","response","get","value","data","error","message","getConversionFactor","map","item","index","SNo","id","unit","unit_name","short_name","registerConversionFactor","itemData","unit_id","post","resetForm","updateConversionFactor","payload","put","document","getElementById","click","closeEditModal","openEditModal","row","onMounted","__exports__"],"sourceRoot":""}