{"version":3,"file":"js/5447.cc745a62.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/orders/preview.vue","webpack://cork-vue3/./src/views/orders/preview.vue?d492"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">\r\n        <ul class=\"navbar-nav flex-row\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Purchase Order</a></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n<!-- notification starts -->\r\n<div v-if=\"notification_count > 0 \" class=\"d-flex container position-relative\">\r\n  <div class=\"ms-auto\">\r\n    <span data-bs-toggle=\"collapse\" data-bs-target=\"#collapseWidthExample\" aria-expanded=\"false\" aria-controls=\"collapseWidthExample\">\r\n      <a href=\"javascript:;\" id=\"ddlnotify\" class=\"btn dropdown-toggle nav-link position-relative p-0 shadow\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"\r\n             viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n             stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n             class=\"feather feather-bell text-danger\" style=\"transform:scale(2)\">\r\n          <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path>\r\n          <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path>\r\n        </svg>\r\n        <span class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\r\n          {{ notification_count }}\r\n        </span>\r\n      </a>\r\n    </span>\r\n\r\n    <!-- Notifications panel -->\r\n    <div style=\"position: absolute; top: 100%; right: 0; z-index: 1050;\">\r\n      <div class=\"collapse  shadow\" id=\"collapseWidthExample\" style=\"min-width: 300px;\">\r\n        <div class=\"text-start card card-body text-dark \" v-for=\"notification in notifications\" >\r\n          From: {{ notification.sender_name }}<br>\r\n          Message: {{ notification.description }}\r\n          <div class=\"d-flex\">\r\n            <button class=\"btn btn-success p-1 btn-sm me-1 ms-auto\" style=\"cursor:pointer\" @click=\"readRemark(notification.id)\">âœ”</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- notification ends -->\r\n\r\n\r\n        <button v-if=\"is_admin\" class=\"btn btn-dark me-2 px-3\" @click=\"$router.go(-1)\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\r\n                <path fill-rule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8\"/>\r\n            </svg>\r\n        </button>\r\n        <div class=\"d-flex mt-3 gap-3  justify-content-center align-items-center\">\r\n            <div class=\"form-group col-md-4\">\r\n            <label for=\"projectFilter\" class=\"form-label\">Filter by Project</label>\r\n            <select id=\"projectFilter\" class=\"form-select\" v-model=\"selected_project\" @change=\"getPurchaseOrders\">\r\n            <option value=\"\">All Projects</option>\r\n            <option v-for=\"project in projects\" :key=\"project.id\" :value=\"project.id\">\r\n            {{ project.short_name }}\r\n            </option>\r\n            </select>\r\n            </div>\r\n            <div class=\"form-group col-md-4\">\r\n            <label for=\"statusFilter\" class=\"form-label\">Filter by Status</label>\r\n            <select id=\"statusFilter\" class=\"form-select\" v-model=\"selected_status\" @change=\"getPurchaseOrders\">\r\n            <option value=\"\">All Statuses</option>\r\n            <option value=\"approved\">Approved</option>\r\n            <option value=\"Unapproved\">Unapproved</option>\r\n            <option value=\"Inactive\">Inactive</option>\r\n            </select>\r\n            </div>  \r\n            \r\n            <!-- remark starts -->\r\n                 <div class=\"form-group col-md-2 mt-4\">\r\n                             <button \r\n            class=\"btn btn-info  mx-2\" \r\n            @click=\"openRemarkModal()\" \r\n            title=\"Print Report\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chat-square-text\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n                    <path d=\"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z\"/>\r\n                </svg>\r\n            &nbsp;Remark\r\n            </button>\r\n            </div>  \r\n             <!-- remark ends -->\r\n            \r\n        </div>\r\n        <div v-if=\"user_permissions.includes('can_create_lpo')\" class=\"d-flex me-4\">\r\n            <div class=\"ms-auto\">\r\n                <button v-if=\"is_closed\" class=\"btn btn-primary\" @click=\"getVendors(); is_closed = false; \">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                        <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n                    </svg>\r\n                </button>\r\n                <button  v-else class=\"btn btn-danger\" @click=\"order_registration = false; is_closed = true\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-x-square\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                        <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\r\n                    </svg>\r\n                </button>\r\n\r\n                <button \r\n            class=\"btn btn-success  mx-2\" \r\n            @click=\"printLpoReport(items, 'Local Purchase Order Report')\" \r\n            title=\"Print Report\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n            <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n            </svg>\r\n            &nbsp;Print\r\n            </button>\r\n            </div>\r\n        </div>\r\n        <form v-if=\"order_registration \" class=\"mt-1 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerPurchaseOrder\">\r\n            <h4 class=\"text-center\">LOCAL PURCHASE ORDER REGISTRATION</h4>\r\n            <div class=\"row mb-2\">\r\n                <div v-if=\"!add_vendor\" class=\"col-md-3\">\r\n                    <label class=\"form-label\">Select A Supplier</label>\r\n                    <select class=\"form-select\" v-model=\"vendor_id\" required @change=\"handleVendorChange\">\r\n    <option value=\"\">Select Supplier</option>\r\n    <option v-for=\"vendor in vendors\" :key=\"vendor.id\" :value=\"vendor.id\">{{ vendor.name }}</option>\r\n    <option value=\"NEW_VENDOR\">New Supplier</option>\r\n</select>\r\n                 \r\n\r\n\r\n                </div>\r\n                <!-- new vendor  starts-->\r\n                <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Name</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_name\" name=\"Vendor_name\" required>\r\n          </div>\r\n       \r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Email</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_email\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Phone</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_phone\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Address</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_address\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Location</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_location\" name=\"Vendor_name\" required>\r\n          </div>\r\n                 <!-- new vendor ends -->\r\n                <div class=\"col-md-3\">\r\n                    <label class=\"form-label\">Select Project Name</label>\r\n                    <multiselect \r\n                    v-model=\"project_name\"\r\n                    track-by=\"id\"\r\n                    :options= \"projects\"\r\n                    label = \"short_name\"\r\n                    placeholder=\"Select Project\"\r\n                    :required = \"true\"\r\n                    :searchable = \"true\"        \r\n                    multple=\"false\"\r\n                    ></multiselect>\r\n                </div>\r\n                <div class=\"col-md-3\">\r\n                    <label class=\"form-label\">Payment Terms</label>\r\n                    \r\n                    <multiselect\r\n                    v-model=\"payment_terms\"\r\n                    :options=\"['Bank /TT ', 'Cash', 'Cheque', 'M-Pesa', 'On-Account', 'Wakala']\"\r\n                    :multiple=\"false\"\r\n                    :searchable=\"true\"\r\n                    required \r\n                    :placeholder=\"'Select Payment Terms'\"\r\n                    ></multiselect>\r\n                </div>\r\n                 <div v-if=\"(user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo'))\"  class=\"col-md-3\">\r\n                    <label class=\"form-label\">Select Company</label>                    \r\n                    <multiselect\r\n                    v-model=\"selected_company_id\"\r\n                    :options=\"[\r\n                        { id: 5, name: 'BUSHMAN' },\r\n                        { id: 6, name: 'COPEX' }\r\n                    ]\"\r\n                    track-by=\"id\"\r\n                    label=\"name\"\r\n                    :multiple=\"false\"\r\n                    :searchable=\"true\"\r\n                    required \r\n                    :placeholder=\"'Select Company'\"\r\n                    ></multiselect>\r\n                </div>\r\n           \r\n            </div>\r\n         \r\n         \r\n\r\n            <div class=\"text-center gap-2 justify-content-end\">\r\n                <button v-if=\"add_vendor\" type=\"button\" class=\"btn btn-dark me-3\" @click=\"add_vendor=false\">Back</button>\r\n                <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"order_registration = false;add_vendor=false;is_closed=true\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n            </div>\r\n        </form>\r\n\r\n        <div v-if=\"loading_spinner\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n        </div>\r\n\r\n        <div class=\"text-center\"><h6>LOCAL PURCHASE ORDER LIST</h6></div>\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table \r\n                            :data=\"items\" \r\n                            :columns=\"columns\" \r\n                            :options=\"table_option\" \r\n                           \r\n                        >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + (props.row.status ? props.row.status.class : '')\">{{ props.row.status ? props.row.status.key : 'Unknown' }} </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n                                \r\n                                <a v-if=\" user_role ==1 || (props.row.status.key === 'Inactive' && props.row.requester === user_id )\"   href=\"javascript:void(0);\" title=\"Delete\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\">\r\n                                   <svg\r\n                                    v-if=\"user_permissions.includes('can_delete_lpo')\"\r\n                                       xmlns=\"http://www.w3.org/2000/svg\"\r\n                                       width=\"24\"\r\n                                       height=\"24\"\r\n                                       viewBox=\"0 0 24 24\"\r\n                                       fill=\"none\"\r\n                                       stroke=\"currentColor\"\r\n                                       stroke-width=\"1.5\"\r\n                                       stroke-linecap=\"round\"\r\n                                       stroke-linejoin=\"round\"\r\n                                       class=\"text-danger\"\r\n                                       @click=\"deleteLpo(props.row.id);\"\r\n                                   >\r\n                                       <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                       <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                   </svg>\r\n                               </a>\r\n                                    <svg v-if=\"props.row.status.key !== 'Inactive'\"\r\n                                     xmlns=\"http://www.w3.org/2000/svg\" \r\n                                     width=\"28\" height=\"28\" \r\n                                     fill=\"currentColor\"\r\n                                      class=\"bi bi-eye text-secondary\" \r\n                                      viewBox=\"0 0 16 16\"\r\n                                      @click=\"openLpoModal(props.row)\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n\r\n                                    <!-- <a v-if=\" props.row.status.key !== 'Inactive' && props.row.company_id == 6\"  \r\n                                  class=\"text-primary\" \r\n                                  title=\"Print\" \r\n                                  data-bs-toggle=\"tooltip\" \r\n                                  data-bs-placement=\"top\" \r\n                                  target=\"_blank\" \r\n                                  rel=\"noopener noreferrer\"\r\n                                  @click=\"printLpo(props.row)\"\r\n                                  >\r\n                                    <div \r\n                                     v-if=\"loader == props.row.id\"\r\n                                     class=\"spinner-border text-primary mt-1\"\r\n                                      role=\"status\"\r\n                                      style=\"width: 1.5rem; height: 1.5rem;\"\r\n                                      >\r\n                                      <span class=\"sr-only\">Loading...</span>\r\n                                    </div>\r\n                                     <svg \r\n                                     v-else\r\n                                     xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                                       <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                                       <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                                    </svg>\r\n                                </a>  -->\r\n\r\n                                   <a v-if=\" props.row.status.key !== 'Inactive' && props.row.company_id == 6\"  :href=\"`${print_url}copex-lpo-pdf/${props.row.id}`\" \r\n                                  class=\"text-success\" \r\n                                  title=\"Print\" \r\n                                  data-bs-toggle=\"tooltip\" \r\n                                  data-bs-placement=\"top\" \r\n                                  target=\"_blank\" \r\n                                  rel=\"noopener noreferrer\">\r\n                                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                                       <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                                       <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                                    </svg>\r\n                                </a>  \r\n                                <a v-if=\"props.row.status.key !== 'Inactive' && props.row.company_id == 5\"  :href=\"`${print_url}bushman-lpo-pdf/${props.row.id}`\" \r\n                                  class=\"text-success\" \r\n                                  title=\"Print\" \r\n                                  data-bs-toggle=\"tooltip\" \r\n                                  data-bs-placement=\"top\" \r\n                                  target=\"_blank\" \r\n                                  rel=\"noopener noreferrer\">\r\n                                     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                                       <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                                       <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                                    </svg>\r\n                                </a>  \r\n\r\n\r\n                                <svg v-if=\"user_permissions.includes('can_edit_lpo') || props.row.status.key === 'Inactive' && props.row.requester === user_id \"  class=\"w-6 h-6 text-gray-800 dark:text-white\" \r\n                                 aria-hidden=\"true\"\r\n                                 xmlns=\"http://www.w3.org/2000/svg\" \r\n                                 width=\"24\" height=\"24\" fill=\"none\" \r\n                                 viewBox=\"0 0 24 24\"\r\n                              @click=\"openEditModal(props.row)\" \r\n                               >\r\n                                    <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z\"/>\r\n                                </svg>\r\n                        \r\n                             <svg v-if=\" props.row.status.key === 'Inactive' && props.row.requester === user_id \" xmlns=\"http://www.w3.org/2000/svg\" \r\n                             width=\"28\" \r\n                             height=\"28\"\r\n                             fill=\"currentColor\"\r\n                             class=\"bi bi-plus-circle\" \r\n                             viewBox=\"0 0 16 16\" \r\n                             @click=\"openLpoModal(props.row)\">\r\n                                <path d=\"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zM8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0z\"/>\r\n                                <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\r\n                            </svg>\r\n                            \r\n                              \r\n                                \r\n  \r\n    <!-- Modal  for editing-->\r\n   <teleport to=\"body\">\r\n  <div v-if=\"Show_editing_modal\" class=\"modal fade show d-block \" role=\"dialog\">\r\n    <div class=\"modal-dialog  modal-lg \">\r\n      <div class=\"modal-content d-flex flex-column\" style=\"block-size: auto;\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">LPO EDITING </h5>\r\n          <button type=\"button\" class=\"btn-close\" @click=\"closeEditModal\"></button>\r\n        </div>\r\n        <form  class=\"mt-1 p-3 border rounded bg-white shadow\" @submit.prevent=\"updatePurchaseOrder\">\r\n        <div class=\"modal-body flex-grow-1\" >         \r\n           \r\n        \r\n         <div class=\"row mb-2\">\r\n                <div v-if=\"!add_vendor\" class=\"col-md-4\">\r\n                    <label class=\"form-label\">Select A Supplier</label>\r\n                    <select class=\"form-select\" v-model=\"vendor_id\" required @change=\"handleVendorChange\">\r\n                    <option value=\"\">Select Supplier</option>\r\n                     <option v-for=\"vendor in vendors\" :key=\"vendor.id\" :value=\"vendor.id\">{{ vendor.name }}</option>\r\n                    <option value=\"NEW_VENDOR\">New Supplier</option>\r\n                    </select>                \r\n\r\n                </div>\r\n                <!-- new vendor  starts-->\r\n                <div  v-if=\"add_vendor\" class=\"col-md-4\">\r\n              <label class=\"form-label\">Supplier Name</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_name\" name=\"Vendor_name\" required>\r\n                </div>       \r\n                 <div  v-if=\"add_vendor\" class=\"col-md-4\">\r\n              <label class=\"form-label\">Supplier Email</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_email\" name=\"Vendor_name\" required>\r\n              </div>\r\n                 <div  v-if=\"add_vendor\" class=\"col-md-4\">\r\n              <label class=\"form-label\">Supplier Location</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_location\" name=\"Vendor_name\" required>\r\n          </div>               \r\n             <div  v-if=\"add_vendor\" class=\"col-md-4 \">\r\n              <label class=\"form-label\">Supplier Phone</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_phone\" name=\"Vendor_name\" required>\r\n             </div>\r\n          <div  v-if=\"add_vendor\" class=\"col-md-4\">\r\n              <label class=\"form-label\">Supplier Address</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_address\" name=\"Vendor_name\" required>\r\n          </div>\r\n        \r\n          <div class=\"col-md-4 \" >\r\n                    <label class=\"form-label\">Select Project Name</label>\r\n                    <multiselect \r\n                    v-model=\"project_name\"\r\n                    track-by=\"id\"\r\n                    :options= \"projects\"\r\n                    label = \"short_name\"\r\n                    placeholder=\"Select Project\"\r\n                    :required = \"true\"\r\n                    :searchable = \"true\"        \r\n                    multple=\"false\"\r\n                    ></multiselect>\r\n          </div>\r\n            <div class=\"col-md-4\">\r\n                    <label class=\"form-label\">Payment Terms</label>\r\n                    \r\n                    <multiselect\r\n                    v-model=\"payment_terms\"\r\n                    :options=\"['Bank /TT ', 'Cash', 'Cheque', 'M-Pesa', 'On-Account', 'Wakala']\"\r\n                    :multiple=\"false\"\r\n                    :searchable=\"true\"\r\n                    required \r\n                    :placeholder=\"'Select Payment Terms'\"\r\n                    ></multiselect>\r\n            </div>\r\n          \r\n          </div>\r\n        </div>\r\n       \r\n        <div class=\"modal-footer \"> \r\n            <div v-if=\"add_vendor\" class=\"float-start\">\r\n                <button type=\"button\" class=\"btn btn-dark\" @click=\"add_vendor = false\">Back</button>\r\n            </div>\r\n            <div class=\"float-end\">\r\n        <button type=\"button\" class=\"btn btn-danger\" @click=\"closeEditModal\">Cancel</button>  \r\n         &nbsp; \r\n           <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSending\"> \r\n             <span v-if=\"isSending\">\r\n               <span class=\"spinner-border spinner-border-xs\" role=\"status\" aria-hidden=\"true\"></span>            \r\n             </span>\r\n             <span v-else>Update</span>\r\n           </button>\r\n            </div>\r\n\r\n       </div>\r\n\r\n        </form> \r\n        \r\n      </div>\r\n    </div>\r\n  </div>\r\n   </teleport>\r\n                                                                                                                                                        \r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- lpo modale start -->\r\n    <teleport to=\"body\">\r\n   <div v-if=\"showlpoModal\" class=\"modal fade show d-block\" role=\"dialog\">\r\n   <div class=\"modal-dialog  modal-xl\">\r\n     <div class=\"modal-content d-flex flex-column\" style=\"height:auto;\">\r\n       <div class=\"modal-header\">\r\n         <h5 class=\"modal-title\">Details for Local Purchase Order  </h5>\r\n         <button type=\"button\" class=\"btn-close\" @click=\"closeLpoModal\"></button>\r\n       </div>  \r\n\r\n                   <!-- remark starts -->\r\n                    <div class=\"d-flex\">\r\n                          <div class=\"form-group col-md-2 mt-4 ms-auto\">\r\n                             <button \r\n            class=\"btn btn-info  mx-2\" \r\n            @click=\"showLpoRemark =! showLpoRemark\" \r\n            title=\"Print Report\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chat-square-text\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n                    <path d=\"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z\"/>\r\n                </svg>\r\n            &nbsp;Remark\r\n            </button>\r\n            </div>  \r\n                    </div>\r\n               \r\n             <!-- remark ends -->\r\n             <div v-if=\"showLpoRemark\">\r\n        <form class=\"row mx-4\" @submit.prevent=\"saveRemark()\">\r\n  <div class=\"col-md-10\">\r\n    <input type=\"text\"    v-model=\"newremark\"  class=\"form-control\"  placeholder=\"Enter Remark\">\r\n  </div>\r\n  <div class=\"col-md-1\">\r\n    <button type=\"submit\" class=\"btn btn-primary mb-3\">Send</button>\r\n  </div>\r\n</form>\r\n       </div>  \r\n\r\n        <div v-if=\"isActive\" class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\">\r\n           <div  v-if=\"!loading\" class=\"d-flex justify-content-between align-items-center mb-3\">\r\n                           \r\n                           <h5 class=\"text-dark\"><span style=\"font-weight: bolder;\">{{project_name}}</span></h5>\r\n                           \r\n                          <div v-if=\"user_permissions.includes('can_verify_copex_operator')\">\r\n                            <div @click=\"whatsappNotification2('255677771888','Engineer','check','deal with','Sr Accountant')\r\n                            \">\r\n                            <button v-if=\"approval_status_data.operation_department === 0 && user_permissions.includes('can_verify_copex_operator')\" @click=\"approveCheck(approval_status_data.id, 'operation_department'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-primary\">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else >Check</div>\r\n                            </button>\r\n                        </div>\r\n                           <button v-if=\"approval_status_data.operation_department === 1 && user_permissions.includes('can_verify_copex_operator')\" @click=\"approveUnCheck(approval_status_data.id, 'operation_department'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-dark\">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else>Uncheck</div>\r\n                                   </button>\r\n                          </div >\r\n                            <div v-if=\"user_permissions.includes('can_verify_engineer')\">\r\n                                <div @click=\"whatsappNotification2('255657111555','Sr Accountant','check','deal with','Managing Director')\r\n                                \">\r\n                                   <button v-if=\" approval_status_data.operation_department === 1 && approval_status_data.engineer === 0 && user_permissions.includes('can_verify_engineer')\" @click=\"approveCheck(approval_status_data.id, 'engineer'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-primary \">\r\n                                        <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                          <span class=\"sr-only\"></span>\r\n                                         </div>\r\n                                         <div v-else>Check</div>\r\n                                    </button>\r\n                                </div>                           \r\n                                    <button v-if=\"approval_status_data.engineer === 1 && user_permissions.includes('can_verify_engineer')\" @click=\"approveUnCheck(approval_status_data.id, 'engineer'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-dark \">\r\n                                        <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                          <span class=\"sr-only\"></span>\r\n                                         </div>\r\n                                         <div v-else>Uncheck</div>\r\n                                    </button>\r\n                                \r\n                           </div>\r\n                           <div v-if=\"user_permissions.includes('can_verify_project_manager')\">\r\n                            <button v-if=\"  approval_status_data.operation_department === 1 && approval_status_data.project_manager === 0 && user_permissions.includes('can_verify_project_manager')\" @click=\"approveCheck(approval_status_data.id, 'project_manager'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-primary \">\r\n                                        <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                          <span class=\"sr-only\"></span>\r\n                                         </div>\r\n                                         <div v-else>Check</div>\r\n                                    </button>\r\n                                  <button v-if=\"approval_status_data.project_manager === 1 && user_permissions.includes('can_verify_project_manager')\" @click=\"approveUnCheck(approval_status_data.id, 'project_manager'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-dark \">\r\n                                        <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                          <span class=\"sr-only\"></span>\r\n                                         </div>\r\n                                         <div v-else>Uncheck</div>\r\n                                    </button>\r\n                           </div>\r\n                           <div v-if=\"user_permissions.includes('can_verify_sr_accountant')  && is_copex\">\r\n                            <div @click=\"whatsappNotification('255713222333','Managing Director','LPO Requisition ','approve.')\">\r\n                            <button v-if=\"approval_status_data.engineer === 1 && approval_status_data.senior_accountant === 0 && user_permissions.includes('can_verify_sr_accountant')\" @click=\"approveCheck(approval_status_data.id, 'senior_accountant'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-primary\">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else>Check</div>\r\n                                   </button>\r\n                                </div>\r\n                                 <button v-if=\"approval_status_data.senior_accountant === 1 && user_permissions.includes('can_verify_sr_accountant')\" @click=\"approveUnCheck(approval_status_data.id, 'senior_accountant'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-dark p-1 \">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else>Uncheck</div>\r\n                                   </button>\r\n                               </div>\r\n                           <div v-if=\"user_permissions.includes('can_verify_sr_accountant')  && is_bushman\">\r\n                            <button v-if=\"( approval_status_data.project_manager === 1 )&& approval_status_data.senior_accountant === 0 && user_permissions.includes('can_verify_sr_accountant')\" @click=\"approveCheck(approval_status_data.id, 'senior_accountant'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-primary\">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else>Check</div>\r\n                                   </button>\r\n                                 \r\n                                   <button v-if=\"approval_status_data.senior_accountant === 1 && user_permissions.includes('can_verify_sr_accountant')\" @click=\"approveUnCheck(approval_status_data.id, 'senior_accountant'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-dark p-1 btn-sm me-3\">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else>Uncheck</div>\r\n                                   </button>\r\n\r\n                           </div>\r\n                           <div v-if=\"user_permissions.includes('can_verify_md')\">\r\n                            <button v-if=\"approval_status_data.managing_director === 0 && approval_status_data.senior_accountant === 1 && user_permissions.includes('can_verify_md')\" @click=\"approveCheck(approval_status_data.id, 'managing_director'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-primary \">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else>Check</div>\r\n                                   </button>\r\n                                  <button v-if=\"approval_status_data.managing_director === 1 && user_permissions.includes('can_verify_md')\" @click=\"approveUnCheck(approval_status_data.id, 'managing_director'),spinner=!spinner\" :class=\"{ disabled: spinner }\" class=\"btn btn-dark p-1 \">\r\n                                       <div v-if=\"spinner\" class=\"spinner-border text-white\" role=\"status\">\r\n                                         <span class=\"sr-only\"></span>\r\n                                        </div>\r\n                                        <div v-else>Uncheck</div>\r\n                                   </button>\r\n                            \r\n                           </div>\r\n\r\n                           <h5 class=\"text-dark\">Tsh {{ Number(total_amount).toLocaleString() }} </h5>\r\n            </div>\r\n           <div v-if=\"!loading\" class=\"row layout-top-spacing\">\r\n         <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n           <div class=\"panel p-0\">\r\n               <!-- close button starts -->\r\n                <div class=\"d-flex\">\r\n                   <h6 class=\"text-center mt-2 mx-2\">Approval Status</h6>\r\n                 </div>  \r\n                <!-- close button ends -->\r\n               <div class=\"custom-table table3 table-responsive\">\r\n                   <table class=\"table\">\r\n                       <thead>\r\n                           <tr>\r\n                               <th>Operation's Dept</th>\r\n                               <th v-if=\"is_copex\" >Engineer </th>  \r\n                               <th v-if=\"is_bushman\">Project Manager </th>                                  \r\n                               <th>Sr.Accountant</th>\r\n                               <th>MD</th>\r\n                           </tr>\r\n                       </thead>\r\n                       <tbody>\r\n                           <tr>\r\n                               <td :class=\"approval_status_data.operation_department === 0 ? 'text-danger' : 'text-success'\">\r\n                                   {{ approval_status_data.operation_department === 0 ? 'unchecked' : 'checked' }}             \r\n                               </td>\r\n\r\n                               <td v-if=\"is_copex\" :class=\"approval_status_data.engineer === 0 ? 'text-danger' : 'text-success'\">\r\n                                    {{ approval_status_data.engineer === 0 ? 'unchecked' : 'checked' }}\r\n                                    \r\n                                </td>\r\n                                <td v-if=\"is_bushman\" :class=\"approval_status_data.project_manager === 0 ? 'text-danger' : 'text-success'\">\r\n                                    {{ approval_status_data.project_manager === 0 ? 'unchecked' : 'checked' }}\r\n                                    \r\n                                </td>\r\n               \r\n                               <td :class=\"approval_status_data.senior_accountant === 0 ? 'text-danger' : 'text-success'\">\r\n                                   {{ approval_status_data.senior_accountant === 0 ? 'unchecked' : 'checked' }}\r\n                                   \r\n                               </td>\r\n                               <td :class=\"approval_status_data.managing_director === 0 ? 'text-danger' : 'text-success'\">\r\n                                   {{ approval_status_data.managing_director === 0 ? 'unchecked' : 'checked' }}\r\n                                  \r\n                               </td>\r\n                           </tr>\r\n                       </tbody>\r\n                   </table>\r\n               </div>\r\n           </div>\r\n       </div>\r\n       </div>\r\n          \r\n           <div class=\"row layout-top-spacing\">\r\n\r\n\r\n           <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n               <div class=\"panel p-0\">\r\n                        \r\n                   <div v-if=\"loading\" class=\"d-flex justify-content-center align-items-center\" style=\"height: 100px;\">\r\n           <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n               <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                   <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                   <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                   <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n               </svg>\r\n               Loading...\r\n           </span>\r\n       </div>\r\n                      \r\n\r\n                    \r\n\r\n\r\n                   <div v-else class=\"custom-table table3 \">\r\n           \r\n                      \r\n                       <v-client-table :data=\"lpo_items\" :columns=\"item_columns\" :options=\"table_option\" >\r\n                           <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                           </template>\r\n                           <template #actions=\"props\">\r\n\r\n                               <a   href=\"javascript:void(0);\" title=\"Delete\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" >\r\n                                   <svg\r\n                                       xmlns=\"http://www.w3.org/2000/svg\"\r\n                                       width=\"24\"\r\n                                       height=\"24\"\r\n                                       viewBox=\"0 0 24 24\"\r\n                                       fill=\"none\"\r\n                                       stroke=\"currentColor\"\r\n                                       stroke-width=\"1.5\"\r\n                                       stroke-linecap=\"round\"\r\n                                       stroke-linejoin=\"round\"\r\n                                       class=\"text-danger\"\r\n                                   >\r\n                                       <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                       <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                   </svg>\r\n                               </a>\r\n                             \r\n\r\n                               \r\n                           </template>\r\n                          \r\n                       </v-client-table>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n       </div> \r\n          <!-- approval officers starts -->\r\n\r\n       \r\n   \r\n        <!-- approval officers ends -->\r\n       </div> \r\n      \r\n       <div v-if=\"!isActive\" class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\" >\r\n        <form v-if=\"isOpen\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerItem\">\r\n               <div class=\"d-flex\">\r\n            <div class=\"ms-auto\">\r\n                <button type=\"button\" class=\"btn btn-danger me-2\" @click=\"isOpen= false\">X</button>\r\n            </div>\r\n        </div>\r\n            <h4 class=\"text-center\">ITEM  REGISTRATION FORM</h4>\r\n        <div class=\"row mb-2\">\r\n            <div class=\"col-md-6\">\r\n                <label class=\"form-label\">Item Category</label>\r\n                <select class=\"form-select\" v-model=\"item_category\" @change=\"handleDescriptionChange\">\r\n                    <option value=\"\" disabled>Select Category</option>\r\n                    <option v-for=\"category in item_list_category\" :key=\"category\" :value=\"category\">\r\n                        {{category.name}} \r\n                    </option>\r\n                </select>\r\n            </div>\r\n            <div v-if=\"isFuel\" class=\"col-md-6\">\r\n                <label class=\"form-label\">Description of good</label>\r\n                <select class=\"form-select\" v-model=\"description_of_lpo\" @change=\"handleDescriptionChange\">\r\n                    <option value=\"\" disabled>Select Category</option>\r\n                    <option value=\"Direct\" >Direct Filling</option>\r\n                    <option value=\"Bulk\" >Bulk</option>                   \r\n                </select>\r\n            </div>\r\n               \r\n            <div v-if=\"is_items\" class=\"col-md-6\">\r\n                <label class=\"form-label\">Select items</label>\r\n                <Multiselect\r\n                v-model=\"description\"\r\n                :searchable=\"true\"\r\n                :options=\"items_list\"\r\n                :multiple=\"false\"\r\n                required\r\n                track-by=\"name\"\r\n                label=\"name\"\r\n                ></Multiselect>                  \r\n            </div>\r\n\r\n            <div v-if=\"machine_field\" class=\"col-md-6\">\r\n                <label class=\"form-label\">Select Machine</label>              \r\n            <multiselect \r\n                v-model=\"direct_description\"\r\n                :searchable=\"true\"\r\n                :options=\"machines\"\r\n                :multiple=\"false\"\r\n                required\r\n                track-by=\"id\"\r\n                label=\"name\"\r\n                ></multiselect>\r\n\r\n            </div>\r\n           \r\n            <div class=\"col-md-6\">\r\n                <label class=\"form-label\">Unit of measurement</label>\r\n                <multiselect \r\n                    v-model=\"unit\" \r\n                    :options=\"units\"\r\n                     label = \"name\"\r\n                     placeholder=\"Select Unit\" \r\n                    :searchable=\"true\" \r\n                    :multiple=\"false\" \r\n                    required>\r\n                </multiselect>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n                <label class=\"form-label\">Quantity</label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Quantity\" v-model=\"quantity\" step=\"any\" required>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n                <label class=\"form-label\">Rate</label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Rate\" v-model=\"rate\" step=\"any\" required>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n                <label class=\"form-label\">Amount</label>\r\n                <input type=\"text\" class=\"form-control\" :value=\"amount\" readonly>\r\n            </div>\r\n            <div v-if=\"machine_field\" class=\"col-md-12\">\r\n                <label class=\"form-label\">Task</label>\r\n                <textarea  class=\"form-control\"  name=\"\" v-model=\" task\" id=\"\"></textarea>\r\n            </div>\r\n        </div>\r\n        <div class=\"text-center gap-2 justify-content-end\">\r\n            <button type=\"button\" class=\"btn btn-dark me-2\" @click=\"closeLpoModal\">Close</button>\r\n            <button type=\"submit\" class=\"btn btn-primary me-2\" :disabled=\"isSending\"> \r\n             <span v-if=\"isSending\">\r\n               <span class=\"spinner-border spinner-border-xs\" role=\"status\" aria-hidden=\"true\"></span>            \r\n             </span>\r\n             <span v-else>Register</span>\r\n           </button>\r\n        </div>\r\n        </form>\r\n    <div  class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n               <div class=\"panel p-0\">\r\n                        <div v-if=\" !isOpen\" class=\"d-flex justify-content-between mb-3 p-3\">\r\n                            <button class=\"btn btn-warning\" @click=\"activatePurchaseOrder()\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"34\" height=\"34\" fill=\"currentColor\" class=\"bi bi-check2-square\" viewBox=\"0 0 16 16\">\r\n                                        <path d=\"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z\"/>\r\n                                        <path d=\"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0\"/>\r\n                                    </svg>\r\n                               Ready \r\n                            </button>\r\n                           \r\n                            <button class=\"btn btn-primary\" @click=\"isOpen = true\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-plus\" viewBox=\"0 0 16 16\">\r\n                                    <path d=\"M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0z\"/>\r\n                                    <path d=\"M4 8a.5.5 0 0 1 .5-.5h3V4a.5.5 0 0 1 1 0v3.5h3a.5.5 0 0 1 0 1h-3V12a.5.5 0 0 1-1 0V8.5h-3A.5.5 0 0 1 4 8z\"/>\r\n                                </svg>\r\n                                Add Item\r\n                            </button>\r\n                            \r\n\r\n                        </div>\r\n                   <div v-if=\"loading\" class=\"d-flex justify-content-center align-items-center\" style=\"height: 100px;\">\r\n           <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n               <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                   <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                   <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                   <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n               </svg>\r\n             \r\n           </span>\r\n       </div>\r\n                      \r\n\r\n                    \r\n\r\n\r\n                   <div v-else class=\"custom-table table3\">           \r\n                         <v-client-table :data=\"lpo_items\" :columns=\"item_columns\" :options=\"table_option\" >\r\n                           <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                           </template>\r\n                           <template #actions=\"props\">\r\n\r\n                               <a href=\"javascript:void(0);\" title=\"Delete\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" @click=\"deleteItem(props.row.id);\">\r\n                                   <svg\r\n                                       xmlns=\"http://www.w3.org/2000/svg\"\r\n                                       width=\"24\"\r\n                                       height=\"24\"\r\n                                       viewBox=\"0 0 24 24\"\r\n                                       fill=\"none\"\r\n                                       stroke=\"currentColor\"\r\n                                       stroke-width=\"1.5\"\r\n                                       stroke-linecap=\"round\"\r\n                                       stroke-linejoin=\"round\"\r\n                                       class=\"text-danger\"\r\n                                   >\r\n                                       <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                       <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                   </svg>\r\n                               </a>\r\n                                                      \r\n                           </template>\r\n                          \r\n                       </v-client-table>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n       </div> \r\n     </div>\r\n   </div>\r\n </div>\r\n </teleport>\r\n \r\n   <!-- Modal Background Overlay -->\r\n   <div v-if=\"showlpoModal\" class=\"modal-backdrop fade show\"></div>\r\n     \r\n     <!-- lpo modal end -->\r\n\r\n      <!-- Remark Modal starts -->\r\n     <teleport to=\"body\">\r\n  <div v-if=\"showRemarkModal\" class=\"modal fade show d-block\" role=\"dialog\" @click.self=\"closeRemarkModal\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-xl\">\r\n      <div class=\"modal-content d-flex flex-column\" style=\"height: 90vh;\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">Remarks for LPOs</h5>\r\n          <button type=\"button\" class=\"btn-close\" @click=\"closeRemarkModal\"></button>\r\n        </div>\r\n        \r\n        <div class=\"modal-body flex-grow-1 p-3 p-md-4 bg-light\" style=\"overflow-y: auto;\">\r\n          <div v-if=\"isfetching\" class=\"d-flex justify-content-center align-items-center\" style=\"height: 100px;\">\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n        <div v-if=\"isLoading\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n        </div>\r\n            <div v-else>\r\n  <div v-if=\"remarks.length === 0\" class=\"text-center py-5\">\r\n              <div class=\"mb-3 text-muted\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" fill=\"currentColor\" class=\"bi bi-chat-square-text\" viewBox=\"0 0 16 16\">\r\n                  <path d=\"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n                  <path d=\"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z\"/>\r\n                </svg>\r\n              </div>\r\n              <p  class=\"text-muted\">No remarks yet. Be the first to add one!</p>\r\n            </div>\r\n            <div v-else class=\"chat-messages\">\r\n              <div v-for=\"(remark, index) in remarks\" :key=\"index\" class=\"mb-3\">\r\n                <!-- Current user's message (right aligned) -->\r\n                <div v-if=\"remark.remarker_id == user_id\" class=\"d-flex justify-content-end\" >\r\n                  <div class=\"chat-message-outgoing shadow text-dark\" style=\"background-color:#E9E9E9;max-width: 250px;\" >\r\n                    <div class=\"small d-flex justify-content-between mb-1 \">\r\n                      <span class=\"fw-bold mx-2 mt-1\">You</span>\r\n                      <span class=\" ms-2 mt-1\">{{ new Date(remark.created_at).toLocaleString() }}</span>\r\n                    </div>\r\n                    <div class=\"p-3 rounded-3 rounded-bottom-start-0 shadow-sm\">\r\n                      {{ remark.description }}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- Other user's message (left aligned) -->\r\n                <div v-else class=\"d-flex justify-content-start text-dark\" >\r\n                  <div class=\"chat-message-incoming shadow me-2\"  style=\"background-color:#E9E9E9\">\r\n                    <div class=\"small d-flex justify-content-between mb-1\">\r\n                      <span class=\"fw-bold mx-1 mt-1\">{{ remark.remarker || remark.sender_name }}</span>\r\n                      <span class=\"text-muted ms-2 mt-1\">{{ new Date(remark.created_at).toLocaleString() }}</span>\r\n                    </div>\r\n                    <div class=\"p-3  rounded-3 rounded-bottom-start-0 shadow-sm\">\r\n                      {{ remark.description }}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            </div>\r\n          \r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Form for adding a new remark - fixed at bottom -->\r\n        <div class=\"p-3 border-top bg-white\">\r\n          <form @submit.prevent=\"saveRemark\">\r\n            <div class=\"mb-3\">\r\n              <textarea \r\n                v-model=\"newremark\" \r\n                class=\"form-control\" \r\n                rows=\"2\" \r\n                placeholder=\"Type your remark here...\"\r\n              ></textarea>\r\n            </div>\r\n            <div class=\"d-flex justify-content-end gap-2\">\r\n              <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeRemarkModal\">\r\n                Close\r\n              </button>\r\n              <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSending || !newremark.trim()\">\r\n                <span v-if=\"isSending\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n                Save\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</teleport>\r\n     <!-- Modal Background Overlay -->\r\n     <div v-if=\"showRemarkModal\" class=\"modal-backdrop fade show\"></div>\r\n     <!-- lpo modal end -->\r\n<!-- remark modal ends -->\r\n\r\n\r\n\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import axios from 'axios';\r\n    import { onMounted, ref,inject,watch } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Purchase Order' });\r\n\r\n        const readRemark = async (id) => {\r\n         const remarkStatus ={\r\n            'status':'checked by ' + JSON.parse(localStorage.getItem(\"user\")).name ,\r\n              }\r\n    try {\r\n        const response = await axiosInstance.put(`/remark/${id}`,remarkStatus);\r\n        showMessage('checked');\r\n        fetchNotifications(); \r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.error('Error:', error);\r\n    }\r\n};\r\n\r\n    const showRemarkModal = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const printLpoReport = inject('printReport');\r\n    const whatsappNotification = inject('whatsappNotification');\r\n    const whatsappNotification2 = inject('whatsappNotification2');\r\n    const add_vendor = ref(false);\r\n    const order_registration = ref(false);\r\n    const columns = ref(['SNo','LPO_number','requested_by', 'supplier','date', 'project','payment', 'status','awaits', 'actions']);\r\n    const items = ref([]);\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [5, 10, 20, 50],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'LPO_number', 'date', 'phone'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n        searchable: true,\r\n    });\r\n    const isfetching = ref(false);\r\n    const showLpoRemark = ref(false); \r\n    const notification_count=ref(0);\r\n    const notifications= ref(['']);\r\n    const selected_project = ref('');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const company_id = ref('');\r\n    const selected_company_id= ref('');\r\n    const selected_status = ref('');\r\n    const loading_spinner = ref(false);\r\n    const supplier_name = ref('');\r\n    const supplier_address = ref('');\r\n    const supplier_location = ref('');\r\n    const payment_terms = ref('');\r\n    const project_name = ref('');\r\n    const vendor_id = ref('');\r\n    const is_admin=ref(false);\r\n    const vendors =  ref([]);\r\n    const isSending = ref(false);\r\n    const is_editor = ref(false); \r\n    const Vendor_name = ref('');\r\n    const Vendor_phone= ref('');\r\n    const Vendor_email = ref('');\r\n    const Vendor_address =ref ('');\r\n    const Vendor_location=ref('');\r\n    const is_closed = ref(true);\r\n    const order_status=ref('');\r\n    const user_role = JSON.parse(localStorage.getItem(\"user\")).role;\r\n    const user_id = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    const print_url = ref(process.env.VUE_APP_API_BASE_URL);\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n     const axiosInstance2 = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL2\r\n    });\r\n    const newremark = ref('');\r\n    const remarks = ref([]);\r\n    const isLoading = ref(false);\r\n\r\n\r\n//25 june 2025\r\n\r\nconst getItems = async () => {\r\n    loading.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`/order-items/${lpo_number.value}`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            total_amount.value = response.data.reduce((sum, order) => {\r\n                return sum + (order.quantity * order.rate);\r\n            }, 0);\r\n\r\n            isOpen.value = response.data.length === 0;\r\n\r\n            lpo_items.value = response.data.map((order, index) => ({\r\n                SNo: index + 1,\r\n                category: order.category,\r\n                id: order.id,\r\n                description: order.description,\r\n                type: order.machine?.type ?? '---',\r\n                units: order.unit_measure,\r\n                quantity: order.quantity.toLocaleString(),\r\n                rate: Number(order.rate).toLocaleString(),\r\n                amount: (order.quantity * order.rate).toLocaleString(undefined, { maximumFractionDigits: 3 })\r\n            }));\r\n\r\n            return response.data; // âœ… RETURN RAW DATA or lpo_items.value\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error fetching purchase order: \", error);\r\n    } finally {\r\n        loading.value = false;\r\n    }\r\n\r\n    return []; // fallback\r\n};\r\n\r\nconst getApprovalStatus = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`/approval-check-status/${lpo_number.value}`);\r\n        if (response.data && typeof response.data === 'object') {\r\n            approval_status_data.value = response.data;\r\n            spinner.value = false;\r\n            return response.data; // âœ… ADD THIS\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n            return null;\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error fetching approval status: \", error);\r\n        return null;\r\n    }\r\n};\r\n\r\n\r\nconst loader = ref(0)\r\nconst printLpo = async (lpo) => {\r\n  loader.value = lpo.id  \r\n  lpo_number.value = lpo.id;\r\n  const changed_date = \"2025-12-12\";\r\n  const lpo_items = (await getItems()) || [];\r\n  const approvalStatus = (await getApprovalStatus()) || {};\r\n  loader.value = 0\r\n  const iframe = document.createElement(\"iframe\");\r\n  iframe.style.display = \"none\";\r\n  document.body.appendChild(iframe);\r\n\r\n  const dateParts = changed_date.split(\"-\");\r\n  const formattedDate = `${dateParts[1]}/${dateParts[2].slice(-2)}`;\r\n\r\n  const getStatusHtml = (val, role) => {\r\n    if (role === \"Prepared By\") {\r\n      return val === 1\r\n        ? `<td style=\"color: green; font-weight: bold;text-align:center\"\">Checked</td>`\r\n        : `<td style=\"color: red; font-weight: bold;text-align:center\"\">Unchecked</td>`;\r\n    }\r\n    if (role === \"Checked By\") {\r\n      return val === 1\r\n        ? `<td style=\"color: green; font-weight: bold;text-align:center\">Checked</td>`\r\n        : `<td style=\"color: red; font-weight: bold;text-align:center\"\">Unchecked</td>`;\r\n    }\r\n    if (role === \"Verified By\") {\r\n      return val === 1\r\n        ? `<td style=\"color: green; font-weight: bold;text-align:center\"\">Verified</td>`\r\n        : `<td style=\"color: red; font-weight: bold;text-align:center\"\">Unverified</td>`;\r\n    }\r\n    if (role === \"Approved By\") {\r\n      return val === 1\r\n        ? `<td style=\"color: green; font-weight: bold;text-align:center\"\">Approved</td>`\r\n        : `<td style=\"color: red; font-weight: bold;text-align:center\"\">Unapproved</td>`;\r\n    }\r\n    return `<td style=\"color: gray;\">Unchecked</td>`;\r\n  };\r\n\r\n  const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Print LPO</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\r\n  .logo { width: 160px; height: auto; }\r\n  .lpo-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; }\r\n  .company-title h2 { margin: 5px 0; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; font-weight: normal; }\r\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; border-radius: 4px; overflow: hidden; }\r\n  table.details td, table.items th, table.items td, .signatures th, .signatures td { border: 0.5px solid #000; padding: 6px; font-weight: normal; }\r\n  table.items thead tr th { background-color: #f8f8f8; border-bottom: 1px solid #000; }\r\n  table tr:first-child th:first-child, table tr:first-child td:first-child { border-top-left-radius: 8px; }\r\n  table tr:first-child th:last-child, table tr:first-child td:last-child { border-top-right-radius: 8px; }\r\n  table tr:last-child td:first-child { border-bottom-left-radius: 8px; }\r\n  table tr:last-child td:last-child { border-bottom-right-radius: 8px; }\r\n  .goods-received { border: 1px solid #000; padding: 10px; margin-top: 30px; font-size: 13px; border-radius: 10px; }\r\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"lpo-box\">\r\n    LPO NO:<br>\r\n    <span style=\"color:red;\">${(\"0000\" + lpo.id).slice(-4)} /${formattedDate}</span>\r\n  </div>\r\n</div>\r\n<div class=\"reg-info\">\r\n  TIN: 103-826-519<br>\r\n  VRN: 20-01-017530R\r\n</div>\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\r\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\r\n</div>\r\n<div class=\"section-title\">PURCHASE ORDER</div>\r\n<table class=\"details\">\r\n  <tr>\r\n    <td><strong>Supplier's Name:</strong> ${lpo.supplier}</td>\r\n    <td><strong>Date:</strong> ${lpo.date}</td>\r\n  </tr>\r\n  <tr>\r\n    <td><strong>Address:</strong> ${lpo.location}</td>\r\n    <td><strong>Payment Terms:</strong> ${lpo.payment}</td>\r\n  </tr>\r\n  <tr>\r\n    <td><strong>Project Name:</strong> ${lpo.project}</td>\r\n    <td><strong>Location:</strong> ${lpo.location}</td>\r\n  </tr>\r\n</table>\r\n<p><strong>Please Supply the goods as per details below</strong></p>\r\n<table class=\"items\">\r\n  <thead>\r\n    <tr>\r\n      <th>SN</th>\r\n      <th>Description of Goods</th>\r\n      <th>Units</th>\r\n      <th>Quantity</th>\r\n      <th>Rate</th>\r\n      <th>Amount</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${lpo_items\r\n      .map(\r\n        (item, index) => `\r\n    <tr>\r\n      <td >${index + 1}</td>\r\n      <td>${item.description}</td>\r\n      <td>${item.unit_measure}</td>\r\n      <td style=\"text-align:right\">${parseFloat(item.quantity).toFixed(2)}</td>\r\n      <td style=\"text-align:right\">${parseFloat(item.rate).toLocaleString()}/=</td>\r\n      <td style=\"text-align:right\">${(item.quantity * item.rate).toLocaleString()}/=</td>\r\n    </tr>\r\n    `\r\n      )\r\n      .join(\"\")}\r\n    <tr>\r\n      <td colspan=\"5\" style=\"text-align:right;\"><strong>TOTAL</strong></td>\r\n      <td><strong>${lpo_items\r\n        .reduce((sum, item) => sum + item.quantity * item.rate, 0)\r\n        .toLocaleString()}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n<table class=\"signatures\" style=\"margin-top: 20px;\">\r\n  <thead>\r\n    <tr>\r\n      <th>Prepared By</th>\r\n      <th>Checked By</th>\r\n      <th>Verified By</th>\r\n      <th>Approved By</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      ${getStatusHtml(approvalStatus.operation_department, \"Prepared By\")}\r\n      ${getStatusHtml(approvalStatus.engineer, \"Checked By\")}\r\n      ${getStatusHtml(approvalStatus.senior_accountant, \"Verified By\")}\r\n      ${getStatusHtml(approvalStatus.managing_director, \"Approved By\")}\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:center\">Operation's Dept</td>\r\n      <td style=\"text-align:center\">Engineer</td>\r\n      <td style=\"text-align:center\">Sr.Accountant</td>\r\n      <td style=\"text-align:center\">MD</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n<div class=\"goods-received\">\r\n  <strong>Details of goods Received</strong><br><br>\r\n  GRN No: _____________________ &nbsp;&nbsp;&nbsp;&nbsp;\r\n  GRN Date: _______________<br><br>\r\n  Quantity Received: __________ &nbsp;&nbsp;&nbsp;&nbsp;\r\n  Excess / Shortage: _________\r\n</div>\r\n</body>\r\n</html>\r\n`;\r\n\r\n  const iframeDoc = iframe.contentWindow.document;\r\n  iframeDoc.open();\r\n  iframeDoc.write(printContent);\r\n  iframeDoc.close();\r\n\r\n  iframe.onload = () => {\r\n    iframe.contentWindow.focus();\r\n    iframe.contentWindow.print();\r\n    setTimeout(() => {\r\n      document.body.removeChild(iframe);\r\n    }, 1000);\r\n  };\r\n};\r\n\r\n\r\nconst saveRemark = async () => {\r\n    showLpoRemark.value=false;\r\n    // showMessage(newremark.value);\r\n    if (!newremark.value.trim()) {\r\n        showError(\"Remark cannot be empty!\");\r\n        return;\r\n    }else if (showRemarkModal.value == false){\r\n            newremark.value = \"For lpo \" + lpo_id.value +\" \"+ newremark.value ;\r\n        }else{\r\n            lpo_number.value = 0;\r\n        }\r\n    \r\n    isSending.value = true;\r\n    \r\n    try {\r\n        const remarkData = {\r\n            remarker_id: user_id,\r\n            description : newremark.value,\r\n            status: status.value, // Default to unchecked\r\n            type_id: lpo_number.value ,\r\n            remark_type: \"LPO\",\r\n            remarker: JSON.parse(localStorage.getItem(\"user\")).name\r\n        };\r\n        \r\n         const response = await axiosInstance.post('remark', remarkData);\r\n        \r\n        if (response.status === 201 || response.status === 200) {\r\n            // Add the new remark to the list\r\n            if (response.data) {\r\n                remarks.value.push(response.data);\r\n            } else {\r\n                // If the API doesn't return the created remark, add our local version\r\n                remarks.value.push(remarkData);\r\n            }\r\n            \r\n            // Clear the input field\r\n            newremark.value = '';\r\n            showMessage(\"Remark added successfully\");\r\n            fetchNotifications();\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n        showError(error.message);\r\n    } finally {\r\n        isSending.value = false;\r\n    }\r\n};\r\n\r\n\r\nconst fetchRemarks = async () => {\r\n    isLoading.value=true;\r\n    try {\r\n        const response = await axiosInstance.get(`remark?remark_type=LPO`);\r\n        if (Array.isArray(response.data)) {\r\n            remarks.value = response.data;\r\n        } else if (response.data && Array.isArray(response.data.data)) {\r\n            remarks.value = response.data.data;\r\n        } else {\r\n            remarks.value = [];\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error fetching remarks:\", error);\r\n        showError(\"Failed to load remarks\");\r\n    } finally {\r\n        isLoading.value = false;\r\n    }\r\n};\r\n\r\n\r\n\r\n    const fetchNotifications = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`remark?remark_type=LPO`);\r\n        notifications.value = response.data.data.filter(item => item.status === \"unchecked\");\r\n        notification_count.value = response.data.unchecked_count ;\r\n    } catch (error) {\r\n        console.error('Error fetching amendment request:', error);\r\n        showError(\"Failed to load amendment request \" + (error.response?.data?.message || error.message));\r\n    } finally {\r\n        isfetching.value = false;\r\n    }\r\n}\r\n\r\n    const units = ref(['']);\r\n    const fetchUnits = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`units`);\r\n        units.value = response.data.filter(item => item.status === \"Active\");\r\n    } catch (error) {\r\n        showError(\"Failed to fetch units\");\r\n        console.error('Error fetching units:', error);\r\n    } finally {\r\n\r\n    }\r\n}\r\n\r\nconst openRemarkModal = () => {\r\n    fetchRemarks();\r\n    showRemarkModal.value = true;\r\n};\r\n\r\nconst closeRemarkModal = () => {\r\n    showRemarkModal.value = false;\r\n    newremark.value = ''; // Clear the remark input\r\n    remarks.value = []; // Reset the remarks list\r\n};\r\n\r\n\r\n    const handleVendorChange = (event) => {\r\n    if (event.target.value === 'NEW_VENDOR') {\r\n        addVendor();\r\n        vendor_id.value = ''; // Reset the selection\r\n    }\r\n}\r\n\r\n\r\n\r\n    const clearForm = ()=>{\r\n       supplier_name.value='';\r\n       project_name.value='';\r\n       payment_terms.value='';\r\n       supplier_address.value='';\r\n       supplier_location.value='';\r\n       vendor_id.value='';\r\n       Vendor_name.value = '';\r\n    Vendor_phone.value= '';\r\n    Vendor_email.value ='';\r\n    Vendor_address.value ='';\r\n    Vendor_location.value ='';\r\n    order_registration.value = false;\r\n    add_vendor.value = false\r\n    selected_company_id.value='';\r\n    };\r\n\r\n    const registerPurchaseOrder = async () => {\r\n         if (user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo')) {\r\n               company_id.value= selected_company_id.value.id;             \r\n            } else if (user_permissions.includes('can_view_copex_lpo')) {\r\n               company_id.value =6 ;\r\n            } else if (user_permissions.includes('can_view_bushman_lpo')) {\r\n                company_id.value = 5;\r\n            }\r\n    try {\r\n        order_registration.value = false;\r\n        loading_spinner.value = true;\r\n        \r\n        // First register vendor if needed\r\n        if (add_vendor.value === true) {\r\n            await registerVendor(); // Wait for vendor registration to complete\r\n        }\r\n\r\n        const purchaseOrderData = {\r\n            company_id: company_id.value,\r\n            vendor_id: vendor_id.value,\r\n            supplier: \"none\",\r\n            address: \"none\",\r\n            project_id: project_name.value.id,\r\n            project: 'empty',\r\n            payment_terms: payment_terms.value,\r\n            location: \"none\",\r\n            user_id: user_id,\r\n            requested_by: JSON.parse(localStorage.getItem(\"user\")).name,\r\n            status_name: 'Inactive',\r\n            status_color: 'dark',\r\n        };\r\n\r\n        const response = await axiosInstance.post('/purchase-order', purchaseOrderData);\r\n        clearForm();\r\n        getPurchaseOrders();\r\n        loading_spinner.value = false;\r\n        is_closed.value = true;\r\n        if (response.status === 201) {\r\n            showMessage(\"Purchase Order Registered Successfully\");\r\n        } else {\r\n            showError(\"Failed to register Purchase Order\"); \r\n            console.error(error);\r\n            \r\n        }\r\n       \r\n    } catch (error) {\r\n        showError(\"Error code \" + error.status);\r\n        console.error(\"Error registering Order:\", error);\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\nconst registerVendor = async () => {\r\n    try {\r\n        loading_spinner.value = true;\r\n        const VendorData = {\r\n            name: Vendor_name.value,\r\n            phone: Vendor_phone.value,\r\n            email: Vendor_email.value,\r\n            address: Vendor_address.value,\r\n            location: Vendor_location.value,\r\n        };\r\n\r\n        const response = await axiosInstance.post('/vendors', VendorData);\r\n        vendor_id.value = response.data.id;\r\n        loading_spinner.value = false;\r\n        return response.data.id; // Return the vendor ID\r\n    } catch (error) {\r\n        showError(\"Error registering Vendor\" + error.status);\r\n        loading_spinner.value = false;\r\n        throw error; // Re-throw the error to be caught in registerPurchaseOrder\r\n    }\r\n};\r\n\r\n    \r\n    const getVendors = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await    \r\n            axiosInstance.get(`/vendors`);\r\n            if (response.data && Array.isArray(response.data)) {\r\n                    vendors.value = response.data;\r\n                    loading_spinner.value = false;\r\n                  if (is_editor.value) {\r\n                    // If in edit mode, set the vendor_id to the first vendor's ID\r\n                    order_registration.value = false;           \r\n                  }\r\n                  else {\r\n                    order_registration.value = true; // Reset to false if not in edit mode\r\n                  }\r\n\r\n                } else {\r\n                    console.error(\"Invalid response format\");\r\n                }\r\n        } catch (error) {\r\n            console.error(\"Error fetching purchase order : \", error);\r\n        }\r\n    };\r\n    \r\n    const getPurchaseOrders = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`/purchase-order`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            order_status.value = response.data.status_name;\r\n            let filteredData = response.data;\r\n            if (user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData.filter(order =>  (order.status_name !== \"Inactive\" || order.user_id == user_id));\r\n            } else if (user_permissions.includes('can_view_copex_lpo')) {\r\n                filteredData = filteredData.filter(order => order.company_id == 6 && (order.status_name !== \"Inactive\" || order.user_id == user_id));\r\n            } else if (user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData.filter(order => order.company_id == 5 && (order.status_name !== \"Inactive\" || order.user_id == user_id));\r\n            }else if (user_permissions.includes('can_view_all_lpo')) {\r\n                filteredData = filteredData;\r\n            } else {\r\n                filteredData = [];\r\n            }\r\n            \r\n            items.value = filteredData.filter(order => \r\n                      ((selected_project.value ? order.project_id === selected_project.value : true) && (selected_status.value ? order.status_name === selected_status.value : true)) \r\n                 ).map((order, index) => ({\r\n                SNo: index + 1,\r\n                id:order.id,\r\n                LPO_number:`${String(order.id).padStart(4, '0')}/${\r\n                  order.date_created.slice(5, 7)  \r\n                  }/${\r\n                order.date_created.slice(2, 4)  \r\n                 }`,\r\n                company_id:order.company_id,\r\n                supplier: order.supplier,\r\n                address: order.address,\r\n                requested_by: order.requested_by,\r\n                date: order.date_created,\r\n                project: order.project_aka,\r\n                payment: order.payment_terms,\r\n                location: order.location,\r\n                requester:order.user_id,\r\n                awaits:order.awaits,\r\n                status: {\r\n                    key: order.status_name,\r\n                    class: order.status_color\r\n                },\r\n            }));\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n        showError(error.message);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\n    const projects = ref([]);\r\n    const getProjects = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`/projects`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            // Filter projects after receiving the response\r\n            let filteredData = response.data;\r\n            if (user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData;\r\n            } else if (user_permissions.includes('can_view_copex_lpo')) {\r\n                filteredData = filteredData.filter(project =>project.company_id == 6);\r\n            } else if (user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData.filter(project =>project.company_id == 5);\r\n            }\r\n             projects.value = filteredData;\r\n            loading_spinner.value = false;\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n            loading_spinner.value = false; // Also set to false in error case\r\n        }\r\n    } catch (error) {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n   //code for etint model\r\n   const Show_editing_modal = ref(false);\r\n    \r\n   const lpo_number = ref();\r\n   const openEditModal= (row) => {     \r\n        is_editor.value = true;\r\n        getVendors();\r\n        getProjects();\r\n        Show_editing_modal.value = true;\r\n        lpo_number.value = row.id;\r\n        // Populate the form fields with the selected row data\r\n        vendor_id.value = row.vendor_id;\r\n        supplier_name.value = row.supplier;\r\n        supplier_address.value = row.address;\r\n        supplier_location.value = row.location;\r\n        payment_terms.value = row.payment_terms;\r\n        project_name.value = row.project;\r\n        // Set the selected vendor ID if available\r\n        if (row.vendor_id) {\r\n            vendor_id.value = row.vendor_id;\r\n        } else {\r\n            vendor_id.value = ''; // Reset if no vendor ID is available\r\n        }\r\n     \r\n    }\r\n    const   closeEditModal = () => {\r\n        // Reset the form fields\r\n        vendor_id.value = '';\r\n        supplier_name.value = '';\r\n        supplier_address.value = '';\r\n        supplier_location.value = '';\r\n        payment_terms.value = '';\r\n        project_name.value = '';\r\n        // Reset the add_vendor flag\r\n        add_vendor.value = false;\r\n        // Reset the order_registration flag\r\n        order_registration.value = false;\r\n        // Reset the Show_editing_modal flag\r\n        lpo_number.value = '';\r\n        is_editor.value = false;\r\n        Show_editing_modal.value = false;\r\n    }\r\n\r\n    const updatePurchaseOrder = async () => {\r\n    try {\r\n        isSending.value = true; // Set the loading state to true    \r\n        // First register vendor if needed\r\n        if (add_vendor.value === true) {\r\n            await registerVendor(); // Wait for vendor registration to complete\r\n        }\r\n\r\n        const purchaseOrderData = {\r\n            vendor_id: vendor_id.value,\r\n            project_id: project_name.value.id,\r\n            payment_terms: payment_terms.value,\r\n        };\r\n\r\n        const response = await axiosInstance.patch(`/purchase-order/${lpo_number.value}`,purchaseOrderData);\r\n          if (response.status === 200) {\r\n            clearForm();\r\n            isSending.value = false; // Reset the loading state\r\n            Show_editing_modal.value = false; // Close the modal\r\n            is_editor.value = false; // Reset the edit mode flag\r\n            order_registration.value = false; // Reset the order registration flag\r\n            add_vendor.value = false; // Reset the add vendor flag\r\n           getPurchaseOrders();       \r\n          showMessage(\"Order Updated Successfully\");\r\n        } else {\r\n            showError(\"Error code \" + response.status);\r\n        }      \r\n       \r\n       \r\n    } catch (error) {\r\n        showError(\"Error code \" + error.status);\r\n        console.error(\"Error rUpdated Order:\", error);\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n        \r\n\r\n  const is_operator = ref(false);\r\n  const is_project_manager = ref(false);\r\n  const is_md= ref(false);\r\n  const is_sa= ref(false);\r\n  const is_engineer = ref(false);\r\n  const is_copex = ref(false);\r\n  const is_bushman = ref(false);\r\n  const total_amount = ref(0);\r\n   const lpo_items = ref([]);\r\n   const item_columns = ref(['SNo','description','type', 'units', 'quantity', 'rate', 'amount',]);\r\n   const showlpoModal = ref(false); \r\n   const loading=  ref(false);\r\n   const isActive= ref(false);\r\n   //const lpo_number = ref('');\r\n   \r\n   const approval_status_data = ref({});\r\n \r\n   const item_list_category = ref([]);\r\n    //table 3\r\n    const isFuel = ref(false);\r\n    const is_bulk = ref(false);\r\n    const is_items = ref(false);\r\n    \r\n  \r\n    const item_list_id = ref('');\r\n    const item_category = ref('')\r\n\r\n    const direct_description = ref('');\r\n    const description = ref('');\r\n    const description_of_lpo = ref('');\r\n    const machines = ref([]);\r\n    const unit = ref('');\r\n    const task = ref('');\r\n    const machine_field = ref(false);\r\n    const quantity = ref('');\r\n    const rate = ref('');\r\n    const items_list = ref([]);\r\n    const isOpen = ref('');\r\n    const amount = ref(0);\r\n    const approval_status = ref(false);\r\n    const spinner = ref(false);\r\n    watch([quantity, rate], () => {\r\n        amount.value = quantity.value * rate.value;\r\n    });\r\n\r\n   const lpo_id = ref(''); \r\n   const openLpoModal= (row) => {\r\n        lpo_number.value = row.id;\r\n        project_name.value = row.project;\r\n        lpo_id.value = row.LPO_number;\r\n        if (row.status.key === \"Inactive\") {\r\n            if (!item_columns.value.includes('actions')) {\r\n                item_columns.value.push('actions');\r\n            }\r\n        \r\n        \r\n           is_closed.value= true; \r\n           isActive.value= false;\r\n           getItemListCategory();\r\n           getItems();\r\n        }\r\n        else{\r\n            if (item_columns.value.includes('actions')) {\r\n                item_columns.value.pop('actions');\r\n            }\r\n        getItems();\r\n        getApprovalStatus();\r\n        isActive.value= true;\r\n        approval_status.value = true;\r\n     \r\n        if(row.company_id == 5){\r\n            is_bushman.value= true;\r\n            is_copex.value = false;\r\n        }\r\n        if(row.company_id == 6){\r\n            is_bushman.value= false;\r\n            is_copex.value = true;\r\n        }\r\n     \r\n        }\r\n             showlpoModal.value = true;\r\n         setTimeout(() => {\r\n                if (showlpoModal.value) {\r\n                    closeLpoModal();\r\n                }\r\n        }, 120000); // 2 minutes\r\n         }\r\n    const   closeLpoModal = () => {\r\n      lpo_number.value = \"\";\r\n      project_name.value = \"\"; // Clear the project name\r\n      lpo_items.value = [];\r\n      total_amount.value = 0 // Clear the items list\r\n      showlpoModal.value = false;\r\n      isOpen.value= false;\r\n      clearItemForm();\r\n      }\r\n     \r\n      \r\n    const getItemsList = async (id) => {\r\n        try {\r\n           \r\n            const response = await axiosInstance.get(`/item-list`);\r\n            if (response.data && Array.isArray(response.data)) {\r\n                 const filterdata = response.data.filter((item) => item.category_id == id);\r\n                items_list.value = filterdata.map((data) => ({\r\n                    id: data.id,\r\n                    name: data.name,\r\n                    unit_measure: data.unit_measure,\r\n              }));\r\n\r\n\r\n            } else {\r\n                console.error(\"Invalid response format\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching approval status: \", error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    const approveCheck = async (id, role) => {\r\n        try {\r\n            const response = await axiosInstance.put(`/approval-check/${id}`, {\r\n                [role]: 1\r\n            });\r\n            getApprovalStatus();\r\n            getPurchaseOrders();\r\n        } catch (error) {\r\n            console.error(\"Error approving check:\", error.message);\r\n        }\r\n    };\r\n\r\n    const approveUnCheck = async (id, role) => {\r\n        try {\r\n            const response = await axiosInstance.put(`/approval-check/${id}`, {\r\n                [role]: 0\r\n            });\r\n            getApprovalStatus();\r\n        } catch (error) {\r\n            console.error(\"Error approving check:\", error.message);\r\n        }\r\n\r\n        const response = await axiosInstance.put(`/purchase-order/${id}`, {\r\n                status_name: \"Unapproved\",\r\n                status_color:\"secondary\",\r\n            });\r\n    };\r\n    \r\n    \r\n    const activatePurchaseOrder = () => {\r\n        loading_spinner.value = true;\r\n        const activationData = {\r\n            status_name: 'Unapproved',\r\n            status_color: 'secondary',\r\n        };\r\n        \r\n        if (confirm(\"Are you sure you want to Confirm this Order?\")) {\r\n            axiosInstance\r\n                .put(`/purchase-order/${lpo_number.value}`, activationData)\r\n                .then((response) => {       \r\n                    loading_spinner.value = false;            \r\n                if (response.status == 200) {\r\n                   getPurchaseOrders();\r\n                   closeLpoModal();\r\n                    showMessage(\" Activation Successfuly! Now Waiting for Approvals\");\r\n                }\r\n                else{\r\n                    showError(\"activation Fails\");\r\n                }\r\n                })\r\n \r\n                \r\n                .catch((error) => {\r\n                    console.error(\"Error activating order:\", error.message);\r\n                    loading_spinner.value = false;\r\n                });\r\n\r\n                \r\n        } else {\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\nconst handleDescriptionChange = () => {\r\n       const item_number = item_category.value.id;\r\n   \r\n\r\n        if (item_number == 1) {\r\n              getItemsList(1);\r\n              is_items.value = true;\r\n              isFuel.value = true;  \r\n             \r\n                 if (description_of_lpo.value === 'Direct') {\r\n              fetchMachines();                \r\n              machine_field.value = true;\r\n              is_items.value = true;\r\n              }\r\n                 else{\r\n                machine_field.value = false;\r\n              }\r\n                     \r\n            }\r\n         if(item_number == 2) {\r\n             getItemsList(2);\r\n             is_items.value = true;\r\n             machine_field.value = false;\r\n             isFuel.value = false;\r\n             description_of_lpo.value = \"\"       \r\n            }\r\n        if(item_number == 3) {\r\n            getItemsList(3);\r\n            is_items.value = true;\r\n            machine_field.value = false;\r\n            isFuel.value = false;\r\n            description_of_lpo.value = \"\"       \r\n        }\r\n      \r\n\r\n             \r\n\r\n      \r\n    }\r\n\r\n   //fetching machine list\r\n   const  fetchMachines= async () => {\r\n   // loading_spinner = true;\r\n    axiosInstance\r\n      .get(`/machines`)\r\n      .then((response) => {\r\n        if (Array.isArray(response.data)) {\r\n          machines.value = response.data.map(machine => ({\r\n            id: machine.id,\r\n            name: machine.name,\r\n            type: machine.type_name,          \r\n          }));\r\n        } else {\r\n        error_message.value = \"Error fetching machine data: \" + error.message;\r\n        console.error(error_message.value);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching machine data:\", error.message);\r\n        \r\n      }\r\n      \r\n    )\r\n     \r\n      .finally(() => {\r\n      //  loading_spinner = false;\r\n      });\r\n}\r\n\r\n\r\n    const getItemListCategory= () => {\r\n        axiosInstance\r\n            .get('/item-list-category')\r\n            .then((response) => {\r\n                if (Array.isArray(response.data)) {\r\n                    item_list_category.value = response.data.map((item) => ({\r\n                        id: item.id,\r\n                        name: item.name,\r\n                    }));\r\n                } else {\r\n                    console.error(\"Invalid response format\");\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error fetching item list category:\", error.message);\r\n            });\r\n    };\r\n    const machine_id = ref('0');\r\n    const registerItem = () => {\r\n        isSending.value=true;\r\n        loading_spinner.value = true;\r\n   \r\n      \r\n        if (description_of_lpo.value === 'Bulk') {\r\n            item_category.value = description_of_lpo.value; \r\n            description.value = description.value.name;           \r\n        }\r\n        else if (description_of_lpo.value === 'Direct') {\r\n            machine_id.value = direct_description.value.id;\r\n            item_category.value = description_of_lpo.value; \r\n            description.value =   direct_description.value.name+\"(\" +task.value+\")\";           \r\n         }\r\n        else {\r\n            description.value = description.value.name;\r\n            item_category.value = item_category.value.name;\r\n            item_list_id.value = description.value.id;  \r\n        }\r\n                  \r\n                const itemData = {\r\n            order_id: lpo_number.value,\r\n            description: description.value,\r\n            unit_measure:unit.value.name,\r\n            quantity:quantity.value,\r\n            machine_id: machine_id.value,\r\n            rate:rate.value,\r\n            item_list_id: item_list_id.value,\r\n            category : item_category.value,\r\n        };\r\n        axiosInstance\r\n            .post('/items', itemData)\r\n            .then((response) => {\r\n                getItems();\r\n                isSending.value= false;\r\n                loading_spinner.value = false;\r\n                if (response.status === 201) {\r\n                    clearItemForm();\r\n                   showMessage('Item registered successfully');\r\n                } else {\r\n                    showError('Error registering item');\r\n                    console.error(\"Error registering Item:\", response.data);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                console.error(\"Error registering Order:\", error);\r\n            });\r\n    };\r\n\r\n    const deleteItem = (id) => {\r\n        loading_spinner.value = true;\r\n   if (confirm(\"Are you sure you want to delete this item?\")) {\r\n                  axiosInstance\r\n            .delete(`/items/${id}`)\r\n            .then((response) => {\r\n                getItems();\r\n                loading_spinner.value = false;\r\n                if (response.status === 200) {\r\n                   showMessage('Item Deleted successfully');\r\n                } else {\r\n                    showError('Fail to Delete item');\r\n                    console.error(\"Error deleting item :\", response.data.message);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n               showError(\"Error registering Order:\", error.message);\r\n               console.error(error);\r\n            });  \r\n    \r\n   }\r\n    };\r\n \r\n    const clearItemForm = () => {\r\n        isSending.value = false;\r\n        description.value = '';\r\n        unit.value = '';\r\n        quantity.value = '';\r\n        rate.value = '';\r\n        item_list_id.value = '';\r\n        machine_id.value = '0';\r\n        item_category.value = '';\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n// lpo modal ends\r\n\r\n\r\nconst deleteLpo = (id) => {\r\n    if (confirm(\"Are you sure you want to delete this item?\")) {\r\n        loading_spinner.value = true;\r\n            axiosInstance\r\n            .delete(`/purchase-order/${id}`)\r\n            .then((response) => {\r\n                getPurchaseOrders();\r\n                loading_spinner.value = false;\r\n                if (response.status === 200) {\r\n                   showMessage('Local Purchase order Deleted successfully');\r\n                } else {\r\n                    showError('Fail to Delete order');\r\n                    console.error(\"Error delete Order:\", response.data.message);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error deletion Order:\", error.message);\r\n            });  \r\n    \r\n   }\r\n   else{\r\n    return;\r\n   }\r\n    };\r\n\r\n    onMounted(() => {\r\n        fetchUnits();\r\n        getPurchaseOrders();\r\n        getProjects();\r\n        fetchNotifications();\r\n\r\n        watch(order_status, (newValue) => {\r\n           \r\n           if  (newValue === 'Inactive') {\r\n               isActive.value= false\r\n               \r\n                  }\r\n           else{\r\n            isActive.value= true;\r\n           }\r\n       });\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    const user=ref(null);\r\n    if (storedUser) {\r\n       user.value = JSON.parse(storedUser);\r\n       \r\n       if(user.value.role == 2){\r\n         is_md.value=true;\r\n       }\r\n       if(user.value.role == 3){\r\n         is_fc.value=true;\r\n       }\r\n       if(user.value.role == 4){\r\n        is_sa.value=true;\r\n       }\r\n       if(user.value.role == 5){\r\n        is_qs.value=true;\r\n       }\r\n       if(user.value.role == 10){\r\n        is_project_manager.value=true;\r\n       }\r\n       if(user.value.role == 7){\r\n        is_operator.value=true;\r\n       }\r\n       if(user.value.role == 6 ){\r\n        is_engineer.value=true;\r\n       }\r\n       if(user.value.role == 8){\r\n         is_dataentry.value=true;\r\n             } \r\n       \r\n        \r\n          \r\n }\r\n\r\n\r\n\r\n    });\r\n\r\n     document.addEventListener('click', function (event) {\r\n    const collapse = document.getElementById('collapseWidthExample');\r\n    const bell = document.getElementById('ddlnotify');\r\n\r\n    // Check if click is outside the collapse and the bell button\r\n    if (\r\n      collapse.classList.contains('show') &&\r\n      !collapse.contains(event.target) &&\r\n      !bell.contains(event.target)\r\n    ) {\r\n      const bsCollapse = bootstrap.Collapse.getInstance(collapse);\r\n      if (bsCollapse) {\r\n        bsCollapse.hide();\r\n      }\r\n    }\r\n  });\r\n</script>","import script from \"./preview.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./preview.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./preview.vue?vue&type=style&index=0&id=86fa1b30&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","readRemark","async","remarkStatus","JSON","parse","localStorage","getItem","name","axiosInstance","put","id","showMessage","fetchNotifications","error","showError","message","console","showRemarkModal","ref","inject","printLpoReport","whatsappNotification","whatsappNotification2","add_vendor","order_registration","columns","items","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","searchable","isfetching","showLpoRemark","notification_count","notifications","selected_project","user_permissions","permissions","company_id","selected_company_id","selected_status","loading_spinner","supplier_name","supplier_address","supplier_location","payment_terms","project_name","vendor_id","is_admin","vendors","isSending","is_editor","Vendor_name","Vendor_phone","Vendor_email","Vendor_address","Vendor_location","is_closed","order_status","user_role","role","user_id","print_url","process","axios","baseURL","newremark","VUE_APP_API_BASE_URL2","remarks","isLoading","getItems","loading","value","response","get","lpo_number","data","Array","isArray","total_amount","reduce","sum","order","quantity","rate","isOpen","length","lpo_items","map","index","SNo","category","description","type","machine","units","unit_measure","toLocaleString","Number","amount","undefined","maximumFractionDigits","getApprovalStatus","approval_status_data","spinner","saveRemark","trim","lpo_id","remarkData","remarker_id","status","type_id","remark_type","remarker","post","push","log","fetchRemarks","item","unchecked_count","fetchUnits","openRemarkModal","closeRemarkModal","handleVendorChange","event","target","addVendor","clearForm","registerPurchaseOrder","includes","registerVendor","purchaseOrderData","supplier","address","project_id","project","location","requested_by","status_name","status_color","getPurchaseOrders","VendorData","phone","email","getVendors","filteredData","LPO_number","String","padStart","date_created","slice","date","project_aka","payment","requester","awaits","key","class","projects","getProjects","Show_editing_modal","openEditModal","row","closeEditModal","updatePurchaseOrder","patch","is_operator","is_project_manager","is_md","is_sa","is_engineer","is_copex","is_bushman","item_columns","showlpoModal","isActive","item_list_category","isFuel","is_items","item_list_id","item_category","direct_description","description_of_lpo","machines","unit","task","machine_field","items_list","approval_status","watch","openLpoModal","getItemListCategory","pop","setTimeout","closeLpoModal","clearItemForm","getItemsList","filterdata","category_id","approveCheck","approveUnCheck","activatePurchaseOrder","activationData","confirm","then","catch","handleDescriptionChange","item_number","fetchMachines","type_name","error_message","finally","machine_id","registerItem","itemData","order_id","deleteItem","delete","deleteLpo","onMounted","newValue","storedUser","user","is_fc","is_qs","is_dataentry","document","addEventListener","collapse","getElementById","bell","classList","contains","bsCollapse","bootstrap","Collapse","getInstance","hide","__exports__"],"sourceRoot":""}