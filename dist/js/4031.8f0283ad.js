"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[4031],{84031:function(a,e,t){t.r(e),t.d(e,{default:function(){return Y}});var s=t(66252),l=t(2262),n=t(3577),o=t(87066),i=t(56296);t(26212);const c={class:"layout-px-spacing"},r=(0,s.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">HR</a></li><li class="breadcrumb-item active" aria-current="page"><span>Leave</span></li><li class="breadcrumb-item active" aria-current="page"><span>Balance</span></li></ol></nav></div></li></ul><h3 class="text-center">LEAVE BALANCE</h3>',2),d={class:"d-flex me-4 mt-2"},u={class:"ms-auto"},v=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,s._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),m=[v],b=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,s._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),p=[b],_={class:"row layout-top-spacing"},h={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},w={class:"panel p-0"},g={class:"custom-table table3"},y=["onClick"],k=(0,s._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"},null,-1),f=(0,s._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"},null,-1),C=[k,f],x={class:"modal fade mymodal",id:"view-leaves",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"false"},M={class:"modal-dialog modal-xl",role:"document"},H={class:"modal-content"},z={class:"modal-header"},E={class:"modal-title",id:"exampleModalLabel"},S=(0,s._)("button",{type:"button","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close",class:"btn-close",id:"close-modal"},null,-1),q={class:"modal-body"},A={class:"row layout-top-spacing"},D={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},L={class:"panel p-0"},R={class:"custom-table table3"},B={class:"table table-bordered table-striped"},V=(0,s._)("thead",null,[(0,s._)("tr",{class:"text-dark"},[(0,s._)("th",null,"Total Requests"),(0,s._)("th",null,"Approved Leaves"),(0,s._)("th",null,"Leave Balance"),(0,s._)("th",null,"Estimated Encashment"),(0,s._)("th",null,"Actions")])],-1),U={key:0,colspan:"5"},I=["onClick"],T=(0,s._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"},null,-1),N=(0,s._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"},null,-1),O=[T,N],P=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn bg-danger text-white","data-dismiss":"modal","data-bs-dismiss":"modal"},[(0,s._)("i",{class:"flaticon-cancel-12"}),(0,s.Uk)("CLOSE")])],-1);var j={setup(a){(0,i.j)({title:"Custom Table"});const e=o.Z.create({baseURL:"https://bushman.ink/api/v1/"}),t=(0,s.f3)("printEmployees"),v=(0,s.f3)("showMessage"),b=(0,s.f3)("showError"),k=(0,s.f3)("formatNumber"),f=((0,s.f3)("showConfirmation"),(0,l.iH)(""),(0,l.iH)(["Sno","name","requests","approved_leaves","leave_balance","estimate_encashment","actions"])),T=(0,l.iH)(["Sno","start_date","end_date","leave_days","status","remark","actions"]),N=(0,l.iH)([]),j=(0,l.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),W=(0,l.iH)(!1),Y=(0,l.iH)(""),J=(0,l.iH)([]),Q=a=>{Y.value=a,J.value=a.leaves.map(((a,e)=>{const t=new Date(a.start_date),s=new Date(a.end_date),l=Math.ceil((s-t)/864e5)+1;return{...a,Sno:e+1,leave_days:l}}))},Z=(0,l.iH)([]),F=async()=>{const a=await e.get("employees");Z.value=a.data.map(((a,e)=>{const t=(a.leaves??[]).filter((a=>3===a.status_id)).reduce(((a,e)=>{if(!e.start_date||!e.end_date)return a;const t=new Date(e.start_date),s=new Date(e.end_date),l=Math.ceil((s-t)/864e5)+1;return a+l}),0);return{...a,Sno:e+1,requests:a.leaves?.length??0,total_leaves:0,approved_leaves:t+" days",leave_balance:28-t,encashment:a.salary*(28-t)/28,estimate_encashment:k(a.salary*(28-t)/28)}}))},G=async()=>{const a={employee_id:Y.value.id,issuer_id:JSON.parse(localStorage.getItem("user")).id,amount:Y.value.encashment};try{await e.post("leave-encashments",a),document.getElementById("close-modal").click(),v("Encashment Requested"),F()}catch(t){b(t.message),console.log(t)}};return(0,s.bv)((()=>{F()})),(a,e)=>{const o=(0,s.up)("v-client-table");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",c,[r,(0,s._)("div",d,[(0,s._)("div",u,[(0,s._)("button",{class:"btn btn-primary me-2",onClick:e[0]||(e[0]=a=>W.value=!W.value)},m),(0,s._)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=a=>(0,l.SU)(t)(N.value))},p)])]),(0,s._)("div",_,[(0,s._)("div",h,[(0,s._)("div",w,[(0,s._)("div",g,[(0,s.Wm)(o,{data:Z.value,columns:f.value,options:j.value},{status:(0,s.w5)((a=>[(0,s._)("span",{class:(0,n.C_)(["badge inv-status","badge-"+a.row.status.color])},(0,n.zw)(a.row.status.name),3)])),actions:(0,s.w5)((a=>[((0,s.wg)(),(0,s.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-eye text-primary",viewBox:"0 0 16 16","data-bs-toggle":"modal","data-bs-target":"#view-leaves",onClick:e=>Q(a.row)},C,8,y))])),_:1},8,["data","columns","options"])])])])])]),(0,s._)("div",x,[(0,s._)("div",M,[(0,s._)("div",H,[(0,s._)("div",z,[(0,s._)("h5",E,(0,n.zw)(Y.value?.name?.toUpperCase())+" LEAVE REQUEST HISTORY",1),S]),(0,s._)("div",q,[(0,s._)("div",A,[(0,s._)("div",D,[(0,s._)("div",L,[(0,s._)("div",R,[(0,s._)("table",B,[V,(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",null,(0,n.zw)(Y.value.requests),1),(0,s._)("td",null,(0,n.zw)(Y.value.approved_leaves),1),(0,s._)("td",null,(0,n.zw)(Y.value.leave_balance),1),(0,s._)("td",null,(0,n.zw)(Y.value.estimate_encashment),1),(0,s._)("td",null,[0==Y.value.encashment_count?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary",onClick:e[2]||(e[2]=a=>G())}," Request Encashment")):(0,s.kq)("",!0)])]),(0,s._)("tr",null,[Y.value?.remark?((0,s.wg)(),(0,s.iD)("td",U,"Remark : "+(0,n.zw)(Y.value?.remark),1)):(0,s.kq)("",!0)])])]),(0,s.Wm)(o,{data:J.value,columns:T.value,options:j.value},{status:(0,s.w5)((a=>[a.row.status?((0,s.wg)(),(0,s.iD)("span",{key:0,class:(0,n.C_)(["badge inv-status","badge-"+a.row.status.color])},(0,n.zw)(a.row.status.name),3)):(0,s.kq)("",!0)])),actions:(0,s.w5)((a=>[a.row.attachment?((0,s.wg)(),(0,s.iD)("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-eye text-primary",viewBox:"0 0 16 16","data-bs-toggle":"modal","data-bs-target":"#view-leaves",onClick:e=>Y.value=a.row},O,8,I)):(0,s.kq)("",!0)])),_:1},8,["data","columns","options"])])])])])]),P])])])],64)}}};const W=j;var Y=W}}]);
//# sourceMappingURL=4031.8f0283ad.js.map