"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[6171],{16171:function(t,e,n){n.r(e),n.d(e,{default:function(){return $t}});n(26699);var i=n(66252),a=n(3577),s=n(2262),r=n(49963),l=n(87066),o=n(56296),d=(n(47186),n(80599),n(42119));n(84730),n(18159),n(69218);const c={class:"layout-px-spacing"},p={class:"navbar-nav flex-row mt-2"},u={class:"page-header"},m={class:"breadcrumb-one","aria-label":"breadcrumb"},g={class:"breadcrumb"},v={class:"breadcrumb-item"},h={href:"javascript:;"},b={class:"breadcrumb-item active","aria-current":"page"},x={class:"d-flex"},y={class:"ms-auto"},_={class:"btn-group"},w=(0,i.Uk)("Requisitions"),f=(0,i.Uk)("Good Received Notes"),k={class:"text-center my-3"},q={class:"row"},$={class:"custom-table table3 table-responsive"},C={class:"table table-bordered table-striped"},D=(0,i._)("th",null,"LPO No.",-1),S=(0,i.Uk)(" Req No. "),R=(0,i._)("th",null,"Requester",-1),N=(0,i._)("th",null,"Date Requested",-1),H=(0,i._)("th",null,"Purpose",-1),A=(0,i._)("th",null,"Approval Chain",-1),O={key:0},T={key:1},L={key:0},z={key:1},E=(0,i._)("th",null,"Awaits",-1),P=(0,i._)("th",null,"Cost",-1),j=(0,i._)("th",null,"Status",-1),U={key:2},V=["onClick"],I={key:0},M={key:1},B=["onClick"],Y=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,i._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),W=[Y],J={key:0},F={colspan:"8",class:"text-start"},K=(0,i._)("b",null," Brief Description : ",-1),Q={key:1},X={colspan:"8",class:"text-start"},G=(0,i._)("b",null," Remark : ",-1),Z={key:0,class:"d-flex justify-content-center mb-2"},tt={class:"btn-group"},et=["onClick"],nt=["onClick"],it=["onClick"],at={key:1,class:"mb-2 text-center"},st={key:2,class:"input-group"},rt=["placeholder","onUpdate:modelValue","onKeyup"],lt=["onClick","disabled"],ot=["innerHTML"],dt={key:1},ct={class:"custom-table table3 table-responsive"},pt={class:"table"},ut=(0,i._)("br",null,null,-1),mt=(0,i._)("br",null,null,-1),gt={key:0,class:"text-dark"},vt=(0,i.Uk)(),ht=(0,i._)("br",null,null,-1),bt={key:1,class:"text-dark"},xt={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},yt={class:"panel p-0"},_t={class:"custom-table table3"},wt=(0,i._)("button",{class:"btn btn-primary"},"Diesel",-1),ft=["innerHTML"];var kt={setup(t){(0,o.j)({title:"Approval Chains"});const e=(0,d.yj)(),n=l.Z.create({baseURL:"https://bushman.ink/api/v1/"}),Y=(0,s.iH)({}),kt=(0,s.iH)({});function qt(t,e){Y.value[t]=e}const $t=JSON.parse(localStorage.getItem("user")).permissions,Ct=(0,s.iH)(!1),Dt=(JSON.parse(localStorage.getItem("user")).id,(0,s.iH)(0)),St=(0,s.iH)(JSON.parse(localStorage.getItem("user")).role),Rt=((0,s.iH)(["Sno","requisition","approval","purpose","type","requester","project","vendor","cost","status","date","awaits","actions"]),(0,s.iH)(["Sno","item","description","quantity","rate","total","actions"])),Nt=(0,s.iH)([]),Ht=((0,s.iH)([]),(0,s.iH)({perPage:50,perPageValues:[50,100,200],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1,headings:{vendor:function(){return At.value?"Beneficiary":"Vendor"}}})),At=(0,i.Fl)((()=>"4"==e.params.group_id||"8"==e.params.group_id)),Ot=(0,i.f3)("showMessage"),Tt=(0,i.f3)("showError"),Lt=(0,i.f3)("formatNumber"),zt=(0,i.f3)("tableShimmer"),Et=(0,i.f3)("formatDate"),Pt=(0,i.f3)("loadingSpinner"),jt=((0,s.iH)([]),(0,s.iH)({}),(0,s.iH)("")),Ut=(0,s.iH)(""),Vt=(0,s.iH)(""),It=(0,s.iH)(!1),Mt=(0,s.iH)(null);let Bt=null;const Yt=async()=>{Ct.value=!0;try{let t="approval-lists";"all"!==e.params.group_id&&(t+=`?group_id=${e.params.group_id}`);const i=await n.get(t);Nt.value=i.data.map(((t,e)=>{let n=t.status;4==t.last_checked_in?.status?.id&&(n={name:t.last_checked_in.status.name,color:t.last_checked_in.status.color});let i=t.awaiting_approval?.name||"no one";4==t.last_checked_in?.status?.id&&(i="no one");let a=t.awaiting_approval?.role_id||null;return 4==t.last_checked_in?.status?.id&&(a=null),{...t,status:{key:n.name,class:n.color},Sno:e+1,latest_status_date:t.last_checked_in?.approved_at||t.last_checked_in?.remarked_at||t.last_checked_in?.rejected_at||t.date,purpose:t.approval_group||"N/A",type:t.requisition_type||"N/A",approval:"0"+t.id,requisition:t?.requisition_id??"",requester:t.requester?.name||"Unknown",requester_id:t.requester?.id||null,awaits:i,awaiter_role_id:a,vendor:t.vendor?.name||t.beneficiary||"N/A",vendor_data:t.vendor||null,date:Et(t.date),created_at:t.date,last_checked:Et(t.last_checked_in?.approved_at),cost:t.items?Lt(t.items.reduce(((t,e)=>t+(e.requisition_items?.quantity||0)*(e.requisition_items?.rate||0)),0)):0,approved_at:t.last_checked_in?.approved_at?new Date(t.last_checked_in.approved_at).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):null}})),Nt.value.sort(((t,e)=>{const n=Number(St.value),i=t.awaiter_role_id===n,a=e.awaiter_role_id===n;return i&&!a?-1:!i&&a?1:0})),Nt.value.sort(((t,e)=>{const n=new Date(t.latest_status_date),i=new Date(e.latest_status_date);return i-n}))}catch(t){Tt(t.message),console.error(t)}finally{Ct.value=!1}};(0,i.YP)((()=>e.params.group_id),((t,e)=>{t!==e&&(ne(),Yt())}));const Wt=(0,s.iH)(""),Jt=(0,s.iH)(0),Ft=(0,s.iH)(""),Kt=((0,s.iH)(""),(0,s.iH)("")),Qt=(0,s.iH)(""),Xt=async()=>{const t={subcontractor_agreement_id:Kt.value.subcontractor_agreement_id,approval_group_id:e.params.group_id,status_id:Vt.value,approval_item_id:Ut.value,role_id:St.value,remark:Qt.value,last_role:Wt.value,requisition_type:Jt.value.requisition_type,project:Jt.value,requisition_items:Jt.value.items.map((t=>({source_id:t.requisition_items.item_id,cost:t.requisition_items.quantity*t.requisition_items.rate,description:t.requisition_items.description,remark:"From LPO NO : "+Ut.value+" created on date "+Ft.value,remarker_id:JSON.parse(localStorage.getItem("user")).id,remarker:JSON.parse(localStorage.getItem("user")).name})))};await n.post("approval-chains",t),jt.value="",Qt.value="",Yt(),Ot("data saved successfully")},Gt=async t=>{try{Ct.value=!0,Ut.value=t.id,Jt.value=t,Vt.value=Y.value[t.id],Qt.value=kt.value[t.id],Wt.value=t.roles_sequence?.length>0?t.roles_sequence[t.roles_sequence.length-1].role_id:null,await Xt(),Ot("data saved successfully"),Y.value[t.id]="",kt.value[t.id]=""}catch(e){Tt(e.message),console.error(e)}finally{Ct.value=!1}},Zt=async(t,e)=>{Dt.value=t.items.reduce(((t,e)=>t+e.requisition_items?.quantity*e.requisition_items?.rate),0);try{const n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n);new Date;const i=new Date(t.created_at),a=`${i.getDate().toString().padStart(2,"0")}/${(i.getMonth()+1).toString().padStart(2,"0")}`,s=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Print Voucher</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\n  .logo { width: 160px; height: auto; }\n  .voucher-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; }\n  .company-title h2 { margin: 5px 0; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; font-weight: normal; }\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n  .title { text-align: center; font-weight: bold;  margin: 20px 0 10px 0; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; border-radius: 4px; overflow: hidden; }\n  table.details td, table.items th, table.items td, .signatures th, .signatures td { border: 0.5px solid #000; padding: 6px; font-weight: normal; }\n  table.items thead tr th { background-color: #f8f8f8; border-bottom: 1px solid #000; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  .text-success { color: green; }\n .signature-area { margin-top: 30px; }\n  .signature-line { border-top: 1px solid #000; width: 200px; display: inline-block; margin-top: 50px; }\n  .text-danger { color: red; }\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n<div class="header">\n  <img src="https://bushman.ink/copex.jpg" class="logo" />\n  <div class="voucher-box">\n    ${t.type.toLowerCase().includes("voucher")?"Voucher":"LPO"} NO:<br>\n    <span style="color:red;">${("0000"+t.requisition).slice(-4)}/${a}</span>\n  </div>\n</div>\n<div class="reg-info">\n  TIN: 135-489-247<br>\n  VRN: 40-032826C\n</div>\n<div class="company-title">\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\n</div>\n<div class="section-title"> ${t?.purpose?.toUpperCase()} DETAILS</div>\n\n<div class="title">PROJECT :  ${t?.project?.toUpperCase()??"NO PROJECT"}</div>\n\n${t.purpose.toLowerCase().includes("voucher")?"":`\n\n\n<p><strong>Vendor Details </strong></p>\n<table class="items">\n  <thead>\n    <tr>\n      <th>Vendor Name</th>\n      <th>Location</th>\n      <th>Email</th>\n      <th>Phone</th>\n      <th>Address</th>\n    </tr>\n  </thead>\n  <tbody>\n\n    <tr>\n      <td>${e?.name||"&nbsp;"}</td>\n      <td>${e?.location||" "}</td>\n      <td class="text-right">${e?.email||" "}</td>\n      <td class="text-right">${e?.phone||" "}</td>\n      <td class="text-right">${e?.address||" "}</td>\n    </tr>\n\n  </tbody>\n</table>\n    `}\n\n<p><strong>Please provide the following as per requisition details below</strong></p>\n<table class="items">\n  <thead>\n    <tr>\n      <th>SN</th>\n      <th>Item</th>\n      <th>Description</th>\n      <th>Quantity</th>\n      <th>Rate</th>\n      <th>Total</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${t.items.map(((t,e)=>`\n    <tr>\n      <td>${e+1}</td>\n      <td>${t.requisition_items?.remark||"N/A"}</td>\n      <td>${t.requisition_items?.description||"N/A"}</td>\n      <td class="text-right">${t.requisition_items?.quantity||"0"}</td>\n      <td class="text-right">${Number(t.requisition_items?.rate||0).toLocaleString()}/=</td>\n      <td class="text-right">${(t.requisition_items?.quantity*t.requisition_items?.rate||0).toLocaleString()}/=</td>\n    </tr>\n\n    `)).join("")}\n ${t.description?`\n  <tr>\n    <td colspan="6" style="text-align:start;">\n      Brief Description : ${t.description??""}\n    </td>\n  </tr>\n`:""}\n\n    <tr>\n     <td colspan="6" style="text-align:right;"><strong>TOTAL</strong>  <strong>${Dt.value.toLocaleString()}/=</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n<div class="section-title">APPROVAL CHAIN</div>\n<table class="signatures" style="margin-top: 20px;">\n  <thead>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <th>${t.name||"N/A"}</td>\n            `)).join("")}\n    </tr>\n\n  </thead>\n  <tbody>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <td class="text-center ${3==t?.status?.id?"text-success":"text-danger"}">${t?.status?.name??"Pending"}</td>\n       `)).join("")}\n      </tr>\n  </tbody>\n</table>\n\n\n\n${t.purpose.toLowerCase().includes("voucher")?`\n<div class="signature-area" style="display: flex; justify-content: space-between; margin-top: 20px;">\n  <div style="text-align: center;">\n    \n<div style="text-align: center; margin-top: 30px;">\n  \x3c!-- Beneficiary name above the line --\x3e\n  <div style="margin-bottom: 5px;">\n    <strong>${t.beneficiary||"&nbsp;"}</strong>\n  </div>\n\n  \x3c!-- The signature line --\x3e\n  <div style="border-bottom: 1px solid #000; width: 200px; margin: 0 auto;"></div>\n</div>    <p>Received By: </p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p>Receiver's Signature</p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p>Received Date</p>\n  </div>\n</div>\n`:""}\n</body>\n</html>\n`,r=n.contentWindow.document;r.open(),r.write(s),r.close(),n.onload=()=>{n.contentWindow.focus(),n.contentWindow.print(),setTimeout((()=>{document.body.removeChild(n)}),1e3)}}catch(n){Tt(`Failed to print voucher: ${n.message}`)}},te=async(t,e)=>{Dt.value=t.items.reduce(((t,e)=>t+e.requisition_items?.quantity*e.requisition_items?.rate),0);try{const n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n);new Date;const i=new Date(t.created_at),a=`${i.getDate().toString().padStart(2,"0")}/${(i.getMonth()+1).toString().padStart(2,"0")}`,s=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Print Voucher</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n  .header {  display: flex; justify-content: space-between; align-items: flex-start;font-weight:bold }\n  .logo { width: 160px; height: auto; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .voucher-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; }\n  .company-title h2 { margin: 5px 0; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; font-weight: normal; }\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n  .title { text-align: center;   margin: 10px 0 10px 0; font-size:20px }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; border-radius: 4px; overflow: hidden; }\n  table.details td, table.items th, table.items td, .signatures th, .signatures td { border: 0.5px solid #000; padding: 6px; font-weight: normal; }\n  table.items thead tr th { background-color: #f8f8f8; border-bottom: 1px solid #000; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  .text-success { color: green; }\n .signature-area { margin-top: 30px; }\n  .signature-line { border-top: 1px solid #000; width: 200px; display: inline-block; margin-top: 50px; }\n  .text-danger { color: red; }\n  hr {\n  border: 0;\n  border-top: 0.4px solid #000 !important;\n  opacity: 1 !important;\n  margin: 0px 0;\n}\n\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n<div class="text-style">\n  ${t.purpose.toLowerCase().includes("voucher")?"VOUCHER":"LPO"}  NO. ${t.requisition}\n</div>\n<div class="company-title text-style">\n  <i>\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> , 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247    <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n<hr style="margin-top:20px">\n<div class="title text-style">  ${t?.purpose?.toUpperCase()} :  ${t?.project?.toUpperCase()??"NO PROJECT"}</div>\n<hr>\n${t.purpose.toLowerCase().includes("voucher")?"":`\n\n<div style="display:flex;justify-content:space-between;gap:20px;margin-top:10px;font-size:13px;">\n  <div style="flex:1;border:1px solid #f0f0f0;padding:8px;">\n  <table style="width:100%; border-collapse: collapse;">\n  <tr><td style="background:#333; border-top:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000; padding:5px;width:2cm">\n  <b>Vendor</b>\n</td>\n</tr>\n  <tr ><td>Name</td><td style="border-bottom:1px solid #000;">${e?.name||""}</td></tr>\n  <tr ><td>Address</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.address||""}</td></tr>\n  <tr ><td>City</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.location||""}</td></tr>\n  <tr ><td>Phone</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.phone||""}</td></tr>\n  <tr ><td >TIN</td><td class="text-style" style="border-bottom:1px solid #000;">${e?.tin||""}</td></tr>\n  <tr ><td >VRN</td><td  class="text-style" style="border-bottom:1px solid #000;">${e?.vrn||""}</td></tr>\n</table>\n\n  </div>\n  <div style="width:35%;border:1px solid #f0f0f0;padding:8px;margin-top:1cm">\n    <table style="width:100%;border-collapse:collapse;">\n      <tr><td class="text-style"> ${t.purpose.toLowerCase().includes("voucher")?"VOUCHER":"LPO"} :</td><td class="text-style">${t?.requisition||""}</td></tr>\n      <tr><td class="text-style"> ${t.purpose.toLowerCase().includes("voucher")?"VOUCHER":"LPO"} DATE:</td><td class="text-style">${a}/${i.getFullYear()}</td></tr>\n      <tr><td class="text-style">REQ:</td><td class="text-style">${t?.id||""}</td></tr>\n      <tr><td class="text-style">REQ DATE:</td><td class="text-style">${a}/${i.getFullYear()}</td></tr>\n      <tr><td class="text-style">STATUS:</td><td class="text-style">${t?.status.name||""}</td></tr>\n      <tr><td class="text-style">AWAITS:</td><td class="text-style">${t?.awaits||""}</td></tr>\n    </table>\n  </div>\n</div>\n<br>\n\n  </tbody>\n</table>\n    `}\n\n<p class="text-style">Please provide the following as per requisition details below</p>\n<h2 class="text-style">CURRENCY : TSH</h2>\n<table class="items">\n  <thead>\n    <tr>\n      <th class="text-style">No.</th>\n      <th class="text-style">ITEM NAME</th>\n      <th class="text-style">DESCRIPTION</th>\n      <th class="text-style">QUANTITY</th>\n      <th class="text-style">RATE</th>\n      <th class="text-style">TOTAL</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${t.items.map(((t,e)=>`\n    <tr>\n      <td class="text-style">${e+1}</td>\n      <td class="text-style">${t.requisition_items?.remark||"N/A"}</td>\n      <td class="text-style">${t.requisition_items?.description||"N/A"}</td>\n      <td class="text-style text-right">${t.requisition_items?.quantity||"0"}</td>\n      <td class=" text-style text-right">${Number(t.requisition_items?.rate||0).toLocaleString()}/=</td>\n      <td class="text-style text-right">${(t.requisition_items?.quantity*t.requisition_items?.rate||0).toLocaleString()}/=</td>\n    </tr>\n\n    `)).join("")}\n\n    <tr>\n     <td colspan="6" class="text-style" style="text-align:right;"><strong>TOTAL</strong>  <strong>${Dt.value.toLocaleString()}/=</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n<h2 style="text-style">Note : </h2>\n<p class="text-style">${t.description??""}</p>\n<div class="title text-style" style="margin-top:40px">APPROVAL CHAIN</div>\n<table class="signatures" style="margin-top: 10px;">\n  <tbody>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <td style="border-bottom:1px solid #000;border-top:1px solid #fff;border-right:1px solid #fff;border-left:1px solid #fff;" class="text-center ${3==t?.status?.id?"text-success":"text-danger"}">${t?.status?.name??"Pending"}</td>\n       `)).join("")}\n      </tr>\n  </tbody>\n    <tfooter>\n    <tr>\n          ${t.roles_sequence.map((t=>`\n      <th style="border-bottom:1px solid #fff;border-top:1px solid #fff;border-right:55px solid #fff;border-left:1px solid #fff;">${t.name||"N/A"}</td>\n            `)).join("")}\n    </tr>\n\n  </tfooter>\n</table>\n\n\n\n${t.purpose.toLowerCase().includes("voucher")?`\n    <div class="title text-style" style="margin-top:40px;margin-bottom:-20px">BENEFICIARY</div>\n\n<div class="signature-area" style="display: flex; justify-content: space-between; margin-top: 20px;">\n  <div style="text-align: center;">\n<div style="text-align: center; margin-top: 30px;">\n  \x3c!-- Beneficiary name above the line --\x3e\n  <div class="text-style" style="margin-bottom: 5px;">\n    <strong>${t.beneficiary||"&nbsp;"}</strong>\n  </div>\n\n  \x3c!-- The signature line --\x3e\n  <div style="border-bottom: 1px solid #000; width: 200px; margin: 0 auto;"></div>\n</div>    <p>Received By: </p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p>Receiver's Signature</p>\n  </div>\n  <div style="text-align: center;">\n    <div class="signature-line"></div>\n    <p>Received Date</p>\n  </div>\n</div>\n`:""}\n</body>\n</html>\n`,r=n.contentWindow.document;r.open(),r.write(s),r.close(),n.onload=()=>{n.contentWindow.focus(),n.contentWindow.print(),setTimeout((()=>{document.body.removeChild(n)}),1e3)}}catch(n){Tt(`Failed to print voucher: ${n.message}`)}},ee=(0,s.iH)(""),ne=async()=>{if(ee.value="",!e.params.group_id||"undefined"===e.params.group_id)return;const t=await n.get(`approval-groups/${e.params.group_id}`);ee.value=t.data};return(0,i.bv)((()=>{ne(),Yt(),Mt.value&&(Bt=()=>{It.value=!1,spinner.value=!1},Mt.value.addEventListener("hidden.bs.modal",Bt))})),(0,i.Jd)((()=>{Mt.value&&Bt&&Mt.value.removeEventListener("hidden.bs.modal",Bt)})),(t,e)=>{const n=(0,i.up)("router-link"),l=(0,i.up)("v-client-table");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("ul",p,[(0,i._)("li",null,[(0,i._)("div",u,[(0,i._)("nav",m,[(0,i._)("ol",g,[(0,i._)("li",v,[(0,i._)("a",h,(0,a.zw)(ee.value.group),1)]),(0,i._)("li",b,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(ee.value.roles,(t=>((0,i.wg)(),(0,i.iD)("span",null,(0,a.zw)(t.role)+" >>",1)))),256))])])])])])]),(0,i._)("div",x,[(0,i._)("div",y,[(0,i._)("div",_,[(0,i.Wm)(n,{to:"/requisitions/all",class:"btn btn-primary me-2"},{default:(0,i.w5)((()=>[w])),_:1}),(0,i.Wm)(n,{to:"/good-received-notes/dashboard",class:"btn btn-secondary"},{default:(0,i.w5)((()=>[f])),_:1})])])]),(0,i._)("h2",k,(0,a.zw)(ee.value?.group?.toLowerCase().includes("voucher")?"PAYMENT VOUCHERS":"LOCAL PURCHASE ORDERS"),1),(0,i._)("div",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Nt.value,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"card shadow mb-4 col-xl-12 col-lg-12 col-sm-12 layout-spacing",key:e.id},[(0,i._)("div",$,[(0,i._)("table",C,[(0,i._)("thead",null,[(0,i._)("tr",null,[D,(0,i._)("th",null,[(0,i.Wm)(n,{to:`/masters/requsition/${e.source_id}`},{default:(0,i.w5)((()=>[S])),_:2},1032,["to"])]),R,N,H,A,e.project?((0,i.wg)(),(0,i.iD)("th",O,"Project")):(0,i.kq)("",!0),e.vendor?((0,i.wg)(),(0,i.iD)("th",T,[e.type.toLowerCase().includes("voucher")?((0,i.wg)(),(0,i.iD)("span",L,"Beneficiary")):((0,i.wg)(),(0,i.iD)("span",z,"Vendor"))])):(0,i.kq)("",!0),E,P,j,(0,s.SU)($t).includes("can_print_lpo")?((0,i.wg)(),(0,i.iD)("th",U,"Action")):(0,i.kq)("",!0)])]),(0,i._)("tbody",null,[(0,i._)("tr",null,[(0,i._)("td",null,(0,a.zw)(e.id),1),(0,i._)("td",null,(0,a.zw)(e.source_id),1),(0,i._)("td",{onClick:t=>te(e,e.vendor_data)},(0,a.zw)(e.requester),9,V),(0,i._)("td",null,(0,a.zw)(e.date),1),(0,i._)("td",null,(0,a.zw)(e.type),1),(0,i._)("td",null,(0,a.zw)(e.purpose),1),e.project?((0,i.wg)(),(0,i.iD)("td",I,(0,a.zw)(e.project),1)):(0,i.kq)("",!0),e.vendor?((0,i.wg)(),(0,i.iD)("td",M,(0,a.zw)(e.vendor),1)):(0,i.kq)("",!0),(0,i._)("td",null,(0,a.zw)(e.awaits),1),(0,i._)("td",null,(0,a.zw)(e.cost),1),(0,i._)("td",null,[(0,i._)("span",{class:(0,a.C_)(["mb-0 badge",`badge-${e.status?.class}`])},(0,a.zw)(e.status?.key),3)]),(0,i._)("td",null,[(0,s.SU)($t).includes("can_print_lpo")?((0,i.wg)(),(0,i.iD)("a",{key:0,href:"javascript:void(0);",onClick:t=>Zt(e,e.vendor_data),class:"text-success"},W,8,B)):(0,i.kq)("",!0)])]),e.description?((0,i.wg)(),(0,i.iD)("tr",J,[(0,i._)("td",F,[K,(0,i.Uk)(" "+(0,a.zw)(e.description),1)])])):(0,i.kq)("",!0),e.remark?((0,i.wg)(),(0,i.iD)("tr",Q,[(0,i._)("td",X,[G,(0,i.Uk)(" "+(0,a.zw)(e.remark),1)])])):(0,i.kq)("",!0)])])]),St.value==e.awaiting_approval?.role_id&&"no one"!==e.awaits?((0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("div",tt,[(0,i._)("button",{class:"btn btn-primary me-2",onClick:t=>qt(e.id,3)},"Check",8,et),(0,i._)("button",{class:"btn btn-danger me-2",onClick:t=>qt(e.id,4)},"Reject",8,nt),(0,i._)("button",{class:"btn btn-info",onClick:t=>qt(e.id,14)},"Remark",8,it)])])):(0,i.kq)("",!0),Y.value[e.id]?((0,i.wg)(),(0,i.iD)("div",at,[(0,i._)("span",{class:(0,a.C_)(["badge rounded-pill",{"bg-danger":4==Y.value[e.id],"bg-success":3==Y.value[e.id],"bg-info":14==Y.value[e.id]}]),style:{"font-size":"1rem"}},(0,a.zw)(3==Y.value[e.id]?"Check / Approve Request":4==Y.value[e.id]?"Reject Request":"Fill Remark"),3)])):(0,i.kq)("",!0),Y.value[e.id]?((0,i.wg)(),(0,i.iD)("div",st,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",placeholder:3==Y.value[e.id]?"Enter Approval Remark":4==Y.value[e.id]?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":t=>kt.value[e.id]=t,onKeyup:(0,r.D2)((t=>Gt(e)),["enter"])},null,40,rt),[[r.nr,kt.value[e.id]]]),(0,i._)("button",{onClick:t=>Gt(e),class:"btn btn-primary me-2",type:"button",disabled:Ct.value},[Ct.value?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:(0,s.SU)(Pt)()},null,8,ot)):((0,i.wg)(),(0,i.iD)("span",dt,"Save"))],8,lt)])):(0,i.kq)("",!0),(0,i._)("div",ct,[(0,i._)("table",pt,[(0,i._)("thead",null,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.roles_sequence,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t.role_id||t.position||t.name},[(0,i.Uk)((0,a.zw)(t.name)+" ",1),ut])))),128))])]),(0,i._)("tbody",null,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.roles_sequence,((t,e)=>((0,i.wg)(),(0,i.iD)("td",{key:t.role_id||t.position||e,class:(0,a.C_)(t?.status?.color?"text-"+t.status.color:"text-danger")},[(0,i._)("span",null,(0,a.zw)(t?.status?.name??"Unchecked"),1),mt,t.approved_at?((0,i.wg)(),(0,i.iD)("span",gt,"Checked At :"+(0,a.zw)((0,s.SU)(Et)(t.approved_at)),1)):(0,i.kq)("",!0),vt,ht,t.remark?((0,i.wg)(),(0,i.iD)("span",bt,"Remark : "+(0,a.zw)(t.remark),1)):(0,i.kq)("",!0)],2)))),128))])])])]),(0,i._)("div",xt,[(0,i._)("div",yt,[(0,i._)("div",_t,[(0,i.Wm)(l,{data:e.items.map(((t,e)=>({Sno:e+1,item:t.requisition_items?.remark,description:t.requisition_items?.description,quantity:t.requisition_items?.quantity,rate:t.requisition_items?.rate,total:(t.requisition_items?.quantity*t.requisition_items?.rate).toLocaleString(),asset_id:t.requisition_items?.asset_id}))),columns:Rt.value,options:Ht.value},{actions:(0,i.w5)((e=>[e.row.asset_id?((0,i.wg)(),(0,i.j4)(n,{key:0,to:`/assets/fuel-statement/${e.row.asset_id}`,onClick:t.closeModal},{default:(0,i.w5)((()=>[wt])),_:2},1032,["to","onClick"])):(0,i.kq)("",!0)])),_:2},1032,["data","columns","options"])])])])])))),128))]),Ct.value?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:(0,s.SU)(zt)()},null,8,ft)):(0,i.kq)("",!0)])}}};const qt=kt;var $t=qt}}]);
//# sourceMappingURL=6171.1aca9be1.js.map