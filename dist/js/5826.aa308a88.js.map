{"version":3,"file":"js/5826.aa308a88.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/rolePermissions.vue","webpack://cork-vue3/./src/views/masters/rolePermissions.vue?a283"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>roles</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class=\"d-flex me-4 mt-2\">\r\n                        <div class=\"ms-auto\">\r\n                            <button class=\"btn btn-primary\" @click=\"role_registration =! role_registration\">                         \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n  <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>  \r\n        \r\n \r\n                          <!-- loading spinner starts -->\r\n                          <div v-if=\"loading_spinner\" class=\"d-flex justify-content-center align-items-center\" style=\"height: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n        </div>\r\n        <!-- Loading spinner ends -->\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                <div class=\"row\">\r\n\r\n\r\n\r\n                        <!-- role registration form starts -->\r\n <form v-if=\"role_registration\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerRole\">\r\n        <h4 class=\"text-center\">ROLE  REGISTRATION FORM</h4>\r\n        <div class=\"row mb-2\">\r\n    \r\n            <div class=\"col-md-3\">\r\n                <label class=\"form-label\">Role Name</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter role Name\" v-model=\"name\" required>\r\n            </div>\r\n            <div class=\"col-md-9\">\r\n                <label class=\"form-label\">Role Description</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter role Description\" v-model=\"description\" step=\"any\" required>\r\n            </div>\r\n        </div>\r\n        <div class=\"text-center gap-2 justify-content-end\">\r\n            <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"role_registration = false\">Cancel</button>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n        </div>\r\n    </form>\r\n             <!-- item registration form ends-->\r\n\r\n\r\n\r\n\r\n                 <!-- add role filter -->\r\n        \r\n            <div class=\"d-flex justify-content-center mb-3 \">\r\n                <div class=\"input-group input-group-md\" style=\"width: 700px;\">\r\n                    <span class=\"input-group-text\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\r\n                        </svg>\r\n                    </span>\r\n                    <input \r\n                        type=\"text\" \r\n                        class=\"form-control form-control-sm\" \r\n                        placeholder=\"Search roles...\" \r\n                        v-model=\"roleFilters[index]\"\r\n                    >\r\n                </div>\r\n\r\n            </div> \r\n        \r\n    <!-- add role filter ends -->\r\n\r\n\r\n\r\n                    <!-- card starts -->\r\n                    <div class=\"col-md-6\" v-for=\"(role, index) in getFilteredRoles(index)\">\r\n\r\n    <div class=\"card mb-3\">\r\n        <div class=\"card-header\">\r\n            <h5 class=\"card-title\">{{ role.name }}</h5>\r\n            <p class=\"card-subtitle text-muted mb-0\">{{ role.description }}</p>\r\n        </div>\r\n        <div class=\"card-body text-start\">\r\n            <div class=\"d-flex\">\r\n                <button class=\"ms-auto btn btn-primary p-1\" @click=\"toggleShowAddPermission(index)\">\r\n\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\r\n            </svg>\r\n            </button>\r\n            </div> \r\n            <div class=\"text-center\"><u>PERMISSIONS</u></div>\r\n\r\n      <div>\r\n\r\n<!-- Add this filter for the displayed permissions -->\r\n\r\n    <template v-if=\"role.permissions && role.permissions.length\">\r\n        <button\r\n            class=\"btn btn-link p-0\"\r\n            @click=\"show[`perm_${index}`] = !show[`perm_${index}`]\"\r\n        >\r\n            <span v-if=\"show[`perm_${index}`]\">Hide Permissions ▲</span>\r\n            <span v-else>Show Permissions ▼</span>\r\n        </button>\r\n        <div class=\"mt-2 mb-3\"  v-if=\"show[`perm_${index}`]\">\r\n        <div class=\"input-group input-group-sm mb-2\">\r\n        <span class=\"input-group-text\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\r\n            </svg>\r\n        </span>\r\n        <input \r\n            type=\"text\" \r\n            class=\"form-control form-control-sm\" \r\n            placeholder=\"Filter assigned permissions...\" \r\n            v-model=\"assignedPermissionFilters[index]\"\r\n        >\r\n    </div>\r\n</div>\r\n  \r\n        <ol\r\n            v-if=\"show[`perm_${index}`]\"\r\n            class=\"ps-3 list-unstyled mt-2\"\r\n        >\r\n            <li\r\n                v-for=\"(permission, pIndex) in getFilteredAssignedPermissions(role, index)\"\r\n                :key=\"pIndex\"\r\n                class=\"d-flex justify-content-between align-items-center\"\r\n            >\r\n                <span>{{ pIndex + 1 }}.{{ permission.name }}</span>\r\n                <button\r\n                    class=\"btn btn-danger btn-sm p-0 px-1 ms-1\"\r\n                    @click=\"deleteRolePermission(role, permission, index, findPermissionIndex(role, permission.id))\"\r\n                >\r\n                   ×\r\n                </button>\r\n            </li>\r\n        </ol>\r\n    </template>\r\n\r\n    <div v-else class=\"text-danger ps-3 mt-2\">\r\n      No permissions assigned to this role.\r\n    </div>\r\n  </div>  \r\n\r\n<div v-if=\"showAddPermission(index)\">\r\n\r\n    <!-- add permission filter -->\r\n            <div class=\"mt-2 mb-3\">\r\n                <div class=\"input-group input-group-sm mb-2\">\r\n                    <span class=\"input-group-text\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\r\n                        </svg>\r\n                    </span>\r\n                    <input \r\n                        type=\"text\" \r\n                        class=\"form-control form-control-sm\" \r\n                        placeholder=\"Search permissions...\" \r\n                        v-model=\"permissionFilters[index]\"\r\n                    >\r\n                </div>\r\n\r\n            </div> \r\n    <!-- add permission filter ends -->\r\n\r\n  <button\r\n    v-for=\"permission in getFilteredAvailablePermissions(role, index)\"\r\n    :key=\"permission.id\"\r\n    class=\"btn btn-success mt-1 p-0 px-2 ms-2\"\r\n    @click=\"addPermissionLocally(role, permission)\"\r\n  >\r\n    {{ permission.name }}\r\n\r\n  </button>\r\n  \r\n</div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n                     <!-- card ends -->\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n\r\n    useMeta({ title: 'Custom Table' });\r\n    \r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    \r\n    const roles = ref([]);\r\n    const name = ref('');\r\n    \r\n    const loading_spinner = ref(false);\r\n    const permissions = ref([]);\r\n    const role_registration = ref(false);\r\n    const description = ref('');\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const whatsappAlert = inject('whatsappAlert');\r\n    const show = ref({});\r\n    const permissionFilters = ref({});\r\n    const permissionCategories = ref({});\r\n    const assignedPermissionFilters = ref({});\r\n    const roleFilters = ref({});\r\n\r\n    const toggleShowAddPermission = (index) => {\r\n        show.value[index] = !show.value[index];\r\n    };\r\n\r\n    const showAddPermission = (index) => {\r\n        return show.value[index] === true;\r\n    };\r\n\r\n    const getAvailablePermissions = (role) => {\r\n        return permissions.value.filter(\r\n            (p) => !role.permissions.some(rp => rp.id === p.id)\r\n        );\r\n    };\r\n\r\n    const addPermissionLocally = (role, permission) => {\r\n        if (!role.permissions.some(rp => rp.id === permission.id)) {\r\n            role.permissions.push({...permission});\r\n            registerRolePermission(role, permission);\r\n        }\r\n    };\r\n\r\n    const deleteRolePermission = (role,permission,roleIndex, permissionIndex) => {\r\n        roles.value[roleIndex].permissions.splice(permissionIndex, 1);\r\n        axiosInstance.delete(`/role-permission/${role.id}/${permission.id}`)\r\n            .then((response) => {\r\n                showMessage(response.data.message);\r\n                const message = JSON.parse(localStorage.getItem('user')).name + ' removed permmission ' + permission.name +' from '+ role.name;\r\n                const receiver = '255698267662'\r\n                const message_id = 'wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA='\r\n                whatsappAlert(message,message_id,receiver)\r\n            });\r\n    };\r\n\r\n    const getRoles = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/roles')\r\n            .then((response) => {\r\n                roles.value = response.data;\r\n                loading_spinner.value = false;\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                loading_spinner.value = false;\r\n                console.error(\"Error fetching roles:\", error.message);\r\n            });\r\n    };\r\n\r\n    const getPermissions = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/permission')\r\n            .then((response) => {\r\n                permissions.value = response.data;\r\n                loading_spinner.value = false;\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                loading_spinner.value = false;\r\n                console.error(\"Error fetching roles:\", error.message);\r\n            });\r\n    };\r\n\r\n    const registerRolePermission = (role, permission) => {\r\n        const itemData = {\r\n            role_id: role.id,\r\n            permission_id: permission.id,\r\n        };\r\n        axiosInstance\r\n            .post('/role-permission', itemData)\r\n            .then((response) => {\r\n                showMessage('Permission Added successfully!');\r\n                const message = JSON.parse(localStorage.getItem('user')).name + ' added permmission ' + permission.name +' to '+ role.name;\r\n                const receiver = '255698267662'\r\n                const message_id = 'wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA='\r\n                whatsappAlert(message,message_id,receiver)\r\n                name.value = '';\r\n                description.value = '';\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                console.error(\"Error registering Permission:\", error);\r\n            });\r\n    }\r\n\r\n    const getPermissionCategories = () => {\r\n        const categories = new Set();\r\n        permissions.value.forEach(permission => {\r\n            categories.add(permission.category);\r\n        });\r\n        return Array.from(categories);\r\n    }\r\n\r\n    const getFilteredAvailablePermissions = (role, index) => {\r\n        const availablePermissions = getAvailablePermissions(role);\r\n        const filter = permissionFilters.value[index] || '';\r\n        const category = permissionCategories.value[index] || '';\r\n\r\n        return availablePermissions.filter(permission => {\r\n            const nameMatch = permission.name.toLowerCase().includes(filter.toLowerCase());\r\n            const categoryMatch = category === '' || permission.category === category;\r\n            return nameMatch && categoryMatch;\r\n        });\r\n    }\r\n\r\n    const getFilteredAssignedPermissions = (role, index) => {\r\n        if (!role.permissions) return [];\r\n        \r\n        // If no filter is applied, return all permissions\r\n        if (!assignedPermissionFilters.value[index] || !assignedPermissionFilters.value[index].trim()) {\r\n            return role.permissions;\r\n        }\r\n        \r\n        // Apply filter to assigned permissions\r\n        const searchTerm = assignedPermissionFilters.value[index].toLowerCase();\r\n        return role.permissions.filter(permission => \r\n            permission.name.toLowerCase().includes(searchTerm)\r\n        );\r\n    };\r\n\r\n    const findPermissionIndex = (role, permissionId) => {\r\n        if (!role.permissions) return -1;\r\n        return role.permissions.findIndex(p => p.id === permissionId);\r\n    };\r\n\r\n\r\n            //METHOD FOR FILTERING ROLES\r\n      const getFilteredRoles = (index) => {\r\n        if (!roles.value) return [];\r\n        if (!roleFilters.value[index] || !roleFilters.value[index].trim()) {\r\n            return roles.value;\r\n        }       \r\n        const filter = roleFilters.value[index] || '';\r\n        return roles.value.filter(role => {\r\n            const nameMatch = role.name.toLowerCase().includes(filter.toLowerCase());\r\n            return nameMatch;\r\n        });\r\n    };\r\n\r\n\r\n\r\n const registerRole = () => {\r\n        role_registration.value = false;\r\n        loading_spinner.value = true;\r\n        const itemData = {\r\n            name: name.value,\r\n            description: description.value,\r\n        };\r\n\r\n        axiosInstance\r\n            .post('/roles', itemData)\r\n            .then((response) => {\r\n                getRoles();\r\n                loading_spinner.value = false;\r\n                showMessage('role registered successfully!');\r\n                name.value = '';\r\n                description.value = '';\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                loading_spinner.value = false;\r\n                console.error(\"Error registering Order:\", error.message);\r\n            });\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    onMounted(() => {\r\n        getRoles();\r\n        getPermissions();\r\n    });\r\n</script>\r\n","import script from \"./rolePermissions.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./rolePermissions.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./rolePermissions.vue?vue&type=style&index=0&id=45cfee72&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","roles","ref","name","loading_spinner","permissions","role_registration","description","showMessage","inject","showError","whatsappAlert","show","permissionFilters","permissionCategories","assignedPermissionFilters","roleFilters","toggleShowAddPermission","index","value","showAddPermission","getAvailablePermissions","role","filter","p","some","rp","id","addPermissionLocally","permission","push","registerRolePermission","deleteRolePermission","roleIndex","permissionIndex","splice","delete","then","response","data","message","JSON","parse","localStorage","getItem","receiver","message_id","getRoles","get","catch","error","console","getPermissions","itemData","role_id","permission_id","post","getFilteredAvailablePermissions","availablePermissions","category","nameMatch","toLowerCase","includes","categoryMatch","getFilteredAssignedPermissions","trim","searchTerm","findPermissionIndex","permissionId","findIndex","getFilteredRoles","registerRole","onMounted","__exports__"],"sourceRoot":""}