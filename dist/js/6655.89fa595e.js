"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[6655],{76655:function(e,a,t){t.r(a),t.d(a,{default:function(){return ce}});var l=t(66252),s=t(2262),o=t(49963),n=t(3577),i=t(87066),r=t(56296);const u={class:"layout-px-spacing"},c=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Units</span></li></ol></nav></div></li></ul>',1),d={class:"d-flex me-4 mt-2"},v={class:"ms-auto"},m=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),b=[m],p=["innerHTML"],h=["onSubmit"],_=(0,l._)("h4",{class:"text-center"},"UNIT REGISTRATION FORM",-1),w={class:"row mb-2"},g={class:"col-md-4"},f=(0,l._)("label",{class:"form-label"},"Unit Name",-1),y={class:"col-md-4"},k=(0,l._)("label",{class:"form-label"},"Unit Short Name",-1),S={class:"col-md-4"},C=(0,l._)("label",{for:"editunitStatus"},"Unit Status",-1),x=(0,l._)("option",{value:""},"Select Status",-1),U=(0,l._)("option",{value:"Active"},"Active",-1),M=(0,l._)("option",{value:"Inactive"},"Inactive",-1),N=[x,U,M],E={class:"text-center gap-2 justify-content-end"},H=(0,l._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),I={class:"row layout-top-spacing"},V={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},T={class:"panel p-0"},j={class:"custom-table table3"},A=["onClick"],B=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,l._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),L=[B],q=["onClick"],R=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},[(0,l._)("polyline",{points:"3 6 5 6 21 6"}),(0,l._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),z=[R],D={class:"modal-footer"},F=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),O=["disabled"],P={class:"modal fade",id:"editModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModalLabel","aria-hidden":"true"},$={class:"modal-dialog modal-lg modal-dialog-scrollable",role:"document"},G={class:"modal-content"},W=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"editModalLabel"},"Edit Unit"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Y={class:"modal-body"},Z={class:"row mb-2"},J={class:"col-md-4"},K=(0,l._)("label",{for:"editunitName"},"Unit Name",-1),Q={class:"col-md-4"},X=(0,l._)("label",{for:"editunitShortName"},"Unit Short Name",-1),ee={class:"col-md-4"},ae=(0,l._)("label",{for:"editunitStatus"},"Unit Status",-1),te=(0,l._)("option",{value:"Active"},"Active",-1),le=(0,l._)("option",{value:"Inactive"},"Inactive",-1),se=[te,le],oe={class:"modal-footer"},ne=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),ie=["disabled"];var re={setup(e){(0,r.j)({title:"Custom Table"});const a=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),t=(0,l.f3)("loadingIndicator");let m=null;const x=(0,s.iH)({}),U=(0,s.iH)(""),M=(0,s.iH)(""),B=(0,s.iH)(""),R=(0,s.iH)(!1),te=(0,s.iH)(["SNo","name","short_name","status","actions"]),le=(0,s.iH)([]),re=(0,s.iH)(!1),ue=(0,s.iH)({perPage:10,perPageValues:[10,20,50],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name","short_name","status"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),ce=()=>{R.value=!0,a.get("/units").then((e=>{le.value=e.data.map(((e,a)=>({SNo:a+1,id:e.id,name:e.name,short_name:e.short_name,status:e.status}))),R.value=!1})).catch((e=>{me(e.message||"Failed to fetch units"),R.value=!1}))},de=()=>{re.value=!1,R.value=!0;const e={name:U.value,short_name:M.value,status:B.value};a.post("/units",e).then((e=>{ce(),R.value=!1,ve("Unit registered successfully!"),_e(),201===e.data.status||console.error("Error registering Order:",e.data.message)})).catch((e=>{me("Error registering Unts:",e.message),console.error(e)}))},ve=(0,l.f3)("showMessage"),me=(0,l.f3)("showError"),be=async e=>{window.Swal&&window.Swal.fire({title:"Delete Item",text:"Are you sure you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{if(t.isConfirmed){R.value=!0;try{await a.delete(`/units/${e.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),le.value=le.value.filter((a=>a.id!==e.id)),le.value=le.value.map(((e,a)=>({...e,SNo:a+1}))),ve("Item deleted successfully")}catch(l){console.error("Error deleting item:",l),me("Failed to delete item: "+l.message)}finally{R.value=!1}}}))},pe=e=>{x.value={...e},m.show()},he=async()=>{if(m.hide(),!R.value)try{R.value=!0;const e=await a.put(`/units/${x.value.id}`,{name:x.value.name,short_name:x.value.short_name,status:x.value.status});if(200===e.status){const e=le.value.findIndex((e=>e.id===x.value.id));-1!==e&&(le.value[e].name=x.value.name,le.value[e].short_name=x.value.short_name,le.value[e].status=x.value.status),ve("Unit updated successfully!")}}catch(e){me("Error updating Unit: "+(e.response?.data?.message||e.message))}finally{R.value=!1}},_e=()=>{U.value="",M.value="",B.value=""};return(0,l.bv)((()=>{ce(),m=new bootstrap.Modal(document.getElementById("editModal"))})),(e,a)=>{const i=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)("div",u,[c,(0,l._)("div",d,[(0,l._)("div",v,[(0,l._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=e=>re.value=!re.value)},b)])]),R.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,s.SU)(t)()},null,8,p)):(0,l.kq)("",!0),re.value?((0,l.wg)(),(0,l.iD)("form",{key:1,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,o.iM)(de,["prevent"])},[_,(0,l._)("div",w,[(0,l._)("div",g,[f,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Unit Name","onUpdate:modelValue":a[1]||(a[1]=e=>U.value=e),required:""},null,512),[[o.nr,U.value]])]),(0,l._)("div",y,[k,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Unit Short Name","onUpdate:modelValue":a[2]||(a[2]=e=>M.value=e),required:""},null,512),[[o.nr,M.value]])]),(0,l._)("div",S,[C,(0,l.wy)((0,l._)("select",{class:"form-control form-select",id:"editunitStatus","onUpdate:modelValue":a[3]||(a[3]=e=>B.value=e),required:""},N,512),[[o.bM,B.value]])])]),(0,l._)("div",E,[(0,l._)("button",{type:"button",class:"btn btn-danger me-3",onClick:a[4]||(a[4]=e=>{re.value=!1,_e()})},"Cancel"),H])],40,h)):(0,l.kq)("",!0),(0,l._)("div",I,[(0,l._)("div",V,[(0,l._)("div",T,[(0,l._)("div",j,[(0,l.Wm)(i,{data:le.value,columns:te.value,options:ue.value},{status:(0,l.w5)((e=>[(0,l._)("span",{class:(0,n.C_)(["badge","Active"===e.row.status?"bg-success":"bg-secondary"])},(0,n.zw)(e.row.status),3)])),actions:(0,l.w5)((e=>[(0,l._)("a",{href:"javascript:;",class:"edit me-3",onClick:a=>pe(e.row)},L,8,A),(0,l._)("a",{href:"javascript:;",class:"cancel",onClick:a=>be(e.row)},z,8,q)])),footer:(0,l.w5)((()=>[(0,l._)("div",D,[F,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:he,disabled:e.isSaving},"Save changes",8,O)])])),_:1},8,["data","columns","options"])])])])]),(0,l._)("div",P,[(0,l._)("div",$,[(0,l._)("div",G,[W,(0,l._)("div",Y,[(0,l._)("div",Z,[(0,l._)("div",J,[K,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"editunitName","onUpdate:modelValue":a[5]||(a[5]=e=>x.value.name=e)},null,512),[[o.nr,x.value.name]])]),(0,l._)("div",Q,[X,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"editunitShortName","onUpdate:modelValue":a[6]||(a[6]=e=>x.value.short_name=e)},null,512),[[o.nr,x.value.short_name]])]),(0,l._)("div",ee,[ae,(0,l.wy)((0,l._)("select",{class:"form-control form-select",id:"editunitStatus","onUpdate:modelValue":a[7]||(a[7]=e=>x.value.status=e)},se,512),[[o.bM,x.value.status]])])])]),(0,l._)("div",oe,[ne,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:he,disabled:e.isSaving},"Save changes",8,ie)])])])])])}}};const ue=re;var ce=ue}}]);
//# sourceMappingURL=6655.89fa595e.js.map