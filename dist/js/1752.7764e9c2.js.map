{"version":3,"file":"js/1752.7764e9c2.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/stores/returnNotes.vue","webpack://cork-vue3/./src/views/stores/returnNotes.vue?d7f7"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\"\r\n                                    >Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\" ><span>Good Return Notes</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            \r\n                    <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"returnNotes\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #actions=\"props\">\r\n                                <div class=\"d-flex justify-content-center align-items-center\"></div>\r\n                              \r\n                                        <a href=\"javascript:;\" class=\"edit me-2\" \r\n                                             data-bs-toggle=\"modal\" \r\n                                             data-bs-target=\"#view_store\"\r\n                                             id=\"back-modal\"\r\n                                            @click=\"fillModal(props.row)\"\r\n                                        >\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"text-primary bi bi-eye\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n  <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n</svg>\r\n\r\n                                        </a>\r\n                                        \r\n                        \r\n                            </template>\r\n                               <template #status=\"props\">\r\n                    <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                      {{ props.row.status.name }}\r\n                    </span>\r\n                  </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n   </div>\r\n \r\n\r\n\r\n\r\n\r\n\r\n     <!-- store preview modal starts -->\r\n          <div class=\"modal fade mymodal\" id=\"view_store\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\"> {{ store.project }} - {{ store.name }} </h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\" @click=\"clearForm\"></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n\r\n \r\n    <form \r\n    v-if=\"note.status_id === 9\"\r\n    @submit.prevent=\"receiverRemark(note)\">\r\n\r\n          <div class=\"row layout-top-spacing\" style=\"max-height: 67vh; overflow-y: auto;\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <table class=\"table table-bordered mb-4\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Item</th>\r\n                                    <th>Returned Quantity</th>\r\n                                    <th>Received Quantity</th>\r\n                                    <th>Remark</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(item, idx) in storeItems\" :key=\"item.id || idx\">\r\n                                    <td>{{ item.item }}</td>\r\n                                    <td>{{ item.returned_quantity }}</td>\r\n                                    <td>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            class=\"form-control\"\r\n                                            v-model=\"item.received_quantity\"\r\n                                            placeholder=\"Enter received quantity\"\r\n                                            min=\"0\"\r\n                                            required\r\n                                        />\r\n                                    </td>\r\n                                    <td>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            class=\"form-control\"\r\n                                            v-model=\"item.remark\"\r\n                                            placeholder=\"Enter Remark\"\r\n                                        />\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n        <textarea class=\"form-control\" placeholder=\"Enter General Remarks\"  v-model=\"remark\" ></textarea>\r\n        <div class=\"d-flex\">\r\n            <div class=\"ms-auto\">\r\n              <button type=\"submit\" class=\"btn btn-primary mt-1\" :disabled=\"sending\">\r\n                <span v-if=\"sending\" v-html=\"loadingSpinner()\">\r\n                </span>\r\n                <span v-else>\r\n                  Submit\r\n                </span>\r\n            </button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n          <div v-else class=\"row layout-top-spacing\" style=\"max-height: 67vh; overflow-y: auto;\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"storeItems\" :columns=\"itemsColumns\" :options=\"table_option\" >\r\n                            <template #actions=\"props\">\r\n                                <div class=\"d-flex justify-content-center align-items-center\"></div>                \r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    <div v-if=\"note.remark\" class=\"mb-3\">\r\n        <label class=\"form-label fw-bold\">Remark:</label>\r\n        <div class=\"border rounded p-3 bg-light\">\r\n            {{ note.remark }}\r\n        </div>\r\n    </div >\r\n\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n      <!-- store preview modal ends -->\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject,watch } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Return Notes' });\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n     import { useRoute } from 'vue-router';\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    \r\n    const route = useRoute();\r\n    const sending = ref(false)\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['SNo','return_no', 'source_store','returned_to','issuer','receiver','status','date_returned','actions']);\r\n    const itemsColumns = ref(['SNo', 'item','returned_quantity','received_quantity','remark']);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const formatDate = inject('formatDate');\r\n    const enforceMax = inject('enforceMax');\r\n    const project = ref('')\r\n    const name = ref('')\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    \r\n    const remark = ref('')\r\n    const receiverRemark = async(note)=>{\r\n        sending.value = true\r\n        const payload = {\r\n            destination_store : 2,\r\n            status_id : 10,\r\n            receiver_id : user.id,\r\n            remark : remark.value,\r\n            items :storeItems.value.map((item)=>({\r\n                id :item.id,\r\n                item_id: item.item_id,\r\n                received_quantity : item.received_quantity,\r\n                remark : item.remark\r\n            }))\r\n        }\r\n\r\n        try{\r\n        const response = await axiosInstance.put(`good-return-notes/${note.id}`,payload)\r\n        showMessage(\"remark saved\")\r\n        getReturnNotes()\r\n        document.getElementById('close').click()\r\n        remark.value = ''\r\n        const message = JSON.parse(localStorage.getItem('user')).name + ' Received items from ' + note.source_store;\r\n        const receiver = '255698267662'\r\n        const message_id = 'wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA='\r\n        whatsappAlert(message,message_id,receiver)\r\n        }catch(error){\r\n            showError(error.message)\r\n            console.log(error)\r\n        }finally{\r\n            sending.value = false\r\n        }\r\n\r\n    }\r\n\r\n    const table_option = ref({\r\n        perPage: 100,\r\n        perPageValues: [100,200, 500],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: [],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n    \r\n    const store = ref('')\r\n    const note = ref('')\r\n    const fillModal = (data) => {\r\n        store.value = data;\r\n        note.value = data\r\n        project.value = data.project || '';\r\n        name.value = data.name || '';\r\n        storeItems.value = data.items.map((item,index)=>({\r\n            ...item,\r\n            SNo : index + 1,\r\n            item : item.item.name,\r\n        }))\r\n    }\r\n\r\n\r\n\r\n    const returnNotes = ref([])\r\n    const getReturnNotes = async () => {\r\n        try {\r\n        let url = '/good-return-notes';\r\n        if (route.params.store_id !== 'all') {\r\n            url += `?store_id=${route.params.store_id}`;\r\n        }\r\n        const response = await axiosInstance.get(url);\r\n        returnNotes.value = response.data.map((note, index) => ({\r\n            ...note,\r\n            SNo: index + 1,\r\n            return_no: note.id,\r\n            source_store_id : note.source_store?.id,\r\n            source_store: note.source_store?.project.short_name + ' : ' + note.source_store?.name,\r\n            returned_to: note?.destination_store?.project?.short_name + ' : ' + note?.destination_store?.name,\r\n            issuer: note.issuer.name,\r\n            receiver: note?.receiver?.name,\r\n            date_returned: formatDate(note.created_at),\r\n        }));\r\n        } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n        } finally {\r\n        loading_spinner.value = false;\r\n        }\r\n    }\r\n\r\n    watch(\r\n        () => route.params,\r\n        () => {\r\n        loading_spinner.value = true;\r\n        getReturnNotes();\r\n        },\r\n        { deep: true }\r\n    );\r\n\r\n\r\n    const storeItems = ref([])\r\n\r\n    onMounted(() => {\r\n        loading_spinner.value = true;\r\n        getReturnNotes();\r\n    });\r\n</script>\r\n","import script from \"./returnNotes.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./returnNotes.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./returnNotes.vue?vue&type=style&index=0&id=31f236d8&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","route","useRoute","sending","ref","tableShimmer","inject","loadingSpinner","user","JSON","parse","localStorage","getItem","loading_spinner","columns","itemsColumns","showMessage","showError","formatDate","project","name","remark","permissions","receiverRemark","async","value","payload","destination_store","status_id","receiver_id","id","items","storeItems","map","item","item_id","received_quantity","put","note","getReturnNotes","document","getElementById","click","message","source_store","receiver","message_id","whatsappAlert","error","console","log","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","store","fillModal","data","index","SNo","returnNotes","url","params","store_id","response","get","return_no","source_store_id","short_name","returned_to","issuer","date_returned","created_at","watch","deep","onMounted","__exports__"],"sourceRoot":""}