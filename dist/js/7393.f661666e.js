"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[7393],{77393:function(a,t,e){e.r(t),e.d(t,{default:function(){return R}});var i=e(66252),s=e(3577),l=e(2262),r=e(87066),o=e(56296),n=(e(26212),e(42119));const u={class:"layout-px-spacing"},c=(0,i.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Labour Payments</span></li></ol></nav></div></li></ul><div class="row mt-3"><div class="col-12"><h4 class="mb-3 text-center">Labour Payments</h4></div></div>',2),p={key:0,class:"row mb-4"},m={class:"col-12"},v={class:"card"},_=(0,i._)("div",{class:"card-header"},[(0,i._)("h5",{class:"card-title mb-0"},"Request Information")],-1),d={class:"card-body"},b={class:"row"},g={class:"col-md-4 text-start"},w=(0,i._)("strong",null,"Project:",-1),h=(0,i._)("strong",null,"Quantity:",-1),q={class:"col-md-4 text-start"},y=(0,i._)("strong",null,"Requester:",-1),f=(0,i._)("strong",null,"Rate:",-1),k={class:"col-md-4 text-start"},x=(0,i._)("strong",null,"Request Date:",-1),S=(0,i._)("strong",null,"cost:",-1),N={class:"col-md-12 text-start"},U=(0,i._)("strong",null,"Description:",-1),z=["innerHTML"],A={key:2,class:"row layout-top-spacing"},D={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},M={class:"panel p-0"},H={class:"custom-table table3"},P=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"primary",class:"bi bi-eye",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),(0,i._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"})],-1);var C={setup(a){const t=(0,n.yj)();(0,o.j)({title:"Labour Payments"});(0,i.f3)("showMessage"),(0,l.iH)(!1);const e=(0,i.f3)("showError"),C=(JSON.parse(localStorage.getItem("user")).permissions,(0,i.f3)("formatDate")),L=(0,i.f3)("tableShimmer"),R=((0,i.f3)("loadingSpinner"),(0,l.iH)(!1)),j=(0,l.iH)(["SNo","date","name","description","beneficiary","quantity","rate","cost","sub_total","actions"]),I=(0,l.iH)([]),F=(0,l.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name","short_name","status"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),E=r.Z.create({baseURL:"https://bushman.ink/api/v1/"}),T=a=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a),W=async()=>{R.value=!0;try{const a=await E.get(`labour-payments?labour_request_id=${t.params.labour_request_id}`);I.value=a.data.map(((t,e)=>{const i=a.data.slice(0,e+1).reduce(((a,t)=>a+t.quantity*t.approval_item.requisition_items.rate),0);return{...t,SNo:e+1,id:t.id,date:C(t.created_at),name:t.approval_item.requisition_items.remark,description:t.approval_item.description,rate:T(t.approval_item.requisition_items.rate),beneficiary:t.approval_item.requisition_items.beneficiary,cost:T(t.approval_item.requisition_items.rate*t.quantity),quantity:t.quantity,sub_total:T(i),approval_list:t.approval_list,approval_item:t.approval_item}}))}catch(a){console.log(a),e(a.message)}finally{R.value=!1}};return(0,i.bv)((()=>{W()})),(a,t)=>{const e=(0,i.up)("router-link"),r=(0,i.up)("v-client-table");return(0,i.wg)(),(0,i.iD)("div",u,[c,I.value.length>0?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("div",m,[(0,i._)("div",v,[_,(0,i._)("div",d,[(0,i._)("div",b,[(0,i._)("div",g,[(0,i._)("p",null,[w,(0,i.Uk)(" "+(0,s.zw)(I.value[0]?.approval_list?.requisition?.project?.short_name||"N/A"),1)]),(0,i._)("p",null,[h,(0,i.Uk)(" "+(0,s.zw)(T(I.value[0]?.approval_item?.requisition_items.quantity)||"N/A"),1)])]),(0,i._)("div",q,[(0,i._)("p",null,[y,(0,i.Uk)(" "+(0,s.zw)(I.value[0]?.approval_list?.requisition?.requester?.name||"N/A"),1)]),(0,i._)("p",null,[f,(0,i.Uk)(" "+(0,s.zw)(T(I.value[0]?.approval_item?.requisition_items.rate)||"N/A"),1)])]),(0,i._)("div",k,[(0,i._)("p",null,[x,(0,i.Uk)(" "+(0,s.zw)(I.value[0]?.approval_list?.requisition?.date||"N/A"),1)]),(0,i._)("p",null,[S,(0,i.Uk)(" "+(0,s.zw)(T(I.value[0]?.approval_item?.requisition_items.quantity*I.value[0]?.approval_item?.requisition_items.rate)||"N/A"),1)])]),(0,i._)("div",N,[(0,i._)("p",null,[U,(0,i.Uk)(" "+(0,s.zw)(I.value[0]?.approval_list?.requisition?.description||"N/A"),1)])])])])])])])):(0,i.kq)("",!0),R.value?((0,i.wg)(),(0,i.iD)("div",{key:1,innerHTML:(0,l.SU)(L)()},null,8,z)):((0,i.wg)(),(0,i.iD)("div",A,[(0,i._)("div",D,[(0,i._)("div",M,[(0,i._)("div",H,[(0,i.Wm)(r,{data:I.value,columns:j.value,options:F.value},{actions:(0,i.w5)((a=>[(0,i.Wm)(e,{to:`/approval/${a.row.labour_request_id}`},{default:(0,i.w5)((()=>[P])),_:2},1032,["to"])])),_:1},8,["data","columns","options"])])])])]))])}}};const L=C;var R=L}}]);
//# sourceMappingURL=7393.f661666e.js.map