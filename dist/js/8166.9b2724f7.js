"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[8166],{58483:function(e,t,a){a.d(t,{i:function(){return l}});a(26699);function l(e,t){const a=t.toLowerCase().trim();if(!a)return e;const l=e=>null!=e&&("string"===typeof e?e.toLowerCase().includes(a):Array.isArray(e)?e.some(l):"object"===typeof e&&Object.values(e).some(l));return e.filter((e=>l(e)))}},86500:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(66252),n=a(49963),i=a(2262);const s=(0,l._)("span",{class:"input-group-text bg-white border-start-0"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z"})])],-1);var r={props:{filterValue:String},emits:["update:filterValue"],setup(e,{emit:t}){const a=e,r=(0,i.iH)(a.filterValue||null);return(0,l.YP)(r,(e=>t("update:filterValue",e))),(e,t)=>((0,l.wg)(),(0,l.iD)("form",{onSubmit:t[1]||(t[1]=(0,n.iM)((()=>{}),["prevent"])),class:"input-group container"},[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control border-end-0",placeholder:"Search a word...","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,512),[[n.nr,r.value]]),s],32))}};const o=r;var u=o},88166:function(e,t,a){a.r(t),a.d(t,{default:function(){return Tt}});a(26699);var l=a(66252),n=a(2262),i=a(3577),s=a(49963),r=a(87066),o=a(56296),u=a(86500),d=a(58483),c=(a(26212),a(42119));a(69218),a(80599);const p={class:"layout-px-spacing"},v=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Accounts</a></li><li class="breadcrumb-item active" aria-current="page"> Deleted Orders </li></ol></nav></div></li></ul>',1),m={class:"d-flex align-items-center justify-content-between mb-3 mt-3"},_={key:0,class:"text-center m-0 flex-grow-1"},g={class:"d-flex justify-content-end flex-wrap gap-2"},b=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,l._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),y=[b],w={class:"row layout-top-spacing"},h=["innerHTML"],k={key:1,class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},q={class:"panel p-0"},f={class:"custom-table table3"},x=["onClick"],D=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-eye",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),(0,l._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"})],-1),C=[D],H={class:"modal-dialog modal-fullscreen",role:"document"},S={class:"modal-content"},z={class:"modal-header"},U=(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Approval Chain ",-1),A={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},R={class:"panel p-0"},M={class:"custom-table table3 table-responsive"},N={class:"table table-bordered table-striped"},j=(0,l._)("th",null,"Order No",-1),O=(0,l._)("th",null,"Requester",-1),V=(0,l._)("th",null,"Date Requested",-1),L=(0,l._)("th",null,"Purpose",-1),E=(0,l._)("th",null,"Approval Chain",-1),$={key:0},T={key:1},P={key:0},I={key:1},B=(0,l._)("th",null,"Awaits",-1),Y=(0,l._)("th",null,"Cost",-1),F={key:2},J={key:0},Q={key:1},W=(0,l.Uk)(" view History "),Z={key:0},G={colspan:"8"},K=(0,l._)("b",null," Brief Description : ",-1),X={key:0},ee={key:1},te={colspan:"8"},ae=(0,l._)("b",null," Remark : ",-1),le={class:"input-group container"},ne=["disabled"],ie=["innerHTML"],se={key:1},re={class:"modal-body"},oe={class:"text-center mb-2"},ue={class:"btn-group mb-2"},de=["disabled"],ce=["disabled"],pe={key:0,class:"d-flex justify-content-center align-items-end gap-2"},ve=["disabled"],me=["innerHTML"],_e={key:1},ge={key:0,class:"d-flex justify-content-center mb-2"},be={class:"btn-group"},ye=["disabled"],we=["disabled"],he=["disabled"],ke=["disabled"],qe=["disabled"],fe={key:1,class:"mb-2 text-center"},xe={key:2,class:"input-group"},De=["placeholder"],Ce=["disabled"],He=["innerHTML"],Se={key:1},ze={class:"custom-table table3 table-responsive"},Ue={class:"table"},Ae=(0,l._)("br",null,null,-1),Re=(0,l._)("br",null,null,-1),Me={key:0,class:"text-dark"},Ne=(0,l.Uk)(),je=(0,l._)("br",null,null,-1),Oe={key:1,class:"text-dark"},Ve=(0,l._)("h4",{class:"text-center",style:{"font-size":"1.3rem"}},"APPROVAL ITEMS",-1),Le={class:"d-flex justify-content-center mb-3"},Ee={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},$e={class:"panel p-0"},Te={class:"custom-table table3 table-responsive"},Pe={class:"table table-bordered table-striped"},Ie=(0,l._)("th",null,"ID",-1),Be=(0,l._)("th",null,"Item",-1),Ye=(0,l._)("th",null,"Decription",-1),Fe=(0,l._)("th",null,"Quantity",-1),Je=(0,l._)("th",null,"Rate",-1),Qe=(0,l._)("th",null,"Total",-1),We=(0,l._)("th",null,"Receiver",-1),Ze={key:0,class:"text-center"},Ge=(0,l._)("th",null,"Actions",-1),Ke={key:1},Xe={key:0},et={key:1},tt=["onClick"],at={key:0},lt=(0,l._)("br",null,null,-1),nt=(0,l._)("br",null,null,-1),it={key:1},st=(0,l._)("br",null,null,-1),rt=["onUpdate:modelValue"],ot=["onClick"],ut=["onUpdate:modelValue"],dt=(0,l._)("br",null,null,-1),ct={key:0},pt={key:0,class:"text-center"},vt=["onClick"],mt=(0,l._)("path",{d:"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0"},null,-1),_t=(0,l._)("path",{d:"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"},null,-1),gt=[mt,_t],bt=["onClick"],yt=(0,l._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},null,-1),wt=[yt],ht=["onUpdate:modelValue","onInput"],kt=["onUpdate:modelValue"],qt=["onUpdate:modelValue"],ft=(0,l._)("button",{class:"btn btn-outline-primary me-2"},"Diesel ",-1),xt=(0,l._)("button",{class:"btn btn-outline-primary me-2"},"Budget",-1),Dt=(0,l._)("button",{class:"btn btn-outline-primary me-2"},"Jobcard",-1),Ct=(0,l._)("button",{class:"btn btn-outline-primary me-2"},"Subcontractor",-1),Ht=["onClick"],St=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}),(0,l._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"})],-1),zt=[St],Ut=["onClick"],At={key:3},Rt=(0,l._)("h4",{class:"text-center"},"PROFORMA INVOICE",-1),Mt=["href"],Nt=["src"],jt={class:"modal-footer"},Ot=["disabled"],Vt=["innerHTML"],Lt={key:1};var Et={setup(e){const t=(0,n.iH)("");(0,o.j)({title:"Approval Chains"});const a=(0,c.yj)(),b=r.Z.create({baseURL:"https://bushman.ink/api/v1/"}),D=((0,l.f3)("showConfirmation"),(0,n.iH)("")),mt=((0,n.iH)([{id:"all",name:"All"},{id:2,name:"Unapproved"},{id:3,name:"Approved"},{id:4,name:"Rejected"},{id:17,name:"On Hold"},{id:14,name:"Remarked"},{id:16,name:"Paid"}]),(0,n.iH)(!1)),_t=()=>{mt.value=!mt.value},yt=(0,n.iH)(""),St=(0,n.iH)(""),Et=async()=>{va.value=!0;const e={labour_request_id:ha.value.id,approval_group_id:8,source:"Labour Request",source_id:ha.value.approval_id,requester_id:Pt,beneficiary:yt.value,description:St.value,items:Jt.value.filter((e=>Number(e.requesting_quantity)>0)).map((e=>({id:e.id,quantity:e.requesting_quantity,description:e.request_description,beneficiary:e.receiver})))};try{await b.post("approval-lists",e);Kt("Request Sent");const t=JSON.parse(localStorage.getItem("user")).name+" Created Voucher from Labour Request "+ha.value.id,a="wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhggQUM4NzUzOTAxQTIxOEQ2NkZCNDM5RDM4NjUzQjY2QzEA",l=["255697315583","255698267662"];l.forEach((e=>{Ft(t,a,e)})),Gt(),ma(),document.getElementById("close").click()}catch(t){Xt(t.message),console.log(t)}finally{va.value=!1}},$t=JSON.parse(localStorage.getItem("user")).permissions,Tt=(0,n.iH)(!1),Pt=JSON.parse(localStorage.getItem("user")).id,It=((0,n.iH)(0),(0,n.iH)(JSON.parse(localStorage.getItem("user")).role)),Bt=(0,n.iH)(["Sno","requisition","approval","purpose","type","requester","project","cost","status","date","awaits","actions"]),Yt=(0,n.iH)([]),Ft=(0,l.f3)("whatsappAlert"),Jt=(0,n.iH)([]),Qt=(0,n.iH)({perPage:50,perPageValues:[50,100,200],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1,headings:{vendor:function(){return Zt.value?"Beneficiary":"Vendor"}}}),Wt=(0,n.iH)(!1),Zt=(0,l.Fl)((()=>"4"==a.params.group_id||"8"==a.params.group_id)),Gt=()=>{ua.value="",xa.value="",mt.value=!1,yt.value="",complete_transaction.value="",D.value=""},Kt=(0,l.f3)("showMessage"),Xt=(0,l.f3)("showError"),ea=(0,l.f3)("formatNumber"),ta=(0,l.f3)("tableShimmer"),aa=(0,l.f3)("formatDate"),la=(0,l.f3)("loadingSpinner"),na=(0,l.f3)("enforceMax"),ia=(0,n.iH)([]),sa=(0,n.iH)({}),ra=(0,n.iH)(""),oa=(0,n.iH)(""),ua=(0,n.iH)(""),da=(0,n.iH)(!1),ca=(0,n.iH)(null);let pa=null;const va=(0,n.iH)(!1),ma=async()=>{va.value=!0;try{const e=await b.get("deleted-approval-lists");Yt.value=e.data.map(((e,t)=>{let a=e.status;4!=e.last_checked_in?.status?.id&&14!=e.last_checked_in?.status?.id||(a={name:e.last_checked_in.status.name,color:e.last_checked_in.status.color});let l=e.awaiting_approval?.name||"no one";4!=e.last_checked_in?.status?.id&&14!=e.last_checked_in?.status?.id&&"approved"!==a.name&&"paid"!==a.name||(l="no one");let n=e.awaiting_approval?.role_id||null;return 4!=e.last_checked_in?.status?.id&&14!=e.last_checked_in?.status?.id||(n=null),{...e,status:a,Sno:t+1,purpose:e.approval_group,type:e.requisition_type??e?.source,approval:"0"+e.id,approval_id:e.id,requisition:e?.requisition_id??e?.source_id,requester:e.requester?.name??e?.requester,requester_id:e.requester?.id,awaits:l,awaiter_role_id:n,vendor:e.vendor&&e.vendor.name?e.vendor.name:e.beneficiary,vendor_data:e.vendor,date:aa(e.date),created_at:e.date,last_checked:aa(e.last_checked_in?.approved_at),last_checker_id:e?.last_checked_in?.role_id??"null",cost:e.items?ea(e.items.reduce(((e,t)=>e+(t?.quantity||0)*(t.requisition_items?.rate||0)),0)):0,approved_at:e.last_checked_in?.approved_at?new Date(e.last_checked_in.approved_at).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):null}})),Yt.value.sort(((e,t)=>{const a=Number(It.value),l=e.awaiter_role_id===a,n=t.awaiter_role_id===a;return l&&!n?-1:!l&&n?1:0}))}catch(e){Xt(e.message),console.error(e)}finally{va.value=!1}},_a=(0,l.Fl)((()=>(0,d.i)(Yt.value,t.value)));(0,l.YP)((()=>a.params.group_id),((e,t)=>{e!==t&&(Sa(),ma())}));const ga=(0,n.iH)(""),ba=(0,n.iH)(0),ya=(0,n.iH)(""),wa=(0,n.iH)(""),ha=(0,n.iH)(""),ka=(0,n.iH)(""),qa=(0,n.iH)(""),fa=e=>{Ja(e.id),qa.value=e,Jt.value=e.items.map(((e,t)=>({...e,order_item_id:e?.requisition_items?.id,Sno:t+1,item:e?.requisition_items?.remark,description:e?.requisition_items?.description+(e.description?" ( "+e.description+" )":""),rate:Number(e?.rate).toLocaleString()+"/=",total:(e?.quantity*e?.rate).toLocaleString()+"/=",selected:!1,rate_original:e?.rate,requesting_quantity:"",request_description:""}))),wa.value=e.awaits,ka.value=e.approval_description,ia.value=(e.roles_sequence||[]).slice(),ga.value=e.roles_sequence?.length>0?e.roles_sequence[e.roles_sequence.length-1].role_id:null,sa.value=e.awaiting_approval||{},ra.value=e.awaiting_approval?.role_id||null,oa.value=e.id,ya.value=e.date,ba.value=e,ha.value=e,da.value=!1},xa=(0,n.iH)(""),Da=async()=>{const e={subcontractor_agreement_id:ha.value.subcontractor_agreement_id,approval_group_id:a.params.group_id,status_id:D.value,approval_item_id:oa.value,role_id:It.value,remark:xa.value,last_role:ga.value,requisition_type:ba.value.requisition_type,project:ba.value,requisition_items:ba.value.items.map((e=>({source_id:e.requisition_items.item_id,cost:e.requisition_items.quantity*e.requisition_items.rate,description:e.requisition_items.description,remark:"From LPO NO : "+oa.value+" created on date "+ya.value,remarker_id:JSON.parse(localStorage.getItem("user")).id,remarker:JSON.parse(localStorage.getItem("user")).name}))),approval_items:Jt.value.map((e=>({id:e.id,quantity:Number(e.quantity),rate:Number(e.rate_original)})))};await b.post("approval-chains",e),ra.value="",xa.value="",D.value="",ma(),Kt("data saved successfully")},Ca=async()=>{try{Tt.value=!0,await Da(),da.value=!0,sa.value.role_id="",xa.value="",ua.value="",document.getElementById("close-approval-modal").click()}catch(e){Xt(e.message),console.error(e)}finally{Tt.value=!1,Ua.value=""}},Ha=(0,n.iH)(""),Sa=async()=>{Ha.value="";const e=await b.get(`approval-groups/${a.params.group_id}`);Ha.value=e.data},za=JSON.parse(localStorage.getItem("user")).role,Ua=(0,n.iH)(),Aa=e=>{($t.includes("can_edit_approval_items")&&It.value==sa.value.role_id&&"no one"!==wa.value||1==za)&&(Ua.value=e)},Ra=(0,n.iH)(""),Ma=(0,n.iH)(""),Na=(e,t)=>{Oa(),Ra.value=e,Ma.value=t},ja=(0,n.iH)([]),Oa=((0,n.iH)(""),async()=>{try{const e=await b.get("account-transaction-points");ja.value=e.data.map(((e,t)=>({...e,name:(e?.name??"")+" "+(e?.mobile_money?.name??"")+" "+(e?.mobile_money?.category??"CASH")})))}catch(e){Xt(e.message)}}),Va=e=>{Ta.value=e.target.files[0]},La=(0,n.iH)(""),Ea=async()=>{Tt.value=!0;const e=new FormData;e.append("registrar_id",Pt),e.append("approval_list_id",ha.value.id),e.append("date",La.value),Ta.value instanceof File&&e.append("attachment",Ta.value);try{const t=await b.post("purchase-order-receipts",e);Kt(t.data.message),Wa(ha.value.id)}catch(t){Xt(t.message),console.log(t)}finally{Tt.value=!1,Wt.value=!1}},$a=(0,n.iH)((new Date).toISOString().slice(0,10)),Ta=(0,n.iH)("");(0,l.YP)($a,(e=>{e&&ma()})),(0,l.YP)(ua,(e=>{e&&ma()}));const Pa=async()=>{try{const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const t=Yt.value.reduce(((e,t)=>{const a="string"===typeof t.cost?parseFloat(t.cost.replace(/,/g,"")):t.cost;return e+(isNaN(a)?0:a)}),0),l=`\n<!DOCTYPE html>\n<html>\n<head>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 20px; font-size: 8px; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .company-title { text-align: center; font-size: 9px; }\n  .company-title h1 { font-size: 14px; margin: 5px 0; }\n  .title { text-align: center; font-size: 12px; margin: 8px 0; font-weight: bold; }\n  table { width: 100%; border-collapse: collapse; margin-top: 8px; font-size: 9px; }\n  th, td { border: 1px solid #000; padding: 3px 4px; }\n  th { background-color: #f0f0f0; font-weight: bold; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  .badge { padding: 2px 5px; border-radius: 2px; font-size: 8px; display: inline-block; }\n  .badge-success { background-color: #28a745; color: white; }\n  .badge-warning { background-color: #ffc107; color: black; }\n  .badge-danger { background-color: #dc3545; color: white; }\n  .badge-info { background-color: #17a2b8; color: white; }\n  hr { border: 0; border-top: 1px solid #000; margin: 8px 0; }\n  @media print { \n    body { margin: 5mm; } \n    table { page-break-inside: auto; }\n    tr { page-break-inside: avoid; page-break-after: auto; }\n  }\n</style>\n</head>\n<body>\n\n<div class="company-title text-style">\n  <i>\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n\n<hr>\n\n<div class="title text-style">\n${"1"===a.params.group_id?"LOCAL PURCHASE ORDERS":"4"===a.params.group_id?"PAYMENT VOUCHERS":Ha.value?.group?.toUpperCase()||"APPROVAL"} REPORT\n</div>\n\n<hr>\n\n<table>\n  <thead>\n    <tr>\n      <th>S/No.</th>\n      <th>Order_no</th>\n      <th>Purpose</th>\n      <th>Type</th>\n      <th>Requester</th>\n      <th>Project</th>\n      <th>Status</th>\n      <th>Date</th>\n      <th>Awaits</th>\n      <th class="text-right">Cost</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${Yt.value.map(((e,t)=>`\n    <tr>\n      <td>${t+1}</td>\n      <td>${e.approval||"N/A"}</td>\n      <td>${e.purpose||"N/A"}</td>\n      <td>${e.type||"N/A"}</td>\n      <td>${e.requester||"N/A"}</td>\n      <td>${e.project||"N/A"}</td>\n      <td class="text-center">${e.status?.name||"N/A"}</span></td>\n      <td>${e.date||"N/A"}</td>\n      <td>${e.awaits||"N/A"}</td>\n      <td class="text-right">${e.cost||"0"}</td>\n    </tr>\n    `)).join("")}\n    <tr style="font-weight: bold;">\n      <td colspan="9" class="text-right"><strong>TOTAL:</strong></td>\n      <td class="text-right"><strong>${ea(t)}</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n<div style="margin-top: 15px; font-size: 7px;">\n  <p><strong>Report Generated:</strong> ${(new Date).toLocaleString()}</p>\n  <p><strong>Generated By:</strong> ${JSON.parse(localStorage.getItem("user")).name}</p>\n</div>\n\n</body>\n</html>\n`,n=e.contentWindow.document;n.open(),n.write(l),n.close(),e.onload=()=>{e.contentWindow.focus(),e.contentWindow.print(),setTimeout((()=>{document.body.removeChild(e)}),1e3)}}catch(e){Xt(`Failed to print report: ${e.message}`)}},Ia=(0,n.iH)(!1),Ba=()=>{window.innerWidth<991&&(Ia.value=!0)},Ya=async(e,t)=>{const a={status_id:t};Tt.value=!0;try{await b.put(`approval-lists/${e}`,a),Kt("Status Changed"),ma(),document.getElementById("close-approval-modal").click()}catch(l){Xt(l.message),console.log(l)}finally{Tt.value=!1}},Fa=((0,n.iH)(["Sno","ref_no","issuer","host","amount","direction","target_account","attachment","date"]),(0,n.iH)(["Sno","registrar","attachment","date"]),(0,n.iH)([])),Ja=async e=>{Fa.value=[];try{const t=await b.get(`account-transactions?approval_id=${e}`);Fa.value=t.data.map(((e,t)=>({...e,Sno:t+1,attachment:"https://bushman.ink/api/v1/../../"+e.attachment,amount:ea(e.amount),date:aa(e.date),ref_no:e.reference_number,issuer:e?.issuer?.name,target_account:(e?.transaction_point?.name??"")+" "+(e?.transaction_point?.mobile_money?.name??"")+" "+(e?.transaction_point?.mobile_money?.category??"CASH")})))}catch(t){Xt(t.message),console.log(t)}Wa(e)},Qa=(0,n.iH)([]),Wa=async e=>{Qa.value=[];try{const t=await b.get(`purchase-order-receipts?approval_id=${e}`);Qa.value=t.data.map(((e,t)=>({...e,Sno:t+1,attachment:"https://bushman.ink/api/v1/../../"+e.attachment,date:e.date,registrar:e?.registrar?.name})))}catch(t){Xt(t.message),console.log(t)}};return(0,l.bv)((()=>{JSON.parse(localStorage.getItem("user")).name;Ba(),Sa(),ma(),ca.value&&(pa=()=>{da.value=!1,Tt.value=!1},ca.value.addEventListener("hidden.bs.modal",pa))})),(0,l.Jd)((()=>{ca.value&&pa&&ca.value.removeEventListener("hidden.bs.modal",pa)})),(e,a)=>{const r=(0,l.up)("router-link"),o=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",p,[v,(0,l.Wm)(u.Z,{filterValue:t.value,"onUpdate:filterValue":a[0]||(a[0]=e=>t.value=e)},null,8,["filterValue"]),(0,l._)("div",m,[Ia.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("h3",_," DELETED ORDERS "))]),(0,l._)("div",g,[(0,l._)("button",{class:"btn btn-success",onClick:a[1]||(a[1]=e=>Pa())},y)]),(0,l._)("div",w,[va.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,n.SU)(ta)()},null,8,h)):((0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("div",q,[(0,l._)("div",f,[(0,l.Wm)(o,{data:(0,n.SU)(_a),columns:Bt.value,options:Qt.value},{status:(0,l.w5)((e=>[(0,l._)("span",{class:(0,i.C_)(["badge inv-status","badge-"+e.row.status.color])},(0,i.zw)(e.row.status.name),3)])),requisition:(0,l.w5)((e=>["Labour Request"===e.row.type?((0,l.wg)(),(0,l.j4)(r,{key:0,class:"text-primary",to:`/approval/${e.row.requisition}`,title:"Click to see requisition"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.row.requisition),1)])),_:2},1032,["to"])):((0,l.wg)(),(0,l.j4)(r,{key:1,class:"text-primary",to:`/requisition/${e.row.requisition}`,title:"Click to see requisition"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.row.requisition),1)])),_:2},1032,["to"]))])),actions:(0,l.w5)((e=>[(0,l._)("a",{onClick:t=>fa(e.row),"data-bs-toggle":"modal","data-bs-target":"#approval",href:"javascript:void(0);",class:"text-primary"},C,8,x)])),_:1},8,["data","columns","options"])])])]))])]),(0,l._)("div",{class:"modal fade mymodal",id:"approval",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"false",ref_key:"approvalModal",ref:ca},[(0,l._)("div",H,[(0,l._)("div",S,[(0,l._)("div",z,[U,(0,l._)("button",{type:"button","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close",class:"btn-close",onClick:a[2]||(a[2]=e=>Gt()),id:"close-approval-modal"})]),(0,l._)("div",A,[(0,l._)("div",R,[(0,l._)("div",M,[(0,l._)("table",N,[(0,l._)("thead",null,[(0,l._)("tr",null,[j,O,V,L,E,ha.value.project?((0,l.wg)(),(0,l.iD)("th",$,"Project")):(0,l.kq)("",!0),ha.value.vendor?((0,l.wg)(),(0,l.iD)("th",T,[ha.value?.type?.toLowerCase().includes("voucher")?((0,l.wg)(),(0,l.iD)("span",P," Beneficiary ")):((0,l.wg)(),(0,l.iD)("span",I," Vendor "))])):(0,l.kq)("",!0),B,Y,(0,n.SU)($t).includes("can_print_lpo")?((0,l.wg)(),(0,l.iD)("th",F,"Action")):(0,l.kq)("",!0)])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,(0,i.zw)(ha.value?.approval),1),(0,l._)("td",null,(0,i.zw)(ha.value.requester),1),(0,l._)("td",null,(0,i.zw)(ha.value?.date),1),(0,l._)("td",null,(0,i.zw)(ha.value?.type),1),(0,l._)("td",null,(0,i.zw)(ha.value?.purpose),1),ha.value.project?((0,l.wg)(),(0,l.iD)("td",J,(0,i.zw)(ha.value.project),1)):(0,l.kq)("",!0),ha.value.vendor?((0,l.wg)(),(0,l.iD)("td",Q,(0,i.zw)(ha.value.vendor),1)):(0,l.kq)("",!0),(0,l._)("td",null,(0,i.zw)(ha.value?.awaits),1),(0,l._)("td",null,(0,i.zw)(ha.value?.cost),1),(0,l._)("td",null,["Labour Request"===ha.value.purpose&&(0,n.SU)($t).includes("can_create_labour_voucher")?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:a[3]||(a[3]=e=>_t()),class:"btn btn-outline-primary"},"Create Voucher")):(0,l.kq)("",!0),"Labour Request"===ha.value.purpose?((0,l.wg)(),(0,l.j4)(r,{key:1,to:`/report/labour-payments/${ha.value.id}`,class:"text-primary"},{default:(0,l.w5)((()=>[W])),_:1},8,["to"])):(0,l.kq)("",!0)])]),ha.value.description?((0,l.wg)(),(0,l.iD)("tr",Z,[(0,l._)("td",G,[K,(0,l.Uk)(" "+(0,i.zw)(ha.value.description)+" ",1),ka.value?((0,l.wg)(),(0,l.iD)("span",X," ( "+(0,i.zw)(ka.value)+" )",1)):(0,l.kq)("",!0)])])):(0,l.kq)("",!0),ha.value.remark?((0,l.wg)(),(0,l.iD)("tr",ee,[(0,l._)("td",te,[ae,(0,l.Uk)(" "+(0,i.zw)(ha.value.remark),1)])])):(0,l.kq)("",!0)])])])])]),e.complete_transaction?((0,l.wg)(),(0,l.iD)("form",{key:0,onSubmit:a[5]||(a[5]=(0,s.iM)((t=>e.completeTransaction(ha.value.id)),["prevent"]))},[(0,l._)("div",le,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Any remark ","onUpdate:modelValue":a[4]||(a[4]=e=>xa.value=e)},null,512),[[s.nr,xa.value]]),(0,l._)("button",{class:"btn btn-primary me-2",type:"submit",disabled:va.value},[va.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,n.SU)(la)()},null,8,ie)):((0,l.wg)(),(0,l.iD)("span",se,"Save"))],8,ne)])],32)):(0,l.kq)("",!0),(0,l._)("div",re,[(0,l._)("div",oe,[(0,l._)("div",ue,[(0,n.SU)($t).includes("is_programmer")&&"paid"===ha.value.status?.name?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-secondary me-2",onClick:a[6]||(a[6]=e=>Ya(ha.value.id,3)),disabled:Tt.value}," Mark Approved ",8,de)):(0,l.kq)("",!0),(0,n.SU)($t).includes("can_complete_transaction")&&"paid"===ha.value.status?.name?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn btn-success",onClick:a[7]||(a[7]=e=>Wt.value=!Wt.value),disabled:Tt.value}," Attach Receipt ",8,ce)):(0,l.kq)("",!0)]),Wt.value?((0,l.wg)(),(0,l.iD)("div",pe,[(0,l._)("input",{class:"form-control w-25",type:"file",onChange:Va,accept:"application/pdf",required:""},null,32),(0,l.wy)((0,l._)("input",{type:"date","onUpdate:modelValue":a[8]||(a[8]=e=>La.value=e),class:"form-control w-25"},null,512),[[s.nr,La.value]]),(0,l._)("button",{class:"btn btn-primary",onClick:Ea,disabled:Tt.value},[Tt.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,n.SU)(la)()},null,8,me)):((0,l.wg)(),(0,l.iD)("span",_e,"Submit"))],8,ve)])):(0,l.kq)("",!0)]),It.value==sa.value.role_id&&"no one"!==wa.value||(0,n.SU)($t).includes("is_md")&&"paid"!==ha.value.status?.name||It.value==ha.value.last_checker_id&&"no one"===wa.value?((0,l.wg)(),(0,l.iD)("div",ge,[(0,l._)("div",be,[(0,n.SU)($t).includes("is_md")||(0,n.SU)($t).includes("is_programmer")?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-secondary me-2",onClick:a[9]||(a[9]=e=>Ya(ha.value.id,2)),disabled:Tt.value}," Unapprove ",8,ye)):(0,l.kq)("",!0),(0,l._)("button",{class:"btn btn-primary me-2",onClick:a[10]||(a[10]=e=>D.value=3),disabled:Tt.value}," Check ",8,we),(0,l._)("button",{class:"btn btn-danger me-2",onClick:a[11]||(a[11]=e=>D.value=4),disabled:Tt.value}," Reject ",8,he),(0,l._)("button",{class:"btn btn-info me-2",onClick:a[12]||(a[12]=e=>D.value=14),disabled:Tt.value}," Remark ",8,ke),(0,l._)("button",{class:"btn btn-warning",onClick:a[13]||(a[13]=e=>D.value=17),disabled:Tt.value}," On Hold ",8,qe)])])):(0,l.kq)("",!0),D.value?((0,l.wg)(),(0,l.iD)("div",fe,[(0,l._)("span",{class:(0,i.C_)(["badge rounded-pill",{"bg-danger":4==D.value,"bg-success":3==D.value,"bg-info":14==D.value,"bg-warning":17==D.value}]),style:{"font-size":"1rem"}},(0,i.zw)(3==D.value?"Check / Approve Request":4==D.value?"Reject Request":"Fill Remark"),3)])):(0,l.kq)("",!0),D.value?((0,l.wg)(),(0,l.iD)("div",xe,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:3==D.value?"Enter Approval Remark":4==D.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":a[14]||(a[14]=e=>xa.value=e)},null,8,De),[[s.nr,xa.value]]),(0,l._)("button",{onClick:a[15]||(a[15]=e=>Ca()),class:"btn btn-primary me-2",type:"button",disabled:Tt.value},[Tt.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,n.SU)(la)()},null,8,He)):((0,l.wg)(),(0,l.iD)("span",Se,"Save"))],8,Ce)])):(0,l.kq)("",!0),(0,l._)("div",ze,[(0,l._)("table",Ue,[(0,l._)("thead",null,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ia.value,(e=>((0,l.wg)(),(0,l.iD)("th",{key:e.role_id||e.position||e.name},[(0,l.Uk)((0,i.zw)(e.name)+" ",1),Ae])))),128))])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ia.value,((e,t)=>((0,l.wg)(),(0,l.iD)("td",{key:e.role_id||e.position||t,class:(0,i.C_)(e?.status?.color?"text-"+e.status.color:"text-danger")},[(0,l._)("span",null,(0,i.zw)(e?.status?.name??"Unchecked"),1),Re,e.approved_at?((0,l.wg)(),(0,l.iD)("span",Me,"Checked At :"+(0,i.zw)((0,n.SU)(aa)(e.approved_at)),1)):(0,l.kq)("",!0),Ne,je,e.remark?((0,l.wg)(),(0,l.iD)("span",Oe,"Remark : "+(0,i.zw)(e.remark),1)):(0,l.kq)("",!0)],2)))),128))])])])]),Ve,(0,l._)("div",Le,[mt.value?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"text",class:"form-control",style:{"max-width":"350px","font-size":"1rem"},placeholder:"Enter Brief Description ","onUpdate:modelValue":a[16]||(a[16]=e=>St.value=e)},null,512)),[[s.nr,St.value]]):(0,l.kq)("",!0)]),(0,l._)("div",Ee,[(0,l._)("div",$e,[(0,l._)("div",Te,[(0,l._)("table",Pe,[(0,l._)("thead",null,[(0,l._)("tr",null,[Ie,Be,Ye,Fe,Je,Qe,We,mt.value?((0,l.wg)(),(0,l.iD)("th",Ze,"select")):(0,l.kq)("",!0),Ge])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Jt.value,(t=>((0,l.wg)(),(0,l.iD)("tr",null,[(0,l._)("td",null,(0,i.zw)(t.order_item_id),1),(0,l._)("td",null,(0,i.zw)(t.item),1),(0,l._)("td",null,["budget"!==ha.value.requisition_type||t.requisition_items.asset_id?((0,l.wg)(),(0,l.iD)("span",Ke,[t.selected?((0,l.wg)(),(0,l.iD)("span",Xe,(0,i.zw)(t.description)+" ( "+(0,i.zw)(t.request_description)+" ) ",1)):((0,l.wg)(),(0,l.iD)("span",et,(0,i.zw)(t.description),1))])):((0,l.wg)(),(0,l.j4)(r,{key:0,class:"btn btn-outline-primary",to:`/requisition-budget/${t.requisition_items.item_id}`},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t.description),1)])),_:2},1032,["to"]))]),(0,l._)("td",{onClick:e=>Aa(t.id)},[(0,l.Uk)((0,i.zw)(t.quantity)+" ",1),t?.requested_sum?((0,l.wg)(),(0,l.iD)("span",at,[lt,(0,l.Uk)(" Requested : "+(0,i.zw)(t?.requested_sum)+" ",1),nt,(0,l.Uk)(" Balance :"+(0,i.zw)((t.quantity-t?.requested_sum).toFixed(2)),1)])):(0,l.kq)("",!0),t.selected?((0,l.wg)(),(0,l.iD)("span",it,[st,(0,l.Uk)("Requesting : "+(0,i.zw)(t.requesting_quantity),1)])):(0,l.kq)("",!0),Ua.value==t.id?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:2,type:"number",class:"form-control",placeholder:"Quantity",step:"any","onUpdate:modelValue":e=>t.quantity=e},null,8,rt)),[[s.nr,t.quantity]]):(0,l.kq)("",!0)],8,tt),(0,l._)("td",{onClick:e=>Aa(t.id)},[(0,l.Uk)((0,i.zw)(t.rate)+" ",1),Ua.value==t.id?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number",class:"form-control",placeholder:"Quantity",step:"any","onUpdate:modelValue":e=>t.rate_original=e},null,8,ut)),[[s.nr,t.rate_original]]):(0,l.kq)("",!0)],8,ot),(0,l._)("td",null,[(0,l._)("span",null,[(0,l.Uk)((0,i.zw)((0,n.SU)(ea)(t.quantity*t.rate_original)),1),dt]),t.selected?((0,l.wg)(),(0,l.iD)("span",ct," Requesting : "+(0,i.zw)((0,n.SU)(ea)(t.requesting_quantity*t.rate_original)),1)):(0,l.kq)("",!0)]),(0,l._)("td",null,(0,i.zw)(t.receiver??t.beneficiary),1),mt.value?((0,l.wg)(),(0,l.iD)("td",pt,[t.selected?((0,l.wg)(),(0,l.iD)("svg",{key:0,onClick:e=>t.selected=!t.selected,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-check2-circle",viewBox:"0 0 16 16"},gt,8,vt)):((0,l.wg)(),(0,l.iD)("svg",{key:1,onClick:e=>t.selected=!t.selected,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-circle",viewBox:"0 0 16 16"},wt,8,bt)),t.selected?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:2,type:"number",placeholder:"enter quantity",class:"form-control w-75",step:"any","onUpdate:modelValue":e=>t.requesting_quantity=e,onInput:e=>t.requesting_quantity=(0,n.SU)(na)(t.requesting_quantity,(t.quantity-t?.requested_sum).toFixed(2))},null,40,ht)),[[s.nr,t.requesting_quantity]]):(0,l.kq)("",!0),t.selected?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:3,type:"text",placeholder:"enter Description",class:"form-control w-75 mt-1","onUpdate:modelValue":e=>t.request_description=e},null,8,kt)),[[s.nr,t.request_description]]):(0,l.kq)("",!0),t.selected?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:4,type:"text",placeholder:"enter Beneficiary",class:"form-control w-75 mt-1","onUpdate:modelValue":e=>t.receiver=e},null,8,qt)),[[s.nr,t.receiver]]):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l._)("td",null,[t.requisition_items.asset_id?((0,l.wg)(),(0,l.j4)(r,{key:0,to:`/assets/fuel-statement/${t.requisition_items.asset_id}`,class:"me-2"},{default:(0,l.w5)((()=>[ft])),_:2},1032,["to"])):(0,l.kq)("",!0),"budget"===ha.value.requisition_type?((0,l.wg)(),(0,l.j4)(r,{key:1,to:`/requisition-budget/${t.requisition_items.item_id}`},{default:(0,l.w5)((()=>[xt])),_:2},1032,["to"])):(0,l.kq)("",!0),"jobcard"===ha.value.requisition_type?((0,l.wg)(),(0,l.j4)(r,{key:2,to:`/jobcard/${ha.value.source_id}/${t.requisition_items.asset_id}`,class:"me-2"},{default:(0,l.w5)((()=>[Dt])),_:2},1032,["to"])):(0,l.kq)("",!0),qa.value.subcontractor_agreement_id?((0,l.wg)(),(0,l.j4)(r,{key:3,to:`/subcontractor/${qa.value.subcontractor_agreement_id}`},{default:(0,l.w5)((()=>[Ct])),_:1},8,["to"])):(0,l.kq)("",!0),!(0,n.SU)($t).includes("can_print_lpo")||"approved"!==ha.value.status.name&&"paid"!==ha.value.status.name?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:4,class:"btn btn-outline-success me-2",onClick:a=>e.printOrder(t,ha.value)},zt,8,Ht)),"approved"===ha.value.status?.name&&(0,n.SU)($t).includes("can_complete_transaction")?((0,l.wg)(),(0,l.iD)("button",{key:5,class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#payment-proof",onClick:e=>Na(t,ha.value)},"Paid",8,Ut)):(0,l.kq)("",!0)])])))),256))])])])])]),ha.value?.items?.[0]?.requisition_items?.requisition_type?.requisition?.attachment?((0,l.wg)(),(0,l.iD)("div",At,[Rt,(0,l._)("a",{href:`https://bushman.ink/${ha.value.items[0].requisition_items.requisition_type.requisition.attachment}`,target:"_blank",style:{display:"block"}},[(0,l._)("iframe",{src:`https://bushman.ink/${ha.value.items[0].requisition_items.requisition_type.requisition.attachment}`,width:"100%",height:"1000",style:{border:"none","pointer-events":"none"}},null,8,Nt)],8,Mt)])):(0,l.kq)("",!0)]),(0,l._)("div",jt,[(0,l._)("button",{type:"button",class:"btn btn-primary","data-dismiss":"modal","data-bs-dismiss":"modal",onClick:a[17]||(a[17]=e=>Gt())},"close"),mt.value?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-success",onClick:a[18]||(a[18]=e=>Et()),disabled:va.value},[va.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,n.SU)(la)()},null,8,Vt)):((0,l.wg)(),(0,l.iD)("span",Lt,"Submit"))],8,Ot)):(0,l.kq)("",!0)])])])],512)],64)}}};const $t=Et;var Tt=$t}}]);
//# sourceMappingURL=8166.9b2724f7.js.map