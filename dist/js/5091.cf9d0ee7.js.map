{"version":3,"file":"js/5091.cf9d0ee7.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/users.vue","webpack://cork-vue3/./src/views/masters/users.vue?9aec"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Users</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n                            <button class=\"btn btn-primary \" @click=\"item_registration =! item_registration\">                           \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n  <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>  \r\n                    \r\n         \r\n       \r\n <!-- item registration form starts -->\r\n <form v-if=\"item_registration\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerUser()\">\r\n        <h4 class=\"text-center\">USER REGISTRATION FORM</h4>\r\n        <div class=\"row mb-2\">\r\n    \r\n            <div class=\"col-md-2\">\r\n                <label class=\"form-label\">User Name</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter User Name\" v-model=\"username\" required>\r\n            </div>\r\n\r\n            <div class=\"col-md-2\">\r\n                <label class=\"form-label\" >User Role</label>\r\n    <multiselect \r\n                v-model=\"user_role\"\r\n                :options= \"roles\"\r\n                placeholder=\"select role\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n            </div>\r\n\r\n            <div class=\"col-md-3\">\r\n                <label class=\"form-label\">Email</label>\r\n                <input type=\"email\" class=\"form-control\" placeholder=\"Enter Email\" v-model=\"useremail\" step=\"any\" required>\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n                <label class=\"form-label\">Phone Number</label>\r\n                <input type=\"number\" class=\"form-control\" placeholder=\"Enter Phone Number\" v-model=\"phone_no\" step=\"any\" required>\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <label class=\"form-label\">Password</label>\r\n                <input type=\"password\" class=\"form-control\" placeholder=\"Enter Password\" v-model=\"password\" step=\"any\" required>\r\n            </div>\r\n        </div>\r\n        <div class=\"text-center gap-2 justify-content-end\">\r\n            <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"item_registration = false; closeEditModal()\">Cancel</button>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n        </div>\r\n    </form>\r\n             <!-- item registration form ends-->\r\n    \r\n\r\n\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n                        <v-client-table v-else :data=\"items\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n\r\n  <a  href=\"javascript:void(0)\" class=\"text-success\" title=\"Edit\" \r\n     @click=\"openEditModal(props.row)\" data-bs-toggle=\"modal\" \r\n     :data-bs-target=\"'#edit-user-modal'\">\r\n   <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-primary\"\r\n                                    >\r\n                                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                    </svg>\r\n  </a>\r\n\r\n</template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- user editing modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"edit-user-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editUserModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editUserModalLabel\">Edit User</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close_editing\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n   <form @submit.prevent=\"updateUser(selectedId)\">\r\n  <div class=\"modal-body\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <label class=\"form-label\">User Name</label>\r\n        <input type=\"text\" class=\"form-control\" v-model=\"username\" >\r\n      </div>\r\n      <div class=\"col-md-6\">\r\n        <label class=\"form-label\">Email</label>\r\n        <input type=\"text\" class=\"form-control bg-white\" v-model=\"useremail\">\r\n      </div>\r\n\r\n      <div class=\"col-md-6\">\r\n        <label class=\"form-label\">Phone Number</label>\r\n        <input type=\"text\" class=\"form-control bg-white\" v-model=\"phone_no\">\r\n      </div>\r\n      \r\n      <div class=\"col-md-6\">\r\n        <label class=\"form-label\">User Role</label>\r\n        <Multiselect\r\n          v-model=\"user_role\"\r\n          :options=\"roles\"\r\n          :close-on-select=\"true\"\r\n          label=\"name\"\r\n          value-prop=\"id\"\r\n          placeholder=\"Select a role\"\r\n          :searchable=\"true\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"col-md-6\">\r\n        <label class=\"form-check-label\">\r\n          <input type=\"checkbox\" v-model=\"updatePassword\" class=\"form-check-input\"> Update Password\r\n        </label>\r\n      </div>\r\n\r\n      <div class=\"col-md-6\" v-if=\"updatePassword\">\r\n        <label class=\"form-label\">New Password</label>\r\n        <input type=\"password\" v-model=\"password\" class=\"form-control\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" id=\"close_editing\">Close</button>\r\n    <button type=\"submit\" class=\"btn btn-secondary\" :disabled=\"loading\">\r\n      <span v-if=\"loading\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n      <span v-else>Save changes</span>\r\n    </button>\r\n  </div>\r\n</form>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n        <!-- user editing modal ends -->\r\n\r\n  \r\n    </div>\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\n     import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    \r\n    const updatePassword = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const tableShimmer = inject('tableShimmer');\r\n    const name = ref('');\r\n    const loading_spinner = ref(false);\r\n    const username = ref('');\r\n    const useremail = ref('');\r\n    const phone_no = ref('');\r\n    const password = ref('');\r\n    const user_role = ref('');\r\n    const selectedId = ref('');\r\n    const phone = ref('');\r\n    const roles = ref([]);\r\n    const columns = ref(['Sn','User_ID','Role','Username','Email','phone_no','actions']);\r\n    const items = ref([\r\n        \r\n    ]);\r\n    const item_registration = ref(false);\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [ 10, 20, 50],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['Sn','User ID' ],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n    // api base user creation for sample \r\n \r\n   \r\n    \r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n\r\n    const getRoles = () => {\r\n        loading_spinner.value = true;\r\n         axiosInstance.get('/roles').\r\n         then((response) => {\r\n            roles.value= response.data;\r\n            console.log(\"user roles\",response.data);\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n\r\n\r\n    const getUsers = () => {\r\n        loading_spinner.value = true;\r\n         axiosInstance.get('/users').\r\n         then((response) => {\r\n            items.value = response.data.map((item, index) => ({\r\n                ...item,\r\n                Sn: index + 1,\r\n                Role: item.role,\r\n                User_ID: item.id,\r\n                Username: item.name,\r\n                Email: item.email,\r\n                phone_no: item.phone_no,\r\n                \r\n            }));\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n    //method fro register users\r\n    const registerUser= () => {\r\n       \r\n    if (!username.value || !useremail.value) {\r\n    showError(\"Please!..Provide username and email.\");\r\n    return;\r\n   }\r\n\r\n   if (!password.value) {\r\n    showError(\"User must have password...\");\r\n    return;\r\n   }\r\n   item_registration.value = false;\r\n   loading_spinner.value = true;\r\n   const itemData = {\r\n            name:username.value,\r\n            email:useremail.value,\r\n            role:user_role.value.id, \r\n            password:password.value,\r\n            phone_no:phone_no.value,\r\n           \r\n        };\r\n       console.log(itemData);\r\n        axiosInstance\r\n            .post('/users', itemData)\r\n            .then((response) => {\r\n                getUsers();\r\n                loading_spinner.value = false;\r\n                showMessage('User registered successfully!');\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error registering User:\", error);\r\n                showError(error.message);\r\n                \r\n            });\r\n            loading_spinner.value = false;\r\n    };\r\n\r\n\r\n    const loading = ref(false);\r\n    //for editing the user details\r\n    const updateUser = (id) => {\r\n        loading.value = true; \r\n        const newItemData = {\r\n            role: user_role.value.id, \r\n            name: username.value,\r\n            email: useremail.value,\r\n            phone_no: phone_no.value,\r\n            ...(password.value && { password: password.value }),\r\n        };\r\n\r\n        axiosInstance\r\n            .put(`/users/${id}`, newItemData)\r\n            .then((response) => {\r\n                getUsers();\r\n                document.getElementById('close_editing').click();\r\n                showMessage('User updated successfully!');\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                console.log(error);\r\n            })\r\n            .finally(() => {\r\n                loading.value = false; \r\n            });\r\n    };\r\n\r\n       const openEditModal = (row) => {\r\n        // Convert role string to number and find matching role object\r\n        const roleId = parseInt(row.role);\r\n        user_role.value = roles.value.find(r => r.id === roleId) || '';\r\n        \r\n        password.value = '';\r\n        username.value = row.name;\r\n        useremail.value = row.email;\r\n        phone_no.value = row.phone_no;\r\n        selectedId.value = row.id;\r\n    };\r\n\r\n       const closeEditModal = () => {\r\n        user_role.value='',\r\n        password.value='',\r\n        username.value='',\r\n        useremail.value='',\r\n        phone_no.value='',\r\n        phone_no.value=''\r\n    };\r\n\r\n\r\n    onMounted(() => {\r\n        getUsers();\r\n        getRoles();\r\n    });\r\n</script>\r\n","import script from \"./users.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./users.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./users.vue?vue&type=style&index=0&id=a44812f6&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","updatePassword","ref","showMessage","inject","showError","tableShimmer","loading_spinner","username","useremail","phone_no","password","user_role","selectedId","roles","columns","items","item_registration","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","getRoles","value","get","then","response","data","console","log","getUsers","map","item","index","Sn","Role","role","User_ID","id","Username","name","Email","email","registerUser","itemData","post","catch","error","message","loading","updateUser","newItemData","put","document","getElementById","click","finally","openEditModal","row","roleId","parseInt","find","r","closeEditModal","onMounted","__exports__"],"sourceRoot":""}