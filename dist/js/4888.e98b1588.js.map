{"version":3,"file":"js/4888.e98b1588.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/globalSearch.js","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue?f760","webpack://cork-vue3/./src/views/accounts/ledger.vue","webpack://cork-vue3/./src/views/accounts/ledger.vue?ff31"],"sourcesContent":["export function globalSearch(data, keyword) {\r\n  const lowerKeyword = keyword.toLowerCase().trim()\r\n  if (!lowerKeyword) return data\r\n\r\n  const containsKeyword = obj => {\r\n    if (obj == null) return false\r\n    if (typeof obj === 'string') return obj.toLowerCase().includes(lowerKeyword)\r\n    if (Array.isArray(obj)) return obj.some(containsKeyword)\r\n    if (typeof obj === 'object')\r\n      return Object.values(obj).some(containsKeyword)\r\n    return false\r\n  }\r\n\r\n  return data.filter(item => containsKeyword(item))\r\n}","<template>\r\n     <form @submit.prevent class=\"input-group container\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control border-end-0\"\r\n      placeholder=\"Search a word...\"\r\n      v-model=\"filter\"\r\n    >\r\n    <span class=\"input-group-text bg-white border-start-0\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z\"/>\r\n      </svg>\r\n    </span>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\n\r\n\r\nconst emit = defineEmits(['update:filterValue'])\r\nconst props = defineProps({\r\n  filterValue: String\r\n})\r\nconst filter = ref(props.filterValue || null)\r\n\r\nwatch(filter, val => emit('update:filterValue', val))\r\n</script>\r\n","import script from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Account Ledger</span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <h3 class=\"mb-3 text-center text-uppercase\">{{ selected_account?.name ? (selected_account.name + ' - ' + (selected_account?.mobile_money?.name ?? 'CASH')) : '' }} Account Ledger</h3>\r\n            </div>\r\n        </div>\r\n         \r\n        <!-- offcanvas start -->\r\n        <div class=\"offcanvas offcanvas-end\" data-bs-scroll=\"true\" tabindex=\"-1\" id=\"offcanvasWithBothOptions\" aria-labelledby=\"offcanvasWithBothOptionsLabel\">\r\n            <div class=\"offcanvas-header justify-content-between\">\r\n                <h5 class=\"offcanvas-title\" id=\"offcanvasWithBothOptionsLabel\">ACCOUNTS LISTS</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div v-if=\"isloading\" v-html=\"waitIndicator()\"></div>\r\n            <div v-else class=\"offcanvas-body\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <!-- Search input for accounts -->\r\n                        <div class=\"mb-3 d-flex gap-2 align-items-center\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <global-search-field\r\n                                    v-model:filterValue=\"accountsFilter\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div class=\"list-group text-center\" id=\"list-tab\" role=\"tablist\">\r\n                            <a \r\n                                v-for=\"account in filteredaccounts\" \r\n                                :key=\"account.id\" \r\n                                @click=\"selectAccount(account)\"\r\n                                class=\"list-group-item list-group-item-action\" \r\n                                :class=\"{ 'active': selected_account_id === account.id }\"\r\n                                data-bs-dismiss=\"offcanvas\"\r\n                                href=\"javascript:void(0);\"\r\n                            >\r\n                                {{ account.name }} - {{ account?.mobile_money?.name ?? 'CASH' }}\r\n                            </a>\r\n                        </div>\r\n                        \r\n                        <!-- Show message when no accounts match search -->\r\n                        <div v-if=\"filteredaccounts.length === 0 && accountsFilter\" class=\"text-center mt-3 text-muted\">\r\n                            No accounts found matching \"{{ accountsFilter }}\"\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- offcanvas ends -->\r\n  \r\n        <div class=\"d-flex justify-content-end mb-3\">\r\n          \r\n                                      <button class=\"btn btn-success me-2 \" v-if =\"selected_account_id\" @click=\"printAccountLedger()\" >                           \r\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n  <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n</svg>\r\n                             </button>\r\n            <button class=\"btn\" v-if=\"mobileView\"  data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-list-ul\" viewBox=\"0 0 16 16\">\r\n                    <path fill-rule=\"evenodd\" d=\"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2\"/>\r\n                </svg>\r\n            </button>\r\n            \r\n            <button v-else class=\"btn btn-outline-primary\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\">Select Account from the lists</button>\r\n        </div>\r\n\r\n        <div v-if=\"!selected_account_id\" class=\"text-center my-3 text-muted\" style=\"font-size: 1.1rem;\">\r\n            Please select account from the list to view its details\r\n        </div>\r\n\r\n         \r\n        <div v-if=\"selected_account\">\r\n            <div v-if=\"loadingPayments\" v-html=\"tableShimmer()\"></div>    \r\n            <div v-else class=\"row layout-top-spacing\">            \r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table\">\r\n                        <v-client-table :data=\"payments\" :columns=\"columns\" :options=\"table_option\">\r\n                            <template #actions=\"props\">\r\n                                <div class=\"actions text-center\">\r\n                                    <a href=\"javascript:;\" \r\n                                       data-bs-toggle=\"modal\" \r\n                                       data-bs-target=\"#attachment\"\r\n                                       @click=\"fillTransaction(props.row)\"\r\n                                       title=\"View Attachment\"\r\n                                       v-if=\"props.row.proof\">\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-file-earmark-pdf text-primary\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z\"/>\r\n  <path d=\"M4.603 14.087a.8.8 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.7 7.7 0 0 1 1.482-.645 20 20 0 0 0 1.062-2.227 7.3 7.3 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a11 11 0 0 0 .98 1.686 5.8 5.8 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.86.86 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.7 5.7 0 0 1-.911-.95 11.7 11.7 0 0 0-1.997.406 11.3 11.3 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.8.8 0 0 1-.58.029m1.379-1.901q-.25.115-.459.238c-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361q.016.032.026.044l.035-.012c.137-.056.355-.235.635-.572a8 8 0 0 0 .45-.606m1.64-1.33a13 13 0 0 1 1.01-.193 12 12 0 0 1-.51-.858 21 21 0 0 1-.5 1.05zm2.446.45q.226.245.435.41c.24.19.407.253.498.256a.1.1 0 0 0 .07-.015.3.3 0 0 0 .094-.125.44.44 0 0 0 .059-.2.1.1 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a4 4 0 0 0-.612-.053zM8.078 7.8a7 7 0 0 0 .2-.828q.046-.282.038-.465a.6.6 0 0 0-.032-.198.5.5 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822q.036.167.09.346z\"/>\r\n</svg>\r\n                                    </a>\r\n                                </div>                                 \r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n<!-- attachment modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"attachment\"\r\n     data-bs-backdrop=\"false\"\r\n     data-bs-keyboard=\"false\"\r\n     tabindex=\"-1\">\r\n\r\n  <div class=\"modal-dialog modal-fullscreen\">\r\n    <div class=\"modal-content h-100\">\r\n\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\">PROOF OF PAYMENT ATTACHMENT FOR : {{ transaction?.reference_number }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n      </div>\r\n\r\n      <!-- IMPORTANT -->\r\n      <div class=\"modal-body p-0 flex-grow-1\">\r\n        <iframe\r\n          :src=\"transaction.attachment\"\r\n          class=\"w-100 h-100 border-0\"\r\n        ></iframe>\r\n      </div>\r\n\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\"\r\n                class=\"btn btn-danger btn-sm\"\r\n                data-bs-dismiss=\"modal\">\r\n          Close\r\n        </button>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject, computed, watch } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import globalSearchField from '@/components/reusables/globalSearchField.vue';\r\n    import { globalSearch } from '@/components/reusables/globalSearch';\r\n    const waitIndicator = inject('waitIndicator');\r\n    \r\n    useMeta({ title: 'accounts' });  \r\n    \r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    const formatDate = inject('formatDate');\r\n    const formatNumber = inject('formatNumber')    \r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingSpinner = inject('loadingSpinner'); \r\n    \r\n    const loading_spinner = ref(false);    \r\n    const isloading = ref(false);\r\n    const accounts = ref([]);\r\n    const columns = ref(['Sno','ref_no','issuer','host','Debit','Credit','date','actions']);    \r\n    const selected_account = ref(null);\r\n    const selected_account_id = ref(null);\r\n    \r\n    const accountsFilter = ref('');\r\n    const mobileView = ref(window.innerWidth < 768);\r\n\r\n     const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['Sno','reference_number','issuer','host','amount','source_account','date'],        \r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n  \r\n\r\n    // Handle window resize for mobile view\r\n    window.addEventListener('resize', () => {\r\n        mobileView.value = window.innerWidth < 768;\r\n    });\r\n\r\n    const filteredaccounts = computed(() => {\r\n        return globalSearch(accounts.value, accountsFilter.value);\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const getAccounts = async () => {\r\n        isloading.value = true;\r\n        try {\r\n            const response = await axiosInstance.get('account-transaction-points');\r\n            accounts.value = response.data;\r\n        } catch (error) {\r\n          console.log(error)\r\n            showError(error.message);\r\n        } finally {\r\n            isloading.value = false;\r\n        }\r\n    };\r\n\r\n  const selectAccount = (account) => {\r\n    selected_account.value = account;\r\n    selected_account_id.value = account.id;\r\n};\r\n    watch(selected_account_id, async (newId, oldId) => {\r\n    if (newId && newId !== oldId) {\r\n        await getAccountPayments(newId);\r\n    }\r\n});\r\n\r\nconst loadingPayments = ref(false);\r\n    const payments = ref([])\r\n    const getAccountPayments = async(accountId = null) => {\r\n        loadingPayments.value = true;\r\n        const id = accountId || selected_account_id.value;\r\n        if (!id) {\r\n            loadingPayments.value = false;\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            const response = await axiosInstance.get(`account-transactions?account_transaction_point_id=${id}`);\r\n            payments.value = response.data.map((item, index) => ({\r\n                ...item,\r\n                Sno: index + 1,\r\n                attachment: process.env.VUE_APP_API_BASE_URL + '../../' + item.attachment,\r\n                Debit: item.direction === 'INCREMENT' ? formatNumber(item.amount) : '--',\r\n                Credit: item.direction === 'DECREMENT' ? formatNumber(item.amount) : '--',\r\n                issuer: item.issuer.name,\r\n                proof: item.attachment,                \r\n                ref_no: item.reference_number,                \r\n                host: item.host,\r\n                date: formatDate(item.date),\r\n                source_account: (item?.transaction_point?.name ?? '') + ' ' +\r\n                    (item?.transaction_point?.mobile_money?.name ?? '') + ' ' +\r\n                    (item?.transaction_point?.mobile_money?.category ?? 'CASH')\r\n            }));\r\n        } catch (error) {\r\n            showError(error.message);\r\n            console.log(error);\r\n        } finally {\r\n            loadingPayments.value = false;\r\n        }        \r\n    };\r\n\r\n    const transaction = ref('')\r\n    const fillTransaction = (trans)=>{\r\n       transaction.value = trans\r\n    }\r\n \r\n\r\n const printAccountLedger = async () => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    // Calculate running balance\r\n    let runningBalance = 0;\r\n    const paymentsWithBalance = payments.value.map((payment) => {\r\n      const debitAmount = payment.direction === 'INCREMENT' ? parseFloat(payment.amount) : 0;\r\n      const creditAmount = payment.direction === 'DECREMENT' ? parseFloat(payment.amount) : 0;\r\n      runningBalance += debitAmount - creditAmount;\r\n      return {\r\n        ...payment,\r\n        balance: runningBalance\r\n      };\r\n    });\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Account Ledger Report</title>\r\n<style>\r\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\r\n  .text-style { font-family: 'Courier New', monospace; }\r\n  .company-title { text-align: center; }\r\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\r\n  .account-info { text-align: center; font-size: 16px; margin: 10px 0; font-weight: bold; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\r\n  th, td { border: 0.5px solid #000; padding: 6px; }\r\n  th { background-color: #f8f8f8; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\r\n  @media print { body { margin: 10mm; } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"company-title text-style\">\r\n  <i>\r\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\r\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\r\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\r\n  </i>\r\n</div>\r\n\r\n<hr style=\"margin-top:20px\">\r\n\r\n<div class=\"title text-style\">\r\n ${(selected_account.value?.name + ' - ' + (selected_account.value?.mobile_money?.name ?? 'CASH')).toUpperCase() || 'N/A'} ACCOUNT LEDGER REPORT\r\n</div>\r\n\r\n<hr>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>No.</th>\r\n      <th>Date</th>\r\n      <th>Reference</th>\r\n      <th>Issuer</th>\r\n      <th>Host</th>\r\n      <th class=\"text-right\">Debit</th>\r\n      <th class=\"text-right\">Credit</th>\r\n      <th class=\"text-right\">Balance</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${paymentsWithBalance.map((payment, index) => `\r\n    <tr>\r\n      <td>${index + 1}</td>\r\n      <td>${payment.date || 'N/A'}</td>\r\n      <td>${payment.ref_no || 'N/A'}</td>\r\n      <td>${payment.issuer || 'N/A'}</td>\r\n      <td>${payment.host || 'N/A'}</td>\r\n      <td class=\"text-right\">${payment.Debit !== '--' ? payment.Debit : '--'}</td>\r\n      <td class=\"text-right\">${payment.Credit !== '--' ? payment.Credit : '--'}</td>\r\n      <td class=\"text-right\">${formatNumber(payment.balance)}</td>\r\n    </tr>\r\n    `).join('')}\r\n    <tr>\r\n      <td colspan=\"5\" class=\"text-right\"><strong>TOTALS:</strong></td>\r\n      <td class=\"text-right\"><strong>${formatNumber(payments.value.reduce((sum, payment) => {\r\n        const amount = payment.direction === 'INCREMENT' ? parseFloat(payment.amount) : 0;\r\n        return sum + amount;\r\n      }, 0))}</strong></td>\r\n      <td class=\"text-right\"><strong>${formatNumber(payments.value.reduce((sum, payment) => {\r\n        const amount = payment.direction === 'DECREMENT' ? parseFloat(payment.amount) : 0;\r\n        return sum + amount;\r\n      }, 0))}</strong></td>\r\n      <td class=\"text-right\"><strong>${formatNumber(runningBalance)}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print ledger: ${error.message}`);\r\n  }\r\n};\r\n\r\n      onMounted(() => {\r\n        getAccounts();\r\n        // Open the offcanvas modal on mount\r\n  const offcanvasElement = document.getElementById('offcanvasWithBothOptions');\r\n  if (offcanvasElement) {\r\n    const offcanvas = new bootstrap.Offcanvas(offcanvasElement);\r\n    offcanvas.show();\r\n  }\r\n});\r\n\r\n\r\n</script>\r\n\r\n\r\n","import script from \"./ledger.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ledger.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["globalSearch","data","keyword","lowerKeyword","toLowerCase","trim","containsKeyword","obj","includes","Array","isArray","some","Object","values","filter","item","ref","props","filterValue","watch","val","emit","__exports__","waitIndicator","inject","useMeta","title","showError","formatDate","JSON","parse","localStorage","getItem","permissions","formatNumber","tableShimmer","isloading","accounts","columns","selected_account","selected_account_id","accountsFilter","mobileView","window","innerWidth","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","addEventListener","value","filteredaccounts","computed","axiosInstance","axios","baseURL","process","getAccounts","async","response","get","error","console","log","message","selectAccount","account","id","newId","oldId","getAccountPayments","loadingPayments","payments","accountId","map","index","Sno","attachment","Debit","direction","amount","Credit","issuer","name","proof","ref_no","reference_number","host","date","source_account","transaction_point","mobile_money","category","transaction","fillTransaction","trans","printAccountLedger","iframe","document","createElement","style","display","body","appendChild","runningBalance","paymentsWithBalance","payment","debitAmount","parseFloat","creditAmount","balance","printContent","toUpperCase","join","reduce","sum","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","onMounted","offcanvasElement","getElementById","offcanvas","bootstrap","Offcanvas","show"],"sourceRoot":""}