"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[286],{10286:function(a,e,t){t.r(e),t.d(e,{default:function(){return Y}});var l=t(66252),s=t(2262),o=t(49963),n=t(3577),i=t(87066),r=t(56296);const d={class:"layout-px-spacing"},c=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Labours</span></li></ol></nav></div></li></ul>',1),u={class:"d-flex me-4 mt-2"},b={class:"ms-auto"},v=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),m=[v],p=["innerHTML"],h=["onSubmit"],g=(0,l._)("h4",{class:"text-center"},"LABOUR REGISTRATION FORM",-1),w={class:"row mb-2"},_={class:"col-md-12"},f=(0,l._)("label",{class:"form-label"},"Labour Name",-1),y={class:"text-center gap-2 justify-content-end"},k=(0,l._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),C={class:"row layout-top-spacing"},x={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},L={class:"panel p-0"},M={class:"custom-table table3"},S=["onClick"],H=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,l._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),E=[H],B=["onClick"],N=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},[(0,l._)("polyline",{points:"3 6 5 6 21 6"}),(0,l._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),j=[N],T={class:"modal-footer"},I=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),R=["disabled"],V={class:"modal fade",id:"editModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModalLabel","aria-hidden":"true"},z={class:"modal-dialog modal-lg modal-dialog-scrollable",role:"document"},D={class:"modal-content"},O=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"editModalLabel"},"Edit Labour"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U={class:"modal-body"},q={class:"form-group mb-3"},A=(0,l._)("label",{for:"editLabourName"},"Labour Name",-1),P={class:"modal-footer"},F=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),$=["disabled"];var G={setup(a){(0,r.j)({title:"Custom Table"});const e=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),t=(0,l.f3)("loadingIndicator");let v=null;const H=(0,s.iH)({}),N=(0,s.iH)(""),G=(0,s.iH)(!1),W=(0,s.iH)(""),Y=(0,s.iH)(["SNo","name","actions"]),Z=(0,s.iH)([]),J=(0,s.iH)(!1),K=(0,s.iH)(""),Q=(0,s.iH)({perPage:10,perPageValues:[10,20,50],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),X=()=>{G.value=!0,e.get("/labours").then((a=>{Z.value=a.data.map(((a,e)=>({...a,SNo:e+1}))),G.value=!1}))},aa=()=>{J.value=!1,G.value=!0;const a={name:N.value,category_id:W.value,description:K.value};e.post("/labours",a).then((a=>{X(),G.value=!1,ea("Labour registered successfully!"),201===a.data.status||console.error("Error registering Order:",a.data.message)})).catch((a=>{console.error("Error registering Order:",a.message)}))},ea=(0,l.f3)("showMessage"),ta=(0,l.f3)("showError"),la=(0,s.iH)(!1),sa=async a=>{window.Swal&&window.Swal.fire({title:"Delete Item",text:"Are you sure you want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{if(t.isConfirmed){la.value=!0;try{await e.delete(`/labours/${a.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),Z.value=Z.value.filter((e=>e.id!==a.id))}catch(l){console.error("Error deleting item:",l),window.Swal.fire({icon:"error",title:"Error",text:"Failed to delete item: "+l.message,padding:"2em"})}finally{la.value=!1}}}))},oa=a=>{H.value={...a},v.show()},na=async()=>{if(v.hide(),!G.value)try{G.value=!0;const a=await e.put(`/labours/${H.value.id}`,{name:H.value.name});if(200===a.status){const a=Z.value.findIndex((a=>a.id===H.value.id));-1!==a&&(Z.value[a].name=H.value.name),ea("Labour updated successfully!")}}catch(a){ta("Error updating labour: "+(a.response?.data?.message||a.message))}finally{G.value=!1}};return(0,l.bv)((()=>{X(),v=new bootstrap.Modal(document.getElementById("editModal"))})),(a,e)=>{const i=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)("div",d,[c,(0,l._)("div",u,[(0,l._)("div",b,[(0,l._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=a=>J.value=!J.value)},m)])]),G.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,s.SU)(t)()},null,8,p)):(0,l.kq)("",!0),J.value?((0,l.wg)(),(0,l.iD)("form",{key:1,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,o.iM)(aa,["prevent"])},[g,(0,l._)("div",w,[(0,l._)("div",_,[f,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Labour Name","onUpdate:modelValue":e[1]||(e[1]=a=>N.value=a),required:""},null,512),[[o.nr,N.value]])])]),(0,l._)("div",y,[(0,l._)("button",{type:"button",class:"btn btn-danger me-3",onClick:e[2]||(e[2]=a=>J.value=!1)},"Cancel"),k])],40,h)):(0,l.kq)("",!0),(0,l._)("div",C,[(0,l._)("div",x,[(0,l._)("div",L,[(0,l._)("div",M,[(0,l.Wm)(i,{data:Z.value,columns:Y.value,options:Q.value},{status:(0,l.w5)((a=>[(0,l._)("span",{class:(0,n.C_)(["badge inv-status","badge-"+a.row.status.class])},(0,n.zw)(a.row.status.key),3)])),actions:(0,l.w5)((a=>[(0,l._)("a",{href:"javascript:;",class:"edit me-3",onClick:e=>oa(a.row)},E,8,S),(0,l._)("a",{href:"javascript:;",class:"cancel",onClick:e=>sa(a.row)},j,8,B)])),footer:(0,l.w5)((()=>[(0,l._)("div",T,[I,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:na,disabled:a.isSaving},"Save changes",8,R)])])),_:1},8,["data","columns","options"])])])])]),(0,l._)("div",V,[(0,l._)("div",z,[(0,l._)("div",D,[O,(0,l._)("div",U,[(0,l._)("div",q,[A,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"editLabourName","onUpdate:modelValue":e[3]||(e[3]=a=>H.value.name=a)},null,512),[[o.nr,H.value.name]])])]),(0,l._)("div",P,[F,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:na,disabled:a.isSaving},"Save changes",8,$)])])])])])}}};const W=G;var Y=W}}]);
//# sourceMappingURL=286.a1b94daa.js.map