{"version":3,"file":"js/4806.3c182d1c.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/projects/planning.vue","webpack://cork-vue3/./src/views/projects/planning.vue?bed5"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Projects</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Planning</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n\r\n        <h5 class=\"text-center\"> {{ project?.short_name }} PROJECT PLANNING</h5>\r\n\r\n        <!-- offcanvas start -->\r\n<div class=\"offcanvas offcanvas-end\" data-bs-scroll=\"true\" tabindex=\"-1\" id=\"offcanvasWithBothOptions\" aria-labelledby=\"offcanvasWithBothOptionsLabel\">\r\n  <div class=\"offcanvas-header\">\r\n    <h5 class=\"offcanvas-title\" id=\"offcanvasWithBothOptionsLabel\">PROJECT LISTS</h5>\r\n    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n  </div>\r\n  <div class=\"offcanvas-body\">\r\n  <div class=\"row\">\r\n  <div class=\"col-12\">\r\n <div\r\n  class=\"list-group\"\r\n  id=\"list-tab\"\r\n  role=\"tablist\"\r\n  v-bind=\"mobileView ? {\r\n    'data-bs-toggle': 'offcanvas',\r\n    'data-bs-target': '#budgetOffcanvas',\r\n    'aria-controls': 'budgetOffcanvas'\r\n  } : {}\"\r\n>\r\n\r\n      <a v-for=\"projectList in projects\" :key=\"projectList.id\" class=\"list-group-item list-group-item-action\" :id=\"'project-link-' + projectList.id\" data-bs-toggle=\"list\" :href=\"'#project-' + projectList.id\" role=\"tab\" :aria-controls=\"'project-' + projectList.id\" @click=\"project = projectList\" data-bs-dismiss=\"offcanvas\">{{ projectList.short_name }}</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n  </div>\r\n</div>\r\n <!-- offcanvas ends -->\r\n\r\n        <div class=\"d-flex\">\r\n            <div class=\"ms-auto \">\r\n\r\n                 <button class=\"btn\" v-if=\"mobileView\"  data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-list-ul\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2\"/>\r\n</svg>\r\n</button>\r\n<button v-else class=\"btn btn-outline-primary\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasWithBothOptions\" aria-controls=\"offcanvasWithBothOptions\">Select Project from the lists</button>\r\n\r\n            </div>\r\n        </div>\r\n            <div class=\"text-center mt-5\" v-if=\"!project\">\r\n            <p>Select Project to view it's plans</p>\r\n    </div>\r\n    <div class=\"text-center\">\r\n    <span v-if=\"loading_spinner\" v-html=\"waitIndicator()\"></span>\r\n    </div>            \r\n\r\n\r\n\r\n        <!-- plans list starts -->\r\n<div class=\"row\">\r\n<div class=\"col-2\" v-if=\"!mobileView\">\r\n    <div v-if=\"project\" class=\"list-group\" id=\"list-tab\" role=\"tablist\" style=\"max-height:600px; overflow-y:auto;\">\r\n        <div class=\"d-flex\">\r\n            <p>BUDGETS</p>\r\n        </div>\r\n        <a  class=\"list-group-item list-group-item-action\" :id=\"'project-link-'\" data-bs-toggle=\"list\" :href=\"'#budget-'\" role=\"tab\" :aria-controls=\"'budget-'\" @click.prevent=\"analyseProject()\">PROJECT PLAN ANALYSIS</a>\r\n        <a v-for=\"budget in budgets\" :key=\"budget.id\" class=\"list-group-item list-group-item-action\" :id=\"'project-link-' + budget.id\" data-bs-toggle=\"list\" :href=\"'#budget-' + budget.id\" role=\"tab\" :aria-controls=\"'budget-' + budget.id\" @click.prevent=\"selectBudget(budget)\">{{ budget.name }} </a>\r\n    </div>\r\n</div>\r\n  <div class=\"col-10\">\r\n<div class=\"tab-content\" id=\"nav-tabContent\">\r\n  <div\r\n    v-if=\"project\"\r\n    class=\"tab-pane fade show active\"\r\n    :id=\"'project-' + project.id\"\r\n    role=\"tabpanel\"\r\n    :aria-labelledby=\"'project-link-' + project.id\"\r\n  >\r\n    <!-- project tab starts -->\r\n\r\n\r\n   <div class=\"panel-body pill-justify-centered tabs\">\r\n \r\n       <ul class=\"nav nav-pills mb-3 mt-3 justify-content-center\" id=\"justify-center-pills-tab\" role=\"tablist\">\r\n        <li class=\"nav-item\">\r\n          <a\r\n          v-if=\"selectedBudget\"\r\n            class=\"nav-link active\"\r\n            id=\"justify-center-pills-details-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#justify-center-pills-details\"\r\n            role=\"tab\"\r\n            aria-controls=\"justify-center-pills-details\"\r\n            aria-selected=\"true\"\r\n            @click=\"triggerPresentBudget()\"\r\n          >\r\n           BUDGET ANALYSIS\r\n          </a>\r\n\r\n            <a\r\n          v-else\r\n            class=\"nav-link active\"\r\n            id=\"justify-center-pills-details-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#justify-center-pills-details\"\r\n            role=\"tab\"\r\n            aria-controls=\"justify-center-pills-details\"\r\n            aria-selected=\"true\"\r\n          >\r\n           PROJECT PLAN ANALYSIS\r\n          </a>\r\n        </li>\r\n         <li v-for=\"item in selectedBudget.items\" class=\"nav-item\" @click=\"selectedItem = item\">\r\n          <a\r\n            class=\"nav-link \"\r\n            id=\"justify-center-pills-details-tab\"\r\n            data-bs-toggle=\"pill\"\r\n            href=\"#justify-center-pills-details\"\r\n            role=\"tab\"\r\n            aria-controls=\"justify-center-pills-details\"\r\n            aria-selected=\"true\"\r\n          >\r\n            {{ item.name }}\r\n          </a>\r\n        </li>\r\n      </ul>\r\n\r\n      <div class=\"tab-content\" id=\"justify-center-pills-tabContent\">\r\n\r\n        <!-- PROJECT DETAILS -->\r\n        <div\r\n          class=\"tab-pane fade show active\"\r\n          id=\"justify-center-pills-details\"\r\n          role=\"tabpanel\"\r\n          aria-labelledby=\"justify-center-pills-details-tab\"\r\n        >\r\n          <!-- <h4 class=\"mb-4\">Project Plan Details!</h4> -->\r\n<!-- chart starts -->\r\n<div class=\"w-100 overflow-auto\">\r\n  <div\r\n    class=\"d-inline-block\"\r\n    :style=\"{\r\n      minWidth: Math.max(budget_list.xaxis.categories.length * 200, 1300) + 'px',\r\n      width: Math.max(budget_list.xaxis.categories.length * 200, 1300) + 'px'\r\n    }\"\r\n  >\r\n    <vue-apex-charts\r\n      width=\"100%\"\r\n      height=\"350\"\r\n      type=\"bar\"\r\n      :options=\"budget_list\"\r\n      :series=\"budget_cost\"\r\n    />\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n <!-- chart ends -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n  </div>\r\n\r\n  <div v-else class=\"tab-pane\">No project selected</div>\r\n</div>\r\n\r\n  </div>\r\n</div>\r\n         <!-- plans list ends -->\r\n          <!-- budgets footer starts -->\r\n           <div class=\"text-center fixed-bottom mb-5\" v-if=\"mobileView && project\">\r\n            <div class=\"row\">\r\n                <div class=\"col\"></div>\r\n                <div class=\"col\">\r\n             <div class=\"text-nowrap btn btn-info\" style=\"border-top-left-radius: 80px;border-top-right-radius: 80px;\"\r\n              v-bind=\"mobileView ? {\r\n    'data-bs-toggle': 'offcanvas',\r\n    'data-bs-target': '#budgetOffcanvas',\r\n    'aria-controls': 'budgetOffcanvas'\r\n  } : {}\"\r\n             >\r\n                Select Budget\r\n             </div>\r\n                </div>\r\n                <div class=\"col\"></div>\r\n            </div>\r\n           </div>\r\n           <!-- budgets footer ends -->\r\n\r\n            <!-- budgets offcanvas start -->\r\n<div class=\"offcanvas offcanvas-bottom\" data-bs-scroll=\"true\" tabindex=\"-1\" id=\"budgetOffcanvas\" aria-labelledby=\"budgetOffcanvasLabel\">\r\n  <div class=\"offcanvas-header\">\r\n    <h5 class=\"offcanvas-title\" id=\"budgetOffcanvasLabel\">BUDGET LISTS</h5>\r\n    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n  </div>\r\n  <div class=\"offcanvas-body\">\r\n  <div class=\"row\">\r\n  <div class=\"col-12\">\r\n    <div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\r\n        <a v-if=\"!loading_spinner\"  class=\"list-group-item list-group-item-action\" :id=\"'project-link-'\" data-bs-toggle=\"list\" :href=\"'#budget-'\" role=\"tab\" :aria-controls=\"'budget-'\" @click.prevent=\"analyseProject()\">PROJECT PLAN ANALYSIS</a>\r\n        <a v-for=\"budget in budgets\" :key=\"budget.id\" class=\"list-group-item list-group-item-action\" :id=\"'project-link-' + budget.id\" data-bs-toggle=\"list\" :href=\"'#budget-' + budget.id\" role=\"tab\" :aria-controls=\"'budget-' + budget.id\" @click.prevent=\"selectBudget(budget)\">{{ budget.name }} </a>      <span v-if=\"loading_spinner\" v-html=\"waitIndicator()\"></span>\r\n    </div>\r\n  </div>\r\n</div>\r\n  </div>\r\n</div>\r\n <!-- budgets offcanvas ends -->\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, ref ,watch, inject,computed } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import VueApexCharts from 'vue3-apexcharts';\r\n    const waitIndicator = inject('waitIndicator');\r\nconst axiosInstance = axios.create({\r\n    baseURL: process.env.VUE_APP_API_BASE_URL\r\n});\r\nconst project = ref('')\r\n\r\nconst showError = inject('showError');    \r\nconst showMessage = inject('showMessage');   \r\nconst loading_spinner = ref(false);\r\nconst formatNumber = inject('formatNumber');\r\n\r\nconst selectedBudget = ref('')\r\n\r\n\r\nconst budget_list = ref({\r\n    chart: { toolbar: { show: false } },\r\n    colors: ['#008FFB', '#FF9800', '#00E396'], // blue, green, orange for BOQ\r\n    dataLabels: {\r\n        enabled: true,\r\n        formatter: function (val) {\r\n            if (val >= 1000000) {\r\n                return (val / 1000000).toFixed(1) + 'M';\r\n            } else if (val >= 1000) {\r\n                return (val / 1000).toFixed(1) + 'K';\r\n            }\r\n            return val.toString();\r\n        },\r\n        style: { fontSize: '12px', colors: ['#304758'] },\r\n        offsetY: -15\r\n    },\r\n    plotOptions: {\r\n        bar: {\r\n            horizontal: false,\r\n            columnWidth: '50%',\r\n            dataLabels: {\r\n                position: 'top'\r\n            }\r\n        }\r\n    },\r\n    xaxis: { \r\n        categories: [],\r\n        title: { text: 'Budgets' }\r\n    },\r\n    yaxis: {\r\n        title: { text: 'Budget Cost' },\r\n        labels: {\r\n            formatter: function (val) {\r\n                if (val >= 1000000) {\r\n                    return (val / 1000000).toFixed(1) + 'M';\r\n                } else if (val >= 1000) {\r\n                    return (val / 1000).toFixed(1) + 'K';\r\n                }\r\n                return val.toString();\r\n            }\r\n        }\r\n    },\r\n    tooltip: {\r\n        y: {\r\n            formatter: function (val) {\r\n                return formatNumber(val);\r\n            }\r\n        }\r\n    },\r\n    legend: {\r\n        show: true,\r\n        position: 'top'\r\n    }\r\n});\r\n\r\nconst BAR_WIDTH = 120;\r\nconst chartWidth = computed(() => {\r\n  return Math.max(\r\n    budget_list.value.xaxis.categories.length * BAR_WIDTH,\r\n    1000\r\n  );\r\n});\r\n\r\n\r\nconst budget_cost = ref([\r\n    { name: 'Budget Cost', data: [] },\r\n    { name: 'Used Cost', data: [] },\r\n    { name: 'BOQ Cost', data: [] } \r\n]);\r\n\r\nwatch(project, async (newVal) => {\r\n    // Clear chart data completely\r\n    budget_cost.value = [\r\n        { name: 'Budget Cost', data: [] },\r\n        { name: 'Used Cost', data: [] },\r\n        { name: 'BOQ Cost', data: [] }\r\n    ];\r\n    \r\n    budget_list.value = {\r\n        ...budget_list.value,\r\n        xaxis: { \r\n            categories: [],\r\n            title: { text: 'Project Budgets' }\r\n        },\r\n    };\r\n\r\n    selectedBudget.value = '';\r\n    selectedItem.value = '';\r\n    \r\n    if (!newVal) return;\r\n\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`budgets?project_id=${newVal.id}`);\r\n        budgets.value = response.data;\r\n        \r\n        // Automatically show project-level analysis when project is selected\r\n        analyseProject();\r\n        \r\n    } catch (error) {\r\n        showError && showError(error.message);\r\n        console.error(error);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n});\r\n\r\nwatch(selectedBudget, async (newVal) => {\r\n        const names = newVal.items.map(b => b.name ?? '');\r\n        const costs = newVal.items.map(b => {\r\n            const v = Number(b.total_budget_items_cost);\r\n            return isNaN(v) ? 0 : v;\r\n        });\r\n        const usedCosts =  newVal.items.map(b => {\r\n            const v = Number(b.total_used_cost ?? b.used_cost ?? 0);\r\n            return isNaN(v) ? 0 : v;\r\n        });\r\n\r\n        budget_list.value = {\r\n            ...budget_list.value,\r\n            xaxis: { \r\n                categories: names,\r\n                title: { text: 'Budget Items' }\r\n            },\r\n        };\r\n        budget_cost.value = [\r\n            { name: 'Budget Item Cost', data: costs },\r\n            { name: 'Budget Item Used Cost', data: usedCosts }\r\n        ];\r\n\r\n});\r\n\r\n\r\nconst selectedItem = ref('')\r\nwatch(selectedItem, async (newVal) => {\r\n    if (!newVal || !newVal.descriptions) return;\r\n\r\n    const sortedDescriptions = [...newVal.descriptions]\r\n        .sort((a, b) => (b.total_budget_item_description_cost || 0) - (a.total_budget_item_description_cost || 0))\r\n        .slice(0, 10);\r\n\r\n    const names = sortedDescriptions.map(b => b.name ?? '');\r\n    const costs = sortedDescriptions.map(b => {\r\n        const v = Number(b.total_budget_item_description_cost);\r\n        return isNaN(v) ? 0 : v;\r\n    });\r\n    const usedCosts = sortedDescriptions.map(b => {\r\n        const v = Number(b.total_used_cost ?? b.used_cost ?? 0);\r\n        return isNaN(v) ? 0 : v;\r\n    });\r\n\r\n    budget_list.value = {\r\n        ...budget_list.value,\r\n        xaxis: { \r\n            categories: names,\r\n            title: { text: 'Single Item Statement' }\r\n        },\r\n    };\r\n    budget_cost.value = [\r\n        { name: 'Item Statement Cost', data: costs },\r\n        { name: 'Item Statement Used Cost', data: usedCosts }\r\n    ];\r\n});\r\n\r\n\r\n\r\n    const projects = ref([]);\r\n    const getProjects = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/projects').then((response) => {\r\n            projects.value = response.data\r\n            .filter(item => item.contracted === 'YES')\r\n            .filter(item => item.status === 'active')\r\n        }).finally(() => {\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n\r\n    const budgets = ref([])\r\n\r\n\r\n\r\n\r\n     const updateBudgetChart = (budget) => {\r\n        if (!budget) return;\r\n        \r\n        const names = budget.items.map(b => b.name ?? '');\r\n        const costs = budget.items.map(b => {\r\n            const v = Number(b.total_budget_items_cost);\r\n            return isNaN(v) ? 0 : v;\r\n        });\r\n        const usedCosts = budget.items.map(b => {\r\n            const v = Number(b.total_used_cost ?? 0);\r\n            return isNaN(v) ? 0 : v;\r\n        });\r\n\r\n        budget_list.value = {\r\n            ...budget_list.value,\r\n            xaxis: { \r\n                categories: names,\r\n                title: { text: 'Budget Items' }\r\n            },\r\n        };\r\n        budget_cost.value = [\r\n            { name: 'Budget Item Cost', data: costs },\r\n            { name: 'Budget Item Used Cost', data: usedCosts }\r\n        ];\r\n    };\r\n\r\n    const triggerPresentBudget = () => {\r\n        if (selectedBudget.value) {\r\n            updateBudgetChart(selectedBudget.value);\r\n        }\r\n    };\r\n\r\nconst analyseProject = () => {\r\n    selectedBudget.value = '';\r\n    selectedItem.value = ''; \r\n    if (project.value && budgets.value.length > 0) {\r\n        const names = budgets.value.map(b => b.name ?? '');\r\n        const costs = budgets.value.map(b => {\r\n            const v = Number(b.total_cost);\r\n            return isNaN(v) ? 0 : v;\r\n        });\r\n        const usedCosts = budgets.value.map(b => {\r\n            const v = Number(b.total_used_cost ?? b.used_cost ?? 0);\r\n            return isNaN(v) ? 0 : v;\r\n        });\r\n        const boqCosts = budgets.value.map(b => {\r\n            const v = Number(b.boq_cost ?? 0); // Get BOQ cost from budget data\r\n            return isNaN(v) ? 0 : v;\r\n        });\r\n\r\n        budget_list.value = {\r\n            ...budget_list.value,\r\n            xaxis: { \r\n                categories: names,\r\n                title: { text: 'Project Budgets' }\r\n            },\r\n        };\r\n        budget_cost.value = [\r\n            { name: 'BOQ Cost', data: boqCosts } ,\r\n            { name: 'Budget Cost', data: costs },\r\n            { name: 'Used Cost', data: usedCosts }\r\n        ];\r\n    }\r\n};\r\n\r\n    const selectBudget = (budget) => {\r\n        selectedBudget.value = budget;\r\n        updateBudgetChart(budget);\r\n    };\r\n;\r\n\r\n        const mobileView = ref(false)\r\n    const toggleMobileView = () => {\r\n        if (window.innerWidth < 991) {\r\n           mobileView.value = true \r\n        }\r\n    };\r\n\r\n    onMounted(() => {\r\n        toggleMobileView()\r\n        getProjects();\r\n    });\r\n</script>\r\n","import script from \"./planning.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./planning.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","waitIndicator","inject","axiosInstance","axios","baseURL","process","project","ref","showError","loading_spinner","formatNumber","selectedBudget","budget_list","chart","toolbar","show","colors","dataLabels","enabled","formatter","val","toFixed","toString","style","fontSize","offsetY","plotOptions","bar","horizontal","columnWidth","position","xaxis","categories","text","yaxis","labels","tooltip","y","legend","BAR_WIDTH","budget_cost","computed","Math","max","value","length","name","data","watch","async","selectedItem","newVal","response","get","id","budgets","analyseProject","error","message","console","names","items","map","b","costs","v","Number","total_budget_items_cost","isNaN","usedCosts","total_used_cost","used_cost","descriptions","sortedDescriptions","sort","a","total_budget_item_description_cost","slice","projects","getProjects","then","filter","item","contracted","status","finally","updateBudgetChart","budget","triggerPresentBudget","total_cost","boqCosts","boq_cost","selectBudget","mobileView","toggleMobileView","window","innerWidth","onMounted","__exports__"],"sourceRoot":""}