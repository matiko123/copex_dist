{"version":3,"file":"js/9325.d86612da.js","mappings":"6wEAsGIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,iBAGjB,MAAMC,EAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAEPC,GAAWC,EAAAA,EAAAA,IAAI,IACfC,GAAmBC,EAAAA,EAAAA,IAAO,oBAE1BC,GADQC,KAAKC,MAAMC,aAAaC,QAAQ,UACtBP,EAAAA,EAAAA,KAAI,IACtBQ,GAAcN,EAAAA,EAAAA,IAAO,eACrBO,GAAYP,EAAAA,EAAAA,IAAO,aAIvBQ,GAHuBN,KAAKC,MAAMC,aAAaC,QAAQ,SAASI,aAGhDX,EAAAA,EAAAA,IAAI,KAElBY,GAAYZ,EAAAA,EAAAA,IAAI,IAChBa,GAAWb,EAAAA,EAAAA,IAAI,IAChBc,EAAaC,IAIlB,GAHAF,EAASG,MAAQ,GACjBC,EAAKD,MAAQ,GAETjB,EAASiB,QAAUD,EAAMG,GAC3BnB,EAASiB,MAAQ,OACZ,CACLjB,EAASiB,MAAQD,EAAMG,GAGvB,MAAMC,EAAgBJ,EAAMK,MAAMC,KAAIC,GAAKA,EAAEC,OAG7Cb,EAAcM,MAAQI,EAAMJ,MAAMQ,QAAOP,IACtCE,EAAcM,SAASR,EAAKM,QAG/BX,EAAUI,MAAQ,CAChB,CAAEE,GAAI,EAAGK,KAAM,WAAYV,SAAU,MAClCE,EAAMK,MAAMC,KAAIJ,IAAQ,CACzBC,GAAID,EAAKC,GACTK,KAAM,SAAWN,EAAKM,KACtBV,SAAUI,EAAKJ,gBAOjBa,EAAY,KAChBb,EAASG,MAAQ,GACjBC,EAAKD,MAAQ,GACbjB,EAASiB,MAAQ,GACjBb,EAAgBa,OAAO,GAGnBW,EAAWC,MAAAA,IACbzB,EAAgBa,OAAO,EACzBjB,EAASiB,MAAQ,GACjB,MAAMa,EAAU,CACdC,kBAAmBf,EACnBF,SAAUA,EAASG,MAAMH,SACzBkB,QAASd,EAAKD,MAAME,IAGtBvB,EAAcqC,KAAK,iBAAkBH,GAClCI,MAAKC,IACJC,IACAT,IACAlB,EAAY0B,EAASE,KAAKC,aAOtBC,GAAStC,EAAAA,EAAAA,IAAI,IACbmC,EAAoB,KACtBxC,EAAc4C,IAAI,mBAAmBN,MAAMC,IACvCI,EAAQtB,MAAOkB,EAASE,KACvBjC,EAAgBa,OAAQ,MAG3BC,GAAMjB,EAAAA,EAAAA,IAAI,IACVoB,GAAQpB,EAAAA,EAAAA,IAAI,IACZwC,EAAW,KACb7C,EAAc4C,IAAI,SAASN,MAAMC,IAC7Bd,EAAMJ,MAAOkB,EAASE,SAI5BK,EAAab,MAAAA,IACdzB,EAAgBa,OAAQ,EAC3B,IACE,MAAMkB,QAAiBvC,EAAc+C,OAAQ,kBAAiBxB,KAC9DiB,IACA3B,EAAY0B,EAASE,KAAKC,SACzBlC,EAAgBa,OAAQ,EACzB,MAAO2B,GACNxC,EAAgBa,OAAQ,EACzBP,EAAU,2B,OAKVmC,EAAAA,EAAAA,KAAU,KACNzC,EAAgBa,OAAQ,EACxBmB,IACAK,O,m6CC1MR,MAAMK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://cork-vue3/./src/views/masters/approvalManagement/approvalGroups.vue","webpack://cork-vue3/./src/views/masters/approvalManagement/approvalGroups.vue?806e"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\"\r\n                                    >Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\" ><span>GRNs</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n                    <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n \r\n <div class=\"row g-4\">\r\n    <div v-for=\"group in groups\" :key=\"group.id\" class=\"col-md-6\">\r\n      <div class=\"group-container p-3 mb-4 shadow rounded\" style=\"position: relative;\">\r\n        <div class=\"text-center\">\r\n          <h5 class=\"fw-bold\">{{ group.group_name }} ({{ group.id }})</h5>\r\n          <div class=\"d-flex justify-content-end mb-2\">\r\n            <button \r\n              @click=\"checkRole(group)\"\r\n              class=\"btn btn-sm p-1 btn-outline-primary\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" \r\n                viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" \r\n                stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\">\r\n                <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line>\r\n                <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          <form @submit.prevent=\"saveRole(group.id)\">\r\n            <div v-if=\"add_role == group.id\" class=\"row mb-1\">\r\n              <div class=\"col-md-5\">\r\n                <Multiselect\r\n                  v-model=\"role\"\r\n                  :options=\"filteredRoles\"\r\n                  :close-on-select=\"true\"\r\n                  label=\"name\"\r\n                  value-prop=\"id\"\r\n                  placeholder=\"Select a role\"\r\n                />\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n                <Multiselect\r\n                  v-model=\"position\"\r\n                  :options=\"positions\"\r\n                  :close-on-select=\"true\"\r\n                  label=\"name\"\r\n                  placeholder=\"Select position\"\r\n                />\r\n              </div>\r\n              <div class=\"col-md-1\">\r\n                <button type=\"submit\" class=\"btn btn-primary btn-sm p-2 mt-1\">save</button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n          <ol class=\"list-group list-group-numbered\">\r\n            <li v-for=\"roles in group.roles\" :key=\"roles.id\" \r\n                class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n              {{ roles.name }} - Position ( {{ roles.position }} )\r\n              <button class=\"btn btn-sm btn-danger p-1\" @click=\"deleteRole(roles.id)\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" \r\n                  viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" \r\n                  stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trash-2\">\r\n                  <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                  <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                  <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                  <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                </svg>\r\n              </button>\r\n            </li>\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>>\r\n\r\n\r\n\r\n\r\n\r\n   </div>\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    const add_role = ref('')\r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const user  = JSON.parse(localStorage.getItem(\"user\"));\r\n    const loading_spinner = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n \r\n\r\nconst filteredRoles = ref([])\r\n\r\n  const positions = ref([])\r\n  const position = ref('')\r\n const checkRole = (group) => {\r\n  position.value = \"\";\r\n  role.value = \"\";\r\n\r\n  if (add_role.value === group.id) {\r\n    add_role.value = '';\r\n  } else {\r\n    add_role.value = group.id;\r\n\r\n    // Get group role names\r\n    const existingNames = group.roles.map(r => r.name);\r\n\r\n    // Filter out roles with names already in the group\r\n    filteredRoles.value = roles.value.filter(role => \r\n      !existingNames.includes(role.name)\r\n    );\r\n\r\n    positions.value = [\r\n      { id: 0, name: \"At first\", position: 0 },\r\n      ...group.roles.map(role => ({\r\n        id: role.id,\r\n        name: \"After \" + role.name,\r\n        position: role.position\r\n      }))\r\n    ];\r\n  }\r\n};\r\n\r\n\r\nconst clearForm = () =>{\r\n  position.value = \"\"  \r\n  role.value = ''\r\n  add_role.value = '';\r\n  loading_spinner.value= false\r\n}\r\n\r\nconst saveRole = async (group) => {\r\n    loading_spinner.value= true\r\n  add_role.value = '';\r\n  const payload = {\r\n    approval_group_id: group,\r\n    position: position.value.position,\r\n    role_id: role.value.id\r\n  };\r\n\r\n  axiosInstance.post('approval-roles', payload)\r\n    .then(response => {\r\n      getApprovalGroups()\r\n      clearForm()\r\n      showMessage(response.data.message);\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n    const groups = ref([])\r\n    const getApprovalGroups = () => {\r\n        axiosInstance.get('approval-groups').then((response) => {\r\n            groups .value= response.data\r\n             loading_spinner.value = false;\r\n        });\r\n    };\r\n    const role= ref('')\r\n    const roles = ref([])\r\n    const getRoles = () => {\r\n        axiosInstance.get('roles').then((response) => {\r\n            roles.value= response.data\r\n        });\r\n    };\r\n    \r\nconst deleteRole = async (id) => {\r\n     loading_spinner.value = true;\r\n  try {\r\n    const response = await axiosInstance.delete(`approval-roles/${id}`);\r\n    getApprovalGroups()\r\n    showMessage(response.data.message);\r\n     loading_spinner.value = false;\r\n  } catch (error) {\r\n     loading_spinner.value = false;\r\n    showError('Failed to delete role');\r\n  }\r\n};\r\n\r\n\r\n    onMounted(() => {\r\n        loading_spinner.value = true;\r\n        getApprovalGroups();\r\n        getRoles()\r\n    });\r\n</script>\r\n<style scoped>\r\n .mymodal{\r\n  background-color: rgba(122, 122, 122, 0.653);\r\n }\r\n \r\n .group-container {\r\n  background: white;\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075);\r\n  overflow: visible !important; /* crucial to prevent dropdown clipping */\r\n  position: relative; /* keep dropdown positioned correctly */\r\n}\r\n \r\n </style>\r\n","import script from \"./approvalGroups.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./approvalGroups.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./approvalGroups.vue?vue&type=style&index=0&id=7a8bcabc&lang=css\"\nimport \"./approvalGroups.vue?vue&type=style&index=1&id=7a8bcabc&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7a8bcabc\"]])\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","add_role","ref","loadingIndicator","inject","loading_spinner","JSON","parse","localStorage","getItem","showMessage","showError","filteredRoles","permissions","positions","position","checkRole","group","value","role","id","existingNames","roles","map","r","name","filter","includes","clearForm","saveRole","async","payload","approval_group_id","role_id","post","then","response","getApprovalGroups","data","message","groups","get","getRoles","deleteRole","delete","error","onMounted","__exports__"],"sourceRoot":""}