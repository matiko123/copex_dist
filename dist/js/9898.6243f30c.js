"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[9898],{99898:function(e,t,a){a.r(t),a.d(t,{default:function(){return Oe}});a(26699);var l=a(66252),n=a(3577),i=a(2262),s=a(49963),o=a(26212),r=a.n(o),u=a(87066),d=a(56296),c=a(42119);const v={class:"layout-px-spacing"},p=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Requisitions</span></li></ol></nav></div></li></ul>',1),m={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},b={class:"panel p-0"},g={class:"custom-table table3"},_={class:"table table-bordered table-striped"},y=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Requisition_no"),(0,l._)("th",null,"Requester"),(0,l._)("th",null,"Date Requested"),(0,l._)("th",null,"Date Approved"),(0,l._)("th",null,"Source"),(0,l._)("th",null,"Purpose"),(0,l._)("th",null,"Project"),(0,l._)("th",null,"Status")])],-1),h={key:0},f={colspan:"6"},w=(0,l._)("b",null,"Brief Description:",-1),k={key:1},x={colspan:"6"},q=(0,l._)("b",null,"Remark:",-1),H={class:"mb-2 text-center fw-bold",style:{"font-size":"x-large"}},S=(0,l._)("strong",null,"Total Cost: ",-1),R={key:0,class:"mb-2 text-center"},D={class:"btn-group mb-3"},$=["disabled"],C=["disabled"],U=["disabled"],I=["disabled"],T={key:0,class:"mb-2"},A={key:1,class:"input-group"},E=["placeholder"],z=["disabled"],N=["innerHTML"],P={key:1},j={class:"row layout-top-spacing"},O={key:0,class:"mt-2 col-xl-12 col-lg-12 col-sm-12 layout-spacing"},M={class:"panel p-0"},V={class:"custom-table table3"},L={class:"table table-bordered table-striped"},Y=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Item Requested"),(0,l._)("th",null,"Item Issued"),(0,l._)("th",null,"Quantity Issuing"),(0,l._)("th",null,"Item Condition")])],-1),B=["placeholder","onUpdate:modelValue","max"],F={type:"number",class:"form-control"},G={class:"panel p-0"},Q={class:"custom-table table3"},W={class:"d-flex justify-content-center align-items-center gap-2"},X=["onClick"],Z=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary","data-bs-toggle":"modal","data-bs-target":"#edit-requisition-items-modal"},[(0,l._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),K=[Z],J=(0,l._)("button",{class:"btn btn-primary"},"Diesel",-1),ee={key:0,class:"mt-3"},te=(0,l._)("h4",{class:"text-center text-danger"},"Rejection Details",-1),ae={class:"table table-bordered table-striped align-middle"},le=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Sno"),(0,l._)("th",null,"Rejected By"),(0,l._)("th",null,"Date"),(0,l._)("th",null,"Reason")])],-1),ne=(0,l._)("td",null,"Director",-1),ie={key:1,class:"col-xl-6 col-lg-12 col-sm-12 layout-spacing"},se={class:"panel p-3 position-relative"},oe=["href"],re=(0,l._)("h4",{class:"text-center"},"Proforma Invoice",-1),ue=["src"],de={key:2,class:"col-xl-6 col-lg-12 col-sm-12 layout-spacing"},ce={class:"panel p-3 position-relative"},ve=["href"],pe=(0,l._)("h4",{class:"text-center"},"Subcontractor's Agreement",-1),me=["src"],be={class:"modal fade mymodal",id:"edit-requisition-items-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editRequisitionItemsModalLabel","aria-hidden":"true"},ge={class:"modal-dialog modal-xl"},_e={class:"modal-content"},ye={class:"modal-header"},he=(0,l._)("h1",{class:"modal-title fs-5",id:"editRequisitionItemsModalLabel"},"Edit Requisition Items",-1),fe={class:"modal-body"},we={class:"row"},ke={class:"col-md-3"},xe=(0,l._)("label",{for:"item"},"Item",-1),qe={class:"col-md-3"},He=(0,l._)("label",{for:"units"},"Units",-1),Se={class:"col-md-3"},Re=(0,l._)("label",{for:"quantity"},"Quantity",-1),De={class:"col-md-3"},$e=(0,l._)("label",{for:"rate"},"Rate",-1),Ce={class:"col-md-6"},Ue=(0,l._)("label",{for:"description"},"Description",-1),Ie={class:"col-md-6"},Te=(0,l._)("label",{class:"form-label small"},"Select An Asset",-1),Ae={class:"modal-footer"},Ee=["disabled"],ze={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},Ne={key:1};var Pe={setup(e){(0,d.j)({title:"Requisition Details"});const t=u.Z.create({baseURL:"https://bushman.ink/api/v1/"}),a=((0,c.tv)(),(0,c.yj)()),o=JSON.parse(localStorage.getItem("user")).permissions,Z=(0,i.iH)(["General","budget","labour","construction materials","spares"]),Pe=(0,i.iH)([]),je=((0,i.iH)([]),(0,i.iH)("")),Oe=(0,i.iH)(!1),Me=(0,i.iH)(""),Ve=(0,l.f3)("formatNumber"),Le=(0,l.f3)("formatDate"),Ye=(0,l.f3)("loadingSpinner"),Be=((0,i.iH)((new Date).toISOString().split("T")[0]),(0,i.iH)("")),Fe=(0,i.iH)(""),Ge=(0,i.iH)(""),Qe=(0,i.iH)(""),We=(0,i.iH)(),Xe=(0,i.iH)(""),Ze=(0,i.iH)([]),Ke=(0,i.iH)(0),Je=((0,i.iH)(""),(0,i.iH)([]),(0,i.iH)(!1)),et=(0,i.iH)(""),tt=((0,i.iH)(["sno","ref_no","requester","purpose","type","project","date","cost","status","remark","actions"]),(0,i.iH)(!1),(0,l.f3)("showMessage")),at=(0,l.f3)("showError"),lt=(0,i.iH)([]),nt=(0,i.iH)([]),it=((0,i.iH)(""),(0,i.iH)([""]),(0,i.iH)([])),st=(0,i.iH)(""),ot=(0,i.iH)(""),rt=(0,i.iH)({}),ut=(0,i.iH)([]),dt=(0,i.iH)(""),ct=(0,i.iH)(""),vt=(0,i.iH)([]),pt=async()=>{try{const e=await t.get("machines");vt.value=e.data.map((e=>({...e,name:e.name+" - "+e.type_name})))}catch(e){console.error("Error fetching assets:",e)}},mt=(0,i.iH)(""),bt=(0,i.iH)([]),gt=(0,i.iH)(""),_t=async e=>{try{const a=await t.get(`budgets?project_id=${e}`);bt.value=a.data.filter((e=>"closed"===e.status))}catch(a){console.error("Error fetching budgets:",a)}};(0,l.YP)(mt,(e=>{e&&_t(e.id)})),(0,l.YP)(je,(e=>{e&&(lt.value=[],nt.value=[],bt.value=[],gt.value="",mt.value="",It())})),(0,l.YP)(Me,(e=>{e&&(Et(),Me.value=e,lt.value=[],nt.value=[],It())}));const yt=(0,i.iH)([]),ht=(0,i.iH)("");(0,l.YP)(gt,(e=>{e&&(yt.value=e.items)}));const ft=(0,i.iH)([]),wt=(0,i.iH)(""),kt=(0,i.iH)(""),xt=(0,i.iH)("");(0,l.YP)(ht,(e=>{e&&(ft.value=e.descriptions,Fe.value=e.name)})),(0,l.YP)(wt,(e=>{e&&(xt.value=e.quantity*e.quantity_2,kt.value=e.quantity*e.quantity_2*e.cost-e.used_cost,Ke.value=e.id,At.value=e.name,Xe.value=e.units)}));const qt=(0,i.iH)([]),Ht=(0,i.iH)(""),St=async()=>{try{const e=await t.get("subcontractor-agreements");qt.value=e.data.map((e=>({...e,name:e.project.short_name+" - "+e.item})))}catch(e){console.error("Error fetching subcontractors:",e)}},Rt=async()=>{try{const e=await t.get("units");it.value=e.data}catch(e){console.error("Error fetching units:",e)}},Dt=async()=>{Je.value=!0,et.value="";try{const e=await t.get(`requisitions/${a.params.requisition_id}`);let l=e.data;if(console.log("API Response:",l),Array.isArray(l)){if(!(l.length>0))return et.value="No requisition data found",void(Je.value=!1);l=l[0]}const n={...l,ref_no:l.id,date:Le(l.created_at),requester_id:l.requester_id,type:l.type,purpose:l.approval_group,attachment:l.attachment?"https://copex.trustdigital.space/"+l.attachment:null,status_id:l.status?.id,cost:Ve(Array.isArray(l.items)?l.items.reduce(((e,t)=>e+(Number(t.quantity)||0)*(Number(t.rate)||0)),0):0),status:{key:l.status,class:l.status_color}};rt.value=n,$t(n)}catch(e){console.error("Error fetching requisition:",e),et.value=e.message||"Failed to load requisition data",at(et.value)}finally{Je.value=!1}},$t=e=>{console.log("Filling items for requisition:",e),rt.value=e,Ze.value=e.remarks||[],dt.value=e.attachment,ct.value=e.subcontractor,e.subcontractor&&Yt(e.subcontractor,e.project),ut.value=(e.items||[]).map(((e,t)=>({...e,Sno:t+1,item:e.remark,asset_id:e.asset_id,description:e.description,rate:Number(e.rate).toLocaleString()+"/=",total:(e.quantity*e.rate).toLocaleString()+"/=",issued_quantity:"",store_item:""}))),console.log("Processed requisition items:",ut.value)},Ct=(0,i.iH)({perPage:50,perPageValues:[50,100,200,500],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","role_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),Ut=(0,i.iH)(["Sno","item","description","units","quantity","rate","total","actions"]);(0,l.YP)(je,(e=>{"spares"===e&&getItems("get-spares"),"labour"===e&&getLabours(),"construction materials"===e&&getItems("get-materials")})),(0,l.YP)(Fe,(e=>{"labour"===je.value&&e&&(Qe.value=e.rate)}));const It=()=>{Ge.value="",Qe.value="",We.value="",Fe.value="",At.value="",Xe.value="",Tt.value="",wt.value="",ht.value=""},Tt=(0,i.iH)(""),At=(0,i.iH)(""),Et=()=>{ut.value=[],Me.value="",We.value="",Be.value="",gt.value="",ht.value="",mt.value="",Xe.value="",Fe.value="",Ge.value="",Qe.value="",At.value="",je.value="",wt.value="",bt.value=[],yt.value=[],ft.value=[],Ot.value=""},zt=()=>{const e=document.querySelector(".modal.show");if(e){const t=bootstrap.Modal.getInstance(e);t?.hide()}document.body.classList.remove("modal-open"),document.body.style.overflow="auto",document.body.style.paddingRight="",Et()},Nt=(0,i.iH)(null),Pt=(0,i.iH)(null),jt=(0,i.iH)(!1),Ot=(0,i.iH)(""),Mt=()=>{Nt.value=null,Pt.value=null,Ht.value="",mt.value="",At.value="",st.value="",Me.value="",ot.value="",Be.value=""},Vt=async()=>{Je.value=!0;try{const e={requisition_type_id:Pt.value.requisition_type_id,remark:Fe.value,quantity:Ge.value,rate:Qe.value,description:At.value,units:Xe.value?.short_name||Xe.value,asset_id:Tt.value?.id};await t.put(`/requisition-type-items/${Pt.value.id}`,e),Dt(),document.getElementById("close_editing").click(),tt("Requisition item updated successfully"),Mt()}catch(et){at(et.message),console.log(et)}finally{Je.value=!1}},Lt=e=>{Pt.value=e,"labour"===je.value?Fe.value=labours.value.find((t=>t.name===e.remark))||e.remark:["spares","construction materials"].includes(je.value)?Fe.value=items_list.value.find((t=>t.name===e.remark))||e.remark:Fe.value=e.remark,Xe.value=it.value.find((t=>t.short_name===e.units))||e.units,Ge.value=e.quantity,"string"===typeof e.rate?Qe.value=Number(e.rate.replace(/[^0-9.]/g,""))||0:Qe.value=Number(e.rate)||0,At.value=e.description,Tt.value=vt.value.find((t=>t.id===e.asset_id))||""},Yt=async(e,t)=>{try{const a=new Date,l=String(a.getDate()).padStart(2,"0"),n=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear(),s=`${l}/${n}`,o=`${l}/${n}/${i}`,r=`${l}.${n}.${i}`,u=`${o}, ${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,d=`${String(e.id).padStart(3,"0")}/${s}`,c=`${e.id}`,v=`${e.id}/${i}`,p=e.payments&&e.payments.length>0?e.payments.reduce(((e,t)=>e+Number(t.quantity)),0):0,m=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Subcontractor Agreement Details</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\n  .logo { width: 160px; height: auto; }\n  .agreement-box { border: 1px solid #000; padding: 5px 10px; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; }\n  .company-title h2 { margin: 5px 0; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; }\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n  .title { text-align: center; font-weight: bold; margin: 20px 0 10px 0; }\n  .details-list { margin-top: 15px; line-height: 1.6; }\n  .details-list div { margin-bottom: 4px; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  table.items th, table.items td { border: 1px solid #000; padding: 6px; font-weight: normal; }\n  table.items thead tr th { background-color: #f8f8f8; border: 1px solid #000; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n<div class="header">\n  <img src="https://bushman.ink/copex.jpg" class="logo" />\n  <div class="agreement-box">\n    Agreement ID:<br>\n    <span style="color:red;">${d}</span>\n  </div>\n</div>\n\n<div class="reg-info">\n  TIN: 103-826-519<br>\n  VRN: 20-01-017530R\n</div>\n\n<div class="company-title">\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\n</div>\n\n<div class="section-title">SUBCONTRACTOR AGREEMENT DETAILS</div>\n<div class="title">${t.toUpperCase()} - ${e.item.toUpperCase()}</div>\n\n<div style="display: flex; justify-content: space-between; align-items: center;">\n  <div class="text-start"><strong>NOTICE NO. 00${v}</strong></div>\n  <div class="text-end"><strong>Date: ${r}</strong></div>\n</div>\n\n<div class="text-center"><strong>REF: SUBCONTRACTING NOTICE No. ${c}</strong></div>\n\n<div class="text-start"><p>Refer the subject matter above</p></div>\n<div class="text-start"><p>This form as internal notice on subcontracting piece work on <strong>${e.item.toUpperCase()}</strong></p></div>\n\n<div class="details-list">\n  <div><strong>Subcontracted:</strong> ${e.subcontracted_to}</div><br>\n  <div><strong>Item Description:</strong> ${e.item}</div><br>\n  <div><strong>Contracted Quantity:</strong> ${e.quantity}</div><br>\n  <div><strong>This payment certificate:</strong> ${e.payment_term.name}</div><br>\n  <div><strong>Subcontracted To:</strong> ${e.subcontracted_to}</div><br>\n  <div><strong>Payment Details:</strong> ${e.payment_number}</div><br>\n  <div><strong>Subcontracting Unit Price:</strong> TZS ${Ve(e.rate)} per ${e.unit}</div><br>\n  <div><strong>Total Amount of Contract:</strong> TZS ${Ve(e.quantity*e.rate)}</div><br>\n  <div><strong>Total Amount Archived:</strong></div><br>\n  <div><strong>This Certificate Payable Amount:</strong> ${Ve(p)} </div>\n</div>\n\n${e.payments&&e.payments.length>0?`\n<div class="section-title">PAYMENT HISTORY</div>\n<table class="items">\n  <thead>\n    <tr>\n      <th style="width: 30px;"><strong>Sno.</strong></th>\n      <th><strong>Date</strong></th>\n      <th><strong>Description</strong></th>\n      <th><strong>Amount</strong></th>\n    </tr>\n  </thead>\n  <tbody>\n    ${e.payments.map(((e,t)=>{const a=new Date(e.created_at),l=`${String(a.getDate()).padStart(2,"0")}.${String(a.getMonth()+1).padStart(2,"0")}.${a.getFullYear()}`;return`\n        <tr>\n          <td class="text-center">${t+1}</td>\n          <td class="text-center">${l}</td>\n          <td class="text-center">${e.description||""}</td>\n          <td class="text-center">${Ve(e.quantity)}</td>\n        </tr>\n      `})).join("")}\n  </tbody>\n</table>\n`:""}\n\n<div style="margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;">\n  <p>Â© ${(new Date).getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 135-489-247 | VRN: 40-032826C</p>\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\n</div>\n\n<div style="margin-top: 10px; font-size: 11px; text-align: left;">\n  ${u}\n</div>\n\n</body>\n</html>\n`,b=new Blob([m],{type:"text/html"});ct.value=URL.createObjectURL(b)}catch(et){at(`Failed to generate agreement details: ${et.message}`)}};return(0,l.bv)((async()=>{Pe.value=Z.value.filter((e=>"General"!==e||o.includes("can_create_general_requisitions"))),await Dt(),Rt(),St(),pt()})),(e,t)=>{const a=(0,l.up)("router-link"),u=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",v,[p,(0,l._)("div",m,[(0,l._)("div",b,[(0,l._)("div",g,[(0,l._)("table",_,[y,(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,(0,n.zw)(rt.value.ref_no),1),(0,l._)("td",null,(0,n.zw)(rt.value.requester),1),(0,l._)("td",null,(0,n.zw)(rt.value.date),1),(0,l._)("td",null,(0,n.zw)((0,i.SU)(Le)(rt.value.approved_at)),1),(0,l._)("td",null,(0,n.zw)(rt.value.type),1),(0,l._)("td",null,(0,n.zw)(rt.value.purpose),1),(0,l._)("td",null,(0,n.zw)(rt.value.project),1),(0,l._)("td",null,[(0,l._)("span",{class:(0,n.C_)(["mb-0 badge",`badge-${rt.value.status?.class}`])},(0,n.zw)(rt.value.status?.key),3)])]),rt.value.description?((0,l.wg)(),(0,l.iD)("tr",h,[(0,l._)("td",f,[w,(0,l.Uk)(" "+(0,n.zw)(rt.value.description),1)])])):(0,l.kq)("",!0),rt.value.remark?((0,l.wg)(),(0,l.iD)("tr",k,[(0,l._)("td",x,[q,(0,l.Uk)(" "+(0,n.zw)(rt.value.remark),1)])])):(0,l.kq)("",!0)])])])])]),(0,l._)("div",H,[S,(0,l._)("span",null,(0,n.zw)(rt.value?.items?.reduce(((e,t)=>{const a=Number(t.quantity)||0,l=Number(t.rate)||0;return e+a*l}),0).toLocaleString()+"/="),1)]),"Unapproved"!==rt.value.status?.key&&"Remarked"!==rt.value.status?.key&&"On Hold"!==rt.value.status?.key||!(0,i.SU)(o).includes("is_md")?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",R,[(0,l._)("div",D,[(0,l._)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=e=>Be.value=3),disabled:Oe.value},"Approve",8,$),(0,l._)("button",{class:"btn btn-danger me-2",onClick:t[1]||(t[1]=e=>Be.value=4),disabled:Oe.value},"Reject",8,C),(0,l._)("button",{class:"btn btn-warning me-2",onClick:t[2]||(t[2]=e=>(Be.value=17,We.value=rt.value.remark)),disabled:Oe.value},"Hold Request",8,U),(0,l._)("button",{class:"btn btn-info",onClick:t[3]||(t[3]=e=>(Be.value=14,We.value=rt.value.remark)),disabled:Oe.value},"Remark",8,I)]),Be.value?((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("span",{class:(0,n.C_)(["badge rounded-pill",{"bg-danger":4==Be.value,"bg-success":3==Be.value,"bg-warning":17==Be.value,"bg-info":3!=Be.value&&4!=Be.value}]),style:{"font-size":"1rem"}},(0,n.zw)(3==Be.value?"Approve Request":17==Be.value?"Hold Request":4==Be.value?"Reject Request":"Fill Remark"),3)])):(0,l.kq)("",!0),Be.value?((0,l.wg)(),(0,l.iD)("div",A,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:3==Be.value?"Enter Approval Remark":4==Be.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":t[4]||(t[4]=e=>We.value=e)},null,8,E),[[s.nr,We.value]]),(0,l._)("button",{class:"btn btn-primary",type:"button",disabled:Oe.value,onClick:t[5]||(t[5]=t=>e.fillRequisitionRemark(rt.value))},[Oe.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,i.SU)(Ye)()},null,8,N)):((0,l.wg)(),(0,l.iD)("span",P,"Save"))],8,z)])):(0,l.kq)("",!0)])),(0,l._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)((t=>e.registerIncidence()),["prevent"]))},[(0,l._)("div",j,[6===Me.value?.id&&e.store?((0,l.wg)(),(0,l.iD)("div",O,[(0,l._)("div",M,[(0,l._)("div",V,[(0,l._)("table",L,[Y,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ut.value,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,n.zw)(t.item),1),(0,l._)("td",null,[(0,l.Wm)((0,i.SU)(r()),{modelValue:t.store_item,"onUpdate:modelValue":e=>t.store_item=e,options:e.storeItems,placeholder:"Select Item",searchable:!0,multiple:"false",label:"name",required:!0,"allow-empty":!1},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"available "+(t.store_item?.balance_quantity||0),"onUpdate:modelValue":e=>t.issued_quantity=e,required:"",max:t.store_item?.balance_quantity||0},null,8,B),[[s.nr,t.issued_quantity]])]),(0,l._)("td",null,[(0,l._)("label",F,(0,n.zw)(t.store_item?.condition||"Select Item First"),1)])])))),128))])])])])])):(0,l.kq)("",!0),(0,l._)("div",{class:(0,n.C_)(["col-lg-12","col-sm-12","layout-spacing",dt.value||ct.value?"col-xl-6":"col-xl-12"])},[(0,l._)("div",G,[(0,l._)("div",Q,[(0,l.Wm)(u,{data:ut.value,columns:Ut.value,options:Ct.value},{actions:(0,l.w5)((e=>[(0,l._)("div",W,[(0,i.SU)(o).includes("can_edit_requisition")?((0,l.wg)(),(0,l.iD)("a",{key:0,href:"javascript:void(0);",title:"Edit",onClick:t=>Lt(e.row)},K,8,X)):(0,l.kq)("",!0),e.row.asset_id?((0,l.wg)(),(0,l.j4)(a,{key:1,to:`/statement/${e.row.asset_id}`,onClick:zt},{default:(0,l.w5)((()=>[J])),_:2},1032,["to"])):(0,l.kq)("",!0)])])),_:1},8,["data","columns","options"])])]),Ze.value.length>0?((0,l.wg)(),(0,l.iD)("div",ee,[te,(0,l._)("table",ae,[le,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Ze.value,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,(0,n.zw)(t+1),1),ne,(0,l._)("td",null,(0,n.zw)(new Date(e.created_at).toLocaleDateString("en-GB")),1),(0,l._)("td",null,(0,n.zw)(e.remark),1)])))),128))])])])):(0,l.kq)("",!0)],2),dt.value?((0,l.wg)(),(0,l.iD)("div",ie,[(0,l._)("div",se,[(0,l._)("a",{href:dt.value,target:"_blank",class:"stretched-link"},null,8,oe),re,(0,l._)("embed",{src:dt.value,type:"application/pdf",width:"100%",height:"600px"},null,8,ue)])])):(0,l.kq)("",!0),ct.value?((0,l.wg)(),(0,l.iD)("div",de,[(0,l._)("div",ce,[(0,l._)("a",{href:ct.value,target:"_blank",class:"stretched-link"},null,8,ve),pe,(0,l._)("embed",{src:ct.value,type:"application/pdf",width:"100%",height:"600px"},null,8,me)])])):(0,l.kq)("",!0)])],32)]),(0,l._)("div",be,[(0,l._)("div",ge,[(0,l._)("div",_e,[(0,l._)("div",ye,[he,(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[7]||(t[7]=e=>Mt())})]),(0,l._)("form",{onSubmit:t[15]||(t[15]=(0,s.iM)((e=>Vt()),["prevent"]))},[(0,l._)("div",fe,[(0,l._)("div",we,[(0,l._)("div",ke,[xe,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>Fe.value=e),class:"form-control",placeholder:"Enter Item",required:""},null,512),[[s.nr,Fe.value]])]),(0,l._)("div",qe,[He,(0,l.Wm)((0,i.SU)(r()),{modelValue:Xe.value,"onUpdate:modelValue":t[9]||(t[9]=e=>Xe.value=e),options:it.value,placeholder:"Select Unit",label:"short_name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,l._)("div",Se,[Re,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>Ge.value=e),class:"form-control",placeholder:"Enter Quantity",min:"0",required:"",step:"any"},null,512),[[s.nr,Ge.value]])]),(0,l._)("div",De,[$e,(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=e=>Qe.value=e),class:"form-control",placeholder:"Enter Rate",min:"0",required:"",step:"any"},null,512),[[s.nr,Qe.value]])]),(0,l._)("div",Ce,[Ue,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>At.value=e),class:"form-control",placeholder:"Enter Description"},null,512),[[s.nr,At.value]])]),(0,l._)("div",Ie,[Te,(0,l.Wm)((0,i.SU)(r()),{modelValue:Tt.value,"onUpdate:modelValue":t[13]||(t[13]=e=>Tt.value=e),options:vt.value,placeholder:"Select An Asset",label:"name",searchable:!0,multiple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])])]),(0,l._)("div",Ae,[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[14]||(t[14]=e=>Mt()),id:"close_editing"},"Close"),(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:Je.value||jt.value},[Je.value||jt.value?((0,l.wg)(),(0,l.iD)("span",ze)):((0,l.wg)(),(0,l.iD)("span",Ne,"Update"))],8,Ee)])],32)])])])],64)}}};const je=Pe;var Oe=je}}]);
//# sourceMappingURL=9898.6243f30c.js.map