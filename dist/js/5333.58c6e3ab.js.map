{"version":3,"file":"js/5333.58c6e3ab.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/summary/index.vue","webpack://cork-vue3/./src/views/summary/index.vue?8ca5"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Summary</span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n\r\n<div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n  <div class=\"flex-grow-1 d-flex justify-content-center\">\r\n    <div class=\"input-group input-group-md\" style=\"max-width: 700px; width: 100%;\">\r\n      <input \r\n        type=\"text\" \r\n        class=\"form-control form-control-sm\" \r\n        placeholder=\"Search Summary...\" \r\n        v-model=\"summaryFilters\"\r\n      >\r\n    </div>\r\n  </div>\r\n  <div class=\"text-end ms-3\">\r\n    <button \r\n     v-if=\"user_permissions.includes('is_md')\"\r\n      class=\"btn btn-primary me-2\" \r\n      @click=\"header_registration = !header_registration\"\r\n    >\r\n     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-plus-circle\" viewBox=\"0 0 16 16\">\r\n                                            <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\r\n                                            <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\r\n                                        </svg>\r\n      Create Header\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n\r\n                                \r\n\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"row\">\r\n\r\n                    <!-- header registration form starts -->\r\n                    <div my-8>\r\n                        <form v-if=\"header_registration\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerHeaderSummary\">\r\n                            <h4 class=\"text-center\">HEADER REGISTRATION FORM </h4>\r\n                            <div class=\"row mb-2\">\r\n                                <div class=\"col-md-12\">\r\n                                    <label class=\"form-label\">Name</label>\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Enter Header Name\" v-model=\"header_name\" required>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"text-center gap-2 justify-content-end\">\r\n                                <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"header_registration = false; resetForm();\">Cancel</button>\r\n                                <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <!-- header registration form ends-->\r\n\r\n                    <!-- Header Cards with nested Summary Cards -->\r\n                    <div class=\"col-md-12 my-4\" v-for=\"(header, headerIndex) in getFilteredHeaders()\" :key=\"header.id\">\r\n                        <!-- Header Card -->\r\n                        <div class=\"card mb-4 shadow \">\r\n                            <div class=\"card-header  text-white\">\r\n                                <div class=\"d-flex justify-content-between align-items-center\">\r\n                                    <div class=\"d-flex flex-column gap-1 text-center w-100\">\r\n                                        <h4 class=\"card-title mb-0\">{{ header.name }}</h4>\r\n                                        <small v-if=\"header.description\">{{ header.description }}</small>\r\n                                    </div>\r\n                                      <div class=\"mb-3 text-end btn-group\">\r\n                               \r\n                                    <button\r\n                                    v-if=\"user_permissions.includes('is_md')\"\r\n                                    class=\"btn btn-danger btn-sm me-2\">\r\n                                           <span\r\n                                            class=\"delete-icon\"\r\n                                            @click=\"deleteHeader(header.id)\"\r\n                                            :class=\"{ 'disabled-link': deletingHeader === header.id }\"\r\n                                        >\r\n                                            <span v-if=\"deletingHeader === header.id\" class=\"spinner-border spinner-border-sm text-light\"></span>\r\n                                            <svg v-else\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"20\"\r\n                                                height=\"20\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"cursor-pointer\"\r\n                                            >\r\n                                                <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                            </svg>\r\n                                        </span>\r\n                                    </button>\r\n                                         <button \r\n                                         v-if=\"user_permissions.includes('is_md')\"\r\n                                        class=\"btn btn-sm btn-primary \"\r\n                                        @click=\"openSummaryRegistration(header)\">\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-plus-circle\" viewBox=\"0 0 16 16\">\r\n                                            <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\r\n                                            <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\r\n                                        </svg>\r\n                                        &nbsp;NEW\r\n                                    </button>\r\n                                </div>\r\n                                \r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div class=\"card-body\">\r\n                                <!-- Create Summary Button for this Header -->\r\n                              \r\n\r\n                                <!-- Summary Registration Form for this Header -->\r\n                                <div v-if=\"summary_registration && currentHeader && currentHeader.id === header.id\">\r\n                                    <form class=\"mt-3 p-3 border rounded bg-light\" @submit.prevent=\"registerSummary\">\r\n                                        <h5 class=\"text-center\">CREATE SUMMARY FOR: {{ header.name.toUpperCase() }}</h5>\r\n                                  <div class=\"form-group\">\r\n  <label class=\"form-label\">Summary Name</label>\r\n  <div class=\"input-group\">\r\n    <input type=\"text\" class=\"form-control me-2\" placeholder=\"Enter Summary Name\" v-model=\"name\" required>\r\n    <div class=\"input-group-append btn-group \">\r\n      <button type=\"button\" class=\"btn btn-danger me-2\" @click=\"closeSummaryRegistration\">Cancel</button>\r\n      <button type=\"submit\" class=\"btn btn-success\">Save</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n                                      \r\n                                    </form>\r\n                                </div>\r\n\r\n                                <!-- Summary Cards inside Header Card -->\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-md-12 mb-3\" v-for=\"(summary, summaryIndex) in header.summaries\" :key=\"summary.id\">\r\n                                        <div class=\"card mb-3 shadow-sm\">\r\n                                            <div class=\"card-header bg-light\">\r\n                                                <div class=\"d-flex justify-content-between align-items-center\">\r\n                                                    <div class=\"d-flex flex-column gap-1\">\r\n                                                        <h6 class=\"card-title mb-0\">{{ summary.name }}</h6>\r\n                                                        <small v-if=\"summary.description\" class=\"text-muted\">{{ summary.description }}</small>\r\n                                                    </div>\r\n                                                    <div class=\"text-end\">\r\n                                                        <button class=\"btn btn-danger btn-sm me-2\"\r\n                                                        v-if=\"user_permissions.includes('is_md')\"\r\n                                                        >\r\n <span\r\n                                                            class=\"delete-icon\"\r\n                                                            @click=\"deletesummary(summary.id)\"\r\n                                                            :class=\"{ 'disabled-link': deletingSummary === summary.id }\"\r\n                                                        >\r\n                                                            <span v-if=\"deletingSummary === summary.id\" class=\"spinner-border spinner-border-sm \"></span>\r\n                                                            <svg v-else\r\n                                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                                width=\"12\"\r\n                                                                height=\"12\"\r\n                                                                viewBox=\"0 0 24 24\"\r\n                                                                fill=\"none\"\r\n                                                                stroke=\"currentColor\"\r\n                                                                stroke-width=\"1.5\"\r\n                                                                stroke-linecap=\"round\"\r\n                                                                stroke-linejoin=\"round\"\r\n                                                                class=\"cursor-pointer\"\r\n                                                            >\r\n                                                                <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                                                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                                            </svg>\r\n                                                        </span>\r\n                                                        </button>\r\n                                                       \r\n                                                       <button \r\n                                                       v-if=\"user_permissions.includes('is_md')\"\r\n                                                        class=\"btn btn-sm btn-primary me-2\"\r\n                                                        @click=\"showItemForm[summary.id] =! showItemForm[summary.id] \">\r\n                                                         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-plus-circle\" viewBox=\"0 0 16 16\">\r\n                                            <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\r\n                                            <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\r\n                                        </svg>\r\n                                                        Add Item\r\n                                                    </button>\r\n\r\n                                                    <button \r\n                                                    v-if=\"user_permissions.includes('can_print_summary')\"\r\n                                                        class=\"btn btn-success btn-sm\" \r\n                                                        @click=\"printSummaryItems(summary, header.name)\" \r\n                                                        title=\"Print Summary Items\">\r\n                                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                                                            <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                                                            <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                                                        </svg>\r\n                                                        &nbsp;\r\n                                                    </button>\r\n\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            \r\n                                            <div class=\"card-body\">\r\n                                                <!-- Add Item button -->\r\n                                               \r\n\r\n                                                <!-- Add Item Form -->\r\n<form \r\n  v-if=\"showItemForm[summary.id]\"\r\n  @submit.prevent=\"registerSummaryItems(summary.id)\" \r\n  class=\"mb-3 p-3 border rounded bg-light\">\r\n  <div class=\"row g-3\">\r\n    <div class=\"col-12 col-sm-6 col-lg-4\">\r\n      <label class=\"form-label\">Item Name</label>\r\n      <input type=\"text\" class=\"form-control\" v-model=\"newItem.name\" placeholder=\"Enter Item Name\" required>\r\n    </div>\r\n    <div class=\"col-12 col-sm-6 col-md-4 col-lg-2\">\r\n      <label class=\"form-label\">Unit</label>\r\n      <multiselect \r\n        v-model=\"newItem.unit\" \r\n        :options=\"units\"\r\n        track-by=\"id\"\r\n        label=\"short_name\"\r\n        placeholder=\"Select Unit\" \r\n        :searchable=\"true\" \r\n        :multiple=\"false\" \r\n        required>\r\n      </multiselect>\r\n    </div>\r\n    <div class=\"col-12 col-sm-6 col-md-4 col-lg-2\">\r\n      <label class=\"form-label\">Quantity</label>\r\n      <input type=\"number\" class=\"form-control\" v-model=\"newItem.quantity\" placeholder=\"Quantity\" required>\r\n    </div>\r\n     <div class=\"col-12 col-sm-6 col-md-4 col-lg-2\">\r\n              <label class=\"form-label\">Rate</label>\r\n  <input \r\n    type=\"text\" \r\n    class=\"form-control form-control-sm\" \r\n    :value=\"formatRateDisplay(rate)\" \r\n    @input=\"handleRateInput($event, rate)\"\r\n    placeholder=\"EnterÂ rate\"\r\n>\r\n     </div>\r\n\r\n    <div class=\"col-12 col-sm-6 col-md-4 col-lg-2 d-flex align-items-end\">\r\n      <div class=\"btn-group w-100\">\r\n        <button \r\n          type=\"button\" \r\n          class=\"btn btn-danger  me-2\"\r\n          @click=\"showItemForm[summary.id] = false,resetItemForm()\">\r\n          Cancel\r\n        </button>\r\n        <button type=\"submit\" class=\"btn btn-success \" :disabled=\"loadingItem\">\r\n          <span v-if=\"loadingItem\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n          <span v-else>Save</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n\r\n           \r\n          \r\n                    <div class=\"custom-table\">\r\n                                                    <v-client-table \r\n                                                        :data=\"summary.summary_items\" \r\n                                                        :columns=\"summaryItemColumns\" \r\n                                                        :options=\"table_option\">\r\n                                                        <template #rate=\"props\">\r\n                                                            {{ formatNumber(props.row.rate) }}\r\n                                                        </template>\r\n                                                        <template #actions=\"props\">\r\n                                                            <a\r\n                                                            v-if=\"user_permissions.includes('is_md')\"\r\n                                                            href=\"javascript:;\" class=\"edit me-2\" @click=\"edit_row(props.row)\" data-bs-toggle=\"modal\" data-bs-target=\"#editModal\">\r\n                                                                <svg\r\n                                                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                                    width=\"26\"\r\n                                                                    height=\"26\"\r\n                                                                    viewBox=\"0 0 24 24\"\r\n                                                                    fill=\"none\"\r\n                                                                    stroke=\"currentColor\"\r\n                                                                    stroke-width=\"1.5\"\r\n                                                                    stroke-linecap=\"round\"\r\n                                                                    stroke-linejoin=\"round\"\r\n                                                                    class=\"text-primary\"\r\n                                                                >\r\n                                                                    <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                                    <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                                                </svg>\r\n                                                            </a>\r\n                                                            <a \r\n                                                                href=\"javascript:;\" \r\n                                                                class=\"cancel\" \r\n                                                                @click=\"deleteItem(props.row.id, summary.id)\" \r\n                                                                :class=\"{ 'disabled-link': deletingItem === props.row.id }\"\r\n                                                            >\r\n                                                                <span v-if=\"deletingItem === props.row.id\" class=\"spinner-border spinner-border-sm text-danger\"></span>\r\n                                                                <svg v-else\r\n                                                                v-if=\"user_permissions.includes('is_md')\"\r\n                                                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                                    width=\"26\"\r\n                                                                    height=\"26\"\r\n                                                                    viewBox=\"0 0 24 24\"\r\n                                                                    fill=\"none\"\r\n                                                                    stroke=\"currentColor\" \r\n                                                                    stroke-width=\"1.5\"\r\n                                                                    stroke-linecap=\"round\"\r\n                                                                    stroke-linejoin=\"round\"\r\n                                                                    class=\"text-danger\"\r\n                                                                >\r\n                                                                    <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                                                    <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                                                </svg>\r\n                                                            </a>\r\n                                                        </template>\r\n                                                    </v-client-table>\r\n    \r\n    <!-- Total Cost Row -->\r\n    <div class=\"row\">\r\n    <div class=\"col-md-2 mt-3 p-2 bg-light border rounded ms-auto\">\r\n        <div class=\"text-end\" style=\"font-size: 1.2rem;\">\r\n            <strong class=\"me-2 text-dark\">Grand Total:</strong>\r\n            <strong class = \"text-dark\">{{ formatNumber(summary.summary_items.reduce((acc, item) => acc + (item.quantity * item.rate || 0), 0)) }}</strong>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n                                                </div>\r\n                                            \r\n                                              \r\n                                                \r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <!-- Empty state for header with no summaries -->\r\n                                <div v-if=\"!header.summaries || header.summaries.length === 0\" class=\"text-center py-4\">\r\n                                    <p class=\"text-muted\">No summaries available for this header.</p>\r\n                                    <p class=\"text-muted small\">Click \"Create Summary\" above to add your first summary.</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Edit Modal -->\r\n                    <div class=\"modal fade mymodal\" id=\"editModal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n                        <div class=\"modal-dialog modal-xl\">\r\n                            <div class=\"modal-content\">\r\n                                <div class=\"modal-header\">\r\n                                    <h5 class=\"modal-title\" id=\"editModalLabel\"> Edit Summary Item</h5>\r\n                                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                                </div>\r\n                                <div class=\"modal-body\">\r\n                                    <div class=\"row mb-3\">\r\n                                        <div class=\"col-md-3\">\r\n                                            <label for=\"editunitName\">Name</label>\r\n                                            <input type=\"text\" class=\"form-control\" id=\"editunitName\" v-model=\"editingRow.name\">\r\n                                        </div>\r\n                                        <div class=\"col-md-3\">\r\n                                            <label for=\"editunitStatus\">Unit</label>\r\n                                            <multiselect \r\n                                                v-model=\"editingRow.unit\" \r\n                                                :options=\"units\"\r\n                                                track-by=\"id\"\r\n                                                label=\"short_name\"\r\n                                                :searchable=\"true\" \r\n                                                :multiple=\"false\" \r\n                                                required>\r\n                                            </multiselect>\r\n                                        </div>\r\n                                        <div class=\"col-md-2\">\r\n                                            <label for=\"editunitStatus\">Quantity</label>\r\n                                            <input type=\"number\" class=\"form-control\" id=\"editunitStatus\" v-model=\"editingRow.quantity\">\r\n                                        </div>\r\n                                        <div class=\"col-md-2\">\r\n                                            <label for=\"editunitStatus\">Rate</label>\r\n                                            <input type=\"number\" class=\"form-control\" id=\"editunitStatus\" v-model=\"editingRow.rate\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"close\">Close</button>\r\n                                    <button type=\"button\" class=\"btn btn-primary\" @click=\"save_edit\" :disabled=\"isSaving\">Save </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n    .card-header.bg-primary {\r\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\r\n    }\r\n    .card-header.bg-light {\r\n        background-color: #f8f9fa !important;\r\n        border-bottom: 1px solid #dee2e6;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n\r\n    useMeta({ title: 'Custom Table' });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const summaryItemColumns = ref(['SNo', 'name', 'unit', 'quantity', 'rate', 'cost','subtotal','actions']);\r\n    const headers = ref([]);\r\n    const name = ref('');\r\n    const rate = ref('')\r\n    const showItemForm = ref({});\r\n    const loading_spinner = ref(false);\r\n    const summary_registration = ref(false);\r\n    const header_registration = ref(false);\r\n    const header_name = ref('');\r\n    const header_description = ref('');\r\n    const description = ref('');\r\n    const remark = ref('');\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const formatNumber = inject('formatNumber');\r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const summaryFilters = ref('');\r\n    const newItem = ref({});\r\n    const loadingItem = ref(false);\r\n    const deletingItem = ref(null);\r\n    const deletingSummary = ref(null);\r\n    const deletingHeader = ref(null);\r\n    const currentHeader = ref(null); // Track which header we're creating summary for\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [5, 10, 20, 50],\r\n        skin: 'table table-hover',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        sortable: ['SNo', 'name', 'unit', 'quantity', 'rate', 'cost'],\r\n    });\r\n\r\n\r\n\r\n    const formatRateDisplay = (value) => {\r\n  if (!value) return ''\r\n  return Number(value).toLocaleString()\r\n}\r\n\r\nconst handleRateInput = (event) => {\r\n  const value = event.target.value.replace(/,/g, '') \r\n  if (!isNaN(value) && value !== '') {\r\n    rate.value = Number(value)\r\n    event.target.value = formatRateDisplay(value)\r\n  } else if (value === '') {\r\n    rate.value = ''\r\n    event.target.value = ''\r\n  }\r\n}\r\n\r\n\r\n   \r\n    const getSummary = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/header-summaries')\r\n            .then((response) => {\r\n                headers.value = response.data.map((header, headerIndex) => {\r\n                  return {\r\n    SNo: headerIndex + 1,\r\n    id: header.id,\r\n    name: header.name,\r\n    description: header.description,\r\n    summaries: header.summaries.map((sum, sumIndex) => ({\r\n        SNo: sumIndex + 1,\r\n        id: sum.id,\r\n        name: sum.name,\r\n        description: sum.description,\r\n        remark: sum.remark,\r\n        summary_items: sum.summary_items.map((item, itemIndex, arr) => {\r\n            const cost = item.quantity * item.rate;\r\n            const subtotal = arr\r\n                .slice(0, itemIndex + 1)\r\n                .reduce((acc, curr) => acc + curr.quantity * curr.rate, 0);\r\n            return {\r\n                SNo: itemIndex + 1,\r\n                id: item.id,\r\n                name: item.name,\r\n                description: item.description,\r\n                unit: item.unit,\r\n                quantity: item.quantity,\r\n                rate: item.rate,\r\n                cost: formatNumber(cost),\r\n                subtotal: formatNumber(subtotal),\r\n                remark: item.remark,\r\n            };\r\n        })\r\n    }))\r\n};\r\n\r\n                });\r\n                loading_spinner.value = false;\r\n            })\r\n            .catch(error => {\r\n                showError(error.message);\r\n                console.log(error)\r\n                loading_spinner.value = false;\r\n            });\r\n    };\r\n\r\n    const registerHeaderSummary = () => {\r\n        header_registration.value = false;\r\n        loading_spinner.value = true;\r\n        const itemData = {\r\n            name: header_name.value,\r\n            description: header_description.value \r\n        };\r\n\r\n        axiosInstance\r\n            .post('/header-summaries', itemData)\r\n            .then((response) => {\r\n                getSummary();\r\n                loading_spinner.value = false;\r\n                showMessage('Header summary registered successfully!');\r\n                resetForm();\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                console.log(error)\r\n            });\r\n    };\r\n\r\n    // Open summary registration for specific header\r\n    const openSummaryRegistration = (header) => {\r\n        currentHeader.value = header;\r\n        summary_registration.value =! summary_registration.value ;\r\n        name.value = ''; // Reset form\r\n    };\r\n\r\n    // Close summary registration\r\n    const closeSummaryRegistration = () => {\r\n        currentHeader.value = null;\r\n        name.value = '';\r\n    };\r\n\r\n    const registerSummary = async () => {\r\n        if (!currentHeader.value) {\r\n            showError(\"No header selected\");\r\n            return;\r\n        }\r\n\r\n        summary_registration.value = false;\r\n        loading_spinner.value = true;\r\n        const itemData = {\r\n            name: name.value,\r\n            header_summary_id: currentHeader.value.id, // Use the current header's ID\r\n            description: description.value,\r\n            remark: remark.value,\r\n        };\r\n\r\n       try{\r\n            const response = await axiosInstance.post('/summaries', itemData)\r\n              getSummary();\r\n                showMessage('Summary registered successfully!');\r\n                resetForm();\r\n                currentHeader.value = null;\r\n       } catch(error){\r\n          showError(error.message);\r\n          console.log(error)\r\n       }finally{\r\n        loading_spinner.value = false;\r\n       }\r\n    };\r\n\r\n    const registerSummaryItems = (summaryId) => {\r\n        loadingItem.value = true;\r\n        const itemData = {\r\n            summary_id: summaryId,\r\n            name: newItem.value.name,\r\n            unit: newItem.value.unit.short_name,\r\n            quantity: newItem.value.quantity,\r\n            rate: rate.value,\r\n            description: newItem.value.description,\r\n            remark: newItem.value.remark,\r\n        };\r\n\r\n        axiosInstance\r\n            .post('/summary-items', itemData)\r\n            .then((response) => {\r\n                getSummary();\r\n                loadingItem.value = false;\r\n                showMessage('Item registered successfully!');\r\n                resetItemForm();\r\n                showItemForm.value[summaryId] = false;\r\n            })\r\n            .catch((error) => {\r\n                showError(\"Error registering Item: \" + error.message);\r\n                loadingItem.value = false;\r\n            });\r\n    };\r\n\r\n    const resetItemForm = () => {\r\n        newItem.value = {\r\n            name: '',\r\n            unit: '',\r\n            description: '',\r\n            quantity: '',\r\n            rate: '',\r\n            remark: ''\r\n        };\r\n            rate.value = ''\r\n    };\r\n\r\n    const getFilteredHeaders = () => {\r\n        if (!headers.value) return [];\r\n        if (!summaryFilters.value || !summaryFilters.value.trim()) {\r\n            return headers.value;\r\n        }       \r\n        const filter = summaryFilters.value.toLowerCase();\r\n        return headers.value.filter(header => {\r\n            const headerMatch = header.name.toLowerCase().includes(filter);\r\n            const summaryMatch = header.summaries && header.summaries.some(summary => \r\n                summary.name.toLowerCase().includes(filter)\r\n            );\r\n            return headerMatch || summaryMatch;\r\n        });\r\n    };\r\n\r\n    const resetForm = () => {\r\n        name.value = '';\r\n        header_name.value = '';\r\n        header_description.value = '';\r\n        description.value = '';\r\n        remark.value = '';\r\n        currentHeader.value = null;\r\n      \r\n    };\r\n\r\n    const units = ref([]); \r\n    const getunits = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/units').then((response) => {\r\n            units.value = response.data;\r\n            loading_spinner.value = false;\r\n        }).catch(error => {\r\n            showError(error.message);\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n\r\n    const deleteHeader = async (id) => {\r\n        if (window.Swal) {\r\n            window.Swal.fire({\r\n                title: 'Delete Header Summary',\r\n                text: 'Are you sure you want to delete this header summary? This will also delete all associated summaries and items.',\r\n                icon: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonColor: '#3085d6',\r\n                cancelButtonColor: '#d33',\r\n                confirmButtonText: 'Yes, delete it!'\r\n            }).then(async (result) => {\r\n                if (result.isConfirmed) {\r\n                    if (deletingHeader.value === id) return;\r\n                    deletingHeader.value = id;\r\n                    try {\r\n                        const response = await axiosInstance.delete(`/header-summaries/${id}`);\r\n                        if (response.status === 200) {               \r\n                            showMessage('Header summary deleted successfully');\r\n                            getSummary();\r\n                        } else {\r\n                            showError(\"Failed to delete header summary\");\r\n                        }\r\n                    } catch (error) {\r\n                        showError(error.message);\r\n                    } finally {\r\n                        deletingHeader.value = null;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const deletesummary = async (id) => {\r\n        if (window.Swal) {\r\n            window.Swal.fire({\r\n                title: 'Delete Summary',\r\n                text: 'Are you sure you want to delete this summary? This will also delete all associated items.',\r\n                icon: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonColor: '#3085d6',\r\n                cancelButtonColor: '#d33',\r\n                confirmButtonText: 'Yes, delete it!'\r\n            }).then(async (result) => {\r\n                if (result.isConfirmed) {\r\n                    if (deletingSummary.value === id) return;\r\n                    deletingSummary.value = id;\r\n                    try {\r\n                        const response = await axiosInstance.delete(`/summaries/${id}`);\r\n                        if (response.status === 200) {               \r\n                            showMessage('Summary deleted successfully');\r\n                            getSummary();\r\n                        } else {\r\n                            showError(\"Failed to delete summary\");\r\n                        }\r\n                    } catch (error) {\r\n                        showError(error.message);\r\n                    } finally {\r\n                        deletingSummary.value = null;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const deleteItem = async (id, summaryId) => {\r\n        if (deletingItem.value === id) return; \r\n        deletingItem.value = id;\r\n\r\n        try {\r\n            const response = await axiosInstance.delete(`/summary-items/${id}`);\r\n            if (response.status === 200) {\r\n                getSummary();\r\n                showMessage('Item deleted successfully');\r\n            } else {\r\n                showError(\"Failed to delete item from server\");\r\n            }\r\n        } catch (error) {\r\n            showError(error.message);\r\n        } finally {\r\n            deletingItem.value = null;\r\n        }\r\n    };\r\n\r\n    const edit_row = (row) => {\r\n        editingRow.value = { ...row };\r\n        editingRow.value.rate = Number(row.rate);\r\n        const foundUnit = units.value.find(u => u.short_name === row.unit);\r\n        editingRow.value.unit = foundUnit || null;\r\n    }; \r\n\r\n    const save_edit = async () => {\r\n        try {\r\n            loading_spinner.value = true;\r\n            const response = await axiosInstance.put(`/summary-items/${editingRow.value.id}`, {\r\n                name: editingRow.value.name,\r\n                unit: editingRow.value.unit.short_name,\r\n                quantity: Number(editingRow.value.quantity), \r\n                rate: Number(editingRow.value.rate),         \r\n                description: editingRow.value.description,\r\n                remark: editingRow.value.remark,\r\n            });\r\n\r\n            if (response.status === 200) {\r\n                getSummary();\r\n                showMessage('Item updated successfully!');\r\n                document.getElementById('close').click();\r\n            }\r\n        } catch (error) {\r\n            showError(error.message);\r\n        } finally {\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n    const editingRow = ref({\r\n        id: null,\r\n        name: '',\r\n        unit: null,\r\n        quantity: '',\r\n        rate: ''\r\n    });\r\n\r\n    // Print functions remain the same as in your original code\r\n    const printSummary = () => {\r\n        // Your existing printSummary function\r\n    };\r\n\r\nconst printSummaryItems = (summary, headerName) => {\r\n  if (!summary || !summary.summary_items.length) {\r\n    showError(\"No items available to print for this summary\");\r\n    return;\r\n  }\r\n\r\n  const iframe = document.createElement(\"iframe\");\r\n  iframe.style.display = \"none\";\r\n  document.body.appendChild(iframe);\r\n\r\n  const currentDate = new Date().toLocaleDateString();\r\n\r\n  // Calculate running subtotals\r\n  let runningSubtotal = 0;\r\n  const itemsWithSubtotal = summary.summary_items.map(item => {\r\n    const cost = item.quantity * item.rate;\r\n    runningSubtotal += cost;\r\n    return {\r\n      ...item,\r\n      cost: cost,\r\n      subtotal: runningSubtotal\r\n    };\r\n  });\r\n\r\n  const totalCost = runningSubtotal;\r\n\r\n  const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>${summary.name} - Summary Items</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 14px; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }\r\n  .logo { width: 160px; height: auto; }\r\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\r\n  .report-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 14px; text-align: center; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; }\r\n  .company-title h2 { margin: 5px 0; font-size: 18px; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 12px; line-height: 1.4; font-weight: normal; }\r\n  .summary-title { margin-top: 30px; margin-bottom: 2px; font-size: 16px; font-weight: bold;  }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 2px; border: 1px solid #666; }\r\n  th, td { border: 1px solid #666; padding: 6px; font-size: 13px; text-align: left; }\r\n  th { background-color: #f2f2f2; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  .total-row { background-color: #f0f0f0; font-weight: bold; }\r\n  @media print { body { margin: 8mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"report-box\">\r\n     Report Date <br>\r\n    <span style=\"color:red;\">${currentDate}</span>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"reg-info\">\r\n  TIN: 135-489-247<br>\r\n  VRN: 40-032826-C\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\r\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\r\n</div>\r\n<div class=\"section-title\">${(headerName || 'SUMMARY').toUpperCase()}</div>\r\n\r\n<div class=\"summary-title\">${summary.name.toUpperCase()}</div>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th class=\"text-center\">#</th>\r\n      <th>Item Name</th>\r\n      <th class=\"text-center\">Unit</th>\r\n      <th class=\"text-right\">Quantity</th>\r\n      <th class=\"text-right\">Rate</th>\r\n      <th class=\"text-right\">Cost</th>\r\n      <th class=\"text-right\">Subtotal</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${itemsWithSubtotal.map((item, index) => `\r\n      <tr>\r\n        <td class=\"text-center\">${index + 1}</td>\r\n        <td>${item.name}</td>\r\n        <td class=\"text-center\">${item.unit}</td>\r\n        <td class=\"text-right\">${item.quantity}</td>\r\n        <td class=\"text-right\">${formatNumber(item.rate)}</td>\r\n        <td class=\"text-right\">${formatNumber(item.cost)}</td>\r\n        <td class=\"text-right\">${formatNumber(item.subtotal)}</td>\r\n      </tr>\r\n    `).join('')}\r\n  </tbody>\r\n  <tfoot>\r\n    <tr class=\"total-row\">\r\n      <td colspan=\"6\" class=\"text-right\"><strong>GRAND TOTAL</strong></td>\r\n      <td class=\"text-right\"><strong>${formatNumber(totalCost)}</strong></td>\r\n    </tr>\r\n  </tfoot>\r\n</table>\r\n\r\n<div style=\"margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;\">\r\n  <p>Â© ${new Date().getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 135-489-247 | VRN: 40-032826C</p>\r\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n  const iframeDoc = iframe.contentWindow.document;\r\n  iframeDoc.open();\r\n  iframeDoc.write(printContent);\r\n  iframeDoc.close();\r\n\r\n  iframe.onload = () => {\r\n    iframe.contentWindow.focus();\r\n    iframe.contentWindow.print();\r\n    setTimeout(() => document.body.removeChild(iframe), 1000);\r\n  };\r\n};\r\n\r\n    onMounted(() => {\r\n        getSummary();\r\n        getunits();\r\n    });\r\n</script>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=4312ad8e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","summaryItemColumns","ref","headers","name","rate","showItemForm","loading_spinner","summary_registration","header_registration","header_name","header_description","description","remark","showMessage","inject","showError","formatNumber","loadingIndicator","summaryFilters","newItem","loadingItem","deletingItem","deletingSummary","deletingHeader","currentHeader","user_permissions","JSON","parse","localStorage","getItem","permissions","table_option","perPage","perPageValues","skin","columnsClasses","actions","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","sortable","formatRateDisplay","value","Number","toLocaleString","handleRateInput","event","target","replace","isNaN","getSummary","get","then","response","data","map","header","headerIndex","SNo","id","summaries","sum","sumIndex","summary_items","item","itemIndex","arr","cost","quantity","subtotal","slice","reduce","acc","curr","unit","catch","error","message","console","log","registerHeaderSummary","itemData","post","resetForm","openSummaryRegistration","closeSummaryRegistration","registerSummary","async","header_summary_id","registerSummaryItems","summaryId","summary_id","short_name","resetItemForm","getFilteredHeaders","trim","toLowerCase","headerMatch","includes","summaryMatch","some","summary","units","getunits","deleteHeader","window","Swal","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","delete","status","deletesummary","deleteItem","edit_row","row","editingRow","foundUnit","find","u","save_edit","put","document","getElementById","click","printSummaryItems","headerName","length","iframe","createElement","style","display","body","appendChild","currentDate","Date","toLocaleDateString","runningSubtotal","itemsWithSubtotal","totalCost","printContent","toUpperCase","index","join","getFullYear","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","onMounted","__exports__"],"sourceRoot":""}