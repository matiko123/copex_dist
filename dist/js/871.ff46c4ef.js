"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[871],{10871:function(t,a,e){e.r(a),e.d(a,{default:function(){return Qe}});e(26699);var l=e(66252),n=e(3577),s=e(2262),o=e(49963),i=e(87066),d=e(26212),c=e.n(d);const r=t=>((0,l.dD)("data-v-38f49a92"),t=t(),(0,l.Cn)(),t),u={class:"layout-px-spacing"},b={class:"offcanvas offcanvas-end","data-bs-scroll":"true",tabindex:"-1",id:"offcanvasWithBothOptions","aria-labelledby":"offcanvasWithBothOptionsLabel"},m=r((()=>(0,l._)("div",{class:"offcanvas-header"},[(0,l._)("h5",{class:"offcanvas-title",id:"offcanvasWithBothOptionsLabel"},"PROJECT LISTS"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1))),p={class:"offcanvas-body"},v={class:"row"},h={class:"col-12"},g={class:"list-group",id:"list-tab",role:"tablist"},_=["id","href","aria-controls","onClick"],y={class:"d-flex mb-2 me-1"},w={class:"ms-auto"},f={key:0,class:"btn","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},x=r((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-list-ul",viewBox:"0 0 16 16"},[(0,l._)("path",{"fill-rule":"evenodd",d:"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"})],-1))),k=[x],S={key:1,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},z={key:0,class:"d-flex mb-2"},C={class:"ms-auto"},D={key:1,class:"accordion accordion-flush",id:"accordionFlushExample"},q={class:"bg-dark mt-2 mb-2"},L={class:"text-center text-white m-0"},H={class:"d-flex mb-2"},$={class:"ms-auto"},B={class:"accordion-item",style:{border:"1px solid green"}},M={class:"accordion-header"},V=["data-bs-target","aria-controls"],U=["id"],E={class:"accordion-body"},O={class:"d-flex mb-2"},T={class:"ms-auto"},j=["onClick"],A=["id"],N={class:"accordion-item",style:{border:"1px solid orange"}},Q={class:"accordion-header"},I=["data-bs-target","aria-controls"],Y=["id","data-bs-parent"],R={class:"accordion-body"},W={class:"d-flex mb-2"},K={class:"ms-auto"},P={class:"btn group"},F=["onClick"],J=["onClick"],X={class:"table-responsive"},Z={class:"table table-bordered table-sm"},G=r((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"SN"),(0,l._)("th",null,"Name"),(0,l._)("th",null,"Unit"),(0,l._)("th",null,"Quantity"),(0,l._)("th",null,"Rate"),(0,l._)("th",null,"Total")])],-1))),tt={class:"text-center"},at={class:"text-start"},et={class:"text-end"},lt={class:"text-end"},nt=["id"],st={class:"accordion-item",style:{border:"1px solid blue"}},ot={class:"accordion-header"},it=["data-bs-target","aria-controls"],dt=["id","data-bs-parent"],ct={class:"accordion-body"},rt={class:"d-flex mb-2"},ut={class:"ms-auto"},bt=["onClick"],mt={class:"table table-bordered table-sm"},pt=r((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"SN"),(0,l._)("th",null,"Name"),(0,l._)("th",null,"Unit"),(0,l._)("th",null,"Quantity"),(0,l._)("th",null,"Rate"),(0,l._)("th",null,"Total")])],-1))),vt={class:"text-center"},ht={class:"text-start"},gt={class:"text-end"},_t={class:"text-end"},yt={key:2,class:"table-responsive",style:{"max-height":"600px","overflow-y":"auto"}},wt={key:0,class:"table table-bordered mt-4"},ft={class:"thead-light",style:{position:"sticky",top:"0",background:"white","z-index":"5"}},xt=r((()=>(0,l._)("th",{scope:"col",class:"text-dark"},"Code/SN",-1))),kt=r((()=>(0,l._)("th",{scope:"col",class:"text-dark"},"Description",-1))),St=r((()=>(0,l._)("th",{scope:"col",class:"text-dark"},"Unit",-1))),zt=r((()=>(0,l._)("th",{scope:"col",class:"text-dark"},"Quantity",-1))),Ct=r((()=>(0,l._)("th",{scope:"col",class:"text-dark"},"Rate",-1))),Dt=r((()=>(0,l._)("th",{scope:"col",class:"text-dark"},"Total",-1))),qt={key:0,scope:"col",class:"text-dark"},Lt={colspan:"6",class:"bg-dark text-white"},Ht={colspan:"1",class:"text-center"},$t={colspan:"5",class:"text-start"},Bt=["onClick"],Mt=r((()=>(0,l._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},null,-1))),Vt=r((()=>(0,l._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},null,-1))),Ut=[Mt,Vt],Et={colspan:"1",class:"text-center"},Ot={colspan:"5",class:"text-start"},Tt={class:"text-center"},jt={class:"text-start"},At={class:"text-end"},Nt={class:"text-end"},Qt={class:"text-end"},It=["onClick"],Yt=r((()=>(0,l._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},null,-1))),Rt=r((()=>(0,l._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},null,-1))),Wt=[Yt,Rt],Kt=["onClick"],Pt=r((()=>(0,l._)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"},null,-1))),Ft=r((()=>(0,l._)("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"},null,-1))),Jt=[Pt,Ft],Xt={colspan:"1",class:"text-center"},Zt={colspan:"5",class:"text-start"},Gt={class:"text-center"},ta={class:"text-start"},aa={class:"text-end"},ea={class:"text-end"},la={class:"text-end"},na=["onClick"],sa=r((()=>(0,l._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},null,-1))),oa=r((()=>(0,l._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},null,-1))),ia=[sa,oa],da=["onClick"],ca=r((()=>(0,l._)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"},null,-1))),ra=r((()=>(0,l._)("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"},null,-1))),ua=[ca,ra],ba={key:0},ma={key:3,class:"text-center"},pa={key:4,class:"text-center"},va={key:5,class:"table-responsive"},ha=r((()=>(0,l._)("h5",{class:"text-center bg-dark"},"Summary",-1))),ga={class:"table table-bordered"},_a={class:"fw-bold"},ya={class:"text-end fw-bold"},wa={class:"table-secondary"},fa=r((()=>(0,l._)("td",{class:"fw-bold"},"A Total of Bills",-1))),xa={class:"text-end fw-bold"},ka={class:"modal fade mymodal",id:"edit","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Sa={class:"modal-dialog modal-xl modal-dialog-centered"},za={class:"modal-content"},Ca=r((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Edit BOQ Line "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close-edit"})],-1))),Da={class:"modal-body"},qa={class:"row"},La={class:"col-md-3"},Ha={class:"col-md-3"},$a={class:"col-md-3"},Ba={class:"col-md-3"},Ma={class:"modal-footer"},Va=r((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close",-1))),Ua=["disabled"],Ea=["innerHTML"],Oa={key:1},Ta={class:"modal fade mymodal",id:"lineModal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ja={class:"modal-dialog modal-xl modal-dialog-centered"},Aa={class:"modal-content"},Na={class:"modal-header"},Qa={class:"modal-title fs-5",id:"staticBackdropLabel"},Ia=r((()=>(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"closeLine"},null,-1))),Ya={class:"modal-body"},Ra={class:"row"},Wa={class:"col-md-3 mt-1"},Ka={class:"col-md-9 mt-1"},Pa={class:"col-md-3 mt-1"},Fa={class:"col-md-4 mt-1"},Ja={class:"col-md-5 mt-1"},Xa={class:"modal-footer"},Za=r((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close",-1))),Ga=["disabled"],te=["innerHTML"],ae={key:1},ee={class:"modal fade mymodal",id:"seriesModal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},le={class:"modal-dialog modal-xl modal-dialog-centered"},ne={class:"modal-content"},se={class:"modal-header"},oe={class:"modal-title fs-5",id:"staticBackdropLabel"},ie=r((()=>(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close-series"},null,-1))),de=["onSubmit"],ce={class:"modal-body"},re={class:"modal-footer"},ue=r((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close",-1))),be=["disabled"],me=["innerHTML"],pe={key:1},ve={class:"modal fade mymodal",id:"sectionModal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},he={class:"modal-dialog modal-xl modal-dialog-centered"},ge={class:"modal-content"},_e={class:"modal-header"},ye={class:"modal-title fs-5",id:"staticBackdropLabel"},we=r((()=>(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"closeSection"},null,-1))),fe={class:"modal-body"},xe={class:"modal-footer"},ke=r((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close",-1))),Se=["disabled"],ze=["innerHTML"],Ce={key:1},De={class:"modal fade mymodal",id:"subSectionModal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},qe={class:"modal-dialog modal-xl modal-dialog-centered"},Le={class:"modal-content"},He={class:"modal-header"},$e={class:"modal-title fs-5",id:"staticBackdropLabel"},Be=r((()=>(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"closeSubSection"},null,-1))),Me={class:"modal-body"},Ve={class:"modal-footer"},Ue=r((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close",-1))),Ee=["disabled"],Oe=["innerHTML"],Te={key:1};var je={setup(t){const a=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),e=(0,l.f3)("showMessage"),d=(0,l.f3)("showError"),r=(0,l.f3)("formatDate"),x=(0,l.f3)("loadingSpinner"),Mt=(0,l.f3)("showConfirmation"),Vt=JSON.parse(localStorage.getItem("user")).permissions,Yt=(0,s.iH)(!1),Rt=(0,s.iH)(""),Pt=(0,s.iH)(""),Ft=(0,s.iH)(!1),sa=(0,s.iH)(!1),oa=(0,s.iH)(""),ca=t=>{Pt.value=t,oa.value=Ie.value.find((t=>Pt.value.unit===t.short_name))},ra=async()=>{sa.value=!0;const t={name:Pt.value.name,quantity:Pt.value.quantity,rate:Pt.value.rate,unit:oa.value.short_name};try{await a.put(`boq-lines/${Pt.value.id}`,t);e("updated Successfully"),document.getElementById("close-edit").click(),We(Rt.value.id)}catch(l){d(l.message),console.log(l)}finally{sa.value=!1}},je=(0,s.iH)([]),Ae=async()=>{try{const t=await a.get("/projects");je.value=t.data}catch(t){}},Ne=async t=>{const a=await Mt("Delete BOQ Line","Confirm Deleting "+t.name,`/boq-lines/${t.id}`,"delete");a?.refresh&&We(Rt.value.id)},Qe=async t=>{const a=await Mt("Delete BOQ Series","Confirm Deleting "+t.name,`/boq-series/${t.id}`,"delete");a?.refresh&&We(Rt.value.id)},Ie=(0,s.iH)([]),Ye=async()=>{try{const t=await a.get("/units");Ie.value=t.data}catch(t){}};(0,l.YP)(Rt,(t=>{We(t.id)}));const Re=(0,s.iH)([]),We=async t=>{try{const e=await a.get(`/boq?project_id=${t}`);Re.value=e.data.data}catch(e){}},Ke=(0,s.iH)(""),Pe=async()=>{al.value=!0;try{const t={project_id:Rt.value.id,name:Ke.value};await a.post("/boq-series",t);We(Rt.value.id),e("Series registered!"),document.getElementById("close-series").click(),Ke.value=""}catch(t){d(t.message),console.log(t)}finally{al.value=!1}},Fe=(0,s.iH)(""),Je=async()=>{al.value=!0;const t={series_id:Ke.value.id,name:Fe.value};try{await a.post("/boq-sections",t);We(Rt.value.id),e("Section Registered!"),document.getElementById("closeSection").click(),Fe.value=""}catch(l){d(l.message),console.log(l)}finally{al.value=!1}},Xe=(0,s.iH)(""),Ze=async()=>{al.value=!0;try{await a.post("/boq-sub-sections",{name:Xe.value,section_id:Fe.value.id});We(Rt.value.id),Xe.value="",document.getElementById("closeSubSection").click(),e("sub section added!")}catch(t){console.error("Error registering sub section:",t),d("Failed to add sub section.")}finally{al.value=!1}},Ge=(0,s.iH)(""),tl=(0,s.iH)({no:"",name:"",unit:"",quantity:"",rate:""}),al=(0,s.iH)(!1),el=async()=>{al.value=!0;try{const t={item_no:tl.value.no,name:tl.value.name,unit:tl.value.unit.short_name,quantity:tl.value.quantity,rate:tl.value.rate,section_id:Fe.value.id};await a.post("/boq-lines",t);We(Rt.value.id),e("Line Registered!"),document.getElementById("closeLine").click(),tl.value={name:"",unit:"",quantity:"",rate:""}}catch(t){d(t.message),console.log(t)}finally{al.value=!1}},ll=async()=>{const t=Re.value;try{const a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a);const e=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Bill Of Quantity</title>\n<style>\n  body { font-family: 'Segoe UI', Arial, sans-serif; margin: 40px; font-size: 13px; color: #222; }\n  .header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 10px; }\n  .logo { width: 150px; height: auto; }\n  .gatepass-box { border: 2px solid #000; padding: 6px 14px; font-weight: bold; font-size: 14px; border-radius: 6px; background: #f9f9f9; box-shadow: 0 0 3px rgba(0,0,0,0.2); }\n  .company-title { text-align: center; margin: 25px 0 15px 0; }\n  .company-title h2 { margin: 0; font-size: 18px; text-transform: uppercase; }\n  .details { margin-top: 15px; line-height: 2; }\n  .line-field { display: flex; justify-content: space-between; margin-bottom: 6px; }\n  .label { width: 35%; font-weight: bold; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 11px; line-height: 1.4; font-weight: normal; }\n  .value { flex: 1; border-bottom: 1px solid #000; text-align: center; padding-bottom: 2px; }\n  table { width: 100%; border-collapse: collapse; margin-top: 15px; border-radius: 6px; overflow: hidden; }\n  table.items thead th { border: 1px solid #000; font-weight: bold; text-align: center; }\n  table.items td { border: 1px solid #000; padding: 6px; vertical-align: middle; text-align: center; }\n  .signatures { margin-top: 40px; display: flex; justify-content: space-between; align-items: center; }\n  .signature-box { text-align: center; width: 45%; }\n  .signature-line { margin-top: 50px; border-top: 1px solid #000; width: 80%; margin-left: auto; margin-right: auto; }\n  .check-square { width: 20px; height: 20px; border: 1px solid #000; display: inline-block; }\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\n\n  thead th {\n    background: #f0f0f0 !important;\n    color: #000 !important;\n  }\n\n  tr.summary-header,\n  tr.boq-header {\n    background: #000 !important;\n    color: #fff !important;\n    -webkit-print-color-adjust: exact !important;\n    print-color-adjust: exact !important;\n  }\n</style>\n</head>\n<body>\n\n  <div class="header">\n  <img src="https://bushman.ink/copex.jpg" class="logo" />\n  <div class="gatepass-box">\n    Date : ${r(Rt.value.created_at??"")}\n  </div>\n</div>\n<div class="reg-info">\n  TIN: 135-489-247<br>\n  VRN: 40-032826C\n</div>\n<div class="company-title">\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\n</div>\n\n\n\n<table class="items">\n  <thead>\n    <tr>\n      <th>CODE/SN</th>\n      <th>DESCRIPTION</th>\n      <th>UNIT</th>\n      <th>QUANTITY</th>\n      <th>RATE</th>\n      <th>RATE</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="boq-header">\n      <td colspan="6">Bill of Quantity ${Rt.value.project_name}</td>\n    </tr>\n    ${t.map(((t,a)=>`\n      <tr style="border:0.2px solid black">\n        <th colspan="1" class="text-center">SERIES ${a+1}</th>\n        <th colspan="5" style="text-align:start">${t.name}</th>\n        ${t.sections.map(((t,e)=>`\n          <tr style="border:0.2px solid black">\n            <th colspan="1" class="text-center">SECTION ${a+1}.${e+1}</th>\n            <th colspan="5" style="text-align:start">${t.name}</th>\n             ${t.lines.map(((t,a)=>`\n                  <tr>\n                    <td class="text-center">${String.fromCharCode(97+a)}</td>\n                    <td class="text-start">${t.name}</td>\n                    <td>${t.unit}</td>\n                    <td>${t.quantity}</td>\n                    <td class="text-end">${t.rate.toLocaleString()}</td>\n                    <td class="text-end">${(t.rate*t.quantity).toLocaleString()}</td>\n                  </tr>`)).join("")}\n\n            ${t.sub_sections.map(((t,l)=>`\n              <tr style="border:0.2px solid black">\n                <th colspan="1" class="text-center">${a+1}.${e+1}.${l+1}</th>\n                <th colspan="5" style="text-align:start">${t.name}</th>\n                ${t.lines.map(((t,a)=>`\n                  <tr>\n                    <td class="text-center">${String.fromCharCode(97+a)}</td>\n                    <td class="text-start">${t.name}</td>\n                    <td>${t.unit}</td>\n                    <td>${t.quantity}</td>\n                    <td class="text-end">${t.rate.toLocaleString()}</td>\n                    <td class="text-end">${(t.rate*t.quantity).toLocaleString()}</td>\n                  </tr>`)).join("")}\n              </tr>`)).join("")}\n          </tr>`)).join("")}\n      </tr>`)).join("")}\n    ${t&&0!==t.length?"":'<tr><td colspan="4">No items found</td></tr>'}\n\n    <tr class="summary-header">\n      <th colspan="6" style="text-align:center">Summary</th>\n    </tr>\n${(()=>{let a=0;const e=t.map(((t,e)=>{const l=t.sections.reduce(((t,a)=>{const e=a.lines.reduce(((t,a)=>t+a.quantity*a.rate),0),l=a.sub_sections.reduce(((t,a)=>t+a.lines.reduce(((t,a)=>t+a.quantity*a.rate),0)),0);return t+e+l}),0);return a+=l,`\n      <tr>\n        <th colspan="5" style="text-align:start">SERIES ${e+1}</th>\n        <th colspan="1" style="text-align:end">${l.toLocaleString()}</th>\n      </tr>\n    `})).join("");return e+`\n    <tr>\n      <th colspan="5" style="text-align:start">A Total of Bills</th>\n      <th colspan="1" style="text-align:end">${a.toLocaleString()}</th>\n    </tr>\n  `})()}\n\n  </tbody>\n</table>\n\n</body>\n</html>\n`,l=a.contentWindow.document;l.open(),l.write(e),l.close(),a.onload=()=>{a.contentWindow.focus(),a.contentWindow.print(),setTimeout((()=>{document.body.removeChild(a)}),1e3)}}catch(a){console.error("Print error:",a),d(`Failed to print boq ${a.message}`)}},nl=(0,s.iH)(!1),sl=()=>{window.innerWidth<991&&(nl.value=!0)};(0,l.bv)((()=>{sl(),Ae(),Ye()}));const ol=(0,s.iH)(0);function il(){ol.value<10&&ol.value++}return(t,a)=>((0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",{class:"mt-5",style:(0,n.j5)({opacity:1-.1*ol.value,transition:"opacity 0.5s"})},[(0,l._)("h4",{class:"text-center",onClick:il,style:{cursor:"pointer"}}," BILL OF QUANTITY ")],4),(0,l._)("div",b,[m,(0,l._)("div",p,[(0,l._)("div",v,[(0,l._)("div",h,[(0,l._)("div",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(je.value,(t=>((0,l.wg)(),(0,l.iD)("a",{key:t.id,class:"list-group-item list-group-item-action",id:"project-link-"+t.id,"data-bs-toggle":"list",href:"#project-"+t.id,role:"tab","aria-controls":"project-"+t.id,onClick:a=>Rt.value=t,"data-bs-dismiss":"offcanvas"},(0,n.zw)(t.short_name),9,_)))),128))])])])])]),(0,l._)("div",y,[(0,l._)("div",w,[nl.value?((0,l.wg)(),(0,l.iD)("button",f,k)):((0,l.wg)(),(0,l.iD)("button",S,"Select Project from the lists"))])]),Rt.value?((0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("div",C,[(0,s.SU)(Vt).includes("can_register_boq")&&!Yt.value?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:a[0]||(a[0]=t=>Yt.value=!0),class:"btn btn-primary me-2"},"Add BOQ")):(0,l.kq)("",!0),Yt.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn btn-success",onClick:a[1]||(a[1]=t=>ll())},"Print BOQ")),Yt.value?((0,l.wg)(),(0,l.iD)("button",{key:2,onClick:a[2]||(a[2]=t=>Yt.value=!1),class:"btn btn-secondary"},"View BOQ")):(0,l.kq)("",!0)])])):(0,l.kq)("",!0),Yt.value?((0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("div",q,[(0,l._)("h6",L,(0,n.zw)(Rt.value.project_name),1)]),(0,l._)("div",H,[(0,l._)("div",$,[(0,l._)("button",{class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#seriesModal",onClick:a[3]||(a[3]=t=>Ke.value="")}," Add Series ")])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Re.value,((t,a)=>((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("h2",M,[(0,l._)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#accordion${t.id}`,"aria-expanded":"false","aria-controls":`accordion${t.id}`},(0,n.zw)(a+1)+". "+(0,n.zw)(t.name),9,V)]),(0,l._)("div",{id:`accordion${t.id}`,class:"accordion-collapse collapse"},[(0,l._)("div",E,[(0,l._)("div",O,[(0,l._)("div",T,[(0,l._)("button",{class:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#sectionModal",onClick:a=>Ke.value=t}," Add Section ",8,j)])]),(0,l._)("div",{id:`accordionSeries${t.id}`,class:"accordion"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.sections,((a,e)=>((0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("h2",Q,[(0,l._)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#section${a.id}`,"aria-expanded":"false","aria-controls":`section${a.id}`},(0,n.zw)(e+1)+". "+(0,n.zw)(a.name),9,I)]),(0,l._)("div",{id:`section${a.id}`,class:"accordion-collapse collapse","data-bs-parent":`#accordionSeries${t.id}`},[(0,l._)("div",R,[(0,l._)("div",W,[(0,l._)("div",K,[(0,l._)("div",P,[(0,l._)("button",{class:"btn btn-primary me-2","data-bs-toggle":"modal","data-bs-target":"#subSectionModal",onClick:t=>{Fe.value=a,Xe.value=""}}," Add Sub Section ",8,F),(0,l._)("button",{class:"btn btn-secondary","data-bs-toggle":"modal","data-bs-target":"#lineModal",onClick:t=>{Fe.value=a,Xe.value=""}}," Add Line ",8,J)])])]),(0,l._)("div",X,[(0,l._)("table",Z,[G,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.lines,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",tt,(0,n.zw)(a+1),1),(0,l._)("td",at,(0,n.zw)(t.name),1),(0,l._)("td",null,(0,n.zw)(t.unit),1),(0,l._)("td",null,(0,n.zw)(t.quantity),1),(0,l._)("td",et,(0,n.zw)(Number(t.rate).toLocaleString()),1),(0,l._)("td",lt,(0,n.zw)((t.quantity*t.rate).toLocaleString()),1)])))),128))])])]),(0,l._)("div",{id:`accordionSub${a.id}`,class:"accordion"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.sub_sections,((t,e)=>((0,l.wg)(),(0,l.iD)("div",st,[(0,l._)("h2",ot,[(0,l._)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#sub${t.id}`,"aria-expanded":"false","aria-controls":`sub${t.id}`},(0,n.zw)(e+1)+". "+(0,n.zw)(t.name),9,it)]),(0,l._)("div",{id:`sub${t.id}`,class:"accordion-collapse collapse","data-bs-parent":`#accordionSub${a.id}`},[(0,l._)("div",ct,[(0,l._)("div",rt,[(0,l._)("div",ut,[(0,l._)("button",{class:"btn btn-secondary","data-bs-toggle":"modal","data-bs-target":"#lineModal",onClick:a=>Ge.value=t}," Add Line ",8,bt)])]),(0,l._)("table",mt,[pt,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.lines,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",vt,(0,n.zw)(a+1),1),(0,l._)("td",ht,(0,n.zw)(t.name),1),(0,l._)("td",null,(0,n.zw)(t.unit),1),(0,l._)("td",null,(0,n.zw)(t.quantity),1),(0,l._)("td",gt,(0,n.zw)(t.rate.toLocaleString()),1),(0,l._)("td",_t,(0,n.zw)((t.quantity*t.rate).toLocaleString()),1)])))),128))])])])],8,dt)])))),256))],8,nt)])],8,Y)])))),256))],8,A)])],8,U)])))),256))])):((0,l.wg)(),(0,l.iD)("div",yt,[Rt.value?((0,l.wg)(),(0,l.iD)("table",wt,[(0,l._)("thead",ft,[(0,l._)("tr",{onClick:a[4]||(a[4]=t=>Ft.value=!Ft.value)},[xt,kt,St,zt,Ct,Dt,(0,s.SU)(Vt).includes("can_edit_boq_line")||(0,s.SU)(Vt).includes("can_delete_boq_line")?((0,l.wg)(),(0,l.iD)("th",qt,"Actions")):(0,l.kq)("",!0)])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",Lt," Bill of Quantity "+(0,n.zw)(Rt.value.project_name),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Re.value,((t,a)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:"series-"+a},[(0,l._)("tr",null,[(0,l._)("th",Ht,"SERIES "+(0,n.zw)(a+1),1),(0,l._)("th",$t,(0,n.zw)(t.name),1),(0,l._)("th",null,[(0,s.SU)(Vt).includes("can_delete_boq_line")?((0,l.wg)(),(0,l.iD)("svg",{key:0,style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-trash text-danger me-2",onClick:a=>Qe(t),viewBox:"0 0 16 16"},Ut,8,Bt)):(0,l.kq)("",!0)])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.sections,((t,e)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:"section-"+e},[(0,l._)("tr",null,[(0,l._)("th",Et,"Section "+(0,n.zw)(a+1)+"."+(0,n.zw)(e+1),1),(0,l._)("th",Ot,(0,n.zw)(t.name),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.lines,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:"line-"+a},[(0,l._)("td",Tt,(0,n.zw)(t.item_no??String.fromCharCode(97+a)),1),(0,l._)("td",jt,(0,n.zw)(t.name),1),(0,l._)("td",null,(0,n.zw)(t.unit),1),(0,l._)("td",null,(0,n.zw)(t.quantity),1),(0,l._)("td",At,(0,n.zw)(Number(t.rate).toLocaleString()),1),(0,l._)("td",Nt,(0,n.zw)((t.rate*t.quantity).toLocaleString()),1),(0,l._)("td",Qt,[(0,s.SU)(Vt).includes("can_delete_boq_line")?((0,l.wg)(),(0,l.iD)("svg",{key:0,style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-trash text-danger me-2",onClick:a=>Ne(t),viewBox:"0 0 16 16"},Wt,8,It)):(0,l.kq)("",!0),(0,s.SU)(Vt).includes("can_edit_boq_line")?((0,l.wg)(),(0,l.iD)("svg",{key:1,onClick:a=>ca(t),"data-bs-toggle":"modal","data-bs-target":"#edit",xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-pencil-square",viewBox:"0 0 16 16"},Jt,8,Kt)):(0,l.kq)("",!0)])])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.sub_sections,((t,o)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:"sub-"+o},[(0,l._)("tr",null,[(0,l._)("th",Xt,(0,n.zw)(a+1)+"."+(0,n.zw)(e+1)+"."+(0,n.zw)(o+1),1),(0,l._)("th",Zt,(0,n.zw)(t.name),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.lines,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:"subline-"+a},[(0,l._)("td",Gt,(0,n.zw)(String.fromCharCode(97+a)),1),(0,l._)("td",ta,(0,n.zw)(t.name),1),(0,l._)("td",null,(0,n.zw)(t.unit),1),(0,l._)("td",null,(0,n.zw)(t.quantity),1),(0,l._)("td",aa,(0,n.zw)(t.rate.toLocaleString()),1),(0,l._)("td",ea,(0,n.zw)((t.rate*t.quantity).toLocaleString()),1),(0,l._)("td",la,[(0,s.SU)(Vt).includes("can_delete_boq_line")?((0,l.wg)(),(0,l.iD)("svg",{key:0,style:{cursor:"pointer"},xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-trash text-danger me-2",onClick:a=>Ne(t),viewBox:"0 0 16 16"},ia,8,na)):(0,l.kq)("",!0),(0,s.SU)(Vt).includes("can_edit_boq_line")?((0,l.wg)(),(0,l.iD)("svg",{key:1,onClick:a=>ca(t),"data-bs-toggle":"modal","data-bs-target":"#edit",xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-pencil-square",viewBox:"0 0 16 16"},ua,8,da)):(0,l.kq)("",!0)])])))),128))],64)))),128))],64)))),128))],64)))),128)),0==Re.value.lenght?((0,l.wg)(),(0,l.iD)("div",ba,"No Series Set for this project")):(0,l.kq)("",!0)])])):(0,l.kq)("",!0)])),0===Re.value.length&&Rt.value?((0,l.wg)(),(0,l.iD)("div",ma,"No BoQ set for this project")):Rt.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",pa,"Select a project to see its BOQ")),Rt.value?((0,l.wg)(),(0,l.iD)("div",va,[ha,(0,l._)("table",ga,[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Re.value,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",_a,"Series "+(0,n.zw)(t.name),1),(0,l._)("td",ya,(0,n.zw)(t.sections.reduce(((t,a)=>{const e=a.lines.reduce(((t,a)=>t+a.quantity*a.rate),0),l=a.sub_sections.reduce(((t,a)=>t+a.lines.reduce(((t,a)=>t+a.quantity*a.rate),0)),0);return t+e+l}),0).toLocaleString()),1)])))),128)),(0,l._)("tr",wa,[fa,(0,l._)("td",xa,(0,n.zw)(Re.value.reduce(((t,a)=>t+a.sections.reduce(((t,a)=>{const e=a.lines.reduce(((t,a)=>t+a.quantity*a.rate),0),l=a.sub_sections.reduce(((t,a)=>t+a.lines.reduce(((t,a)=>t+a.quantity*a.rate),0)),0);return t+e+l}),0)),0).toLocaleString()),1)])])])])):(0,l.kq)("",!0),(0,l._)("div",ka,[(0,l._)("div",Sa,[(0,l._)("div",za,[Ca,(0,l._)("form",{onSubmit:a[9]||(a[9]=(0,o.iM)((t=>ra()),["prevent"]))},[(0,l._)("div",Da,[(0,l._)("div",qa,[(0,l._)("div",La,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Line Details","onUpdate:modelValue":a[5]||(a[5]=t=>Pt.value.name=t)},null,512),[[o.nr,Pt.value.name]])]),(0,l._)("div",Ha,[(0,l.Wm)((0,s.SU)(c()),{modelValue:oa.value,"onUpdate:modelValue":a[6]||(a[6]=t=>oa.value=t),options:Ie.value,label:"short_name",placeholder:"Select unit",required:!0,searchable:!0,multple:"false"},null,8,["modelValue","options"])]),(0,l._)("div",$a,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"Enter Quantity","onUpdate:modelValue":a[7]||(a[7]=t=>Pt.value.quantity=t),step:"any"},null,512),[[o.nr,Pt.value.quantity]])]),(0,l._)("div",Ba,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"Enter Rate","onUpdate:modelValue":a[8]||(a[8]=t=>Pt.value.rate=t)},null,512),[[o.nr,Pt.value.rate]])])])]),(0,l._)("div",Ma,[Va,(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:sa.value},[sa.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,s.SU)(x)()},null,8,Ea)):((0,l.wg)(),(0,l.iD)("span",Oa,"Save"))],8,Ua)])],32)])])]),(0,l._)("div",Ta,[(0,l._)("div",ja,[(0,l._)("div",Aa,[(0,l._)("div",Na,[(0,l._)("h1",Qa,"Add BOQ line for "+(0,n.zw)(Ge.value.name??Fe.value.name),1),Ia]),(0,l._)("form",{onSubmit:a[15]||(a[15]=(0,o.iM)((t=>el()),["prevent"]))},[(0,l._)("div",Ya,[(0,l._)("div",Ra,[(0,l._)("div",Wa,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Line No","onUpdate:modelValue":a[10]||(a[10]=t=>tl.value.no=t),required:""},null,512),[[o.nr,tl.value.no]])]),(0,l._)("div",Ka,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Line Details","onUpdate:modelValue":a[11]||(a[11]=t=>tl.value.name=t)},null,512),[[o.nr,tl.value.name]])]),(0,l._)("div",Pa,[(0,l.Wm)((0,s.SU)(c()),{modelValue:tl.value.unit,"onUpdate:modelValue":a[12]||(a[12]=t=>tl.value.unit=t),options:Ie.value,label:"short_name",placeholder:"Select unit",required:!0,searchable:!0,multple:"false"},null,8,["modelValue","options"])]),(0,l._)("div",Fa,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"Enter Quantity","onUpdate:modelValue":a[13]||(a[13]=t=>tl.value.quantity=t),step:"any"},null,512),[[o.nr,tl.value.quantity]])]),(0,l._)("div",Ja,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"Enter Rate","onUpdate:modelValue":a[14]||(a[14]=t=>tl.value.rate=t)},null,512),[[o.nr,tl.value.rate]])])])]),(0,l._)("div",Xa,[Za,(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:al.value},[al.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,s.SU)(x)()},null,8,te)):((0,l.wg)(),(0,l.iD)("span",ae,"submit"))],8,Ga)])],32)])])]),(0,l._)("div",ee,[(0,l._)("div",le,[(0,l._)("div",ne,[(0,l._)("div",se,[(0,l._)("h1",oe,"Add BOQ Series for "+(0,n.zw)(Rt.value.short_name),1),ie]),(0,l._)("form",{onSubmit:(0,o.iM)(Pe,["prevent"])},[(0,l._)("div",ce,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[16]||(a[16]=t=>Ke.value=t),placeholder:"Enter Series"},null,512),[[o.nr,Ke.value]])]),(0,l._)("div",re,[ue,(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:al.value},[al.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,s.SU)(x)()},null,8,me)):((0,l.wg)(),(0,l.iD)("span",pe,"submit"))],8,be)])],40,de)])])]),(0,l._)("div",ve,[(0,l._)("div",he,[(0,l._)("div",ge,[(0,l._)("div",_e,[(0,l._)("h1",ye,"Add BOQ section for "+(0,n.zw)(Ke.value.name),1),we]),(0,l._)("form",{onSubmit:a[18]||(a[18]=(0,o.iM)((t=>Je()),["prevent"]))},[(0,l._)("div",fe,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[17]||(a[17]=t=>Fe.value=t),placeholder:"Enter Section Name"},null,512),[[o.nr,Fe.value]])]),(0,l._)("div",xe,[ke,(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:al.value},[al.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,s.SU)(x)()},null,8,ze)):((0,l.wg)(),(0,l.iD)("span",Ce,"submit"))],8,Se)])],32)])])]),(0,l._)("div",De,[(0,l._)("div",qe,[(0,l._)("div",Le,[(0,l._)("div",He,[(0,l._)("h1",$e,"Add BOQ sub section for "+(0,n.zw)(Fe.value.name),1),Be]),(0,l._)("form",{onSubmit:a[20]||(a[20]=(0,o.iM)((t=>Ze()),["prevent"]))},[(0,l._)("div",Me,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[19]||(a[19]=t=>Xe.value=t),placeholder:"Enter Sub Section Name"},null,512),[[o.nr,Xe.value]])]),(0,l._)("div",Ve,[Ue,(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:al.value},[al.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,s.SU)(x)()},null,8,Oe)):((0,l.wg)(),(0,l.iD)("span",Te,"submit"))],8,Ee)])],32)])])])]))}},Ae=e(83744);const Ne=(0,Ae.Z)(je,[["__scopeId","data-v-38f49a92"]]);var Qe=Ne}}]);
//# sourceMappingURL=871.ff46c4ef.js.map