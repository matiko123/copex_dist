{"version":3,"file":"js/277.7e1654c7.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/logs/deletedOrders.vue","webpack://cork-vue3/./src/views/logs/deletedOrders.vue?4744"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">\r\n        <ul class=\"navbar-nav flex-row\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Deleted Purchase Orders </a></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n<!-- notification starts -->\r\n<div v-if=\"notification_count > 0 \" class=\"d-flex container position-relative\">\r\n  <div class=\"ms-auto\">\r\n    <span data-bs-toggle=\"collapse\" data-bs-target=\"#collapseWidthExample\" aria-expanded=\"false\" aria-controls=\"collapseWidthExample\">\r\n      <a href=\"javascript:;\" id=\"ddlnotify\" class=\"btn dropdown-toggle nav-link position-relative p-0 shadow\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"\r\n             viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n             stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n             class=\"feather feather-bell text-danger\" style=\"transform:scale(2)\">\r\n          <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path>\r\n          <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path>\r\n        </svg>\r\n        <span class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\r\n          {{ notification_count }}\r\n        </span>\r\n      </a>\r\n    </span>\r\n\r\n    <!-- Notifications panel -->\r\n    <div style=\"position: absolute; top: 100%; right: 0; z-index: 1050;\">\r\n      <div class=\"collapse  shadow\" id=\"collapseWidthExample\" style=\"min-width: 300px;\">\r\n        <div class=\"text-start card card-body text-dark \" v-for=\"notification in notifications\" >\r\n          From: {{ notification.sender_name }}<br>\r\n          Message: {{ notification.description }}\r\n          <div class=\"d-flex\">\r\n            <button class=\"btn btn-success p-1 btn-sm me-1 ms-auto\" style=\"cursor:pointer\" @click=\"readRemark(notification.id)\">✔</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- notification ends -->\r\n\r\n\r\n        <button v-if=\"is_admin\" class=\"btn btn-dark me-2 px-3\" @click=\"$router.go(-1)\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\r\n                <path fill-rule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8\"/>\r\n            </svg>\r\n        </button>\r\n \r\n       \r\n        <form v-if=\"order_registration \" class=\"mt-1 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerPurchaseOrder\">\r\n            <h4 class=\"text-center\">LOCAL PURCHASE ORDER REGISTRATION</h4>\r\n            <div class=\"row mb-2\">\r\n                <div v-if=\"!add_vendor\" class=\"col-md-3\">\r\n                    <label class=\"form-label\">Select A Supplier</label>\r\n                    <select class=\"form-select\" v-model=\"vendor_id\" required @change=\"handleVendorChange\">\r\n    <option value=\"\">Select Supplier</option>\r\n    <option v-for=\"vendor in vendors\" :key=\"vendor.id\" :value=\"vendor.id\">{{ vendor.name }}</option>\r\n    <option value=\"NEW_VENDOR\">New Supplier</option>\r\n</select>\r\n                 \r\n\r\n\r\n                </div>\r\n                <!-- new vendor  starts-->\r\n                <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Name</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_name\" name=\"Vendor_name\" required>\r\n          </div>\r\n       \r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Email</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_email\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Phone</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_phone\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Address</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_address\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Location</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_location\" name=\"Vendor_name\" required>\r\n          </div>\r\n                 <!-- new vendor ends -->\r\n                <div class=\"col-md-3\">\r\n                    <label class=\"form-label\">Select Project Name</label>\r\n                    <multiselect \r\n                    v-model=\"project_name\"\r\n                    track-by=\"id\"\r\n                    :options= \"projects\"\r\n                    label = \"short_name\"\r\n                    placeholder=\"Select Project\"\r\n                    :required = \"true\"\r\n                    :searchable = \"true\"        \r\n                    multple=\"false\"\r\n                    ></multiselect>\r\n                </div>\r\n                <div class=\"col-md-3\">\r\n                    <label class=\"form-label\">Payment Terms</label>\r\n                    \r\n                    <multiselect\r\n                    v-model=\"payment_terms\"\r\n                    :options=\"['Bank /TT ', 'Cash', 'Cheque', 'M-Pesa', 'On-Account', 'Wakala']\"\r\n                    :multiple=\"false\"\r\n                    :searchable=\"true\"\r\n                    required \r\n                    :placeholder=\"'Select Payment Terms'\"\r\n                    ></multiselect>\r\n                </div>\r\n                 <div v-if=\"(user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo'))\"  class=\"col-md-3\">\r\n                    <label class=\"form-label\">Select Company</label>                    \r\n                    <multiselect\r\n                    v-model=\"selected_company_id\"\r\n                    :options=\"[\r\n                        { id: 5, name: 'BUSHMAN' },\r\n                        { id: 6, name: 'COPEX' }\r\n                    ]\"\r\n                    track-by=\"id\"\r\n                    label=\"name\"\r\n                    :multiple=\"false\"\r\n                    :searchable=\"true\"\r\n                    required \r\n                    :placeholder=\"'Select Company'\"\r\n                    ></multiselect>\r\n                </div>\r\n           \r\n            </div>\r\n         \r\n         \r\n\r\n            <div class=\"text-center gap-2 justify-content-end\">\r\n                <button v-if=\"add_vendor\" type=\"button\" class=\"btn btn-dark me-3\" @click=\"add_vendor=false\">Back</button>\r\n                <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"order_registration = false;add_vendor=false;is_closed=true\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n            </div>\r\n        </form>\r\n\r\n\r\n                     <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n        <div class=\"text-center\"><h6>DELETED LOCAL PURCHASE ORDERS </h6></div>\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table \r\n                            :data=\"items\" \r\n                            :columns=\"columns\" \r\n                            :options=\"table_option\" \r\n                           \r\n                        >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + (props.row.status ? props.row.status.class : '')\">{{ props.row.status ? props.row.status.key : 'Unknown' }} </span>\r\n                            </template>\r\n                         <template #actions=\"props\">\r\n                                \r\n                               <a href=\"javascript:void(0);\" title=\"Restore\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\">\r\n        <svg\r\n\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"24\"\r\n            height=\"24\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            stroke-width=\"1.5\"\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            class=\"text-success\"\r\n            @click=\"undeletePurchaseOrder(props.row.id)\"\r\n        >\r\n            <path d=\"M3 7v11a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7\"></path>\r\n            <polyline points=\"7 11 12 16 17 11\"></polyline>\r\n            <line x1=\"12\" y1=\"4\" x2=\"12\" y2=\"16\"></line>\r\n        </svg>\r\n    </a>\r\n                                    <svg \r\n                                     xmlns=\"http://www.w3.org/2000/svg\" \r\n                                     width=\"28\" height=\"28\" \r\n                                     fill=\"currentColor\"\r\n                                      class=\"bi bi-eye text-secondary\" \r\n                                      viewBox=\"0 0 16 16\"\r\n                                      @click=\"openLpoModal(props.row)\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- lpo modale start -->\r\n   <teleport to=\"body\">\r\n   <div v-if=\"showlpoModal\" class=\"modal fade show d-block\" role=\"dialog\">\r\n   <div class=\"modal-dialog  modal-xl\">\r\n     <div class=\"modal-content d-flex flex-column\" style=\"height:90vh;\">\r\n       <div class=\"modal-header\">\r\n         <h5 class=\"modal-title\">Details for Deleted Local Purchase Order  </h5>\r\n         <button type=\"button\" class=\"btn-close\" @click=\"closeLpoModal\"></button>\r\n       </div>  \r\n<div v-if=\"isActive\" class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\">\r\n       \r\n       <div v-if=\"deleted_date\" class=\"mb-4 w-100\" style=\"pointer-events: none;\">\r\n           <div class=\"p-3 bg-light rounded\">\r\n               <div class=\"w-100\">\r\n                   <h6 class=\"mb-3\" style=\"font-weight: bold;\">Reason for LPO Deletion by {{ deleted_by }}  </h6>\r\n                   <div class=\"card w-100\">\r\n                     <div class=\"card-body text-start\">\r\n                       <p class=\"mb-0 text-start\" style=\"color: #000000; font-weight: 500;\"> {{ deleted_reason }}</p>\r\n                     </div>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n       </div>\r\n    \r\n        \r\n          \r\n           <div class=\"row layout-top-spacing\">\r\n\r\n\r\n           <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n               <div class=\"panel p-0\">\r\n                        \r\n   \r\n                     <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n                      \r\n\r\n                    \r\n\r\n\r\n                   <div v-else class=\"custom-table table3 \">\r\n           \r\n                      \r\n                       <v-client-table :data=\"lpo_items\" :columns=\"item_columns\" :options=\"table_option\" >\r\n                           <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                           </template>\r\n                           \r\n                          \r\n                       </v-client-table>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n       </div> \r\n          <!-- approval officers starts -->\r\n\r\n       \r\n   \r\n        <!-- approval officers ends -->\r\n       </div> \r\n      \r\n       <div v-if=\"!isActive\" class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\" >\r\n        \r\n    <div  class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n               <div class=\"panel p-0\">\r\n\r\n\r\n<div v-if=\"deleted_date\" class=\"mb-4 w-100\" style=\"pointer-events: none;\">\r\n           <div class=\"p-3 bg-light rounded\">\r\n               <div class=\"w-100\">\r\n                   <h6 class=\"mb-3\" style=\"font-weight: bold;\">Reason for LPO Deletion by {{ deleted_by }}  </h6>\r\n                   <div class=\"card w-100\">\r\n                     <div class=\"card-body text-start\">\r\n                       <p class=\"mb-0 text-start\"> {{ deleted_reason }}</p>\r\n                     </div>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n       </div>\r\n          \r\n                \r\n                     <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n                      \r\n\r\n                    \r\n\r\n\r\n                   <div v-else class=\"custom-table table3\">           \r\n                         <v-client-table :data=\"lpo_items\" :columns=\"item_columns\" :options=\"table_option\" >\r\n                           <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                           </template>\r\n                          \r\n                          \r\n                       </v-client-table>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n       </div> \r\n     </div>\r\n   </div>\r\n </div>\r\n </teleport>\r\n \r\n   <!-- Modal Background Overlay -->\r\n   <div v-if=\"showlpoModal\" class=\"modal-backdrop fade show\"></div>\r\n     \r\n     <!-- lpo modal end -->\r\n\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import axios from 'axios';\r\n    import { onMounted, ref,inject,watch } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Purchase Order' });\r\n\r\n        const readRemark = async (id) => {\r\n         const remarkStatus ={\r\n            'status':'checked by ' + JSON.parse(localStorage.getItem(\"user\")).name ,\r\n              }\r\n    try {\r\n        const response = await axiosInstance.put(`/remark/${id}`,remarkStatus);\r\n        showMessage('checked');\r\n        fetchNotifications(); \r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.error('Error:', error);\r\n    }\r\n};\r\n    \r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const showRemarkModal = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const printLpoReport = inject('printReport');\r\n    const add_vendor = ref(false);\r\n    const order_registration = ref(false);\r\n    const columns = ref(['SNo','LPO_number','requested_by', 'supplier', 'project','deleted_date', 'deleted_by','status', 'actions']);\r\n    const items = ref([]);\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [5, 10, 20, 50],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'LPO_number', 'date', 'phone'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n        searchable: true,\r\n    });\r\n\r\n   const deleted_date = ref('');\r\nconst deleted_reason = ref('');\r\nconst deleted_by = ref('');\r\n    const showDeleteModal = ref(false);\r\n    const deleteReason = ref('');\r\n    const lpoToDelete = ref(null);\r\n    const isfetching = ref(false);\r\n    const showLpoRemark = ref(false); \r\n    const notification_count=ref(0);\r\n    const notifications= ref(['']);\r\n    const selected_project = ref('');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const company_id = ref('');\r\n    const selected_company_id= ref('');\r\n    const selected_status = ref('');\r\n    const loading_spinner = ref(false);\r\n    const supplier_name = ref('');\r\n    const supplier_address = ref('');\r\n    const supplier_location = ref('');\r\n    const payment_terms = ref('');\r\n    const project_name = ref('');\r\n    const vendor_id = ref('');\r\n    const is_admin=ref(false);\r\n    const vendors =  ref([]);\r\n    const isSending = ref(false);\r\n    const is_editor = ref(false); \r\n    const Vendor_name = ref('');\r\n    const Vendor_phone= ref('');\r\n    const Vendor_email = ref('');\r\n    const Vendor_address =ref ('');\r\n    const Vendor_location=ref('');\r\n    const is_closed = ref(true);\r\n    const order_status=ref('');\r\n    const user_role = JSON.parse(localStorage.getItem(\"user\")).role;\r\n    const user_id = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    const print_url = ref(process.env.VUE_APP_API_BASE_URL);\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n     const axiosInstance2 = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL2\r\n    });\r\n    const newremark = ref('');\r\n    const remarks = ref([]);\r\n    const item = ref('');\r\n  \r\n\r\n\r\n\r\n\r\n\r\n    const fetchNotifications = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`remark?remark_type=LPO`);\r\n        notifications.value = response.data.data.filter(item => item.status === \"unchecked\");\r\n        notification_count.value = response.data.unchecked_count ;\r\n    } catch (error) {\r\n        console.error('Error fetching amendment request:', error);\r\n        showError(\"Failed to load amendment request \" + (error.response?.data?.message || error.message));\r\n    } finally {\r\n        isfetching.value = false;\r\n    }\r\n}\r\n\r\n\r\n    \r\n    const getPurchaseOrders = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`/deleted-orders`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            order_status.value = response.data.status_name;\r\n            let filteredData = response.data;\r\n            if (user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData.filter(order =>  (order.status_name !== \"Inactive\" || order.user_id == user_id));\r\n            } else if (user_permissions.includes('can_view_copex_lpo')) {\r\n                filteredData = filteredData.filter(order => order.company_id == 6 && (order.status_name !== \"Inactive\" || order.user_id == user_id));\r\n            } else if (user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData.filter(order => order.company_id == 5 && (order.status_name !== \"Inactive\" || order.user_id == user_id));\r\n            }else if (user_permissions.includes('can_view_all_lpo')) {\r\n                filteredData = filteredData;\r\n            } else {\r\n                filteredData = [];\r\n            }\r\n            \r\n            items.value = filteredData.filter(order => \r\n                      ((selected_project.value ? order.project_id === selected_project.value : true) && (selected_status.value ? order.status_name === selected_status.value : true)) \r\n                 ).map((order, index) => ({\r\n                SNo: index + 1,\r\n                id:order.id,\r\n                grn_no:order.grn_no,\r\n                LPO_number:`${String(order.id)}/${\r\n                  order.date_created.slice(8, 10)\r\n                  }/${\r\n                  order.date_created.slice(5, 7)  \r\n                  }/${\r\n                  order.date_created.slice(2, 4)  \r\n                 }`,\r\n                company_id:order.company_id,\r\n                supplier: order.supplier,\r\n                address: order.address,\r\n                requested_by: order.requested_by,\r\n                date: order.date_created,\r\n                project: order.project_aka,\r\n                project_id : order.project_id,\r\n                payment: order.payment_terms,\r\n                location: order.location,\r\n                requester:order.user_id,\r\n                awaits:order.awaits,\r\n                deleted_date: order.deleted_date ? order.deleted_date.split(' ')[0] : '',\r\n                deleted_reason: order.deleted_reason,\r\n                deleted_by: order.deleted_by,\r\n                status: {\r\n                    key: order.status_name,\r\n                    class: order.status_color\r\n                },\r\n            }));\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n        showError(error.message);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\n    const projects = ref([]);\r\n    const getProjects = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`/projects`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            // Filter projects after receiving the response\r\n            let filteredData = response.data;\r\n            if (user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData;\r\n            } else if (user_permissions.includes('can_view_copex_lpo')) {\r\n                filteredData = filteredData.filter(project =>project.company_id == 6);\r\n            } else if (user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData.filter(project =>project.company_id == 5);\r\n            }\r\n             projects.value = filteredData;\r\n            loading_spinner.value = false;\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n            loading_spinner.value = false; // Also set to false in error case\r\n        }\r\n    } catch (error) {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n   //code for etint model\r\n   const Show_editing_modal = ref(false);\r\n    \r\n   const lpo_number = ref();\r\n   const openEditModal= (row) => {\r\n\r\n       \r\n        is_editor.value = true;\r\n        getVendors();\r\n        getProjects();\r\n        Show_editing_modal.value = true;\r\n        lpo_number.value = row.id;\r\n        vendor_id.value = row.vendor_id;\r\n        supplier_name.value = row.supplier;\r\n        supplier_address.value = row.address;\r\n        supplier_location.value = row.location;\r\n        payment_terms.value = row.payment_terms;\r\n        project_name.value = row.project;\r\n        if (row.vendor_id) {\r\n            vendor_id.value = row.vendor_id;\r\n        } else {\r\n            vendor_id.value = ''; \r\n        }\r\n     \r\n    }\r\n    const   closeEditModal = () => {\r\n        // Reset the form fields\r\n        vendor_id.value = '';\r\n        supplier_name.value = '';\r\n        supplier_address.value = '';\r\n        supplier_location.value = '';\r\n        payment_terms.value = '';\r\n        project_name.value = '';\r\n        add_vendor.value = false;\r\n        order_registration.value = false;\r\n        lpo_number.value = '';\r\n        is_editor.value = false;\r\n        Show_editing_modal.value = false;\r\n    }\r\n\r\n    const updatePurchaseOrder = async () => {\r\n    try {\r\n        isSending.value = true; // Set the loading state to true    \r\n        // First register vendor if needed\r\n        if (add_vendor.value === true) {\r\n            await registerVendor(); // Wait for vendor registration to complete\r\n        }\r\n\r\n        const purchaseOrderData = {\r\n            vendor_id: vendor_id.value,\r\n            project_id: project_name.value.id,\r\n            payment_terms: payment_terms.value,\r\n        };\r\n\r\n        const response = await axiosInstance.patch(`/purchase-order/${lpo_number.value}`,purchaseOrderData);\r\n          if (response.status === 200) {\r\n            clearForm();\r\n            isSending.value = false; // Reset the loading state\r\n            Show_editing_modal.value = false; // Close the modal\r\n            is_editor.value = false; // Reset the edit mode flag\r\n            order_registration.value = false; // Reset the order registration flag\r\n            add_vendor.value = false; // Reset the add vendor flag\r\n           getPurchaseOrders();       \r\n          showMessage(\"Order Updated Successfully\");\r\n        } else {\r\n            showError(\"Error code \" + response.status);\r\n        }      \r\n       \r\n       \r\n    } catch (error) {\r\n        showError(\"Error code \" + error.status);\r\n        console.error(\"Error rUpdated Order:\", error);\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n        \r\n\r\n  const is_copex = ref(false);\r\n  const is_bushman = ref(false);\r\n  const total_amount = ref(0);\r\n   const lpo_items = ref([]);\r\n   const item_columns = ref(['SNo','description','spec', 'units', 'quantity', 'rate', 'amount',]);\r\n   const showlpoModal = ref(false); \r\n   const loading=  ref(false);\r\n   const isActive= ref(false);\r\n\r\n   const approval_status_data = ref({});\r\n \r\n   const item_list_category = ref([]);\r\n    //table 3\r\n    const isFuel = ref(false);\r\n    const is_bulk = ref(false);\r\n    const is_items = ref(false);\r\n    \r\n  \r\n    const item_list_id = ref('');\r\n    const item_category = ref('')\r\n\r\n    const direct_description = ref('');\r\n    const description = ref('');\r\n    const description_of_lpo = ref('');\r\n    const machines = ref([]);\r\n    const unit = ref('');\r\n    const budgets = ref(['']);\r\n    const task = ref('');\r\n    const machine_field = ref(false);\r\n    const quantity = ref('');\r\n    const rate = ref('');\r\n    const items_list = ref([]);\r\n    const isOpen = ref('');\r\n    const amount = ref(0);\r\n    const approval_status = ref(false);\r\n    const spinner = ref(false);\r\n    watch([quantity, rate], () => {\r\n        amount.value = quantity.value * rate.value\r\n    });\r\n\r\n   const lpo_id = ref(''); \r\n   const grn_number = ref(0)\r\n   const openLpoModal= (row) => {\r\n    getBudgets(row.project_id);\r\n        grn_number.value = row.grn_no;\r\n        lpo_number.value = row.id;\r\n        project_name.value = row.project;\r\n        lpo_id.value = row.LPO_number;\r\n    deleted_date.value = row.deleted_date ? row.deleted_date.split(' ')[0] : '';\r\n    deleted_reason.value = row.deleted_reason || '';\r\n    deleted_by.value = row.deleted_by || '';\r\n        if (row.status.key === \"Inactive\") {\r\n           is_closed.value= true; \r\n           isActive.value= false;\r\n           getItemListCategory();\r\n           getItems();\r\n        }\r\n        else{\r\n            getItems();\r\n            getApprovalStatus();\r\n            isActive.value= true;\r\n            approval_status.value = true;\r\n         \r\n            if(row.company_id == 5){\r\n                is_bushman.value= true;\r\n                is_copex.value = false;\r\n            }\r\n            if(row.company_id == 6){\r\n                is_bushman.value= false;\r\n                is_copex.value = true;\r\n            }\r\n        }\r\n        showlpoModal.value = true;\r\n    }\r\n    const   closeLpoModal = () => {\r\n      lpo_number.value = \"\";\r\n      project_name.value = \"\"; // Clear the project name\r\n      lpo_items.value = [];\r\n      total_amount.value = 0 // Clear the items list\r\n      showlpoModal.value = false;\r\n      isOpen.value= false;\r\n      clearForm();\r\n      clearItemForm();\r\n      }\r\n     \r\n      \r\n    const getItemsList = async (id) => {\r\n        try {\r\n           \r\n            const response = await axiosInstance.get(`/item-list`);\r\n            if (response.data && Array.isArray(response.data)) {\r\n                 const filterdata = response.data.filter((item) => item.category_id == id);\r\n                items_list.value = filterdata.map((data) => ({\r\n                    id: data.id,\r\n                    name: data.name,\r\n                    unit_measure: data.unit_measure,\r\n              }));\r\n\r\n\r\n            } else {\r\n                console.error(\"Invalid response format\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching approval status: \", error);\r\n        }\r\n    };\r\n  \r\n    const approveCheck = async (id, role) => {\r\n        try {\r\n            const response = await axiosInstance.put(`/approval-check/${id}`, {\r\n                [role]: 1\r\n            });\r\n            getApprovalStatus();\r\n            getPurchaseOrders();\r\n        } catch (error) {\r\n            console.error(\"Error approving check:\", error.message);\r\n        }\r\n    };\r\n\r\n    const approveUnCheck = async (id, role) => {\r\n        try {\r\n            const response = await axiosInstance.put(`/approval-check/${id}`, {\r\n                [role]: 0\r\n            });\r\n            getApprovalStatus();\r\n        } catch (error) {\r\n            console.error(\"Error approving check:\", error.message);\r\n        }\r\n\r\n        const response = await axiosInstance.put(`/purchase-order/${id}`, {\r\n                status_name: \"Unapproved\",\r\n                status_color:\"secondary\",\r\n            });\r\n    };   \r\n    \r\n    const activatePurchaseOrder = () => {\r\n        loading_spinner.value = true;\r\n        const activationData = {\r\n            status_name: 'Unapproved',\r\n            status_color: 'secondary',\r\n        };\r\n        \r\n        if (confirm(\"Are you sure you want to Confirm this Order?\")) {\r\n            axiosInstance\r\n                .put(`/purchase-order/${lpo_number.value}`, activationData)\r\n                .then((response) => {       \r\n                    loading_spinner.value = false;            \r\n                if (response.status == 200) {\r\n                   getPurchaseOrders();\r\n                   closeLpoModal();\r\n                    showMessage(\" Activation Successfuly! Now Waiting for Approvals\");\r\n                }\r\n                else{\r\n                    showError(\"activation Fails\");\r\n                }\r\n                })\r\n \r\n                \r\n                .catch((error) => {\r\n                    console.error(\"Error activating order:\", error.message);\r\n                    loading_spinner.value = false;\r\n                });\r\n\r\n                \r\n        } else {\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n\r\nconst handleDescriptionChange = () => {\r\n       const item_number = item_category.value.id;\r\n   \r\n\r\n        if (item_number == 1) {\r\n              getItemsList(1);\r\n              is_items.value = true;\r\n              isFuel.value = true;  \r\n             \r\n                 if (description_of_lpo.value === 'Direct') {\r\n              fetchMachines();                \r\n              machine_field.value = true;\r\n              is_items.value = true;\r\n              }\r\n                 else{\r\n                machine_field.value = false;\r\n              }\r\n                     \r\n            }\r\n         if(item_number == 2) {\r\n             getItemsList(2);\r\n             is_items.value = true;\r\n             machine_field.value = false;\r\n             isFuel.value = false;\r\n             description_of_lpo.value = \"\"       \r\n            }\r\n        if(item_number == 3) {\r\n            getItemsList(3);\r\n            is_items.value = true;\r\n            machine_field.value = false;\r\n            isFuel.value = false;\r\n            description_of_lpo.value = \"\"       \r\n        }\r\n    \r\n    }\r\n\r\n   //fetching machine list\r\n   const  fetchMachines= async () => {\r\n    axiosInstance\r\n      .get(`/machines`)\r\n      .then((response) => {\r\n        if (Array.isArray(response.data)) {\r\n          machines.value = response.data.map(machine => ({\r\n            id: machine.id,\r\n            name: machine.name,\r\n            type: machine.type_name,\r\n            category : machine.category.name,          \r\n          }));\r\n        } else {\r\n        error_message.value = \"Error fetching machine data: \" + error.message;\r\n        console.error(error_message.value);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching machine data:\", error.message);       \r\n      }   \r\n    ) \r\n      .finally(() => {\r\n      });\r\n}\r\n\r\n\r\n   const  getBudgets= async (id) => {\r\n    axiosInstance2\r\n      .get(`/projects/${id}`)\r\n      .then((response) => {\r\n       budgets.value= response.data;\r\n      })\r\n      .catch((error) => {\r\n        showError( error.message);\r\n        console.error(error);\r\n      }\r\n    )\r\n}\r\n    const budget = ref('');\r\n    const budget_items = ref(['']);\r\n    const budgetCategory = ref(['']);\r\n    watch(budget, (newVal) => {\r\n  if (newVal) {\r\n    axiosInstance2\r\n      .get(`/item/${newVal.id}`)\r\n      .then((response) => {\r\n       budget_items.value= response.data;\r\n       budgetCategory.value = response.data.map(item =>({\r\n       id :  item.id,\r\n       name : item.name,\r\n       description : item.item_description.map(sub_item =>({\r\n          id :sub_item.id,\r\n          name: sub_item.name,\r\n          units : sub_item.units,\r\n          rate: sub_item.cost,\r\n          cost : sub_item.cost,\r\n          quantity : sub_item.quantity * sub_item.quantity_2,\r\n          total : sub_item.quantity * sub_item.quantity_2 * sub_item.cost\r\n       })),\r\n      }));\r\n      })\r\n      .catch((error) => {\r\n        showError( error.message);\r\n        console.error(error);\r\n      }\r\n    )\r\n  }\r\n});\r\n\r\n//dozzer watch\r\n   watch(item, (newItem) => {\r\n  if (newItem) {\r\n   getItemsUsed(newItem.id);\r\n  }\r\n});\r\n\r\n\r\n    const used_quantity = ref('');\r\n    const getItemsUsed = (id) => {\r\n        axiosInstance\r\n            .get(`/items-used/${id}`)\r\n            .then((response) => {\r\n               used_quantity.value= response.data.used_items;\r\n            })\r\n            .catch((error) => {\r\n                showError(error.message);\r\n                console.error(\"Error fetching item used quantity:\", error);\r\n            });\r\n    };\r\n\r\n\r\nconst budget_category = ref('');\r\nconst budgetCategoryItems = ref(['']);\r\n   watch(budget_category, (newCat) => {\r\n  if (newCat) {\r\n    budgetCategoryItems.value = newCat.description;\r\n  }\r\n});\r\n\r\n    const getItemListCategory= () => {\r\n        axiosInstance\r\n            .get('/item-list-category')\r\n            .then((response) => {\r\n                if (Array.isArray(response.data)) {\r\n                    item_list_category.value = response.data.map((item) => ({\r\n                        id: item.id,\r\n                        name: item.name,\r\n                    }));\r\n                } else {\r\n                    console.error(\"Invalid response format\");\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error fetching item list category:\", error.message);\r\n            });\r\n    };\r\n\r\n\r\n    const machine = ref('');\r\n    const item_unit = ref('nothing');\r\n    const specification = ref('')\r\n\r\n\r\n\r\n\r\n    //25 june 2025\r\n\r\nconst getItems = async () => {\r\n    loading_spinner.value = true; \r\n    try {\r\n        const response = await axiosInstance.get(`/order-items/${lpo_number.value}`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            total_amount.value = response.data.reduce((sum, order) => {\r\n                return sum + (order.quantity * order.rate);\r\n            }, 0);\r\n\r\n            isOpen.value = response.data.length === 0;\r\n\r\n            lpo_items.value = response.data.map((order, index) => ({\r\n                SNo: index + 1,\r\n                category: order.category,\r\n                id: order.id,\r\n                description: order.description,\r\n                type: order.machine?.type ?? '---',\r\n                spec: order.specification ?? '---',\r\n                units: order.unit_measure,\r\n                quantity: order.quantity.toLocaleString(),\r\n                rate: Number(order.rate).toLocaleString(),\r\n                amount: (order.quantity * order.rate).toLocaleString(undefined, { maximumFractionDigits: 3 })\r\n            }));\r\n\r\n            return response.data; \r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error fetching purchase order: \", error);\r\n    } finally {\r\n        loading_spinner.value = false; \r\n    }\r\n\r\n    return []; // fallback\r\n};\r\n\r\nconst getApprovalStatus = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`/approval-check-status/${lpo_number.value}`);\r\n        if (response.data && typeof response.data === 'object') {\r\n            approval_status_data.value = response.data;\r\n            spinner.value = false;\r\n            return response.data; // ✅ ADD THIS\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n            return null;\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error fetching approval status: \", error);\r\n        return null;\r\n    }\r\n};\r\n\r\n  const grn = ref({})\r\nconst getGrn = async (id) => {\r\n  try {\r\n    const response = await axiosInstance.get(`/good-received-notes/${id}`);\r\n    if (response.data && Object.keys(response.data).length > 0) {\r\n      return response.data;\r\n    } else {\r\n      return null; // No data found\r\n    }\r\n  } catch (error) {\r\n    return null; // Error or no data\r\n  }\r\n};\r\n\r\n\r\nconst undeletePurchaseOrder = async (id) => {\r\n    if (confirm(\"Are you sure you want to restore this purchase order?\")) {\r\n        try {\r\n            loading_spinner.value = true;\r\n            const response = await axiosInstance.put(`/purchase-order/${id}`, {\r\n                deleted: 0,\r\n            });\r\n            \r\n            if (response.status === 200) {\r\n                showMessage(response.data.message); \r\n                getPurchaseOrders(); \r\n            } else {\r\n                showError(error.message);\r\n            }\r\n        } catch (error) {\r\n            showError(error.message);\r\n        } finally {\r\n            loading_spinner.value = false;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n    onMounted(() => {\r\n        getPurchaseOrders();\r\n        getProjects();\r\n        fetchNotifications();\r\n        fetchMachines();\r\n        watch(order_status, (newValue) => {\r\n           \r\n           if  (newValue === 'Inactive') {\r\n               isActive.value= false\r\n               \r\n                  }\r\n           else{\r\n            isActive.value= true;\r\n           }\r\n       });\r\n    });\r\n\r\n</script>","import script from \"./deletedOrders.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./deletedOrders.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./deletedOrders.vue?vue&type=style&index=0&id=7d197d66&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","readRemark","async","remarkStatus","JSON","parse","localStorage","getItem","name","axiosInstance","put","id","showMessage","fetchNotifications","error","showError","message","console","loadingIndicator","inject","ref","add_vendor","order_registration","columns","items","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","searchable","deleted_date","deleted_reason","deleted_by","isfetching","notification_count","notifications","selected_project","user_permissions","permissions","selected_company_id","selected_status","loading_spinner","payment_terms","project_name","vendor_id","is_admin","vendors","Vendor_name","Vendor_phone","Vendor_email","Vendor_address","Vendor_location","is_closed","order_status","user_id","role","process","axios","baseURL","axiosInstance2","VUE_APP_API_BASE_URL2","item","response","get","value","data","status","unchecked_count","getPurchaseOrders","Array","isArray","status_name","filteredData","includes","order","company_id","project_id","map","index","SNo","grn_no","LPO_number","String","date_created","slice","supplier","address","requested_by","date","project","project_aka","payment","location","requester","awaits","split","key","class","status_color","projects","getProjects","lpo_number","is_copex","is_bushman","total_amount","lpo_items","item_columns","showlpoModal","isActive","approval_status_data","item_list_category","machines","budgets","quantity","rate","isOpen","amount","approval_status","spinner","watch","lpo_id","grn_number","openLpoModal","row","getBudgets","getItemListCategory","getItems","getApprovalStatus","closeLpoModal","clearForm","clearItemForm","fetchMachines","then","machine","type","type_name","category","error_message","catch","finally","budget","budget_items","budgetCategory","newVal","description","item_description","sub_item","units","cost","quantity_2","total","newItem","getItemsUsed","used_quantity","used_items","budget_category","budgetCategoryItems","newCat","reduce","sum","length","spec","specification","unit_measure","toLocaleString","Number","undefined","maximumFractionDigits","undeletePurchaseOrder","confirm","deleted","onMounted","newValue","__exports__"],"sourceRoot":""}