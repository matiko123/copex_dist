"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5492],{35492:function(a,e,t){t.r(e),t.d(e,{default:function(){return oa}});t(26699);var s=t(66252),l=t(49963),o=t(2262),i=t(3577),n=t(87066),c=t(56296),r=t(26212),d=t.n(r);const u={class:"layout-px-spacing"},m=(0,s.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Activity Status</span></li></ol></nav></div></li></ul>',1),v={class:"d-flex me-4 mt-2"},p={class:"ms-auto"},b=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,s._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),h=[b],_=["onSubmit"],y=(0,s._)("h4",{class:"text-center"},"ACTIVITY STATUS REGISTRATION FORM",-1),w={class:"row mb-2"},g={class:"col-md-6"},f=(0,s._)("label",{class:"form-label"},"Name",-1),k={class:"col-md-6"},S=(0,s._)("label",{class:"form-label"},"Description",-1),C={class:"text-center gap-2 justify-content-end"},x=(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),M={class:"row layout-top-spacing"},H={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},V={class:"panel p-0"},U={class:"custom-table table3"},D=["innerHTML"],A=["onClick"],E=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary","data-bs-toggle":"modal","data-bs-target":"#edit-modal"},[(0,s._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,s._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),N=[E],T=["onClick"],j=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},[(0,s._)("polyline",{points:"3 6 5 6 21 6"}),(0,s._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),I=[j],q={class:"modal-footer"},L=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),R=["disabled"],z={class:"modal fade mymodal",id:"edit-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},B={class:"modal-dialog modal-xl"},O={class:"modal-content"},P={class:"modal-header"},$=(0,s._)("h1",{class:"modal-title fs-5",id:"editModalLabel"},"Edit Activity Status",-1),F={class:"modal-body"},G={class:"row"},J={class:"col-md-4"},W=(0,s._)("label",{for:"name"},"Name",-1),Y={class:"col-md-4"},Z=(0,s._)("label",{for:"description"},"Description",-1),K={class:"col-md-4"},Q=(0,s._)("label",{for:"Status"},"Status",-1),X={class:"modal-footer"},aa={type:"submit",class:"btn btn-primary"},ea={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},ta=(0,s.Uk)(" Edit ");var sa={setup(a){(0,c.j)({title:"Custom Table"});const e=JSON.parse(localStorage.getItem("user")).permissions,t=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),r=(0,s.f3)("tableShimmer"),b=(0,s.f3)("showMessage"),E=(0,s.f3)("showError"),j=(0,s.f3)("showConfirmation"),sa=(0,o.iH)({}),la=(0,o.iH)(""),oa=(0,o.iH)(""),ia=(0,o.iH)(""),na=(0,o.iH)(!1),ca=(0,o.iH)(["SNo","name","description","status","actions"]),ra=(0,o.iH)([]),da=(0,o.iH)(!1),ua=(0,o.iH)({perPage:10,perPageValues:[10,20,50],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name","short_name","status"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),ma=async()=>{na.value=!0;try{const a=await t.get("/activity-statuses");ra.value=a.data.map(((a,e)=>({SNo:e+1,id:a.id,name:a.name,description:a.description,status:a.status})))}catch(a){E(a.message)}finally{na.value=!1}},va=()=>{da.value=!1,na.value=!0;const a={name:la.value,description:oa.value};t.post("/activity-statuses",a).then((a=>{ma(),na.value=!1,b("Activity Status registered successfully!"),_a(),a.data.status})).catch((a=>{E(a.message)}))},pa=async a=>{j("Delete Module Status","Are you sure to delete "+a.name+" module?",`activity-statuses/${a.id}`,"delete")},ba=a=>{sa.value={...a},la.value=a.name,oa.value=a.description,ia.value=a.status},ha=async()=>{na.value=!0;const a={name:la.value,description:oa.value,status:ia.value};try{const e=await t.put(`/activity-statuses/${sa.value.id}`,a);200===e.status&&(b("Activity Status updated successfully!"),ma(),document.getElementById("close_modal").click())}catch(e){E(e.message)}finally{na.value=!1}},_a=()=>{la.value="",oa.value=""},ya=()=>{_a()};return(0,s.bv)((()=>{ma()})),(a,t)=>{const n=(0,s.up)("v-client-table");return(0,s.wg)(),(0,s.iD)("div",u,[m,(0,s._)("div",v,[(0,s._)("div",p,[(0,s._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=a=>da.value=!da.value)},h)])]),da.value?((0,s.wg)(),(0,s.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,l.iM)(va,["prevent"])},[y,(0,s._)("div",w,[(0,s._)("div",g,[f,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Name","onUpdate:modelValue":t[1]||(t[1]=a=>la.value=a),required:""},null,512),[[l.nr,la.value]])]),(0,s._)("div",k,[S,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Description","onUpdate:modelValue":t[2]||(t[2]=a=>oa.value=a)},null,512),[[l.nr,oa.value]])])]),(0,s._)("div",C,[(0,s._)("button",{type:"button",class:"btn btn-danger me-3",onClick:t[3]||(t[3]=a=>{da.value=!1,_a()})},"Cancel"),x])],40,_)):(0,s.kq)("",!0),(0,s._)("div",M,[(0,s._)("div",H,[(0,s._)("div",V,[(0,s._)("div",U,[na.value?((0,s.wg)(),(0,s.iD)("div",{key:0,innerHTML:(0,o.SU)(r)()},null,8,D)):((0,s.wg)(),(0,s.j4)(n,{key:1,data:ra.value,columns:ca.value,options:ua.value},{status:(0,s.w5)((a=>[(0,s._)("span",{class:(0,i.C_)(["badge","open"===a.row.status?"bg-success":"bg-danger"])},(0,i.zw)(a.row.status),3)])),actions:(0,s.w5)((a=>[(0,s._)("a",{href:"javascript:;",class:"edit me-3",onClick:e=>ba(a.row)},N,8,A),(0,o.SU)(e).includes("can_delete_module_status")?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:;",class:"cancel",onClick:e=>pa(a.row)},I,8,T)):(0,s.kq)("",!0)])),footer:(0,s.w5)((()=>[(0,s._)("div",q,[L,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:ha,disabled:a.isSaving},"Save changes",8,R)])])),_:1},8,["data","columns","options"]))])])])]),(0,s._)("div",z,[(0,s._)("div",B,[(0,s._)("div",O,[(0,s._)("div",P,[$,(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[4]||(t[4]=a=>ya())})]),(0,s._)("form",{onSubmit:t[9]||(t[9]=(0,l.iM)((a=>ha()),["prevent"]))},[(0,s._)("div",F,[(0,s._)("div",G,[(0,s._)("div",J,[W,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>la.value=a),class:"form-control",placeholder:"Enter Name"},null,512),[[l.nr,la.value]])]),(0,s._)("div",Y,[Z,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=a=>oa.value=a),class:"form-control",placeholder:"Description"},null,512),[[l.nr,oa.value]])]),(0,s._)("div",K,[Q,(0,s.Wm)((0,o.SU)(d()),{modelValue:ia.value,"onUpdate:modelValue":t[7]||(t[7]=a=>ia.value=a),options:["open","closed"],placeholder:"Select Status",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue"])])])]),(0,s._)("div",X,[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[8]||(t[8]=a=>ya()),id:"close_modal"},"Close"),(0,s._)("button",aa,[na.value?((0,s.wg)(),(0,s.iD)("span",ea)):(0,s.kq)("",!0),ta])])],32)])])])])}}};const la=sa;var oa=la}}]);
//# sourceMappingURL=5492.de050d90.js.map