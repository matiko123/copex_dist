{"version":3,"file":"js/1826.f2eb5f0e.js","mappings":"y/tBA62CI,MAAMA,GAAWC,EAAAA,EAAAA,KAAI,GACfC,GAAeD,EAAAA,EAAAA,IAAI,GACnBE,GAAgBF,EAAAA,EAAAA,KAAI,GAGpBG,IAFWC,EAAAA,EAAAA,IAAO,aACNA,EAAAA,EAAAA,IAAO,cACRA,EAAAA,EAAAA,IAAO,aAClBC,GAAUL,EAAAA,EAAAA,IAAI,CAAC,MAAM,aAAa,eAAgB,WAAW,OAAO,UAAW,YAC/EM,GAAaN,EAAAA,EAAAA,IAAI,GACjBO,IAAiBP,EAAAA,EAAAA,KAAI,GACrBQ,GAAmBC,KAAKC,MAAMC,aAAaC,QAAQ,SAASC,aAClEC,EAAAA,EAAAA,GAAQ,CAAEC,MAAM,mBAChB,MAAMC,IAAYhB,EAAAA,EAAAA,KAAI,GAChBiB,IAAmBjB,EAAAA,EAAAA,IAAI,IACvBkB,IAAqBlB,EAAAA,EAAAA,KAAI,GACzBmB,IAAWnB,EAAAA,EAAAA,IAAI,IACfoB,IAAcpB,EAAAA,EAAAA,IAAI,IAClBqB,IAAmBrB,EAAAA,EAAAA,KAAI,GACvBsB,IAAUtB,EAAAA,EAAAA,KAAI,GAEduB,KADiBvB,EAAAA,EAAAA,IAAI,KACJA,EAAAA,EAAAA,IAAK,KACtBwB,IAAYxB,EAAAA,EAAAA,IAAI,IAChByB,IAAWzB,EAAAA,EAAAA,IAAI,CAAC,KAChB0B,IAAW1B,EAAAA,EAAAA,KAAI,GACf2B,IAAW3B,EAAAA,EAAAA,KAAI,GACf4B,IAAY5B,EAAAA,EAAAA,IAAI,IAChB6B,IAAO7B,EAAAA,EAAAA,IAAI,IACX8B,IAAO9B,EAAAA,EAAAA,IAAI,IACX+B,IAAW/B,EAAAA,EAAAA,IAAI,GACfgC,IAAahC,EAAAA,EAAAA,IAAI,GACjBiC,IAAUjC,EAAAA,EAAAA,IAAI,IACdkC,IAASlC,EAAAA,EAAAA,IAAI,IACbmC,IAASnC,EAAAA,EAAAA,IAAI,IACboC,IAAQpC,EAAAA,EAAAA,IAAI,IACZqC,IAAgBrC,EAAAA,EAAAA,IAAK,MACrBsC,IAAkBtC,EAAAA,EAAAA,KAAI,GACtBuC,IAAcnC,EAAAA,EAAAA,IAAO,eACrBoC,IAAcpC,EAAAA,EAAAA,IAAO,eACrBqC,IAAYrC,EAAAA,EAAAA,IAAO,aACnBsC,IAAYtC,EAAAA,EAAAA,IAAO,aACnBuC,IAAe3C,EAAAA,EAAAA,IAAI,IACnB4C,IAAgB5C,EAAAA,EAAAA,IAAI,GACpB6C,IAAW7C,EAAAA,EAAAA,IAAI,IACf8C,IAAa9C,EAAAA,EAAAA,IAAI,GACjB+C,IAAQ/C,EAAAA,EAAAA,IAAI,IACZgD,IAAiBhD,EAAAA,EAAAA,IAAI,IACrBiD,IAAYjD,EAAAA,EAAAA,KAAI,IAAIkD,MAAOC,cAAcC,MAAM,EAAG,KAClDC,IAAWrD,EAAAA,EAAAA,KAAI,GACfsD,IAAiBtD,EAAAA,EAAAA,IAAI,CAAC,KACtBuD,IAAsBvD,EAAAA,EAAAA,IAAI,IAC1BwD,GAAoBC,UACrB,IACG,MAAMC,QACNC,EAAAA,EAAAA,IAAW,gFAA+EX,GAAeY,MAAMC,wBAAwBf,GAAWc,SAC9IF,EAASI,MAAQC,MAAMC,QAAQN,EAASI,OACrCR,GAAeM,MAAQF,EAASI,KAChDG,QAAOC,GAA+B,aAAtBA,EAAMC,cACtBC,KAAI,CAACF,EAAOG,KAAR,CACHC,IAAKD,EAAQ,EACbR,GAAIK,EAAML,GACVU,WAAa,GAAEC,OAAON,EAAML,IAAIY,SAAS,EAAG,QAAQP,EAAMQ,aAAatB,MAAM,EAAG,MAAMc,EAAMQ,aAAatB,MAAM,EAAG,KAClH9C,WAAY4D,EAAM5D,WAClBqE,SAAUT,EAAMU,OAAO/C,KACvBgD,QAASX,EAAMW,QACfC,aAAcZ,EAAMY,aACpBC,KAAMb,EAAMQ,aACZM,QAASd,EAAMe,YACfC,QAAShB,EAAMiB,cACfC,SAAUlB,EAAMkB,SAChBC,UAAWnB,EAAMoB,QACjBC,OAAQrB,EAAMC,gBAIDb,GAAeM,MAAM4B,OAAS,EAC/BnC,GAASO,OAAQ,EAEjBP,GAASO,OAAQ,EAEbtB,GAAgBsB,OAAQ,GAExB6B,QAAQC,MAAM,2BAExB,MAAOA,OACLD,QAAQC,MAAM,6BAA8BA,SAG9CC,IAAuBvF,EAAAA,EAAAA,IAAO,wBAC9BwF,IAAS5F,EAAAA,EAAAA,IAAI,CAAC,KACX6F,GAAapC,UAClBnB,GAAgBsB,OAAQ,EACxB,IACI,MAAMF,QACNC,EAAAA,EAAAA,IAAW,sDACPD,EAASI,MAAQC,MAAMC,QAAQN,EAASI,OACpC8B,GAAQhC,MAAQF,EAASI,KACzBxB,GAAgBsB,OAAQ,GAIxB6B,QAAQC,MAAM,2BAExB,MAAOA,OACLD,QAAQC,MAAM,6BAA8BA,UAKpDI,EAAAA,EAAAA,IAAM9C,IAAiB+C,IACfA,GAAUA,EAAOlC,KACjBf,GAAWc,MAAQ,EACnBoC,SAGR,MAAMC,IAAejG,EAAAA,EAAAA,IAAI,CACzBkG,QAAS,GACTC,cAAe,CAAC,EAAG,GAAI,GAAI,IAC3BC,KAAM,oBACNC,eAAgB,CAAEC,QAAS,uBAC3BC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACHC,MAAO,oCACP1C,OAAQ,GACR2C,kBAAmB,YACnBC,MAAO,YAEXC,SAAU,CAAC,MAAO,cAAe,eACjCC,SAAU,CACNC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAEVC,kBAAkB,EAClBC,YAAY,IAIRC,GAAsBC,IACC,eAAvBA,EAAMC,OAAO3D,QACb4D,KACAC,GAAU7D,MAAQ,KAIpB4D,GAAY,KACdxG,GAAW4C,OAAS5C,GAAW4C,OAG7B8D,GAAUjE,MAAAA,IACgB,UAAxBlC,GAAeqC,OAIflC,GAASkC,OAAM,EACnB1C,GAAoB0C,OAAQ,EAC3B3C,GAAiB2C,MAAOC,GALrBpB,GAAU,sBASRkF,GAAalE,UACd,GAA4B,UAAxBlC,GAAeqC,MAGlB,CACNjB,GAAaiB,MAAQxC,GAAYwC,MACjCvC,GAAiBuC,OAAQ,EACzB,MAAME,EAAO,CACT,KAAQ1C,GAAYwC,OAExB,IACI,MAAMF,QAAiBkE,GAAeC,IAAK,YAAW/E,GAAWc,QAASE,GACnD,KAAnBJ,EAAS6B,OACTS,KAEAvD,GAAU,uBAEhB,MAAOiD,OACLD,QAAQC,MAAM,wBAAyBA,OACvCjD,GAAU,6BAjBVA,GAAU,sBAsBRqF,GAAYrH,KAAKC,MAAMC,aAAaC,QAAQ,SAASiB,KACrDyD,GAAU7E,KAAKC,MAAMC,aAAaC,QAAQ,SAASiD,GACnDkE,IAAa/H,EAAAA,EAAAA,IAAI,GACjBgI,GAAUvE,UAEZ,GADEsE,GAAWnE,MAASqE,WAAWrF,GAAcgB,OAASqE,WAAWpF,GAASe,OACxEqE,WAAWpF,GAASe,OAAS,EAG7B,OAFAnB,GAAU,kCACVI,GAASe,MAAQ,GAIrB,MAAME,EAAO,CACT,cAAiBiE,GAAWnE,OAEhC,IACI,MAAMF,QAAiBkE,GAAeC,IAAK,YAAW/E,GAAWc,QAASE,GACnD,KAAnBJ,EAAS6B,QACRjE,GAASsC,OAAM,EAChBhB,GAAcgB,MAAQmE,GAAWnE,MACjCoC,KACAtD,GAAU4C,GAAQwC,GAAU,WAAW9E,GAAeY,MAAMsE,WAAWvF,GAAaiB,MAAMd,GAAWc,MAAM,GAAGf,GAASe,OACvHpB,GAAY,2BACZK,GAASe,MAAQ,GAEjBnB,GAAU,oBAEhB,MAAOiD,OACLD,QAAQC,MAAM,qBAAsBA,OACpCjD,GAAU,sBAIR0F,IAAwBnI,EAAAA,EAAAA,IAAI,IAC3BoI,GAAgBzE,EAAAA,EAAAA,OAAa,CACpC0E,QAASC,gCAGJV,GAAiBjE,EAAAA,EAAAA,OAAa,CACnC0E,QAASC,CAAAA,SAAAA,aAAAA,qBAAAA,8BAAAA,SAAAA,KAAYC,wBAGfC,GAAmB/E,UACzB,MAAMgF,EAAU,0BAA4BzF,GAAeY,MAAMsE,WAAa,kBAAoBJ,GAAY,cAAgBnF,GAAaiB,MAC3IrD,GAAeqD,OAASrD,GAAeqD,MACvC,IACI,MAAMF,QAAkB0E,GAAcM,KAAK,UAAW,CAClDC,YAAalI,KAAKC,MAAMC,aAAaC,QAAQ,SAASiD,GACtD+E,YAAaT,GAAsBvE,MACnCiF,QAAQ/F,GAAWc,MACnBkF,YAAY,cAGhBC,GAAQnF,MAAMoF,KAAKtF,EAASI,MAC5BqE,GAAsBvE,MAAQ,GAC9BpB,GAAY,kBACZmD,GAAqB,eAAe,oBAAoB8C,EAAQ,UAClE,MAAO/C,OACLjD,GAAU,uBAAwBiD,MAAM+C,WAI1CzC,GAAcvC,UACpBnB,GAAgBsB,OAAQ,EACxB,IACI,MAAMF,QAAiBkE,GAAeqB,IAAK,YAAWjG,GAAeY,MAAMC,MACvEpC,GAASmC,MAAQF,EAASI,KAC1BxB,GAAgBsB,OAAM,EAC5B,MAAO8B,OACLpD,GAAgBsB,OAAM,EACtBnB,GAAUiD,MAAM+C,WAIlBS,IAAQC,EAAAA,EAAAA,MACRC,GAAoB3F,UACtB,IACI,MAAMC,QAAiBC,EAAAA,EAAAA,IAAW,uDAAsDuF,GAAMG,OAAOvG,cACrGE,GAAeY,MAAQF,EAASI,KAChCkC,KACF,MAAON,OACLjD,GAAUiD,MAAM+C,WAKlBa,GAAY7F,UACdjC,GAAWoC,OAASpC,GAAWoC,MAC/BtB,GAAgBsB,OAAM,EAClB,MAAME,EAAO,CACT,KAAOnB,GAAaiB,MACpB,WAAaZ,GAAeY,MAAMC,IAEtC,IACI,MAAMH,QAAiBkE,GAAec,KAAM,WAAU5E,GAClDxB,GAAgBsB,OAAM,EACtBoC,KACAlD,GAAWc,MAAO,EACK,KAAnBF,EAAS6B,QACT5C,GAAaiB,MAAQ,GACrBpB,GAAY,+BAGZiD,QAAQC,MAAMA,OACdjD,GAAU,wBAGd,MAAMiD,OACVD,QAAQC,MAAM,yBAA0BA,OACxCpD,GAAgBsB,OAAM,IAGxB2F,GAAa9F,MAAAA,IACf+F,GAAW5F,OAAO,EAExBtB,GAAgBsB,OAAQ,QACAgE,GAAe6B,OAAQ,QAAO5F,KACjD6F,MAAMhG,IACHiG,KACA3D,KACAxD,GAAY,iBACZF,GAAgBsB,OAAQ,EACxB4F,GAAW5F,OAAO,MAGtBgG,GAAenG,MAAAA,IACnBd,GAAaiB,MAAQ,GACrBtB,GAAgBsB,OAAQ,QACAgE,GAAe6B,OAAQ,YAAW5F,KACrD6F,MAAMhG,IACHsC,KACAlD,GAAWc,MAAO,EAClBpB,GAAY,mBACZF,GAAgBsB,OAAQ,MAIxBiG,GAAwBpG,MAAAA,IAC1BnB,GAAgBsB,OAAQ,QACAgE,GAAe6B,OAAQ,sBAAqB5F,KAC/D6F,MAAMhG,IACHiG,KACAnH,GAAY,wBACZF,GAAgBsB,OAAQ,MAG9BkG,GAAUrG,UACd+F,GAAW5F,OAAO,EAClBtB,GAAgBsB,OAAO,EACvBjC,GAASiC,OAASjC,GAASiC,MAC3B,MAAMmG,EAAS,CACT,KAAOnI,GAAUgC,MACjB,WAAad,GAAWc,OAE5B,IACI,MAAMF,QAAiBkE,GAAec,KAAM,OAAMqB,GACjDP,GAAW5F,OAAO,EACnBtB,GAAgBsB,OAAO,EACrB+F,KACsB,KAAnBjG,EAAS6B,QACV3D,GAAUgC,MAAQ,GAClBpB,GAAY,0BACZwD,OAGAvD,GAAU,sBACVgD,QAAQC,MAAMA,QAGpB,MAAOA,OACJ8D,GAAW5F,OAAO,EACzBtB,GAAgBsB,OAAO,EACjB6B,QAAQC,MAAM,wBAAyBA,OACvCjD,GAAUiD,MAAM+C,WAGlBuB,GAAqBvG,MAAAA,IAEzB,GADApB,GAAcuB,MAAQ,GACC,KAAnB7B,GAAS6B,OAAqC,KAArB5B,GAAW4B,OAA+B,KAAf9B,GAAK8B,MAC1DnB,GAAU,qCACR,CACL,MAAMwH,EAAoB,CACpB,KAAOpI,GAAK+B,MACZ,MAAQxB,GAAMwB,MACd,QAAUC,EACV,WAAa3B,GAAO0B,MACpB,QAAW3B,GAAQ2B,MACnB,SAAW7B,GAAS6B,OAAS,EAC7B,WAAa5B,GAAW4B,OAAS,EACjC,KAAO9B,GAAK8B,OAAS,EACrB,OAASzB,GAAOyB,OAEpB,IACI,MAAMF,QAAiBkE,GAAec,KAAM,oBAAmBuB,GAC7DN,KACsB,KAAnBjG,EAAS6B,QACV3D,GAAUgC,MAAQ,GAClBxB,GAAMwB,MAAO,GACb7B,GAAS6B,MAAM,EACfzB,GAAOyB,MAAM,GACb9B,GAAK8B,MAAQ,EACb/B,GAAK+B,MAAQ,GACb5B,GAAW4B,MAAM,EACjBpB,GAAY,mCAIZC,GAAU,sBACVgD,QAAQC,MAAMA,QAGpB,MAAOA,OACLD,QAAQC,MAAM,wBAAyBA,UAK7CwE,GAAapG,IACd7D,EAAa2D,MAAQ,EACrB7D,EAAS6D,OAAO,EAChBuG,GAAYvG,OAAO,EACnBwG,GAAoBxG,OAAQ,EAC5Bd,GAAWc,MAAQE,EAAKD,GACxBlB,GAAaiB,MAAQE,EAAKjC,KAC1Be,GAAcgB,MAAQE,EAAKlB,cAC3BrB,GAAeqC,MAAQE,EAAKyB,OAC7B/B,KACCmG,MAGCU,IAAOrK,EAAAA,EAAAA,IAAI,OAEhBsK,EAAAA,EAAAA,KAAU,KACH,MAAMC,EAAa5J,aAAaC,QAAQ,QACxCyJ,GAAKzG,MAAQnD,KAAKC,MAAM6J,GACxBZ,KACA3D,KACAoD,KACAoB,KACAC,QAIR,MAAMC,GAAajH,UACf,UAC2B2E,GAAca,IAAK,gBAAgB,CACtDI,OAAQ,CACJP,YAAa,eAGvB,MAAOpD,OACLD,QAAQC,MAAM,SAAUA,SAKtBiE,GAAalG,UACnBH,GAAeM,MAAQ,CAAC,IACxBtB,GAAgBsB,OAAM,EAClB,IACI,MAAMF,QAAiBkE,GAAeqB,IAAK,QAAOnG,GAAWc,SAC7Db,GAAMa,MAAQF,EAASI,KACvBxB,GAAgBsB,OAAM,EACxB,MAAO8B,OACLD,QAAQC,MAAM,wBAAyBA,OACvCpD,GAAgBsB,OAAM,IAKxB+G,IAAoB3K,EAAAA,EAAAA,IAAI,CAAC,KACzB4K,IAA0B5K,EAAAA,EAAAA,IAAI,GAClCwK,GAAyB/G,UAC3B,IACI,MAAMC,QAAiB0E,GAAca,IAAK,gCAC1C0B,GAAkB/G,MAAQF,EAASI,KAAKA,KAAKG,QAAO4G,GAAwB,cAAhBA,EAAKtF,SACjEqF,GAAwBhH,MAAQF,EAASI,KAAKgH,gBAChD,MAAOpF,OACLD,QAAQC,MAAM,oCAAqCA,OACnDjD,GAAU,qCAAuCiD,MAAMhC,UAAUI,MAAM2E,SAAW/C,MAAM+C,UAN5F,QAQIsC,GAAWnH,OAAQ,IAKrB4F,IAAaxJ,EAAAA,EAAAA,KAAI,GACjB+K,IAAa/K,EAAAA,EAAAA,KAAI,GACjBuF,IAASvF,EAAAA,EAAAA,IAAI,IACbgL,IAAYhL,EAAAA,EAAAA,MACZiL,IAAmBjL,EAAAA,EAAAA,IAAI,IACvB+I,IAAU/I,EAAAA,EAAAA,IAAI,IACdkL,IAAkBlL,EAAAA,EAAAA,KAAI,GACtBmL,IAAYnL,EAAAA,EAAAA,KAAI,GAChB4I,IAAc5I,EAAAA,EAAAA,IAAI,IAClBoL,IAAcpL,EAAAA,EAAAA,IAAI,IAClBqL,IAAgBrL,EAAAA,EAAAA,IAAI,IACpBsL,IAAetL,EAAAA,EAAAA,IAAI,IACnBuL,IAA6BvL,EAAAA,EAAAA,IAAI,IACjCwL,GAAgB,CAAE,MAAM,YAAY,OAAQ,cAAc,QAAQ,SAAS,UAAU,WAElFC,GAAiB,CAACC,EAAKb,KACxBc,GAAaD,EAAK7H,IAClB+E,GAAYhF,MAAQ8H,EAAK7J,KACzBwJ,GAAczH,MAAQiH,EAAKhJ,KAC3BuJ,GAAYxH,MAAS8H,EAAK5J,KAAO4J,EAAK3J,SAAW2J,EAAK1J,WACtDkJ,GAAgBtH,OAAQ,EACxB2H,GAA2B3H,MAAQ8H,EAAK7H,IAEvC+H,GAAmB,KACxBV,GAAgBtH,OAAQ,EACxBoH,GAAUpH,MAAQ,GAClBmF,GAAQnF,MAAQ,GAChBgF,GAAYhF,MAAQ,GACpByH,GAAczH,MAAQ,GACtB2H,GAA2B3H,MAAQ,GACnCqH,GAAiBrH,MAAQ,GACzB+F,MAEMkC,GAAapI,UACf,GAAKuH,GAAUpH,MAAMkI,OAArB,CAIFX,GAAUvH,OAAO,EACf,IACyB,WAAjB2B,GAAO3B,MACPqH,GAAiBrH,OAASmI,KAAKC,IAAIf,GAAiBrH,OAC7B,SAAhB2B,GAAO3B,QACdqH,GAAiBrH,MAAQmI,KAAKC,IAAIf,GAAiBrH,QAEvD,MAAMF,QAAkBkE,GAAec,KAAM,iBAAiB,CAC1D3D,MAAM,IAAI7B,MAAOC,cAAc8I,MAAM,KAAK,GAC1CtD,YAAalI,KAAKC,MAAMC,aAAaC,QAAQ,SAASiD,GACtD+E,YAAaoC,GAAUpH,MACvBsI,SAAUzL,KAAKC,MAAMC,aAAaC,QAAQ,SAASiB,KACnD0J,2BAA4BA,GAA2B3H,MACvD9B,KAAMmJ,GAAiBrH,MACvB2B,OAAQA,GAAO3B,QAEnBmF,GAAQnF,MAAMoF,KAAKtF,EAASI,MAC5BkH,GAAUpH,MAAQ,GAClBqH,GAAiBrH,MAAQ,GACzBpB,GAAY,6BACZmJ,GAAaJ,GAA2B3H,OAC1C,MAAO8B,OACLjD,GAAU,uBAAwBiD,OAEtCyF,GAAUvH,OAAO,OA3BbnB,GAAU,4BA8BhBkJ,GAAelI,MAAAA,IACjBsH,GAAWnH,OAAQ,EACnB,IACI,MAAMF,QAAiBkE,GAAeqB,IAAK,mCAAkCpF,KAC7E,IAAIsI,EAAUlE,WAAWmD,GAAYxH,OACrC0H,GAAa1H,MAAQF,EAASI,KAAKM,KAAI,CAACN,EAAMsI,KAC1CD,GAAWlE,WAAWnE,EAAKhC,MACpB,CACPuK,IAAKD,EAAI,EACTvI,GAAIC,EAAKD,GACTyI,UAAWxI,EAAKoI,SAChBnH,KAAMjB,EAAKiB,KACXwH,MAAOzI,EAAKhC,KAAO,EAAI0K,OAAO1I,EAAKhC,MAAM2K,iBAAmB,MAAQ,KACpEC,OAAQ5I,EAAKhC,KAAO,EAAI0K,OAAOT,KAAKC,IAAIlI,EAAKhC,OAAO2K,iBAAmB,MAAQ,KAC/E7D,YAAa9E,EAAK8E,YAClBuD,QAASA,EAAQM,iBAAmB,UAI1C,MAAO/G,OACNjD,GAAUiD,MAAM+C,SACfhD,QAAQC,MAAM,0BAA2BA,OAE7CqF,GAAWnH,OAAQ,GAGjB+I,GAAqBlJ,MAAAA,IAEnB,GADAnB,GAAgBsB,OAAQ,EACpBgJ,QAAQ,gDAAiD,CACzDtK,GAAgBsB,OAAQ,EACxB,MAAMF,QAAiBkE,GAAe6B,OAAQ,kBAAiB5F,KAEvC,KAAnBH,EAAS6B,QACVoG,GAAaJ,GAA2B3H,OACxCtB,GAAgBsB,OAAQ,EACxBpB,GAAYkB,EAASI,KAAK2E,UAG1BhG,GAAU,0BAA2BiD,YAGzCpD,GAAgBsB,OAAQ,GAS9BiJ,GAAwBpJ,MAAAA,IAC1BqJ,KACEzK,GAAcuB,MAAQ,GAEtB,MAAMqG,EAAoB,CACpB,KAAOyB,EAAK7J,KACZ,MAAQ6J,EAAKtJ,MACb,WAAasJ,EAAKxJ,OAClB,QAAUwJ,EAAKzJ,QACf,SAAWyJ,EAAK3J,UAAY,EAC5B,WAAa2J,EAAK1J,YAAc,EAChC,KAAQ0J,EAAK5J,MAAQ,EACrB,OAAS4J,EAAKvJ,QAElB,IACI,MAAMuB,QAAiBkE,GAAemF,MAAO,qBAAoBrB,EAAK7H,KAAKoG,GACzEN,KACsB,KAAnBjG,EAAS6B,OACV/C,GAAY,oCAGZC,GAAU,yBACVgD,QAAQC,MAAMA,QAEpB,MAAOA,OACLD,QAAQC,MAAM,wBAAyBA,SAI7CoH,GAAe,KAClB7L,GAAiB2C,MAAM,IAGpBoJ,IAAYhN,EAAAA,EAAAA,IAAI,IAChBiN,GAAcxJ,MAAAA,IACa,UAAxBlC,GAAeqC,OAIpBoJ,GAAUpJ,MAAMC,EAChBnC,GAASkC,OAAM,GAJXnB,GAAU,sBAQZyK,GAAmB,KACrBF,GAAUpJ,MAAM,GAChBlC,GAASkC,OAAM,GAIbuJ,GAAa1J,MAAAA,IACfyJ,KACEvL,GAASiC,OAASjC,GAASiC,MAC3B,MAAMmG,EAAS,CACT,KAAOc,EAAKhJ,MAEhB,IACI,MAAM6B,QAAiBkE,GAAemF,MAAO,QAAOlC,EAAKhH,KAAKkG,GAEtC,KAAnBrG,EAAS6B,QACV3D,GAAUgC,MAAQ,GAClBpB,GAAY,4BACZmH,OAGAlH,GAAU,yBACVgD,QAAQC,MAAMA,QAGpB,MAAOA,OACLD,QAAQC,MAAM,sBAAuBA,OACrCjD,GAAUiD,MAAM+C,WAKpB2E,IAAUpN,EAAAA,EAAAA,KAAI,GACdqN,GAAc5J,UAClB,MAAMK,EAAO,CACT,OAAU,UAEd0F,GAAW5F,OAAO,EAChBwJ,GAAQxJ,OAAO,EACjB,IACI,MAAMF,QAAiBkE,GAAeC,IAAK,YAAW/E,GAAWc,QAASE,GACnD,KAAnBJ,EAAS6B,QACT/C,GAAY,6BACZjB,GAAeqC,MAAOF,EAASI,KAAKyB,OACpCS,KACCwD,GAAW5F,OAAO,EACjBwJ,GAAQxJ,OAAO,IAEhB4F,GAAW5F,OAAO,EACjBwJ,GAAQxJ,OAAO,EACjBnB,GAAU,yBAEhB,MAAOiD,OACJ8D,GAAW5F,OAAO,EACjBwJ,GAAQxJ,OAAO,EACjB6B,QAAQC,MAAM,sBAAuBA,OACrCjD,GAAU,0BAGN6K,GAAa7J,UACrB,MAAMK,EAAO,CACT,OAAU,QAEb0F,GAAW5F,OAAO,EACjBwJ,GAAQxJ,OAAO,EACjB,IACI,MAAMF,QAAiBkE,GAAeC,IAAK,YAAW/E,GAAWc,QAASE,GACnD,KAAnBJ,EAAS6B,QACRiE,GAAW5F,OAAO,EACjBwJ,GAAQxJ,OAAO,EACjBpB,GAAY,2BACZjB,GAAeqC,MAAOF,EAASI,KAAKyB,OACpCS,OAECwD,GAAW5F,OAAO,EACjBwJ,GAAQxJ,OAAO,EACjBnB,GAAU,wBAEhB,MAAOiD,OACJ0H,GAAQxJ,OAAO,EACf4F,GAAW5F,OAAO,EACnB6B,QAAQC,MAAM,qBAAsBA,OACpCjD,GAAU,yBAMV8K,GAAsB9J,MAAO+J,EAAMC,EAAOC,EAAOC,KACvD,MAAMC,EAAiBJ,EACjBK,EAAW,4DACXC,EAAc,mNAEdC,EAAc,CAClB,kBAAqB,WACrB,eAAkB,aAClB,GAAMH,EACN,KAAQ,WACR,SAAY,CACR,KAAQ,YACR,SAAY,CACR,KAAQ,MAEZ,WAAc,CACV,CACI,KAAQ,SACR,WAAc,CACV,CACI,KAAQ,QACR,MAAS,CACL,KAAQ,oEAKxB,CACI,KAAQ,OACR,WAAc,CACV,CACI,KAAQ,OACR,KAAQH,GAEZ,CACI,KAAQ,OACR,KAAQC,GAEZ,CACI,KAAQ,OACR,KAAQC,GAEZ,CACI,KAAQ,OACR,KAAQD,QAO/BM,GAAOpK,OAAO,EACb,IACE,MAAMF,QAAiBuK,MAAMJ,EAAU,CACrCK,OAAQ,OACRC,QAAS,CACP,cAAkB,UAASL,IAC3B,eAAgB,oBAElBM,KAAM3N,KAAK4N,UAAUN,WAEJrK,EAAS4K,OAC5B9L,GAAY,6BACZwL,GAAOpK,OAAO,EACd,MAAO8B,OACPsI,GAAOpK,OAAO,EACd6B,QAAQC,MAAM,SAAUA,SAItB6I,GAAc,KAEhB,IAAIC,EADJlO,EAAWsD,MAAOZ,GAAeY,MAAMtD,WAGnCkO,EADoB,GAApBlO,EAAWsD,MACL,kBAEC,WAEX,MAAM6K,EAAcC,OAAOC,KAAK,GAAI,uBACpCF,EAAYG,SAASC,MAAO,opDA2Db7L,GAAeY,MAAMjB,aAAcmM,uIAInC9L,GAAeY,MAAMsE,WAAY4G,8HAIjC9L,GAAeY,MAAMmL,OAAQD,2IAI7B9L,GAAeY,MAAMoL,gBAAiBF,4IAItC9L,GAAeY,MAAMqL,eAAgBH,4IAKpCnM,GAAaiB,MAAOkL,yTActB/L,GAAMa,MAAMQ,KAAI,CAACyG,EAAKuB,IAAO,2DAEjBA,EAAI,uCACJvB,EAAKhJ,wEAELgJ,EAAKqE,kBAAoBrE,EAAKqE,iBAAiB1J,OAAS,EAAK,gsBAcrDqF,EAAKqE,iBAAiB9K,KAAIsH,GAAS,mGAEvBA,EAAK7J,MAAQ,6DACb6J,EAAKtJ,OAAS,8DACbsJ,EAAK5J,MAAQ,GAAG2K,8EAChBf,EAAK3J,UAAY,GAAG0K,uBAAuBf,EAAK1J,YAAc,GAAGyK,2EAChEf,EAAK3J,UAAY,GAAG0K,kBAAoBf,EAAK1J,YAAc,GAAGyK,6HAElC,OAAhCf,EAAKyD,6BAAmEC,IAAhC1D,EAAKyD,uBAAwC,qFAE1HzD,EAAK3J,SAAW2J,EAAK5J,KAAO4J,EAAK1J,YAAYyK,uCACrC,mBAEmB,OAAhCf,EAAKyD,6BAAmEC,IAAhC1D,EAAKyD,wBACzCzD,EAAK3J,SAAW2J,EAAK5J,KAAO4J,EAAK1J,WAAc0J,EAAKyD,wBAAwB1C,kBAC7Ef,EAAK3J,SAAW2J,EAAK5J,KAAO4J,EAAK1J,YAAYyK,wIAKJf,EAAKvJ,QAAU,kGAE1BkN,KAAK,oHAGZ,6GAGVxE,EAAKqE,kBAAoBrE,EAAKqE,iBAAiB1J,OAAS,EAAK,sXAQvCqF,EAAKqE,iBAAiBI,MAAK5D,GAAwC,OAAhCA,EAAKyD,6BAAmEC,IAAhC1D,EAAKyD,yBAAyC,gKAErHtE,EAAKqE,iBAAiBK,QAAO,CAACC,EAAK9D,IAAS8D,GAAQ9D,EAAK3J,UAAY,IAAM2J,EAAK1J,YAAc,IAAM0J,EAAK5J,MAAQ,IAAM,GAAG2K,+EAChH,wGAEV5B,EAAKqE,iBAAiBK,QAAO,CAACC,EAAK9D,IAAS8D,GAAQ9D,EAAK3J,UAAY,IAAM2J,EAAK1J,YAAc,IAAM0J,EAAK5J,MAAQ,IAAO4J,EAAKyD,wBAA0B,IAAI,GAAG1C,uRAOtL,yBACL4C,KAAK,gTAQEzM,GAAcgB,MAAM6I,oBAAe2C,EAAW,CAAEK,sBAAuB,EAAGC,sBAAuB,yKAM3G9M,GAAcgB,MACdb,GAAMa,MAAM2L,QACR,CAACI,EAAY9E,IACb8E,GACC9E,EAAKqE,kBAAkBK,QACpB,CAACK,EAAWlE,IACZkE,GAAapD,OAAOd,EAAKyD,yBAA2B,IACpD,IACC,IACL,IAEF1C,oBAAe2C,EAAW,CAAEK,sBAAuB,EAAGC,sBAAuB,kKAM/E3M,GAAMa,MAAM2L,QACZ,CAACI,EAAY9E,IACT8E,GACC9E,EAAKqE,kBAAkBK,QACxB,CAACK,EAAWlE,IACRkE,GACElE,EAAK3J,UAAY,IAAM2J,EAAK5J,MAAQ,IAAM4J,EAAK1J,YAAc,IAC9D0J,EAAKyD,wBAA0B,IACpC,IACK,IACT,GACE1C,oBAAe2C,EAAW,CAAEK,sBAAuB,EAAGC,sBAAuB,waAajElB,ujBAmB5BC,EAAYG,SAASiB,QAGnBpB,EAAYqB,aAAe,WACvBrB,EAAYoB,SAIhBE,YAAW,KACPtB,EAAYuB,UACb,KAMAhC,IAAShO,EAAAA,EAAAA,KAAI,GACbiQ,IAAkBjQ,EAAAA,EAAAA,KAAI,GACvBkQ,IAAuBlQ,EAAAA,EAAAA,IAAI,IAE3BmK,KADuBnK,EAAAA,EAAAA,IAAI,KACbA,EAAAA,EAAAA,KAAI,IACjBmQ,IAA0BnQ,EAAAA,EAAAA,IAAI,IAC9BoQ,IAAmBpQ,EAAAA,EAAAA,KAAI,GACrBqQ,IAAarQ,EAAAA,EAAAA,KAAI,GACnBsQ,IAAiBtQ,EAAAA,EAAAA,KAAI,GACrBuQ,IAAgBvQ,EAAAA,EAAAA,IAAI,IACpBwQ,IAAgBxQ,EAAAA,EAAAA,IAAI,IACpByQ,IAAoBzQ,EAAAA,EAAAA,IAAI,IACxB0Q,IAAmB1Q,EAAAA,EAAAA,IAAI,IACvB2Q,IAAiB3Q,EAAAA,EAAAA,IAAI,IACrB4Q,IAAmB5Q,EAAAA,EAAAA,IAAI,IACvB6Q,IAAa7Q,EAAAA,EAAAA,IAAI,IACjBoK,IAAsBpK,EAAAA,EAAAA,KAAI,GAC1B8Q,IAAY9Q,EAAAA,EAAAA,IAAI,IACjB+Q,IAAe/Q,EAAAA,EAAAA,IAAI,CAAC,MAAM,cAAe,QAAS,WAAY,OAAQ,SAAS,YAC/EgR,IAAUhR,EAAAA,EAAAA,IAAI,IACdiR,IAAcjR,EAAAA,EAAAA,MACdkR,IAA+BlR,EAAAA,EAAAA,IAAI,IACnCmR,IAA2BnR,EAAAA,EAAAA,IAAI,IAC/BoR,IAAqBpR,EAAAA,EAAAA,KAAI,GAGzBqR,GAAuB,KACpBD,GAAmBxN,OAAM,GAI1B0N,GAAY,KACbC,GAAc3N,MAAM,GACpBjB,GAAaiB,MAAM,GACnBuB,GAAcvB,MAAM,GACpB4N,GAAiB5N,MAAM,GACvB6N,GAAkB7N,MAAM,GACxB6D,GAAU7D,MAAM,GAChB8N,GAAY9N,MAAQ,GACvB+N,GAAa/N,MAAO,GACpBgO,GAAahO,MAAO,GACpBiO,GAAejO,MAAO,GACtBkO,GAAgBlO,MAAO,GACvBwN,GAAmBxN,OAAQ,EAC3B5C,GAAW4C,OAAQ,GAIhB2N,IAAgBvR,EAAAA,EAAAA,IAAI,IACjBwR,IAAmBxR,EAAAA,EAAAA,IAAI,IACvByR,IAAoBzR,EAAAA,EAAAA,IAAI,IACrB0R,IAAc1R,EAAAA,EAAAA,IAAI,IACrB2R,IAAc3R,EAAAA,EAAAA,IAAI,IAClB4R,IAAe5R,EAAAA,EAAAA,IAAI,IACrB6R,IAAgB7R,EAAAA,EAAAA,IAAK,IACrB8R,IAAgB9R,EAAAA,EAAAA,IAAI,IAClBmF,IAAgBnF,EAAAA,EAAAA,IAAI,IACpByH,IAAYzH,EAAAA,EAAAA,IAAI,IAChB+R,GAAwBtO,UAC9B,IACI2N,GAAmBxN,OAAQ,EAC3BtB,GAAgBsB,OAAQ,GAGC,IAArB5C,GAAW4C,aACLoO,KAGV,MAAMC,EAAoB,CACtBpQ,KAAM,SAASiB,GAAWc,MAC1BtD,WAAYA,EAAWsD,MACvB6D,UAAWA,GAAU7D,MACrBe,SAAU,OACVE,QAAS,OACT/B,WAAYE,GAAeY,MAAMC,GACjCmB,QAAS,QACTG,cAAeA,GAAcvB,MAC7BwB,SAAU,OACVE,QAAS7E,KAAKC,MAAMC,aAAaC,QAAQ,SAASiD,GAClDiB,aAAcrE,KAAKC,MAAMC,aAAaC,QAAQ,SAASiB,KACvDsC,YAAa,WACb+N,aAAc,QAGZxO,QAAiBkE,GAAec,KAAK,kBAAmBuJ,GAC9DzO,KACA8N,KACAhP,GAAgBsB,OAAQ,EACF,MAApBF,EAAS6B,QACPrF,EAAc0D,OAAM,EACpBpB,GAAY,4CAEZC,GAAU,qCACVgD,QAAQC,MAAMA,QAIpB,MAAOA,OACLjD,GAAU,cAAgBiD,MAAMH,QAChCE,QAAQC,MAAM,2BAA4BA,OAC1CpD,GAAgBsB,OAAQ,IAI1BoO,GAAiBvO,UACnB,IACInB,GAAgBsB,OAAQ,EACxB,MAAMuO,EAAa,CACftQ,KAAM6P,GAAY9N,MAClB4J,MAAOmE,GAAa/N,MACpBwO,MAAOR,GAAahO,MACpBiB,QAASgN,GAAejO,MACxBwB,SAAU0M,GAAgBlO,OAGxBF,QAAiB0E,GAAcM,KAAK,WAAYyJ,GAGtD,OAFA1K,GAAU7D,MAAQF,EAASI,KAAKD,GAChCvB,GAAgBsB,OAAQ,EACjBF,EAASI,KAAKD,GACvB,MAAO6B,OAGL,MAFAjD,GAAU,2BAA6BiD,MAAMH,QAC7CjD,GAAgBsB,OAAQ,EAClB8B,QAOP2M,GAAuB,CAAC3G,EAAMb,KAEjCpF,QAAQ6M,IAAI,sBAAsB/O,GAAoBK,OACtDuN,GAAyBvN,MAAQ,EACjCsN,GAA6BtN,MAAQ,KAGrCuM,GAAwBvM,MAAQ8H,EAAK7H,GACrC0M,GAAc3M,MAAQ8H,EAAK5J,KAC3B0O,GAAc5M,MAAQ8H,EAAK7J,KAC3B6O,GAAkB9M,MAAQ8H,EAAK3J,SAAW2J,EAAK1J,WAC/C2O,GAAe/M,MAAQ8H,EAAKtJ,MAC5BkO,GAAc1M,OAAQ,EACtB6M,GAAmB7M,MAAQ8H,EAAK3J,SAAW2J,EAAK1J,WAGhDuQ,MAGEA,GAAW9O,UACbuN,GAAQpN,OAAQ,EAChB,IACI,MAAMF,QAAiBkE,GAAeqB,IAAK,gBAAehJ,EAAa2D,SACnEF,EAASI,MAAQC,MAAMC,QAAQN,EAASI,OACxCmN,GAAarN,MAAQF,EAASI,KAAKyL,QAAO,CAACC,EAAKtL,IACrCsL,EAAOtL,EAAMnC,SAAWmC,EAAMsO,MACtC,GAEH1B,GAAUlN,MAAQF,EAASI,KAAKM,KAAI,CAACF,EAAOG,KAAR,CAChCC,IAAKD,EAAQ,EACboO,SAAUvO,EAAMuO,SAChB5O,GAAIK,EAAML,GACV+E,YAAa1E,EAAM0E,YACnBxG,MAAO8B,EAAMwO,aACb3Q,SAAUmC,EAAMnC,SAAS0K,iBACzB+F,KAAMhG,OAAOtI,EAAMsO,MAAM/F,iBACzBkG,QAASzO,EAAMnC,SAAWmC,EAAMsO,MAAM/F,oBAAe2C,EAAW,CAAEM,sBAAuB,QAG7FsB,GAAQpN,OAAQ,IAEhBoN,GAAQpN,OAAQ,EAChB6B,QAAQC,MAAM,4BAEpB,MAAOA,OACLsL,GAAQpN,OAAQ,EAChB6B,QAAQC,MAAM,kCAAmCA,SAIlDkN,GAAe,KAClB,IAAI3S,EAAa2D,MAEb,YADAnB,GAAU,mBAGd,GAAGiO,GAAkB9M,MAAQ6M,GAAmB7M,MAE5C,YADAnB,GAAU,+CAGhB,GAAGiO,GAAkB9M,OAAS,EAE5B,YADAnB,GAAU,0CAIVuO,GAAQpN,OAAQ,EAEhB,MAAMiP,EAAW,CACbC,SAAU7S,EAAa2D,MACvBgF,YAAa4H,GAAc5M,MAC3B8O,aAAc/B,IAAgB/M,OAAS,KACvC7B,SAAU2O,GAAkB9M,MAC5BmP,WAAY,EACZP,KAAMjC,GAAc3M,MACpBoP,aAAchQ,GAAeY,MAAMC,GACnC4O,SAAU,UAGd7K,GACKc,KAAK,SAAUmK,GACfnJ,MAAMhG,IACHyH,GAAUvH,OAAQ,EAClBoN,GAAQpN,OAAQ,EAEQ,MAApBF,EAAS6B,QACTgN,KACA/P,GAAY,kCAEZC,GAAU,0BACVgD,QAAQC,MAAM,2BAA4BhC,EAASI,KAAK2E,aAG/DwK,OAAOvN,IACJsL,GAAQpN,OAAQ,EAChB6B,QAAQC,MAAM,2BAA4BA,EAAM+C,aAYrDyK,GAAwB,KAC3B5C,GAAc1M,OAAO,EACrBwM,GAAkBxM,OAAQ,EAC1BuN,GAAyBvN,MAAQ,GAG9BuP,GAAiBtP,IAChBmN,GAAQpN,OAAQ,EACjBgJ,QAAQ,+CACGhF,GACL6B,OAAQ,UAAS5F,KACjB6F,MAAMhG,IACH6O,KACAvB,GAAQpN,OAAQ,EACQ,MAApBF,EAAS6B,OACV/C,GAAY,8BAEXC,GAAU,uBACVgD,QAAQC,MAAM,2BAA4BhC,EAASI,KAAK2E,aAG/DwK,OAAOvN,IACHsL,GAAQpN,OAAQ,EACjB6B,QAAQC,MAAM,2BAA4BA,EAAM+C,aAyC1D2K,GAAwB,KACtB,MAAMC,EAAiB,CACnBlP,YAAa,aACb+N,aAAc,aAEdtF,QAAQ,+CACRhF,GACKC,IAAK,mBAAkB5H,EAAa2D,QAASyP,GAC7C3J,MAAMhG,IACgB,KAAnBA,EAAS6B,QACR/C,GAAY,sDACZe,GAAoBK,MAAM,aAC1BJ,MAGDf,GAAU,uBAIbwQ,OAAOvN,IACJD,QAAQC,MAAM,0BAA2BA,EAAM+C,aAQ7D6K,GAAoB,KACtB,MAAM7E,EAAcC,OAAOC,KAAK,GAAI,sBACpCF,EAAYG,SAASC,MAAO,wuDA4Db7L,GAAeY,MAAMsE,WAAY4G,uIAIjCnM,GAAaiB,oHAIbyH,GAAczH,2HAIdgF,GAAYhF,+HAIZwH,GAAYxH,MAAO6I,whBAiBpBnB,GAAa1H,MAAMQ,KAAI,CAACyG,EAAKuB,IAAO,2DAExBA,EAAI,uCACJvB,EAAKyB,+CACLzB,EAAK9F,0CACL8F,EAAKjC,iDACLiC,EAAK0B,2CACL1B,EAAK6B,4CACL7B,EAAKsB,wCACLtB,EAAKyB,WAAazB,EAAKyB,UAAU9G,OAAS,EAAK,iCAC7C,2GAGb6J,KAAK,uEAMnBZ,EAAYG,SAASiB,QAGtBpB,EAAYqB,aAAe,WACvBrB,EAAYoB,SAIhBE,YAAW,KACPtB,EAAYuB,UACb,KAIDuD,IAAQvT,EAAAA,EAAAA,IAAI,IACZwT,IAAWxT,EAAAA,EAAAA,IAAI,IACfyT,IAAUzT,EAAAA,EAAAA,IAAI,GACd0T,IAAgB1T,EAAAA,EAAAA,IAAI,GACpB2T,IAAe3T,EAAAA,EAAAA,IAAI,IACnB4T,IAAe5T,EAAAA,EAAAA,IAAK,IAEpByK,GAAkBhH,UAClB,MAAMC,QAAiB0E,GAAca,IAAK,SAC1C4K,GAAGjQ,MAAQF,EAASI,KACpB6P,GAAa/P,MAAQF,EAASI,KAAK6P,cAEnCE,IAAK7T,EAAAA,EAAAA,IAAI,IACT8T,GAAgBrQ,UAEpB,GADAmQ,GAAahQ,MAAQ4P,GAAS5P,OACzB4P,GAAS5P,MAAMkI,OAElB,YADAyH,GAAO3P,MAAQ,6BAIjB2P,GAAO3P,MAAQ,cACf6P,GAAQ7P,MAAQ,EAEhB,MAAMmQ,EAAYC,YAAYC,MAC9BP,GAAc9P,MAAQsQ,aAAY,KAChC,MAAMD,EAAMD,YAAYC,MACxBR,GAAQ7P,QAAUqQ,EAAMF,GAAa,KAAMI,QAAQ,KAClD,IAEH,IACE,IAAIC,EAAiB,GAErB,MAAMC,EAAYR,GAAGjQ,OAAO0Q,OACtBC,EAAaF,GAAaA,EAAUG,WAAW,QAErD,GAAID,EACF,IACE,MAAME,EAAiB1R,GAAMa,MAC7BwQ,EAAkB,sBAAqB3T,KAAK4N,UAAUoG,EAAgB,KAAM,SAC5E,MAAOC,GACPjP,QAAQkP,KAAK,+BAAgCD,EAAIjM,SAIrD,MAAMmM,EAAkBjB,GAAa/P,MAClCQ,KAAI,CAACgI,EAAG/H,IAAW,GAAEA,EAAQ,MAAM+H,EAAExD,gBACrCyG,KAAK,MAEFwF,EACH,8FACAT,GAAkB,IAClB,qDAAoDQ,QACpD,qDAAoDpB,GAAS5P,QAE1DkR,QAAoB3U,EAAS0U,GAEnCtB,GAAO3P,MAAQkR,EACZhJ,OAEH,MAAOpG,OACPD,QAAQC,MAAMA,OACd6N,GAAO3P,MAAQ,uCAhCjB,QAkCEmR,cAAcrB,GAAc9P,OAC5B8P,GAAc9P,MAAQ,KACtB4P,GAAS5P,MAAQ,K,y12BCn4FrB,MAAMoR,IAA2B,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://cork-vue3/./src/views/report/projectBudgets.vue","webpack://cork-vue3/./src/views/report/projectBudgets.vue?739f"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">\r\n        <ul class=\"navbar-nav flex-row\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Items Budget</a></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>  \r\n<!--notification starts  -->\r\n    <div class=\"d-flex\" v-if=\"amendment_request_count!= 0\">\r\n        <div class=\"ms-auto\" >\r\n      <div class=\"dropdown nav-item notification-dropdown btn-group\" >\r\n <a href=\"javascript:;\" id=\"ddlnotify\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\r\n   class=\"btn dropdown-toggle nav-link position-relative p-0 shadow\" >\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"\r\n       viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n       stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n       class=\"feather feather-bell text-danger\"\r\n       style=\"transform:scale(2)\"\r\n       >\r\n    <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path>\r\n    <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path>\r\n  </svg>\r\n  <span class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\r\n    {{ amendment_request_count}}\r\n  </span>\r\n</a>\r\n\r\n\r\n  <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"ddlnotify\">\r\n    <li v-for=\"amendment in amendmentRequests \"  class=\"dropdown-item\">\r\n      <div class=\"media\">\r\n        <div class=\"media-aside align-self-start\" >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"\r\n               fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n               stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n               class=\"feather feather-server\">\r\n            <rect x=\"2\" y=\"2\" width=\"20\" height=\"8\" rx=\"2\" ry=\"2\"></rect>\r\n            <rect x=\"2\" y=\"14\" width=\"20\" height=\"8\" rx=\"2\" ry=\"2\"></rect>\r\n            <line x1=\"6\" y1=\"6\" x2=\"6\" y2=\"6\"></line>\r\n            <line x1=\"6\" y1=\"18\" x2=\"6\" y2=\"18\"></line>\r\n          </svg>\r\n        </div>\r\n        <div class=\"media-body\" >\r\n          <div class=\"data-info\" >\r\n            <h6 class=\"mb-0\">From : {{ amendment.sender_name }}</h6>\r\n            <p class=\"mb-0 \"> {{amendment.description}}    \r\n            \r\n            <button\r\n            v-if=\"user_permissions.includes('can_check_budget_remark')\" \r\n             class=\"btn btn-success p-1 btn-sm me-1\" style=\"cursor:pointer\" @click=\"readRemark()\"\r\n             >✔</button></p>\r\n         \r\n          </div><br>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  </ul>\r\n</div>\r\n        </div>\r\n    </div>        \r\n<!-- notification ends -->\r\n\r\n\r\n        <div class=\"d-flex justify-content-between align-items-center\">\r\n            <div class=\"flex-grow-1 text-center\">\r\n<div class=\"budgets-container\" style=\"overflow:visible;\">\r\n    <div class=\"d-flex table-responsive\" style=\"overflow:visible;\">\r\n        <h4 class=\"budgets-title\">Budgets List</h4>\r\n  \r\n    </div>\r\n   \r\n<div v-if=\"budget_project != ''\">   \r\n  <div v-if=\"!newProject\" class=\"budgets-buttons\">\r\n    <!-- Accordion Container -->\r\n    <div class=\"accordion\">\r\n      <!-- Content (shows/hides) -->\r\n      <div class=\"accordion-content\" v-show=\"isAccordionOpen\">\r\n        <span \r\n          v-for=\"project in projects\" \r\n          class=\"budget-button project-button\" \r\n          @click=\"setParam(project)\"\r\n        >\r\n          {{ project.name }}\r\n          <span \r\n            v-if=\"user_permissions.includes('can_delete_budget') && project.items_count == 0\" \r\n            class=\"close-mark\" \r\n            @click.stop=\"deleteBudget(project.id)\"\r\n          >\r\n            ×  \r\n          </span>\r\n        </span>\r\n        <span \r\n          v-if=\"user_permissions.includes('can_create_budget')\" \r\n          class=\"budget-button new-project-button\" \r\n          @click=\"newProject=!newProject,project_name='',project_id=0\"\r\n        >\r\n          + New Budget\r\n        </span>\r\n      </div>\r\n      <div \r\n        class=\"accordion-toggle\" \r\n        style=\"text-align: center; margin-top: 8px;\"\r\n        @click=\"isAccordionOpen = !isAccordionOpen\"\r\n      >\r\n        <span \r\n          class=\"toggle-arrow\" \r\n          style=\"\r\n            display: inline-block;\r\n            background: white;\r\n            padding: 0 10px;\r\n            border: 1px solid #ddd;\r\n            border-radius: 12px;\r\n            cursor: pointer;\r\n          \"\r\n        >\r\n          {{ isAccordionOpen ? '▲' : '▼' }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div v-else><h6 class=\"mt-1 text-success\">Please Select a project from the list</h6></div>\r\n \r\n    <!-- New Project Section -->\r\n    <div v-if=\"newProject\" class=\"d-flex flex-column align-items-center\">\r\n      <div class=\"w-50 mx-auto mt-2\"> <!-- Consistent width wrapper -->\r\n        <input \r\n          type=\"text\" \r\n          class=\"form-control\" \r\n          placeholder=\"Enter budget name\"\r\n          v-model=\"project_name\"\r\n        >\r\n      </div>\r\n      <div class=\"d-flex justify-content-center mt-2\"><button \r\n          type=\"button\" \r\n          class=\"btn btn-secondary mx-2\"\r\n          @click=\"newProject = false\"\r\n        >\r\n          Cancel\r\n        </button>\r\n\r\n        <button \r\n          type=\"button\" \r\n          class=\"btn btn-primary me-2\"\r\n          @click=\"addProject\"\r\n        >\r\n          Add Project\r\n        </button>\r\n      </div>\r\n    </div>\r\n</div>\r\n\r\n        </div>    \r\n     </div>\r\n        <div>\r\n\r\n<!-- loading spinner starts -->\r\n<div v-if=\"loading_spinner\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n     </span>\r\n</div>\r\n <!-- loading spinner ends -->  \r\n<div v-if=\"project_id != 0 \">\r\n\r\n\r\n<!-- project description -->\r\n<div class=\"table-responsive\">\r\n    <table class=\"table table-striped\">\r\n        <thead>\r\n            <tr>\r\n                <th>PROJECT DETAILS</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr>\r\n                <td><strong>PROJECT NAME:</strong></td>\r\n                <td>{{ budget_project.project_name }}</td>\r\n            </tr>\r\n            <tr>\r\n                <td><strong>SHORT NAME:</strong></td>\r\n                <td>{{ budget_project.short_name }}</td>\r\n            </tr>\r\n            <tr>\r\n                <td><strong>CONTRACT NUMBER:</strong></td>\r\n                <td>{{ budget_project.contract_number }}</td>\r\n            </tr>\r\n            <tr>\r\n                <td><strong>FINANCIAL YEAR:</strong></td>\r\n                <td>{{ budget_project.financial_year }}</td>\r\n            </tr>\r\n            <tr>\r\n                <td><strong>PROJECT COST:</strong></td>\r\n                <td>{{ budget_project.project_cost.toLocaleString() }} Tsh</td>\r\n            </tr>\r\n            <tr>\r\n                <td><strong>CLIENT:</strong></td>\r\n                <td>{{ budget_project.client }}</td>\r\n            </tr>\r\n            <tr>\r\n                <td>BUDGET FOR:</td>\r\n                <td @click=\"project_status === 'open' ?(budget_name =project_name, edit_budget_name = true) : showError('Budget is closed') \"> {{ (project_name).toUpperCase() }}</td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan=\"2\" >\r\n                                  <table class=\"shadow table table-bordered table-responsive table-striped\">\r\n                        <thead>\r\n                            <tr >\r\n                                <th class=\"text-dark fw-bold\">ALLOCATED AMOUNT</th>\r\n                                <th class=\"text-success\">ALLOCATED BALANCE</th>\r\n                                 <th class=\"text-danger\">UNALLOCATED AMOUNT</th>\r\n                                 <th class=\"text-dark\">BUDGET COST</th> \r\n                            </tr>\r\n                            <tr>\r\n                                <td @click=\"add_fund =! add_fund\"  style=\"cursor:pointer\">\r\n                                   {{ funded_amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) }} Tsh\r\n                                </td>\r\n                                <td  class=\"text-success fw-bolder\">\r\n                                     {{\r\n            (\r\n                funded_amount -\r\n                items.reduce(\r\n                (grandTotal, item) =>\r\n                    grandTotal +\r\n                    item.item_description.reduce(\r\n                    (itemTotal, desc) => itemTotal + (Number(desc.budget_remark_sum_cost) || 0),\r\n                    0\r\n                    ),\r\n                0\r\n                )\r\n            ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n            }} Tsh\r\n                                </td>\r\n\r\n                                <td class=\"text-danger fw-bolder\">\r\n                                    {{\r\n                                        (\r\n                                            // Unfunded Amount: budget cost - funded amount\r\n                                            items.reduce(\r\n                                                (grandTotal, item) =>\r\n                                                    grandTotal +\r\n                                                    item.item_description.reduce(\r\n                                                        (itemTotal, desc) =>\r\n                                                            itemTotal +\r\n                                                            ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)),\r\n                                                        0\r\n                                                    ),\r\n                                                0\r\n                                            ) - funded_amount\r\n                                        ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n                                    }} Tsh\r\n                                </td>\r\n                                  <td>\r\n                                    {{\r\n                                        // Budget Cost: grand total without any deduction from description remark\r\n                                        items.reduce(\r\n                                            (grandTotal, item) =>\r\n                                                grandTotal +\r\n                                                item.item_description.reduce(\r\n                                                    (itemTotal, desc) =>\r\n                                                        itemTotal +\r\n                                                        ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)),\r\n                                                    0\r\n                                                ),\r\n                                            0\r\n                                        ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n                                    }} Tsh\r\n                                </td>\r\n                            </tr>\r\n                        </thead>\r\n    </table> \r\n                    <!-- <table class=\"table table-bordered mb-0\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Allocated Amount</th>\r\n                                <th>Budget Cost</th>\r\n                                <th>UnAllocated Amount</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td  @click=\"add_fund = true\">\r\n                                    {{ funded_amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) }}\r\n                                </td>\r\n                                   <td>\r\n                                    {{\r\n                                        // Budget Cost: grand total without any deduction from description remark\r\n                                        items.reduce(\r\n                                            (grandTotal, item) =>\r\n                                                grandTotal +\r\n                                                item.item_description.reduce(\r\n                                                    (itemTotal, desc) =>\r\n                                                        itemTotal +\r\n                                                        ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)),\r\n                                                    0\r\n                                                ),\r\n                                            0\r\n                                        ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n                                    }}\r\n                                </td>\r\n                                 <td>\r\n                                    {{\r\n                                        (\r\n                                            // Unfunded Amount: budget cost - funded amount\r\n                                            items.reduce(\r\n                                                (grandTotal, item) =>\r\n                                                    grandTotal +\r\n                                                    item.item_description.reduce(\r\n                                                        (itemTotal, desc) =>\r\n                                                            itemTotal +\r\n                                                            ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)),\r\n                                                        0\r\n                                                    ),\r\n                                                0\r\n                                            ) - funded_amount\r\n                                        ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n                                    }}\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table> -->\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <h4 class=\"mb-0  mb-2\">\r\n    <div v-if =\"edit_budget_name\" class=\"d-flex align-items-center gap-2\">\r\n    <input type=\"text\" class=\"form-control w-50 \" v-model=\"budget_name\" :placeholder=\"project_name\">\r\n    <button class=\"btn btn-primary\" @click=\"editBudget()\">Save</button>\r\n    <button class=\"btn btn-danger r-2\" @click=\"edit_budget_name=!edit_budget_name\">X</button>\r\n    </div>\r\n    </h4>\r\n    <h4 class=\"mb-0  mb-2\">\r\n    <div v-if =\"add_fund\" class=\"d-flex align-items-center gap-2\">\r\n    <input type=\"number\" class=\"form-control w-25 \" v-model=\"new_fund\" placeholder=\"Enter additional fund\" step=\"any\">\r\n     <input type=\"date\" class=\"form-control w-25 \" v-model=\"fund_date\"  >\r\n    <button class=\"btn btn-primary\" @click=\"addFund()\">Save</button>\r\n    <button class=\"btn btn-danger r-2\" @click=\"add_fund=!add_fund\">X</button>\r\n    </div>\r\n</h4>\r\n</div>\r\n <!-- project description ends -->\r\n\r\n              \r\n         <div class=\"d-flex flex-wrap gap-2 mt-4 justify-content-end align-items-center\">\r\n            <div class=\"btn-group flex-wrap\" style=\"gap: 8px;\">\r\n                <button \r\n                    class=\"btn btn-success mx-2 mt-2\" \r\n                    @click=\"printReport\" \r\n                    title=\"Print Report\"\r\n                    :disabled=\"in_process\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                        <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                    </svg>\r\n                    &nbsp;Print\r\n                </button>\r\n\r\n                <button \r\n                    v-if=\"project_status === 'open' && user_permissions.includes('can_create_budget') && !add_item\"\r\n                    class=\"btn btn-primary mt-2\" \r\n                    @click=\"add_item =!add_item\" \r\n                    title=\"Add Item\"\r\n                    :disabled=\"in_process\">\r\n                    &nbsp;Add Item\r\n                    \r\n                </button>\r\n                <button \r\n                    v-if=\"project_status === 'open' && user_permissions.includes('can_create_budget') && add_item\"\r\n                    class=\"btn btn-danger mt-2\" \r\n                    @click=\"add_item =!add_item\" \r\n                    title=\"Add Item\"\r\n                    :disabled=\"in_process\">\r\n                    &nbsp;Close Item\r\n                </button>\r\n\r\n                <button \r\n                    v-if=\" user_permissions.includes('can_create_lpo_from_budget') && !hide_lpo\"\r\n                    class=\"btn btn-dark mt-2\"           \r\n                    title=\"Add Item\"\r\n                    :disabled=\"in_process\"\r\n                    @click=\"hide_lpo = true \"\r\n                   >\r\n                    <!-- <span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span> -->        \r\n                    <span v-if=\"!lpo_list\"  @click= \"order_registration = true , getVendors(),setEnvForLpoCreation()\"> \r\n                        &nbsp;Create LPO \r\n                    </span>\r\n                     <span v-else @click=\"view_lpo_list = true, order_registration = false\"> \r\n                        &nbsp;Fill Lpo \r\n                    </span>          \r\n                </button>        \r\n                <button \r\n                    v-if=\" user_permissions.includes('can_create_lpo_from_budget') && lpo_creation_window && !un_finished \"\r\n                    class=\"btn btn-danger mt-2\" \r\n                    @click=\"showMessage('Please wait while Activating LPO'); activatePurchaseOrder();\"\r\n                    title=\"\"\r\n                    :disabled=\"in_process\">\r\n                    <span v-if=\"lpo_window\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                    <span v-else > &nbsp;Close Lpo Creation Window</span>\r\n                </button>\r\n\r\n                <button  \r\n                    v-if=\"project_status === 'open' && user_permissions.includes('can_close_budget')\"         \r\n                    class=\"btn btn-warning mt-2\" \r\n                    @click=\"closeBudget\" \r\n                    title=\"Add Item\"\r\n                    :disabled=\"in_process\">\r\n                     <span v-if=\"closing\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                     <span v-else>&nbsp;Close Budget </span>\r\n                </button>\r\n                <button  \r\n                    v-if=\"project_status === 'closed' && user_permissions.includes('can_open_budget')\"         \r\n                    class=\"btn btn-success mt-2\" \r\n                    @click=\"openBudget\" \r\n                    title=\"Add Item\"\r\n                    :disabled=\"in_process\">\r\n                     <span v-if=\"closing\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                     <span v-else>&nbsp;Open Budget </span>\r\n                </button>\r\n                  <button  \r\n                    v-if=\"project_status === 'closed'\"         \r\n                    class=\"btn btn-info mt-2\" \r\n                    @click=\"amendment_form=!amendment_form\">\r\n              Request Amendment\r\n                </button>\r\n\r\n                <button  \r\n                    v-if=\"project_status === 'open' && user_permissions.includes('can_alert_budget_for_review')\"         \r\n                    class=\"btn btn-secondary mt-2\" \r\n                    @click=\"triggerNotification('255698267662','Dozzaer','check','baba salama');\" \r\n                    title=\"Add Item\"\r\n                    :disabled=\"in_process\">\r\n                  <span v-if=\"submit\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                     <span v-else>&nbsp;Submit For Review </span>\r\n                </button>  \r\n            </div>\r\n        </div>\r\n<form v-if=\"amendment_form\" class=\"text-center mt-3\" @submit.prevent=\"requestAmendment()\">\r\n  <h4 class=\"text-center\">REQUEST FOR AMENDMENT</h4>\r\n  <div class=\"d-flex flex-column align-items-center\">\r\n    <textarea class=\"form-control w-75 mb-3\" v-model=\"amendment_description\" placeholder=\"Amendment Description\"></textarea>\r\n    <button type=\"submit\" class=\"btn btn-primary\" >Submit</button>\r\n  </div>\r\n</form>\r\n\r\n<!-- lpo list starts -->\r\n  <div class=\"d-flex mt-3\">\r\n    <div class=\"ms-auto\">\r\n                 <button v-if=\"hide_lpo\" class=\"btn btn-danger btn-sm \" @click=\"hide_lpo=false,order_registration=false,view_lpo_list=false\">\r\n                    X\r\n                </button>  \r\n    </div>\r\n  </div>\r\n\r\n\r\n         <div v-if=\"lpo_list && view_lpo_list\" class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table \r\n                            :data=\"purchaseOrders\" \r\n                            :columns=\"columns\" \r\n                            :options=\"table_option\" \r\n                           \r\n                        >\r\n                           \r\n                            <template #actions=\"props\">\r\n<span class=\"me-2\">\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"text-primary bi bi-eye\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n  <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n</svg>\r\n</span>\r\n\r\n<span class=\"me-2\">\r\n<svg v-if=\"selected_lpo == props.row.id\" \r\n@click=\"selected_lpo = 0,showMessage('Lpo Unselected')\"\r\nxmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"text-success bi bi-check-circle\"  viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0\"/>\r\n  <path d=\"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z\"/>\r\n</svg>\r\n\r\n\r\n\r\n<svg v-else\r\n@click=\"selected_lpo = props.row.id, selected_lpo_status = props.row.status, showMessage('LPO selected')\"\r\nxmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-circle\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16\"/>\r\n</svg>\r\n\r\n</span>\r\n\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n <!-- lpo list ends -->\r\n        <!-- order registration starts -->\r\n  \r\n           <form v-if=\"order_registration\" class=\"mt-1 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerPurchaseOrder\">\r\n            <h4 class=\"text-center\">LOCAL PURCHASE ORDER REGISTRATION</h4>\r\n            <div class=\"row mb-2\">\r\n                <div v-if=\"!add_vendor\" class=\"col-md-3\">\r\n                    <label class=\"form-label\">Select A Supplier</label>\r\n                    <select class=\"form-select\" v-model=\"vendor_id\" required @change=\"handleVendorChange\">\r\n    <option value=\"\">Select Supplier</option>\r\n    <option v-for=\"vendor in vendors\" :key=\"vendor.id\" :value=\"vendor.id\">{{ vendor.name }}</option>\r\n    <option value=\"NEW_VENDOR\">New Supplier</option>\r\n</select>\r\n                 \r\n\r\n\r\n                </div>\r\n                <!-- new vendor  starts-->\r\n                <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Name</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_name\" name=\"Vendor_name\" required>\r\n          </div>\r\n       \r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Email</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_email\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Phone</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_phone\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Address</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_address\" name=\"Vendor_name\" required>\r\n          </div>\r\n\r\n          <div  v-if=\"add_vendor\" class=\"col-md-3\">\r\n              <label class=\"form-label\">Supplier Location</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"Vendor_location\" name=\"Vendor_name\" required>\r\n          </div>\r\n                <div class=\"col-md-3\">\r\n                    <label class=\"form-label\">Payment Terms</label>\r\n                    \r\n                    <multiselect\r\n                    v-model=\"payment_terms\"\r\n                    :options=\"['Bank /TT ', 'Cash', 'Cheque', 'M-Pesa', 'On-Account', 'Wakala']\"\r\n                    :multiple=\"false\"\r\n                    :searchable=\"true\"\r\n                    required \r\n                    :placeholder=\"'Select Payment Terms'\"\r\n                    ></multiselect>\r\n                </div>\r\n        \r\n           \r\n            </div>\r\n         \r\n         \r\n\r\n            <div class=\"text-center gap-2 justify-content-end\">\r\n                <button v-if=\"add_vendor\" type=\"button\" class=\"btn btn-dark me-3\" @click=\"add_vendor=false\">Back</button>\r\n                <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"order_registration = false;add_vendor=false;is_closed=true\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n            </div>\r\n        </form>\r\n\r\n         <!-- order registration ends -->\r\n        <!--Item form starts  -->\r\n<div v-if=\"add_item \" class=\"mt-3 p-3 border rounded bg-light mb-2\">\r\n    <h5 class=\"mb-3\">Add Item</h5>\r\n    <div class=\"form-group mb-3 d-flex align-items-center col-12\">\r\n        <div class=\"row d-flex align-items-center col-12\">\r\n            <div class=\"col-md-10 col-10\">\r\n                <input type=\"text\" class=\"form-control\" id=\"item_name\" v-model=\"item_name\" placeholder=\"Enter item name\">\r\n            </div>\r\n            <div class=\"col-md-2 col-2\">\r\n                <button type=\"button\" class=\"btn btn-primary w-100\" @click=\"addItem\">Submit</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- item form ends -->\r\n<div class=\"table-responsive shadow-lg\">    \r\n\r\n<table class=\"table table-bordered table-responsive mt-5\">\r\n    <thead class=\"thead-light table-reponsive\">\r\n        <tr>\r\n            <th>Sno:</th>\r\n            <th>Item</th>\r\n            <th>Description\r\n                <div class=\"d-flex\">\r\n                    <div v-if=\"project_status == 'open'\" class=\"ms-auto\">\r\n                            <button class=\"btn btn-dark mx-2 p-1 btn-sm\" @click=\"unlocked=!unlocked, edit_description=''\">\r\n                                        <svg v-if=\"unlocked\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-lock\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2M5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1\"/>\r\n</svg>\r\n                                       <svg v-else xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-unlock\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2M3 8a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z\"/>\r\n</svg>\r\n\r\n                            </button>\r\n                    </div>\r\n                </div>\r\n            </th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr v-for=\"item,i in items\" :key=\"item.SNo\">\r\n            <td>{{ i + 1 }}</td>\r\n            <td >\r\n            <span  @click =\"editItemRow(item.id)\" v-if=\"edit_item !== item.id \">  {{ item.name }}\r\n            </span>\r\n            <div v-if=\"edit_item === item.id \"  >\r\n            <input type=\"text\" class=\"form-control\" v-model=\"item.name\">\r\n            <button class=\"btn btn-white md-2 \" @click=\"closeItemEdition()\">❌</button>\r\n            <button class=\"btn btn-white md-2 \" @click=\"updateItem(item)\">\r\n                ✅\r\n            </button>\r\n          </div>         \r\n            \r\n            </td>\r\n            <td>\r\n                <div>\r\n                    <table class=\"table table-bordered table-responsive table-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Name</th>\r\n                                <th>Units</th>\r\n                                <th>Quantity</th>\r\n                                <th>Total</th>\r\n                                <th>Cost</th>\r\n                                <th>Amount</th>\r\n                                <!-- <th>Paid By</th> -->\r\n                                <th>Remark</th>\r\n                                <th>\r\n                                    <div class=\"d-flex\">\r\n                                        <div v-if =\"project_status =='open' && user_permissions.includes('can_create_budget')\" class=\"ms-auto\" >\r\n                                        <button v-if=\"add_item_list === item.id \" class=\"btn btn-danger btn-sm p-2\" @click=\"add_item_list = '' \">X</button>\r\n                                        <button v-else  class=\"btn btn-primary\" @click=\"add_item_list = item.id \">add</button>\r\n                                    </div>\r\n                                    </div>\r\n                                    <button v-if=\"!unlocked && item.item_description  == '' && user_permissions.includes('can_delete_budget') \" class=\"btn btn-danger btn-sm p-1 mx-1\" @click=\"deleteItem(item.id)\">\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n  <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n</svg>\r\n                                    </button>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                 <tbody>\r\n                            <tr  v-for=\"desc,i in item.item_description\" :key=\"desc.id\">\r\n                                <td  >{{ i+1 }}</td>\r\n     <td @click =\"editRow(desc.id)\">\r\n      <span v-if=\"edit_description  !== desc.id \">\r\n        {{ desc.name }}\r\n      </span>        \r\n        <div v-if=\"edit_description === desc.id \">\r\n            <input type=\"text\" class=\"form-control\" v-model=\"desc.name\">\r\n        </div>\r\n    </td>\r\n    <td @click =\"editRow(desc.id)\" > \r\n        <span v-if=\"edit_description  !== desc.id \">\r\n        {{ desc.units}}\r\n      </span> \r\n        <div v-if=\"edit_description === desc.id \"  >\r\n            <input type=\"text\" class=\"form-control\" v-model=\"desc.units\">\r\n        </div>\r\n    </td>\r\n    <td @click =\"editRow(desc.id)\" >\r\n        <span v-if=\"edit_description  !== desc.id \">\r\n        {{ (desc.quantity).toLocaleString() }} x {{ (desc.quantity_2) }}\r\n      </span>       \r\n        <div class=\"row\" v-if=\"edit_description === desc.id \"  >\r\n            <input type=\"text\" class=\"form-control w-25\" v-model=\"desc.quantity\"> <span class=\"w-25 mt-2 text-center\">X</span> <input type=\"text\" class=\"form-control w-25\" v-model=\"desc.quantity_2\">\r\n        </div>\r\n    </td>\r\n      <td @click =\"editRow(desc.id)\" >\r\n  <div class=\"d-flex justify-content-between text-dark\" >\r\n    <span>Budgeted :</span>\r\n    <span>\r\n       {{(desc.quantity *desc.quantity_2).toLocaleString()}} \r\n    </span>\r\n  </div>\r\n\r\n    <div class=\"d-flex justify-content-between text-dark\" >\r\n    <span>Used :</span>\r\n   <span>\r\n       {{ \r\n  isNaN(((desc.budget_remark_sum_cost || 0) / (desc.quantity * desc.cost * desc.quantity_2)) * (desc.quantity * desc.quantity_2)) \r\n    ? 0 \r\n    : (((desc.budget_remark_sum_cost || 0) / (desc.quantity * desc.cost * desc.quantity_2)) * (desc.quantity * desc.quantity_2)).toLocaleString() \r\n}}\r\n   </span>\r\n  </div>\r\n    <hr class=\"bg-danger\">\r\n    <div class=\"d-flex justify-content-between text-dark\" >\r\n    <span>Balance :</span>\r\n   <span>\r\n     {{(\r\n        (desc.quantity *desc.quantity_2) -\r\n        ((desc.budget_remark_sum_cost || 0) /(desc.quantity * desc.cost * desc.quantity_2)) * ( desc.quantity * desc.quantity_2) \r\n        || 0\r\n        ).toLocaleString()}} \r\n   </span>\r\n  </div>\r\n\r\n        <div v-if=\"edit_description === desc.id \"  >\r\n        <input type=\"text\" class=\"form-control\" :value=\"desc.quantity * desc.quantity_2\" disabled>\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n    </td>\r\n    <td @click =\"editRow(desc.id)\" >\r\n        <span v-if=\"edit_description  !== desc.id \">\r\n        {{ desc.cost.toLocaleString() }}/=\r\n      </span> \r\n        <div v-if=\"edit_description === desc.id \"  >\r\n        <input type=\"text\" class=\"form-control\" v-model=\"desc.cost\">\r\n        </div>\r\n    </td>\r\n <td @click=\"editRow(desc.id)\">\r\n  <div class=\"d-flex justify-content-between text-dark\" >\r\n    <span>Budgeted :</span>\r\n    <span>{{ ((desc.quantity * desc.cost * desc.quantity_2)).toLocaleString() }} Tsh</span>\r\n  </div>\r\n\r\n    <div class=\"d-flex justify-content-between text-dark\" >\r\n    <span>Used :</span>\r\n   <span>{{ Number(desc.budget_remark_sum_cost || 0).toLocaleString() }} Tsh</span>\r\n\r\n  </div>\r\n  <hr class=\"bg-danger\">\r\n  <div\r\n  v-if=\"((desc.quantity * desc.cost * desc.quantity_2) - desc.budget_remark_sum_cost)<0\"\r\n  class=\"d-flex justify-content-between fw-bolder text-danger\" >\r\n    <span>Balance :</span>\r\n    <span>{{ ((desc.quantity * desc.cost * desc.quantity_2) - desc.budget_remark_sum_cost).toLocaleString() }} Tsh</span>\r\n  </div>\r\n\r\n    <div\r\n  v-else\r\n  class=\"d-flex justify-content-between fw-bolder\" style=\"color:#158c5b\">\r\n    <span>Balance :</span>\r\n    <span>{{ ((desc.quantity * desc.cost * desc.quantity_2) - desc.budget_remark_sum_cost).toLocaleString() }} Tsh</span>\r\n  </div>\r\n\r\n</td>\r\n\r\n    <!-- <td>{{  desc.paid_by }}<br>\r\n        <sub>{{ desc.ref_number }}</sub>\r\n    </td> -->\r\n    <!-- <td>{{ desc.notice }}</td> -->\r\n\r\n    <td>\r\n        <span  v-if=\"edit_description  !== desc.id \" class=\"mx-2\">\r\n            <svg \r\n                                     xmlns=\"http://www.w3.org/2000/svg\" \r\n                                     width=\"28\" height=\"28\" \r\n                                     fill=\"currentColor\"\r\n                                      class=\"bi bi-eye text-secondary\" \r\n                                      viewBox=\"0 0 16 16\"\r\n                                      @click=\"openRemarkModal(desc,item)\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n            </svg>\r\n        </span> \r\n\r\n         <span v-if= \"selected_lpo != 0\" class=\"mx-2\">\r\n            <svg \r\n                xmlns=\"http://www.w3.org/2000/svg\" \r\n                width=\"28\" height=\"28\" \r\n                fill=\"currentColor\"\r\n                class=\"bi bi-plus text-success\" \r\n                viewBox=\"0 0 16 16\"\r\n                @click=\"openLpoCreationModal(desc,item)\">\r\n                <path d=\"M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0z\"/>\r\n                <path d=\"M4 8a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3A.5.5 0 0 1 4 8z\"/>\r\n            </svg>\r\n        </span>        \r\n        <div v-if=\"edit_description === desc.id \" class=\"d-flex gap-2\">\r\n            <button class=\"btn btn-white md-2 \" @click=\"closeEdition()\">❌</button>\r\n            <button class=\"btn btn-white md-2 \" @click=\"updateItemDescription(desc)\">\r\n                ✅\r\n            </button>\r\n        </div>\r\n        <button v-if=\"!unlocked && user_permissions.includes('can_delete_budget')\" class=\"btn btn-danger btn-sm p-1\" @click=\"deleteItemDescription(desc.id)\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n                <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n            </svg>\r\n        </button>\r\n        <br><span v-if=\"((desc.quantity * desc.cost * desc.quantity_2) - desc.budget_remark_sum_cost)<0\" class=\"text-danger\">overBudget</span>\r\n    </td>\r\n</tr>\r\n<tr>\r\n    <td></td>\r\n    <td class=\"fw-bolder\">Total Budget</td>\r\n    <td></td>\r\n     <td></td>\r\n    <td class=\"fw-bold\">{{ item.item_description.reduce((sum, desc) => sum + (desc.quantity *desc.quantity_2), 0).toLocaleString() }}</td>   \r\n    <td class=\"fw-bold\">{{ item.item_description.reduce((sum, desc) => sum + desc.cost, 0).toLocaleString() }}</td>\r\n    <td class=\"fw-bold\">{{ item.item_description.reduce((sum, desc) => sum + (desc.quantity * desc.quantity_2 * desc.cost) - desc.budget_remark_sum_cost, 0).toLocaleString() }} Tsh</td>\r\n</tr>\r\n\r\n                            <tr v-if=\"add_item_list === item.id \">\r\n                                <td></td>\r\n                                <td>\r\n                                    <input type=\"text\" class=\"form-control\" v-model=\"name\" placeholder=\"Item\">\r\n                                </td>\r\n                                <td>\r\n                                    <input type=\"text\" class=\"form-control\" v-model=\"units\" placeholder=\"Units\">\r\n                                </td>\r\n                \r\n                                <td>\r\n    <div style=\"display: flex; align-items: center; gap: 5px;\">\r\n        <input type=\"number\" class=\"form-control\" v-model=\"quantity\" placeholder=\"qty1\"> \r\n        <span>X</span>\r\n        <input type=\"number\" class=\"form-control\" v-model=\"quantity_2\" placeholder=\"qty2\">\r\n    </div>\r\n</td>\r\n                                <td>\r\n                                    <input type=\"number\" class=\"form-control\" v-model=\"cost\" placeholder=\"cost\">\r\n                                </td>\r\n                                <td>\r\n                                    <label >{{ (cost * quantity * quantity_2).toLocaleString() }}</label>\r\n                                </td>\r\n                                <!-- <td>\r\n                                    <input type=\"text\" class=\"form-control\" v-model=\"paid_by\" placeholder=\"paid by\"><br>\r\n                                    <input type=\"text\" class=\"form-control\" v-model=\"ref_no\" placeholder=\"ref no\"><br>\r\n                                </td> -->\r\n                                <td>\r\n                                    <input type=\"text\" class=\"form-control\" v-model=\"notice\" placeholder=\"Any Remark\">\r\n                                </td>\r\n                                <td>\r\n                                    <button type=\"submit\" class=\"btn btn-primary\" @click=\"addItemDescription(item.id)\">Submit</button>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n    <tfoot>\r\n    \r\n    <tr>\r\n        <td colspan=\"2\" class=\"text-start fw-bold\">\r\n            SUMMARY \r\n        </td>\r\n        <td>\r\n              <table class=\"table table-bordered table-responsive table-striped\">\r\n                        <thead>\r\n                            <tr >\r\n                                <th class=\"text-dark fw-bold\">ALLOCATED AMOUNT</th>\r\n                                <th class=\"text-success\">ALLOCATED BALANCE</th>\r\n                                <!-- <th class=\"text-dark\">GRAND TOTAL</th> -->\r\n                                 <th class=\"text-danger\">UNALLOCATED AMOUNT</th>\r\n                                 <th class=\"text-dark\">BUDGET COST</th> \r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                   {{ funded_amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) }} Tsh\r\n                                </td>\r\n                                <td  class=\"text-success fw-bolder\">\r\n                                     {{\r\n            (\r\n                funded_amount -\r\n                items.reduce(\r\n                (grandTotal, item) =>\r\n                    grandTotal +\r\n                    item.item_description.reduce(\r\n                    (itemTotal, desc) => itemTotal + (Number(desc.budget_remark_sum_cost) || 0),\r\n                    0\r\n                    ),\r\n                0\r\n                )\r\n            ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n            }} Tsh\r\n                                </td>\r\n                                <!-- <td>\r\n                                    {{\r\n                items.reduce(\r\n                    (grandTotal, item) =>\r\n                        grandTotal +\r\n                        item.item_description.reduce(\r\n                            (itemTotal, desc) =>\r\n                                itemTotal +\r\n                                ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)) -\r\n                                (desc.budget_remark_sum_cost || 0),\r\n                            0\r\n                        ),\r\n                    0\r\n                ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n            }} Tsh \r\n                                </td> -->\r\n                                <td class=\"text-danger fw-bolder\">\r\n                                    {{\r\n                                        (\r\n                                            // Unfunded Amount: budget cost - funded amount\r\n                                            items.reduce(\r\n                                                (grandTotal, item) =>\r\n                                                    grandTotal +\r\n                                                    item.item_description.reduce(\r\n                                                        (itemTotal, desc) =>\r\n                                                            itemTotal +\r\n                                                            ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)),\r\n                                                        0\r\n                                                    ),\r\n                                                0\r\n                                            ) - funded_amount\r\n                                        ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n                                    }} Tsh\r\n                                </td>\r\n                                  <td>\r\n                                    {{\r\n                                        // Budget Cost: grand total without any deduction from description remark\r\n                                        items.reduce(\r\n                                            (grandTotal, item) =>\r\n                                                grandTotal +\r\n                                                item.item_description.reduce(\r\n                                                    (itemTotal, desc) =>\r\n                                                        itemTotal +\r\n                                                        ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)),\r\n                                                    0\r\n                                                ),\r\n                                            0\r\n                                        ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n                                    }} Tsh\r\n                                </td>\r\n                            </tr>\r\n                        </thead>\r\n    </table> \r\n        </td>\r\n     \r\n\r\n    </tr>\r\n  \r\n</tfoot>\r\n</table>\r\n</div>\r\n</div>\r\n        </div>\r\n       \r\n    </div>\r\n\r\n\r\n<!-- remark modal -->\r\n <!-- Modal -->\r\n <teleport to=\"body\">\r\n<div v-if=\"showRemarkModal\"  class=\"modal fade show d-block\" role=\"dialog\" @click.self=\"closeRemarkModal\">\r\n  <div class=\"modal-dialog modal-dialog modal-xl\" >\r\n    <div class=\"modal-content d-flex flex-column\" style=\"block-size: 90vh;\">\r\n  <div class=\"modal-header flex-column align-items-center\">\r\n  <h3 class=\"text-center\">Transaction Remarks</h3>\r\n  <button type=\"button\" class=\"btn-close\" @click=\"closeRemarkModal\"></button>\r\n</div>\r\n\r\n\r\n      <!-- <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button \r\n            class=\"btn btn-success mx-2 mt-2\" \r\n            @click=\"printRemarkReport\" \r\n            title=\"Print Report\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n            <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n            </svg>\r\n            &nbsp;Print\r\n            </button>\r\n        </div>\r\n      </div> -->\r\n      <div class=\"d-flex flex-column\">\r\n            <table class=\"table table-bordered\">\r\n                <tbody>\r\n                    <tr>\r\n                        <th>BUDGET </th>\r\n                        <th>ITEM</th>\r\n                        <th>DESCRIPTION</th>\r\n                        <th>BUDGET COST</th>\r\n                        <th class=\"text-center\">ACTION</th>\r\n                    </tr>\r\n                    <tr>\r\n                        \r\n                        <td><strong>{{ project_name }}</strong></td>\r\n                        <td><strong>{{ items_project }}</strong></td>\r\n                        <td><strong>{{ description }}</strong></td>\r\n                        <td><strong>{{ (remark_cost).toLocaleString() }}Tsh</strong></td>\r\n                        <td class=\"text-center\">\r\n                            <button \r\n      class=\"btn btn-success\" \r\n      @click=\"printRemarkReport\" \r\n      title=\"Print Report\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n        <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n      </svg>\r\n      &nbsp;Print\r\n    </button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            </div>\r\n      <div class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\">\r\n        <div v-if=\"isfetching\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n          <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n        </div>\r\n        <div v-else>\r\n            <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table\">                       \r\n                        <v-client-table :data=\"budgetRemaks\" :columns=\"remarkcolumns\" :options=\"table_option\">\r\n                        <template v-if=\"user_permissions.includes('can_delete_budget_description_remark')\"  #actions=\"props\">                        \r\n                             <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n                                 width=\"16\"\r\n                                  height=\"16\"                                 \r\n                                   fill=\"currentColor\"\r\n                                    class=\"bi bi-trash text-danger\"\r\n                                     @click=\"deleteBudgetRemark(props.row.id)\"\r\n                                     viewBox=\"0 0 16 16\">\r\n                                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n                                    <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n                                </svg>\r\n                            \r\n                        </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Form for adding a new remark - fixed at bottom -->\r\n<div class=\"p-3 border-top\" style=\"background-color: #f8f9fa;\">\r\n  <form @submit.prevent=\"saveRemark()\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <input\r\n          v-model=\"description_cost\"\r\n          class=\"form-control mb-2\"\r\n          type=\"number\"\r\n          placeholder=\"Enter cost spent\"\r\n          name=\"cost_onremark\"\r\n        />\r\n      </div>\r\n      <div class=\"col-md-6\">\r\n        <select class=\"form-control mb-2\" v-model=\"status\" required>\r\n          <option value=\"\">Select Transaction Type</option>\r\n          <option value=\"debit\">Debit</option>\r\n          <option value=\"credit\">Credit</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n    <textarea\r\n      v-model=\"newremark\"\r\n      class=\"form-control mb-2\"\r\n      rows=\"1\"\r\n      placeholder=\"Enter remarks\"\r\n    ></textarea>\r\n\r\n    <div class=\"d-flex justify-content-end gap-2\">\r\n      <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeRemarkModal\">\r\n        Close\r\n      </button>\r\n      <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSending\">\r\n        <span v-if=\"isSending && is_debit\">\r\n          <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n        </span>\r\n        <span v-else>Save</span>\r\n      </button>\r\n    </div>\r\n  </form>\r\n</div>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n</teleport>\r\n\r\n  <!-- Modal Background Overlay -->\r\n  <div v-if=\"showRemarkModal\" class=\"modal-backdrop fade show\"></div>\r\n<!-- remark modal end -->\r\n\r\n<!-- creating lpo modal strt -->\r\n <teleport to=\"body\">\r\n<div v-if=\"is_create_lpo\"  class=\"modal fade show d-block\" role=\"dialog\" @click.self=\"closeLpoCreationModal\">\r\n  <div class=\"modal-dialog modal-dialog modal-xl\" >\r\n    <div class=\"modal-content d-flex flex-column\" style=\"block-size:auto;\">\r\n      <div class=\"modal-header\">\r\n           \r\n   \r\n        <button type=\"button\" class=\"btn-close\" @click=\"closeLpoCreationModal\"></button>\r\n      </div>          \r\n      <div class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\">\r\n\r\n                               <div v-if=\"selected_lpo_status ==='Inactive'\"  class=\"mt-2 mb-2\" >\r\n  <button class=\"btn btn-warning\" @click=\"activatePurchaseOrder()\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"34\" height=\"34\" fill=\"currentColor\" class=\"bi bi-check2-square\" viewBox=\"0 0 16 16\">\r\n                                        <path d=\"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z\"/>\r\n                                        <path d=\"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0\"/>\r\n                                    </svg>\r\n                               Ready \r\n </button>\r\n        </div>\r\n         \r\n         <form v-if=\"selected_lpo_status ==='Inactive'\" @submit.prevent=\"registerItem\">   \r\n                      <h4>Form For Adding {{ lpo_item_name }} to LOCAL PURCHASSE ORDER </h4>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n                <label for=\"unit\" class=\"form-label\">Unit</label>\r\n                <input type=\"text\" id=\"unit\" class=\"form-control\" v-model=\"lpo_item_units\" placeholder=\"Units\">\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"item\" class=\"form-label\">Item</label>\r\n                <input type=\"text\" id=\"item\" class=\"form-control\" v-model=\"lpo_item_name\" placeholder=\"Item\">\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"quantity\" class=\"form-label\">Quantity (available: {{ Math.max(0, lpo_total_quantity - itemQuantitydFromStorage) }})</label>\r\n                <input\r\n                    type=\"number\"\r\n                    id=\"quantity\"\r\n                    class=\"form-control\"\r\n                    v-model=\"lpo_item_quantity\"\r\n                    placeholder=\"Quantity\"\r\n                    min=\"1\"                   \r\n                />\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"price\" class=\"form-label\">Price</label>\r\n                <input type=\"number\" id=\"price\" class=\"form-control\" v-model=\"lpo_item_cost\" placeholder=\"Price\"  disabled >\r\n            </div>\r\n            <div class=\"col-md-4 \">\r\n                <label for=\"amount\" class=\"form-label\">Amount</label>\r\n                <input type=\"text\" id=\"amount\" class=\"form-control\" :value=\"(lpo_item_cost * lpo_item_quantity).toLocaleString()\" readonly>\r\n            </div>\r\n            <div class=\"col-md-4 \">\r\n                <label for=\"remark\" class=\"form-label\">Remark</label>\r\n                <input type=\"text\" id=\"remark\" class=\"form-control\" v-model=\"lpo_item_notice\" placeholder=\"Remark\">\r\n            </div>\r\n        </div>\r\n          <div class=\"d-flex justify-content-end gap-4 mt-4\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeLpoCreationModal\">Close</button>\r\n            <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSending\"> \r\n              <span v-if=\"isSending && is_debit \">\r\n                <span class=\"spinner-border spinner-border-xs\" role=\"status\" aria-hidden=\"true\"></span>            \r\n                </span>\r\n              <span v-else>Submit</span>\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <v-else>\r\n               <h4>LOCAL PURCHASSE ORDER  LIST</h4>\r\n        </v-else>   \r\n            <div class=\"row layout-top-spacing\">\r\n           <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n               <div class=\"panel p-0\">  \r\n                     <div v-if=\"loading\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n        <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n            </svg>\r\n           \r\n        </span>\r\n    </div>\r\n\r\n                   <div class=\"custom-table table3 \">           \r\n                           <v-client-table :data=\"lpo_items\" :columns=\"item_columns\" :options=\"table_option\" >\r\n                           <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                           </template>\r\n                           <template  #actions=\"props\">                              \r\n                               <a v-if=\"selected_lpo_status ==='Inactive'\"  @click=\" deleteLpoItem(props.row.id)\"  href=\"javascript:void(0);\" title=\"Delete\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" >\r\n                                   <svg\r\n                                       xmlns=\"http://www.w3.org/2000/svg\"\r\n                                       width=\"24\"\r\n                                       height=\"24\"\r\n                                       viewBox=\"0 0 24 24\"\r\n                                       fill=\"none\"\r\n                                       stroke=\"currentColor\"\r\n                                       stroke-width=\"1.5\"\r\n                                       stroke-linecap=\"round\"\r\n                                       stroke-linejoin=\"round\"\r\n                                       class=\"text-danger\"\r\n                                   >\r\n                                       <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                       <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                   </svg>\r\n                               </a>\r\n                             \r\n\r\n                               \r\n                           </template>\r\n                          \r\n                       </v-client-table>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n       </div>     \r\n      </div>      \r\n     \r\n    </div>\r\n  </div>\r\n</div>\r\n</teleport>\r\n  <!-- Modal Background Overlay -->\r\n  <div v-if=\"is_create_lpo\" class=\"modal-backdrop fade show\"></div>\r\n<!-- creating lpo modal end -->\r\n\r\n\r\n<!-- unfinished lpo start -->\r\n\r\n <teleport to=\"body\">\r\n<div v-if=\"is_unfinished_lpo\"  class=\"modal fade show d-block\" role=\"dialog\" @click.self=\"closeLpoCreationModal\">\r\n  <div class=\"modal-dialog modal-dialog modal-xl\" >\r\n    <div class=\"modal-content d-flex flex-column\" style=\"block-size:auto;\">\r\n      <div class=\"modal-header\">           \r\n   \r\n        <button type=\"button\" class=\"btn-close\" @click=\"closeLpoCreationModal\"></button>\r\n      </div>          \r\n      <div class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\">\r\n          <h4>Items For Unfisnished LOCAL PURCHASSE ORDER </h4>        \r\n            <div class=\"row layout-top-spacing\">\r\n              <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n               <div class=\"panel p-0\"> \r\n                     <div v-if=\"loading\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n        <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n            </svg>\r\n           \r\n        </span>\r\n                          </div>\r\n                   <div class=\"custom-table table3 \">           \r\n                           <v-client-table :data=\"lpo_items\" :columns=\"item_columns\" :options=\"table_option\" >\r\n                           <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                           </template>\r\n                           <template #actions=\"props\">\r\n                              \r\n                               <a @click=\" deleteLpoItem(props.row.id)\"  href=\"javascript:void(0);\" title=\"Delete\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" >\r\n                                   <svg\r\n                                       xmlns=\"http://www.w3.org/2000/svg\"\r\n                                       width=\"24\"\r\n                                       height=\"24\"\r\n                                       viewBox=\"0 0 24 24\"\r\n                                       fill=\"none\"\r\n                                       stroke=\"currentColor\"\r\n                                       stroke-width=\"1.5\"\r\n                                       stroke-linecap=\"round\"\r\n                                       stroke-linejoin=\"round\"\r\n                                       class=\"text-danger\"\r\n                                   >\r\n                                       <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                       <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                   </svg>\r\n                               </a>\r\n                             \r\n\r\n                               \r\n                           </template>\r\n                          \r\n                       </v-client-table>\r\n                   </div>\r\n               </div>\r\n            <div class=\"d-flex justify-content-end gap-3 mt-3\">\r\n                <button class=\"btn btn-primary\" @click=\"un_finished = false; lpo_creation_window = true; lpo_number = lpoNumberFromStorage; closeLpoCreationModal();\">\r\n                    Continue With This LPO\r\n                </button>\r\n                <button class=\"btn btn-danger\" @click=\" closeLpoCreationModal(); closeLpoCreationWindow(); registerPurchaseOrder(); is_unfinished_lpo = false;\">\r\n                    Start New LPO\r\n                </button>\r\n            </div>\r\n           </div>\r\n\r\n       </div>     \r\n      </div>      \r\n     \r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n</teleport>\r\n  <!-- Modal Background Overlay -->\r\n  <div v-if=\"is_unfinished_lpo\" class=\"modal-backdrop fade show\"></div>\r\n\r\n<!-- unfinished lpo end -->\r\n\r\n<!-- ai modal starts-->\r\n<div class=\"modal fade\" id=\"ai-modal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header bg-dark \">\r\n        <h1 class=\"modal-title fs-5 text-white\">AI Assistant</h1>\r\n        <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body bg-light\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12\">\r\n            <div class=\"card shadow-sm border-0 p-3\">\r\n              <h5 class=\"mb-3 text-primary\">🧠 Ask AI</h5>\r\n\r\n              <!-- Input & Button -->\r\n              <form class=\"d-flex gap-2 mb-3\" @submit.prevent=\"RequestAnswer\">\r\n                <input \r\n                  type=\"text\" \r\n                  class=\"form-control rounded-pill px-4\" \r\n                  placeholder=\"Type your question...\" \r\n                  v-model=\"question\"\r\n                >\r\n                <button type=\"submit\" class=\"btn btn-success rounded-pill px-4\">Send</button>\r\n              </form>\r\n\r\n              <!-- Chat Box -->\r\n              <div class=\"p-3 bg-white rounded shadow-sm\" style=\"max-height: 400px; overflow-y: auto;\">\r\n                <h6 class=\"text-muted mb-3\">Response Time: {{ seconds }}s</h6>\r\n\r\n                <!-- User Message -->\r\n                <div v-if=\"old_question\" class=\"d-flex justify-content-end mb-3\">\r\n                  <div class=\"bg-success text-white p-3 rounded-4 shadow-sm\" style=\"max-width: 75%;\">\r\n                    <small class=\"d-block fw-bold mb-1\">You</small>\r\n                    <span>{{ old_question }}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- AI Message -->\r\n                <div v-if=\"answer\" class=\"d-flex justify-content-start mb-2\">\r\n                  <div class=\"bg-light border p-3 rounded-4 shadow-sm\" style=\"max-width: 75%;\">\r\n                    <small class=\"d-block text-secondary fw-bold mb-1\">AI</small>\r\n                    <span style=\"white-space: pre-line\">{{ answer }}</span>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer bg-light\">\r\n        <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- ai modal ends -->\r\n\r\n\r\n\r\n <div class=\"mt-5\"\r\n v-if=\"project_id != 0 \"\r\n data-bs-toggle=\"modal\" data-bs-target=\"#ai-modal\"\r\n v-html=\"aiIndicator()\"\r\n ></div>\r\n\r\n\r\n\r\n\r\n</template>\r\n\r\n\r\n\r\n<script setup>\r\n    import axios from 'axios';    \r\n    import { onMounted, ref,inject,watch, computed } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import { useRoute } from 'vue-router';\r\n    const hide_lpo = ref(false);\r\n    const selected_lpo = ref(0);\r\n    const view_lpo_list = ref(false);\r\n    const aiAnswer = inject('aiAnswer');\r\n    const aiAnswer2 = inject('aiAnswer2');\r\n    const deepseek = inject('deepseek');\r\n    const columns = ref(['SNo','LPO_number','requested_by', 'supplier','date','payment', 'actions']);\r\n    const company_id = ref(6);\r\n    const amendment_form = ref(false);\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    useMeta({ title:'Purchase Order'});\r\n    const add_vendor= ref(false);\r\n    const edit_description = ref('');\r\n    const is_description_edit= ref(false);\r\n    const is_debit = ref('');\r\n    const budget_name = ref('');\r\n    const edit_budget_name = ref(false);\r\n    const add_fund= ref(false);\r\n    const budgetProjects = ref([]);\r\n    const project_status = ref ('');\r\n    const newProject= ref('');\r\n    const projects = ref(['']);\r\n    const unlocked = ref(true);\r\n    const add_item = ref(false);\r\n    const item_name = ref('');\r\n    const name = ref('');\r\n    const cost = ref('');\r\n    const quantity = ref(1);\r\n    const quantity_2 = ref(1);\r\n    const paid_by = ref('');\r\n    const ref_no = ref('');\r\n    const notice = ref('');\r\n    const units = ref('');\r\n    const add_item_list = ref ('me');\r\n    const loading_spinner = ref(false);\r\n    const aiIndicator = inject('aiIndicator');\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const recordLog = inject('recordLog');\r\n    const project_name = ref('');\r\n    const funded_amount = ref(0);\r\n    const new_fund = ref('');\r\n    const project_id = ref(0);\r\n    const items = ref([]);\r\n    const budget_project = ref('');\r\n    const fund_date = ref(new Date().toISOString().slice(0, 10));\r\n    const lpo_list = ref(false);\r\n    const purchaseOrders = ref(['']);\r\n    const selected_lpo_status = ref('');\r\n    const getPurchaseOrders = async () => {\r\n         try {\r\n            const response = await    \r\n            axios.get(`https://bcftrack.trustdigital.space/api/v1/budget-purchase-orders?project_id=${budget_project.value.id}&budget_name=budget${project_id.value}`);\r\n            if (response.data && Array.isArray(response.data)) {\r\n                   purchaseOrders.value = response.data\r\n  .filter(order => order.status_name === \"Inactive\" )\r\n  .map((order, index) => ({\r\n    SNo: index + 1,\r\n    id: order.id,\r\n    LPO_number: `${String(order.id).padStart(4, '0')}/${order.date_created.slice(5, 7)}/${order.date_created.slice(2, 4)}`,\r\n    company_id: order.company_id,\r\n    supplier: order.vendor.name,\r\n    address: order.address,\r\n    requested_by: order.requested_by,\r\n    date: order.date_created,\r\n    project: order.project_aka,\r\n    payment: order.payment_terms,\r\n    location: order.location,\r\n    requester: order.user_id,\r\n    status: order.status_name,\r\n  }));\r\n\r\n\r\n             if (purchaseOrders.value.length > 0) {\r\n                lpo_list.value = true;\r\n            }else{\r\n                lpo_list.value = false;\r\n            }\r\n                    loading_spinner.value = false;\r\n                } else {\r\n                    console.error(\"Invalid response format\");\r\n                }\r\n        } catch (error) {\r\n            console.error(\"Error fetching  vendors : \", error);\r\n        }\r\n     }\r\n    const whatsappNotification = inject('whatsappNotification');\r\n    const vendors= ref(['']);\r\n       const getVendors = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await    \r\n            axios.get(`https://bcftrack.trustdigital.space/api/v1/vendors`);\r\n            if (response.data && Array.isArray(response.data)) {\r\n                    vendors.value = response.data;\r\n                    loading_spinner.value = false;\r\n                \r\n\r\n                } else {\r\n                    console.error(\"Invalid response format\");\r\n                }\r\n        } catch (error) {\r\n            console.error(\"Error fetching  vendors : \", error);\r\n        }\r\n    };\r\n  \r\n    // Watch for changes in budget_project and fetch projects accordingly\r\n    watch(budget_project, (newVal) => {\r\n        if (newVal && newVal.id) {\r\n            project_id.value = 0;\r\n            getProjects();\r\n        }\r\n    });\r\n    const table_option = ref({\r\n    perPage: 10,\r\n    perPageValues: [5, 10, 20, 50],\r\n    skin: 'table table-hover',\r\n    columnsClasses: { actions: 'actions text-center' },\r\n    pagination: { nav: 'scroll', chunk: 5 },\r\n    texts: {\r\n        count: 'Showing {from} to {to} of {count}',\r\n        filter: '',\r\n        filterPlaceholder: 'Search...',\r\n        limit: 'Results:',\r\n    },\r\n    sortable: ['SNo', 'date_issued', 'fuel_issued'],\r\n    sortIcon: {\r\n        base: 'sort-icon-none',\r\n        up: 'sort-icon-asc',\r\n        down: 'sort-icon-desc',\r\n    },\r\n    resizableColumns: false,\r\n    searchable: true,\r\n\r\n});\r\n\r\n  const handleVendorChange = (event) => {\r\n    if (event.target.value === 'NEW_VENDOR') {\r\n        addVendor();\r\n        vendor_id.value = ''; // Reset the selection\r\n    }\r\n}\r\n\r\nconst addVendor = () => {\r\n    add_vendor.value =! add_vendor.value;\r\n}\r\n\r\nconst editRow = async (id) => {\r\n    if (project_status.value == \"closed\") {\r\n        showError(\"Budget Is Closed \");\r\n          return;        \r\n    } else {       \r\n        unlocked.value=true;\r\n    is_description_edit.value = true;\r\n     edit_description.value= id;\r\n    };\r\n}\r\n\r\n    const editBudget = async () => {\r\n         if (project_status.value == \"closed\") {\r\n        showError(\"Budget Is Closed \");\r\n          return;        \r\n    } else{\r\n    project_name.value = budget_name.value;\r\n    edit_budget_name.value = false;\r\n    const data = {\r\n        'name': budget_name.value,\r\n    }\r\n    try {\r\n        const response = await axiosInstance2.put(`projects/${project_id.value}`, data);\r\n        if (response.status == 200) {\r\n            getProjects();\r\n        } else {\r\n            showError(\"Fail to Edit Budget\");\r\n        }                    \r\n    } catch (error) {\r\n        console.error('Error Editing Budget:', error);\r\n        showError(\"Fail to Edit Budget\");\r\n    }\r\n     }\r\n    }\r\n\r\n    const user_name = JSON.parse(localStorage.getItem(\"user\")).name;\r\n    const user_id = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    const total_fund = ref(0);\r\n    const addFund = async () => {\r\n          total_fund.value =  parseFloat(funded_amount.value) + parseFloat(new_fund.value);\r\n        if (parseFloat(new_fund.value) < 0) {\r\n            showError(\"Fund can't be less than 0\");\r\n            new_fund.value = 0;\r\n            return;\r\n        }\r\n        \r\n        const data = {\r\n            'funded_amount': total_fund.value,\r\n        }\r\n        try {\r\n            const response = await axiosInstance2.put(`projects/${project_id.value}`, data);\r\n            if (response.status == 200) {\r\n                 add_fund.value=false;\r\n                funded_amount.value = total_fund.value,\r\n                getProjects();\r\n                recordLog(user_id,user_name,'funding '+budget_project.value.short_name,project_name.value,project_id.value,'',new_fund.value)\r\n                showMessage('Fund added Successfully');\r\n                new_fund.value = 0;\r\n            } else {\r\n                showError(\"Fail to Add fund\");\r\n            }                    \r\n        } catch (error) {\r\n            console.error('Error Adding fund:', error);\r\n            showError(\"Fail to Add fund\");\r\n        }\r\n    }\r\n        \r\n        const amendment_description = ref('');\r\n         const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n       const axiosInstance2 = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL2\r\n    });\r\n    //  const base_url = \"https://construction.trustdigital.space/api/v1/\";\r\n        const requestAmendment = async () => {\r\n        const message = \"Amendment request for  \" + budget_project.value.short_name + \" requested  by \" + user_name + \" on budget \" + project_name.value \r\n        amendment_form.value =! amendment_form.value;\r\n        try {\r\n            const response = await  axiosInstance.post(\"/remark\", {   \r\n                remarker_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n                description: amendment_description.value,\r\n                type_id:project_id.value,\r\n                remark_type:\"amendment\"  \r\n            });\r\n\r\n            remarks.value.push(response.data); \r\n            amendment_description.value = \"\"; \r\n            showMessage(\"Amendment Sent\");\r\n            whatsappNotification('255713222333','Managing Director',message,'check.');\r\n        } catch (error) {\r\n            showError(\"Error adding remark:\", error.message);\r\n        }\r\n    }\r\n\r\n    const getProjects = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance2.get(`projects/${budget_project.value.id}`);\r\n            projects.value = response.data;\r\n            loading_spinner.value=false;\r\n    } catch (error) {\r\n        loading_spinner.value=false;\r\n        showError(error.message);\r\n       \r\n    }\r\n}\r\nconst route = useRoute();\r\nconst getBudgetProjects = async () => {\r\n    try {\r\n        const response = await axios.get(`https://bcftrack.trustdigital.space/api/v1/projects/${route.params.project_id}`);\r\n        budget_project.value = response.data;\r\n        getProjects();\r\n    } catch (error) {\r\n        showError(error.message);\r\n      \r\n    }\r\n};\r\n\r\nconst addProject= async () => {\r\n    newProject.value =! newProject.value;\r\n    loading_spinner.value=true;\r\n        const data = {\r\n            'name':project_name.value,\r\n            'project_id':budget_project.value.id\r\n        }\r\n        try {\r\n            const response = await axiosInstance2.post(`projects`,data);\r\n                loading_spinner.value=false;\r\n                getProjects();\r\n                project_id.value= 0;\r\n                if (response.status == 201) {\r\n                    project_name.value = \"\";\r\n                    showMessage(\"Project Added Sussesfully\");\r\n                }\r\n                else{\r\n                    console.error(error);\r\n                    showError(\"Fail to Add Project\");\r\n                      }                    \r\n                }\r\n                catch(error){\r\n            console.error('Error Adding projects:', error);\r\n            loading_spinner.value=false;\r\n        }\r\n    };    \r\n    const deleteItem = async (id) => {\r\n        in_process.value= true;\r\n   \r\n  loading_spinner.value = true;\r\n   const response = await axiosInstance2.delete(`item/${id}`)\r\n      .then((response) => {\r\n          fetchItems();\r\n          getProjects();\r\n          showMessage(\"Item  deleted\");\r\n          loading_spinner.value = false;\r\n          in_process.value= false;      \r\n      });\r\n};\r\nconst deleteBudget = async (id) => {\r\n  project_name.value = \"\";\r\n  loading_spinner.value = true;\r\n   const response = await axiosInstance2.delete(`projects/${id}`)\r\n      .then((response) => {\r\n          getProjects();\r\n          project_id.value= 0;\r\n          showMessage(\"Budget  deleted\");\r\n          loading_spinner.value = false;\r\n      });\r\n};\r\n\r\n    const deleteItemDescription = async (id) => {\r\n        loading_spinner.value = true;\r\n         const response = await axiosInstance2.delete(`iitem-descriptions/${id}`)\r\n            .then((response) => {\r\n                fetchItems();\r\n                showMessage(\"Description  deleted\");\r\n                loading_spinner.value = false;\r\n            });\r\n    };\r\n    const addItem = async () => {\r\n      in_process.value= true;\r\n      loading_spinner.value= true;\r\n      add_item.value =! add_item.value;\r\n      const itemdata={\r\n            'name':item_name.value, \r\n            'project_id':project_id.value \r\n              }\r\n        try {\r\n            const response = await axiosInstance2.post(`item`,itemdata);\r\n             in_process.value= false;\r\n            loading_spinner.value= false;\r\n              fetchItems();\r\n             if (response.status == 201) {\r\n                item_name.value = \"\";\r\n                showMessage(\"item added Succesfully\");\r\n                getProjects();\r\n             }\r\n             else{\r\n                showError(\"Failed to Add Item\");\r\n                console.error(error);\r\n                \r\n             }\r\n        } catch (error) {\r\n             in_process.value= false;\r\n      loading_spinner.value= false;\r\n            console.error('Error fetching items:', error);\r\n            showError(error.message);\r\n        }\r\n    };      \r\n    const addItemDescription = async (id) => {\r\n      add_item_list.value = '';\r\n      if( quantity.value === '' || quantity_2.value === '' || cost.value === '' ){\r\n         showError(\"Please fill in all the fields\");\r\n      }else{\r\n      const itemDescriptiondata={\r\n            'name':name.value,\r\n            'units':units.value,\r\n            'item_id':id,\r\n            'ref_number':ref_no.value,\r\n            'paid_by': paid_by.value,\r\n            'quantity':quantity.value || 1,\r\n            'quantity_2':quantity_2.value || 1,               \r\n            'cost':cost.value || 0,\r\n            'notice':notice.value\r\n              }\r\n        try {\r\n            const response = await axiosInstance2.post(`item-descriptions`,itemDescriptiondata);\r\n              fetchItems();\r\n             if (response.status == 201) {\r\n                item_name.value = \"\";\r\n                units.value =\"\",\r\n                quantity.value=1,\r\n                notice.value=\"\",\r\n                cost.value = 0,\r\n                name.value = \"\",\r\n                quantity_2.value=1,\r\n                showMessage(\"Description added Succesfully\");\r\n\r\n             }\r\n             else{\r\n                showError(\"Failed to Add Item\");\r\n                console.error(error);\r\n                \r\n             }\r\n        } catch (error) {\r\n            console.error('Error fetching items:', error);\r\n        }\r\n    }\r\n    };      \r\n   \r\nconst setParam =  (data)=> { \r\n     selected_lpo.value = 0;\r\n     hide_lpo.value= false; \r\n     un_finished.value= false;        \r\n     lpo_creation_window.value = false;    \r\n     project_id.value = data.id;\r\n     project_name.value = data.name;\r\n     funded_amount.value = data.funded_amount;\r\n     project_status.value = data.status;\r\n    getPurchaseOrders();\r\n     fetchItems();\r\n}\r\n\r\nconst user = ref(null);\r\n \r\n onMounted(() => {\r\n        const storedUser = localStorage.getItem(\"user\");\r\n        user.value = JSON.parse(storedUser);      \r\n        fetchItems();\r\n        getProjects();\r\n        getBudgetProjects();   \r\n        fetchAmendmentRequests();\r\n        getInstructions()    \r\n    });\r\n\r\n    \r\nconst readRemark = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`/check-remark`, {\r\n            params: {\r\n                remark_type: 'amendment',\r\n            }\r\n        });\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n    }\r\n};\r\n\r\n\r\n    const fetchItems = async () => {\r\n    purchaseOrders.value = [''];\r\n    loading_spinner.value=true;\r\n        try {\r\n            const response = await axiosInstance2.get(`item/${project_id.value}`);\r\n            items.value = response.data;\r\n            loading_spinner.value=false;\r\n        } catch (error) {\r\n            console.error('Error fetching items:', error);\r\n            loading_spinner.value=false;\r\n        }\r\n    };        \r\n\r\n\r\n    const amendmentRequests = ref(['']);\r\n    const amendment_request_count = ref(0);\r\nconst fetchAmendmentRequests = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`remark?remark_type=amendment`);\r\n        amendmentRequests.value = response.data.data.filter(item => item.status === \"unchecked\");\r\n        amendment_request_count.value = response.data.unchecked_count;\r\n    } catch (error) {\r\n        console.error('Error fetching amendment request:', error);\r\n        showError(\"Failed to load amendment request \" + (error.response?.data?.message || error.message));\r\n    } finally {\r\n        isfetching.value = false;\r\n    }\r\n}    \r\n \r\n// start remarks code \r\nconst in_process = ref(false) \r\nconst isfetching = ref(false);   \r\nconst status = ref(\"\");\r\nconst newremark = ref();\r\nconst description_cost = ref('');\r\nconst remarks = ref([]);\r\nconst showRemarkModal = ref(false);\r\nconst isSending = ref(false);\r\nconst description = ref('');\r\nconst remark_cost = ref('');\r\nconst items_project = ref('');\r\nconst budgetRemaks = ref([]);\r\nconst budget_item_description_id = ref('');\r\nconst remarkcolumns = [ 'sno','filled_by','date' ,'description','debit','credit','balance','actions'];\r\n  \r\n   const openRemarkModal= (desc,item) => {     \r\n        fetchRemarks(desc.id); // Fetch remarks for the selected item\r\n        description.value = desc.name;             \r\n        items_project.value = item.name;\r\n        remark_cost.value = (desc.cost * desc.quantity * desc.quantity_2);\r\n        showRemarkModal.value = true;\r\n        budget_item_description_id.value = desc.id;\r\n    }\r\n  const  closeRemarkModal = () => {\r\n    showRemarkModal.value = false;\r\n    newremark.value = ''; // Clear the remark input\r\n    remarks.value = []; // Reset the remarks list\r\n    description.value = ''; // Clear the machine name\r\n    items_project.value = ''; // Clear the item name\r\n    budget_item_description_id.value = ''; // Clear the item description ID\r\n    description_cost.value = ''; // Clear the cost input \r\n    fetchItems(); // Refresh the items list\r\n    }\r\n    const saveRemark = async () => {\r\n        if (!newremark.value.trim()) {\r\n            showError(\"Remark cannot be empty!\");\r\n            return;\r\n        }\r\n      isSending.value= true;\r\n        try {\r\n            if (status.value === 'credit') {\r\n                description_cost.value = -Math.abs(description_cost.value);\r\n            } else if( status.value == 'debit' ) {\r\n                description_cost.value = Math.abs(description_cost.value);\r\n            }\r\n            const response = await  axiosInstance2.post(`budget-remarks`, {   \r\n                date: new Date().toISOString().split('T')[0],\r\n                remarker_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n                description: newremark.value,\r\n                remarker: JSON.parse(localStorage.getItem(\"user\")).name,\r\n                budget_item_description_id: budget_item_description_id.value,\r\n                cost: description_cost.value,\r\n                status: status.value, // Default to unchecked                     \r\n            });\r\n            remarks.value.push(response.data); // Add new remark to the list\r\n            newremark.value = \"\"; // Clear input field\r\n            description_cost.value = \"\";\r\n            showMessage(\"Remark added successfully\");\r\n            fetchRemarks(budget_item_description_id.value); // Refresh remarks\r\n        } catch (error) {\r\n            showError(\"Error adding remark:\", error);\r\n        }\r\n        isSending.value= false;\r\n    };\r\n\r\nconst fetchRemarks = async (id) => {\r\n    isfetching.value = true;\r\n    try {\r\n        const response = await axiosInstance2.get(`budget-item-description-remarks/${id}`);\r\n        let balance = parseFloat(remark_cost.value); // Initialize balance with remark_cost\r\n        budgetRemaks.value = response.data.map((data, i) => {\r\n            balance -= parseFloat(data.cost); // Update balance by subtracting cost\r\n            return {\r\n            sno: i + 1,\r\n            id: data.id,\r\n            filled_by: data.remarker,\r\n            date: data.date,\r\n            debit: data.cost > 0 ? Number(data.cost).toLocaleString() + \"Tsh\" : \"--\",\r\n            credit: data.cost < 0 ? Number(Math.abs(data.cost)).toLocaleString() + \"Tsh\" : \"--\",\r\n            description: data.description,\r\n            balance: balance.toLocaleString() + \"Tsh\", // Add balance field\r\n            };\r\n        }); // Store response data\r\n             \r\n    } catch (error) {\r\n       showError(error.message);\r\n        console.error(\"Error fetching remarks:\", error);\r\n    }\r\n    isfetching.value = false;\r\n};\r\n    \r\nconst deleteBudgetRemark = async (id) => {\r\n        loading_spinner.value = true;\r\n        if (confirm(\"Are you sure you want to delete this remark?\")) {\r\n            loading_spinner.value = true;\r\n            const response = await axiosInstance2.delete(`budget-remarks/${id}`);\r\n\r\n             if (response.status == 200) {\r\n                fetchRemarks(budget_item_description_id.value);               \r\n                loading_spinner.value = false;\r\n                showMessage(response.data.message);\r\n               \r\n            } else {\r\n                showError(\"Failed to delete remark\", error);\r\n                   }         \r\n        } else {\r\n            loading_spinner.value = false;\r\n            return; // Exit if the user cancels\r\n     }                 \r\n};\r\n\r\n\r\n// end of remark code\r\n\r\n//for edit item description\r\nconst updateItemDescription = async (desc) => {\r\n    closeEdition();  \r\n      add_item_list.value = '';\r\n\r\n      const itemDescriptiondata={\r\n            'name':desc.name,\r\n            'units':desc.units,           \r\n            'ref_number':desc.ref_no,\r\n            'paid_by':desc.paid_by,\r\n            'quantity':desc.quantity || 1,\r\n            'quantity_2':desc.quantity_2 || 1,               \r\n            'cost': desc.cost || 0,\r\n            'notice':desc.notice\r\n              }\r\n        try {\r\n            const response = await axiosInstance2.patch(`item-descriptions/${desc.id}`,itemDescriptiondata);\r\n              fetchItems();\r\n             if (response.status == 200) {             \r\n                showMessage(\"Description Updated Succesfully\");\r\n             }\r\n             else{\r\n                showError(\"Failed to Update Item\");\r\n                console.error(error);  \r\n             }\r\n        } catch (error) {\r\n            console.error('Error fetching items:', error);\r\n        }\r\n    }; \r\n\r\nconst closeEdition = () => {   \r\n   edit_description.value='';\r\n}\r\n//editon fro item\r\nconst edit_item = ref('');\r\nconst editItemRow = async (id) => {\r\n     if (project_status.value == \"closed\") {\r\n        showError(\"Budget Is Closed \");\r\n          return;        \r\n    } else{\r\n    edit_item.value=id;\r\n    unlocked.value=true; \r\n    }\r\n    };\r\n    \r\nconst closeItemEdition = () => {\r\n    edit_item.value='';\r\n    unlocked.value=true;\r\n   \r\n}\r\n\r\nconst updateItem = async (item) => {\r\n    closeItemEdition();\r\n      add_item.value =! add_item.value;\r\n      const itemdata={\r\n            'name':item.name,             \r\n              }\r\n        try {\r\n            const response = await axiosInstance2.patch(`item/${item.id}`,itemdata);\r\n             \r\n             if (response.status == 200) {\r\n                item_name.value = \"\";\r\n                showMessage(\"item Updated Succesfully\");\r\n                fetchItems();\r\n             }\r\n             else{\r\n                showError(\"Failed to updaet Item\");\r\n                console.error(error);\r\n                \r\n             }\r\n        } catch (error) {\r\n            console.error('Error Update items:', error);\r\n            showError(error.message);\r\n        }\r\n    };  \r\n\r\n//code for closeing budget\r\n  const closing = ref(false);\r\n  const closeBudget = async () => {    \r\n    const data = {\r\n        'status': \"closed\"\r\n    }\r\n    in_process.value= true;\r\n      closing.value= true;\r\n    try {\r\n        const response = await axiosInstance2.put(`projects/${project_id.value}`, data);\r\n        if (response.status == 200) {\r\n            showMessage(\"Budget Closed Succesfully\");\r\n            project_status.value= response.data.status;\r\n            getProjects();\r\n             in_process.value= false;\r\n              closing.value= false;\r\n        } else {\r\n             in_process.value= false;\r\n              closing.value= false;\r\n            showError(\"Fail to Close Budget\");\r\n        }                    \r\n    } catch (error) {\r\n         in_process.value= false;\r\n          closing.value= false;\r\n        console.error('Error close Budget:', error);\r\n        showError(\"Fail to close Budget\");\r\n    }\r\n     }\r\n      const openBudget = async () => {    \r\n    const data = {\r\n        'status': \"open\"\r\n    }\r\n     in_process.value= true;\r\n      closing.value= true;\r\n    try {\r\n        const response = await axiosInstance2.put(`projects/${project_id.value}`, data);\r\n        if (response.status == 200) {\r\n             in_process.value= false;\r\n              closing.value= false;\r\n            showMessage(\"Budget Open Succesfully\");\r\n            project_status.value= response.data.status;\r\n            getProjects();\r\n        } else {\r\n             in_process.value= false;\r\n              closing.value= false;\r\n            showError(\"Fail to open Budget\");\r\n        }                    \r\n    } catch (error) {\r\n         closing.value= false;\r\n         in_process.value= false;\r\n        console.error('Error open Budget:', error);\r\n        showError(\"Fail to open Budget\");\r\n    }\r\n     }\r\n\r\n//whatsub trigger for budget review\r\n   // whatsapp notification\r\n  const triggerNotification = async (phone,sender,action,next_designation) => {\r\n  const recipientPhone = phone;\r\n  const endpoint = 'https://graph.facebook.com/v22.0/721816217672551/messages';\r\n  const accessToken = 'EAAXZAN9ZAW4VoBOZBhohedZA7pfKZBfzMghywTumPW7yFY0ZAI7u6Kh9DFtai4usEnmKsOnMZBYisZAQ0ojZBtEpDC72XXNyf6qFmtFtTCX61hv3I2eZCdZAevM9ahsDXGcIhT8stZAoTGstgOsujK4G1pxcSGqwFxiucZBcLr8HUoRxTLlB0IdVlLLlRGQ7n831T93WGUQZDZD';\r\n\r\n  const requestData = {\r\n    \"messaging_product\": \"whatsapp\",\r\n    \"recipient_type\": \"individual\",\r\n    \"to\": recipientPhone,\r\n    \"type\": \"template\",\r\n    \"template\": {\r\n        \"name\": \"copex_lpo\",\r\n        \"language\": {\r\n            \"code\": \"en\"\r\n        },\r\n        \"components\": [\r\n            {\r\n                \"type\": \"header\",\r\n                \"parameters\": [\r\n                    {\r\n                        \"type\": \"image\",\r\n                        \"image\": {\r\n                            \"link\": \"https://copexcontractors.co.tz/assets/img/copex-about-img.jpg\"\r\n                        }\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"type\": \"body\",\r\n                \"parameters\": [\r\n                    {\r\n                        \"type\": \"text\",\r\n                        \"text\": sender // Replaced \"Engineer\" with sender variable\r\n                    },\r\n                    {\r\n                        \"type\": \"text\",\r\n                        \"text\": action // Replaced first \"check\" with action variable\r\n                    },\r\n                    {\r\n                        \"type\": \"text\",\r\n                        \"text\": next_designation // Replaced \"Senior Accountant\" with next_designation\r\n                    },\r\n                    {\r\n                        \"type\": \"text\",\r\n                        \"text\": action // Kept second \"check\" or replaced with action if needed\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n};\r\n submit.value= true;\r\n  try {\r\n    const response = await fetch(endpoint, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${accessToken}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(requestData)\r\n    });\r\n    const data = await response.json();\r\n    showMessage(\"Messange Sent Succesfully\")\r\n    submit.value= false;\r\n  } catch (error) {\r\n    submit.value= false;\r\n    console.error('Error:', error);\r\n  }\r\n};\r\n\r\nconst printReport = () => {\r\n    company_id.value= budget_project.value.company_id;\r\n    let role;\r\n    if (company_id.value == 5) {\r\n        role= \"Project manager\"\r\n    } else {\r\n        role = \"Engineer\"\r\n    }\r\n    const printWindow = window.open('', 'DailyActivityReport');\r\n    printWindow.document.write(`\r\n<html>\r\n    <head>\r\n        <title>Print Item Budget Report</title>\r\n        <style>\r\n            table {\r\n                width: 100%;\r\n                border-collapse: collapse;\r\n                margin-bottom: 10px;\r\n            }\r\n            th, td {\r\n                border: 1px solid black;\r\n                padding: 8px;\r\n                text-align: left;\r\n            }\r\n            th {\r\n                background-color: #f2f2f2;\r\n            }\r\n            .nested-table {\r\n                width: 100%;\r\n                margin: 0;\r\n                border: none;\r\n            }\r\n            .nested-table th, .nested-table td {\r\n                padding: 5px;\r\n            }\r\n            .total-row {\r\n                font-weight: bold;\r\n                background-color: #f0f0f0;\r\n            }\r\n            .grand-total-row {\r\n                font-weight: bold;\r\n                background-color: #e0e0e0;\r\n                font-size: 1.1em;\r\n            }\r\n            .signature-section {\r\n                page-break-inside: avoid; /* Prevents splitting */\r\n                margin-top: 50px; /* Adds space before signatures */\r\n            }\r\n            .signature-table {\r\n                width: 100%;\r\n                border-collapse: collapse;\r\n            }\r\n            .signature-cell {\r\n                height: 2cm;\r\n                vertical-align: bottom;\r\n                border: 1px solid black;\r\n            }\r\n            \r\n            .fw-bold{\r\n             font-weight:bolder;\r\n            }\r\n        </style>\r\n    </head>\r\n    <body>\r\n\r\n        <table>\r\n          <tr>\r\n            <td class=\"fw-bold\">PROJECT&nbsp;NAME&nbsp;: </td>\r\n            <td>${(budget_project.value.project_name).toUpperCase()}</td>\r\n          </tr>\r\n           <tr>\r\n            <td class=\"fw-bold\">SHORT&nbsp;NAME&nbsp;: </td>\r\n            <td>${(budget_project.value.short_name).toUpperCase()}</td>\r\n          </tr>\r\n           <tr>\r\n            <td class=\"fw-bold\">CLIENT&nbsp;: </td>\r\n            <td>${(budget_project.value.client).toUpperCase()}</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"fw-bold\">CONTRACT&nbsp;NUMBER&nbsp;: </td>\r\n            <td>${(budget_project.value.contract_number).toUpperCase()} </td>\r\n          </tr>\r\n           <tr>\r\n            <td class=\"fw-bold\">FINANCIAL&nbsp;YEAR&nbsp;: </td>\r\n            <td>${(budget_project.value.financial_year).toUpperCase()} </td>\r\n          </tr>\r\n\r\n            <tr>\r\n            <td class=\"fw-bold\">BUDGET&nbsp;FOR&nbsp;: </td>\r\n            <td> ${(project_name.value).toUpperCase()}</td>\r\n          </tr>\r\n\r\n        </table>\r\n\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>#</th>\r\n                    <th>Item</th>\r\n                    <th>Description</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${items.value.map((item,i) => `\r\n                    <tr>\r\n                        <td>${i + 1}</td>\r\n                        <td>${item.name}</td>\r\n                        <td>\r\n                            ${item.item_description && item.item_description.length > 0 ? `\r\n                            <table class=\"nested-table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Name</th>\r\n                                        <th>Units</th>\r\n                                        <th>Cost</th>\r\n                                        <th>Quantity</th>\r\n                                        <th>Total</th>\r\n                                        <th>Amount</th>\r\n                                        <th>Remarks</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    ${item.item_description.map(desc => `\r\n                                        <tr>\r\n                                            <td>${desc.name || '-'}</td>\r\n                                            <td>${desc.units || '-'}</td>\r\n                                            <td>${(desc.cost || 0).toLocaleString()}Tsh</td>\r\n                                            <td>${(desc.quantity || 0).toLocaleString()} x ${(desc.quantity_2 || 0).toLocaleString()}</td>\r\n                                            <td>${((desc.quantity || 0).toLocaleString() * (desc.quantity_2 || 0).toLocaleString())}</td>\r\n                                            <td>   \r\n                                              ${desc.budget_remark_sum_cost !== null && desc.budget_remark_sum_cost !== undefined ? `\r\n    <span style=\"text-decoration: line-through;\" class=\"text-danger\">\r\n        ${(desc.quantity * desc.cost * desc.quantity_2).toLocaleString()}Tsh\r\n    </span><br>` : ''}\r\n<span>\r\n    ${desc.budget_remark_sum_cost !== null && desc.budget_remark_sum_cost !== undefined ? \r\n        ((desc.quantity * desc.cost * desc.quantity_2) - desc.budget_remark_sum_cost).toLocaleString() :\r\n        (desc.quantity * desc.cost * desc.quantity_2).toLocaleString()}Tsh\r\n</span>\r\n\r\n                                            </td>\r\n\r\n                                            <td>${desc.notice || '-'}</td>\r\n                                        </tr>\r\n                                    `).join('')}\r\n                                </tbody>\r\n                            </table>\r\n                            ` : 'No description available'}\r\n                        </td>\r\n                    </tr>\r\n                    ${item.item_description && item.item_description.length > 0 ? `\r\n                    <tr class=\"total-row\">\r\n                        <td colspan=\"2\">Budget</td>\r\n                        <td>\r\n                            <table class=\"nested-table\">\r\n                                <tr>\r\n                                    <td>Total Balance :</td>\r\n                                    <td>\r\n                                          ${item.item_description.some(desc => desc.budget_remark_sum_cost !== null && desc.budget_remark_sum_cost !== undefined) ? `\r\n                                          <span style=\"text-decoration: line-through;\" class=\"text-danger\">\r\n                                              ${item.item_description.reduce((sum, desc) => sum + ((desc.quantity || 0) * (desc.quantity_2 || 0) * (desc.cost || 0)) , 0).toLocaleString()} Tsh\r\n                                           </span><br>` : ''}\r\n                                           <span>\r\n                                              ${item.item_description.reduce((sum, desc) => sum + ((desc.quantity || 0) * (desc.quantity_2 || 0) * (desc.cost || 0)) - (desc.budget_remark_sum_cost || 0), 0).toLocaleString()} Tsh\r\n                                           </span>\r\n                                        </td>\r\n                                </tr>\r\n                            </table>\r\n                        </td>\r\n                    </tr>\r\n                    ` : ''}\r\n                `).join('')}\r\n            </tbody>\r\n        </table>\r\n\r\n        <!-- GRAND TOTAL SECTION (AFTER MAIN TABLE) -->\r\n        <table style=\"margin-top: 20px; width: 50%; float: right;\">\r\n            <tr class=\"grand-total-row\">\r\n            <td><strong>ALLOCATED AMOUNT</strong></td>\r\n            <td><strong>${funded_amount.value.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} Tsh</strong></td>\r\n            </tr>\r\n            <tr class=\"grand-total-row\">\r\n            <td><strong>ALLOCATED BALANCE</strong></td>\r\n            <td><strong>${\r\n                (\r\n                funded_amount.value -\r\n                items.value.reduce(\r\n                    (grandTotal, item) =>\r\n                    grandTotal +\r\n                    (item.item_description?.reduce(\r\n                        (itemTotal, desc) =>\r\n                        itemTotal + (Number(desc.budget_remark_sum_cost) || 0),\r\n                        0\r\n                    ) || 0),\r\n                    0\r\n                )\r\n                ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n            } Tsh</strong></td>\r\n            </tr>\r\n            <tr class=\"grand-total-row\">\r\n            <td><strong>GRAND TOTAL</strong></td>\r\n            <td><strong>${\r\n                items.value.reduce(\r\n                (grandTotal, item) =>\r\n                    grandTotal +\r\n                    (item.item_description?.reduce(\r\n                    (itemTotal, desc) =>\r\n                        itemTotal +\r\n                        ((desc.quantity || 0) * (desc.cost || 0) * (desc.quantity_2 || 0)) -\r\n                        (desc.budget_remark_sum_cost || 0),\r\n                    0\r\n                    ) || 0),\r\n                0\r\n                ).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n            } Tsh</strong></td>\r\n            </tr>\r\n        </table>\r\n        <div style=\"clear: both;\"></div>\r\n\r\n        <!-- Signatures Section (Ensured to stay intact) -->\r\n        <div class=\"signature-section\">\r\n            <h3>Signatures</h3>\r\n            <table class=\"signature-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Operation's Sign</th>\r\n                        <th>${role}'s Sign</th>\r\n                        <th>Sr Accountant's sign</th>\r\n                        <th>MD's Sign</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td class=\"signature-cell\"></td>\r\n                        <td class=\"signature-cell\"></td>\r\n                        <td class=\"signature-cell\"></td>\r\n                        <td class=\"signature-cell\"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </body>\r\n</html>\r\n`);\r\n   \r\n  printWindow.document.close();\r\n    \r\n    // Add event listener for after printing\r\n    printWindow.onafterprint = function() {\r\n        printWindow.close();\r\n    };\r\n    \r\n    // Trigger print after a short delay to ensure the content is loaded\r\n    setTimeout(() => {\r\n        printWindow.print();\r\n    }, 0.1);\r\n\r\n}\r\n\r\n\r\n //code for creating lpo_items wit all logiks\r\n const submit = ref(false);\r\n const isAccordionOpen = ref(true);\r\nconst lpoNumberFromStorage = ref('');\r\nconst projectIdFromStorage = ref('');\r\nconst un_finished = ref(false);\r\n const lpo_item_description_id = ref('')\r\n const is_unfinished_lpo =ref(false);\r\n const   lpo_window = ref(false);\r\n const is_create_lpo =  ref(false);\r\n const lpo_item_cost = ref('');\r\n const lpo_item_name = ref('');\r\n const lpo_total_quantity= ref('')\r\n const lpo_item_quantity= ref('');\r\n const lpo_item_units = ref('');\r\n const lpo_item_notice =  ref('');\r\n const lpo_number = ref('');\r\n const lpo_creation_window = ref(false);\r\n const lpo_items = ref([]);\r\nconst item_columns = ref(['SNo','description', 'units', 'quantity', 'rate', 'amount','actions',]);\r\nconst loading = ref('');\r\nconst total_amount= ref();\r\nconst itemDescriptionIdFromStorage = ref('');\r\nconst itemQuantitydFromStorage = ref('');\r\nconst order_registration = ref(false);\r\n\r\n\r\nconst setEnvForLpoCreation = () => {\r\n         order_registration.value=true;\r\n};\r\n\r\n\r\n  const clearForm = ()=>{\r\n       supplier_name.value='';\r\n       project_name.value='';\r\n       payment_terms.value='';\r\n       supplier_address.value='';\r\n       supplier_location.value='';\r\n       vendor_id.value='';\r\n       Vendor_name.value = '';\r\n    Vendor_phone.value= '';\r\n    Vendor_email.value ='';\r\n    Vendor_address.value ='';\r\n    Vendor_location.value ='';\r\n    order_registration.value = false;\r\n    add_vendor.value = false\r\n    };\r\n\r\n\r\n const supplier_name = ref('');\r\n    const supplier_address = ref('');\r\n    const supplier_location = ref('');\r\n       const Vendor_name = ref('');\r\n    const Vendor_phone= ref('');\r\n    const Vendor_email = ref('');\r\n  const Vendor_address =ref ('');\r\n  const Vendor_location=ref('');\r\n    const payment_terms = ref('');\r\n    const vendor_id = ref('');\r\n    const registerPurchaseOrder = async () => {\r\n    try {\r\n        order_registration.value = false;\r\n        loading_spinner.value = true;\r\n        \r\n        // First register vendor if needed\r\n        if (add_vendor.value === true) {\r\n            await registerVendor(); // Wait for vendor registration to complete\r\n        }\r\n\r\n        const purchaseOrderData = {\r\n            name: 'budget'+project_id.value,\r\n            company_id: company_id.value,\r\n            vendor_id: vendor_id.value,\r\n            supplier: \"none\",\r\n            address: \"none\",\r\n            project_id: budget_project.value.id,\r\n            project: 'empty',\r\n            payment_terms: payment_terms.value,\r\n            location: \"none\",\r\n            user_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n            requested_by: JSON.parse(localStorage.getItem(\"user\")).name,\r\n            status_name: 'Inactive',\r\n            status_color: 'dark',\r\n        };\r\n\r\n        const response = await axiosInstance2.post('/purchase-order', purchaseOrderData);\r\n        getPurchaseOrders();\r\n        clearForm();\r\n        loading_spinner.value = false;\r\n      if (response.status === 201) {   \r\n            view_lpo_list.value=true;   \r\n            showMessage(\"Purchase Order Registered Successfully\");\r\n        } else {\r\n            showError(\"Failed to register Purchase Order\"); \r\n            console.error(error);\r\n            \r\n        }\r\n       \r\n    } catch (error) {\r\n        showError(\"Error code \" + error.status);\r\n        console.error(\"Error registering Order:\", error);\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\nconst registerVendor = async () => {\r\n    try {\r\n        loading_spinner.value = true;\r\n        const VendorData = {\r\n            name: Vendor_name.value,\r\n            phone: Vendor_phone.value,\r\n            email: Vendor_email.value,\r\n            address: Vendor_address.value,\r\n            location: Vendor_location.value,\r\n        };\r\n\r\n        const response = await axiosInstance.post('/vendors', VendorData);\r\n        vendor_id.value = response.data.id;\r\n        loading_spinner.value = false;\r\n        return response.data.id; // Return the vendor ID\r\n    } catch (error) {\r\n        showError(\"Error registering Vendor\" + error.status);\r\n        loading_spinner.value = false;\r\n        throw error; // Re-throw the error to be caught in registerPurchaseOrder\r\n    }\r\n};\r\n \r\n// When saving LPO data\r\n\r\n\r\n const openLpoCreationModal = (desc, item) => {\r\n    // Reset stored quantity when opening a new item\r\n    console.log('selected LPO status',selected_lpo_status.value);\r\n    itemQuantitydFromStorage.value = 0;\r\n    itemDescriptionIdFromStorage.value = null;\r\n    \r\n    // Set new item values\r\n    lpo_item_description_id.value = desc.id;\r\n    lpo_item_cost.value = desc.cost;\r\n    lpo_item_name.value = desc.name;\r\n    lpo_item_quantity.value = desc.quantity * desc.quantity_2;\r\n    lpo_item_units.value = desc.units;\r\n    is_create_lpo.value = true;\r\n    lpo_total_quantity.value = desc.quantity * desc.quantity_2;\r\n    \r\n    // Now get items (including stored quantities)\r\n    getItems();\r\n}\r\n\r\nconst getItems = async () => {\r\n    loading.value = true;\r\n    try { \r\n        const response = await axiosInstance2.get(`/order-items/${selected_lpo.value}`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            total_amount.value = response.data.reduce((sum, order) => {\r\n                return sum + (order.quantity * order.rate);\r\n            }, 0);                    \r\n            \r\n            lpo_items.value = response.data.map((order, index) => ({\r\n                SNo: index + 1,\r\n                category: order.category,\r\n                id: order.id,\r\n                description: order.description,\r\n                units: order.unit_measure,\r\n                quantity: order.quantity.toLocaleString(),\r\n                rate: Number(order.rate).toLocaleString(),\r\n                amount: (order.quantity * order.rate).toLocaleString(undefined, { maximumFractionDigits: 3})\r\n            }));\r\n            \r\n            loading.value = false;\r\n        } else {\r\n            loading.value = false;\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n        loading.value = false;\r\n        console.error(\"Error fetching purchase order: \", error);\r\n    }\r\n};\r\n\r\n const registerItem = () => {\r\n    if(!selected_lpo.value){\r\n        showError(\"No LPO selected\");\r\n        return;\r\n    }\r\n    if(lpo_item_quantity.value > lpo_total_quantity.value  ){\r\n        showError(\"The Quantity exceeds The Quantity Available\");\r\n        return;\r\n    } \r\n  if(lpo_item_quantity.value <= 0) {\r\n    showError(\"The Quantity Can't be zero or negative\");\r\n    return;\r\n}  \r\n\r\n    loading.value = true;   \r\n    \r\n    const itemData = {\r\n        order_id: selected_lpo.value,\r\n        description: lpo_item_name.value,\r\n        unit_measure: lpo_item_units?.value || \"NO\",\r\n        quantity: lpo_item_quantity.value,\r\n        machine_id: 0,\r\n        rate: lpo_item_cost.value,\r\n        item_list_id: budget_project.value.id,\r\n        category: \"budget\",\r\n    };\r\n    \r\n    axiosInstance2\r\n        .post('/items', itemData)\r\n        .then((response) => {              \r\n            isSending.value = false;   \r\n            loading.value = false;          \r\n            \r\n            if (response.status === 201) {               \r\n                getItems();\r\n                showMessage('Item registered successfully');\r\n            } else {\r\n                showError('Error registering item');\r\n                console.error(\"Error registering Order:\", response.data.message);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            loading.value = false;\r\n            console.error(\"Error registering Order:\", error.message);\r\n        });\r\n};\r\n\r\n const clearItemForm = () =>{\r\n     lpo_item_cost.value = \" \";\r\n    lpo_item_name.value= \" \";\r\n    lpo_item_quantity.value= \" \";\r\n    lpo_item_units.value= \" \";\r\n    lpo_total_quantity.value='';\r\n }\r\n\r\n const closeLpoCreationModal = () =>{   \r\n    is_create_lpo.value= false;\r\n    is_unfinished_lpo.value = false;\r\n    itemQuantitydFromStorage.value = 0;\r\n }\r\n\r\n const deleteLpoItem = (id) => {\r\n        loading.value = true;\r\n   if (confirm(\"Are you sure you want to delete this item?\")) {\r\n                  axiosInstance2\r\n            .delete(`/items/${id}`)\r\n            .then((response) => {\r\n                getItems();\r\n                loading.value = false;\r\n                if (response.status === 200) {\r\n                   showMessage('Item Deleted successfully');\r\n                } else {\r\n                    showError('Fail to Delete item');\r\n                    console.error(\"Error registering Order:\", response.data.message);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                 loading.value = false;\r\n                console.error(\"Error registering Order:\", error.message);\r\n            });  \r\n    \r\n   }\r\n}\r\n\r\n\r\n\r\nconst clearLpoStorage = () => {\r\n    // Option 1: Clear completely\r\n    localStorage.removeItem('current_lpo_data');\r\n    \r\n    // Option 2: Clear only current project's LPO\r\n    const storedData = localStorage.getItem('current_lpo_data');\r\n    if (storedData) {\r\n        try {\r\n            const parsed = JSON.parse(storedData);\r\n            let lpoArray = Array.isArray(parsed) ? parsed : [parsed];\r\n            \r\n            // Filter out current project's LPOs\r\n            lpoArray = lpoArray.filter(lpo => \r\n                String(lpo.project_id) !== String(project_id.value)\r\n            );\r\n            \r\n            // Save back if array not empty\r\n            if (lpoArray.length > 0) {\r\n                localStorage.setItem('current_lpo_data', JSON.stringify(lpoArray));\r\n            } else {\r\n                localStorage.removeItem('current_lpo_data');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error clearing LPO data:\", error);\r\n            localStorage.removeItem('current_lpo_data');\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\nconst activatePurchaseOrder = () => {\r\n        const activationData = {\r\n            status_name: 'Unapproved',\r\n            status_color: 'secondary',\r\n        };        \r\n        if (confirm(\"Are you sure you want to Close this Order?\")) {\r\n            axiosInstance2\r\n                .put(`/purchase-order/${selected_lpo.value}`, activationData)\r\n                .then((response) => {\r\n                if (response.status == 200) {                  \r\n                     showMessage(\" Activation Successfuly! Now Waiting for Approvals\");\r\n                     selected_lpo_status.value=\"Unapproved\";\r\n                     getPurchaseOrders();\r\n                }\r\n                else{\r\n                    showError(\"activation Fails\");\r\n                }\r\n                })\r\n \r\n                .catch((error) => {\r\n                    console.error(\"Error activating order:\", error.message);\r\n                });   \r\n        } else {\r\n           \r\n        }\r\n    };\r\n\r\n\r\nconst printRemarkReport = () => {\r\n    const printWindow = window.open('', 'BudgetRemarkReport');\r\n    printWindow.document.write(`\r\n<html>\r\n    <head>\r\n        <title>Print Item Remark Report</title>\r\n        <style>\r\n            table {\r\n                width: 100%;\r\n                border-collapse: collapse;\r\n                margin-bottom: 10px;\r\n            }\r\n            th, td {\r\n                border: 1px solid black;\r\n                padding: 8px;\r\n                text-align: left;\r\n            }\r\n            th {\r\n                background-color: #f2f2f2;\r\n            }\r\n            .nested-table {\r\n                width: 100%;\r\n                margin: 0;\r\n                border: none;\r\n            }\r\n            .nested-table th, .nested-table td {\r\n                padding: 5px;\r\n            }\r\n            .total-row {\r\n                font-weight: bold;\r\n                background-color: #f0f0f0;\r\n            }\r\n            .grand-total-row {\r\n                font-weight: bold;\r\n                background-color: #e0e0e0;\r\n                font-size: 1.1em;\r\n            }\r\n            .signature-section {\r\n                page-break-inside: avoid; /* Prevents splitting */\r\n                margin-top: 50px; /* Adds space before signatures */\r\n            }\r\n            .signature-table {\r\n                width: 100%;\r\n                border-collapse: collapse;\r\n            }\r\n            .signature-cell {\r\n                height: 2cm;\r\n                vertical-align: bottom;\r\n                border: 1px solid black;\r\n            }\r\n            \r\n            .fw-bold{\r\n             font-weight:bolder;\r\n            }\r\n\r\n        </style>\r\n    </head>\r\n    <body>\r\n        <h3 style=\"text-align: center;\">BUDGET ITEM TRANSACTION SUMMARY REPORT</h3>\r\n        <table>\r\n         <tr>\r\n            <td class=\"fw-bold\">PROJECT&nbsp;NAME&nbsp;: </td>\r\n            <td>${(budget_project.value.short_name).toUpperCase()}</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"fw-bold\">BUDGET&nbsp;NAME&nbsp;: </td>\r\n            <td>${(project_name.value)}</td>\r\n          </tr>\r\n           <tr>\r\n            <td class=\"fw-bold\">ITEM&nbsp;: </td>\r\n            <td>${(items_project.value)}</td>\r\n          </tr>\r\n           <tr>\r\n            <td class=\"fw-bold\">DESCRIPTION&nbsp;: </td>\r\n            <td>${(description.value)}</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"fw-bold\">BUDGET&nbsp;COST&nbsp;: </td>\r\n            <td>${(remark_cost.value).toLocaleString()} Tsh</td>\r\n          </tr>\r\n        </table>\r\n <h4 style=\"text-align: center;\">TRANSACTION RECORD</h4>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>#</th>\r\n                    <th>Filled&nbsp;by</th>\r\n                    <th>Date&nbsp;</th>\r\n                    <th>Description</th>\r\n                    <th>Debit</th>\r\n                    <th>Credit</th>\r\n                    <th>Balance</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${budgetRemaks.value.map((item,i) => `\r\n                    <tr>\r\n                        <td>${i + 1}</td>\r\n                        <td>${item.filled_by}</td>\r\n                        <td>${item.date}</td>\r\n                        <td>${item.description}</td>\r\n                        <td>${item.debit}</td>\r\n                        <td>${item.credit}</td>\r\n                        <td>${item.balance}\r\n                            ${item.filled_by && item.filled_by.length > 0 ? `\r\n                            ` : 'No description available'}\r\n                        </td>\r\n                    </tr>\r\n                `).join('')}\r\n            </tbody>\r\n        </table>\r\n    </body>\r\n</html>\r\n`);\r\n     printWindow.document.close();\r\n    \r\n    // Add event listener for after printing\r\n    printWindow.onafterprint = function() {\r\n        printWindow.close();\r\n    };\r\n    \r\n    // Trigger print after a short delay to ensure the content is loaded\r\n    setTimeout(() => {\r\n        printWindow.print();\r\n    }, 0.1 );\r\n    \r\n};\r\n\r\nconst answer= ref('')\r\nconst question = ref('')\r\nconst seconds = ref(0)\r\nconst timerInterval = ref(0)\r\nconst instructions = ref('')\r\nconst old_question = ref ('')\r\n\r\nconst getInstructions = async () =>{\r\n      const response = await axiosInstance.get(`/ai/4`);\r\n      ai.value = response.data\r\n      instructions.value = response.data.instructions\r\n}\r\nconst ai = ref('')\r\nconst RequestAnswer = async () => {\r\n  old_question.value = question.value\r\n  if (!question.value.trim()) {\r\n    answer.value = 'Question cannot be empty.';\r\n    return;\r\n  }\r\n\r\n  answer.value = 'Thinking...';\r\n  seconds.value = 0;\r\n\r\n  const startTime = performance.now();\r\n  timerInterval.value = setInterval(() => {\r\n    const now = performance.now();\r\n    seconds.value = ((now - startTime) / 1000).toFixed(2);\r\n  }, 50);\r\n\r\n  try {\r\n    let machineSummary = '';\r\n    // ✅ Only fetch if source is a valid URL\r\n    const sourceUrl = ai.value?.source;\r\n    const isValidUrl = sourceUrl && sourceUrl.startsWith('http');\r\n\r\n    if (isValidUrl) {\r\n      try {\r\n        const sourceResponse = items.value;\r\n        machineSummary = `Data from source:\\n${JSON.stringify(sourceResponse, null, 2)}\\n\\n`;\r\n      } catch (err) {\r\n        console.warn('Failed to fetch source data:', err.message);\r\n      }\r\n    }\r\n\r\n    const instructionText = instructions.value\r\n      .map((i, index) => `${index + 1}. ${i.description}`)\r\n      .join('\\n');\r\n\r\n    const seek =\r\n      `You are a plain text responder. No Markdown, no special characters like **, -, #, etc.\\n\\n` +\r\n      (machineSummary || '') +\r\n      `You are giving assistance based on Instructions:\\n${instructionText}\\n\\n` +\r\n      `Now answer this question in clean plain English:\\n${question.value}`;\r\n\r\n    const rawResponse = await deepseek(seek);\r\n\r\n    answer.value = rawResponse\r\n      .trim();\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n    answer.value = 'Error retrieving or processing data.';\r\n  } finally {\r\n    clearInterval(timerInterval.value);\r\n    timerInterval.value = null;\r\n    question.value = '';\r\n  }\r\n};\r\n\r\n\r\n</script>\r\n<style scoped>\r\n.nav-link.active {\r\n    background-color: #007bff !important;\r\n    color: white !important;\r\n}\r\n\r\n.nav-item {\r\n    margin-right: 12px;\r\n    margin-left:5px;\r\n}\r\n\r\n.budgets-container {\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    max-width: 800px;\r\n    margin: 20px auto;\r\n    padding: 20px;\r\n    background: #f8f9fa;\r\n    border-radius: 10px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.budgets-title {\r\n    color: #2c3e50;\r\n    margin-bottom: 15px;\r\n    font-weight: 600;\r\n    text-align: center;\r\n}\r\n\r\n.budgets-buttons {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n}\r\n\r\n.budget-button {\r\n    display: inline-block;\r\n    padding: 10px 20px;\r\n    border-radius: 20px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n    text-align: center;\r\n    min-width: 120px;\r\n    border: none;\r\n    color: white;\r\n}\r\n\r\n.project-button {\r\n    background: linear-gradient(135deg, #2ecc71, #27ae60);\r\n}\r\n\r\n.project-button:hover {\r\n    background: linear-gradient(135deg, #27ae60, #219653);\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 3px 6px rgba(0,0,0,0.15);\r\n}\r\n\r\n.new-project-button {\r\n    background: linear-gradient(135deg, #3498db, #2980b9);\r\n}\r\n\r\n.new-project-button:hover {\r\n    background: linear-gradient(135deg, #2980b9, #1a6ea8);\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 3px 6px rgba(0,0,0,0.15);\r\n}\r\n.budget-button.project-button {\r\n  position: relative;\r\n  padding-right: 20px; /* Make space for the cross mark */\r\n}\r\n\r\n.close-mark {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.close-mark:hover {\r\n  color: red;\r\n}\r\n\r\n.accordion {\r\n  position: relative;\r\n}\r\n.accordion-toggle {\r\n  text-align: center;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n  background: #f5f5f5;\r\n  color: red;\r\n}\r\n.toggle-arrow {\r\n  font-size: 16px;\r\n}\r\n.budget-button {\r\n  margin: 2px;\r\n}\r\n</style>","import script from \"./projectBudgets.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./projectBudgets.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./projectBudgets.vue?vue&type=style&index=0&id=36e254fc&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-36e254fc\"]])\n\nexport default __exports__"],"names":["hide_lpo","ref","selected_lpo","view_lpo_list","deepseek","inject","columns","company_id","amendment_form","user_permissions","JSON","parse","localStorage","getItem","permissions","useMeta","title","add_vendor","edit_description","is_description_edit","is_debit","budget_name","edit_budget_name","add_fund","project_status","newProject","projects","unlocked","add_item","item_name","name","cost","quantity","quantity_2","paid_by","ref_no","notice","units","add_item_list","loading_spinner","aiIndicator","showMessage","showError","recordLog","project_name","funded_amount","new_fund","project_id","items","budget_project","fund_date","Date","toISOString","slice","lpo_list","purchaseOrders","selected_lpo_status","getPurchaseOrders","async","response","axios","value","id","data","Array","isArray","filter","order","status_name","map","index","SNo","LPO_number","String","padStart","date_created","supplier","vendor","address","requested_by","date","project","project_aka","payment","payment_terms","location","requester","user_id","status","length","console","error","whatsappNotification","vendors","getVendors","watch","newVal","getProjects","table_option","perPage","perPageValues","skin","columnsClasses","actions","pagination","nav","chunk","texts","count","filterPlaceholder","limit","sortable","sortIcon","base","up","down","resizableColumns","searchable","handleVendorChange","event","target","addVendor","vendor_id","editRow","editBudget","axiosInstance2","put","user_name","total_fund","addFund","parseFloat","short_name","amendment_description","axiosInstance","baseURL","process","VUE_APP_API_BASE_URL2","requestAmendment","message","post","remarker_id","description","type_id","remark_type","remarks","push","get","route","useRoute","getBudgetProjects","params","addProject","deleteItem","in_process","delete","then","fetchItems","deleteBudget","deleteItemDescription","addItem","itemdata","addItemDescription","itemDescriptiondata","setParam","un_finished","lpo_creation_window","user","onMounted","storedUser","fetchAmendmentRequests","getInstructions","readRemark","amendmentRequests","amendment_request_count","item","unchecked_count","isfetching","newremark","description_cost","showRemarkModal","isSending","remark_cost","items_project","budgetRemaks","budget_item_description_id","remarkcolumns","openRemarkModal","desc","fetchRemarks","closeRemarkModal","saveRemark","trim","Math","abs","split","remarker","balance","i","sno","filled_by","debit","Number","toLocaleString","credit","deleteBudgetRemark","confirm","updateItemDescription","closeEdition","patch","edit_item","editItemRow","closeItemEdition","updateItem","closing","closeBudget","openBudget","triggerNotification","phone","sender","action","next_designation","recipientPhone","endpoint","accessToken","requestData","submit","fetch","method","headers","body","stringify","json","printReport","role","printWindow","window","open","document","write","toUpperCase","client","contract_number","financial_year","item_description","budget_remark_sum_cost","undefined","join","some","reduce","sum","minimumFractionDigits","maximumFractionDigits","grandTotal","itemTotal","close","onafterprint","setTimeout","print","isAccordionOpen","lpoNumberFromStorage","lpo_item_description_id","is_unfinished_lpo","lpo_window","is_create_lpo","lpo_item_cost","lpo_item_name","lpo_total_quantity","lpo_item_quantity","lpo_item_units","lpo_item_notice","lpo_number","lpo_items","item_columns","loading","total_amount","itemDescriptionIdFromStorage","itemQuantitydFromStorage","order_registration","setEnvForLpoCreation","clearForm","supplier_name","supplier_address","supplier_location","Vendor_name","Vendor_phone","Vendor_email","Vendor_address","Vendor_location","registerPurchaseOrder","registerVendor","purchaseOrderData","status_color","VendorData","email","openLpoCreationModal","log","getItems","rate","category","unit_measure","amount","registerItem","itemData","order_id","machine_id","item_list_id","catch","closeLpoCreationModal","deleteLpoItem","activatePurchaseOrder","activationData","printRemarkReport","answer","question","seconds","timerInterval","instructions","old_question","ai","RequestAnswer","startTime","performance","now","setInterval","toFixed","machineSummary","sourceUrl","source","isValidUrl","startsWith","sourceResponse","err","warn","instructionText","seek","rawResponse","clearInterval","__exports__"],"sourceRoot":""}