"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[1874],{71874:function(e,a,l){l.r(a),l.d(a,{default:function(){return fe}});l(26699);var t=l(66252),s=l(2262),n=l(3577),o=l(49963),c=l(87066),i=l(56296),r=l(26212),d=l.n(r);const u={class:"layout-px-spacing"},m=(0,t.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">HR</a></li><li class="breadcrumb-item active" aria-current="page"><span>Leave</span></li><li class="breadcrumb-item active" aria-current="page"><span>Balance</span></li></ol></nav></div></li></ul><h3 class="text-center">LEAVE ENCASHMENT HISTORY</h3>',2),v={class:"d-flex me-4 mt-2"},p={class:"ms-auto"},b=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,t._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),_=[b],g={class:"row layout-top-spacing"},h={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},w={class:"panel p-0"},y={class:"custom-table table3"},f=["onClick"],k=(0,t._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"},null,-1),C=(0,t._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"},null,-1),x=[k,C],H={class:"modal fade mymodal",id:"view-leaves",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"false"},R={class:"modal-dialog modal-xl",role:"document"},E={class:"modal-content"},S={class:"modal-header"},q={class:"modal-title",id:"exampleModalLabel"},A=(0,t._)("button",{type:"button","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close",class:"btn-close",id:"close-approval"},null,-1),D={class:"modal-body"},M={class:"row layout-top-spacing"},U={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},V={class:"panel p-0"},z={class:"custom-table table3"},L={key:0,class:"table table-bordered"},N=(0,t._)("thead",{class:"table-light"},[(0,t._)("tr",null,[(0,t._)("th",null,"Date Requested"),(0,t._)("th",null,"Amount"),(0,t._)("th",null,"Status")])],-1),T={key:0},j={colspan:"4"},F={key:0,class:"d-flex justify-content-center mb-3 mt-2"},O={key:0,class:"btn-group"},P=["disabled"],B=["disabled"],I=["disabled"],Y=["disabled"],W={key:1,class:"mb-2 text-center"},J={key:2,class:"input-group"},Q=["placeholder"],Z=["disabled"],$=["innerHTML"],G={key:1},K={key:0,class:"row layout-top-spacing"},X=(0,t._)("h3",{class:"text-center m-2"},"PROOF OF PAYMENT",-1),ee={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ae={class:"panel p-0"},le={class:"custom-table table3"},te={class:"row"},se={class:"col-md-6"},ne=(0,t._)("label",{class:"form-label"},"Reference Number ",-1),oe={class:"col-md-6"},ce=(0,t._)("label",{class:"form-label"},"Paid From ",-1),ie={class:"col-md-3"},re=(0,t._)("label",{class:"form-label"},"Amount",-1),de={class:"col-md-4"},ue=(0,t._)("label",{class:"form-label"},"Receiver",-1),me={class:"col-md-2"},ve=(0,t._)("label",{class:"form-label"},"Date ",-1),pe={class:"col-md-3"},be=(0,t._)("label",{class:"form-label"},"Attachment ",-1),_e={class:"col-md-12"},ge=(0,t._)("label",{class:"form-label"},"Remark",-1),he=(0,t.uE)('<div class="modal-footer"><button type="button" class="btn bg-danger text-white me-2" data-dismiss="modal" data-bs-dismiss="modal"><i class="flaticon-cancel-12"></i>CLOSE</button><button type="button" class="btn bg-primary text-white"><i class="flaticon-cancel-12"></i>SAVE</button></div>',1);var we={setup(e){(0,i.j)({title:"Custom Table"});const a=c.Z.create({baseURL:"https://bushman.ink/api/v1/"}),l=(0,s.iH)(!1),r=(0,s.iH)(""),b=(0,t.f3)("printEmployees"),k=(0,t.f3)("showMessage"),C=(0,t.f3)("showError"),we=(0,t.f3)("formatNumber"),ye=(0,t.f3)("formatDate"),fe=((0,s.iH)(""),(0,s.iH)(["Sno","employee","date_requested","amount","status","actions"])),ke=((0,s.iH)(["Sno","start_date","end_date","leave_days","status","remark","actions"]),JSON.parse(localStorage.getItem("user")).permissions),Ce=(0,s.iH)(""),xe=(0,s.iH)([]),He=(0,s.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),Re=((0,s.iH)(!1),(0,s.iH)("")),Ee=(0,s.iH)([]),Se=async()=>{const e=await a.get("leave-encashments");Ee.value=e.data.map(((e,a)=>{(e.leaves??[]).filter((e=>3===e.status_id)).reduce(((e,a)=>{if(!a.start_date||!a.end_date)return e;const l=new Date(a.start_date),t=new Date(a.end_date),s=Math.ceil((t-l)/864e5)+1;return e+s}),0);return{...e,Sno:a+1,employee:e.employee.name,date_requested:ye(e.created_at),amount:we(e.amount)}}))},qe=async()=>{const e={status_id:Ce.value,remark:r.value};try{await a.put(`leave-encashments/${Re.value.id}`,e);k("Confirmed"),document.getElementById("close-approval").click(),Se(),r.value="",Ce.value=""}catch(l){C(l.message),console.log(l)}},Ae=(0,s.iH)([]),De=(0,s.iH)(""),Me=async()=>{try{const e=await a.get("account-transaction-points");Ae.value=e.data.map(((e,a)=>({...e,name:(e?.name??"")+" "+(e?.mobile_money?.name??"")+" "+(e?.mobile_money?.category??"CASH")})))}catch(e){C(e.message)}};return(0,t.bv)((()=>{Se(),Me()})),(e,a)=>{const c=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",u,[m,(0,t._)("div",v,[(0,t._)("div",p,[(0,t._)("button",{class:"btn btn-success",onClick:a[0]||(a[0]=e=>(0,s.SU)(b)(xe.value))},_)])]),(0,t._)("div",g,[(0,t._)("div",h,[(0,t._)("div",w,[(0,t._)("div",y,[(0,t.Wm)(c,{data:Ee.value,columns:fe.value,options:He.value},{status:(0,t.w5)((e=>[(0,t._)("span",{class:(0,n.C_)(["badge inv-status","badge-"+e.row.status.color])},(0,n.zw)(e.row.status.name),3)])),actions:(0,t.w5)((e=>[((0,t.wg)(),(0,t.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-eye text-primary",viewBox:"0 0 16 16","data-bs-toggle":"modal","data-bs-target":"#view-leaves",onClick:a=>Re.value=e.row},x,8,f))])),_:1},8,["data","columns","options"])])])])])]),(0,t._)("div",H,[(0,t._)("div",R,[(0,t._)("div",E,[(0,t._)("div",S,[(0,t._)("h5",q,(0,n.zw)(Re.value?.employee?.toUpperCase())+" LEAVE ENCASHMENT REQUEST",1),A]),(0,t._)("div",D,[(0,t._)("div",M,[(0,t._)("div",U,[(0,t._)("div",V,[(0,t._)("div",z,[Re.value?((0,t.wg)(),(0,t.iD)("table",L,[N,(0,t._)("tbody",null,[(0,t._)("tr",null,[(0,t._)("td",null,(0,n.zw)(Re.value.date_requested),1),(0,t._)("td",null,(0,n.zw)(Re.value.amount),1),(0,t._)("td",null,[(0,t._)("span",{class:(0,n.C_)(["badge inv-status","badge-"+Re.value.status.color])},(0,n.zw)(Re.value.status.name),3)])]),Re.value.remark?((0,t.wg)(),(0,t.iD)("tr",T,[(0,t._)("td",j,"Remark : "+(0,n.zw)(Re.value.remark),1)])):(0,t.kq)("",!0)])])):(0,t.kq)("",!0)])]),3!=Re.value.status_id?((0,t.wg)(),(0,t.iD)("div",F,[(0,s.SU)(ke).includes("can_approve_encashment")?((0,t.wg)(),(0,t.iD)("div",O,[(0,t._)("button",{class:"btn btn-primary me-2",onClick:a[1]||(a[1]=e=>Ce.value=3),disabled:l.value},"Approve",8,P),(0,t._)("button",{class:"btn btn-danger me-2",onClick:a[2]||(a[2]=e=>Ce.value=4),disabled:l.value},"Reject",8,B),(0,t._)("button",{class:"btn btn-warning me-2",onClick:a[3]||(a[3]=e=>Ce.value=17),disabled:l.value},"Hold Request",8,I),(0,t._)("button",{class:"btn btn-info me-2",onClick:a[4]||(a[4]=e=>Ce.value=14),disabled:l.value},"Remark",8,Y)])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),Ce.value?((0,t.wg)(),(0,t.iD)("div",W,[(0,t._)("span",{class:(0,n.C_)(["badge rounded-pill",{"bg-danger":4==Ce.value,"bg-success":3==Ce.value,"bg-warning":17==Ce.value,"bg-info":3!=Ce.value&&4!=Ce.value}]),style:{"font-size":"1rem"}},(0,n.zw)(3==Ce.value?"Approve Request":17==Ce.value?"Hold Request":4==Ce.value?"Reject Request":"Fill Remark"),3)])):(0,t.kq)("",!0),Ce.value?((0,t.wg)(),(0,t.iD)("div",J,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:3==Ce.value?"Enter Approval Remark":4==Ce.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":a[5]||(a[5]=e=>r.value=e)},null,8,Q),[[o.nr,r.value]]),(0,t._)("button",{class:"btn btn-primary",type:"button",disabled:l.value,onClick:a[6]||(a[6]=e=>qe())},[l.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:e.loadingSpinner()},null,8,$)):((0,t.wg)(),(0,t.iD)("span",G,"Save"))],8,Z)])):(0,t.kq)("",!0)])]),3==Re.value.status_id&&(0,s.SU)(ke).includes("is_accountant")?((0,t.wg)(),(0,t.iD)("div",K,[X,(0,t._)("div",ee,[(0,t._)("div",ae,[(0,t._)("div",le,[(0,t._)("div",te,[(0,t._)("div",se,[ne,(0,t.wy)((0,t._)("input",{class:"form-control",type:"text",placeholder:"Enter Reference Number","onUpdate:modelValue":a[7]||(a[7]=a=>e.reference_number=a)},null,512),[[o.nr,e.reference_number]])]),(0,t._)("div",oe,[ce,(0,t.Wm)((0,s.SU)(d()),{modelValue:De.value,"onUpdate:modelValue":a[8]||(a[8]=e=>De.value=e),options:Ae.value,placeholder:"Select provider",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",ie,[re,(0,t.wy)((0,t._)("input",{class:"form-control",type:"number",step:"any",placeholder:"Enter Amount","onUpdate:modelValue":a[9]||(a[9]=a=>e.amount=a)},null,512),[[o.nr,e.amount]])]),(0,t._)("div",de,[ue,(0,t.wy)((0,t._)("input",{class:"form-control",type:"text",placeholder:"Enter Receiver","onUpdate:modelValue":a[10]||(a[10]=a=>e.receiver=a)},null,512),[[o.nr,e.receiver]])]),(0,t._)("div",me,[ve,(0,t.wy)((0,t._)("input",{class:"form-control",type:"date","onUpdate:modelValue":a[11]||(a[11]=a=>e.date=a)},null,512),[[o.nr,e.date]])]),(0,t._)("div",pe,[be,(0,t._)("input",{class:"form-control",type:"file",onChange:a[12]||(a[12]=(...a)=>e.handleFileUpload&&e.handleFileUpload(...a)),accept:"application/pdf"},null,32)]),(0,t._)("div",_e,[ge,(0,t.wy)((0,t._)("input",{class:"form-control",type:"text",placeholder:"Enter Remark","onUpdate:modelValue":a[13]||(a[13]=a=>e.description=a)},null,512),[[o.nr,e.description]])])])])])])])):(0,t.kq)("",!0)]),he])])])],64)}}};const ye=we;var fe=ye}}]);
//# sourceMappingURL=1874.d578a2ca.js.map