"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[251],{60251:function(e,l,a){a.r(l),a.d(l,{default:function(){return Ue}});var s=a(66252),t=a(49963),o=a(2262),i=a(87066),d=a(56296),r=a(26212),u=a.n(r);const n={class:"layout-px-spacing"},c=(0,s.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>address</span></li></ol></nav></div></li></ul><div class="row"><div class="col-12"><h3 class="mb-3 text-center">Address Management</h3></div></div>',2),m={class:"d-flex me-4 mt-2"},v={class:"ms-auto"},p=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,s._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),b=[p],_=["onSubmit"],h=(0,s._)("h4",{class:"text-center"},"REGISTER ADDRESS",-1),g={class:"row mb-2"},y={class:"col-md-4"},w=(0,s._)("label",{class:"form-label"},"Host",-1),f={class:"col-md-4"},k=(0,s._)("label",{class:"form-label"},"House Number",-1),V={class:"col-md-4"},H=(0,s._)("label",{class:"form-label"},"Postal Code",-1),S={class:"col-md-4"},U=(0,s._)("label",{class:"form-label"},"Email",-1),x={class:"col-md-4"},E=(0,s._)("label",{class:"form-label"},"Region",-1),C={key:0,class:"col-md-4"},D=(0,s._)("label",{class:"form-label"},"District",-1),q={key:1,class:"col-md-4"},M=(0,s._)("label",{class:"form-label"},"Ward",-1),R={key:2,class:"col-md-4"},W=(0,s._)("label",{class:"form-label"},"Street",-1),P={key:3,class:"col-md-4"},N=(0,s._)("label",{class:"form-label"},"Remark",-1),L={class:"text-center gap-2 justify-content-end"},j=["disabled"],A={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},z={key:1},I=["innerHTML"],B={key:2,class:"row layout-top-spacing"},T={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Y={class:"panel p-0"},F={class:"custom-table table3"},G=["onClick"],J=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,s._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,s._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),O=[J],Z={class:"modal fade mymodal",id:"edit-address-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editConversionFactorModalLabel","aria-hidden":"true"},$={class:"modal-dialog modal-xl"},K={class:"modal-content"},Q={class:"modal-header"},X=(0,s._)("h1",{class:"modal-title fs-5",id:"editConversionFactorModalLabel"},"Edit Address",-1),ee={class:"modal-body"},le={class:"row mb-3"},ae={class:"col-md-4"},se=(0,s._)("label",{class:"form-label"},"Host",-1),te={class:"col-md-4"},oe=(0,s._)("label",{class:"form-label"},"House Number",-1),ie={class:"col-md-4"},de=(0,s._)("label",{class:"form-label"},"Postal Code",-1),re={class:"col-md-4"},ue=(0,s._)("label",{class:"form-label"},"Region",-1),ne={class:"col-md-4"},ce=(0,s._)("label",{class:"form-label"},"District",-1),me={class:"col-md-4"},ve=(0,s._)("label",{class:"form-label"},"Ward",-1),pe={class:"col-md-4"},be=(0,s._)("label",{class:"form-label"},"Street",-1),_e={class:"col-md-4"},he=(0,s._)("label",{class:"form-label"},"Remark",-1),ge={class:"col-md-4"},ye=(0,s._)("label",{class:"form-label"},"Email",-1),we={class:"modal-footer"},fe=["disabled"],ke={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},Ve={key:1};var He={setup(e){(0,d.j)({title:"Address"});const l=(0,s.f3)("showMessage"),a=(0,o.iH)(!1),r=(0,s.f3)("showError"),p=(JSON.parse(localStorage.getItem("user")).permissions,(0,s.f3)("formatDate"),(0,s.f3)("tableShimmer")),J=((0,s.f3)("loadingSpinner"),(0,o.iH)(!1)),He=(0,o.iH)(!1),Se=(0,o.iH)(["SNo","host","region","house_number","postal_code","email","remark","actions"]),Ue=(0,o.iH)(""),xe=(0,o.iH)(""),Ee=(0,o.iH)(""),Ce=(0,o.iH)(""),De=(0,o.iH)(""),qe=(0,o.iH)(""),Me=(0,o.iH)(""),Re=(0,o.iH)(""),We=(0,o.iH)(""),Pe=((0,o.iH)([]),(0,o.iH)([])),Ne=(0,o.iH)(""),Le=(0,o.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name","short_name","status"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),je=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),Ae=async()=>{He.value=!0;try{const e=await je.get("addresses");Pe.value=e.data.map(((e,l)=>({SNo:l+1,id:e.id,host:e.host,region:e.region?.name,region_id:e.region_id,house_number:e.house_number,district_id:e.district_id,ward_id:e.ward_id,street_id:e.street_id,postal_code:e.postal_code,email:e.email,remark:e.remark})))}catch(e){console.log(e),r(e.message)}finally{He.value=!1}},ze=()=>{je.get("/addresses").then((e=>{Pe.value=e.data.map(((e,l)=>({...e,SNo:l+1,id:e.id,host:e.host,region:e.region?.name,house_number:e.house_number,postal_code:e.postal_code,email:e.email,remark:e.remark})))}))},Ie=async()=>{if(!Ce.value||!Ce.value.id)return void r("Please select a region");J.value=!0;const e={host:Ue.value,region_id:Ce.value.id,district_id:De.value.id,ward_id:qe.value.id,street_id:Me.value.id,house_number:xe.value,postal_code:Ee.value,email:Re.value,remark:We.value};try{await je.post("/addresses",e);ze(),Be(),l("address registered successfully!")}catch(a){console.log(a),r(a.message)}finally{J.value=!1}},Be=()=>{a.value=!1,Ue.value="",xe.value="",Ce.value="",De.value="",qe.value="",Me.value="",Ee.value="",Re.value="",We.value=""},Te=async()=>{He.value=!0;const e={host:Ue.value,region_id:Ce.value.id,district_id:De.value.id,ward_id:qe.value.id,street_id:Me.value.id,house_number:xe.value,postal_code:Ee.value,email:Re.value,remark:We.value};try{await je.put(`/addresses/${Ne.value}`,e);ze(),document.getElementById("close_editing").click(),l("address updated successfully!")}catch(a){r(a.message)}finally{He.value=!1}},Ye=async e=>{Ne.value=e.id,Ue.value=e.host,xe.value=e.house_number,Ee.value=e.postal_code,Re.value=e.email,We.value=e.remark,Ce.value=Fe.value.find((l=>l.id===e.region_id))||"",Ce.value&&Ce.value.id&&(await Oe(),De.value=Je.value.find((l=>l.id===e.district_id))||"",De.value&&De.value.id&&(await $e(),qe.value=Ze.value.find((l=>l.id===e.ward_id))||"",qe.value&&qe.value.id&&(await Qe(),Me.value=Ke.value.find((l=>l.id===e.street_id))||"")))},Fe=(0,o.iH)([]),Ge=async()=>{try{const e=await je.get("/regions");Fe.value=e.data}catch(e){r(e.message)}},Je=(0,o.iH)([]),Oe=async()=>{try{const e=await je.get("/districts?region_id="+Ce.value.id);Je.value=e.data}catch(e){r(e.message)}},Ze=(0,o.iH)([]),$e=async()=>{try{const e=await je.get("/wards?district_id="+De.value.id);Ze.value=e.data}catch(e){r(e.message)}},Ke=(0,o.iH)([]),Qe=async()=>{try{const e=await je.get("/streets?ward_id="+qe.value.id);Ke.value=e.data}catch(e){r(e.message)}};return(0,s.YP)(Ce,(e=>{e&&e.id?(De.value="",qe.value="",Me.value="",Oe()):(Je.value=[],Ze.value=[],Ke.value=[])})),(0,s.YP)(De,(e=>{e&&e.id?(qe.value="",Me.value="",$e()):(Ze.value=[],Ke.value=[])})),(0,s.YP)(qe,(e=>{e&&e.id?(Me.value="",Qe()):Ke.value=[]})),(0,s.bv)((()=>{Ae(),Ge()})),(e,l)=>{const i=(0,s.up)("v-client-table");return(0,s.wg)(),(0,s.iD)("div",n,[c,(0,s._)("div",m,[(0,s._)("div",v,[(0,s._)("button",{class:"btn btn-primary",onClick:l[0]||(l[0]=e=>a.value=!a.value)},b)])]),a.value?((0,s.wg)(),(0,s.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,t.iM)(Ie,["prevent"])},[h,(0,s._)("div",g,[(0,s._)("div",y,[w,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Host","onUpdate:modelValue":l[1]||(l[1]=e=>Ue.value=e),required:""},null,512),[[t.nr,Ue.value]])]),(0,s._)("div",f,[k,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter House Number","onUpdate:modelValue":l[2]||(l[2]=e=>xe.value=e)},null,512),[[t.nr,xe.value]])]),(0,s._)("div",V,[H,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Postal Code","onUpdate:modelValue":l[3]||(l[3]=e=>Ee.value=e)},null,512),[[t.nr,Ee.value]])]),(0,s._)("div",S,[U,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Email","onUpdate:modelValue":l[4]||(l[4]=e=>Re.value=e)},null,512),[[t.nr,Re.value]])]),(0,s._)("div",x,[E,(0,s.Wm)((0,o.SU)(u()),{modelValue:Ce.value,"onUpdate:modelValue":l[5]||(l[5]=e=>Ce.value=e),options:Fe.value,placeholder:"select Region",label:"name",searchable:!0,multple:"false",required:"true","allow-empty":!1,onSelect:Oe},null,8,["modelValue","options"])]),Ce.value?((0,s.wg)(),(0,s.iD)("div",C,[D,(0,s.Wm)((0,o.SU)(u()),{modelValue:De.value,"onUpdate:modelValue":l[6]||(l[6]=e=>De.value=e),options:Je.value,placeholder:"select District",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1,onSelect:$e},null,8,["modelValue","options"])])):(0,s.kq)("",!0),De.value?((0,s.wg)(),(0,s.iD)("div",q,[M,(0,s.Wm)((0,o.SU)(u()),{modelValue:qe.value,"onUpdate:modelValue":l[7]||(l[7]=e=>qe.value=e),options:Ze.value,placeholder:"select Ward",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1,onSelect:Qe},null,8,["modelValue","options"])])):(0,s.kq)("",!0),qe.value?((0,s.wg)(),(0,s.iD)("div",R,[W,(0,s.Wm)((0,o.SU)(u()),{modelValue:Me.value,"onUpdate:modelValue":l[8]||(l[8]=e=>Me.value=e),options:Ke.value,placeholder:"select Street",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])])):(0,s.kq)("",!0),qe.value?((0,s.wg)(),(0,s.iD)("div",P,[N,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Remark","onUpdate:modelValue":l[9]||(l[9]=e=>We.value=e)},null,512),[[t.nr,We.value]])])):(0,s.kq)("",!0)]),(0,s._)("div",L,[(0,s._)("button",{type:"button",class:"btn btn-danger me-3",onClick:l[10]||(l[10]=e=>{a.value=!1,Be()})},"Cancel"),(0,s._)("button",{type:"submit",class:"btn btn-primary",disabled:J.value},[J.value?((0,s.wg)(),(0,s.iD)("span",A)):((0,s.wg)(),(0,s.iD)("span",z,"Register"))],8,j)])],40,_)):(0,s.kq)("",!0),He.value?((0,s.wg)(),(0,s.iD)("div",{key:1,innerHTML:(0,o.SU)(p)()},null,8,I)):((0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("div",T,[(0,s._)("div",Y,[(0,s._)("div",F,[(0,s.Wm)(i,{data:Pe.value,columns:Se.value,options:Le.value},{actions:(0,s.w5)((e=>[(0,s._)("a",{href:"javascript:;",class:"edit me-3",onClick:l=>Ye(e.row),"data-bs-toggle":"modal","data-bs-target":"#edit-address-modal"},O,8,G)])),_:1},8,["data","columns","options"])])])])])),(0,s._)("div",Z,[(0,s._)("div",$,[(0,s._)("div",K,[(0,s._)("div",Q,[X,(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[11]||(l[11]=e=>Be())})]),(0,s._)("form",{onSubmit:l[22]||(l[22]=(0,t.iM)((e=>Te()),["prevent"]))},[(0,s._)("div",ee,[(0,s._)("div",le,[(0,s._)("div",ae,[se,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Host","onUpdate:modelValue":l[12]||(l[12]=e=>Ue.value=e),required:""},null,512),[[t.nr,Ue.value]])]),(0,s._)("div",te,[oe,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter House Number","onUpdate:modelValue":l[13]||(l[13]=e=>xe.value=e)},null,512),[[t.nr,xe.value]])]),(0,s._)("div",ie,[de,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Postal Code","onUpdate:modelValue":l[14]||(l[14]=e=>Ee.value=e)},null,512),[[t.nr,Ee.value]])]),(0,s._)("div",re,[ue,(0,s.Wm)((0,o.SU)(u()),{modelValue:Ce.value,"onUpdate:modelValue":l[15]||(l[15]=e=>Ce.value=e),options:Fe.value,placeholder:"select Region",label:"name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,s._)("div",ne,[ce,(0,s.Wm)((0,o.SU)(u()),{modelValue:De.value,"onUpdate:modelValue":l[16]||(l[16]=e=>De.value=e),options:Je.value,placeholder:"select District",label:"name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,s._)("div",me,[ve,(0,s.Wm)((0,o.SU)(u()),{modelValue:qe.value,"onUpdate:modelValue":l[17]||(l[17]=e=>qe.value=e),options:Ze.value,placeholder:"select Ward",label:"name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,s._)("div",pe,[be,(0,s.Wm)((0,o.SU)(u()),{modelValue:Me.value,"onUpdate:modelValue":l[18]||(l[18]=e=>Me.value=e),options:Ke.value,placeholder:"select Street",label:"name",searchable:!0,multiple:!1,required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,s._)("div",_e,[he,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Remark","onUpdate:modelValue":l[19]||(l[19]=e=>We.value=e)},null,512),[[t.nr,We.value]])]),(0,s._)("div",ge,[ye,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter Email","onUpdate:modelValue":l[20]||(l[20]=e=>Re.value=e)},null,512),[[t.nr,Re.value]])])])]),(0,s._)("div",we,[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close_editing",onClick:l[21]||(l[21]=e=>Be())},"Close"),(0,s._)("button",{type:"submit",class:"btn btn-primary",disabled:He.value},[He.value?((0,s.wg)(),(0,s.iD)("span",ke)):((0,s.wg)(),(0,s.iD)("span",Ve,"Edit"))],8,fe)])],32)])])])])}}};const Se=He;var Ue=Se}}]);
//# sourceMappingURL=251.ff4b77eb.js.map