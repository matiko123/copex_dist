{"version":3,"file":"js/8454.fec9091f.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/ApprovalBlock.vue","webpack://cork-vue3/./src/components/reusables/ApprovalBlock.vue?ae6b","webpack://cork-vue3/./src/views/jobcards/jobcard.vue","webpack://cork-vue3/./src/views/jobcards/jobcard.vue?561a"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"btn-group mb-2\">\r\n      <button type=\"button\" class=\"btn btn-success me-2\" @click=\"status = 3,block =! block \" :disabled=\"spinner\">Approve</button>\r\n      <button type=\"button\" class=\"btn btn-danger me-2\" @click=\"status = 4,block =! block\" :disabled=\"spinner\">Reject</button>\r\n      <button type=\"button\" class=\"btn btn-primary\" @click=\"status = 14 ,block =! block\" :disabled=\"spinner\">Remark</button>\r\n    </div>\r\n\r\n    <div v-if=\"status && block\" class=\"mb-2 text-center\">\r\n      <span class=\"badge rounded-pill\"\r\n        :class=\"{\r\n          'bg-danger': status == 4,\r\n          'bg-success': status == 3,\r\n          'bg-info': status == 14\r\n        }\"\r\n        style=\"font-size: 1rem;\"\r\n      >\r\n        {{ status == 3 ? 'Approve Request' : status == 4 ? 'Reject Request' : 'Fill Remark' }}\r\n      </span>\r\n    </div>\r\n\r\n    <div class=\"input-group\" v-if=\"status\">\r\n      <input type=\"text\" class=\"form-control\"\r\n        :placeholder=\"status == 3 ? 'Enter Approval Remark' : status == 4 ? 'Enter Rejection Remark' : 'Enter Remark'\"\r\n        v-model=\"remark\"\r\n        v-if=\"block\"\r\n        >\r\n      <button v-if=\"block\" type=\"submit\" class=\"btn btn-primary me-2\" :disabled=\"spinner\">\r\n        <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else>Save</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\n\r\nconst props = defineProps({\r\n  spinner: Boolean,\r\n  loadingSpinner: Function,\r\n  modelValue: Number,\r\n  remarkValue: String\r\n})\r\n\r\nconst emit = defineEmits(['update:blockValue','update:modelValue', 'update:remarkValue'])\r\n\r\nconst block = ref(props.blockValue || false)\r\nconst status = ref(props.modelValue || null)\r\nconst remark = ref(props.remarkValue || '')\r\n\r\n// sync local refs when parent updates\r\nwatch(() => props.modelValue, val => status.value = val)\r\nwatch(() => props.remarkValue, val => remark.value = val)\r\n\r\n// emit updates when local refs change\r\nwatch(block, val => emit('update:blockValue', val))\r\nwatch(status, val => emit('update:modelValue', val))\r\nwatch(remark, val => emit('update:remarkValue', val))\r\n</script>\r\n","import script from \"./ApprovalBlock.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ApprovalBlock.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Jobcard</a></li>\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Details</a></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n\r\n                                                <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n   <div class=\"d-flex mb-3\">\r\n    <div class=\"ms-auto\">\r\n        \r\n\r\n          <button\r\n           v-if=\"jobcard?.status?.name !== 'Completed' && !loading_spinner\"\r\n          @click=\"updateJobcard(8)\"\r\n          class=\"btn btn-success me-2\">\r\n\r\n          <span v-if=\"completing\">\r\n            <span class=\"spinner-border spinner-border-sm text-white ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n          </span>\r\n          <span v-else>\r\n           Completed\r\n          </span>\r\n          </button>\r\n\r\n          \r\n          <button\r\n           v-if=\"jobcard?.status?.name === 'Active'\"\r\n          @click=\"updateJobcard(2)\"\r\n          class=\"btn btn-primary me-2\">\r\n\r\n          <span v-if=\"completing\">\r\n            <span class=\"spinner-border spinner-border-sm text-white ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n          </span>\r\n          <span v-else>\r\n           Submit\r\n          </span>\r\n          </button>\r\n\r\n         <button \r\n            class=\"btn btn-info  mx-2\" \r\n            @click=\"openRemarkModal()\" \r\n            title=\"Jobcar remark\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chat-square-text\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n                    <path d=\"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z\"/>\r\n                </svg>\r\n            &nbsp;Remark\r\n            </button>\r\n\r\n          <button\r\n           v-if=\"jobcard?.status_name === 'Completed' && user_permissions.includes('can_open_jobcard')\"\r\n          @click=\"DeactivateJobcard()\"\r\n          class=\"btn btn-dark me-2\">\r\n\r\n          <span v-if=\"completing\">\r\n            <span class=\"spinner-border spinner-border-sm text-white ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n          </span>\r\n          <span v-else>\r\n           deactivate\r\n          </span>\r\n          </button>\r\n          \r\n\r\n            <button class=\"btn btn-primary me-2\" @click=\"printJobcard\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-printer me-1\">\r\n                        <polyline points=\"6 9 6 2 18 2 18 9\"></polyline>\r\n                        <path d=\"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\"></path>\r\n                        <rect x=\"6\" y=\"14\" width=\"12\" height=\"8\"></rect>\r\n                    </svg>\r\n     \r\n                </button>\r\n\r\n                 <button class=\"btn btn-dark  me-1\" @click=\"summary = !summary\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-file-text\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M5 4a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5A.5.5 0 0 1 5 4zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5A.5.5 0 0 1 5 6zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5A.5.5 0 0 1 5 8z\"/>\r\n  <path d=\"M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3-.5a1 1 0 0 1-1-1V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4z\"/>\r\n</svg>\r\n\r\n                </button>\r\n\r\n            <button class=\"btn btn-info  me-1\" @click=\"mail = !mail\">\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" viewBox=\"0 0 24 24\">\r\n  <rect x=\"2\" y=\"5\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\r\n  <polyline points=\"2 7 12 13 22 7\"/>\r\n</svg>\r\n\r\n                </button>\r\n\r\n    </div>\r\n\r\n            </div>\r\n  <!-- jobcard details starts -->\r\n<div \r\nv-if=\"mail\"\r\nclass=\"d-flex mb-3 justify-content-end\">\r\n  <div class=\"d-flex\" style=\"max-width: 400px; width: 100%;\">\r\n    <input type=\"text\" class=\"form-control me-2\" v-model=\"receiver\" placeholder=\"Enter Receiver Email\" />\r\n    <button class=\"btn btn-primary\" @click=\"sendMail\">\r\n      <span v-if=\"sendingMail\">\r\n        <span class=\"spinner-border spinner-border-sm text-white\" role=\"status\" aria-hidden=\"true\"></span>\r\n      </span>\r\n      <span v-else>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-send\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M15.964.686a.5.5 0 0 0-.65-.65L.708 7.145a.5.5 0 0 0 .018.91l5.745 1.918 1.918 5.745a.5.5 0 0 0 .91.018l7.108-14.13ZM6.832 9.168l-4.385-1.464L14.036 1.5 6.832 9.168Zm.93.93 1.518 4.548L14.5 2.464 7.762 10.1Z\"/>\r\n</svg>\r\n\r\n      </span>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n\r\n  <div  class=\"row \">\r\n        <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n            <div class=\"panel p-0\">\r\n                <div class=\"custom-table table3 shadow table-responsive\">\r\n                    <table class=\"table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Card#</th>\r\n                                <th> {{ jobcard?.machine?.category?.name }}</th>\r\n                                <th>Date</th>\r\n                                <th>Service</th>\r\n                                <th>Current Kms </th>\r\n                                <th>Next Kms</th>\r\n                                <th>Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td v-if=\"jobcard\">{{ jobcard.id }}</td>\r\n<td v-if=\"jobcard\">\r\n  {{ jobcard?.machine?.name && jobcard?.machine?.type_name ? jobcard?.machine.name + ' - ' + jobcard?.machine.type_name : jobcard?.machine?.name || '' }}\r\n</td>\r\n                                <td v-if=\"jobcard\">{{ jobcard.date_created }}</td>\r\n                                <td v-if=\"jobcard\">{{ jobcard.service_type }}</td>\r\n                                <td v-if=\"jobcard\">{{ jobcard.current_km_of_service?.toLocaleString() ?? '---' }}</td>\r\n                                <td v-if=\"jobcard\">{{ jobcard.next_km_of_service?.toLocaleString() ?? '---' }}</td>\r\n                                <td v-if=\"jobcard\" > {{  jobcard?.status?.name }}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n         <!-- jobcard details ends -->\r\n                       <!-- div with clear defect work and items used starts -->\r\n        <div class =\"row text-center\">\r\n            <!-- defects reported starts -->\r\n            <div class=\"col-md-6 \">\r\n                 <h4>DEFECTS REPORTED</h4>\r\n                 <div class=\"d-flex mt-2\"\r\n                  v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                 >\r\n            <div class=\"ms-auto\"\r\n            v-if=\"user_permissions.includes('can_edit_jobcard_items')\"\r\n            >\r\n            <button v-if=\"!add_defect \" type=\"button\" class=\"btn btn-outline-primary mb-2\" @click=\"add_defect=!add_defect\">\r\n                <template v-if=\"d  && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n            </button>\r\n            <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_defect=!add_defect\">\r\n              X\r\n            </button>\r\n        </div>\r\n           </div>\r\n           <!-- defect form starts -->\r\n           <form v-if=\"add_defect\" @submit.prevent=\"registerDefect\">\r\n\r\n<textarea v-model=\"defect_description\" class=\"form-control\" placeholder=\"Add New Defect\" style=\"height:100px\" required></textarea>\r\n\r\n<div class=\"d-flex mt-2\">\r\n<button type=\"submit\" class=\" ms-auto btn btn-primary mb-1\" >Submit</button>\r\n\r\n</div>\r\n\r\n</form>\r\n            <!-- defect form ends -->\r\n           \r\n                 <ol class=\"list-group list-group-numbered shadow\">\r\n        <li \r\n            v-for=\"defect in defects\" \r\n            :key=\"defect.id\" \r\n            class=\"list-group-item d-flex justify-content-between align-items-start\"\r\n       \r\n            >\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"fw-bold\">\r\n                    {{ defect.description }}\r\n                </div>\r\n            </div>\r\n            <div \r\n             v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n              >\r\n            <span \r\n                v-if=\"defect.status_id == 1\" \r\n                class=\"text-success\"\r\n            >\r\n                completed\r\n            </span>\r\n            <span v-else >\r\n                  <span \r\n                  v-if=\"deleting === defect.id \"\r\n                  class=\"spinner-border spinner-border-sm text-danger ms-2 me-3\" role=\"status\" aria-hidden=\"true\"></span> \r\n                <svg\r\n                v-else\r\n                v-if=\"user_permissions.includes('can_delete_jobcard_items')\"\r\n                style=\"cursor:pointer\"\r\n                @click=\"deleteLog(defect.id)\"\r\n                 xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"me-3 text-danger bi bi-trash3\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5\"/>\r\n                </svg>\r\n                <template v-if=\"loading_spinner && defect.showHover\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg \r\n                    style=\"cursor:pointer\"\r\n                     v-if=\"user_permissions.includes('can_edit_jobcard_items')\"\r\n                     @click=\"updateDefectStatus(defect)\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\" text-success bi bi-check-circle\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16\"/>\r\n  <path d=\"m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05\"/>\r\n</svg>\r\n    \r\n                </template>\r\n            </span>\r\n            </div>\r\n            <div v-else>\r\n<span \r\n                v-if=\"defect.status_id == 1\" \r\n                class=\"text-success\"\r\n            >\r\n                completed\r\n            </span>\r\n            <span v-else class=\"text-danger\">\r\n              Incomplete\r\n            </span>\r\n            </div>\r\n        </li>\r\n    </ol>\r\n    </div>\r\n    <!-- defects reported ends -->\r\n         <!-- work carried out starts -->\r\n      <div class=\"col-md-6 \">\r\n                <h4 class=\"\">WORK CARRIED OUT</h4>\r\n                <div class=\"d-flex mt-2\"\r\n               v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                >\r\n            <div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n                <button v-if=\"!add_work\" type=\"button\" class=\"btn btn-outline-primary mb-2\"  @click=\"add_work=!add_work\">\r\n                    <template v-if=\"w && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n            </button>\r\n            <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_work=!add_work\">\r\n              X\r\n            </button>\r\n        </div>\r\n           </div>\r\n           <!-- work carried out form starts -->\r\n           <form v-if=\"add_work\" @submit.prevent=\"registerWorkDone\">\r\n              <textarea class=\"form-control\"  v-model=\"workdone_description\" placeholder=\"Add New Work Carried Out\" style=\"height:100px\" required></textarea>\r\n             <div class=\"d-flex mt-2\">\r\n               <button type=\"submit\" class=\" ms-auto btn btn-primary mb-2 \">Submit</button>\r\n             </div>\r\n\r\n            </form>\r\n\r\n            <!-- work carried out form ends -->\r\n                <ol class=\"list-group list-group-numbered shadow\">\r\n        <li \r\n            v-for=\"work in work_carried_out\" \r\n            :key=\"work.id\" \r\n            class=\"list-group-item d-flex justify-content-between align-items-start\"\r\n        >\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"fw-bold\">{{ work.description }}</div>\r\n            </div>\r\n        </li>\r\n    </ol>\r\n            </div>\r\n            <!-- work carried out ends -->\r\n\r\n              <!-- spares use starts -->\r\n                   <div \r\n            v-if=\"!summary\"\r\n            class=\"col-md-12 mt-3\">\r\n                <h4 @click=\"changeSparesTitle\">{{ spares_title }}</h4>\r\n                <!-- approval blocks starts -->\r\n\r\n  <form\r\n  v-if=\"user_permissions.includes('can_approve_jobcard_requisition') \"\r\n   @submit.prevent=\"approveBulkItemUsage(items)\">\r\n    <ApprovalBlock\r\n      v-model:blockValue=\"block\"\r\n      v-model:modelValue=\"status\"\r\n      v-model:remarkValue=\"remark\"\r\n      :spinner=\"spinner\"\r\n      :loadingSpinner=\"loadingSpinner\"\r\n    />\r\n  </form>\r\n\r\n\r\n                 <!-- approval block ends -->\r\n                <div class=\"d-flex mt-2\"\r\n                 v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                >\r\n<div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n    <button v-if=\"!add_usage\" type=\"button\" class=\"btn btn-outline-primary mb-2\"  @click=\"add_usage=!add_usage,getVendors()\">\r\n        <template v-if=\"s && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n     </button>\r\n     <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_usage=!add_usage\">\r\n      X\r\n     </button>\r\n</div>\r\n</div>\r\n                <!-- spare used form starts -->\r\n                <form v-if=\"add_usage\" @submit.prevent=\"registerItemUsage('spares')\">\r\n<div class=\"row mb-4  w-100\">\r\n    <div class=\"col-sm-3\">\r\n        <Multiselect\r\n  v-model=\"spare_usage\"\r\n  :options=\"spares\"\r\n  :close-on-select=\"true\"\r\n  label=\"name\"\r\n  value-prop=\"id\"\r\n  placeholder=\"Select a spare\"  \r\n  :required=\"!machine_field\"\r\n  :searchable=\"true\" \r\n/>\r\n    </div>\r\n    <div class=\"col-sm-2\">\r\n    <input\r\n        type=\"number\"\r\n        v-model=\"usage_quantity\"\r\n        class=\"form-control\"\r\n        :placeholder=\"spare_usage ? 'Available ' + (spare_usage.balance_quantity ?? '') : 'Enter Quantity'\"\r\n        min=\"0\"\r\n        required\r\n        step=\"any\"\r\n    />\r\n    </div>\r\n    <div v-if=\"spare_usage\" class=\"col-sm-2\">\r\n              <Multiselect\r\n  v-model=\"unit\"\r\n  :options=\"units\"\r\n  :close-on-select=\"true\"\r\n  label=\"short_name\"\r\n  placeholder=\"Select unit\"  \r\n  :searchable=\"true\" \r\n/>\r\n    </div>\r\n    <div class=\"col-sm-2 \">\r\n        <input type=\"number\" v-model=\"rate\"\r\n         class=\"form-control\" placeholder=\"Enter Rate\"\r\n          min=\"0\" required step=\"any\">\r\n    </div>\r\n    <div class=\"col-sm-3\"\r\n    v-if=\"spare_usage.balance_quantity < usage_quantity\"\r\n    >\r\n        <Multiselect\r\n  v-model=\"vendor\"\r\n  :options=\"vendors\"\r\n  :close-on-select=\"true\"\r\n  label=\"name\"\r\n  value-prop=\"id\"\r\n  placeholder=\"Select a Vendor\"  \r\n  :required=\"!machine_field\"\r\n  :searchable=\"true\" \r\n/>\r\n</div>\r\n    <div class=\"col-sm-12 mt-2\">\r\n      <input type=\"text\" v-model=\"usage_description\" class=\"form-control\"\r\n       placeholder=\"Usage Descriptions\"\r\n       >\r\n    </div>\r\n    <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button type=\"submit\" class=\"mt-2  btn btn-primary ms-auto\" :disabled=\"!usage_quantity || !spare_usage || (!vendor && spare_usage.balance_quantity < usage_quantity )\">\r\n            Submit\r\n        </button>\r\n        </div>     \r\n    </div>\r\n</div>\r\n\r\n</form>\r\n                 <!-- spares used form ends -->\r\n                <!-- items used table starts -->\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"items\" :columns=\"columns\" :options=\"table_option\">\r\n                           \r\n                            <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                  {{ props.row.status.name }}\r\n                </span>\r\n                            </template>\r\n                            <template\r\n                             #actions=\"props\" >\r\n                                <div class=\"d-flex justify-content-center align-items-center\">\r\n                                   <a\r\n                                   v-if=\"user_permissions.includes('can_delete_jobcard_items')\"\r\n                                   href=\"javascript:;\" class=\"cancel me-2\"\r\n                                   \r\n                                   @click=\"deleteItemUsage(props.row.id)\" title=\"Delete Spare Usage Record\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                    <a\r\n                                     v-if=\"user_permissions.includes('can_edit_jobcard_items')\"\r\n                                    href=\"javascript:;\"  class=\"edit me-2\" @click=\"editItemUsage(props.row)\">\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n\r\n                                            <a href=\"javascript:;\"  class=\"me-2 text-primary\" >\r\n                                            <svg\r\n                                    \r\n                                    data-bs-toggle=\"modal\" data-bs-target=\"#approval-form\"\r\n                                    @click=\"approveItem = props.row\"\r\n                                   \r\n                                    xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n                            \r\n                                        </a>\r\n\r\n                                </div>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n <!-- items used table ends -->\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n             <!-- spares use ends -->\r\n\r\n\r\n             \r\n  <!-- tyres starts -->\r\n   <div class=\"col-md-6 mt-3\" v-if=\"!summary\">\r\n                <div \r\n                 v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                class=\"d-flex mt-2\">\r\n<div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n<button v-if=\"!add_tyre\" type=\"button\" class=\"btn btn-outline-primary mb-2\" @click=\"add_tyre = true;getSpares()\" >\r\n        <template v-if=\"s && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n     </button>\r\n<button v-else type=\"button\" class=\"btn btn-danger mb-2\" @click=\"add_tyre = false\">\r\n  X\r\n</button>\r\n</div>\r\n</div>\r\n<form v-if=\"add_tyre\" @submit.prevent=\"registerItemUsage('tyres')\" class=\"container\">\r\n  <div class=\"row g-3\">\r\n    <div class=\"col-md-8\">\r\n      <Multiselect\r\n        v-model=\"spare_usage\"\r\n        :options=\"spares\"\r\n        :close-on-select=\"true\"\r\n        label=\"name\"\r\n        value-prop=\"id\"\r\n        placeholder=\"Select a spare\"\r\n        :required=\"!machine_field\"\r\n        :searchable=\"true\"\r\n      />\r\n    </div>\r\n    <div class=\"col-md-4\">\r\n      <input type=\"date\" v-model=\"date\" class=\"form-control\" required />\r\n    </div>\r\n    <div class=\"col-md-8\">\r\n      <input type=\"text\" v-model=\"usage_description\" class=\"form-control\" placeholder=\"Tyre Number\" />\r\n    </div>\r\n    <div class=\"col-md-4\">\r\n      <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required step=\"any\" />\r\n    </div>\r\n    <div class=\"col-12 d-flex flex-wrap align-items-center gap-2\">\r\n    <label\r\n  v-if=\"spare_usage\"\r\n  class=\"form-control flex-grow-1 text-center\"\r\n  style=\"max-width: 200px\"\r\n>\r\n  Available: {{ spare_usage.balance_quantity }}\r\n</label>\r\n\r\n<label\r\n  v-if=\"spare_usage\"\r\n  class=\"form-control flex-grow-1 text-center\"\r\n  style=\"max-width: 200px\"\r\n>\r\n  Condition: {{ spare_usage.condition }}\r\n</label>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn btn-primary ms-auto\"\r\n        :disabled=\"spare_usage?.balance_quantity == 0 || !spare_usage ||   spare_usage?.balance_quantity< 1 \"\r\n      >\r\n        Submit\r\n      </button>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n\r\n                   <div class=\"text-center\">\r\n                <h4>TYRES USED</h4>\r\n                </div>\r\n\r\n\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"tyres\" :columns=\"Tyrescolumns\" :options=\"table_option\">\r\n                            <template #actions=\"props\">\r\n                                <div class=\"d-flex justify-content-center align-items-center\">\r\n                                  <a href=\"javascript:;\"  class=\"edit me-3\" @click=\"editTyres(props.row)\"\r\n                                   v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n                                    <a \r\n                                    v-if=\"user_permissions.includes('can_delete_item_usage')\"\r\n                                    href=\"javascript:;\" class=\"cancel me-3\" @click=\"deleteItemUsage(props.row.id)\" title=\"Delete Spare Usage Record\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n\r\n                                </div>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        \r\n   <!-- tyres ends -->\r\n    <!-- outside maintainance starts -->\r\n             <div class=\"col-md-6\" v-if=\"!summary\" >\r\n                        <h4 class=\"mt-4\">OUTSIDE MAINTENANCE</h4>\r\n                        <div class=\"d-flex mt-2\"\r\n                  v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                 >\r\n            <div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n            <button\r\n            @click=\"outside_maintenance =! outside_maintenance\"\r\n            class=\"btn \" :class=\"outside_maintenance ? 'btn-danger':'btn-primary'\">\r\n                   {{ outside_maintenance?'X':\r\n                   'Add' }}\r\n                </button>\r\n          \r\n        </div>\r\n           </div>\r\n\r\n<form \r\nv-if=\"outside_maintenance\"\r\n@submit.prevent=\"addOutsideMaintenance()\">\r\n    <div class=\"row mb-4 container\">\r\n          <div class=\"col-sm-5 mt-2\">\r\n      <input type=\"text\" v-model=\"item\" class=\"form-control\" placeholder=\"Enter Item\" required>\r\n    </div>\r\n    <div class=\"col-sm-7 mt-2\">\r\n      <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Enter Descriptions\">\r\n    </div>\r\n            <div class=\"col-sm-4 mt-2\">\r\n    <input\r\n        type=\"number\"\r\n        v-model=\"quantity\"\r\n        class=\"form-control\"\r\n        placeholder = \"Enter Quantity\"\r\n        min=\"1\"\r\n        required\r\n    />\r\n    </div>\r\n\r\n     <div class=\"col-sm-6 mt-2\">\r\n        <Multiselect\r\n  v-model=\"vendor\"\r\n  :options=\"vendors\"\r\n  :close-on-select=\"true\"\r\n  label=\"name\"\r\n  placeholder=\"Select a vendor\"  \r\n  :searchable=\"true\" \r\n/>\r\n    </div>\r\n <div class=\"col-sm-2 mt-2\">\r\n         <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button type=\"submit\" class=\"mt-2  btn btn-primary ms-auto\" :disabled=\"loading_spinner ==='maintenance'\">\r\n            <span v-if=\"loading_spinner === 'maintenance'\" v-html=\"loadingSpinner()\"></span>\r\n             <span v-else>Submit</span>\r\n        </button>\r\n        </div>     \r\n    </div>\r\n    </div>\r\n   \r\n</div>\r\n</form>\r\n\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"outsideMaintenance\" :columns=\"outsideMaintenanceColumns\" :options=\"table_option\">\r\n                           <template #status=\"props\">\r\n                    <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                      {{ props.row.status.name }}\r\n                    </span>\r\n                  </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n            </div>\r\n     <!-- outside maintainance ends -->\r\n            <!-- labours card starts -->\r\n                  <div class=\"col-md-6\" v-if=\"!summary\" >\r\n                        <h4 class=\"mt-4\">LABOUR COST</h4>\r\n                        <div class=\"d-flex mt-2\"\r\n                  v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                 >\r\n            <div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n            <button v-if=\"!add_labour_cost\" type=\"button\" class=\"btn btn-outline-primary mb-2\"  @click=\"add_labour_cost=!add_labour_cost\">\r\n                <template v-if=\"cn ==='labour' && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n                </button>\r\n            <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_labour_cost=!add_labour_cost\">\r\n              X\r\n            </button>\r\n        </div>\r\n           </div>\r\n\r\n<form \r\nv-if=\"add_labour_cost\"\r\n@submit.prevent=\"addCostNote('labour')\">\r\n    <div class=\"row mb-4 container\">\r\n    <div class=\"col-sm-7 mt-2\">\r\n      <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Descriptions\" required>\r\n    </div>\r\n\r\n     <div class=\"col-sm-5 mt-2\">\r\n      <input type=\"text\" v-model=\"beneficiary\" class=\"form-control\" placeholder=\"Enter Beneficiary\" required>\r\n    </div>\r\n            <div class=\"col-sm-5 mt-2\">\r\n    <input\r\n        type=\"number\"\r\n        v-model=\"quantity\"\r\n        class=\"form-control\"\r\n        placeholder = \"Enter Quantity\"\r\n        min=\"1\"\r\n        required\r\n    />\r\n    </div>\r\n    <div class=\"col-sm-5 mt-2\">\r\n        <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required>\r\n    </div>\r\n <div class=\"col-sm-2 mt-2\">\r\n         <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button type=\"submit\" class=\"mt-2  btn btn-primary ms-auto\">\r\n            Submit\r\n        </button>\r\n        </div>     \r\n    </div>\r\n    </div>\r\n   \r\n</div>\r\n</form>\r\n\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"labourCost\" :columns=\"costNoteColumns\" :options=\"table_option\">\r\n                                       <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                  {{ props.row.status.name }}\r\n                </span>\r\n                            </template>\r\n                            <template\r\n                             #actions=\"props\" >\r\n                                <div class=\"actions text-center\">\r\n                                   <a \r\n                                   v-if=\"props.row.status.name === 'Unapproved' && user_permissions.includes('can_delete_jobcard_items')\"\r\n                                   href=\"javascript:;\" class=\"cancel me-2\" @click=\"deleteCostNote(props.row.id)\" title=\"Delete Spare Usage Record\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                     <a\r\n                                       v-if=\"props.row.status.name === 'Unapproved'  && user_permissions.includes('can_edit_jobcard_items')\"\r\n                                     href=\"javascript:;\"  class=\"edit me-3\" @click=\"editLabour(props.row)\">\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n\r\n                                           <a href=\"javascript:;\"\r\n                                             data-bs-toggle=\"modal\" data-bs-target=\"#approval-voucher-form\"\r\n                                             @click=\"approveItem = props.row\"\r\n                                             class=\"text-primary\"\r\n                                           >\r\n                                          <svg\r\n\r\n                                               xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n\r\n                                        </a>\r\n\r\n                                        \r\n                                </div>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n            </div>\r\n             <!-- labours card ends -->\r\n                   <!-- body works card starts -->\r\n                  <div  class=\"col-md-12\" v-if=\"!summary\" >\r\n                        <h4 class=\"mt-4\">BODY WORKS </h4>\r\n                          <form\r\n  v-if=\"user_permissions.includes('can_approve_jobcard_requisition') \"\r\n   @submit.prevent=\"approveBulkItemUsage(bodyWorks)\">\r\n    <ApprovalBlock\r\n      v-model:blockValue=\"block\"\r\n      v-model:modelValue=\"status\"\r\n      v-model:remarkValue=\"remark\"\r\n      :spinner=\"spinner\"\r\n      :loadingSpinner=\"loadingSpinner\"\r\n    />\r\n  </form>\r\n                         <div class=\"d-flex mt-2\"\r\n                  v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                 >\r\n            <div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n            <button v-if=\"!add_body_works\" type=\"button\" class=\"btn btn-outline-primary mb-2\"  @click=\"add_body_works=!add_body_works,getVendors()\">\r\n                <template v-if=\"cn === 'body_works'\">\r\n                     <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n                </button>\r\n            <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_body_works=!add_body_works\">\r\n              X\r\n            </button>\r\n        </div>\r\n           </div>\r\n\r\n<form \r\nv-if=\"add_body_works\"\r\n@submit.prevent=\"registerItemUsage('body_works')\">\r\n<div class=\"row mb-4  w-100\">\r\n    <div class=\"col-sm-3\">\r\n        <Multiselect\r\n  v-model=\"spare_usage\"\r\n  :options=\"spares\"\r\n  :close-on-select=\"true\"\r\n  label=\"name\"\r\n  value-prop=\"id\"\r\n  placeholder=\"Select a spare\"  \r\n  :required=\"!machine_field\"\r\n  :searchable=\"true\" \r\n/>\r\n    </div>\r\n    <div class=\"col-sm-2\">\r\n    <input\r\n        type=\"number\"\r\n        v-model=\"usage_quantity\"\r\n        class=\"form-control\"\r\n        :placeholder=\"spare_usage ? 'Available ' + (spare_usage.balance_quantity ?? '') : 'Enter Quantity'\"\r\n        min=\"0\"\r\n        required\r\n        step=\"any\"\r\n    />\r\n    </div>\r\n    <div v-if=\"spare_usage\" class=\"col-sm-2\">\r\n      <label class=\"form-control\">Condition : {{ spare_usage.condition }}</label>\r\n    </div>\r\n    <div class=\"col-sm-2 \">\r\n        <input type=\"number\" v-model=\"rate\"\r\n         class=\"form-control\" placeholder=\"Enter Rate\"\r\n          min=\"0\" required step=\"any\">\r\n    </div>\r\n    <div class=\"col-sm-3\"\r\n    v-if=\"spare_usage.balance_quantity < usage_quantity\"\r\n    >\r\n        <Multiselect\r\n  v-model=\"vendor\"\r\n  :options=\"vendors\"\r\n  :close-on-select=\"true\"\r\n  label=\"name\"\r\n  value-prop=\"id\"\r\n  placeholder=\"Select a Vendor\"  \r\n  :required=\"!machine_field\"\r\n  :searchable=\"true\" \r\n/>\r\n</div>\r\n    <div class=\"col-sm-12 mt-2\">\r\n      <input type=\"text\" v-model=\"usage_description\" class=\"form-control\"\r\n       placeholder=\"Usage Descriptions\"\r\n       >\r\n    </div>\r\n    <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button type=\"submit\" class=\"mt-2  btn btn-primary ms-auto\" :disabled=\"!usage_quantity || !spare_usage || (!vendor && spare_usage.balance_quantity < usage_quantity )\">\r\n            Submit\r\n        </button>\r\n        </div>     \r\n    </div>\r\n</div>\r\n</form>\r\n\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"bodyWorks\" :columns=\"columns\" :options=\"table_option\">\r\n                              <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                  {{ props.row.status.name }}\r\n                </span>\r\n                            </template>\r\n                            <template\r\n                             #actions=\"props\" >\r\n                                <div class=\"actions text-center\">\r\n                                   <a href=\"javascript:;\" class=\"cancel me-2\" @click=\"deleteItemUsage(props.row.id)\" title=\"Delete Spare Usage Record\"\r\n                                     v-if=\"user_permissions.includes('can_delete_jobcard_items')\"\r\n                                   >\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                     <a href=\"javascript:;\"  class=\"edit me-2\" @click=\"editBodyWorks(props.row)\"\r\n                                       v-if=\"user_permissions.includes('can_edit_jobcard_items')\"\r\n                                     >\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n                                                 <a href=\"javascript:;\"  class=\"me-2 text-primary\" >\r\n                                            <svg\r\n                                    \r\n                                    data-bs-toggle=\"modal\" data-bs-target=\"#approval-form\"\r\n                                    @click=\"approveItem = props.row\"\r\n                                   \r\n                                    xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n                            \r\n                                        </a>\r\n                                </div>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n            </div>\r\n             <!-- body works card ends -->\r\n                   <!-- electric card starts -->\r\n                  <div v-if=\"!summary\" class=\"col-md-6\">\r\n                        <h4 class=\"mt-4\">ELECTRICAL WORKS</h4>\r\n                        <div class=\"d-flex mt-2\"\r\n                  v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                 >\r\n            <div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n            <button v-if=\"!add_electric\" type=\"button\" class=\"btn btn-outline-primary mb-2\"  @click=\"add_electric=!add_electric\">\r\n                <template v-if=\"cn === 'electric' && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n                </button>\r\n            <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_electric=!add_electric\">\r\n              X\r\n            </button>\r\n        </div>\r\n           </div>\r\n\r\n<form \r\nv-if=\"add_electric\"\r\n@submit.prevent=\"addCostNote('electric')\">\r\n    <div class=\"row mb-4 container\">\r\n    <div class=\"col-sm-7 mt-2\">\r\n      <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Descriptions\" required>\r\n    </div>\r\n\r\n     <div class=\"col-sm-5 mt-2\">\r\n      <input type=\"text\" v-model=\"beneficiary\" class=\"form-control\" placeholder=\"Enter Beneficiary\" required>\r\n    </div>\r\n            <div class=\"col-sm-5 mt-2\">\r\n    <input\r\n        type=\"number\"\r\n        v-model=\"quantity\"\r\n        class=\"form-control\"\r\n        placeholder = \"Enter Quantity\"\r\n        min=\"1\"\r\n        required\r\n    />\r\n    </div>\r\n    <div class=\"col-sm-5 mt-2\">\r\n        <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required>\r\n    </div>\r\n <div class=\"col-sm-2 mt-2\">\r\n         <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button type=\"submit\" class=\"mt-2  btn btn-primary ms-auto\">\r\n            Submit\r\n        </button>\r\n        </div>     \r\n    </div>\r\n    </div>\r\n   \r\n</div>\r\n</form>\r\n\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"electricalWorks\" :columns=\"costNoteColumns\" :options=\"table_option\">\r\n                            \r\n                                       <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                  {{ props.row.status.name }}\r\n                </span>\r\n                </template>\r\n                            <template\r\n                             #actions=\"props\" >\r\n                                <div class=\"actions text-center\">\r\n                                   <a href=\"javascript:;\" class=\"cancel me-2\" @click=\"deleteCostNote(props.row.id)\" title=\"Delete Spare Usage Record\"   v-if=\"user_permissions.includes('can_delete_jobcard_items')\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                     <a href=\"javascript:;\"  class=\"edit me-2\" @click=\"editElectricalWorks(props.row)\"\r\n                                       v-if=\"user_permissions.includes('can_edit_jobcard_items')\"\r\n                                     >\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n\r\n                                                                                   <a href=\"javascript:;\"\r\n                                             data-bs-toggle=\"modal\" data-bs-target=\"#approval-voucher-form\"\r\n                                             @click=\"approveItem = props.row\"\r\n                                             class=\"text-primary\"\r\n                                           >\r\n                                          <svg\r\n\r\n                                               xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n\r\n                                        </a>\r\n\r\n                                </div>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n            </div>\r\n             <!-- electric card ends -->\r\n             <!--   engineering work starts-->\r\n                              <div v-if=\"!summary\" class=\"col-md-6\">\r\n                        <h4 class=\"mt-4\">ENGINEERING WORKS</h4>\r\n                        <div class=\"d-flex mt-2\"\r\n                  v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                 >\r\n            <div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n            <button v-if=\"!add_engineering\" type=\"button\" class=\"btn btn-outline-primary mb-2\"  @click=\"add_engineering=!add_engineering\">\r\n                <template v-if=\"cn === 'engineering' && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n                </button>\r\n            <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_engineering=!add_engineering\">\r\n              X\r\n            </button>\r\n        </div>\r\n           </div>\r\n\r\n<form \r\nv-if=\"add_engineering\"\r\n@submit.prevent=\"addCostNote('engineering')\">\r\n    <div class=\"row mb-4 container\">\r\n    <div class=\"col-sm-7 mt-2\">\r\n      <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Descriptions\" required>\r\n    </div>\r\n\r\n     <div class=\"col-sm-5 mt-2\">\r\n      <input type=\"text\" v-model=\"beneficiary\" class=\"form-control\" placeholder=\"Enter Beneficiary\" required>\r\n    </div>\r\n            <div class=\"col-sm-5 mt-2\">\r\n    <input\r\n        type=\"number\"\r\n        v-model=\"quantity\"\r\n        class=\"form-control\"\r\n        placeholder = \"Enter Quantity\"\r\n        min=\"1\"\r\n        required\r\n    />\r\n    </div>\r\n    <div class=\"col-sm-5 mt-2\">\r\n        <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required>\r\n    </div>\r\n <div class=\"col-sm-2 mt-2\">\r\n         <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button type=\"submit\" class=\"mt-2  btn btn-primary ms-auto\">\r\n            Submit\r\n        </button>\r\n        </div>     \r\n    </div>\r\n    </div>\r\n   \r\n</div>\r\n</form>\r\n\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"engineeringWorks\" :columns=\"costNoteColumns\" :options=\"table_option\">\r\n                                             <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                  {{ props.row.status.name }}\r\n                </span>\r\n                </template>\r\n                            <template\r\n                             #actions=\"props\" >\r\n                                <div class=\"actions text-center\">\r\n                                   <a href=\"javascript:;\" class=\"cancel me-2\" @click=\"deleteCostNote(props.row.id)\" title=\"Delete Spare Usage Record\"\r\n                                     v-if=\"user_permissions.includes('can_delete_jobcard_items')\"\r\n                                   >\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                     <a href=\"javascript:;\"  class=\"edit me-2\" @click=\"editEngineeringWorks(props.row)\"\r\n                                       v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n                                                                                                 <a href=\"javascript:;\"\r\n                                             data-bs-toggle=\"modal\" data-bs-target=\"#approval-voucher-form\"\r\n                                             @click=\"approveItem = props.row\"\r\n                                             class=\"text-primary\"\r\n                                           >\r\n                                          <svg\r\n\r\n                                               xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n\r\n                                        </a>\r\n                                </div>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n            </div>\r\n                <!-- engineering work ends -->\r\n                 <!-- additional work starts-->\r\n                                <div v-if=\"!summary\" class=\"col-md-6\">\r\n                        <h4 class=\"mt-4\">ADDITIONAL WORKS (Others)</h4>\r\n                        <div class=\"d-flex mt-2\"\r\n                  v-if=\"jobcard?.status?.name !== 'Completed'\"\r\n                 >\r\n            <div class=\"ms-auto\"      v-if=\"user_permissions.includes('can_edit_jobcard_items')\">\r\n            <button v-if=\"!add_additional\" type=\"button\" class=\"btn btn-outline-primary mb-2\"  @click=\"add_additional=!add_additional\">\r\n                <template v-if=\"cn === 'additional' && loading_spinner\">\r\n                    <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </template>\r\n                <template v-else>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </template>\r\n                </button>\r\n            <button v-else type=\"button\" class=\"btn btn-danger mb-2\"  @click=\"add_additional=!add_additional\">\r\n              X\r\n            </button>\r\n        </div>\r\n           </div>\r\n\r\n<form \r\nv-if=\"add_additional\"\r\n@submit.prevent=\"addCostNote('additional')\">\r\n    <div class=\"row mb-4 container\">\r\n    <div class=\"col-sm-12 mt-2\">\r\n      <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Descriptions\" required>\r\n    </div>\r\n\r\n         <div class=\"col-sm-5 mt-2\">\r\n            <Multiselect\r\n                v-model=\"receiver_option\"\r\n                :options=\"['BENEFICIARY', 'VENDOR']\"\r\n                :close-on-select=\"true\"\r\n                placeholder=\"Select receiver\"\r\n                :searchable=\"true\"\r\n              />    </div>\r\n\r\n     <div class=\"col-sm-5 mt-2\" v-if=\"receiver_option ==='BENEFICIARY'\">\r\n      <input type=\"text\" v-model=\"beneficiary\" class=\"form-control\" placeholder=\"Enter Beneficiary\" required>\r\n    </div>\r\n\r\n        <div class=\"col-sm-5 mt-2\" v-if=\"receiver_option ==='VENDOR'\">\r\n            <Multiselect\r\n  v-model=\"vendor\"\r\n  :options=\"vendors\"\r\n  :close-on-select=\"true\"\r\n  label=\"name\"\r\n  value-prop=\"id\"\r\n  placeholder=\"Select a Vendor\"  \r\n  :required=\"!machine_field\"\r\n  :searchable=\"true\" \r\n/>    </div>\r\n\r\n\r\n            <div class=\"col-sm-5 mt-2\">\r\n    <input\r\n        type=\"number\"\r\n        v-model=\"quantity\"\r\n        class=\"form-control\"\r\n        placeholder = \"Enter Quantity\"\r\n        min=\"1\"\r\n        required\r\n    />\r\n    </div>\r\n\r\n            <div class=\"col-sm-5 mt-2\" >\r\n            <Multiselect\r\n  v-model=\"unit\"\r\n  :options=\"units\"\r\n  :close-on-select=\"true\"\r\n  label=\"short_name\"\r\n  placeholder=\"Select Unit\"  \r\n  :required=\"!machine_field\"\r\n  :searchable=\"true\" \r\n/>    </div>\r\n\r\n    <div class=\"col-sm-5 mt-2\">\r\n        <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required>\r\n    </div>\r\n <div class=\"col-sm-2 mt-2\">\r\n         <div class=\"d-flex\">\r\n        <div class=\"ms-auto\">\r\n            <button type=\"submit\" class=\"mt-2  btn btn-primary ms-auto\">\r\n            Submit\r\n        </button>\r\n        </div>     \r\n    </div>\r\n    </div>\r\n   \r\n</div>\r\n</form>\r\n\r\n<div class=\"row layout-top-spacing \">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table shadow\">\r\n                        <v-client-table :data=\"additionalWorks\" :columns=\"costNoteColumns\" :options=\"table_option\">\r\n                                              <template #status=\"props\">\r\n                               <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                  {{ props.row.status.name }}\r\n                </span>\r\n                </template>\r\n                            <template\r\n                             #actions=\"props\" >\r\n                                <div class=\"actions text-center\">\r\n                                   <a href=\"javascript:;\" class=\"cancel me-2\" @click=\"deleteCostNote(props.row.id)\" title=\"Delete Spare Usage Record\"   v-if=\"user_permissions.includes('can_delete_jobcard_items')\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                     <a href=\"javascript:;\"  class=\"edit me-2\" @click=\"editAdditionalWorks(props.row)\"\r\n                                       v-if=\"user_permissions.includes('can_edit_jobcard_items')\"\r\n                                     >\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n\r\n                                                                                                 <a href=\"javascript:;\"\r\n                                             data-bs-toggle=\"modal\" data-bs-target=\"#approval-voucher-form\"\r\n                                             @click=\"approveItem = props.row\"\r\n                                             class=\"text-primary\"\r\n                                           >\r\n                                          <svg\r\n\r\n                                               xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n\r\n                                        </a>\r\n                                </div>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n            </div>\r\n                  <!-- additional work ends -->\r\n      \r\n             <!-- cost note starts -->\r\n            <div class=\"col-md-6\">\r\n                        <h4 class=\"mt-4\">COST NOTE </h4>\r\n                      <ul class=\"list-group list-group-numbered shadow\">\r\n        <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"\">Spares : {{ costNote?.spares?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n\r\n          <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"\">Tyres : {{ costNote?.tyres?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n         <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"\">Body Works : {{ costNote?.body_works?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n\r\n         <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"\">Electrical Works : {{ costNote?.electrical_works?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n\r\n         <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"\">Labour Cost : {{ costNote?.labour?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n          <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"\">Engineering Works : {{ costNote?.engineering?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n          <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"\">Additional Costs : {{ costNote?.additional?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n           <li class=\"list-group-item d-flex justify-content-between align-items-start\">\r\n            <div class=\"ms-2 me-auto\">\r\n                <div class=\"fw-bold\">Total Cost : {{ costNote?.total?.toLocaleString() }}/=</div>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n            </div>\r\n                 <!-- cost note ends -->\r\n        </div>\r\n\r\n\r\n<!-- Edit Spares Modal -->\r\n<div class=\"modal fade mymodal\" id=\"edit-spares-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editSparesModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editSparesModalLabel\">Edit Spare Usage</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateItemUsage()\">\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n                <label for=\"spare_usage\">Spare</label>\r\n              <Multiselect\r\n                v-model=\"spare_usage\"\r\n                :options=\"spares\"\r\n                :close-on-select=\"true\"\r\n                label=\"name\"\r\n                value-prop=\"id\"\r\n                placeholder=\"Select a spare\"\r\n                :searchable=\"true\"\r\n              />\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"usage_quantity\">Quantity</label>                 \r\n              <input\r\n                type=\"number\"\r\n                v-model=\"usage_quantity\"\r\n                class=\"form-control\"\r\n                placeholder=\"Enter Quantity\"\r\n                min=\"0\"\r\n                required\r\n                step=\"any\"\r\n              />\r\n            </div>\r\n              <div class=\"col-md-4\">\r\n                <label for=\"rate\">Rate</label>                 \r\n              <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"0\" required step=\"any\">\r\n            </div>\r\n\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <label for=\"usage_description\">Usage Descriptions</label>                 \r\n              <input type=\"text\" v-model=\"usage_description\" class=\"form-control\" placeholder=\"Usage Descriptions\">\r\n            </div>            \r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Edit Tyres Modal -->\r\n<div class=\"modal fade mymodal\" id=\"edit-tyres-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editTyresModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editTyresModalLabel\">Edit Tyre Form</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"edit_tyre\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateTyre()\">\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n                <label for=\"tyre_no\">Tyre Number</label>\r\n              <input type=\"text\" v-model=\"tyre_no\" class=\"form-control\" placeholder=\"Tyre Number\" required>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"date_changed\">Date Changed</label>\r\n              <input type=\"date\" v-model=\"date_changed\" class=\"form-control\" placeholder=\"Date Changed\" required>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"rate\">Rate</label>\r\n              <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" required min=\"1\" step=\"any\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\"\r\n          :disabled=\"loading_spinner\"\r\n          >\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            <span v-else>\r\n                Edit\r\n            </span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Edit Labour Modal -->\r\n<div class=\"modal fade mymodal\" id=\"edit-labour-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editLabourModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editLabourModalLabel\">Edit Labour Cost</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateCostNote()\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row mb-3\">\r\n            <div class=\"col-sm-6\">\r\n                    <label for=\"quantity\">Quantity</label>\r\n              <input type=\"number\" v-model=\"quantity\" class=\"form-control\" placeholder=\"Enter Quantity\" min=\"1\" required>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n                    <label for=\"rate\">Rate</label>\r\n              <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required step=\"any\">\r\n            </div>\r\n          </div>\r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-sm-12\">\r\n              <label for=\"description\">Description</label>\r\n              <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Description\" required>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Edit Body Works Modal -->\r\n<div class=\"modal fade mymodal\" id=\"edit-bodyworks-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editBodyWorksModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editBodyWorksModalLabel\">Edit Body Works</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateItemUsage()\">\r\n        <div class=\"modal-body\">\r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-sm-8\">\r\n                <label for=\"spare_usage\">Spare</label>                 \r\n              <Multiselect\r\n                v-model=\"spare_usage\"\r\n                :options=\"spares\"\r\n                :close-on-select=\"true\"\r\n                label=\"name\"\r\n                value-prop=\"id\"\r\n                placeholder=\"Select a spare\"\r\n                :searchable=\"true\"\r\n              />\r\n            </div>\r\n            <div class=\"col-sm-4\">\r\n                <label for=\"usage_quantity\">Quantity</label>                 \r\n              <input\r\n                type=\"number\"\r\n                v-model=\"usage_quantity\"\r\n                class=\"form-control\"\r\n                placeholder=\"Enter Quantity\"\r\n                min=\"0\"\r\n                required\r\n                step=\"any\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-sm-8\">\r\n                <label for=\"usage_description\">Usage Descriptions</label>                 \r\n              <input type=\"text\" v-model=\"usage_description\" class=\"form-control\" placeholder=\"Usage Descriptions\">\r\n            </div>\r\n            <div class=\"col-sm-4\">\r\n                <label for=\"rate\">Rate</label>                 \r\n              <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required step=\"any\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Edit Electrical Works Modal -->\r\n<div class=\"modal fade mymodal\" id=\"edit-electrical-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editElectricalModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editElectricalModalLabel\">Edit Electrical Works</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateCostNote()\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row mb-3\">\r\n            <div class=\"col-sm-6\">\r\n                <label for=\"quantity\">Quantity</label>\r\n              <input type=\"number\" v-model=\"quantity\" class=\"form-control\" placeholder=\"Enter Quantity\" min=\"1\" required>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n                <label for=\"rate\">Rate</label>\r\n              <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required step=\"any\">\r\n            </div>\r\n          </div>\r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-sm-12\">\r\n                <label for=\"description\">Description</label>\r\n              <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Description\" required>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Edit Engineering Works Modal -->\r\n<div class=\"modal fade mymodal\" id=\"edit-engineering-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editEngineeringModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editEngineeringModalLabel\">Edit Engineering Works</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateCostNote()\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row mb-3\">\r\n            <div class=\"col-sm-6\">\r\n                <label for=\"quantity\">Quantity</label>\r\n              <input type=\"number\" v-model=\"quantity\" class=\"form-control\" placeholder=\"Enter Quantity\" min=\"1\" required>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n                <label for=\"rate\">Rate</label>\r\n              <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required step=\"any\">\r\n            </div>\r\n          </div>\r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-sm-12\">\r\n                <label for=\"description\">Description</label>\r\n              <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Description\" required>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Edit Additional Works Modal -->\r\n<div class=\"modal fade mymodal\" id=\"edit-additional-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editAdditionalModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editAdditionalModalLabel\">Edit Additional Works</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateCostNote()\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row mb-3\">\r\n            <div class=\"col-sm-6\">\r\n                <label for=\"quantity\">Quantity</label>\r\n              <input type=\"number\" v-model=\"quantity\" class=\"form-control\" placeholder=\"Enter Quantity\" min=\"1\" required>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n                <label for=\"rate\">Rate</label>\r\n              <input type=\"number\" v-model=\"rate\" class=\"form-control\" placeholder=\"Enter Rate\" min=\"1\" required step=\"any\">\r\n            </div>\r\n          </div>\r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-sm-12\">\r\n                <label for=\"description\">Description</label>\r\n              <input type=\"text\" v-model=\"description\" class=\"form-control\" placeholder=\"Description\" required>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n      <!-- Remark Modal starts -->\r\n  <div v-if=\"showRemarkModal\" class=\"modal fade show d-block\" role=\"dialog\" @click.self=\"closeRemarkModal\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-xl\">\r\n      <div class=\"modal-content d-flex flex-column\" style=\"height: 90vh;\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">Remarks for Jobcards </h5>\r\n          <button type=\"button\" class=\"btn-close\" @click=\"closeRemarkModal\"></button>\r\n        </div>\r\n        \r\n        <div class=\"modal-body flex-grow-1 p-3 p-md-4 bg-light\" style=\"overflow-y: auto;\">\r\n          <div v-if=\"isfetching\" class=\"d-flex justify-content-center align-items-center\" style=\"height: 100px;\">\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n        <div v-if=\"isLoading\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n        </div>\r\n            <div v-else>\r\n  <div v-if=\"remarks.length === 0\" class=\"text-center py-5\">\r\n              <div class=\"mb-3 text-muted\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" fill=\"currentColor\" class=\"bi bi-chat-square-text\" viewBox=\"0 0 16 16\">\r\n                  <path d=\"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n                  <path d=\"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z\"/>\r\n                </svg>\r\n              </div>\r\n              <p  class=\"text-muted\">No remarks yet. Be the first to add one!</p>\r\n            </div>\r\n            <div v-else class=\"chat-messages\">\r\n              <div v-for=\"(remark, index) in remarks\" :key=\"index\" class=\"mb-3\">\r\n                <!-- Current user's message (right aligned) -->\r\n                <div v-if=\"remark.remarker_id == user_id\" class=\"d-flex justify-content-end\" >\r\n                  <div class=\"chat-message-outgoing shadow text-dark\" style=\"background-color:#E9E9E9;max-width: 250px;\" >\r\n                    <div class=\"small d-flex justify-content-between mb-1 \">\r\n                      <span class=\"fw-bold mx-2 mt-1\">You</span>\r\n                      <span class=\" ms-2 mt-1\">{{ new Date(remark.created_at).toLocaleString() }}</span>\r\n                    </div>\r\n                    <div class=\"p-3 rounded-3 rounded-bottom-start-0 shadow-sm\">\r\n                      {{ remark.description }}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- Other user's message (left aligned) -->\r\n                <div v-else class=\"d-flex justify-content-start text-dark\" >\r\n                  <div class=\"chat-message-incoming shadow me-2\"  style=\"background-color:#E9E9E9\">\r\n                    <div class=\"small d-flex justify-content-between mb-1\">\r\n                      <span class=\"fw-bold mx-1 mt-1\">{{ remark.remarker || remark.sender_name }}</span>\r\n                      <span class=\"text-muted ms-2 mt-1\">{{ new Date(remark.created_at).toLocaleString() }}</span>\r\n                    </div>\r\n                    <div class=\"p-3  rounded-3 rounded-bottom-start-0 shadow-sm\">\r\n                      {{ remark.description }}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            </div>\r\n          \r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Form for adding a new remark - fixed at bottom -->\r\n        <div class=\"p-3 border-top bg-white\">\r\n          <form @submit.prevent=\"saveRemark\">\r\n            <div class=\"mb-3\">\r\n              <textarea \r\n                v-model=\"newremark\" \r\n                class=\"form-control\" \r\n                rows=\"2\" \r\n                placeholder=\"Type your remark here...\"\r\n              ></textarea>\r\n            </div>\r\n            <div class=\"d-flex justify-content-end gap-2\">\r\n              <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeRemarkModal\">\r\n                Close\r\n              </button>\r\n              <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSending || !newremark.trim()\">\r\n                <span v-if=\"isSending\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n                Save\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n     <!-- Modal Background Overlay -->\r\n     <div v-if=\"showRemarkModal\" class=\"modal-backdrop fade show\"></div>\r\n     <!-- lpo modal end -->\r\n<!-- remark modal ends -->\r\n<!-- item approve modal -->\r\n<div class=\"modal fade mymodal\" id=\"approval-form\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editSparesModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editSparesModalLabel\">JOBCARD SPARE REQUIRED APPROVAL</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"approval-close\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"approveItemUsage(approveItem)\">\r\n        <div class=\"modal-body\">\r\n         <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3 table-responsive\">\r\n<table class=\"table table-bordered table-striped\">\r\n      <thead >\r\n        <tr>\r\n          <th>Spare</th>\r\n          <th>Required</th>\r\n          <th>Available</th>\r\n          <th>Purchasable</th>\r\n          <th>Rate</th>\r\n          <th>Cost</th>\r\n          <th>Purchase Cost</th>\r\n          <th>Status</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr >\r\n          <td>{{ approveItem.spare }}</td>\r\n          <td>{{ approveItem.required }}</td>\r\n          <td>{{approveItem.available}}</td>\r\n          <td>{{approveItem.purchasable}}</td>\r\n          <td>{{approveItem.rate}}</td>\r\n          <td>{{approveItem.cost}}</td>\r\n          <td>{{approveItem.purchase_cost}}</td>\r\n          <td > <span class=\"mb-0 badge\" :class=\"`badge-${approveItem?.status?.color}`\">\r\n                  {{ approveItem?.status?.name }}\r\n                </span></td>\r\n        </tr>\r\n      <tr v-if=\"approveItem?.remark\">\r\n      <td colspan=\"8\"> <b> Remark :  </b> {{ approveItem?.remark }}</td>\r\n    </tr>\r\n    <tr v-if=\"approveItem?.description\">\r\n      <td colspan=\"8\"> <b>Brief Description :  </b> {{ approveItem?.description }}</td>\r\n    </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    </div>\r\n    </div>\r\n    </div>\r\n\r\n    \r\n            <div class=\"d-flex justify-content-center mb-2\" v-if=\"user_permissions.includes('can_approve_jobcard_requisition') && (approveItem?.status?.name !== 'approved' )\">\r\n    <div class=\"btn-group\" >\r\n            <button type=\"button\" class=\"btn btn-success me-2\" @click=\"status = 3\" :disabled=\"spinner\">\r\n              Approve\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-danger me-2\" @click=\"status = 4\" :disabled=\"spinner\">\r\n              Reject\r\n            </button>\r\n\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"status = 14\" :disabled=\"spinner\">\r\n              Remark\r\n            </button>\r\n          </div>\r\n            </div>\r\n   \r\n      <div v-if=\"status\" class=\"mb-2 text-center\">\r\n        <span\r\n          class=\"badge rounded-pill\"\r\n          :class=\"{\r\n            'bg-danger': status == 4,\r\n            'bg-success': status == 3,\r\n            'bg-info': status == 14\r\n          }\"\r\n          style=\"font-size: 1rem;\"\r\n        >\r\n          {{\r\n            status == 3\r\n              ? ' Approve Request'\r\n              : status == 4\r\n              ? 'Reject Request'\r\n              : 'Fill Remark'\r\n          }}\r\n        </span>\r\n      </div>\r\n\r\n<div class=\"input-group\"  v-if=\"status\">\r\n  <input type=\"text\" class=\"form-control\"\r\n    :placeholder=\"status == 3 ? 'Enter Approval Remark' : status == 4 ? 'Enter Rejection Remark' : 'Enter Remark'\" \r\n    v-model=\"remark\">\r\n  <button type=\"submit\" class=\"btn btn-primary me-2\" :disabled=\"spinner\">\r\n  <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n  <span v-else>Save</span>\r\n  </button>\r\n</div>\r\n\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- item approve modal ends -->\r\n <!-- voucher approve modal starts -->\r\n  <div class=\"modal fade mymodal\" id=\"approval-voucher-form\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editSparesModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editSparesModalLabel\">JOBCARD PAYMENT APPROVAL</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"approval-voucher-close\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"approveVoucher(approveItem)\">\r\n        <div class=\"modal-body\">\r\n        <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3 \">\r\n<table class=\"table table-bordered table-striped\">\r\n      <thead >\r\n        <tr>\r\n          <th>Description</th>\r\n          <th>Quantity</th>\r\n          <th>Rate</th>\r\n          <th>Cost</th>\r\n          <th>Status</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr >\r\n          <td>{{ approveItem.description }}</td>\r\n          <td>{{ approveItem.qty }}</td>\r\n          <td>{{approveItem.rate}}</td>\r\n          <td>{{approveItem.cost}}</td>\r\n          <td > <span class=\"mb-0 badge\" :class=\"`badge-${approveItem?.status?.color}`\">\r\n                  {{ approveItem?.status?.name }}\r\n                </span></td>\r\n        </tr>\r\n      <tr v-if=\"approveItem?.remark\">\r\n      <td colspan=\"7\"> <b> Remark :  </b> {{ approveItem?.remark }}</td>\r\n    </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    </div>\r\n    </div>\r\n    </div>\r\n\r\n          <div class=\"d-flex justify-content-center mb-2\" v-if=\"user_permissions.includes('can_approve_jobcard_requisition') && (approveItem?.status?.name === 'Unapproved' ||  approveItem?.status?.name === 'Remarked')\">\r\n    <div class=\"btn-group\" >\r\n            <button type=\"button\" class=\"btn btn-success me-2\" @click=\"status = 3\" :disabled=\"spinner\">\r\n              Approve\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-danger me-2\" @click=\"status = 4\" :disabled=\"spinner\">\r\n              Reject\r\n            </button>\r\n\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"status = 14\" :disabled=\"spinner\">\r\n              Remark\r\n            </button>\r\n          </div>\r\n            </div>\r\n   \r\n      <div v-if=\"status\" class=\"mb-2 text-center\">\r\n        <span\r\n          class=\"badge rounded-pill\"\r\n          :class=\"{\r\n            'bg-danger': status == 4,\r\n            'bg-success': status == 3,\r\n            'bg-info': status == 14\r\n          }\"\r\n          style=\"font-size: 1rem;\"\r\n        >\r\n          {{\r\n            status == 3\r\n              ? ' Approve Request'\r\n              : status == 4\r\n              ? 'Reject Request'\r\n              : 'Fill Remark'\r\n          }}\r\n        </span>\r\n      </div>\r\n\r\n<div class=\"input-group\"  v-if=\"status\">\r\n  <input type=\"text\" class=\"form-control\"\r\n    :placeholder=\"status == 3 ? 'Enter Approval Remark' : status == 4 ? 'Enter Rejection Remark' : 'Enter Remark'\" \r\n    v-model=\"remark\">\r\n  <button type=\"submit\" class=\"btn btn-primary me-2\" :disabled=\"spinner\">\r\n  <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n  <span v-else>Save</span>\r\n  </button>\r\n</div>\r\n\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\">Close</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n  <!-- voucher approve modal ends -->\r\n\r\n       </div>\r\n\r\n\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject, computed,watch } from 'vue';\r\n    import { useRoute,useRouter } from 'vue-router';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import ApprovalBlock from '@/components/reusables/ApprovalBlock.vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    useMeta({ title: 'Jobcard' });\r\n  const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n\r\n \r\nconst addOutsideMaintenance = async () =>{\r\n    loading_spinner.value = 'maintenance'\r\n    const payload = {\r\n       jobcard_id : route.params.jobcard_id,\r\n       item: item.value,\r\n       description : description.value,\r\n       quantity : quantity.value,\r\n       vendor_id :vendor.value.id\r\n    }\r\n\r\n    try{\r\n       const response = await axiosInstance.post('outside-maintenances',payload)\r\n       getOutsideMaintenance()\r\n       showMessage('Maintenance Saved')\r\n       clearForm()\r\n    }catch(error){\r\n      showError(error.message)\r\n      console.log(error)\r\n    }finally{\r\n       loading_spinner.value = ''\r\n    }\r\n\r\n}\r\n\r\nconst outsideMaintenance = ref([])\r\nconst outsideMaintenanceColumns = ref(['Sno', 'item','description','quantity','vendor','status']);\r\n\r\nconst spinner = ref(false)\r\n \r\n  const remarks = ref([])\r\nconst selectedLpoId = ref(null);\r\nconst selectedLpo = ref(null);\r\n\r\n\r\n  const status = ref('')\r\n  const remark = ref('');\r\n  const approveItemUsage = async(item)=>{\r\n    spinner.value = true\r\n    const payload = {\r\n        status_id : status.value,\r\n        remark : remark.value,\r\n        vendor_id : item.vendor_id,\r\n        type :{\r\n            type : 'jobcard',\r\n            type_id : jobcard.value.id,\r\n        },\r\n        requisition : {\r\n         description : \"Purchase Requisition from jobcard No.\"+ jobcard.value.id + ' for ' + jobcard?.value?.machine?.category?.name + ' '+ jobcard?.value?.machine?.name + ' type '+jobcard?.value?.machine?.type_name,\r\n         requester_id: jobcard?.value?.issuer_id ?? 22,\r\n         approval_group_id : 11,\r\n         status_id : 3\r\n        },\r\n        items : [\r\n            {\r\n            item_id: item.id,\r\n            quantity: item.purchasable,\r\n            rate: item.rate_original,\r\n            remark: item.spare,\r\n            description: item.description,\r\n            units: item.unit,\r\n            vendor_id : item.vendor_id,\r\n            asset_id : jobcard?.value?.machine?.id ,\r\n            }\r\n        ]\r\n    }\r\n\r\n    //   console.log(payload)\r\n    // return ;\r\n\r\n    try{\r\n    const response = await axiosInstance.put(`update-jobcard-item-usage/${item.id}`,payload)\r\n    showMessage('confirmed!')\r\n    getCostNote()\r\n    document.getElementById('approval-close').click()\r\n    status.value = ''\r\n    remark.value = ''\r\n    }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n    }finally{\r\n        spinner.value = false\r\n    }\r\n  }\r\n\r\n  \r\n\r\n const block = ref(false)\r\n  const approveBulkItemUsage = async (items) => {\r\n  spinner.value = true\r\n\r\n  const payload = {\r\n    status_id: status.value,\r\n    remark: remark.value,\r\n    type: {\r\n      type: 'jobcard',\r\n      type_id: jobcard.value.id,\r\n    },\r\n    requisition: {\r\n      description: \"Purchase Requisition from jobcard No.\" + jobcard.value.id +\r\n        ' for ' + jobcard?.value?.machine?.category?.name + ' ' +\r\n        jobcard?.value?.machine?.name + ' type ' +\r\n        jobcard?.value?.machine?.type_name,\r\n      requester_id: jobcard?.value?.issuer_id ?? 22,\r\n      approval_group_id: 11,\r\n      status_id: 3\r\n    },\r\n    items: items\r\n      .filter(item => item.status.id === 2)\r\n      .map(item => ({\r\n        item_id: item.id,\r\n        quantity: item.purchasable,\r\n        rate: item.rate_original,\r\n        remark: item.spare,\r\n        description: item.description,\r\n        units: item.unit,\r\n        asset_id: jobcard?.value?.machine?.id,\r\n        vendor_id: item.vendor_id,\r\n        status_id: status.value\r\n      }))\r\n  }\r\n\r\n  try {\r\n    await axiosInstance.put(`update-bulk-jobcard-item-usage`, payload)\r\n    showMessage('confirmed!')\r\n    getCostNote()\r\n\r\n    status.value = ''\r\n    remark.value = ''\r\n    block.value = false\r\n\r\n    const modalEl = document.getElementById('approvalModal')\r\n    if (modalEl) {\r\n      const modalInstance = bootstrap.Modal.getInstance(modalEl)\r\n      modalInstance?.hide()\r\n    }\r\n\r\n  } catch (error) {\r\n    showError(error.message)\r\n    console.log(error)\r\n  } finally {\r\n    spinner.value = false\r\n  }\r\n}\r\n\r\n\r\n    const approveVoucher = async(item)=>{\r\n    spinner.value = true\r\n    const payload = {\r\n        status_id : status.value,\r\n        remark : remark.value,\r\n        beneficiary :item.beneficiary,\r\n        vendor_id : item.vendor_id,\r\n        type :{\r\n            type : 'jobcard',\r\n            type_id : jobcard.value.id,\r\n        },\r\n        requisition : {\r\n         description : \"Payment Requisition from jobcard No.\"+ jobcard.value.id + ' for ' + jobcard.value.machine.category?.name + ' '+ jobcard.value.machine?.name + ' type '+ jobcard.value.machine?.type_name,\r\n         requester_id: jobcard?.value?.issuer_id ?? 22,\r\n         approval_group_id : 12,\r\n         status_id : 3,\r\n         remark : remark.value\r\n        },\r\n        items : [\r\n            {\r\n            item_id: item.id,\r\n            quantity: item.qty,\r\n            rate: item.rate_original,\r\n            remark: 'Jobcard Cost' + (item.beneficiary ? ' (' + item.beneficiary + ')' : ''),\r\n            description: item.description,\r\n            units: item.unit,\r\n            asset_id : jobcard.value.machine.id ,\r\n            vendor_id : item.vendor_id,\r\n            beneficiary :item.beneficiary,\r\n            }\r\n        ]\r\n    }\r\n     \r\n//   console.log(payload)\r\n//     return ;\r\n    try{\r\n    const response = await axiosInstance.put(`update-jobcard-cost-note/${item.id}`,payload)\r\n    showMessage('confirmed!')\r\n    getCostNote()\r\n    document.getElementById('approval-voucher-close').click()\r\n    status.value = ''\r\n    remark.value = ''\r\n    }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n    }finally{\r\n        spinner.value = false\r\n    }\r\n  }\r\n\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    const isSending = ref(false);\r\n    const user_id = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const formatNumber = inject('formatNumber');\r\n    const tyre_no = ref('');\r\n    const date_changed = ref('');\r\n    const date_removed = ref('');\r\n    const add_tyre = ref(false);\r\n    const Tyres = ref([]);\r\n    const outside_maintenance = ref(false)\r\n    const completing = ref(false)\r\n    const d = ref(false);\r\n    const w = ref(false);\r\n    const s = ref(false);\r\n    const approveItem = ref('')\r\n    const summary = ref(false);\r\n    const mail = ref(false);\r\n    const add_defect = ref(false);\r\n    const add_work = ref(false);\r\n    const add_body_works = ref(false);\r\n    const add_usage=ref(false);\r\n    const defects = ref([]);\r\n    const work_carried_out = ref([]);\r\n    const workdone_description = ref('');\r\n    const defect_description = ref('');\r\n    const spare_usage=ref('');\r\n    const usage_quantity=ref(null);\r\n    const usage_description = ref(''); \r\n    const loading_spinner = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const formatDate = inject('formatDate')\r\n    const items = ref([]);\r\n    const add_labour_cost = ref(false);\r\n    const spares_title = ref('SPARES REQUIRED');\r\n    const rate = ref(null);\r\n    const add_electric = ref(false);\r\n    const add_engineering = ref(false);\r\n    const add_additional = ref(false);\r\n    const changeSparesTitle = () => {\r\n         if (spares_title.value === 'SPARES USED') {\r\n            spares_title.value = 'SPARES REQUIRED';\r\n         }else {\r\n            spares_title.value = 'SPARES USED';\r\n         }\r\n    };\r\nconst columns = computed(() => [\r\n  'SNo',\r\n  'spare',\r\n  'unit',\r\n  'required',\r\n  'available',\r\n  'purchasable',\r\n  'rate',\r\n  'cost',\r\n  'purchase_cost',\r\n  'remark',\r\n  'description',\r\n  'status',\r\n  ...(jobcard.value?.status_name === 'Active' ? ['actions'] : [])\r\n]);\r\nconst costNoteColumns = computed(() => [\r\n  'SNo',\r\n  'description',\r\n  'beneficiary',\r\n  'qty',\r\n  'rate',\r\n  'cost',\r\n  'status',\r\n  ...(jobcard.value?.status_name === 'Active' ? ['actions'] : [])\r\n]);\r\nconst Tyrescolumns = computed(()=>['SNo', 'tyre_no','rate','date_changed',...(jobcard.value?.status_name === 'Active' ? ['actions'] : [])]);\r\n\r\n\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'spare'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n\r\nconst updateJobcard = async (status) => {\r\n    completing.value = true\r\n    try {\r\n        const payload = {\r\n            status_id:status\r\n        };\r\n        await axiosInstance.put(`/job-card/${route.params.jobcard_id}`, payload);\r\n        showMessage(\"Card Updated successfully\");\r\n        getJobcard()\r\n        completing.value = false;\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error)\r\n      completing.value = false\r\n    }\r\n};\r\n\r\nconst DeactivateJobcard = async () => {\r\n    completing.value = true\r\n    try {\r\n        const payload = {\r\n            status_name: \"Active\",\r\n            status_color: \"primary\",\r\n            status_id:6\r\n\r\n        };\r\n        await axiosInstance.put(`/job-card/${route.params.jobcard_id}`, payload);\r\n        jobcard.value.status_name = 'Active';\r\n        showMessage(\"Card Deactivated successfully\");\r\n        completing.value = false;\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error)\r\n      completing.value = false\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\nconst receiver = ref('');\r\nconst sendingMail = ref(false);\r\nconst sendMail = async () =>{\r\n    sendingMail.value = true;\r\n    if(receiver.value === ''){\r\n        showError(\"Please enter a receiver email\");\r\n        sendingMail.value = false;\r\n        return; \r\n    }\r\n     const payload ={\r\n        jobcard_id: route.params.jobcard_id,\r\n        receiver : receiver.value,\r\n     }\r\n\r\n    try {\r\n        const response = await axiosInstance.post('/jobcard-mail', payload);\r\n        sendingMail.value = false;\r\n        showMessage(\"Mail sent successfully\");\r\n        sendingMail.value = false;\r\n        receiver.value = ''; \r\n        mail.value = false;\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.error(error);\r\n        sendingMail.value = false;\r\n        mail.value = false;\r\n    }\r\n}\r\n\r\n\r\n\r\nconst updateDefectStatus = async (defect) => {\r\n   d.value=true;\r\n    loading_spinner.value=true;\r\n    try {\r\n        const payload = {\r\n            status_id: 1,\r\n        };\r\n        await axiosInstance.put(`/maintainance-log/${defect.id}`, payload);\r\n        defect.status_id = 1; \r\n        showMessage(\"Defect status updated successfully\");\r\n        loading_spinner.value = false;\r\n        d.value=false;\r\n    } catch (error) {\r\n        showError(error.message);\r\n      d.value=false;\r\n    }\r\n};\r\n\r\n    const route = useRoute();\r\n    const jobcard = ref({});\r\n    const getJobcard = async () => {\r\n        loading_spinner.value=true;\r\n        try{\r\n            const response = await axiosInstance.get(`/job-card/${route.params.jobcard_id}`)\r\n            jobcard.value = response.data\r\n            //defects and work carried out\r\n            const maintainanceLogs = jobcard.value.maintainance_logs\r\n            defects.value = maintainanceLogs.filter(log => log.issue_type === 'defect');\r\n            work_carried_out.value = maintainanceLogs.filter(log => log.issue_type === 'work_done');\r\n            \r\n            //cost notes\r\n            const costNotes = jobcard.value.cost_notes\r\n            //labour cost\r\n            labourCost.value = costNotes.filter(note => note.costnote_type === 'labour').map((item, index) => ({\r\n            ...item,\r\n            SNo: index + 1,\r\n            qty: item.quantity,\r\n            rate: item.rate.toLocaleString() + '/=',\r\n            rate_original : item.rate,\r\n            cost: (item.quantity * item.rate).toLocaleString() + '/=',\r\n        }));;\r\n           //electric works\r\n          electricalWorks.value = costNotes.filter(note => note.costnote_type === 'electric').map((item, index) => ({\r\n            ...item,\r\n            SNo: index + 1,\r\n            qty: item.quantity,\r\n            rate: item.rate.toLocaleString() + '/=',\r\n            rate_original : item.rate,\r\n            cost: (item.quantity * item.rate).toLocaleString() + '/=',\r\n        }));\r\n\r\n        //engineering works\r\n          engineeringWorks.value = costNotes.filter(note => note.costnote_type === 'engineering').map((item, index) => ({\r\n            ...item,\r\n            SNo: index + 1,\r\n            qty: item.quantity,\r\n            rate: item.rate.toLocaleString() + '/=',\r\n            rate_original : item.rate,\r\n            cost: (item.quantity * item.rate).toLocaleString() + '/=',\r\n        }));\r\n\r\n        //additional works\r\n        additionalWorks.value = costNotes.filter(note => note.costnote_type === 'additional').map((item, index) => ({\r\n            ...item,\r\n            SNo: index + 1,\r\n            qty: item.quantity,\r\n            rate: item.rate.toLocaleString() + '/=',\r\n            rate_original : item.rate,\r\n            cost: (item.quantity * item.rate).toLocaleString() + '/=',\r\n        }));\r\n    \r\n        //outside maintainances\r\n        outsideMaintenance.value = response.data.outside_maintenances.map((item,index)=>({\r\n      ...item,\r\n      Sno :index +1,\r\n      vendor: item.vendor.name,\r\n    }))\r\n         \r\n\r\n\r\n        }catch(error){\r\n            showError(error.message);\r\n            console.log(error)\r\n           \r\n        }finally{\r\n          loading_spinner.value=false;\r\n        }\r\n    }\r\n\r\n\r\n    const registerDefect = async () => {\r\n        d.value=true;\r\n        loading_spinner.value=true;\r\n        add_defect.value = false;\r\n        try {\r\n            const payload = {\r\n                job_card_id: jobcard.value.id,\r\n                issue_type: 'defect',\r\n                description: defect_description.value,\r\n                reported_by:JSON.parse(localStorage.getItem(\"user\")).name,\r\n                status_id: 0,\r\n            };\r\n            const response = await axiosInstance.post('/maintainance-log', payload);\r\n            getJobcard();\r\n            defect_description.value='';\r\n            showMessage(\"Defect registered successfully\");\r\n            loading_spinner.value=false;\r\n        } catch (error) {\r\n            showError(error.message);\r\n            console.log(error)\r\n            d.value=false;\r\n            loading_spinner.value=false;\r\n        }\r\n    };\r\n\r\n    \r\n    const registerWorkDone = async () => {\r\n        w.value=true;\r\n        add_work.value=!add_work.value;\r\n        loading_spinner.value=true;\r\n        try {\r\n            const payload = {\r\n                job_card_id: jobcard.value.id,\r\n                issue_type: 'work_done',\r\n                description: workdone_description.value,\r\n                reported_by:JSON.parse(localStorage.getItem(\"user\")).name,\r\n                status_id: 1,\r\n            };\r\n            const response = await axiosInstance.post('/maintainance-log', payload);\r\n            getJobcard();\r\n            showMessage(\"Work Carried registered successfully\");\r\n            workdone_description.value='';\r\n            w.value=false;\r\n            loading_spinner.value=false;\r\n        } catch (error) {\r\n            showError(error.message);\r\n             console.log(error)\r\n            w.value=false;\r\n            loading_spinner.value=false;\r\n        }\r\n    };\r\n\r\n    const date = ref('')\r\n    const registerItemUsage = async (type) => {\r\n      spared.value = false\r\n        if(type === 'tyres'){\r\n            usage_quantity.value = 1\r\n        }\r\n        cn.value=type;\r\n        add_usage.value=false;\r\n        add_body_works.value = false;\r\n        loading_spinner.value=true;\r\n        s.value=true;\r\n        add_tyre.value = false\r\n        try {\r\n            const usageData = {\r\n                usage_type: type,\r\n                source : 1,\r\n                date:date.value,\r\n                source_id: spare_usage.value.id,\r\n                category: 'jobcard',\r\n                category_id: jobcard.value.id,\r\n                description: usage_description.value,\r\n                item_condition : 'used',\r\n                store_id : 1,\r\n                item_id:spare_usage.value.id,\r\n                quantity:usage_quantity.value,\r\n                rate: rate.value,\r\n                vendor_id : vendor.value.id ?? '',\r\n                unit : unit.value.short_name\r\n            };\r\n            const response = await axiosInstance.post('/item-usage', usageData);\r\n            getCostNote();\r\n            getSpares();\r\n            showMessage(\"Item usage registered successfully\");\r\n            spare_usage.value='';\r\n            usage_description.value='';\r\n            spare_usage.value='';\r\n            rate.value = ''\r\n            usage_quantity.value=null;\r\n            loading_spinner.value=false;\r\n            unit.value = '';\r\n            vendor.value = '';\r\n            s.value=false;\r\n            cn.value= '';\r\n        } catch (error) {\r\n            console.log(error)\r\n            showError(error.message);\r\n            cn.value= '';\r\n            s.value=false;\r\n            loading_spinner.value=false;\r\n        }\r\n    };\r\n\r\n\r\nconst tyres = ref([]);\r\n\r\n\r\n    const getItemUsage = async () => {\r\n        try {\r\n            const response = await axiosInstance.get(`/jobcard-item-usage?jobcard_id=${route.params.jobcard_id}`);\r\nconst itemUsages =  response.data.map((item, index) => ({\r\n    ...item,\r\n    SNo: index + 1,\r\n    id: item.id,\r\n    required: item.quantity,\r\n    available: Math.max(item.store_quantity, 0),\r\n    purchasable: item.store_quantity - item.quantity < 0 \r\n        ? Math.abs(item.store_quantity - item.quantity) \r\n        : 0,\r\n    purchase_cost : formatNumber((item.store_quantity - item.quantity < 0 \r\n        ? Math.abs(item.store_quantity - item.quantity) \r\n        : 0) * item.rate), \r\n    rate: Number(item.rate).toLocaleString() + '/=',\r\n    rate_original : item.rate,\r\n    cost: (item.quantity * item.rate).toLocaleString() + '/=',\r\n    spare: item.item_name,\r\n    unit: item.unit ?? 'nill'\r\n}));\r\n\r\n//items used\r\nitems.value = itemUsages.filter(note => note.usage_type === 'spares')\r\n\r\nbodyWorks.value = itemUsages.filter(note => note.usage_type === 'body_works')\r\ntyres.value = itemUsages.filter(note => note.usage_type === 'tyres').map((item, index) => ({\r\n        ...item, \r\n        SNo: index + 1,\r\n        id:item.id,\r\n        tyre_no : item.description,\r\n        date_changed :item.date,\r\n        rate: item.rate.toLocaleString() +'/=',\r\n        cost : (item.quantity * item.rate).toLocaleString() + '/=',\r\n    }));\r\n\r\n        } catch (error) {\r\n             console.log(error)\r\n            showError( error.message);\r\n            loading_spinner.value=false;\r\n        }\r\n    };\r\n\r\n//tyres used \r\n\r\n\r\nconst spares = ref([]);\r\nconst spared= ref(false)\r\nconst getSpares = async () => {\r\nif (spared.value == false){\r\nspared.value = true\r\nconst response = await axiosInstance.get(`get-store-items?store_id=1`);\r\nspares.value = response.data.map((item) => ({\r\n  ...item,\r\n  name: item.name + (item.description ? ' - ' + item.description : '')\r\n}));\r\n}\r\n\r\n};\r\n\r\nconst deleting = ref('')\r\nconst deleteLog = async (id) => {\r\n    deleting.value = id;\r\n    if (confirm(\"Are you sure you want to delete this log?\")) {\r\n        await axiosInstance.delete(`/maintainance-log/${id}`);\r\n        await getJobcard();\r\n        deleting.value= '';\r\n        showMessage('deleted')\r\n    }else{\r\n        deleting.value= ''; \r\n        showMessage('Cancelled')\r\n    }\r\n};\r\n\r\n\r\n\r\nconst deleteCostNote = async (id) => {\r\n    if (window.Swal) {\r\n        window.Swal.fire({\r\n            title: 'Delete Cost Note',\r\n            text: 'Are you sure you want to delete this cost note?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Delete'\r\n        }).then(async (result) => {\r\n            if (result.isConfirmed) {\r\n                try {\r\n                    const payload = {\r\n                        deleted: 1,\r\n                        deleted_by_id: JSON.parse(localStorage.getItem(\"user\")).id\r\n                    }\r\n                    await axiosInstance.patch(`/cost-notes/${id}`, payload);\r\n                    showMessage(\"Deleted Successfully\");\r\n                    await getCostNote();\r\n                    getJobcard()\r\n                } catch (error) {\r\n                    showError(error.message);\r\n                    console.log(error);\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\nconst labourCost = ref([])\r\n\r\n// Edit functionality variables\r\nconst editMode = ref(false);\r\nconst editItemId = ref(null);\r\nconst editType = ref('');\r\n\r\n// Edit functions for all tables\r\nconst editItemUsage = (item) => {\r\n    editMode.value = true;\r\n    editItemId.value = item.id;\r\n    editType.value = 'spares';\r\n    spare_usage.value = { id: item.item_id, name: item.spare };\r\n    usage_quantity.value = item.qty;\r\n    usage_description.value = item.description;\r\n    rate.value = parseFloat(item.rate.replace(/[^\\d.]/g, ''));\r\n\r\n    // Show modal\r\n    setTimeout(() => {\r\n        const modalElement = document.getElementById('edit-spares-modal');\r\n        if (modalElement) {\r\n            const modal = new window.bootstrap.Modal(modalElement);\r\n            modal.show();\r\n        }\r\n    });\r\n};\r\n\r\nconst editTyres = (item) => {\r\n    editMode.value = true;\r\n    editItemId.value = item.id;\r\n    editType.value = 'tyres';\r\n    tyre_no.value = item.tyre_no;\r\n    date_changed.value = item.date_changed;\r\n    rate.value = parseFloat(item.rate.replace(/[^\\d.]/g, ''));\r\n\r\n    // Show modal\r\n    setTimeout(() => {\r\n        const modalElement = document.getElementById('edit-tyres-modal');\r\n        if (modalElement) {\r\n            const modal = new window.bootstrap.Modal(modalElement);\r\n            modal.show();\r\n        }\r\n    });\r\n};\r\n\r\nconst editLabour = (item) => {\r\n    editMode.value = true;\r\n    editItemId.value = item.id;\r\n    editType.value = 'labour';\r\n    description.value = item.description;\r\n    quantity.value = item.qty;\r\n    rate.value = parseFloat(item.rate.replace(/[^\\d.]/g, ''));\r\n\r\n    // Show modal\r\n    setTimeout(() => {\r\n        const modalElement = document.getElementById('edit-labour-modal');\r\n        if (modalElement) {\r\n            const modal = new window.bootstrap.Modal(modalElement);\r\n            modal.show();\r\n        }\r\n    });\r\n};\r\n\r\nconst editBodyWorks = (item) => {\r\n    editMode.value = true;\r\n    editItemId.value = item.id;\r\n    editType.value = 'body_works';\r\n    spare_usage.value = { id: item.item_id, name: item.spare };\r\n    usage_quantity.value = item.qty;\r\n    usage_description.value = item.description;\r\n    rate.value = parseFloat(item.rate.replace(/[^\\d.]/g, ''));\r\n\r\n    // Show modal\r\n    setTimeout(() => {\r\n        const modalElement = document.getElementById('edit-bodyworks-modal');\r\n        if (modalElement) {\r\n            const modal = new window.bootstrap.Modal(modalElement);\r\n            modal.show();\r\n        }\r\n    });\r\n};\r\n\r\nconst editElectricalWorks = (item) => {\r\n    editMode.value = true;\r\n    editItemId.value = item.id;\r\n    editType.value = 'electric';\r\n    description.value = item.description;\r\n    quantity.value = item.qty;\r\n    rate.value = parseFloat(item.rate.replace(/[^\\d.]/g, ''));\r\n\r\n    // Show modal\r\n    setTimeout(() => {\r\n        const modalElement = document.getElementById('edit-electrical-modal');\r\n        if (modalElement) {\r\n            const modal = new window.bootstrap.Modal(modalElement);\r\n            modal.show();\r\n        }\r\n    });\r\n};\r\n\r\nconst editEngineeringWorks = (item) => {\r\n    editMode.value = true;\r\n    editItemId.value = item.id;\r\n    editType.value = 'engineering';\r\n    description.value = item.description;\r\n    quantity.value = item.qty;\r\n    rate.value = parseFloat(item.rate.replace(/[^\\d.]/g, ''));\r\n\r\n    // Show modal\r\n    setTimeout(() => {\r\n        const modalElement = document.getElementById('edit-engineering-modal');\r\n        if (modalElement) {\r\n            const modal = new window.bootstrap.Modal(modalElement);\r\n            modal.show();\r\n        }\r\n    });\r\n};\r\n\r\nconst editAdditionalWorks = (item) => {\r\n    editMode.value = true;\r\n    editItemId.value = item.id;\r\n    editType.value = 'additional';\r\n    description.value = item.description;\r\n    quantity.value = item.qty;\r\n    rate.value = parseFloat(item.rate.replace(/[^\\d.]/g, ''));\r\n\r\n    // Show modal\r\n    setTimeout(() => {\r\n        const modalElement = document.getElementById('edit-additional-modal');\r\n        if (modalElement) {\r\n            const modal = new window.bootstrap.Modal(modalElement);\r\n            modal.show();\r\n        }\r\n    });\r\n};\r\n\r\n// Update functions\r\nconst updateItemUsage = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const payload = {\r\n            usage_type: editType.value,\r\n            jobcard_id: route.params.jobcard_id,\r\n            description: usage_description.value,\r\n            item_id: spare_usage.value.id,\r\n            quantity: usage_quantity.value,\r\n            rate: rate.value,\r\n        };\r\n\r\n        await axiosInstance.put(`update-jobcard-usage/${editItemId.value}`, payload);\r\n        getCostNote();\r\n        getSpares();\r\n        showMessage(\"Item updated successfully\");\r\n\r\n        // Close the appropriate modal\r\n        const modalId = editType.value === 'spares' ? 'edit-spares-modal' : 'edit-bodyworks-modal';\r\n        const modalElement = document.getElementById(modalId);\r\n        if (modalElement) {\r\n            const modal = window.bootstrap.Modal.getInstance(modalElement);\r\n            if (modal) {\r\n                modal.hide();\r\n            }\r\n        }\r\n        closeEditModal();\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error)\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\nconst updateTyre = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const payload = {\r\n            asset_id: route.params.machine_id,\r\n            jobcard_id: route.params.jobcard_id,\r\n            tyre_no: tyre_no.value,\r\n            rate: rate.value,\r\n            date_changed: date_changed.value,\r\n        };\r\n\r\n        await axiosInstance.put(`/edit-jobcard-item-usage/${editItemId.value}`, payload);\r\n        document.getElementById('edit_tyre').click()\r\n        getCostNote();\r\n        showMessage(\"Tyre updated successfully\");\r\n\r\n        // Close the tyres modal\r\n        const modalElement = document.getElementById('edit-tyres-modal');\r\n        if (modalElement) {\r\n            const modal = window.bootstrap.Modal.getInstance(modalElement);\r\n            if (modal) {\r\n                modal.hide();\r\n            }\r\n        }\r\n        closeEditModal();\r\n    } catch (error) {\r\n        showError(error.message);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\nconst updateCostNote = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const payload = {\r\n            jobcard_id: route.params.jobcard_id,\r\n            type: editType.value,\r\n            description: description.value,\r\n            quantity: quantity.value,\r\n            rate: rate.value,\r\n        };\r\n\r\n        await axiosInstance.put(`/cost-notes/${editItemId.value}`, payload);\r\n        getCostNote();\r\n        showMessage(\"Cost note updated successfully\");\r\n\r\n        // Close the appropriate cost note modal\r\n        let modalId = '';\r\n        switch(editType.value) {\r\n            case 'labour':\r\n                modalId = 'edit-labour-modal';\r\n                break;\r\n            case 'electric':\r\n                modalId = 'edit-electrical-modal';\r\n                break;\r\n            case 'engineering':\r\n                modalId = 'edit-engineering-modal';\r\n                break;\r\n            case 'additional':\r\n                modalId = 'edit-additional-modal';\r\n                break;\r\n        }\r\n\r\n        if (modalId) {\r\n            const modalElement = document.getElementById(modalId);\r\n            if (modalElement) {\r\n                const modal = window.bootstrap.Modal.getInstance(modalElement);\r\n                if (modal) {\r\n                    modal.hide();\r\n                }\r\n            }\r\n        }\r\n        closeEditModal();\r\n    } catch (error) {\r\n        showError(error.message);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\nconst closeEditModal = () => {\r\n    editMode.value = false;\r\n    editItemId.value = null;\r\n    editType.value = '';\r\n    clearForm();\r\n};\r\n\r\nconst electricalWorks = ref([]);\r\n\r\n\r\nconst bodyWorks = ref([]);\r\n\r\n\r\n\r\n\r\nconst engineeringWorks = ref([]);\r\n\r\n\r\nconst additionalWorks = ref([]);\r\n\r\nconst costNote = ref('');\r\nconst getCostNote = async () =>{\r\n        getItemUsage();\r\n        getJobcard()\r\n    try {\r\n        const response = await axiosInstance.get(`/cost-note-summary?jobcard_id=${route.params.jobcard_id}`);\r\n        costNote.value = response.data\r\n    } catch (error) {\r\n         console.log(error)\r\n        showError(error.message);\r\n    }\r\n}\r\n\r\n\r\nconst clearForm = () => {\r\n    usage_description.value = '';\r\n    usage_quantity.value = null;\r\n    spare_usage.value = '';\r\n    rate.value = null;\r\n    description.value = '';\r\n    quantity.value = null;\r\n    cn.value = false;\r\n    selectedLpoId.value = null;\r\n    selectedLpo.value = null;\r\n    outside_maintenance.value = false\r\n    vendor.value = ''\r\n    item.value = ''\r\n    beneficiary.value = ''\r\n};\r\n\r\nconst item = ref('')\r\nconst description = ref('');\r\nconst quantity = ref(null);\r\nconst receiver_option = ref('')\r\nconst cn = ref(null);\r\n\r\nconst vendors = ref([])\r\nconst vendor = ref('')\r\nconst vendored = ref(false)\r\nconst getVendors = async () =>{\r\n  getSpares()\r\n  if(vendored.value == false){\r\n    vendored.value = true\r\n    const response = await axiosInstance.get('vendors')\r\n    vendors.value = response.data\r\n  }\r\n}\r\n\r\nconst beneficiary = ref('')\r\nconst addCostNote = async (item) => {\r\n    add_electric.value= false;\r\n    add_labour_cost.value = false;\r\n    add_body_works.value = false;\r\n    add_engineering.value = false;\r\n    add_additional.value = false;\r\n    cn.value = item;\r\n    loading_spinner.value=true;\r\n    try {\r\n        const payload = {\r\n            jobcard_id: route.params.jobcard_id,\r\n            costnote_type: item,\r\n            description: description.value,\r\n            quantity: quantity.value,\r\n            unit : unit.value.short_name,\r\n            rate: rate.value,\r\n            beneficiary : beneficiary.value,\r\n            vendor_id : vendor.value.id\r\n        };\r\n        await axiosInstance.post('/cost-notes', payload);\r\n        getCostNote();\r\n        clearForm();\r\n        showMessage(\"Cost added successfully\");\r\n        loading_spinner.value=false;\r\n    } catch (error) {\r\n         console.log(error)\r\n        showError(error.message);\r\n        loading_spinner.value=false;\r\n        \r\n    }\r\n}\r\n\r\n  const printJobcard = () => {\r\n    // Format date function\r\n    const formatDate = (dateStr) => {\r\n      if (!dateStr) return 'N/A';\r\n      const date = new Date(dateStr);\r\n      return `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;\r\n    };\r\n\r\n    // Create a new window for printing\r\n    const printWindow = window.open('', '_blank', 'width=800,height=600');\r\n    \r\n    // Create the print content with styling\r\n    const printContent = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>Jobcard No:${jobcard.value?.id || ''}</title>\r\n           <style>\r\n                body {\r\n                    font-family: Arial, sans-serif;\r\n                    margin: 20px;\r\n                    color: #333;\r\n                }\r\n                .header {\r\n                    text-align: center;\r\n                    margin-bottom: 20px;\r\n                    border-bottom: 1px solid #ddd;\r\n                    padding-bottom: 10px;\r\n                }\r\n                .section {\r\n                    margin-bottom: 20px;\r\n                }\r\n                h2 {\r\n                    color: #2c3e50;\r\n                    border-bottom: 1px solid #eee;\r\n                    padding-bottom: 5px;\r\n                }\r\n                table {\r\n                    width: 100%;\r\n                    border-collapse: collapse;\r\n                    margin-bottom: 15px;\r\n                }\r\n                th, td {\r\n                    border: 1px solid #999;\r\n                    padding: 8px;\r\n                    text-align: center;\r\n                }\r\n                th {\r\n                    background-color: #f2f2f2;\r\n                    font-weight: 500;\r\n                }\r\n                td {\r\n                    font-weight: 300;\r\n                }\r\n                .footer {\r\n                    margin-top: 30px;\r\n                    text-align: center;\r\n                    font-size: 12px;\r\n                    color: #777;\r\n                }\r\n                .jobcard-info-table {\r\n                    width: 100%;\r\n                }\r\n                .jobcard-info-table th,\r\n                .jobcard-info-table td {\r\n                    width: 16.66%; /* Equal width for 6 columns */\r\n                    min-width: 120px; /* Minimum width for each column */\r\n                }\r\n                .data-table {\r\n                    width: 100%;\r\n                }\r\n                .data-table th,\r\n                .data-table td {\r\n                    padding: 8px 12px;\r\n                }\r\n            </style>\r\n            <script>\r\n                 window.onload = function() {\r\n                    setTimeout(function() {\r\n                        window.print();\r\n                        setTimeout(function() {\r\n                            window.close();\r\n                        }, 0.1);\r\n                    }, 0.1);\r\n                }\r\n                window.onafterprint = function() {\r\n                    setTimeout(function() {\r\n                        window.close();\r\n                    }, 0.1);\r\n                };\r\n            <\\/script>\r\n        </head>\r\n        <body>\r\n            <div class=\"header\">\r\n                <h1>Details for Jobcard </h1> \r\n            </div>\r\n            \r\n            <div class=\"section\">\r\n                <h2>Jobcard Information</h2>\r\n                <table class=\"horizontal-table\">\r\n                    <tr>\r\n                        <th>Jobcard No</th>\r\n                        <th>${jobcard?.value.machine?.category?.name}</th>\r\n                        <th>Date</th>\r\n                        <th>Service Type</th>\r\n                        <th>Current KM</th>\r\n                        <th>Next KM</th>\r\n                        <th>Status</th>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>00${jobcard.value?.id || 'N/A'}</td>\r\n                     <td>${jobcard?.value.machine.name && jobcard?.value?.machine?.type_name ? jobcard?.value.machine.name + ' - ' + jobcard?.value.machine.type_name : jobcard?.value.machine.name || ''}</td>\r\n                        <td>${formatDate(jobcard.value?.date_created)}</td>\r\n                        <td>${jobcard.value?.service_type || 'N/A'}</td>\r\n                        <td>${jobcard.value?.current_km_of_service || 'N/A'}</td>\r\n                        <td>${jobcard.value?.next_km_of_service || 'N/A'}</td>\r\n                        <td>${jobcard.value?.status_name || 'N/A'}</td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            \r\n            ${typeof defects.value?.length === 'number' ? `\r\n            <div class=\"section\">\r\n                <h2>Defects Detected</h2>\r\n                ${defects.value.length > 0 ? \r\n                    '<table><thead><tr><th>S.No</th><th>Description</th><th>Reported By</th><th>Status</th></tr></thead><tbody>' +\r\n                    defects.value.map((defect, index) => \r\n                        '<tr><td>' + (index + 1) + '</td><td>' + defect.description + '</td><td>' + \r\n                        defect.reported_by + '</td><td>' + (defect.status_id === 1 ? 'Fixed' : 'Pending') + '</td></tr>'\r\n                    ).join('') +\r\n                    '</tbody></table>'\r\n                : '<p>No defects reported</p>'}\r\n            </div>\r\n            ` : ''}\r\n            \r\n            ${typeof work_carried_out.value?.length === 'number' ? `\r\n            <div class=\"section\">\r\n                <h2>Work Carried Out</h2>\r\n                ${work_carried_out.value.length > 0 ? \r\n                    '<table><thead><tr><th>S.No</th><th>Description</th><th>Reported By</th></tr></thead><tbody>' +\r\n                    work_carried_out.value.map((work, index) => \r\n                        '<tr><td>' + (index + 1) + '</td><td>' + work.description + '</td><td>' + work.reported_by + '</td></tr>'\r\n                    ).join('') +\r\n                    '</tbody></table>'\r\n                : '<p>No work carried out</p>'}\r\n            </div>\r\n            ` : ''}\r\n            \r\n            ${items.value.length > 0 && items.value[0].hasOwnProperty('SNo') ? `\r\n                <div class=\"section\">\r\n                    <h2>Spares Used</h2>\r\n                    <table>\r\n                        <thead>\r\n                            <tr><th>S.No</th><th>Spare</th><th>Description</th><th>Unit</th><th>Quantity</th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${items.value.map(item => \r\n                                `<tr><td>${item.SNo}</td><td>${item.spare}</td><td>${item.description}</td><td>${item.unit}</td><td>${item.quantity}</td></tr>`\r\n                            ).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${Tyres.value.length > 0 ? `\r\n                <div class=\"section\">\r\n                    <h2>Tyres Used</h2>\r\n                    <table>\r\n                        <thead>\r\n                            <tr><th>S.No</th><th>Tyre No</th><th>Rate</th><th>Date Changed</th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${Tyres.value.map(item => \r\n                                `<tr><td>${item?.SNo ?? ''}</td><td>${item?.tyre_no ?? ''}</td><td>${item?.rate ?? ''}</td><td>${item?.date_changed ?? ''}</td></tr>`\r\n                            ).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${labourCost.value && typeof labourCost.value.length === 'number' && labourCost.value.length > 0 ? `\r\n                <div class=\"section\">\r\n                    <h2>Labour Cost</h2>\r\n                    <table>\r\n                        <thead>\r\n                            <tr><th>S.No</th><th>Description</th><th>Quantity</th><th>Rate</th><th>Total</th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${labourCost.value.map(item => \r\n                                `<tr><td>${item?.SNo ?? ''}</td><td>${item?.description ?? ''}</td><td>${item?.quantity ?? ''}</td><td>${item?.rate ?? ''}</td><td>${item?.cost ?? ''}</td></tr>`\r\n                            ).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${bodyWorks.value && typeof bodyWorks.value.length === 'number' && bodyWorks.value.length > 0 ? `\r\n                <div class=\"section\">\r\n                    <h2>Body Works</h2>\r\n                    <table>\r\n                        <thead>\r\n                            <tr><th>S.No</th><th>Description</th><th>Quantity</th><th>Rate</th><th>Total</th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${bodyWorks.value.map(item => \r\n                                `<tr><td>${item?.SNo ?? ''}</td><td>${item?.description ?? ''}</td><td>${item?.quantity ?? ''}</td><td>${item?.rate ?? ''}</td><td>${item?.cost ?? ''}</td></tr>`\r\n                            ).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${ electricalWorks.value?.length === 'number' ? `\r\n                <div class=\"section\">\r\n                    <h2>Electrical Works</h2>\r\n                    ${electricalWorks.value.length > 0 ? \r\n                        '<table><thead><tr><th>S.No</th><th>Description</th><th>Quantity</th><th>Rate</th><th>Total</th></tr></thead><tbody>' +\r\n                        electricalWorks.value.map(item => \r\n                            `<tr><td>${item?.SNo ?? ''}</td><td>${item?.description ?? ''}</td><td>${item?.quantity ?? ''}</td><td>${item?.rate ?? ''}</td><td>${item?.cost ?? ''}</td></tr>`\r\n                        ).join('') +\r\n                        '</tbody></table>'\r\n                    : '<p>No electrical work registered</p>'}\r\n                </div>\r\n            ` : ''}\r\n\r\n                ${engineeringWorks.value && typeof engineeringWorks.value.length === 'number' && engineeringWorks.value.length > 0 ? `\r\n                <div class=\"section\">\r\n                    <h2>Engineering Works</h2>\r\n                    <table>\r\n                        <thead>\r\n                            <tr><th>S.No</th><th>Description</th><th>Quantity</th><th>Rate</th><th>Total</th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${engineeringWorks.value.map(item => \r\n                                `<tr><td>${item?.SNo ?? ''}</td><td>${item?.description ?? ''}</td><td>${item?.quantity ?? ''}</td><td>${item?.rate ?? ''}</td><td>${item?.cost ?? ''}</td></tr>`\r\n                            ).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            ` : ''}\r\n\r\n                ${additionalWorks.value && typeof additionalWorks.value.length === 'number' && additionalWorks.value.length > 0 ? `\r\n                <div class=\"section\">\r\n                    <h2>Additional Works</h2>\r\n                    <table>\r\n                        <thead>\r\n                            <tr><th>S.No</th><th>Description</th><th>Quantity</th><th>Rate</th><th>Total</th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${additionalWorks.value.map(item => \r\n                                `<tr><td>${item?.SNo ?? ''}</td><td>${item?.description ?? ''}</td><td>${item?.quantity ?? ''}</td><td>${item?.rate ?? ''}</td><td>${item?.cost ?? ''}</td></tr>`\r\n                            ).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            ` : ''}\r\n            \r\n            <div class=\"section\">\r\n                <h2>Total Cost Note</h2>\r\n                <table class=\"data-table\">\r\n                    <tr>\r\n                        <th>Total Spares Cost</th>\r\n                        <td>${costNote.value?.spares?.toLocaleString() || '0'}/=</td>\r\n                    </tr>\r\n                       <tr>\r\n                        <th>Total Tyres Cost</th>\r\n                        <td>${costNote.value?.tyres?.toLocaleString() || '0'}/=</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Total Body Works Cost</th>\r\n                        <td>${costNote.value?.body_works?.toLocaleString() || '0'}/=</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Total Electrical Works Cost</th>\r\n                        <td>${costNote.value?.electrical_works?.toLocaleString() || '0'}/=</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Total Labour Cost</th>\r\n                        <td>${costNote.value?.labour?.toLocaleString() || '0'}/=</td>\r\n                    </tr>\r\n                     <tr>\r\n                        <th>Total Engineering Works Cost</th>\r\n                        <td>${costNote.value?.engineering?.toLocaleString() || '0'}/=</td>\r\n                    </tr>\r\n                     <tr>\r\n                        <th>Total Additional Works Cost</th>\r\n                        <td>${costNote.value?.additional?.toLocaleString() || '0'}/=</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th><b>Total Cost</b></th>\r\n                        <th><b>${costNote.value?.total?.toLocaleString() || '0'}/=</b></th>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <div class=\"footer\">\r\n                <p>Printed on: ${formatDate(new Date())}</p>\r\n            </div>\r\n        </body>\r\n        </html>\r\n    `;\r\n    \r\n    // Write to the new window\r\n    printWindow.document.open();\r\n    printWindow.document.write(printContent);\r\n    printWindow.document.close();\r\n};\r\n\r\n  \r\nconst deleteItemUsage = (id) => {\r\n    if (window.Swal) {\r\n        window.Swal.fire({\r\n            title: 'Delete Spare Usage Record',\r\n            text: 'Are you sure you want to delete this spare usage record?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Delete'\r\n        }).then(async (result) => {\r\n            if (result.isConfirmed) {\r\n                try {\r\n                    loading_spinner.value = true;\r\n                    await axiosInstance.delete(`/item-usage/${id}`);\r\n                    showMessage(' deleted successfully!');\r\n                     getSpares();\r\n                    await getCostNote();\r\n                } catch (error) {\r\n                    showError(error.message || 'Delete failed');\r\n                    console.error('Delete error:', error);\r\n                } finally {\r\n                    loading_spinner.value = false;\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nconst openRemarkModal = () => {\r\n    jobcard_id.value = jobcard.value?.id;\r\n    fetchRemarks();\r\n    showRemarkModal.value = true;\r\n};\r\n\r\n          const closeRemarkModal = () => {\r\n    showRemarkModal.value = false;\r\n    newremark.value = ''; // Clear the remark input\r\n    remarks.value = []; // Reset the remarks list\r\n};\r\n\r\n\r\nconst showRemarkModal = ref(false);\r\nconst jobcard_id = ref(0); // Default to 0\r\n\r\nconst fetchRemarks = async () => {\r\n    isLoading.value=true;\r\n    try {\r\n        const response = await axiosInstance.get(`remark?remark_type=jobcard&type_id=${jobcard_id.value}`);\r\n        if (Array.isArray(response.data)) {\r\n            remarks.value = response.data;\r\n        } else if (response.data && Array.isArray(response.data.data)) {\r\n            remarks.value = response.data.data;\r\n        } else {\r\n            remarks.value = [];\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error fetching remarks:\", error);\r\n        showError(\"Failed to load remarks\");\r\n    } finally {\r\n        isLoading.value = false;\r\n    }\r\n};\r\n\r\n\r\n const newremark = ref('');\r\n    const isLoading = ref(false);\r\n\r\nconst saveRemark = async () => {\r\n    if (!newremark.value.trim()) {\r\n        showError(\"Remark cannot be empty!\");\r\n        return;\r\n    }\r\n    \r\n    // Prepend jobcard info to the remark\r\n    newremark.value = \"In jobcard No. \" + jobcard_id.value + \" for machine type \" +  jobcard.value?.machine.type_name + \" - \" + jobcard.value?.machine.name + \" \" + newremark.value;\r\n    \r\n    isSending.value = true;\r\n    \r\n    try {\r\n        const remarkData = {\r\n            remarker_id: user_id,\r\n            description: newremark.value,\r\n            status: status.value,\r\n            type_id: jobcard_id.value,\r\n            remark_type: \"jobcard\",\r\n            remarker: JSON.parse(localStorage.getItem(\"user\")).name\r\n        };\r\n        \r\n        const response = await axiosInstance.post('remark', remarkData);\r\n        \r\n        if (response.status === 201 || response.status === 200) {\r\n            if (response.data) {\r\n                remarks.value.push(response.data);\r\n            } else {\r\n                remarks.value.push(remarkData);\r\n            }\r\n            \r\n            newremark.value = '';\r\n            showMessage(\"Remark added successfully\");\r\n            closeRemarkModal();\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n        showError(error.message);\r\n    } finally {\r\n        isSending.value = false;\r\n    }\r\n};\r\n\r\n\r\n watch(receiver_option, (newVal) => {\r\n    if (newVal === 'VENDOR') {\r\n        getVendors()\r\n    }\r\n});\r\n\r\nconst units = ref([])\r\nconst unit = ref('')\r\n const getUnits = async () => {\r\n   try{\r\n      const response = await axiosInstance.get('units')\r\n      units.value = response.data\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n\r\n   }\r\n};\r\n\r\n\r\n    onMounted(() => {\r\n        getJobcard()\r\n        getCostNote();\r\n        getUnits()\r\n    });\r\n\r\n</script>\r\n","import script from \"./jobcard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./jobcard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./jobcard.vue?vue&type=style&index=0&id=74019870&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["block","ref","props","blockValue","status","modelValue","remark","remarkValue","watch","val","value","emit","__exports__","useMeta","title","user_permissions","JSON","parse","localStorage","getItem","permissions","addOutsideMaintenance","async","loading_spinner","payload","jobcard_id","route","params","item","description","quantity","vendor_id","vendor","id","axiosInstance","post","getOutsideMaintenance","showMessage","clearForm","error","showError","message","console","log","outsideMaintenance","outsideMaintenanceColumns","spinner","remarks","selectedLpoId","selectedLpo","approveItemUsage","status_id","type","type_id","jobcard","requisition","machine","category","name","type_name","requester_id","issuer_id","approval_group_id","items","item_id","purchasable","rate","rate_original","spare","units","unit","asset_id","put","getCostNote","document","getElementById","click","approveBulkItemUsage","filter","map","modalEl","modalInstance","bootstrap","Modal","getInstance","hide","approveVoucher","beneficiary","qty","axios","baseURL","process","isSending","user_id","loadingIndicator","inject","loadingSpinner","formatNumber","tyre_no","date_changed","add_tyre","Tyres","outside_maintenance","completing","d","w","s","approveItem","summary","mail","add_defect","add_work","add_body_works","add_usage","defects","work_carried_out","workdone_description","defect_description","spare_usage","usage_quantity","usage_description","add_labour_cost","spares_title","add_electric","add_engineering","add_additional","changeSparesTitle","columns","computed","status_name","costNoteColumns","Tyrescolumns","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","updateJobcard","getJobcard","DeactivateJobcard","status_color","receiver","sendingMail","sendMail","updateDefectStatus","defect","useRoute","response","get","data","maintainanceLogs","maintainance_logs","issue_type","costNotes","cost_notes","labourCost","note","costnote_type","index","SNo","toLocaleString","cost","electricalWorks","engineeringWorks","additionalWorks","outside_maintenances","Sno","registerDefect","job_card_id","reported_by","registerWorkDone","date","registerItemUsage","spared","cn","usageData","usage_type","source","source_id","category_id","item_condition","store_id","short_name","getSpares","tyres","getItemUsage","itemUsages","required","available","Math","max","store_quantity","abs","purchase_cost","Number","item_name","bodyWorks","spares","deleting","deleteLog","confirm","delete","deleteCostNote","window","Swal","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","deleted","deleted_by_id","patch","editMode","editItemId","editType","editItemUsage","parseFloat","replace","setTimeout","modalElement","modal","show","editTyres","editLabour","editBodyWorks","editElectricalWorks","editEngineeringWorks","editAdditionalWorks","updateItemUsage","modalId","closeEditModal","updateTyre","machine_id","updateCostNote","costNote","receiver_option","vendors","vendored","getVendors","addCostNote","printJobcard","formatDate","dateStr","Date","getFullYear","String","getMonth","padStart","getDate","printWindow","open","printContent","date_created","service_type","current_km_of_service","next_km_of_service","length","join","work","hasOwnProperty","body_works","electrical_works","labour","engineering","additional","total","write","close","deleteItemUsage","openRemarkModal","fetchRemarks","showRemarkModal","closeRemarkModal","newremark","isLoading","Array","isArray","saveRemark","trim","remarkData","remarker_id","remark_type","remarker","push","newVal","getUnits","onMounted"],"sourceRoot":""}