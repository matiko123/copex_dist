{"version":3,"file":"js/4634.f1097977.js","mappings":"+oFAgIIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,oBAEjB,MAAMC,GAAgBC,EAAAA,EAAAA,IAAI,MACpBC,GAAcD,EAAAA,EAAAA,MACdE,GAAcF,EAAAA,EAAAA,MACdG,IAAeH,EAAAA,EAAAA,MACfI,IAAWJ,EAAAA,EAAAA,MACXK,IAAiBL,EAAAA,EAAAA,KAAI,GACrBM,GAAeC,IACjBR,EAAcS,MAAQC,IAAIC,gBAAgBH,EAAMI,OAAOC,MAAM,KAI3DC,GAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAkBPC,GAAc,CAACC,EAAM,GAAIC,EAAO,aAClC,MAAMC,EAAQC,OAAOC,KAAKC,MAAM,CAC5BH,OAAO,EACPI,SAAU,YACVC,mBAAmB,EACnBC,MAAO,MAEXN,EAAMO,KAAK,CACPC,KAAMT,EACNrB,MAAOoB,EACPW,QAAS,eAQXC,GAAY,CAACZ,EAAM,GAAIC,EAAO,WAChC,MAAMC,EAAQC,OAAOC,KAAKC,MAAM,CAC5BH,OAAO,EACPI,SAAU,YACVC,mBAAmB,EACnBC,MAAO,MAEXN,EAAMO,KAAK,CACPC,KAAMT,EACNrB,MAAOoB,EACPW,QAAS,eAKTE,GAAaC,UACb/B,EAAYO,MAAQ,GACpBN,EAAYM,MAAQ,GACpBL,GAAaK,MAAO,IAIlByB,GAAgBD,UAC1B,GAAKE,GAAK1B,MAKV,GAAKN,EAAYM,OAAUL,GAAaK,MAMxC,GAAIN,EAAYM,QAAUL,GAAaK,MAAvC,CAKAH,GAAgBG,OAAQ,EACxBJ,GAASI,MAAQL,GAAaK,MAE9B,IACI,MAAM2B,QAAiBtB,GAAcuB,MAAO,UAASF,GAAK1B,MAAM6B,KAAM,CACnEjC,SAAUA,GAASI,QAIlB2B,EAASG,OACTC,aAAaC,QAAQ,OAAQC,KAAKC,UAAUP,EAASG,OACrDJ,GAAK1B,MAAQ2B,EAASG,KACtBrB,GAAY,iCACZc,MAGN,MAAOY,GACLC,QAAQD,MAAM,0BAA2BA,GACzCb,GAAUa,EAAMR,SAASG,KAAKO,SAGlCxC,GAAgBG,OAAQ,OAzBpBsB,GAAU,wEANdA,GAAU,oDALNA,GAAU,wBA2CZI,IAAOlC,EAAAA,EAAAA,IAAI,M,OAEjB8C,EAAAA,EAAAA,KAAU,KACR,MAAMC,EAAaR,aAAaS,QAAQ,QACpCD,IACFb,GAAK1B,MAAQiC,KAAKQ,MAAMF,O,gsDCvP5B,MAAMG,GAAc,GAEpB,W","sources":["webpack://cork-vue3/./src/views/user/profile.vue","webpack://cork-vue3/./src/views/user/profile.vue?298f"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">\r\n        <teleport to=\"#breadcrumb\">\r\n            <ul class=\"navbar-nav flex-row\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">User</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Account Settings</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </teleport>\r\n        <button  class=\"btn mt-2 btn-dark me-2 px-3\" @click=\"$router.go(-1)\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8\"/>\r\n</svg>\r\n                </button>\r\n        <div class=\"account-settings-container layout-top-spacing\">\r\n            <div class=\"account-content\">\r\n                <div class=\"scrollspy-example\" data-spy=\"scroll\" data-target=\"#account-settings-scroll\" data-offset=\"-100\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-xl-12 col-lg-12 col-md-12 layout-spacing\">\r\n                            <form id=\"general-info\" class=\"section general-info\"  @submit.prevent=\"updateProfile\">\r\n                                <div class=\"info\">\r\n                                    <h6 class=\"\">General Information</h6>\r\n                                    <div class=\"row\">\r\n                                        <div class=\"col-lg-11 mx-auto\">\r\n                                            <div class=\"row\">\r\n                                                <div class=\"col-xl-2 col-lg-12 col-md-4\">\r\n                                                    <div class=\"upload mt-4 pe-md-4\">\r\n                                                        <input ref=\"fl_profile\" type=\"file\" class=\"d-none\" accept=\"image/*\" @change=\"change_file\" />\r\n                                                        <img\r\n                                                            :src=\"selected_file ? selected_file : require('@/assets/images/prf.jpg')\"\r\n                                                            alt=\"profile\"\r\n                                                            class=\"profile-preview\"\r\n                                                            @click=\"$refs.fl_profile.click()\"\r\n                                                        />\r\n                                                        <p class=\"mt-2\">Upload Picture</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-xl-10 col-lg-12 col-md-8 mt-md-0 mt-4\">\r\n                                                    <div class=\"form\">\r\n                                                        <div class=\"row\">\r\n                                                            <div class=\"row\">\r\n\r\n                                                            <div class=\"col-sm-6\">\r\n                                                                <div class=\"form-group\">\r\n                                                                    <label for=\"fullName\">Full Name</label>\r\n                                                                    <button class=\"btn btn-light w-100 text-start mb-4\" disabled>\r\n                                                                        <span class=\"nav-link text-dark\" style=\"font-size: 1.2em; font-weight: bold;\">{{ user ? user.email : \"Please Login\" }}</span>\r\n                                                                    </button>\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                            <div class=\"col-sm-6\">\r\n                                                                <div class=\"form-group\">\r\n                                                                <label for=\"profession\">Role</label>\r\n                                                                 <button class=\"btn btn-light w-100 text-start mb-4\" disabled>\r\n                                                                  <span class=\"nav-link text-dark\" style=\"font-size: 1.2em; font-weight: bold;\">{{ user ? user.name : \"\" }}</span>\r\n                                                                 </button>\r\n                                                           </div>\r\n                                                           \r\n                                                            </div>\r\n                                                          \r\n                                                            <div class=\"row\">  \r\n\r\n                                                                <div class=\"col-md-6\">\r\n                                                    <div class=\"form-group\">\r\n                                                        <label for=\"password\">New Password</label>\r\n                                                        <input class=\"form-control mb-4\" v-model=\"newpassword\" type=\"password\" />\r\n                                                    </div>\r\n                                                                </div>\r\n                                                               <div class=\"col-md-6\">\r\n                                                    <div class=\"form-group\">\r\n                                                        <label for=\"password\">Confirm New Password</label>\r\n                                                        <input class=\"form-control mb-4\" v-model=\"confpassword\" type=\"password\" />\r\n                                                    </div>\r\n                                                              </div>\r\n                                                            </div>\r\n                                                            </div>\r\n                                                         </div>  \r\n                                                     </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"account-settings-footer bg-white\">\r\n                                      <div class=\"as-footer-container\">\r\n                                       <button type=\"button\" class=\"btn btn-primary bg-danger\"  @click=\"clearField()\">Cancel</button>\r\n                                       <button type=\"submit\" class=\"btn btn-primary\">\r\n                                        <div v-if=\"loading_spinner\" class=\"d-flex flex-column align-items-center\">\r\n                                         <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                        Please wait ...\r\n                                        </div>\r\n                                               \r\n                                        <div v-else>Save Changes</div>\r\n                                        </button>\r\n                                      </div>\r\n                               </div>\r\n\r\n                            </form>\r\n                        </div>\r\n\r\n                       \r\n                        </div>\r\n\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n    </div>\r\n       \r\n   \r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, ref } from 'vue';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    import '@/assets/sass/users/account-setting.scss';\r\n    import axios from \"axios\";\r\n\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Account Setting' });\r\n\r\n    const selected_file = ref(null);\r\n    const oldpassword = ref();\r\n    const newpassword = ref();\r\n    const confpassword = ref();\r\n    const password = ref();\r\n    const loading_spinner =ref(false);\r\n    const change_file = (event) => {\r\n        selected_file.value = URL.createObjectURL(event.target.files[0]);\r\n    };\r\n\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const save = () => {\r\n        if (newpassword.value != confpassword.value) {\r\n            showerror(' Please make sure the confirm password its matches the new password');\r\n        }\r\n        else {\r\n\r\n            password==confpassword;\r\n          updateProfile();\r\n          clearField();\r\n          }\r\n    };\r\n\r\n\r\n\r\n\r\n    const showMessage = (msg = '', type = 'success') => {\r\n        const toast = window.Swal.mixin({\r\n            toast: true,\r\n            position: 'top-right',\r\n            showConfirmButton: false,\r\n            timer: 3000,\r\n        });\r\n        toast.fire({\r\n            icon: type,\r\n            title: msg,\r\n            padding: '10px 20px',\r\n        });\r\n    };\r\n       \r\n  \r\n\r\n\r\n\r\n    const showerror = (msg = '', type = 'error') => {\r\n        const toast = window.Swal.mixin({\r\n            toast: true,\r\n            position: 'top-right',\r\n            showConfirmButton: false,\r\n            timer: 3000,\r\n        });\r\n        toast.fire({\r\n            icon: type,\r\n            title: msg,\r\n            padding: '10px 20px',\r\n        });\r\n    };\r\n\r\n\r\n     const  clearField = async () =>  {\r\n            oldpassword.value = \"\";\r\n            newpassword.value = \"\";\r\n            confpassword.value= \"\";\r\n        }\r\n\r\n\r\n        const updateProfile = async () => {\r\n    if (!user.value) {\r\n        showerror(\"User not logged in.\");\r\n        return;\r\n    }\r\n\r\n    if (!newpassword.value || !confpassword.value) {\r\n    showerror(\"Password can't be empty! Please fill it in.\");\r\n    return;\r\n   }\r\n\r\n\r\n    if (newpassword.value !== confpassword.value) {\r\n        showerror(\"Please make sure the confirm password matches the new password.\");\r\n        return;\r\n    }\r\n\r\n    loading_spinner.value = true;\r\n    password.value = confpassword.value;\r\n\r\n    try {\r\n        const response = await axiosInstance.patch(`/users/${user.value.id}`, {\r\n           password: password.value,\r\n        });\r\n  \r\n\r\n        if (response.data) {\r\n            localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n            user.value = response.data;\r\n            showMessage(\"Profile updated successfully!\");\r\n            clearField();\r\n        }\r\n        \r\n    } catch (error) {\r\n        console.error(\"Error updating profile:\", error);\r\n        showerror(error.response.data.message);\r\n    }\r\n\r\n    loading_spinner.value = false;\r\n};\r\n\r\n\r\n\r\n\r\n       \r\nconst user = ref(null);\r\n\r\nonMounted(() => {\r\n  const storedUser = localStorage.getItem(\"user\");\r\n  if (storedUser) {\r\n    user.value = JSON.parse(storedUser);\r\n  }\r\n});\r\n</script>\r\n","import script from \"./profile.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./profile.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","selected_file","ref","oldpassword","newpassword","confpassword","password","loading_spinner","change_file","event","value","URL","createObjectURL","target","files","axiosInstance","axios","baseURL","process","showMessage","msg","type","toast","window","Swal","mixin","position","showConfirmButton","timer","fire","icon","padding","showerror","clearField","async","updateProfile","user","response","patch","id","data","localStorage","setItem","JSON","stringify","error","console","message","onMounted","storedUser","getItem","parse","__exports__"],"sourceRoot":""}