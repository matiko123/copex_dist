"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[7995],{17995:function(e,a,l){l.r(a),l.d(a,{default:function(){return Ze}});var t=l(66252),s=l(2262),o=l(3577),i=l(49963),c=l(26212),n=l.n(c),r=l(56296),d=l(87066);const u=e=>((0,t.dD)("data-v-1e8d1cda"),e=e(),(0,t.Cn)(),e),v={class:"layout-px-spacing"},m=u((()=>(0,t._)("ul",{class:"navbar-nav flex-row"},[(0,t._)("li",null,[(0,t._)("div",{class:"page-header"},[(0,t._)("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[(0,t._)("ol",{class:"breadcrumb"},[(0,t._)("li",{class:"breadcrumb-item"},[(0,t._)("a",{href:"javascript:;"},"DataTables")]),(0,t._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,t._)("span",null,"Totaly Machines")])])])])])],-1))),p=["innerHTML"],b={key:1,class:"seperator-header layout-top-spacing"},_={class:"d-flex"},y={class:"d-flex justify-content-between align-items-center mb-4 mt-3"},g={class:"d-flex align-items-center gap-3"},h=u((()=>(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,t._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1))),w=[h],f=u((()=>(0,t._)("i",{class:"bi bi-plus me-2"},null,-1))),k=(0,t.Uk)("Add New "),x=[f,k],C={class:"ms-auto col-xl-5 col-lg-6 col-md-8 col-sm-10"},H={class:"widget-content p-4"},V={class:"row gy-3"},S={class:"col-md-3 col-sm-6 col-6"},U={class:"widget widget-statistics h-100 shadow card"},T=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"All",-1))),M={class:"w-stats text-info fs-3 fw-bold"},R={class:"col-md-3 col-sm-6 col-6"},q={class:"widget widget-statistics h-100 shadow card"},A=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"Total Machines",-1))),I={class:"w-stats text-primary fs-3 fw-bold"},L={class:"col-md-3 col-sm-6 col-6"},D={class:"widget widget-statistics h-100 shadow card"},z=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"Total Vehicles",-1))),E={class:"w-stats text-success fs-3 fw-bold"},N={class:"col-md-3 col-sm-6 col-6"},j={class:"widget widget-statistics h-100 shadow card"},W=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"Total Supervision",-1))),P={class:"w-stats text-dark fs-3 fw-bold"},$={class:"mt-3 mx-2"},B=["onSubmit"],O=u((()=>(0,t._)("h3",{class:"text-center"},"MACHINE REGISTRATION ",-1))),Z={class:"row mb-2"},G={class:"col-md-4"},K=u((()=>(0,t._)("label",{class:"form-label"},"Registration No",-1))),F={class:"col-md-4"},J={class:"form-label"},Q={class:"col-md-4"},X=u((()=>(0,t._)("label",{class:"form-label"},"Select Type ",-1))),Y={class:"row mb-2"},ee={class:"col-md-4"},ae=u((()=>(0,t._)("label",{class:"form-label"},"Average Ratio",-1))),le={class:"col-md-4"},te=u((()=>(0,t._)("label",{class:"form-label"},"Capacity",-1))),se={class:"col-md-4"},oe=u((()=>(0,t._)("label",{class:"form-label"},"Reserve Litre",-1))),ie=u((()=>(0,t._)("div",{class:"d-flex gap-2 justify-content-end"},[(0,t._)("button",{type:"submit",class:"btn btn-primary"},"Register"),(0,t._)("button",{type:"button",class:"btn btn-danger",onclick:"document.getElementById('consumer').style.display='none'"},"Cancel")],-1))),ce={class:"toast-container position-fixed top-0 end-0 p-3",style:{"z-index":"11"}},ne={class:"toast align-items-center text-dark border-0",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"toast",style:{"background-color":"#afe8fa"}},re=u((()=>(0,t._)("div",{class:"d-flex"},[(0,t._)("div",{class:"toast-body"}," Registration successful! Redirecting to user/home... "),(0,t._)("button",{type:"button",class:"btn-close btn-close-dark me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})],-1))),de=[re],ue={key:2,class:"row layout-top-spacing"},ve={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},me={class:"panel br-6 p-0"},pe={class:"custom-table"},be={class:"actions text-center"},_e=["onClick","data-bs-target"],ye=u((()=>(0,t._)("button",{type:"button",class:"btn btn-primary btn-sm"},"View",-1))),ge=[ye],he=(0,t.Uk)(" Â  "),we=["id"],fe={class:"modal-dialog modal-lg"},ke={class:"modal-content"},xe=u((()=>(0,t._)("div",{class:"modal-header"},[(0,t._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Update Machine Details"),(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Ce={class:"modal-body"},He={class:"row"},Ve={class:"col-md-6"},Se=u((()=>(0,t._)("label",{class:"form-label"},"Name",-1))),Ue={class:"col-md-6"},Te=u((()=>(0,t._)("label",{class:"form-label"},"Category",-1))),Me={class:"col-md-6"},Re=u((()=>(0,t._)("label",{class:"form-label"},"Type",-1))),qe={class:"col-md-6"},Ae=u((()=>(0,t._)("label",{class:"form-label"},"Ratio",-1))),Ie={class:"col-md-6"},Le=u((()=>(0,t._)("label",{class:"form-label"},"Capacity",-1))),De={class:"col-md-6"},ze=u((()=>(0,t._)("label",{class:"form-label"},"Reserve Litre",-1))),Ee={class:"col-md-12"},Ne=u((()=>(0,t._)("label",{class:"form-label"},"Consuption Type",-1))),je={class:"modal-footer"},We=u((()=>(0,t._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close",-1))),Pe=["onClick"];var $e={setup(e){(0,r.j)({title:"Default Order Sorting Table"});const a=(0,s.iH)(""),l=(0,s.iH)(null),c=(0,s.iH)(!1),u=(0,s.iH)([]),h=(0,s.iH)([]),f=(0,s.iH)(["SNo","id","name","fuel_type","type","make","model","category","consuption","capacity","reserve_litre","actions"]),k=((0,s.iH)([]),(0,s.iH)([])),re=(0,s.iH)(!1),ye=(0,s.iH)(!1),$e=(0,s.iH)(""),Be=(0,t.f3)("loadingIndicator"),Oe=(0,t.f3)("showMessage"),Ze=((0,t.f3)("showError"),(0,s.iH)({perPage:10,perPageValues:[10,20,50],skin:"table table-hover",columnsClasses:{actions:"actions text-center"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},sortable:["SNo","name","type","ratio","capacity","reserve_litre"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},resizableColumns:!1})),Ge=d.Z.create({baseURL:"https://bushman.ink/api/v1/"}),Ke=async()=>{re.value=!0,Ge.get("/machines").then((e=>{oa.value=e.data.filter((e=>1===e.category_id)).length,sa.value=e.data.filter((e=>2===e.category_id)).length,ia.value=e.data.filter((e=>3===e.category_id)).length,ca.value=e.data.length,Array.isArray(e.data)&&(h.value=e.data.map(((e,a)=>({SNo:a+1,id:e.id,name:e.name,type:e.type_name,make:e.make,fuel_type:e.fuel_type,model:e.model,type_id:e.type_id,ratio:e.ratio,category:1===e.category_id?"machine":2===e.category_id?"vehicle":3===e.category_id?"supervision":"no category",capacity:e.capacity,category_id:e.category_id,reserve_litre:e.reserve_litre,consuption:e.consuption_type}))),u.value=[...h.value])})).catch((e=>{console.error("Error fetching machine data:",e.message)})).finally((()=>{re.value=!1}))},Fe=()=>{l.value=null,u.value=[...h.value],c.value=!1},Je=(e,t)=>{l.value===e?(l.value=null,u.value=[...h.value],c.value=!1):(l.value=e,u.value=h.value.filter((a=>a.category_id===e)),c.value=!0,a.value=t)},Qe=()=>{re.value=!0,Ge.get("/machine-types").then((e=>{Array.isArray(e.data)?k.value=e.data:console.error("Invalid response format")})).catch((e=>{console.error("Error fetching machine types:",e.message)})).finally((()=>{re.value=!1}))},Xe=(0,s.iH)(""),Ye=(0,s.iH)(""),ea=(0,s.iH)(""),aa=(0,s.iH)(""),la=(0,s.iH)(""),ta=(0,s.iH)(""),sa=(0,s.iH)(0),oa=(0,s.iH)(0),ia=(0,s.iH)(0),ca=(0,s.iH)(0),na=()=>{ye.value=!1,re.value=!0;const e={name:Xe.value,type_name:Ye.value.name,type_id:Ye.value.id,category_id:ta.value,ratio:ea.value,capacity:aa.value,reserve_litre:la.value};Ge.post("/machines",e).then((e=>{da(),Ke(),re.value=!1,console.log("type name",Ye.value.name)})).catch((e=>{console.error("Error registering machine",e)}))},ra=e=>{re.value=!0;const a={name:Xe.value,type_name:Ye.value.name,type_id:Ye.value.id,category_id:ta.value,ratio:ea.value,capacity:aa.value,reserve_litre:la.value,consuption_type:$e.value};Ge.put(`/machines/${e}`,a).then((e=>{da(),Ke(),re.value=!1,Oe("Updated successfully")})).catch((e=>{console.error("Error updating machine..",e),re.value=!1}))},da=()=>{Xe.value="",ta.value="",Ye.value="",ea.value="",aa.value="",la.value=""},ua=e=>{Xe.value=e.name,ta.value=e.category_id;const a=k.value.find((a=>a.id===e.type_id));Ye.value=a||"",ea.value=e.ratio,aa.value=e.capacity,la.value=e.reserve_litre};(0,t.bv)((()=>{Ke(),Qe()}));(0,s.iH)(null);return(e,a)=>{const c=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",v,[((0,t.wg)(),(0,t.j4)(t.lR,{to:"#breadcrumb"},[m])),re.value?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"mt-5",innerHTML:(0,s.SU)(Be)()},null,8,p)):(0,t.kq)("",!0),re.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",b,[(0,t._)("div",_,[(0,t._)("div",y,[(0,t._)("div",g,[(0,t._)("button",{class:"btn btn-dark px-3 py-2",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},w),(0,t._)("button",{class:"btn btn-primary px-4 py-2",onClick:a[1]||(a[1]=e=>ye.value=!ye.value)},x)])]),(0,t._)("div",C,[(0,t._)("div",{class:"widget widget-statistics h-100 shadow card",onClick:a[5]||(a[5]=(...a)=>e.navigateToMachines&&e.navigateToMachines(...a)),style:{cursor:"pointer"}},[(0,t._)("div",H,[(0,t._)("div",V,[(0,t._)("div",S,[(0,t._)("div",U,[(0,t._)("div",{class:(0,o.C_)(["w-detail",{"active-filter":null===l.value}]),onClick:Fe},[T,(0,t._)("p",M,(0,o.zw)(ca.value),1)],2)])]),(0,t._)("div",R,[(0,t._)("div",q,[(0,t._)("div",{class:(0,o.C_)(["w-detail",{"active-filter":1===l.value}]),onClick:a[2]||(a[2]=e=>Je(1,"machine"))},[A,(0,t._)("p",I,(0,o.zw)(oa.value),1)],2)])]),(0,t._)("div",L,[(0,t._)("div",D,[(0,t._)("div",{class:(0,o.C_)(["w-detail",{"active-filter":2===l.value}]),onClick:a[3]||(a[3]=e=>Je(2,"vehicle"))},[z,(0,t._)("p",E,(0,o.zw)(sa.value),1)],2)])]),(0,t._)("div",N,[(0,t._)("div",j,[(0,t._)("div",{class:(0,o.C_)(["w-detail",{"active-filter":3===l.value}]),onClick:a[4]||(a[4]=e=>Je(3,"supervision"))},[W,(0,t._)("p",P,(0,o.zw)(ia.value),1)],2)])])])])])])])])),(0,t._)("div",$,[ye.value?((0,t.wg)(),(0,t.iD)("form",{key:0,class:"p-3 border rounded bg-white shadow",id:"consumer",onSubmit:(0,i.iM)(na,["prevent"])},[O,(0,t._)("div",Z,[(0,t._)("div",G,[K,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>Xe.value=e),name:"Machine_name",required:""},null,512),[[i.nr,Xe.value]])]),(0,t._)("div",F,[(0,t._)("label",J,"Category "+(0,o.zw)(ta.value),1),(0,t.Wm)((0,s.SU)(n()),{modelValue:ta.value,"onUpdate:modelValue":a[7]||(a[7]=e=>ta.value=e),options:[{id:"1",name:"Machine"},{id:"2",name:"Vehicle"},{id:"3",name:"Supervision"}],label:"name","track-by":"id",placeholder:"Select Category",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue"])]),(0,t._)("div",Q,[X,(0,t.Wm)((0,s.SU)(n()),{modelValue:Ye.value,"onUpdate:modelValue":a[8]||(a[8]=e=>Ye.value=e),options:k.value,label:"name","track-by":"id",placeholder:"Select Type",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue","options"])])]),(0,t._)("div",Y,[(0,t._)("div",ee,[ae,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=e=>ea.value=e),name:"ratio",step:"any"},null,512),[[i.nr,ea.value]])]),(0,t._)("div",le,[te,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[10]||(a[10]=e=>aa.value=e),name:"capacity",required:"",step:"any"},null,512),[[i.nr,aa.value]])]),(0,t._)("div",se,[oe,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[11]||(a[11]=e=>la.value=e),name:"reserve_litre",required:"",step:"any"},null,512),[[i.nr,la.value]])])]),ie],40,B)):(0,t.kq)("",!0)]),(0,t._)("div",ce,[(0,t._)("div",ne,de,512)]),re.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",ue,[(0,t._)("div",ve,[(0,t._)("div",me,[(0,t._)("div",pe,[(0,t.Wm)(c,{data:u.value,columns:f.value,options:Ze.value},{actions:(0,t.w5)((l=>[(0,t._)("div",be,[(0,t._)("a",{href:"javascript:;",onClick:e=>ua(l.row),"data-bs-toggle":"modal","data-bs-target":"#modal-"+l.row.id},ge,8,_e),he]),(0,t._)("div",{class:"modal fade mymodal","data-bs-backdrop":"false",id:"modal-"+l.row.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,t._)("div",fe,[(0,t._)("div",ke,[xe,(0,t._)("form",{onSubmit:a[19]||(a[19]=(0,i.iM)((a=>ra(e.selectedId)),["prevent"]))},[(0,t._)("div",Ce,[(0,t._)("div",He,[(0,t._)("div",Ve,[Se,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[12]||(a[12]=e=>Xe.value=e)},null,512),[[i.nr,Xe.value]])]),(0,t._)("div",Ue,[Te,(0,t.Wm)((0,s.SU)(n()),{modelValue:ta.value,"onUpdate:modelValue":a[13]||(a[13]=e=>ta.value=e),options:[{id:"1",name:"Machine"},{id:"2",name:"Vehicle"},{id:"3",name:"Supervision"}],label:"name","track-by":"id",placeholder:"Select Category",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue"])]),(0,t._)("div",Me,[Re,(0,t.Wm)((0,s.SU)(n()),{modelValue:Ye.value,"onUpdate:modelValue":a[14]||(a[14]=e=>Ye.value=e),options:k.value,label:"name","track-by":"id",placeholder:"Select Type",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue","options"])]),(0,t._)("div",qe,[Ae,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control bg-white",step:"any","onUpdate:modelValue":a[15]||(a[15]=e=>ea.value=e)},null,512),[[i.nr,ea.value]])]),(0,t._)("div",Ie,[Le,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control bg-white",step:"any","onUpdate:modelValue":a[16]||(a[16]=e=>aa.value=e)},null,512),[[i.nr,aa.value]])]),(0,t._)("div",De,[ze,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control bg-white","onUpdate:modelValue":a[17]||(a[17]=e=>la.value=e)},null,512),[[i.nr,la.value]])]),(0,t._)("div",Ee,[Ne,(0,t.Wm)((0,s.SU)(n()),{modelValue:$e.value,"onUpdate:modelValue":a[18]||(a[18]=e=>$e.value=e),options:[{id:"1",name:"Km/Litre"},{id:"2",name:"Litre/hr"}],label:"name","track-by":"id",placeholder:"Select Consumption Type",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue"])])])]),(0,t._)("div",je,[We,(0,t._)("button",{type:"submit",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:a=>e.selectedId=l.row.id},"Save changes",8,Pe)])],32)])])],8,we)])),salary:(0,t.w5)((e=>[(0,t.Uk)(" $"+(0,o.zw)(e.row.salary),1)])),_:1},8,["data","columns","options"])])])])]))])}}},Be=l(83744);const Oe=(0,Be.Z)($e,[["__scopeId","data-v-1e8d1cda"]]);var Ze=Oe}}]);
//# sourceMappingURL=7995.bc9f6d33.js.map