"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[4289],{74289:function(a,e,t){t.r(e),t.d(e,{default:function(){return ma}});var l=t(66252),s=t(2262),o=t(3577),n=t(49963),i=t(87066),c=t(56296);t(26212);const d={class:"layout-px-spacing"},r=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">HR</a></li><li class="breadcrumb-item active" aria-current="page"><span>Leave</span></li><li class="breadcrumb-item active" aria-current="page"><span>List</span></li></ol></nav></div></li></ul>',1),u={class:"d-flex me-4 mt-2"},m={class:"ms-auto"},v=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,l._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),p=[v],b={class:"navbar-nav flex-row ms-auto"},h={class:"nav-item more-dropdown"},_={class:"dropdown custom-dropdown-icon"},w=(0,l._)("a",{href:"javascript:;",class:"nav-link dropdown-toggle",id:"ddlSettings","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,l._)("span",null,"Select a company"),(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},[(0,l._)("polyline",{points:"6 9 12 15 18 9"})])],-1),g={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"ddlSettings"},y=(0,l._)("a",{class:"dropdown-item","data-value":"Mail",href:"javascript:void(0);"},"BUSHMAN SAFARI",-1),f=[y],k=(0,l._)("a",{class:"dropdown-item","data-value":"Settings",href:"javascript:void(0);"},"COPEX CONTRACTORS",-1),C=[k],S={class:"text-center"},x={class:"row layout-top-spacing"},L={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},M={class:"panel p-0"},E=["innerHTML"],H={key:1,class:"custom-table table3"},z=["onClick"],A=(0,l._)("path",{"fill-rule":"evenodd",d:"M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383"},null,-1),D=(0,l._)("path",{"fill-rule":"evenodd",d:"M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708z"},null,-1),R=[A,D],V=["href"],T=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-file-earmark-pdf text-primary",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"}),(0,l._)("path",{d:"M4.603 14.087a.8.8 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.7 7.7 0 0 1 1.482-.645 20 20 0 0 0 1.062-2.227 7.3 7.3 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a11 11 0 0 0 .98 1.686 5.8 5.8 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.86.86 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.7 5.7 0 0 1-.911-.95 11.7 11.7 0 0 0-1.997.406 11.3 11.3 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.8.8 0 0 1-.58.029m1.379-1.901q-.25.115-.459.238c-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361q.016.032.026.044l.035-.012c.137-.056.355-.235.635-.572a8 8 0 0 0 .45-.606m1.64-1.33a13 13 0 0 1 1.01-.193 12 12 0 0 1-.51-.858 21 21 0 0 1-.5 1.05zm2.446.45q.226.245.435.41c.24.19.407.253.498.256a.1.1 0 0 0 .07-.015.3.3 0 0 0 .094-.125.44.44 0 0 0 .059-.2.1.1 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a4 4 0 0 0-.612-.053zM8.078 7.8a7 7 0 0 0 .2-.828q.046-.282.038-.465a.6.6 0 0 0-.032-.198.5.5 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822q.036.167.09.346z"})],-1),q=[T],O={class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},P={class:"modal-dialog",role:"document"},U={class:"modal-content"},j=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Service Registration"),(0,l._)("button",{type:"button","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close",class:"btn-close"})],-1),B={class:"modal-body"},I=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn","data-dismiss":"modal","data-bs-dismiss":"modal"},[(0,l._)("i",{class:"flaticon-cancel-12"}),(0,l.Uk)(" Discard")]),(0,l._)("button",{type:"button",class:"btn btn-primary"},"Save")],-1),F={class:"modal fade mymodal",id:"leave-attachment-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"leaveAttachmentModalLabel","aria-hidden":"true"},N={class:"modal-dialog modal-xl"},Y={class:"modal-content"},$={class:"modal-header"},X={class:"modal-title fs-5",id:"leaveAttachmentModalLabel"},K={class:"modal-body"},W={key:0,class:"row layout-top-spacing"},Z={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},G={class:"panel p-0"},J={class:"custom-table table3"},Q={class:"table table-bordered table-striped"},aa=(0,l._)("thead",null,[(0,l._)("tr",{class:"text-dark"},[(0,l._)("th",null,"Employee"),(0,l._)("th",null,"Start Date"),(0,l._)("th",null,"End Date"),(0,l._)("th",null,"Leave Days"),(0,l._)("th",null,"Status")])],-1),ea={key:0,colspan:"5"},ta=(0,l._)("hr",{class:"mb-3"},null,-1),la={class:"row mb-3"},sa={class:"col-md-12"},oa=(0,l._)("label",{class:"form-label"},"Leave Attachment (PDF)",-1),na={class:"modal-footer"},ia=["disabled"],ca={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},da=(0,l.Uk)(" Upload ");var ra={setup(a){(0,c.j)({title:"Custom Table"});const e=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),t=(0,l.f3)("printEmployeeLeave"),v=(0,l.f3)("showMessage"),y=(0,l.f3)("showError"),k=(0,l.f3)("tableShimmer"),A=(0,s.iH)(!1),D=(0,s.iH)(""),T=(0,s.iH)(["Sno","employee","type","start_date","end_date","leave_days","remark","status","actions"]),ra=(0,s.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),ua=(0,s.iH)(""),ma=a=>{ua.value=a,pa(),ha()},va=(0,s.iH)([]),pa=async()=>{A.value=!0;try{const a=await e.get(`employee-leave?company_id=${ua.value}`);va.value=a.data.map(((a,e)=>{const t=new Date(a.start_date),l=new Date(a.end_date),s=Math.ceil((l-t)/864e5)+1;return{...a,Sno:e+1,attachment:"https://bushman.ink/api/v1/../../"+a.attachment,leave_attachment:a.attachment,employee:a.employee.name,type:a.leave_type.name,leave_days:s}}))}catch(a){y(a.message),console.log(a)}finally{A.value=!1}},ba=(0,s.iH)([]),ha=async()=>{const a=await e.get(`employees?company_id=${ua.value}`);ba.value=a.data},_a=(0,s.iH)(null),wa=a=>{_a.value=a},ga=a=>{ya.value=a.target.files[0]},ya=(0,s.iH)(""),fa=(0,s.iH)(!1),ka=async()=>{fa.value=!0;const a=new FormData;a.append("attachment",ya.value);try{await e.post(`/employee-leave/${_a.value.id}/attachment`,a,{headers:{"Content-Type":"multipart/form-data"}});Sa(),v("Leave attached successfully!"),Ca(),document.getElementById("close_attachment").click()}catch(t){y(t.message),console.log(t)}finally{fa.value=!1}},Ca=()=>{_a.value=null,ya.value=""},Sa=async()=>{const a=await e.get("employee-leave");va.value=a.data.map(((a,e)=>{const t=new Date(a.start_date),l=new Date(a.end_date),s=Math.ceil((l-t)/864e5)+1;return{...a,Sno:e+1,attachment:"https://bushman.ink/api/v1/../../"+a.attachment,leave_attachment:a.attachment,employee:a.employee.name,leave_days:s}}))};return(0,l.bv)((()=>{})),(a,e)=>{const i=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)("div",d,[r,(0,l._)("div",u,[(0,l._)("div",m,[(0,l._)("button",{class:"btn btn-success",onClick:e[0]||(e[0]=a=>(0,s.SU)(t)())},p)])]),((0,l.wg)(),(0,l.j4)(l.lR,{to:"#breadcrumb"},[(0,l._)("ul",b,[(0,l._)("li",h,[(0,l._)("div",_,[w,(0,l._)("ul",g,[(0,l._)("li",{onClick:e[1]||(e[1]=a=>ma(5))},f),(0,l._)("li",{onClick:e[2]||(e[2]=a=>ma(6))},C)])])])])])),(0,l._)("h3",S,(0,o.zw)(5==ua.value?"BUSHMAN SAFARI TRACKERS EMPLOYEES LEAVE LIST":6==ua.value?"COPEX CONTRACTORS EMPLOYEES LEAVE LIST":"EMPLOYEES LEAVE LIST"),1),(0,l._)("div",x,[(0,l._)("div",L,[(0,l._)("div",M,[A.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,s.SU)(k)()},null,8,E)):((0,l.wg)(),(0,l.iD)("div",H,[(0,l.Wm)(i,{data:va.value,columns:T.value,options:ra.value},{status:(0,l.w5)((a=>[(0,l._)("span",{class:(0,o.C_)(["badge inv-status","badge-"+a.row.status.color])},(0,o.zw)(a.row.status.name),3)])),actions:(0,l.w5)((a=>[3!=a.row.status_id||a.row.leave_attachment?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("svg",{key:0,onClick:e=>wa(a.row),"data-bs-toggle":"modal","data-bs-target":"#leave-attachment-modal",xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-cloud-upload text-success",viewBox:"0 0 16 16"},R,8,z)),a.row.leave_attachment?((0,l.wg)(),(0,l.iD)("a",{key:1,href:a.row.attachment,target:"_blank",rel:"noopener noreferrer"},q,8,V)):(0,l.kq)("",!0),(0,l._)("div",O,[(0,l._)("div",P,[(0,l._)("div",U,[j,(0,l._)("div",B,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Service Name","onUpdate:modelValue":e[3]||(e[3]=a=>D.value=a)},null,512),[[n.nr,D.value]])]),I])])])])),_:1},8,["data","columns","options"])]))])])]),(0,l._)("div",F,[(0,l._)("div",N,[(0,l._)("div",Y,[(0,l._)("div",$,[(0,l._)("h1",X,"Leave Attachment For "+(0,o.zw)(_a.value?.employee),1),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[4]||(e[4]=a=>Ca())})]),(0,l._)("form",{onSubmit:e[6]||(e[6]=(0,n.iM)((a=>ka()),["prevent"]))},[(0,l._)("div",K,[_a.value?((0,l.wg)(),(0,l.iD)("div",W,[(0,l._)("div",Z,[(0,l._)("div",G,[(0,l._)("div",J,[(0,l._)("table",Q,[aa,(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,(0,o.zw)(_a.value.employee),1),(0,l._)("td",null,(0,o.zw)(_a.value.start_date),1),(0,l._)("td",null,(0,o.zw)(_a.value.end_date),1),(0,l._)("td",null,(0,o.zw)(_a.value.leave_days),1),(0,l._)("td",null,[(0,l._)("span",{class:(0,o.C_)(["badge inv-status","badge-"+_a.value?.status?.color])},(0,o.zw)(_a.value?.status?.name),3)])]),(0,l._)("tr",null,[_a.value?.remark?((0,l.wg)(),(0,l.iD)("td",ea,"Remark : "+(0,o.zw)(_a.value?.remark),1)):(0,l.kq)("",!0)])])])])])])])):(0,l.kq)("",!0),ta,(0,l._)("div",la,[(0,l._)("div",sa,[oa,(0,l._)("input",{class:"form-control",type:"file",onChange:ga,accept:"application/pdf",required:""},null,32)])])]),(0,l._)("div",na,[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[5]||(e[5]=a=>Ca()),id:"close_attachment"},"Close"),(0,l._)("button",{type:"submit",class:"btn btn-primary",disabled:fa.value},[fa.value?((0,l.wg)(),(0,l.iD)("span",ca)):(0,l.kq)("",!0),da],8,ia)])],32)])])])])}}};const ua=ra;var ma=ua}}]);
//# sourceMappingURL=4289.4e433056.js.map