{"version":3,"file":"js/8007.cd64045d.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/hr/employees/absence.vue","webpack://cork-vue3/./src/views/hr/employees/absence.vue?713d"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">HR</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Employees Absence</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n<!-- compamy settings starts -->\r\n    <teleport to=\"#breadcrumb\">\r\n         <ul class=\"navbar-nav flex-row ms-auto\">\r\n                <li class=\"nav-item more-dropdown\">\r\n                    <div class=\"dropdown custom-dropdown-icon\">\r\n                        <a href=\"javascript:;\" class=\"nav-link dropdown-toggle\" id=\"ddlSettings\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                            <span>Select a company</span>\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"24\"\r\n                                height=\"24\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                stroke-width=\"2\"\r\n                                stroke-linecap=\"round\"\r\n                                stroke-linejoin=\"round\"\r\n                                class=\"feather feather-chevron-down\"\r\n                            >\r\n                                <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n                            </svg>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"ddlSettings\">\r\n                            <li @click=\"getData(5)\"><a class=\"dropdown-item\" data-value=\"Mail\" href=\"javascript:void(0);\">BUSHMAN SAFARI</a></li>\r\n                            <li @click=\"getData(6)\"><a class=\"dropdown-item\" data-value=\"Settings\" href=\"javascript:void(0);\">COPEX CONTRACTORS</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n    </teleport>\r\n\r\n <h3 class=\"text-center\">\r\n  {{ company_id == 5 ? 'BUSHMAN SAFARI TRACKERS EMPLOYEES ABSENT STATUS' : company_id == 6 ? 'COPEX CONTRACTORS EMPLOYEES ABSENT STATUS' : 'SELECT A COMPANY' }}\r\n</h3>\r\n\r\n <!-- company settings ends -->\r\n            <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n                            <div class=\"input-group\">\r\n                            <input type=\"month\" class=\"form-control me-2\" v-model=\"selectedMonth\">\r\n                           <button class=\"btn btn-success \"\r\n                             @click=\"printEmployeeList()\" \r\n                            >                           \r\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n  <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n</svg>\r\n</button>\r\n \r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>  \r\n\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n                    <div v-else class=\"custom-table table3\">\r\n                        <v-client-table :data=\"employeesList\" :columns=\"columns\" :options=\"table_option\">\r\n                              <template #biometric_id=\"props\">\r\n                                <span @click=\"updateBiometric(props.row)\" style=\"cursor: pointer;\" class=\"badge inv-status\" :class=\"props?.row?.biometric_id === null ? 'badge-primary':'badge-dark'\">\r\n                                    {{ props.row?.biometric_id ?? 'none'  }}\r\n                                </span>\r\n                            </template>\r\n                                    <template #absent_days=\"props\">\r\n                                <span @click=\"viewAbsent(props.row)\" style=\"cursor: pointer;\" class=\"badge inv-status\" :class=\"props?.row?.biometric_id === null ? 'badge-primary':'badge-dark'\" \r\n                                data-bs-toggle=\"modal\" data-bs-target=\"#absent\"\r\n                                >\r\n                                    {{ props.row?.absent_days ?? 'none'  }}\r\n                                </span>\r\n                            </template>\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row?.status?.color\">\r\n                                    {{ props.row?.status?.name }}\r\n                                </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n\r\n                                <a href=\"javascript:void(0);\" class=\"text-primary\" @click=\"OpenEmployeeViewModal(props.row)\"  data-bs-toggle=\"modal\" data-bs-target=\"#employee-view-modal\" >\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n                                </a>\r\n                               \r\n                                <a href=\"javascript:void(0);\" class=\"text-danger\" @click=\"DeleteEmployee(props.row)\" v-if=\"user_permissions.includes('can_delete_employees')\">\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-danger\"\r\n                                    >\r\n                                        <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                    </svg>\r\n                                </a>\r\n                                \r\n                                <a href=\"javascript:void(0);\" class=\"text-warning\" v-if=\"user_permissions.includes('can_edit_employees')\" @click=\"OpenEmployeeEditModal(props.row)\" data-bs-toggle=\"modal\" data-bs-target=\"#employee-edit-modal\">\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-success\"\r\n                                    >\r\n                                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                    </svg>\r\n                                </a>\r\n                                \r\n                            </template>\r\n                           \r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n<!-- Employee View modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"employee-view-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"employeeViewModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"employeeViewModalLabel\">Employee Details For {{ selectedEmployee?.name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <!-- Employee Information -->\r\n        <div class=\"row mb-3\" v-if=\"selectedEmployee\">\r\n          <div class=\"col-md-12\">\r\n             <div class=\"panel p-0\">\r\n            <div class=\"custom-table table3\">\r\n              <table class=\"table table-hover table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Employee Name</th>\r\n                    <th>Salary</th>\r\n                    <th>Contract Date</th>\r\n                    <th>Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>{{ selectedEmployee.name }}</td>\r\n                    <td>{{ selectedEmployee.salary }}</td>\r\n                    <td>{{ selectedEmployee.contract_date }}</td>\r\n                    <td>\r\n                      <span class=\"badge inv-status\" :class=\"'badge-' + selectedEmployee?.status?.color\">\r\n                        {{ selectedEmployee?.status?.name }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Attachment Section -->\r\n        <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h5 class=\"mb-0\"></h5>\r\n          <button type=\"button\" class=\"btn  btn-sm\" :class=\"showAttachmentForm ?'btn-danger':'btn-primary'\" @click=\"showAttachmentForm = !showAttachmentForm\">\r\n            <svg\r\n            v-if=\"!showAttachmentForm\"\r\n            xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-paperclip me-1\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z\"/>\r\n            </svg>\r\n            <span v-else>X</span>\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Attachment Form -->\r\n        <div v-if=\"showAttachmentForm\" class=\"row mb-3\">\r\n          <div class=\"col-md-12\">\r\n            <form @submit.prevent=\"uploadEmployeeAttachment()\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-9\">\r\n                  <label class=\"form-label\">Attachment Description</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    class=\"form-control\" \r\n                    v-model=\"attachmentDescription\"\r\n                    placeholder=\"Enter attachment description\"\r\n                  >\r\n                </div>\r\n                <div class=\"col-md-3\">\r\n                  <label class=\"form-label\">Attachment (PDF only)</label>\r\n                  <input \r\n                    type=\"file\" \r\n                    class=\"form-control\" \r\n                    @change=\"handleEmployeeAttachmentUpload\"\r\n                    accept=\"application/pdf\"\r\n                    required\r\n                  >\r\n                </div>\r\n              </div>\r\n              <div class=\"row mt-3\">\r\n                <div class=\"col-md-12 text-end\">\r\n                  <button type=\"button\" class=\"btn btn-secondary me-2\" @click=\"cancelAttachmentUpload()\">\r\n                    Cancel\r\n                  </button>\r\n                  <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"uploadingEmployeeAttachment\">\r\n                    <span v-if=\"uploadingEmployeeAttachment\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n                    Upload\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Employee Attachments Table -->\r\n        <h5 class=\"mb-3\">Employee Attachments</h5>\r\n        <div class=\"row mb-3\">\r\n          <div class=\"col-md-12\">\r\n            <div class=\"panel p-0\">\r\n                <div v-if=\"loadingAttachments\" v-html=\"tableShimmer()\"></div>\r\n              <div v-else class=\"custom-table table3\">\r\n                <v-client-table \r\n                  :data=\"employeeAttachments\" \r\n                  :columns=\"attachmentColumns\" \r\n                  :options=\"table_option\"\r\n                >\r\n                  <template #actions=\"props\">\r\n                   <a :href=\"props.row.attachment\" \r\n   target=\"_blank\" \r\n   rel=\"noopener noreferrer\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-file-earmark-pdf text-primary\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z\"/>\r\n  <path d=\"M4.603 14.087a.8.8 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.7 7.7 0 0 1 1.482-.645 20 20 0 0 0 1.062-2.227 7.3 7.3 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a11 11 0 0 0 .98 1.686 5.8 5.8 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.86.86 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.7 5.7 0 0 1-.911-.95 11.7 11.7 0 0 0-1.997.406 11.3 11.3 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.8.8 0 0 1-.58.029m1.379-1.901q-.25.115-.459.238c-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361q.016.032.026.044l.035-.012c.137-.056.355-.235.635-.572a8 8 0 0 0 .45-.606m1.64-1.33a13 13 0 0 1 1.01-.193 12 12 0 0 1-.51-.858 21 21 0 0 1-.5 1.05zm2.446.45q.226.245.435.41c.24.19.407.253.498.256a.1.1 0 0 0 .07-.015.3.3 0 0 0 .094-.125.44.44 0 0 0 .059-.2.1.1 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a4 4 0 0 0-.612-.053zM8.078 7.8a7 7 0 0 0 .2-.828q.046-.282.038-.465a.6.6 0 0 0-.032-.198.5.5 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822q.036.167.09.346z\"/>\r\n</svg>\r\n</a>\r\n                  </template>\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Employee View modal ends -->\r\n\r\n\r\n<!-- Employee Edit modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"employee-edit-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"employeeEditModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"employeeEditModalLabel\">Edit Employee {{ employee_name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <form @submit.prevent=\"updateEmployee()\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-6\">\r\n              <div class=\"form-group mb-3\">\r\n                <label class=\"form-label\">Employee Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  v-model=\"employee_name\"\r\n                >\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-6\">\r\n              <div class=\"form-group mb-3\">\r\n                <label class=\"form-label\">Department</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  v-model=\"employee_department\"\r\n                >\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-6\">\r\n              <div class=\"form-group mb-3\">\r\n                <label class=\"form-label\">Salary</label>\r\n                <input\r\n                  class=\"form-control\"\r\n                  type=\"number\"\r\n                  step=\"any\"\r\n                  placeholder=\"Enter Salary\"\r\n                  v-model=\"employee_salary\"\r\n                  required\r\n                >\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-6\">\r\n              <div class=\"form-group mb-3\">\r\n                <label class=\"form-label\">Contract Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  class=\"form-control\"\r\n                  v-model=\"employee_contract_date\"\r\n                  required\r\n                >\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"close_editing_employee\">Cancel</button>\r\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"updateEmployee\" :disabled=\"updatingEmployee\">\r\n          <span v-if=\"updatingEmployee\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n          Update\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Employee Edit modal ends -->\r\n\r\n<!-- Employee Edit modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"biometric-update-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"employeeEditModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog \">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"employeeEditModalLabel\">Biometric ID for  {{ employee_name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"biometric-close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <form @submit.prevent=\"updateEmployee()\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n              <div class=\"form-group mb-3\">\r\n                <label class=\"form-label\">Enter Biometric ID</label>\r\n                <input\r\n                  type=\"number\"\r\n                  class=\"form-control\"\r\n                  v-model=\"biometric_id\"\r\n                >\r\n              </div>\r\n            </div>\r\n\r\n\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"close_editing_employee\">Cancel</button>\r\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"updateEmployee\" :disabled=\"updatingEmployee\">\r\n          <span v-if=\"updatingEmployee\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n          Update\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Employee Edit modal ends -->\r\n <button style=\"display: none;\" id=\"biometric\" data-bs-toggle=\"modal\" data-bs-target=\"#biometric-update-modal\"></button>\r\n\r\n<!-- absent days modal starts -->\r\n <div class=\"modal fade mymodal\" id=\"absent\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"employeeEditModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog \">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"employeeEditModalLabel\">ABSENT DAYS FOR  {{ employee_name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"biometric-close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n         <ol class=\"list-group list-group-numbered\">\r\n             <li v-for=\"absent in selectedEmployee?.absent_dates\" class=\"list-group-item\">{{ absent }}</li>\r\n         </ol>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" id=\"close_editing_employee\">Cancel</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n <!-- absent modall ends -->\r\n    </div>\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref ,inject,watch } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\nimport Multiselect from '@suadelabs/vue3-multiselect';\r\nimport '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n     const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const showMessage = inject('showMessage')\r\n    const showError = inject('showError')\r\n    const formatNumber = inject('formatNumber')\r\n    const formatDate = inject('formatDate')\r\n    const printEmployeeList = inject('printEmployeeList')\r\n    const selectedMonth = ref('')\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['Sno', 'name','absent_days','sundays','total_days','biometric_id','salary_deduction']);\r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 , 100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'service_name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const company_id = ref('')\r\n\r\n    const employeesList = ref([])\r\n\r\n  const getEmployees = async () => {\r\n        loading_spinner.value = true;\r\n        try{\r\n        const response = await axiosInstance.get(`employee-absence?company_id=${company_id.value}&month=${selectedMonth.value}`)\r\n        employeesList.value = response.data.map((item,index)=>({\r\n         ...item,\r\n         Sno : index + 1,\r\n         salary_deduction : formatNumber(item.salary_deduction),\r\n         employee_salary : item.salary,\r\n         name : item.name.toUpperCase(),\r\n         biometric_id : item.emp_device_id ,\r\n        }))\r\n        }catch(error){\r\n            console.log(error)\r\n            showError(error.message)\r\n        }finally{\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n        watch(selectedMonth, (newVal) => {\r\n    if (newVal) {\r\n       getEmployees()\r\n    }\r\n});\r\n\r\n    const selectedEmployee = ref(null)\r\n    const OpenEmployeeViewModal = async (row) => {\r\n        selectedEmployee.value = row;\r\n        await getEmployeeAttachments(row.id);\r\n    };\r\n\r\n\r\n    const showAttachmentForm = ref(false);\r\nconst attachmentDescription = ref('');\r\nconst employeeAttachment = ref(null);\r\nconst uploadingEmployeeAttachment = ref(false);\r\n\r\nconst handleEmployeeAttachmentUpload = (e) => {\r\n    employeeAttachment.value = e.target.files[0];\r\n};\r\n\r\nconst uploadEmployeeAttachment = async () => {\r\n    uploadingEmployeeAttachment.value = true;\r\n\r\n    const formData = new FormData();\r\n    formData.append('employee_id', selectedEmployee.value.id);\r\n    formData.append('remark', attachmentDescription.value);\r\n    formData.append('attachment', employeeAttachment.value);\r\n\r\n    try {\r\n        const response = await axiosInstance.post(\r\n            'employee-attachments',\r\n            formData,\r\n            { headers: { 'Content-Type': 'multipart/form-data' } }\r\n        );\r\n        \r\n        showMessage('Employee attachment uploaded successfully!');\r\n        await getReactiveEmployeeAttachments(selectedEmployee.value.id);\r\n        cancelAttachmentUpload();\r\n        \r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n    } finally {\r\n        uploadingEmployeeAttachment.value = false;\r\n    }\r\n};\r\n\r\nconst cancelAttachmentUpload = () => {\r\n    showAttachmentForm.value = false;\r\n    attachmentDescription.value = '';\r\n    employeeAttachment.value = null;\r\n    const fileInput = document.querySelector('input[type=\"file\"]');\r\n    if (fileInput) fileInput.value = '';\r\n};\r\n\r\n\r\nconst employeeAttachments = ref([]);\r\nconst attachmentColumns = ref(['Sno', 'description', 'date', 'actions']);\r\n\r\nconst loadingAttachments = ref(false);\r\nconst getEmployeeAttachments = async (employeeId) => {\r\n    loadingAttachments.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`employee-attachments?employee_id=${employeeId}`);\r\n        employeeAttachments.value = response.data.map((item, index) => ({\r\n            ...item,\r\n            Sno: index + 1,\r\n            attachment: process.env.VUE_APP_API_BASE_URL + '../../' + item.attachment,  \r\n            date: formatDate(item.created_at),\r\n            description: item.remark\r\n        }));\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n    }finally{\r\n        loadingAttachments.value = false; \r\n    }\r\n};\r\n\r\n const getReactiveEmployeeAttachments = async (employeeId) => {\r\n      const response = await axiosInstance.get(`employee-attachments?employee_id=${employeeId}`); // Load employee attachments from the API using employeeId as a parameter. This will fetch the attachments for the selected employee. You can also use the employeeId from the selectedEmployee.value.id. This is just an example. You can use any other method to get the employeeId.\r\n        employeeAttachments.value = response.data.map((item, index) => ({\r\n            ...item,\r\n            Sno: index + 1,\r\n            attachment: process.env.VUE_APP_API_BASE_URL + '../../' + item.attachment,  \r\n            date: formatDate(item.created_at),\r\n            description: item.remark\r\n        }));\r\n\r\n }\r\n\r\n  const getReactiveEmployees = async () => {\r\n    const response = await axiosInstance.get(`employees?company_id=${company_id.value}`)\r\n        employeesList.value = response.data.map((item,index)=>({\r\n         ...item,\r\n         Sno : index + 1,\r\n         salary : formatNumber(item.salary),\r\n         employee_salary : item.salary,\r\n         name : item.name.toUpperCase(),\r\n         biometric_id : item.ghrm_employee_id\r\n        }))\r\n        document.getElementById('biometric-close').click()\r\n  };\r\n\r\n const showConfirmation = inject('showConfirmation');\r\nconst DeleteEmployee = async (item) => {\r\n  const result = await showConfirmation(\r\n    'Delete Record',\r\n    `Are you sure you want to delete ${item.name}?`,\r\n    `employees/${item.id}`,\r\n    'delete'\r\n  )\r\n\r\n  if (result?.refresh) {\r\n    getReactiveEmployees()\r\n  }\r\n}\r\n\r\n const employee_name = ref('')\r\n const employee_department = ref('')\r\n const employee_salary = ref('')\r\n const employee_contract_date = ref('')\r\n const updatingEmployee = ref(false)\r\n const biometric_id = ref(null)\r\n\r\n const updateEmployee = async () => {\r\n    updatingEmployee.value = true;\r\nconst payload = Object.fromEntries(\r\n    Object.entries({\r\n        name: employee_name.value,\r\n        department: employee_department.value,\r\n        salary: employee_salary.value,\r\n        contract_date: employee_contract_date.value,\r\n        ghrm_employee_id: biometric_id.value\r\n    }).filter(([_, value]) => value !== null && value !== '' && value !== undefined)\r\n)\r\n\r\n    try {\r\n        const response = await axiosInstance.put(`employees/${selectedEmployee.value.id}`, payload);\r\n        getReactiveEmployees()\r\n        showMessage('Employee updated successfully!');\r\n        document.getElementById('close_editing_employee').click();\r\n    } catch (error) {\r\n      console.log(error)\r\n        showError(error.message);\r\n    } finally {\r\n        updatingEmployee.value = false;\r\n    }\r\n}\r\n const OpenEmployeeEditModal = (row) => {\r\n    selectedEmployee.value = row;\r\n    employee_name.value = row.name;\r\n    employee_department.value = row.department;\r\n    employee_salary.value = row.employee_salary;\r\n    employee_contract_date.value = row.contract_date;\r\n };\r\n\r\n   const getData = (company)=>{\r\n        company_id.value = company\r\n        getEmployees(); \r\n   }\r\n\r\n   const updateBiometric = (employee)=>{\r\n    selectedEmployee.value = employee\r\n    document.getElementById('biometric').click()\r\n    employee_name.value = employee.name\r\n   }\r\n\r\n      const viewAbsent = (employee)=>{\r\n    selectedEmployee.value = employee\r\n    document.getElementById('absent').click()\r\n    employee_name.value = employee.name\r\n   }\r\n\r\n    onMounted(async () => {\r\n      // \r\n\r\n    });\r\n\r\n\r\n</script>","import script from \"./absence.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./absence.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./absence.vue?vue&type=style&index=0&id=7a9287ef&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","user_permissions","JSON","parse","localStorage","getItem","permissions","showMessage","inject","showError","formatNumber","formatDate","printEmployeeList","selectedMonth","ref","tableShimmer","loading_spinner","columns","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","company_id","employeesList","getEmployees","async","value","response","get","data","map","item","index","Sno","salary_deduction","employee_salary","salary","name","toUpperCase","biometric_id","emp_device_id","error","console","log","message","watch","newVal","selectedEmployee","OpenEmployeeViewModal","row","getEmployeeAttachments","id","showAttachmentForm","attachmentDescription","employeeAttachment","uploadingEmployeeAttachment","handleEmployeeAttachmentUpload","e","target","files","uploadEmployeeAttachment","formData","FormData","append","post","headers","getReactiveEmployeeAttachments","cancelAttachmentUpload","fileInput","document","querySelector","employeeAttachments","attachmentColumns","loadingAttachments","employeeId","attachment","date","created_at","description","remark","getReactiveEmployees","ghrm_employee_id","getElementById","click","showConfirmation","DeleteEmployee","result","refresh","employee_name","employee_department","employee_contract_date","updatingEmployee","updateEmployee","payload","Object","fromEntries","entries","department","contract_date","_","undefined","put","OpenEmployeeEditModal","getData","company","updateBiometric","employee","viewAbsent","onMounted","__exports__"],"sourceRoot":""}