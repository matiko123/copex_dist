"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5091],{25091:function(e,l,a){a.r(l),a.d(l,{default:function(){return ve}});var s=a(66252),o=a(49963),t=a(2262),r=a(3577),n=a(87066),i=a(56296),u=a(26212),d=a.n(u);const c={class:"layout-px-spacing"},v=(0,s.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Users</span></li></ol></nav></div></li></ul>',1),m={class:"d-flex me-4 mt-2"},p={class:"ms-auto"},b=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,s._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),_=[b],h=(0,s._)("h4",{class:"text-center"},"USER REGISTRATION FORM",-1),w={class:"row mb-2"},g={class:"col-md-2"},f=(0,s._)("label",{class:"form-label"},"User Name",-1),y={class:"col-md-2"},U=(0,s._)("label",{class:"form-label"},"User Role",-1),k={class:"col-md-3"},x=(0,s._)("label",{class:"form-label"},"Email",-1),H={class:"col-md-3"},V=(0,s._)("label",{class:"form-label"},"Phone Number",-1),E={class:"col-md-2"},C=(0,s._)("label",{class:"form-label"},"Password",-1),S={class:"text-center gap-2 justify-content-end"},M=(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),P={class:"row layout-top-spacing"},R={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},D={class:"panel p-0"},q={class:"custom-table table3"},I=["innerHTML"],N=["onClick"],j=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,s._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,s._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),L=[j],z={class:"modal fade mymodal",id:"edit-user-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editUserModalLabel","aria-hidden":"true"},T={class:"modal-dialog modal-xl"},B={class:"modal-content"},A={class:"modal-header"},O=(0,s._)("h1",{class:"modal-title fs-5",id:"editUserModalLabel"},"Edit User",-1),W={class:"modal-body"},F={class:"row"},G={class:"col-md-6"},Z=(0,s._)("label",{class:"form-label"},"User Name",-1),$={class:"col-md-6"},J=(0,s._)("label",{class:"form-label"},"Email",-1),K={class:"col-md-6"},Q=(0,s._)("label",{class:"form-label"},"Phone Number",-1),X={class:"col-md-6"},Y=(0,s._)("label",{class:"form-label"},"User Role",-1),ee={class:"col-md-6"},le={class:"form-check-label"},ae=(0,s.Uk)(" Update Password "),se={key:0,class:"col-md-6"},oe=(0,s._)("label",{class:"form-label"},"New Password",-1),te={class:"modal-footer"},re=(0,s._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",id:"close_editing"},"Close",-1),ne=["disabled"],ie={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},ue={key:1};var de={setup(e){(0,i.j)({title:"Custom Table"});const l=(0,t.iH)(!1),a=(0,s.f3)("showMessage"),u=(0,s.f3)("showError"),b=(0,s.f3)("tableShimmer"),j=((0,t.iH)(""),(0,t.iH)(!1)),de=(0,t.iH)(""),ce=(0,t.iH)(""),ve=(0,t.iH)(""),me=(0,t.iH)(""),pe=(0,t.iH)(""),be=(0,t.iH)(""),_e=((0,t.iH)(""),(0,t.iH)([])),he=(0,t.iH)(["Sn","User_ID","Role","Username","Email","phone_no","actions"]),we=(0,t.iH)([]),ge=(0,t.iH)(!1),fe=(0,t.iH)({perPage:10,perPageValues:[10,20,50],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["Sn","User ID"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),ye=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),Ue=()=>{j.value=!0,ye.get("/roles").then((e=>{_e.value=e.data,console.log("user roles",e.data),j.value=!1}))},ke=()=>{j.value=!0,ye.get("/users").then((e=>{we.value=e.data.map(((e,l)=>({...e,Sn:l+1,Role:e.role,User_ID:e.id,Username:e.name,Email:e.email,phone_no:e.phone_no}))),j.value=!1}))},xe=()=>{if(!de.value||!ce.value)return void u("Please!..Provide username and email.");if(!me.value)return void u("User must have password...");ge.value=!1,j.value=!0;const e={name:de.value,email:ce.value,role:pe.value.id,password:me.value,phone_no:ve.value};console.log(e),ye.post("/users",e).then((e=>{ke(),j.value=!1,a("User registered successfully!")})).catch((e=>{console.error("Error registering User:",e),u(e.message)})),j.value=!1},He=(0,t.iH)(!1),Ve=e=>{He.value=!0;const l={role:pe.value.id,name:de.value,email:ce.value,phone_no:ve.value,...me.value&&{password:me.value}};ye.put(`/users/${e}`,l).then((e=>{ke(),document.getElementById("close_editing").click(),a("User updated successfully!")})).catch((e=>{u(e.message),console.log(e)})).finally((()=>{He.value=!1}))},Ee=e=>{const l=parseInt(e.role);pe.value=_e.value.find((e=>e.id===l))||"",me.value="",de.value=e.name,ce.value=e.email,ve.value=e.phone_no,be.value=e.id},Ce=()=>{pe.value="",me.value="",de.value="",ce.value="",ve.value="",ve.value=""};return(0,s.bv)((()=>{ke(),Ue()})),(e,a)=>{const n=(0,s.up)("v-client-table");return(0,s.wg)(),(0,s.iD)("div",c,[v,(0,s._)("div",m,[(0,s._)("div",p,[(0,s._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=e=>ge.value=!ge.value)},_)])]),ge.value?((0,s.wg)(),(0,s.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:a[7]||(a[7]=(0,o.iM)((e=>xe()),["prevent"]))},[h,(0,s._)("div",w,[(0,s._)("div",g,[f,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Enter User Name","onUpdate:modelValue":a[1]||(a[1]=e=>de.value=e),required:""},null,512),[[o.nr,de.value]])]),(0,s._)("div",y,[U,(0,s.Wm)((0,t.SU)(d()),{modelValue:pe.value,"onUpdate:modelValue":a[2]||(a[2]=e=>pe.value=e),options:_e.value,placeholder:"select role",label:"name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,s._)("div",k,[x,(0,s.wy)((0,s._)("input",{type:"email",class:"form-control",placeholder:"Enter Email","onUpdate:modelValue":a[3]||(a[3]=e=>ce.value=e),step:"any",required:""},null,512),[[o.nr,ce.value]])]),(0,s._)("div",H,[V,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",placeholder:"Enter Phone Number","onUpdate:modelValue":a[4]||(a[4]=e=>ve.value=e),step:"any",required:""},null,512),[[o.nr,ve.value]])]),(0,s._)("div",E,[C,(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",placeholder:"Enter Password","onUpdate:modelValue":a[5]||(a[5]=e=>me.value=e),step:"any",required:""},null,512),[[o.nr,me.value]])])]),(0,s._)("div",S,[(0,s._)("button",{type:"button",class:"btn btn-danger me-3",onClick:a[6]||(a[6]=e=>{ge.value=!1,Ce()})},"Cancel"),M])],32)):(0,s.kq)("",!0),(0,s._)("div",P,[(0,s._)("div",R,[(0,s._)("div",D,[(0,s._)("div",q,[j.value?((0,s.wg)(),(0,s.iD)("div",{key:0,innerHTML:(0,t.SU)(b)()},null,8,I)):((0,s.wg)(),(0,s.j4)(n,{key:1,data:we.value,columns:he.value,options:fe.value},{status:(0,s.w5)((e=>[(0,s._)("span",{class:(0,r.C_)(["badge inv-status","badge-"+e.row.status.class])},(0,r.zw)(e.row.status.key),3)])),actions:(0,s.w5)((e=>[(0,s._)("a",{href:"javascript:void(0)",class:"text-success",title:"Edit",onClick:l=>Ee(e.row),"data-bs-toggle":"modal","data-bs-target":"#edit-user-modal"},L,8,N)])),_:1},8,["data","columns","options"]))])])])]),(0,s._)("div",z,[(0,s._)("div",T,[(0,s._)("div",B,[(0,s._)("div",A,[O,(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close_editing",onClick:a[8]||(a[8]=e=>Ce())})]),(0,s._)("form",{onSubmit:a[15]||(a[15]=(0,o.iM)((e=>Ve(be.value)),["prevent"]))},[(0,s._)("div",W,[(0,s._)("div",F,[(0,s._)("div",G,[Z,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=e=>de.value=e)},null,512),[[o.nr,de.value]])]),(0,s._)("div",$,[J,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control bg-white","onUpdate:modelValue":a[10]||(a[10]=e=>ce.value=e)},null,512),[[o.nr,ce.value]])]),(0,s._)("div",K,[Q,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control bg-white","onUpdate:modelValue":a[11]||(a[11]=e=>ve.value=e)},null,512),[[o.nr,ve.value]])]),(0,s._)("div",X,[Y,(0,s.Wm)((0,t.SU)(d()),{modelValue:pe.value,"onUpdate:modelValue":a[12]||(a[12]=e=>pe.value=e),options:_e.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select a role",searchable:!0},null,8,["modelValue","options"])]),(0,s._)("div",ee,[(0,s._)("label",le,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=e=>l.value=e),class:"form-check-input"},null,512),[[o.e8,l.value]]),ae])]),l.value?((0,s.wg)(),(0,s.iD)("div",se,[oe,(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":a[14]||(a[14]=e=>me.value=e),class:"form-control"},null,512),[[o.nr,me.value]])])):(0,s.kq)("",!0)])]),(0,s._)("div",te,[re,(0,s._)("button",{type:"submit",class:"btn btn-secondary",disabled:He.value},[He.value?((0,s.wg)(),(0,s.iD)("span",ie)):((0,s.wg)(),(0,s.iD)("span",ue,"Save changes"))],8,ne)])],32)])])])])}}};const ce=de;var ve=ce}}]);
//# sourceMappingURL=5091.cf9d0ee7.js.map