"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[9430],{9430:function(a,e,l){l.r(e),l.d(e,{default:function(){return X}});l(26699);var s=l(66252),t=l(2262),n=l(3577),o=l(49963),i=l(87066),c=l(56296);l(26212);const u={class:"layout-px-spacing"},r=(0,s.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">HR</a></li><li class="breadcrumb-item active" aria-current="page"><span>Leave</span></li><li class="breadcrumb-item active" aria-current="page"><span>Balance</span></li></ol></nav></div></li></ul><h3 class="text-center">LEAVE ENCASHMENT REQUESTS</h3>',2),d={class:"d-flex me-4 mt-2"},v={class:"ms-auto"},b=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,s._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),m=[b],p={class:"row layout-top-spacing"},_={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},g={class:"panel p-0"},h={class:"custom-table table3"},w=["onClick"],k=(0,s._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"},null,-1),y=(0,s._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"},null,-1),f=[k,y],C={class:"modal fade mymodal",id:"view-leaves",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"false"},H={class:"modal-dialog modal-xl",role:"document"},x={class:"modal-content"},E={class:"modal-header"},S={class:"modal-title",id:"exampleModalLabel"},R=(0,s._)("button",{type:"button","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close",class:"btn-close",id:"close-approval"},null,-1),q={class:"modal-body"},M={class:"row layout-top-spacing"},z={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},D={class:"panel p-0"},A={class:"custom-table table3"},L={key:0,class:"table table-bordered"},U=(0,s._)("thead",{class:"table-light"},[(0,s._)("tr",null,[(0,s._)("th",null,"Date Requested"),(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Status")])],-1),T={key:0},V={colspan:"4"},j={key:0,class:"d-flex justify-content-center mb-3 mt-2"},N={key:0,class:"btn-group"},B=["disabled"],I=["disabled"],P=["disabled"],O=["disabled"],Q={key:1,class:"mb-2 text-center"},F={key:2,class:"input-group"},J=["placeholder"],W=["disabled"],Y=["innerHTML"],Z={key:1},$=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn bg-danger text-white","data-dismiss":"modal","data-bs-dismiss":"modal"},[(0,s._)("i",{class:"flaticon-cancel-12"}),(0,s.Uk)("CLOSE")])],-1);var G={setup(a){(0,c.j)({title:"Custom Table"});const e=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),l=(0,t.iH)(!1),b=(0,t.iH)(""),k=(0,s.f3)("printEmployees"),y=(0,s.f3)("showMessage"),G=(0,s.f3)("showError"),K=(0,s.f3)("formatNumber"),X=(0,s.f3)("formatDate"),aa=((0,t.iH)(""),(0,t.iH)(["Sno","employee","date_requested","amount","status","actions"])),ea=((0,t.iH)(["Sno","start_date","end_date","leave_days","status","remark","actions"]),JSON.parse(localStorage.getItem("user")).permissions),la=(0,t.iH)(""),sa=(0,t.iH)([]),ta=(0,t.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),na=((0,t.iH)(!1),(0,t.iH)("")),oa=(0,t.iH)([]),ia=async()=>{const a=[2,4,17,14],l=await e.get("leave-encashments",{params:{status_id:a}});oa.value=l.data.map(((a,e)=>({...a,Sno:e+1,employee:a.employee.name,date_requested:X(a.created_at),amount:K(a.amount)})))},ca=async()=>{const a={status_id:la.value,remark:b.value};try{await e.put(`leave-encashments/${na.value.id}`,a);y("Confirmed"),document.getElementById("close-approval").click(),ia(),b.value="",la.value=""}catch(l){G(l.message),console.log(l)}};return(0,s.bv)((()=>{ia()})),(a,e)=>{const i=(0,s.up)("v-client-table");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",u,[r,(0,s._)("div",d,[(0,s._)("div",v,[(0,s._)("button",{class:"btn btn-success",onClick:e[0]||(e[0]=a=>(0,t.SU)(k)(sa.value))},m)])]),(0,s._)("div",p,[(0,s._)("div",_,[(0,s._)("div",g,[(0,s._)("div",h,[(0,s.Wm)(i,{data:oa.value,columns:aa.value,options:ta.value},{status:(0,s.w5)((a=>[(0,s._)("span",{class:(0,n.C_)(["badge inv-status","badge-"+a.row.status.color])},(0,n.zw)(a.row.status.name),3)])),actions:(0,s.w5)((a=>[((0,s.wg)(),(0,s.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-eye text-primary",viewBox:"0 0 16 16","data-bs-toggle":"modal","data-bs-target":"#view-leaves",onClick:e=>na.value=a.row},f,8,w))])),_:1},8,["data","columns","options"])])])])])]),(0,s._)("div",C,[(0,s._)("div",H,[(0,s._)("div",x,[(0,s._)("div",E,[(0,s._)("h5",S,(0,n.zw)(na.value?.employee?.toUpperCase())+" LEAVE ENCASHMENT REQUEST",1),R]),(0,s._)("div",q,[(0,s._)("div",M,[(0,s._)("div",z,[(0,s._)("div",D,[(0,s._)("div",A,[na.value?((0,s.wg)(),(0,s.iD)("table",L,[U,(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",null,(0,n.zw)(na.value.date_requested),1),(0,s._)("td",null,(0,n.zw)(na.value.amount),1),(0,s._)("td",null,[(0,s._)("span",{class:(0,n.C_)(["badge inv-status","badge-"+na.value.status.color])},(0,n.zw)(na.value.status.name),3)])]),na.value.remark?((0,s.wg)(),(0,s.iD)("tr",T,[(0,s._)("td",V,"Remark : "+(0,n.zw)(na.value.remark),1)])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])]),3!=na.value.status_id?((0,s.wg)(),(0,s.iD)("div",j,[(0,t.SU)(ea).includes("can_approve_encashment")?((0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("button",{class:"btn btn-primary me-2",onClick:e[1]||(e[1]=a=>la.value=3),disabled:l.value},"Approve",8,B),(0,s._)("button",{class:"btn btn-danger me-2",onClick:e[2]||(e[2]=a=>la.value=4),disabled:l.value},"Reject",8,I),(0,s._)("button",{class:"btn btn-warning me-2",onClick:e[3]||(e[3]=a=>la.value=17),disabled:l.value},"Hold Request",8,P),(0,s._)("button",{class:"btn btn-info me-2",onClick:e[4]||(e[4]=a=>la.value=14),disabled:l.value},"Remark",8,O)])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),la.value?((0,s.wg)(),(0,s.iD)("div",Q,[(0,s._)("span",{class:(0,n.C_)(["badge rounded-pill",{"bg-danger":4==la.value,"bg-success":3==la.value,"bg-warning":17==la.value,"bg-info":3!=la.value&&4!=la.value}]),style:{"font-size":"1rem"}},(0,n.zw)(3==la.value?"Approve Request":17==la.value?"Hold Request":4==la.value?"Reject Request":"Fill Remark"),3)])):(0,s.kq)("",!0),la.value?((0,s.wg)(),(0,s.iD)("div",F,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:3==la.value?"Enter Approval Remark":4==la.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":e[5]||(e[5]=a=>b.value=a)},null,8,J),[[o.nr,b.value]]),(0,s._)("button",{class:"btn btn-primary",type:"button",disabled:l.value,onClick:e[6]||(e[6]=a=>ca())},[l.value?((0,s.wg)(),(0,s.iD)("span",{key:0,innerHTML:a.loadingSpinner()},null,8,Y)):((0,s.wg)(),(0,s.iD)("span",Z,"Save"))],8,W)])):(0,s.kq)("",!0)])])]),$])])])],64)}}};const K=G;var X=K}}]);
//# sourceMappingURL=9430.64a1346f.js.map