{"version":3,"file":"js/8433.86e1d272.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/cards.vue","webpack://cork-vue3/./src/views/masters/cards.vue?25a5"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing dash_1\">\r\n        <teleport to=\"#breadcrumb\">\r\n            <ul class=\"navbar-nav flex-row\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Dashboard</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Sales</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n            <ul class=\"navbar-nav flex-row ms-auto\">\r\n                <li class=\"nav-item more-dropdown\">\r\n                    <div class=\"dropdown custom-dropdown-icon\">\r\n                        <a href=\"javascript:;\" class=\"nav-link dropdown-toggle\" id=\"ddlSettings\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                            <span>Settings</span>\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"24\"\r\n                                height=\"24\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                stroke-width=\"2\"\r\n                                stroke-linecap=\"round\"\r\n                                stroke-linejoin=\"round\"\r\n                                class=\"feather feather-chevron-down\"\r\n                            >\r\n                                <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n                            </svg>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"ddlSettings\">\r\n                            <li><a class=\"dropdown-item\" data-value=\"Settings\" href=\"javascript:void(0);\">Settings</a></li>\r\n                            <li><a class=\"dropdown-item\" data-value=\"Mail\" href=\"javascript:void(0);\">Mail</a></li>\r\n                            <li><a class=\"dropdown-item\" data-value=\"Print\" href=\"javascript:void(0);\">Print</a></li>\r\n                            <li><a class=\"dropdown-item\" data-value=\"Download\" href=\"javascript:void(0);\">Download</a></li>\r\n                            <li><a class=\"dropdown-item\" data-value=\"Share\" href=\"javascript:void(0);\">Share</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </teleport>\r\n\r\n        <!-- dynamic card starts -->\r\n  <div class=\"row layout-top-spacing\">\r\n\r\n\r\n      <!-- v-if=\"!card.permission || user_permissions.includes(card.permission)\"  -->\r\n<template v-for=\"card in cards\" :key=\"card.id\">\r\n  <div \r\n    class=\"col-xl-4 col-lg-6 col-md-6 col-sm-12 mb-4\"\r\n  >\r\n    <div class=\"card shadow-lg p-3 h-100 position-relative\">\r\n      <div class=\"position-absolute top-0 end-0 m-2 me-2 \" role=\"button\" tabindex=\"0\" >\r\n        <svg \r\n        @click=\"deleteCard(card)\"\r\n        xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" viewBox=\"0 0 24 24\" fill=\"red\" aria-label=\"Delete\">\r\n          <path d=\"M3 6h18v2H3V6zm2 3h14l-1.2 11.4A2 2 0 0 1 15.8 22H8.2a2 2 0 0 1-1.999-1.6L5 9zm5-7h4l1 1H7l1-1z\"/>\r\n        </svg>\r\n        <svg \r\n   data-bs-toggle=\"modal\" data-bs-target=\"#edit\"\r\n    @click=\"fillCardEdit(card)\"\r\n    xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"/>\r\n  <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z\"/>\r\n</svg>\r\n      </div>\r\n\r\n      <Router-link :to=\"`#`\" class=\"text-decoration-none\">\r\n        <div class=\"mb-3\">\r\n          <h4 class=\"text-dark\">{{ card.name }}</h4>\r\n          <sub>{{ card.permission }}</sub>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n   <div v-for=\"subcard in card.sub_cards\" :key=\"subcard.id\" class=\"col-6 mb-3 position-relative\">\r\n  <div class=\"mb-1\">\r\n    <svg \r\n      @click.stop=\"deleteSubCard(card, subcard)\"\r\n      xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" viewBox=\"0 0 24 24\" fill=\"red\" aria-label=\"Delete\">\r\n      <path d=\"M3 6h18v2H3V6zm2 3h14l-1.2 11.4A2 2 0 0 1 15.8 22H8.2a2 2 0 0 1-1.999-1.6L5 9zm5-7h4l1 1H7l1-1z\"/>\r\n    </svg>\r\n\r\n    <svg \r\n      @click.stop=\"fillSubcardEdit(subcard)\"\r\n      data-bs-toggle=\"modal\" data-bs-target=\"#edit-subcard\"\r\n      xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"/>\r\n      <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z\"/>\r\n    </svg>\r\n  </div>\r\n\r\n  <Router-link :to=\"`#`\">\r\n    <div class=\"card shadow border-start-primary h-100 p-3 d-flex flex-column align-items-center justify-content-center\" :class=\"`text-${subcard.color}`\">\r\n      <h6 :class=\"`text-${subcard.color}`\">{{ subcard.name }}</h6>\r\n      <h4 :class=\"`text-${subcard.color}`\">\r\n        <v-f-number \r\n          :start-val=\"0\" \r\n          :end-val=\"getCountValue(subcard.count_source)\" \r\n          :duration=\"3000\"\r\n        />\r\n      </h4>\r\n    </div>\r\n  </Router-link>\r\n</div>\r\n\r\n        </div>\r\n      </Router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n  <div v-if=\"user_permissions.includes('is_programmer')\" class=\"col-xl-4 col-lg-6 col-md-6 col-sm-12 mb-4\">\r\n    <div class=\"card shadow-lg p-3 h-100\">\r\n      <div class=\"mb-3\">\r\n        <h4 class=\"text-dark\">New Card</h4>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-6 mx-auto\">\r\n          <div \r\n            class=\"card shadow border-start-primary h-100 p-3 d-flex justify-content-center align-items-center\"\r\n            data-bs-toggle=\"modal\" \r\n            data-bs-target=\"#new-card\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" fill=\"currentColor\" class=\"bi bi-plus-square text-primary\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n              <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n<!-- dynamic card ends -->\r\n\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n           <!-- new card form modal starts -->\r\n                             <div class=\"modal fade mymodal\" id=\"new-card\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\"> NEW CARD FORM</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"register-form\" ></button>\r\n      </div>\r\n      <form @submit.prevent=\"registerCard()\">\r\n<div class=\"modal-body\" >\r\n      <div class=\"row\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                      <div class=\"row\">\r\n                        \r\n                        <div class=\"col-md-4\">\r\n                          <label class=\"form-label\">Card Name</label>\r\n                          <input  class=\"form-control\" type=\"text\" step=\"any\" placeholder=\"Enter Card Name\" v-model=\"card.name\" required>\r\n                        </div>\r\n                         <div class=\"col-md-4\">\r\n                         <label class=\"form-label\">Permission</label>\r\n                          <Multiselect\r\n                            v-model=\"card.permission\"\r\n                            :options=\"permissions\"\r\n                            :searchable=\"true\"\r\n                            :close-on-select=\"true\"\r\n                            placeholder=\"Select Permission\"\r\n                            label=\"name\"\r\n                            value-prop=\"id\"\r\n                        />\r\n                        </div>\r\n                         <div class=\"col-md-4\">\r\n                         <label class=\"form-label\">Path</label>\r\n                          <input  class=\"form-control\" type=\"text\" step=\"any\" placeholder=\"Enter Path\" v-model=\"card.path\">\r\n                        </div>\r\n                      </div>\r\n<hr class=\"border border-dark border-2 my-5\">\r\n\r\n                   <div class=\"row\">\r\n  <div class=\"col-md-3\">\r\n    <label class=\"form-label\">Subcard Name</label>\r\n    <input class=\"form-control\" type=\"text\" step=\"any\" placeholder=\"Enter Subcard Name\" v-model=\"subcard.name\" :disabled=\"!card.name\">\r\n  </div>\r\n  <div class=\"col-md-2\">\r\n    <label class=\"form-label d-flex align-items-center gap-2\">\r\n      <span :class=\"'fw-bold text-' + subcard.color\">Text Color</span>\r\n    </label>\r\n    <select class=\"form-control\" v-model=\"subcard.color\"  :disabled=\"!subcard.name\">\r\n      <option value=\"\">Select Color</option>\r\n      <option value=\"dark\" class=\"bg-dark\">Dark</option>\r\n      <option value=\"danger\" class=\"bg-danger\">Red</option>\r\n      <option value=\"success\" class=\"bg-success\">Green</option>\r\n      <option value=\"secondary\" class=\"bg-secondary\">Purple</option>\r\n      <option value=\"warning\" class=\"bg-warning\">Orange</option>\r\n      <option value=\"primary\" class=\"bg-primary\">Blue</option>\r\n    </select>\r\n  </div>\r\n   <div class=\"col-md-4\">\r\n    <label class=\"form-label\">Counter Source</label>\r\n     <Multiselect\r\n                            :disabled=\"!subcard.name\"\r\n                            v-model=\"subcard.count_source\"\r\n                            :options=\"summaries\"\r\n                            :searchable=\"true\"\r\n                            :close-on-select=\"true\"\r\n                            placeholder=\"Select Count Source\"\r\n                            label=\"name\"\r\n                        />   \r\n  </div>\r\n  <div class=\"col-md-3\">\r\n    <label class=\"form-label\">Path</label>\r\n    <div class=\"input-group\">\r\n              <input class=\"form-control me-2\" type=\"text\" step=\"any\" placeholder=\"Enter Path\" v-model=\"subcard.path\" :disabled=\"!subcard.name\">\r\n   <button class=\"btn btn-success\" @click=\"pushSubcard()\" :disabled=\"subcards.length>1 || !subcard.name || !subcard.path || !subcard.color\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n          <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n          <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- card sample starts -->\r\n              <Router-link :to=\"`${card.path}`\" \r\n    v-if=\"card.name\"\r\n  class=\"col-xl-3 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing\">\r\n    <div class=\"card shadow-lg p-3\">\r\n      <div class=\"mb-3\">\r\n        <h4 class=\"text-dark\">{{ card.name }}</h4>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n       <div v-for=\"subcard in subcards\" class=\"col-6\">\r\n  <div class=\"card shadow border-start-primary h-100 p-3 position-relative\" :class=\"`text-${subcard.color}`\">\r\n    <div class=\"position-absolute top-0 end-0 m-2\" role=\"button\" tabindex=\"0\" @click.stop=\"clearSubCard(subcard.id)\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"red\" aria-label=\"Delete\">\r\n        <path d=\"M3 6h18v2H3V6zm2 3h14l-1.2 11.4A2 2 0 0 1 15.8 22H8.2a2 2 0 0 1-1.999-1.6L5 9zm5-7h4l1 1H7l1-1z\"/>\r\n      </svg>\r\n    </div>\r\n\r\n    <router-link :to=\"subcard.path\" class=\"text-decoration-none\">\r\n      <h6 :class=\"`text-${subcard.color}`\">{{ subcard.name }}</h6>\r\n      <h4 :class=\"`text-${subcard.color}`\">\r\n        <v-f-number :start-val=\"0\" :end-val=\"getCountValue(subcard.count_source)\" :duration=\"3000\" />\r\n      </h4>\r\n    </router-link>\r\n  </div>\r\n</div>\r\n\r\n      </div>\r\n    </div>\r\n  </Router-link> \r\n         <!-- card smple ends -->\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger \" data-bs-dismiss=\"modal\">Close</button>\r\n         <button type=\"submit\" class=\"btn btn-success\" :disabled=\"loading || subcards.length == 0\">\r\n          <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n          <span v-else>Save</span>\r\n        </button>\r\n        <button class=\"btn btn-secondary\" \r\n        @click=\"clearCard()\" :disabled=\"!card.name\">Clear</button>\r\n      </div>\r\n    </form>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n            <!-- new card form modal ends -->\r\n             <!-- card  editing form starts -->\r\n                               <div class=\"modal fade mymodal\" id=\"edit\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">CARD EDITING</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close-edit\" ></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateCard()\">\r\n\r\n\r\n<div class=\"modal-body\" >\r\n      <div class=\"row layout-top-spacing\" >\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                      <div class=\"row\">\r\n                        <div class=\"col-md-4\">\r\n                          <label class=\"form-label\">Enter New Card Name</label>\r\n                          <input  class=\"form-control\" type=\"text\" placeholder=\"Enter New Card Name\" v-model=\"edit_card.name\">\r\n                        </div>\r\n\r\n                         <div class=\"col-md-4\">\r\n                          <label class=\"form-label\">Enter Path</label>\r\n                          <input  class=\"form-control\" type=\"text\" placeholder=\"Enter Path\" v-model=\"edit_card.path\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\">\r\n                          <label class=\"form-label\">Select Permission</label>\r\n                      <Multiselect\r\n                            v-model=\"card_permission\"\r\n                            :options=\"permissions\"\r\n                            :searchable=\"true\"\r\n                            :close-on-select=\"true\"\r\n                            placeholder=\"Select Permission\"\r\n                            label=\"name\"\r\n                            value-prop=\"name\"\r\n                        />\r\n                        </div>\r\n\r\n                      </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" @click=\"clearForm()\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-success\"  :disabled=\"sending\">\r\n          <span v-if=\"sending\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else>Save</span>\r\n        </button>\r\n      </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n              <!-- card editing form ends -->\r\n               <!-- subcard editing form starts -->\r\n                                               <div class=\"modal fade mymodal\" id=\"edit-subcard\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">SUB CARD EDITING</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close-subcard-edit\" ></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateSubcard()\">\r\n\r\n\r\n<div class=\"modal-body\" >\r\n      <div class=\"row layout-top-spacing\" >\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                      <div class=\"row\">\r\n                        <div class=\"col-md-3\">\r\n                          <label class=\"form-label\">Enter New Sub Card Name</label>\r\n                          <input  class=\"form-control\" type=\"text\" placeholder=\"Enter New Card Name\" v-model=\"edit_sub_card.name\">\r\n                        </div>\r\n\r\n                         <div class=\"col-md-3\">\r\n                          <label class=\"form-label\">Enter Path</label>\r\n                          <input  class=\"form-control\" type=\"text\" placeholder=\"Enter Path\" v-model=\"edit_sub_card.path\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-2\">\r\n                          <label class=\"form-label\">Select Color</label>\r\n                        <select class=\"form-control\" v-model=\"edit_sub_card.color\" >\r\n      <option value=\"\">Select Color</option>\r\n      <option value=\"dark\" class=\"bg-dark\">Dark</option>\r\n      <option value=\"danger\" class=\"bg-danger\">Red</option>\r\n      <option value=\"success\" class=\"bg-success\">Green</option>\r\n      <option value=\"secondary\" class=\"bg-secondary\">Purple</option>\r\n      <option value=\"warning\" class=\"bg-warning\">Orange</option>\r\n      <option value=\"primary\" class=\"bg-primary\">Blue</option>\r\n    </select>\r\n                        </div>\r\n   <div class=\"col-md-4\">\r\n    <label class=\"form-label\">Counter Source</label>\r\n     <Multiselect\r\n                            v-model=\"sub_card_counter\"\r\n                            :options=\"summaries\"\r\n                            :searchable=\"true\"\r\n                            :close-on-select=\"true\"\r\n                            placeholder=\"Select Count Source\"\r\n                            label=\"name\"\r\n                        />   \r\n  </div>\r\n                      </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" @click=\"clearForm()\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-success\"  :disabled=\"sending\">\r\n          <span v-if=\"sending\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else>Save</span>\r\n        </button>\r\n      </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n                <!-- subcard editing form ends -->\r\n\r\n</template>\r\n\r\n<script setup>\r\n    import '@/assets/sass/widgets/widgets.scss';\r\n    import { onMounted,ref,inject } from 'vue';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import { VFNumber } from 'vue-animation-counter';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    import '@/assets/sass/components/custom-counter.scss';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    useMeta({ title: 'Counter' });\r\n    import axios from 'axios';\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n\r\n    const card_permission = ref('')\r\n    const fillCardEdit = (card)=>{\r\n      edit_card.value = card\r\n      card_permission.value = permissions.value.find(perm => perm.name === card.permission);\r\n    }\r\n\r\n\r\n        const sub_card_counter = ref('')\r\n\r\nimport { nextTick } from 'vue';\r\n\r\nconst fillSubcardEdit = async (subcard) => {\r\n  edit_sub_card.value = subcard;\r\n  await nextTick();\r\n  sub_card_counter.value = summaries.value.find(perm => perm.name === subcard.count_source);\r\n}\r\n\r\n    const sending = ref(false)\r\n    const updateCard = async()=>{\r\n      sending.value = true;\r\n        const payload = {\r\n          name : edit_card.value.name,\r\n          permission : card_permission.value.name,\r\n          path :edit_card.value.path\r\n        }\r\n      try{\r\n        await axiosInstance.put(`/main-cards/${edit_card.value.id}`,payload)\r\n        showMessage('Card Name Updated!')\r\n        getCards()\r\n        document.getElementById('close-edit').click()\r\n      }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n      }finally{\r\n        sending.value = false\r\n      }\r\n    }\r\n\r\n        const updateSubcard = async()=>{\r\n      sending.value = true;\r\n        const payload = {\r\n          name : edit_sub_card.value.name,\r\n          color : edit_sub_card.value.color,\r\n          path :edit_sub_card.value.path,\r\n          count_source : sub_card_counter.value.name\r\n        }\r\n      try{\r\n        await axiosInstance.put(`/sub-cards/${edit_sub_card.value.id}`,payload)\r\n        showMessage('SubCard Updated!')\r\n        getCards()\r\n        document.getElementById('close-subcard-edit').click()\r\n      }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n      }finally{\r\n        sending.value = false\r\n      }\r\n    }\r\n    const edit_card = ref('')\r\n     const edit_sub_card = ref('')\r\n    const card = ref({\r\n      name : '',\r\n      permission : '',\r\n      path: '#'\r\n    })\r\n    \r\n    const subcard = ref({\r\n      name : '',\r\n      color : '',\r\n      count_source: '',\r\n      path :  ''\r\n    })\r\n\r\n    const clearCard = ()=>{\r\n      card.value = {\r\n      name : '',\r\n      permission : '',\r\n      path: '#'\r\n    },\r\n\r\n    subcard.value = {\r\n      name : '',\r\n      color : '',\r\n      count_source: '',\r\n      path :  ''\r\n    },\r\n    subcards.value = []\r\n\r\n    }\r\n\r\n    \r\n    const clearSubCard = (id) => {\r\n      subcards.value = subcards.value.filter(sub => sub.id !== id);\r\n    }\r\n\r\nconst deleteCard = async(card)=>{\r\n  if(confirm('Are You sure to delete card '+ card.name)){\r\n try{\r\n    const response = await axiosInstance.delete(`main-cards/${card.id}`)\r\n    showMessage('Card Deleted')\r\n    getCards()\r\n  }catch(error){\r\n   showError(error.message)\r\n   console.log(error)\r\n  }finally{\r\n\r\n  }\r\n  }\r\n}\r\n\r\n    const subcards = ref([])\r\n  const pushSubcard = () => {\r\n  subcards.value.push({\r\n    ...subcard.value,\r\n    id: Date.now() + Math.random(),\r\n    count_source : subcard.value.count_source.name\r\n  });\r\n  subcard.value = {\r\n      name : '',\r\n      color : '',\r\n      count_source: '',\r\n      path :  ''\r\n  }\r\n}\r\n\r\n\r\nconst registerCard = async()=>{\r\n  loading.value = true\r\n  const payload = {\r\n    card : {\r\n      name : card.value.name,\r\n      permission :card.value.permission.name ?? '',\r\n      path :card.value.path\r\n    },\r\n    subcards :subcards.value\r\n  }\r\n\r\n\r\n  try{\r\n    const response = await axiosInstance.post('main-cards',payload)\r\n    getCards()\r\n    showMessage('Card Registered')\r\n    document.getElementById('register-form').click()\r\n     subcard.value = {\r\n       name : '',\r\n      color : '',\r\n      count_source: '',\r\n      path :  ''\r\n  },\r\n  card.value = {\r\n      name : '',\r\n      permission : '',\r\n      path: '#'\r\n  },\r\n  subcards.value = []\r\n  }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nconst loading = ref(false)\r\n\r\n\r\n     const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n     const summary = ref('')\r\n     const showMessage = inject('showMessage');\r\n     const showError = inject('showError');  \r\n     const rowShimmer = inject('rowShimmer') ;\r\n     const tableShimmer = inject('tableShimmer') ;\r\n     const loadingSpinner = inject('loadingSpinner') ;\r\n     const formatNumber = inject('formatNumber')\r\n     const rejection = ref(false)\r\n     const clearForm = () => {\r\n      edit_card.value = ''\r\n     }\r\n\r\n\r\n    const fetchSummary = () => {\r\n      axiosInstance.get('dashboard/summary')\r\n        .then(response => {\r\n          summary.value = response.data\r\n        })\r\n        .catch(error => {\r\n          showError(error.message);\r\n          console.error('Error fetching summary :', error);\r\n        });\r\n    };\r\n    fetchSummary();\r\n    // setInterval(fetchSummary, 10000);\r\n \r\n        const lpos = ref([])\r\n   \r\n\r\n        const jobcards = ref([])\r\n   \r\nconst costNote = ref('nothing')\r\n\r\n\r\n    \r\n\r\n\r\n    const spinner = ref('');\r\nconst cards = ref([])\r\nfunction getCountValue(countSource) {\r\n  if (!countSource || typeof countSource !== 'string') return 0;\r\n  try {\r\n    return Function('summary', `return ${countSource}`)(summary.value);\r\n  } catch (e) {\r\n    return 0;\r\n  }\r\n}\r\n\r\nconst getCards = async ()=>{\r\n  try{\r\n    const response = await axiosInstance.get('main-cards')\r\n    cards.value = response.data\r\n  }catch(error){\r\n   console.log(error)\r\n   showError(error.message)\r\n  }finally{\r\n\r\n  }\r\n}\r\n\r\nconst permissions = ref([])\r\nconst getPermissions = async ()=>{\r\n  try{\r\n    const response = await axiosInstance.get('permission')\r\n    permissions.value = response.data\r\n  }catch(error){\r\n   console.log(error)\r\n   showError(error.message)\r\n  }finally{\r\n\r\n  }\r\n}\r\n\r\nconst summaries = ref([])\r\nconst getSummaries = async () => {\r\n  try {\r\n    const response = await axiosInstance.get('dashboard/summary')\r\n    const data = response.data\r\n\r\n    const flattenWithDefaults = (obj, prefix = '') => {\r\n      return Object.keys(obj).flatMap(key => {\r\n        const fullKey = prefix ? `${prefix}.${key}` : key\r\n        if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n          return flattenWithDefaults(obj[key], fullKey)\r\n        } else {\r\n          return `summary?.${fullKey} ?? 0`\r\n        }\r\n      })\r\n    }\r\n\r\n    const keysList = flattenWithDefaults(data)\r\n    summaries.value = keysList.map(k => ({ name: k }))\r\n  } catch (error) {\r\n    console.log(error)\r\n    showError(error.message)\r\n  }\r\n}\r\n\r\n\r\n       onMounted(() => {\r\n        getCards()\r\n        getPermissions()\r\n        getSummaries()\r\n    });\r\n\r\n\r\n    \r\n</script>\r\n\r\n<style>\r\nbody{\r\n    background-color:white!important;\r\n}\r\n.card {\r\n  text-align: center;\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\r\n  cursor:pointer;\r\n}\r\n</style>\r\n","import script from \"./cards.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./cards.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./cards.vue?vue&type=style&index=0&id=0d55ecb4&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","card_permission","ref","fillCardEdit","card","edit_card","value","permissions","find","perm","name","permission","sub_card_counter","fillSubcardEdit","async","edit_sub_card","subcard","nextTick","summaries","count_source","sending","updateCard","payload","path","put","id","showMessage","getCards","document","getElementById","click","error","showError","message","console","log","updateSubcard","color","clearCard","subcards","clearSubCard","filter","sub","deleteCard","confirm","delete","pushSubcard","push","Date","now","Math","random","registerCard","loading","post","user_permissions","JSON","parse","localStorage","getItem","summary","inject","loadingSpinner","clearForm","fetchSummary","get","then","response","data","catch","cards","getCountValue","countSource","Function","e","getPermissions","getSummaries","flattenWithDefaults","obj","prefix","Object","keys","flatMap","key","fullKey","keysList","map","k","onMounted","__exports__"],"sourceRoot":""}