"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[808],{60808:function(a,e,l){l.r(e),l.d(e,{default:function(){return aa}});var t=l(66252),s=l(49963),o=l(2262),n=l(87066),i=l(56296),r=l(26212),c=l.n(r);const u={class:"layout-px-spacing"},d=(0,t.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Conversion Factor</span></li></ol></nav></div></li></ul>',1),m={class:"d-flex me-4 mt-2"},v={class:"ms-auto"},b=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,t._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),p=[b],h=["onSubmit"],_=(0,t._)("h4",{class:"text-center"},"REGISTER CONVERSION FACTOR",-1),y={class:"row mb-2"},f={class:"col-md-4"},g=(0,t._)("label",{class:"form-label"},"Conversion Name",-1),w={class:"col-md-4"},k=(0,t._)("label",{class:"form-label small"},"Unit",-1),C={class:"col-md-4"},x=(0,t._)("label",{class:"form-label"},"Conversion Quantity",-1),S={class:"text-center gap-2 justify-content-end"},q=(0,t._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),H=["innerHTML"],V={key:2,class:"row layout-top-spacing"},M={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},U={class:"panel p-0"},E={class:"custom-table table3"},N=["onClick"],F=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-3"},[(0,t._)("path",{d:"M12 20h9"}),(0,t._)("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})],-1),L=[F],R={class:"modal fade mymodal",id:"edit-conversion-factor-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editConversionFactorModalLabel","aria-hidden":"true"},D={class:"modal-dialog modal-xl"},j={class:"modal-content"},I={class:"modal-header"},z=(0,t._)("h1",{class:"modal-title fs-5",id:"editConversionFactorModalLabel"},"Edit Conversion Factor",-1),O={class:"modal-body"},P={class:"row mb-3"},Q={class:"col-md-4"},T=(0,t._)("label",{for:"name"},"name",-1),B={class:"col-md-4"},W=(0,t._)("label",{class:"form-label small"},"Unit",-1),A={class:"col-md-4"},G=(0,t._)("label",{for:"quantity"},"Quantity",-1),J={class:"modal-footer"},Z={type:"submit",class:"btn btn-primary"},$={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},K=(0,t.Uk)(" Edit ");var X={setup(a){(0,i.j)({title:"Gate Passes"});const e=(0,t.f3)("showMessage"),l=(0,o.iH)(!1),r=(0,t.f3)("showError"),b=(JSON.parse(localStorage.getItem("user")).permissions,(0,t.f3)("formatDate"),(0,t.f3)("tableShimmer")),F=((0,t.f3)("loadingSpinner"),(0,o.iH)(!1)),X=(0,o.iH)(["SNo","name","unit_name","quantity","actions"]),Y=(0,o.iH)(""),aa=(0,o.iH)(""),ea=(0,o.iH)(""),la=((0,o.iH)([]),(0,o.iH)([])),ta=(0,o.iH)(""),sa=(0,o.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","name","short_name","status"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),oa=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),na=(0,o.iH)([]),ia=async()=>{try{const a=await oa.get("/units");na.value=a.data}catch(a){r(a.message)}},ra=async()=>{F.value=!0;try{const a=await oa.get("conversion-factors");la.value=a.data.map(((a,e)=>({SNo:e+1,id:a.id,name:a.name,unit:a.unit,unit_name:a.unit?.short_name,quantity:a.quantity})))}catch(a){r(a.message)}finally{F.value=!1}},ca=async()=>{l.value=!1,F.value=!0;const a={name:Y.value,unit_id:ea.value.id,quantity:aa.value};try{await oa.post("/conversion-factors",a);ra(),e("Conversion Factor registered successfully!"),ua()}catch(t){r(t.message)}finally{F.value=!1}},ua=()=>{Y.value="",ea.value="",aa.value=""},da=async a=>{F.value=!0;const l={name:Y.value,unit_id:ea.value.id,quantity:aa.value};try{await oa.put(`/conversion-factors/${a}`,l);ra(),e("Conversion Factor updated successfully!"),document.getElementById("close_editing").click(),va()}catch(t){r(t.message)}finally{F.value=!1}},ma=a=>{ta.value=a.id,Y.value=a.name,ea.value=a.unit,aa.value=a.quantity},va=()=>{Y.value="",ea.value="",aa.value=""};return(0,t.bv)((()=>{ra(),ia()})),(a,e)=>{const n=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",u,[d,(0,t._)("div",m,[(0,t._)("div",v,[(0,t._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=a=>l.value=!l.value)},p)])]),l.value?((0,t.wg)(),(0,t.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,s.iM)(ca,["prevent"])},[_,(0,t._)("div",y,[(0,t._)("div",f,[g,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"Enter Conversion Name","onUpdate:modelValue":e[1]||(e[1]=a=>Y.value=a),required:""},null,512),[[s.nr,Y.value]])]),(0,t._)("div",w,[k,(0,t.Wm)((0,o.SU)(c()),{modelValue:ea.value,"onUpdate:modelValue":e[2]||(e[2]=a=>ea.value=a),options:na.value,placeholder:"select unit",label:"short_name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",C,[x,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"Enter Conversion Quantity","onUpdate:modelValue":e[3]||(e[3]=a=>aa.value=a),required:""},null,512),[[s.nr,aa.value]])])]),(0,t._)("div",S,[(0,t._)("button",{type:"button",class:"btn btn-danger me-3",onClick:e[4]||(e[4]=a=>{l.value=!1,ua()})},"Cancel"),q])],40,h)):(0,t.kq)("",!0),F.value?((0,t.wg)(),(0,t.iD)("div",{key:1,innerHTML:(0,o.SU)(b)()},null,8,H)):((0,t.wg)(),(0,t.iD)("div",V,[(0,t._)("div",M,[(0,t._)("div",U,[(0,t._)("div",E,[(0,t.Wm)(n,{data:la.value,columns:X.value,options:sa.value},{actions:(0,t.w5)((a=>[(0,t._)("a",{href:"javascript:;",class:"edit me-3",onClick:e=>ma(a.row),"data-bs-toggle":"modal","data-bs-target":"#edit-conversion-factor-modal"},L,8,N)])),_:1},8,["data","columns","options"])])])])])),(0,t._)("div",R,[(0,t._)("div",D,[(0,t._)("div",j,[(0,t._)("div",I,[z,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[5]||(e[5]=a=>va())})]),(0,t._)("form",{onSubmit:e[10]||(e[10]=(0,s.iM)((a=>da(ta.value)),["prevent"]))},[(0,t._)("div",O,[(0,t._)("div",P,[(0,t._)("div",Q,[T,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>Y.value=a),class:"form-control",placeholder:"name",required:""},null,512),[[s.nr,Y.value]])]),(0,t._)("div",B,[W,(0,t.Wm)((0,o.SU)(c()),{modelValue:ea.value,"onUpdate:modelValue":e[7]||(e[7]=a=>ea.value=a),options:na.value,placeholder:"select unit",label:"short_name",searchable:!0,multple:"false",required:!0,"allow-empty":!1},null,8,["modelValue","options"])]),(0,t._)("div",A,[G,(0,t.wy)((0,t._)("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=a=>aa.value=a),class:"form-control",placeholder:"Enter Quantity",min:"1",required:""},null,512),[[s.nr,aa.value]])])])]),(0,t._)("div",J,[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[9]||(e[9]=a=>va()),id:"close_editing"},"Close"),(0,t._)("button",Z,[F.value?((0,t.wg)(),(0,t.iD)("span",$)):(0,t.kq)("",!0),K])])],32)])])])])}}};const Y=X;var aa=Y}}]);
//# sourceMappingURL=808.b1b7d0a1.js.map