{"version":3,"file":"js/6054.c7265f2b.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/distribution/direct_fill.vue","webpack://cork-vue3/./src/views/distribution/direct_fill.vue?7840"],"sourcesContent":["<template>\r\n   \r\n\r\n    <div  class=\"layout-px-spacing mt-3\">\r\n        <div class = \"my-8\">\r\n       <ul class=\"navbar-nav flex-row mt-2\">\r\n      <li>\r\n        <div class=\"page-header\">\r\n          <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb\">\r\n              <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n              <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Direct Fill</span></li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    </div>\r\n    <!-- tab starts -->\r\n    <ul class=\"nav nav-tabs\">    \r\n    <li class=\"nav-item \">\r\n      <button\r\n        class=\"nav-link  fs-6\"\r\n        :class=\"{ active: activeTab === 'dieseldistribution' }\"\r\n        @click=\"viewDistribution(); isDiesel=true; fuel_id = 364;  activeTab = 'dieseldistribution'\"\r\n      >\r\n        Diesel Distibution \r\n      </button>\r\n    </li>\r\n    <li class=\"nav-item\">\r\n      <button\r\n        class=\"nav-link fs-6\"\r\n        :class=\"{ active: activeTab === 'petroldistribution' }\"\r\n        @click=\"viewDistribution(); isDiesel=false; fuel_id= 365 ; activeTab ='petroldistribution'\"\r\n      >\r\n       Petrol Distribution\r\n      </button>\r\n    </li>\r\n  </ul>\r\n     <!-- tab ends -->\r\n\r\n         \r\n               <!-- distribution starts -->\r\n               <div v-if=\"view_distribution\" class=\"panel p-0\" >\r\n                    <div class=\"custom-table table3 \">\r\n                           <div v-if=\"!loading_spinner\" class=\" col-12 d-flex align-items-center justify-content-between\">\r\n                        <div class=\" d-flex flex-column align-items-start p-1 \">                                                                  \r\n                        </div>  \r\n                           </div>\r\n                        \r\n             \r\n                 \r\n                        <div v-if=\"!loading_spinner\" class=\"text-center mt-1\"> <h5 v-if=\"isDiesel\"> Diesel Distribution </h5> <h5 v-else>Petrol Distribution </h5> </div>\r\n                        <div class=\"d-flex\">\r\n                           \r\n                    </div>\r\n                        \r\n                   \r\n\r\n        <div  class=\"d-flex\" v-if=\"user_permissions.includes('can_issue_fuel') && !loading_spinner\">\r\n             \r\n                  <button class=\"btn btn-success ms-auto mx-3\"  v-if=\"isClosed\"   @click=\"isfilling = !isfilling; isClosed=!isClosed;\">\r\n                   add\r\n                </button>\r\n                <button class=\"btn btn-danger ms-auto mx-3\" v-else  @click=\"isfilling = !isfilling; isClosed=!isClosed\">\r\n                    X\r\n                </button>\r\n            \r\n            </div>      \r\n          <!-- fuel usage form start -->\r\n\r\n      \r\n <div id=\"allocation\" v-if=\"isfilling\" class=\"col-lg-12 layout-spacing col-md-12 p-4\">\r\n                <div class=\"statbox panel box box-shadow\">\r\n                    <div class=\"panel-heading\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-xl-12 col-md-12 col-sm-12 col-12\">\r\n                                <h4 class=\"text-center text-primary\"><strong v-if=\"isDiesel\">Table For Diesel Distribution </strong><strong v-else>Table For Petrol Distribution </strong></h4>\r\n                            </div>\r\n                        </div>\r\n                        <form  @submit.prevent=\"registerMachineDistribution\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-4\">\r\n                                    <label for=\"machine\">Select Machine</label>\r\n<Multiselect\r\n  v-model=\"selectedMachine\"\r\n  :options=\"Machines\"\r\n  label=\"name\"\r\n  value-prop=\"id\"\r\n  :multiple=\"false\"   \r\n  placeholder=\"Select Machine\"\r\n/>\r\n\r\n                                </div>\r\n                                \r\n                                <div v-if=\"machine_field\" class=\"col-md-4\">\r\n                                <label class=\"form-label\">Machine Name</label>                            \r\n                                <input type=\"text\" v-model=\"machine\" class=\"form-control\" id=\"fuel_quantity\" required />                                \r\n                                </div>\r\n                                <div class=\"col-md-4\">\r\n                                    <label for=\"fuel_quantity\">Fuel Issued</label>\r\n                                    <input type=\"number\" v-model=\"fuel_quantity\" class=\"form-control\" id=\"fuel_quantity\" required />\r\n                                </div>\r\n                \r\n                                <div class=\"col-md-4\">\r\n                                    <label for=\"consuption_type\">Consuption Ratio</label>\r\n                                    <select class=\"form-control\" v-model=\"ratio\" name=\"consuption_type\" required>\r\n                                        <option value=\"\">Select Consuption Type</option>\r\n                                        <option value=\"km/Litre\">km/Litre</option>\r\n                                        <option value=\"Litre/hr\">Litre/hr</option>\r\n                                    </select>\r\n                                </div>\r\n                         <div class=\"col-md-4\">\r\n                         <label class=\"form-label\">Driver Name</label>\r\n                         <input type=\"text\" class=\"form-control\" v-model=\"driver_name\" >\r\n                         </div>\r\n                \r\n                         <div class=\"col-md-4\">\r\n                         <label class=\"form-label\">Initial Reading</label>\r\n                         <input type=\"number\" class=\"form-control\"  name=\"initial_reading\" v-model=\"initial_reading\"  step=\"any\" >\r\n                        </div>\r\n                        <div class=\"col-md-4\">\r\n                         <label class=\"form-label\">Final Reading</label>\r\n                         <input type=\"number\" class=\"form-control\"  name=\"initial_reading\" v-model=\"final_reading\" step=\"any\" >\r\n                        </div>\r\n            \r\n            \r\n            <div class=\"row mb-2\">\r\n              <div class=\"col-md-12\">\r\n                    <label class=\"form-label\">Task</label>\r\n                    <textarea type=\"number\" class=\"form-control\" v-model=\"task\" name=\"fuel_provided\" required style=\"height:2cm\"></textarea>\r\n                </div>\r\n               \r\n            </div>\r\n                                \r\n                                \r\n                               \r\n                              \r\n                               \r\n                            </div>\r\n                            <div class=\"d-flex justify-content-end mt-3\">\r\n                                <button class=\"btn btn-danger me-2\" @click=\"isfilling =!isfilling;isClosed=!isClosed\">Cancel</button>\r\n                                <button class=\"btn btn-primary\" type=\"submit\">Assign</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                \r\n                </div>\r\n</div>\r\n  \r\n<div class=\"mt-5\" v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n\r\n        <v-client-table \r\n        v-else\r\n        :data=\"bulkDistribution\" :columns=\"distributionColumn\" :options=\"table_option\" >\r\n            \r\n                            <template #actions=\"props\">\r\n  \r\n                                <svg \r\n    xmlns=\"http://www.w3.org/2000/svg\" \r\n    width=\"26\" \r\n    height=\"26\" \r\n    fill=\"currentColor\" \r\n    viewBox=\"0 0 24 24\"\r\n    style=\"cursor: pointer;\"\r\n    title=\"Add Remark\"\r\n     data-bs-toggle=\"modal\" data-bs-target=\"#edit\"\r\n      @click=\"statement = props.row\"\r\n\r\n  >\r\n\r\n   <!-- @click=\"openRemarkModal(props.row)\" -->\r\n    <!-- Speech Bubble -->\r\n    <path d=\"M4 4h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-4 4v-16a2 2 0 0 1 2-2z\" \r\n          stroke=\"currentColor\" \r\n          stroke-width=\"2\" \r\n          fill=\"none\" \r\n          stroke-linejoin=\"round\"/>\r\n    \r\n    <!-- Horizontal Remark Lines -->\r\n    <line x1=\"7\" y1=\"9\" x2=\"17\" y2=\"9\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n    <line x1=\"7\" y1=\"13\" x2=\"14\" y2=\"13\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n    \r\n  <!-- notification circle starts -->\r\n    <circle\r\n    v-if=\"props.row.remark\"\r\n    cx=\"19\" cy=\"6\" r=\"6\" fill=\"red\" stroke=\"white\" stroke-width=\"1.5\"/>\r\n  <!-- notification circle ends -->\r\n  </svg>\r\n  \r\n    <!-- Modal -->\r\n    <teleport to=\"body\">\r\n  <div v-if=\"showRemarkModal\" class=\"modal fade show d-block\" role=\"dialog\">\r\n    <div class=\"modal-dialog modal-dialog modal-lg\">\r\n      <div class=\"modal-content d-flex flex-column\" style=\"height: 90vh;\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">Remark(s) On Machine <span style=\"color:blue;\">{{ name }}</span></h5>\r\n          <button type=\"button\" class=\"btn-close\" @click=\"closeRemarkModal\"></button>\r\n        </div>\r\n  \r\n        <div class=\"modal-body flex-grow-1\" style=\"overflow-y: auto;\">\r\n          <div v-if=\"isfetching\" class=\"d-flex justify-content-center align-items-center\" style=\"height: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n          </div>\r\n          <div v-else>\r\n            <div v-for=\"remark in remarks\" :key=\"remark.id\">\r\n              <div v-if=\"remarks.length === 0\" class=\"text-center\">\r\n                <p>No remarks found</p>\r\n              </div>\r\n              <!-- Current user's remark -->\r\n              <div v-else>\r\n                <div v-if=\"remark.remarker_id == useId\" class=\"d-flex justify-content-end mb-2\">\r\n                  <div class=\"chat-bubble p-3 shadow-sm\" style=\"background-color: rgb(221 226 226); max-width: 80%; font-size: 0.5rem;\">\r\n                    <p class=\"mb-0 fw-bold text-dark fs-5\">You</p> \r\n                    <hr class=\"mt-0\" style=\"border: 1px solid #ccc;\" />\r\n                    <p class=\"mb-0 text-dark fs-4\">{{ remark.description }}</p>\r\n                  </div>\r\n                </div>\r\n  \r\n                <!-- Other users' remarks -->\r\n                <div v-if=\"remark.remarker_id !== useId\" class=\"d-flex justify-content-start mb-2\">\r\n                  <div class=\"chat-bubble p-3 shadow-sm\" style=\"background-color: rgb(241 226 226); max-width: 80%; font-size: 0.5rem;\">\r\n                    <p class=\"mb-0 fw-bold text-dark fs-5\">{{ remark.sender_name}}</p>\r\n                    <hr class=\"mt-0\" style=\"border: 1px solid #ccc;\" />\r\n                    <p class=\"mb-0 text-dark fs-4\">{{ remark.description }}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Form for adding a new remark - fixed at bottom -->\r\n        <div class=\"p-3 border-top\" style=\"background-color: #f8f9fa;\">\r\n          <form @submit.prevent=\"saveRemark\">\r\n            <textarea v-model=\"newremark\" class=\"form-control mb-2\" rows=\"3\" placeholder=\"Enter your remark\"></textarea>\r\n            <div class=\"d-flex justify-content-end gap-2\">\r\n              <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeRemarkModal\">Close</button>\r\n              <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSending\"> \r\n                <span v-if=\"isSending\">\r\n                  <span class=\"spinner-border spinner-border-xs\" role=\"status\" aria-hidden=\"true\"></span>            \r\n                </span>\r\n                <span v-else>Save</span>\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  </teleport>\r\n  \r\n    <!-- Modal Background Overlay -->\r\n    <div v-if=\"showRemarkModal\" class=\"modal-backdrop fade show\"></div>\r\n  \r\n  \r\n    <!-- <svg \r\n   data-bs-toggle=\"modal\" data-bs-target=\"#edit\"\r\n   @click=\"statement = props.row\"\r\n    v-if=\"user_permissions.includes('can_issue_fuel')\"\r\n    xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"/>\r\n  <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z\"/>\r\n</svg> -->\r\n                            </template>\r\n                        </v-client-table>\r\n        \r\n                    </div>\r\n                </div>\r\n      \r\n  <!-- distribution ends -->\r\n\r\n    </div>\r\n  \r\n  <!-- edit modal starts -->\r\n <div class=\"modal fade mymodal\" id=\"edit\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">   {{ statement.type }} - {{ statement.machine }} CONSUMPTION  SUMMARY</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\" ></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n<div class=\"card mb-3\">\r\n  <div class=\"card-body\">\r\n    <div class=\"row mb-2 text-start\">\r\n      <div class=\"col-md-4\"><strong>Issued Date:</strong> {{statement.issued_date}}</div>\r\n      <div class=\"col-md-4\"><strong>Issuer:</strong> {{ statement.issuer }}</div>\r\n      <div class=\"col-md-4\"><strong>Driver:</strong> {{ statement.driver }}</div>\r\n    </div>\r\n    <div class=\"row mb-2 text-start\">\r\n      <div class=\"col-md-4\"><strong>Machine:</strong> {{ statement.machine }}</div>\r\n      <div class=\"col-md-4\"><strong>Type:</strong> {{ statement.type }}</div>\r\n      <div class=\"col-md-4\"><strong>Fuel:</strong> {{ statement.fuel }}</div>\r\n    </div>\r\n    <div class=\"row mb-2 text-start\">\r\n      <div class=\"col-md-4\"><strong>Initial:</strong> {{statement.initial}}</div>\r\n      <div class=\"col-md-4\"><strong>Final:</strong> {{ statement.final }}</div>\r\n      <div class=\"col-md-4\"><strong>Ratio:</strong> {{ statement.ratio }}</div>\r\n    </div>\r\n    <div class=\"row text-start\">\r\n      <div class=\"col-md-12\"><strong>Task:</strong> {{ statement.task }}</div>\r\n    </div>\r\n\r\n     <div v-if=\"statement.remark\" class=\"row text-start\">\r\n      <div class=\"col-md-12\"><strong>Remark :</strong> {{ statement.remark }}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<form\r\nv-if=\"user_permissions.includes('can_issue_fuel') || user_permissions.includes('is_md')\"\r\n@submit.prevent=\"updateReadings()\">\r\n   <div class=\"row layout-top-spacing\" >\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                 <div class=\"row g-3\">\r\n  <div class=\"col-md-4\" v-if=\"user_permissions.includes('can_issue_fuel')\">\r\n    <label class=\"form-label\">Initial Reading</label>\r\n    <input class=\"form-control\" type=\"number\" step=\"any\" placeholder=\"Enter Initial Reading\" v-model=\"statement.initial\">\r\n  </div>\r\n\r\n  <div class=\"col-md-4\" v-if=\"user_permissions.includes('can_issue_fuel')\">\r\n    <label class=\"form-label\">Final Reading</label>\r\n    <input class=\"form-control\" type=\"number\" step=\"any\" placeholder=\"Enter Final Reading\" v-model=\"statement.final\">\r\n  </div>\r\n\r\n   <div class=\"col-md-11\" v-if=\"user_permissions.includes('is_md')\">\r\n    <label class=\"form-label\">Enter Remark</label>\r\n    <input class=\"form-control\" type=\"text\" step=\"any\" placeholder=\"Enter Remark\" v-model=\"statement.remark\">\r\n  </div>\r\n\r\n\r\n  <div class=\"col-md-1 d-flex justify-content-between align-items-center\">\r\n    <div class=\"pt-4\">\r\n      <button class=\"btn btn-success\" :disabled=\"isSending\">\r\n        <span v-if=\"isSending\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else> Save</span>\r\n       </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</form>\r\n   \r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n   <!-- edit modal ends -->\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import axios from 'axios';\r\n    import { onMounted, ref } from 'vue';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css'\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import { useRoute } from 'vue-router';\r\n    import { inject } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const formatDate = inject('formatDate');\r\n    const tableShimmer = inject('tableShimmer')\r\n    const statement = ref('')\r\n    const isClosed = ref(true)\r\n    const isDiesel = ref(true);\r\n    const route = useRoute();\r\n    useMeta({ title: 'Purchase Order' });\r\n    const activeTab = ref(\"dieseldistribution\");\r\n    const machine_field = ref(false);\r\n    const driver_name = ref('');\r\n    const initial_reading= ref(' ');\r\n    const final_reading = ref('');\r\n    const task = ref('');\r\n    const fuel_id = ref(364);\r\n    const machine = ref('');\r\n    const fuel_quantity = ref('');\r\n    const issued_date = ref(new Date().toISOString().substr(0, 10));\r\n    const details = ref('');\r\n    const ratio = ref('');   \r\n    const Machines = ref([]);\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const bulkDistribution = ref([]);\r\n    const distributionColumn = ref(['SNo','issued_date','issuer','machine','type', 'task','fuel','ratio','actions']);\r\n    const table_option = ref({\r\n        perPage: 50,\r\n        perPageValues: [  50 ,100,200,500],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo','date_issued','ratio',],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n  \r\n    const view_machines = ref(false);\r\n    const view_distribution = ref(true);\r\n    const loading_spinner = ref(false);   \r\n    const selectedMachine = ref('');\r\n    const total_fuel = ref(0);\r\n      \r\n    const isfilling  = ref(false);\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const viewDistribution = ()=>{\r\n    \r\n      getBulkDistribution();     \r\n      view_machines.value=false;\r\n      view_distribution.value=true;\r\n    }\r\n\r\n\r\n    const getBulkDistribution = async () => {\r\n    loading_spinner.value = true;   \r\n    try {\r\n        const response = await axiosInstance.get(`/asset-consumptions`);\r\n        if (Array.isArray(response.data)) {   \r\n         bulkDistribution.value = response.data.filter(distribution => \r\n          distribution.fuel_id == fuel_id.value\r\n        )\r\n            .map((statement, index) => {\r\n                let ratio;\r\n                // Calculate the ratio based on the consumption_type\r\n                if (statement.consumption_type === \"Litre/hr\") {\r\n                    ratio = statement.quantity / (statement.final_reading - statement.initial_reading);\r\n                } else {\r\n                    ratio = (statement.final_reading - statement.initial_reading) / statement.quantity;\r\n                }\r\n\r\n                // Apply the condition to change ratio if it's greater than 50\r\n                ratio = ratio > 50 ? \"---\" : ratio.toFixed(2);\r\n               \r\n                return {\r\n                    SNo: index + 1,\r\n                    fuel: statement.quantity,\r\n                    consuption: statement.consumption_type,\r\n                    issued_date: new Date(statement.created_at).toLocaleDateString('en-GB', {\r\n                        day: '2-digit',\r\n                        month: '2-digit', \r\n                        year: 'numeric'\r\n                    }),\r\n                    task: statement.task,\r\n                    remark: statement.remark,\r\n                    driver: statement.driver_name,\r\n                    issuer: statement.issuer_name,\r\n                    initial: statement.initial_reading,\r\n                    final: statement.final_reading,\r\n                    machine: statement.machine_name,\r\n                    type:statement.machine_type,\r\n                    ratio: ratio,\r\n                    id:statement.id,\r\n                  \r\n                };\r\n            });\r\n\r\n\r\n     total_fuel.value = bulkDistribution.value.reduce((sum, statement) => {\r\n                return sum + Number(statement.fuel); // Summing up the fuel_issued after mapping\r\n            }, 0);\r\n           \r\n            loading_spinner.value = false;\r\n        } else {\r\n          showError(error.message);\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n      showError(error.message);\r\n      loading_spinner.value = false;\r\n        console.error(\"Error fetching Bulk Distribution: \", error);\r\n    }\r\n};\r\n\r\nconst registerMachineDistribution = () => {\r\n            isfilling.value=false;\r\n         const itemData = {\r\n            \r\n            asset_id:selectedMachine.value.id,\r\n            consumption_type: ratio.value,\r\n            issuer_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n            quantity:fuel_quantity.value,\r\n            usage_date: issued_date.value,\r\n            item_id:isDiesel.value ? 364 : 365,\r\n            initial_reading: initial_reading.value,\r\n            final_reading: final_reading.value,\r\n            task: task.value,\r\n            driver_name: driver_name.value\r\n \r\n        };\r\n   \r\n    loading_spinner.value = true;\r\n        axiosInstance\r\n            .post('asset-consumptions', itemData)\r\n            .then((response) => {\r\n                getBulkDistribution();\r\n                selectedMachine.value = '';\r\n                fuel_quantity.value = '';\r\n                details.value = '';\r\n                ratio.value = '';\r\n                driver_name.value = '';\r\n                initial_reading.value = '';\r\n                final_reading.value = '';\r\n                task.value = '';\r\n                isClosed.value = true;\r\n                loading_spinner.value = false;\r\n                // Display success or error messages based on response status\r\n               \r\n            if (response.status === 201) {\r\n                showMessage(\"Fuel distributed successfully\");\r\n            } else {\r\n                console.error(\"Error registering Distribution:\", response.data);\r\n                showError(response.data.message || \"An error occurred while registering the distribution.\");\r\n            }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error registering Distribution:\", error);\r\n                showError(\"Error code :\"+ error.message);\r\n            });\r\n    };\r\n\r\n\r\n    const fetchMachines = async () => {\r\n        loading_spinner.value=true;\r\n    axiosInstance\r\n      .get(`/machines`)\r\n      .then((response) => {\r\n        if (Array.isArray(response.data)) {\r\n          Machines.value = response.data.map((machine, index) => ({\r\n            SNo: index + 1,\r\n            id: machine.id,\r\n            name: machine.name,\r\n            type: machine.type_name,\r\n            ratio: machine.ratio,\r\n            category: machine.category_id === 1 ? 'machine' : \r\n                     machine.category_id === 2 ? 'vehicle' : \r\n                     machine.category_id === 3 ? 'supervision' : 'no category',\r\n            capacity: machine.capacity,\r\n            category_id:machine.category_id,\r\n            reserve_litre: machine.reserve_litre\r\n          }));\r\n        } else {\r\n          console.error(\"Invalid response format\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        showError(error.message);\r\n        loading_spinner.value = false;\r\n      })\r\n      .finally(() => {\r\n       loading_spinner.value = false;\r\n      });\r\n}\r\n\r\n\r\n\r\n\r\n//method for fetching remarks\r\nconst name =  ref();\r\nconst user_role = JSON.parse(localStorage.getItem(\"user\")).role;\r\nconst isfetching = ref(false);   \r\nconst status = ref(\"unchecked\"); // Default status\r\nconst usage = ref(); // Default usage ID\r\nconst newremark = ref();\r\nconst remarks = ref([]);\r\nconst showRemarkModal = ref(false);\r\nconst useId =  JSON.parse(localStorage.getItem(\"user\")).id;\r\nconst isSending = ref(false);\r\n\r\n   const openRemarkModal= (row) => {\r\n    fetchRemarks(row.id);\r\n    name.value= row.machine\r\n    usage.value = row.id;     \r\n        showRemarkModal.value = true;\r\n    }\r\n  const   closeRemarkModal = () => {\r\n    showRemarkModal.value = false;\r\n    newremark.value = ''; // Clear the remark input\r\n    remarks.value = []; // Reset the remarks list\r\n    name.value = ''; // Clear the machine name\r\n    \r\n    }\r\n\r\n\r\n   const fetchRemarks = async (id) => {\r\n    isfetching.value = true;\r\n\r\n    try {\r\n        const response = await axiosInstance.get(`/usage-remark/${id}`);\r\n        remarks.value = response.data.filter(item => item.remark_type === 'distribution');\r\n    } catch (error) {\r\n        console.error(\"Error fetching remarks:\", error);\r\n    }\r\n\r\n    isfetching.value = false;\r\n}\r\n\r\n    const saveRemark = async () => {\r\n        if (!newremark.value.trim()) {\r\n            showError(\"Remark cannot be empty!\");\r\n            return;\r\n        }\r\n   isSending.value= true;\r\n        try {\r\n            const response = await  axiosInstance.post(\"/remark\", {   \r\n                created_at: new Date().toISOString(), \r\n                remarker_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n                description: newremark.value,\r\n                status: status.value, // Default to unchecked\r\n                type_id:usage.value,\r\n                remark_type:\"distribution\"  \r\n            });\r\n\r\n            remarks.value.push(response.data); // Add new remark to the list\r\n            newremark.value = \"\"; // Clear input field\r\n            showMessage(\"Remark added:\", \"success\");\r\n        } catch (error) {\r\n            showError(\"Error adding remark:\", error);\r\n        }\r\n        isSending.value= false;\r\n    };\r\n\r\n\r\n    const updateReadings = async()=>{\r\n      isSending.value = true\r\n      const payload = {\r\n        initial_reading : statement.value.initial,\r\n        final_reading :statement.value.final,\r\n        remark : statement.value.remark\r\n      }\r\n\r\n    \r\n      try{\r\n        const response = await axiosInstance.put(`asset-consumptions/${statement.value.id}`,payload)\r\n        showMessage(\"Readings Updated\")\r\n        getBulkDistribution()\r\n        document.getElementById('close').click()\r\n      }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n      }finally{\r\n        isSending.value = false\r\n      }\r\n    }\r\n\r\n    onMounted(() => {     \r\n        getBulkDistribution();\r\n        fetchMachines();\r\n    });\r\n    \r\n</script>\r\n","import script from \"./direct_fill.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./direct_fill.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./direct_fill.vue?vue&type=style&index=0&id=372fa575&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["showMessage","inject","showError","loadingSpinner","tableShimmer","statement","ref","isClosed","isDiesel","useRoute","useMeta","title","activeTab","machine_field","driver_name","initial_reading","final_reading","task","fuel_id","machine","fuel_quantity","issued_date","Date","toISOString","substr","details","ratio","Machines","user_permissions","JSON","parse","localStorage","getItem","permissions","bulkDistribution","distributionColumn","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","view_machines","view_distribution","loading_spinner","selectedMachine","total_fuel","isfilling","axiosInstance","axios","baseURL","process","viewDistribution","getBulkDistribution","value","async","response","get","Array","isArray","data","distribution","map","index","consumption_type","quantity","toFixed","SNo","fuel","consuption","created_at","toLocaleDateString","day","month","year","remark","driver","issuer","issuer_name","initial","final","machine_name","type","machine_type","id","reduce","sum","Number","error","message","console","registerMachineDistribution","itemData","asset_id","issuer_id","usage_date","item_id","post","then","status","catch","fetchMachines","name","type_name","category","category_id","capacity","reserve_litre","finally","isfetching","role","usage","newremark","remarks","showRemarkModal","useId","isSending","closeRemarkModal","saveRemark","trim","remarker_id","description","type_id","remark_type","push","updateReadings","payload","put","document","getElementById","click","log","onMounted","__exports__"],"sourceRoot":""}