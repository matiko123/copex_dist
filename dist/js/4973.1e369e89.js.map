{"version":3,"file":"js/4973.1e369e89.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/attendances/siteAttendance.vue","webpack://cork-vue3/./src/views/attendances/siteAttendance.vue?d63b"],"sourcesContent":["<template>\r\n  <div class=\"layout-px-spacing\">\r\n    <ul class=\"navbar-nav flex-row mt-2\">\r\n      <li>\r\n        <div class=\"page-header\">\r\n          <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb\">\r\n              <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Reports</a></li>\r\n              <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Supervisor Attendance</span></li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12\">\r\n        <h4 class=\"text-center\">Supervisor Attendance Report For {{ attendance[0]?.site || 'Site' }}</h4>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row mb-3\">\r\n      <div class=\"col-md-12 text-end\">\r\n        <button @click=\"printReport\" class=\"btn btn-success\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer me-2\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n            <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- loading spinner starts -->\r\n    <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n    <!-- Loading spinner ends -->\r\n\r\n    <div v-else class=\"row layout-top-spacing\">\r\n      <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n        <div class=\"panel p-0\">\r\n          <div class=\"custom-table table3\">\r\n            <v-client-table :data=\"attendance\" :columns=\"columns\" :options=\"table_option\">\r\n              <template #actions=\"props\">\r\n                <a\r\n                  href=\"javascript:;\"\r\n                  class=\"edit me-3\"\r\n                  @click.prevent=\"openViewModal(props.row)\"\r\n                  data-bs-toggle=\"modal\"\r\n                  data-bs-target=\"#view-attendance-modal\"\r\n                >\r\n                  <!-- eye icon -->\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-primary\">\r\n                    <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                    <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                  </svg>\r\n                </a>\r\n              </template>\r\n            </v-client-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- view attendance modal starts -->\r\n      <div class=\"modal fade mymodal\" id=\"view-attendance-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"viewAttendanceModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-fullscreen modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"viewAttendanceModalLabel\">Site Attendance Location View For {{ selectedAttendance.site }}</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeModal\"></button>\r\n          </div>\r\n\r\n          <div class=\"modal-body\">\r\n            <div class=\"p-3 my-4\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6 text-start\">\r\n                 <p class=\"mb-3 text-dark\"><strong>Supervisor:</strong> {{ selectedAttendance.name || '--' }}</p> \r\n                  <p class=\"mb-3 text-dark\"><strong>Location :</strong> {{ selectedAttendance.location || '--' }}</p> \r\n\r\n              </div>\r\n\r\n              <div class=\"col-md-6 text-start\">\r\n                <p class=\"mb-3 text-dark\"><strong>phone no:</strong> {{ selectedAttendance.phone }}</p>\r\n                <p class=\"mb-3 text-dark\"><strong>Date:</strong> {{ selectedAttendance.date || '--' }}</p>\r\n              </div>\r\n           </div>\r\n           </div>\r\n\r\n            <div class=\"row\">\r\n              <!-- Report Location Map -->\r\n              <div class=\"col-md-12 mb-3\">\r\n                <h6>Report Location</h6>\r\n                <div id=\"reportMap\" class=\"map-container\"></div>\r\n                <div class=\"small mt-1 text-muted\">{{ selectedAttendance.report_location || '' }}</div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeModal\">Close</button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- view attendance modal ends -->\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport axios from 'axios';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// --- meta + composables --- (you had useMeta in your original code)\r\n// import { useMeta } from '@/composables/use-meta';\r\n// useMeta({ title: 'Supervisor Attendance Report' });\r\n\r\nconst route = useRoute();\r\nconst showMessage = inject('showMessage');\r\nconst showError = inject('showError');\r\nconst formatDate = inject('formatDate');\r\nconst tableShimmer = inject('tableShimmer');\r\nconst loadingSpinner = inject('loadingSpinner');\r\n\r\nconst loading_spinner = ref(false);\r\nconst columns = ref(['SNo','name','phone','date','report_time', 'actions']);\r\nconst items = ref([]);\r\nconst attendance = ref([]);\r\nconst attendance_factor_id = ref('');\r\n\r\nconst table_option = ref({\r\n  perPage: 20,\r\n  perPageValues: [20, 50 ,100],\r\n  skin: 'table table-hover table-striped',\r\n  columnsClasses: { actions: 'actions text-center' },\r\n  sortable: ['SNo', 'name','short_name','status'],\r\n  sortIcon: {\r\n    base: 'sort-icon-none',\r\n    up: 'sort-icon-asc',\r\n    down: 'sort-icon-desc',\r\n  },\r\n  pagination: { nav: 'scroll', chunk: 5 },\r\n  texts: {\r\n    count: 'Showing {from} to {to} of {count}',\r\n    filter: '',\r\n    filterPlaceholder: 'Search...',\r\n    limit: 'Results:',\r\n  },\r\n  resizableColumns: false,\r\n});\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.VUE_APP_API_BASE_URL || ''\r\n});\r\n\r\n// selected attendance for modal\r\nconst selectedAttendance = ref({});\r\nlet reportMap = null;\r\nlet leaveMap = null;\r\n\r\n// helper to safely parse lat/lon\r\nconst toFloat = (v) => {\r\n  if (v === null || v === undefined) return null;\r\n  const n = parseFloat(String(v).replace(/[, ]+/g, ''));\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\nconst formatTime = (datetime) => {\r\n  if (!datetime) return '--';\r\n  // if already time-only string, return as-is\r\n  try {\r\n    const date = new Date(datetime);\r\n    if (isNaN(date.getTime())) return datetime;\r\n    return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\r\n  } catch (e) {\r\n    return datetime;\r\n  }\r\n};\r\n\r\nconst getSupervisorAttendance = async () => {\r\n  loading_spinner.value = true;\r\n  try {\r\n    const response = await axiosInstance.get(`supervisor-attendance?store_id=${route.params.store_id}`);\r\n    attendance.value = response.data.map((item, index) => ({\r\n      SNo: index + 1,\r\n      id: item.id,\r\n      name: item.supervisor?.name,\r\n      phone: item.supervisor?.phone_no,\r\n      store_name: item.store?.name,\r\n      date: item.attendance_date,\r\n      site: `${item.store?.project?.short_name || 'No Project'}`,\r\n      report_time: formatTime(item.report_time),\r\n      leave_time: formatTime(item.leave_time),\r\n      total_hours: item.total_hours,\r\n      status: item.status,\r\n      report_location: item.report_location,\r\n      leave_location: item.leave_location,\r\n      report_latitude: item.report_latitude,\r\n      report_longitude: item.report_longitude,\r\n      leave_latitude: item.leave_latitude,\r\n      leave_longitude: item.leave_longitude,\r\n    }));\r\n  } catch (error) {\r\n    console.error(error);\r\n    showError?.(error.message);\r\n  } finally {\r\n    loading_spinner.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  getSupervisorAttendance();\r\n  // Fix leaflet default icon path (if necessary)\r\n  delete L.Icon.Default.prototype._getIconUrl;\r\n  L.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n  });\r\n});\r\n\r\n// open modal: set selectedAttendance and render maps\r\nconst openViewModal = (row) => {\r\n  selectedAttendance.value = { ...row };\r\n  setTimeout(() => {\r\n    loadReportMap();\r\n    if (selectedAttendance.value.leave_latitude) {\r\n      loadLeaveMap();\r\n    } else {\r\n      if (leaveMap) {\r\n        leaveMap.remove();\r\n        leaveMap = null;\r\n      }\r\n    }\r\n  }, 300);\r\n\r\n};\r\n\r\nconst closeModal = () => {\r\n  const modalEl = document.getElementById('view-attendance-modal');\r\n  if (!modalEl) return;\r\n  const bs = window.bootstrap.Modal.getInstance(modalEl);\r\n  if (bs) bs.hide();\r\n};\r\n\r\nfunction onModalHidden() {\r\n  // remove maps to free memory\r\n  if (reportMap) {\r\n    reportMap.remove();\r\n    reportMap = null;\r\n  }\r\n  if (leaveMap) {\r\n    leaveMap.remove();\r\n    leaveMap = null;\r\n  }\r\n  selectedAttendance.value = {};\r\n}\r\n\r\nfunction loadReportMap() {\r\n  const lat = toFloat(selectedAttendance.value.report_latitude);\r\n  const lon = toFloat(selectedAttendance.value.report_longitude);\r\n  if (lat === null || lon === null) return;\r\n\r\n  // remove old map instance to avoid errors\r\n  if (reportMap) {\r\n    try { reportMap.remove(); } catch (e) { /* ignore */ }\r\n    reportMap = null;\r\n  }\r\n\r\n  // initialize map\r\n  reportMap = L.map('reportMap', { center: [lat, lon], zoom: 16, scrollWheelZoom: true });\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; OpenStreetMap contributors'\r\n  }).addTo(reportMap);\r\n\r\n  const marker = L.marker([lat, lon]).addTo(reportMap);\r\n  marker.bindPopup('<b>Report Location</b>').openPopup();\r\n\r\n  // ensure map renders correctly inside modal\r\n  setTimeout(() => { reportMap.invalidateSize(); }, 200);\r\n}\r\n\r\nfunction loadLeaveMap() {\r\n  const lat = toFloat(selectedAttendance.value.leave_latitude);\r\n  const lon = toFloat(selectedAttendance.value.leave_longitude);\r\n  if (lat === null || lon === null) return;\r\n\r\n  if (leaveMap) {\r\n    try { leaveMap.remove(); } catch (e) { /* ignore */ }\r\n    leaveMap = null;\r\n  }\r\n\r\n  leaveMap = L.map('leaveMap', { center: [lat, lon], zoom: 16, scrollWheelZoom: true });\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; OpenStreetMap contributors'\r\n  }).addTo(leaveMap);\r\n\r\n  const marker = L.marker([lat, lon]).addTo(leaveMap);\r\n  marker.bindPopup('<b>Leave Location</b>').openPopup();\r\n\r\n  setTimeout(() => { leaveMap.invalidateSize(); }, 200);\r\n}\r\n\r\nconst printReport = async () => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    // Date formatting\r\n    const now = new Date();\r\n    const day = String(now.getDate()).padStart(2, '0');\r\n    const month = String(now.getMonth() + 1).padStart(2, '0');\r\n    const year = now.getFullYear();\r\n    const formattedDate = `${day}.${month}.${year}`;\r\n    const formatDate = `${day}.${month}.${year}`;\r\n    const formattedDateTime = `${formattedDate}, ${now.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'})}`;\r\n\r\n    const siteName = attendance.value[0]?.site || 'Site';\r\n    \r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Supervisor Attendance Report</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; position: relative; }\r\n  .logo { width: 160px; height: auto; }\r\n  .report-box { border: 1px solid #000; padding: 4px 8px; font-size: 11px; text-align: center; margin-left: auto; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; }\r\n  .reg-info { position: absolute; top: 60px; right: 0; text-align: right; font-size: 10px; line-height: 1.4; }\r\n  .title { text-align: center; font-weight: bold; margin: 20px 0 10px 0; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 20px; }\r\n  table.items th, table.items td { border: 1px solid #000; padding: 6px; font-weight: normal; }\r\n  table.items thead tr th { background-color: #f8f8f8; border: 1px solid #000; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-end { text-align: end; }\r\n  .text-center { text-align: center; }\r\n  .text-start { text-align: start; }\r\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"report-box\">\r\n    REPORT ON.<br>\r\n    <span style=\"color:red;\">${formattedDate}</span>\r\n  </div>\r\n  <div class=\"reg-info\">\r\n    TIN: 103-826-519<br>\r\n    VRN: 20-01-017530R\r\n  </div>\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\r\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\r\n</div>\r\n\r\n<div class=\"title\">SUPERVISOR ATTENDANCE REPORT FOR ${siteName.toUpperCase()}</div>\r\n\r\n<div style=\"text-align: right; margin-top: 10px;\">\r\n  <strong>Date: ${formatDate}</strong>\r\n</div>\r\n\r\n<table class=\"items\">\r\n  <thead>\r\n    <tr>\r\n      <th style=\"width: 40px;\">S/No</th>\r\n      <th>Name</th>\r\n      <th>Number</th>\r\n      <th>Date</th>\r\n      <th>Time</th>\r\n      <th>Location</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${attendance.value.map((item, index) => `\r\n    <tr>\r\n      <td class=\"text-center\">${index + 1}</td>\r\n      <td class=\"text-start\">${item.name || '--'}</td>\r\n      <td class=\"text-center\">${item.phone || '--'}</td>\r\n      <td class=\"text-center\">${item.date || '--'}</td>\r\n      <td class=\"text-center\">${item.report_time || '--'}</td>\r\n      <td class=\"text-start\">${item.report_location || '--'}</td>\r\n    </tr>\r\n    `).join('')}\r\n  </tbody>\r\n</table>\r\n\r\n<div style=\"margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;\">\r\n  <p>Â© ${new Date().getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 103-826-519 | VRN: 20-01-017530R</p>\r\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\r\n</div>\r\n\r\n<div style=\"margin-top: 10px; font-size: 11px; text-align: left;\">\r\n  ${formattedDateTime}\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print report: ${error.message}`);\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.map-container {\r\n  height: calc(100vh - 150px); /* Full screen minus header/footer */\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n.table3 .actions svg {\r\n  padding: 2px;\r\n}\r\n</style>\r\n","import script from \"./siteAttendance.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./siteAttendance.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./siteAttendance.vue?vue&type=style&index=0&id=0bef61f7&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0bef61f7\"]])\n\nexport default __exports__"],"names":["route","useRoute","showError","inject","tableShimmer","loading_spinner","ref","columns","attendance","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","selectedAttendance","reportMap","leaveMap","toFloat","v","undefined","n","parseFloat","String","replace","Number","isFinite","formatTime","datetime","date","Date","isNaN","getTime","toLocaleTimeString","hour","minute","e","getSupervisorAttendance","async","value","response","get","params","store_id","data","map","item","index","SNo","id","name","supervisor","phone","phone_no","store_name","store","attendance_date","site","project","short_name","report_time","leave_time","total_hours","status","report_location","leave_location","report_latitude","report_longitude","leave_latitude","leave_longitude","error","console","message","onMounted","L","iconRetinaUrl","require","iconUrl","shadowUrl","openViewModal","row","setTimeout","loadReportMap","loadLeaveMap","remove","closeModal","modalEl","document","getElementById","bs","window","bootstrap","Modal","getInstance","hide","lat","lon","center","zoom","scrollWheelZoom","attribution","addTo","marker","bindPopup","openPopup","invalidateSize","printReport","iframe","createElement","style","display","body","appendChild","now","day","getDate","padStart","month","getMonth","year","getFullYear","formattedDate","formatDate","formattedDateTime","siteName","printContent","toUpperCase","join","iframeDoc","contentWindow","open","write","close","onload","focus","print","removeChild","__exports__"],"sourceRoot":""}