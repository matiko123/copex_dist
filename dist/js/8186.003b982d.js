"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[8186],{88186:function(t,a,n){n.r(a),n.d(a,{default:function(){return z}});var e=n(66252),o=n(2262),s=n(87066),l=n(56296);n(26212);const i={class:"layout-px-spacing"},r=(0,e.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Accounts</a></li><li class="breadcrumb-item active" aria-current="page"><span>Payments</span></li></ol></nav></div></li></ul>',1),c={class:"d-flex me-4 mt-2"},d={class:"ms-auto"},m=(0,e._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,e._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,e._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),u=[m],h=["innerHTML"],p={key:1,class:"row layout-top-spacing"},b={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},v={class:"panel p-0"},g={class:"custom-table table3"},f={class:"actions text-center"},y=["onClick"],_=(0,e._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-success"},[(0,e._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,e._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),x=[_],w=["href","onClick"],C={class:"modal fade mymodal",id:"attachment","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},k={class:"modal-dialog modal-xl"},N={class:"modal-content"},A=(0,e._)("div",{class:"modal-header"},[(0,e._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"PROOF OF PAYMENT ATTACHMENT"),(0,e._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close"})],-1),T={class:"modal-body"},O={class:"row layout-top-spacing"},H={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},M={class:"panel p-0"},S={class:"custom-table table3"},P=["src"],E=(0,e._)("div",{class:"modal-footer"},[(0,e._)("button",{type:"button",class:"btn btn-danger btn-sm py-2 px-2","data-bs-dismiss":"modal"},"Close")],-1);var R={setup(t){(0,l.j)({title:"account"});(0,e.f3)("showMessage");const a=(0,e.f3)("showError"),n=(JSON.parse(localStorage.getItem("user")).permissions,(0,e.f3)("tableShimmer")),m=((0,e.f3)("loadingSpinner"),(0,e.f3)("formatNumber")),_=(0,e.f3)("formatDate"),R=(0,o.iH)(!1),$=(0,o.iH)(["Sno","ref_no","issuer","host","amount","direction","target_account","attachment","date"]),z=(0,o.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["Sno","name","email","phone","address","attachment"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),D=s.Z.create({baseURL:"https://bushman.ink/api/v1/"}),L=(0,o.iH)([]),j=async()=>{try{const t=await D.get("account-transactions");L.value=t.data.map(((t,a)=>({...t,Sno:a+1,attachment:"https://bushman.ink/api/v1/../../"+t.attachment,amount:m(t.amount),date:_(t.date),ref_no:t.reference_number,issuer:t?.issuer?.name,target_account:(t?.transaction_point?.name??"")+" "+(t?.transaction_point?.mobile_money?.name??"")+" "+(t?.transaction_point?.mobile_money?.category??"CASH")})))}catch(t){a(t.message),console.log(t)}},B=(0,o.iH)(""),I=t=>{B.value=t},V=async()=>{try{const t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);const a=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Account Transaction Payments Report</title>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .company-title { text-align: center; }\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  th, td { border: 0.5px solid #000; padding: 6px; }\n  th { background-color: #f8f8f8; font-weight: bold; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\n  @media print { body { margin: 10mm; } }\n</style>\n</head>\n<body>\n\n<div class="company-title text-style">\n  <i>\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n\n<hr style="margin-top:20px">\n\n<div class="title text-style">\n  ACCOUNT TRANSACTION PAYMENTS REPORT\n</div>\n\n<hr>\n\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Ref NO</th>\n      <th>Issuer</th>\n      <th>Host</th>\n      <th>Account Target</th>\n      <th>Date</th>\n      <th>Direction</th>\n      <th class="text-right">Amount</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${L.value.map(((t,a)=>`\n    <tr>\n      <td>${a+1}</td>\n      <td>${t.ref_no||"N/A"}</td>\n      <td>${t.issuer||"N/A"}</td>\n      <td>${t.host||"N/A"}</td>\n      <td>${t.target_account||"N/A"}</td>\n      <td>${t.date||"N/A"}</td>\n      <td>${t.direction||"N/A"}</td>\n      <td class="text-right">${t.amount||"0"}</td>\n    </tr>\n    `)).join("")}\n    <tr>\n      <td colspan="7" class="text-right"><strong>TOTAL:</strong></td>\n      <td class="text-right"><strong>${m(L.value.reduce(((t,a)=>{const n="string"===typeof a.amount?parseFloat(a.amount.replace(/,/g,"")):a.amount;return t+(isNaN(n)?0:n)}),0))}</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n</body>\n</html>\n`,n=t.contentWindow.document;n.open(),n.write(a),n.close(),t.onload=()=>{t.contentWindow.focus(),t.contentWindow.print(),setTimeout((()=>{document.body.removeChild(t)}),1e3)}}catch(t){a(`Failed to print report: ${t.message}`)}};return(0,e.bv)((()=>{j()})),(t,a)=>{const s=(0,e.up)("v-client-table");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",i,[r,(0,e._)("div",c,[(0,e._)("div",d,[(0,e._)("button",{class:"btn btn-success",onClick:a[0]||(a[0]=t=>V())},u)])]),R.value?((0,e.wg)(),(0,e.iD)("div",{key:0,innerHTML:(0,o.SU)(n)()},null,8,h)):((0,e.wg)(),(0,e.iD)("div",p,[(0,e._)("div",b,[(0,e._)("div",v,[(0,e._)("div",g,[(0,e.Wm)(s,{data:L.value,columns:$.value,options:z.value},{actions:(0,e.w5)((a=>[(0,e._)("div",f,[(0,e._)("a",{href:"javascript:;",class:"edit me-3",onClick:n=>t.openEditModal(a.row),"data-bs-toggle":"modal","data-bs-target":"#account-edit-modal"},x,8,y)])])),attachment:(0,e.w5)((t=>[(0,e._)("a",{href:t.row.attachment,target:"_blank",class:"badge badge-primary",style:{cursor:"pointer"},onClick:a=>I(t.row)}," Open Attachment ",8,w)])),_:1},8,["data","columns","options"])])])])]))]),(0,e._)("div",C,[(0,e._)("div",k,[(0,e._)("div",N,[A,(0,e._)("div",T,[(0,e._)("div",O,[(0,e._)("div",H,[(0,e._)("div",M,[(0,e._)("div",S,[(0,e._)("iframe",{src:B.value.attachment,width:"100%",height:"600px"},null,8,P)])])])])]),E])])])],64)}}};const $=R;var z=$}}]);
//# sourceMappingURL=8186.003b982d.js.map