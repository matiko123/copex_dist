"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[348],{60348:function(e,a,t){t.r(a),t.d(a,{default:function(){return K}});var l=t(66252),s=t(2262),o=t(3577),r=t(49963),i=t(87066),n=t(56296),c=(t(26212),t(42119));const d={class:"layout-px-spacing"},u=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Good Return Notes</span></li></ol></nav></div></li></ul>',1),m=["innerHTML"],v={key:1,class:"row layout-top-spacing"},_={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},p={class:"panel p-0"},b={class:"custom-table table3"},g=(0,l._)("div",{class:"d-flex justify-content-center align-items-center"},null,-1),y=["onClick"],w=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"text-primary bi bi-eye",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),(0,l._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"})],-1),h=[w],f={class:"modal fade mymodal",id:"view_store","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},k={class:"modal-dialog modal-xl"},x={class:"modal-content"},S={class:"modal-header"},H={class:"modal-title fs-5",id:"staticBackdropLabel"},M={class:"modal-body"},N={class:"row layout-top-spacing",style:{"max-height":"67vh","overflow-y":"auto"}},j={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},C={class:"panel p-0"},D={class:"custom-table table3"},R={class:"table table-bordered mb-4"},q=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Item"),(0,l._)("th",null,"Returned Quantity"),(0,l._)("th",null,"Received Quantity"),(0,l._)("th",null,"Remark")])],-1),z=["onUpdate:modelValue"],E=["onUpdate:modelValue"],U={class:"d-flex"},I={class:"ms-auto"},L=["disabled"],V=["innerHTML"],A={key:1},B={key:1,class:"row layout-top-spacing",style:{"max-height":"67vh","overflow-y":"auto"}},G={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Y={class:"panel p-0"},F={class:"custom-table table3"},J=(0,l._)("div",{class:"d-flex justify-content-center align-items-center"},null,-1),O={key:2,class:"mb-3"},P=(0,l._)("label",{class:"form-label fw-bold"},"Remark:",-1),Q={class:"border rounded p-3 bg-light"},T=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-danger btn-sm py-2 px-2","data-bs-dismiss":"modal"},"Close")],-1);var W={setup(e){(0,n.j)({title:"Return Notes"});const a=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),t=(0,c.yj)(),w=(0,s.iH)(!1),W=(0,l.f3)("tableShimmer"),$=(0,l.f3)("loadingSpinner"),K=JSON.parse(localStorage.getItem("user")),Z=(0,s.iH)(!1),X=(0,s.iH)(["SNo","return_no","source_store","returned_to","issuer","receiver","status","date_returned","actions"]),ee=(0,s.iH)(["SNo","item","returned_quantity","received_quantity","remark"]),ae=(0,l.f3)("showMessage"),te=(0,l.f3)("showError"),le=(0,l.f3)("formatDate"),se=((0,l.f3)("enforceMax"),(0,s.iH)("")),oe=(0,s.iH)(""),re=(JSON.parse(localStorage.getItem("user")).permissions,(0,s.iH)("")),ie=async e=>{w.value=!0;const t={destination_store:2,status_id:10,receiver_id:K.id,remark:re.value,items:_e.value.map((e=>({id:e.id,item_id:e.item_id,received_quantity:e.received_quantity,remark:e.remark})))};try{await a.put(`good-return-notes/${e.id}`,t);ae("remark saved"),ve(),document.getElementById("close").click(),re.value="";const l=JSON.parse(localStorage.getItem("user")).name+" Received items from "+e.source_store,s="255698267662",o="wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA=";whatsappAlert(l,o,s)}catch(l){te(l.message),console.log(l)}finally{w.value=!1}},ne=(0,s.iH)({perPage:100,perPageValues:[100,200,500],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:[],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),ce=(0,s.iH)(""),de=(0,s.iH)(""),ue=e=>{ce.value=e,de.value=e,se.value=e.project||"",oe.value=e.name||"",_e.value=e.items.map(((e,a)=>({...e,SNo:a+1,item:e.item.name})))},me=(0,s.iH)([]),ve=async()=>{try{let e="/good-return-notes";"all"!==t.params.store_id&&(e+=`?store_id=${t.params.store_id}`);const l=await a.get(e);me.value=l.data.map(((e,a)=>({...e,SNo:a+1,return_no:e.id,source_store_id:e.source_store?.id,source_store:e.source_store?.project.short_name+" : "+e.source_store?.name,returned_to:e?.destination_store?.project?.short_name+" : "+e?.destination_store?.name,issuer:e.issuer.name,receiver:e?.receiver?.name,date_returned:le(e.created_at)})))}catch(e){te(e.message),console.log(e)}finally{Z.value=!1}};(0,l.YP)((()=>t.params),(()=>{Z.value=!0,ve()}),{deep:!0});const _e=(0,s.iH)([]);return(0,l.bv)((()=>{Z.value=!0,ve()})),(e,a)=>{const t=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",d,[u,Z.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,s.SU)(W)()},null,8,m)):((0,l.wg)(),(0,l.iD)("div",v,[(0,l._)("div",_,[(0,l._)("div",p,[(0,l._)("div",b,[(0,l.Wm)(t,{data:me.value,columns:X.value,options:ne.value},{actions:(0,l.w5)((e=>[g,(0,l._)("a",{href:"javascript:;",class:"edit me-2","data-bs-toggle":"modal","data-bs-target":"#view_store",id:"back-modal",onClick:a=>ue(e.row)},h,8,y)])),status:(0,l.w5)((e=>[(0,l._)("span",{class:(0,o.C_)(["badge inv-status","badge-"+e.row.status.color])},(0,o.zw)(e.row.status.name),3)])),_:1},8,["data","columns","options"])])])])]))]),(0,l._)("div",f,[(0,l._)("div",k,[(0,l._)("div",x,[(0,l._)("div",S,[(0,l._)("h1",H,(0,o.zw)(ce.value.project)+" - "+(0,o.zw)(ce.value.name),1),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close",onClick:a[0]||(a[0]=(...a)=>e.clearForm&&e.clearForm(...a))})]),(0,l._)("div",M,[9===de.value.status_id?((0,l.wg)(),(0,l.iD)("form",{key:0,onSubmit:a[2]||(a[2]=(0,r.iM)((e=>ie(de.value)),["prevent"]))},[(0,l._)("div",N,[(0,l._)("div",j,[(0,l._)("div",C,[(0,l._)("div",D,[(0,l._)("table",R,[q,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_e.value,((e,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id||a},[(0,l._)("td",null,(0,o.zw)(e.item),1),(0,l._)("td",null,(0,o.zw)(e.returned_quantity),1),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a=>e.received_quantity=a,placeholder:"Enter received quantity",min:"0",required:""},null,8,z),[[r.nr,e.received_quantity]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>e.remark=a,placeholder:"Enter Remark"},null,8,E),[[r.nr,e.remark]])])])))),128))])])])])])]),(0,l.wy)((0,l._)("textarea",{class:"form-control",placeholder:"Enter General Remarks","onUpdate:modelValue":a[1]||(a[1]=e=>re.value=e)},null,512),[[r.nr,re.value]]),(0,l._)("div",U,[(0,l._)("div",I,[(0,l._)("button",{type:"submit",class:"btn btn-primary mt-1",disabled:w.value},[w.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,s.SU)($)()},null,8,V)):((0,l.wg)(),(0,l.iD)("span",A," Submit "))],8,L)])])],32)):((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("div",G,[(0,l._)("div",Y,[(0,l._)("div",F,[(0,l.Wm)(t,{data:_e.value,columns:ee.value,options:ne.value},{actions:(0,l.w5)((e=>[J])),_:1},8,["data","columns","options"])])])])])),de.value.remark?((0,l.wg)(),(0,l.iD)("div",O,[P,(0,l._)("div",Q,(0,o.zw)(de.value.remark),1)])):(0,l.kq)("",!0)]),T])])])],64)}}};const $=W;var K=$}}]);
//# sourceMappingURL=348.3e7902d1.js.map