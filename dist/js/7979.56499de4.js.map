{"version":3,"file":"js/7979.56499de4.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/requisitions/index.vue","webpack://cork-vue3/./src/views/requisitions/index.vue?18f0"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Requisitions</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n               <div class = \"flex-grow-1 text-center\" v-if=\"!requisition_creation\"> <h3 class=\"mb-0\"> REQUISITIONS</h3> \r\n<form @submit.prevent=\"getFilteredRequests()\" class=\"input-group container\" >\r\n  <input type=\"text\" class=\"form-control border-end-0\" placeholder=\"Search a word...\" v-model=\"filter\">\r\n  <button type=\"submit\" class=\"input-group-text bg-white border-start-0\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n      0-10 5 5 0 0 1 0 10z\"/>\r\n    </svg>\r\n  </button>\r\n</form>\r\n\r\n\r\n              </div>\r\n              <div class=\"d-flex align-items-center gap-2\">\r\n                <!-- <div v-if=\"user_permissions.includes('can_create_requisition') && (isAllowedTime() || activity?.status === 'open')\"> -->\r\n                <div v-if=\"user_permissions.includes('can_create_requisition') \">\r\n                  <button v-if=\"!requisition_creation\" type=\"button\" class=\"btn btn-primary\"  @click=\"requisition_creation = true\" :disabled=\"loading_spinner\">\r\n                    <template v-if=\"loading_spinner\">\r\n                      <span class=\"spinner-border spinner-border-sm text-success ms-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                    </template>\r\n                    <template v-else>\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                    </template>\r\n                  </button>\r\n                </div>\r\n                <div v-if=\"!requisition_creation\">\r\n                  <button \r\n                  v-if=\"user_permissions.includes('is_md')\"\r\n                    type=\"button\"\r\n                    @click=\"showTrash = !showTrash\"\r\n                    :class=\"['btn d-flex align-items-center', showTrash ? 'btn-primary' : 'btn-outline-danger']\"\r\n                  >\r\n                    <span v-if=\"!showTrash\">Trashed</span>\r\n                    <span v-else>All</span>\r\n\r\n                    <svg v-if=\"!showTrash\"\r\n                         xmlns=\"http://www.w3.org/2000/svg\"\r\n                         width=\"26\" height=\"26\"\r\n                         viewBox=\"0 0 26 26\"\r\n                         fill=\"none\"\r\n                         stroke=\"currentColor\"\r\n                         stroke-width=\"1.5\"\r\n                         stroke-linecap=\"round\"\r\n                         stroke-linejoin=\"round\">\r\n                      <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                      <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0  \r\n                               1-2-2V6m3 0V4a2 2 0 0 \r\n                               1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                    </svg>\r\n\r\n                    <svg v-else\r\n                         xmlns=\"http://www.w3.org/2000/svg\" \r\n                         width=\"26\" height=\"26\" \r\n                         fill=\"currentColor\" \r\n                         class=\"bi bi-check2-circle\" \r\n                         viewBox=\"0 0 16 16\">\r\n                      <path d=\"M2.5 8a5.5 5.5 0 0 1 \r\n                               8.25-4.764.5.5 \r\n                               0 0 0 .5-.866A6.5 6.5 \r\n                               0 1 0 14.5 8a.5.5 \r\n                               0 0 0-1 0 5.5 5.5 \r\n                               0 1 1-11 0\"/>\r\n                      <path d=\"M15.354 3.354a.5.5 \r\n                               0 0 0-.708-.708L8 \r\n                               9.293 5.354 6.646a.5.5 \r\n                               0 1 0-.708.708l3 3a.5.5 \r\n                               0 0 0 .708 0z\"/>\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n\r\n    <!-- requisition registration form starts -->\r\n<form v-if=\"requisition_creation\" class=\"p-3 border rounded bg-white shadow\" @submit.prevent=\"registerRequisition\" id=\"close\">\r\n    <h4 class=\"text-center mb-4\">{{ incidence?.name?.toUpperCase() ?? ' REQUISITIONS' }} REGISTRATION FORM</h4>\r\n    \r\n    <!-- Top Section -->\r\n    <div class=\"row mb-3\">\r\n        <!-- Checkbox Group -->\r\n        \r\n        <!-- Date Fields -->\r\n        <div class=\"col-md-8 col-lg-9\">\r\n            <div class=\"row g-2\">\r\n\r\n                              <div class=\"col-2\">\r\n                    <label class=\"form-label small\">Proforma?</label>\r\n                    <div class=\"border rounded px-2 py-2 d-flex align-items-center\">\r\n                        <input \r\n                            type=\"checkbox\" \r\n                            class=\"form-check-input me-2\"\r\n                            @change=\"fillUseField('proforma')\"\r\n                        >\r\n                        <span class=\"small\">{{ use_field.includes('proforma') ? 'Yes' : 'No' }}</span>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class=\"col-sm-6 col-md-4 col-lg-3\">\r\n                    <label class=\"form-label small\">Requisition Date</label>\r\n                    <input type=\"date\" class=\"form-control form-control-sm\" v-model=\"date\">\r\n                </div>\r\n                \r\n                <div  \r\n                    v-if=\"date\"\r\n                    class=\"col-sm-6 col-md-4 col-lg-3\">\r\n                    <label class=\"form-label small\">Required Date</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        class=\"form-control form-control-sm\"\r\n                        v-model=\"required_date\"\r\n                    >\r\n                </div>\r\n                \r\n                <!-- Approval chains list -->\r\n                <div \r\n                    v-if=\"required_date\"\r\n                    class=\"col-md-4\">\r\n                    <label class=\"form-label small\">Select Approval Chain</label>\r\n                    <multiselect\r\n                        class=\"w-100\"\r\n                        v-model=\"incidence\"\r\n                        placeholder=\"Create an incidence\"\r\n                        label=\"name\"\r\n                        :options=\"incidences\"\r\n                    ></multiselect>\r\n                </div>\r\n\r\n                \r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <!-- Middle Section -->\r\n    <div class=\"row\" v-if=\"incidence \">\r\n        <div \r\n        v-if=\"![6].includes(incidence.id)\"\r\n        class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\">Select Requisition Type</label>\r\n            <multiselect \r\n                v-model=\"requisition_type\"\r\n                :options= \"types\"\r\n                placeholder=\"Select Requisition Type\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n          <div \r\n        v-else\r\n        class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\">Select Group</label>\r\n            <multiselect \r\n                v-model=\"requisition_type\"\r\n                :options= \"['construction materials','spares']\"\r\n                placeholder=\"Select Group\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n        <!-- Stores -->\r\n        <div \r\n        v-if=\"incidence?.id === 6 \"\r\n        class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\">Select Store</label>\r\n            <multiselect \r\n                v-model=\"store\"\r\n                :options=\"stores\"\r\n                placeholder=\"Select Store\"\r\n                label=\"name\"\r\n                :searchable=\"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n        \r\n        <!-- Projects -->\r\n                    <!-- v-if=\"[1,5,6,8].includes(incidence.id)\" -->\r\n        <div\r\n\r\n            class=\"col-md-6 col-lg-3 mb-2\">\r\n            <label class=\"form-label small\">Select Project</label>\r\n            <multiselect \r\n                v-model=\"project\"\r\n                :options= \"projects\"\r\n                placeholder=\"Select A Project\"\r\n                :searchable = \"true\"   \r\n                label=\"short_name\"     \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n  \r\n\r\n        <!-- Budgets -->\r\n        <div\r\n             v-if=\"requisition_type ==='budget'\"\r\n            class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\"><span v-if=\"loading_budgets\" v-html=\"waitIndicator()\"></span><span v-else>Select A Budget</span></label>\r\n            <multiselect \r\n               :disabled=\"loading_budgets\"\r\n                v-model=\"budget\"\r\n                :options= \"budgets\"\r\n                placeholder=\"Select A Budget\"\r\n                :searchable = \"true\"   \r\n                label=\"name\"     \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n        \r\n        <!-- Budget items -->\r\n        <div\r\n            v-if=\"budget\"\r\n            class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\">Select An Item</label>\r\n            <multiselect \r\n                v-model=\"budget_item\"\r\n                :options= \"budgetItems\"\r\n                placeholder=\"Select An Item\"\r\n                :searchable = \"true\"   \r\n                label=\"name\"     \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n        <!-- Budget item description -->\r\n        <div\r\n            v-if=\"budget_item\"\r\n            class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\">Select Description</label>\r\n            <multiselect \r\n                v-model=\"budget_item_description\"\r\n                :options= \"budgetItemDescriptions\"\r\n                placeholder=\"Select An Option\"\r\n                :searchable = \"true\"   \r\n                label=\"name\"     \r\n                multple=\"false\"\r\n                :required=\"false\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n        \r\n        <!-- Subcontractor list -->\r\n        <div \r\n            v-if=\"budget_item_description?.name?.toLowerCase().includes('subcontractor') || use_field.includes('subcontractor')\"\r\n            class=\"col-md-6 col-lg-5 mb-2\">\r\n            <label class=\"form-label small\">Select Subcontractor</label>\r\n            <multiselect \r\n                v-model=\"selected_subcontractor\"\r\n                :options= \"subcontractors\"\r\n                placeholder=\"Select Subcontractor\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n        <!-- Proforma invoice -->\r\n        <div \r\n            v-if=\"use_field.includes('proforma')\"\r\n            class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\">Proforma (PDF only)</label>\r\n            <input\r\n                type=\"file\"\r\n                class=\"form-control form-control-sm\"\r\n                @change=\"handleFileUpload\"\r\n                accept=\"application/pdf\"\r\n            >\r\n        </div>\r\n\r\n  \r\n        <div class=\"col-md-12\">\r\n          <textarea class=\"form-control\" placeholder=\"Enter Brief Description of the requisition\" v-model=\"briefing\" required></textarea>\r\n        </div>\r\n    </div>\r\n    \r\n\r\n    <!-- Items Section -->\r\n    <div v-if=\"requisition_type\" class=\"row mb-3\">\r\n\r\n        <div class=\"col-12 mb-2\">\r\n            <h6 class=\"border-bottom pb-2\">Add Items</h6>\r\n        </div>\r\n        \r\n        <div class=\"col-md-6 col-lg-3 mb-2\">\r\n            <label class=\"form-label small\">Select Item</label>\r\n            <multiselect \r\n                v-if=\"requisition_type ==='labour'\"\r\n                v-model=\"item\"\r\n                :options= \"labours\"\r\n                placeholder=\"Select Labour\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n            \r\n            <multiselect \r\n                v-else-if=\"incidence?.id === 6\"\r\n                v-model=\"item\"\r\n                :options= \"storeItems\"\r\n                placeholder=\"Select Store Item\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n\r\n            <multiselect \r\n                v-else-if=\"requisition_type ==='spares' || requisition_type ==='construction materials'\"\r\n                v-model=\"item\"\r\n                :options= \"items_list\"\r\n                placeholder=\"Select Option\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n\r\n\r\n              <input \r\n                type=\"text\" \r\n                class=\"form-control form-control-sm\" \r\n                v-model=\"item\" \r\n                placeholder=\"Enter Item\" \r\n                \r\n            >\r\n        </div>\r\n        \r\n        <div class=\"col-md-6 col-lg-2 mb-2\">\r\n            <label class=\"form-label small\">Unit</label>\r\n            <multiselect \r\n                v-model=\"units\"\r\n                :options= \"unitList\"\r\n                placeholder=\"Unit\"\r\n                label=\"short_name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n        \r\n        <div class=\"col-md-6 col-lg-3 mb-2\">\r\n            <label class=\"form-label small\">Description</label>\r\n              <input \r\n                type=\"text\" \r\n                class=\"form-control form-control-sm\" \r\n                v-model=\"description\" \r\n                placeholder=\"Enter Description\" \r\n                \r\n            >\r\n        </div>\r\n        \r\n\r\n                <div class=\"col-md-6 col-lg-2 mb-2\">\r\n            <label class=\"form-label small\">\r\n                Quantity {{ budget_item_description ? \" Budgeted : \"+budget_item_description.quantity * budget_item_description.quantity_2: (item?.balance_quantity ? \" Available : \"+item.balance_quantity : '') }}\r\n            </label>\r\n            <input \r\n                type=\"number\" \r\n                class=\"form-control form-control-sm\" \r\n                v-model=\"quantity\" \r\n                placeholder=\"Qty\" \r\n                step=\"any\"   \r\n        \r\n                :disabled=\"(['budget'].includes(requisition_type) && !budget_item_description) || (incidence?.id === 6 && !item)\" \r\n            >\r\n        </div>\r\n        \r\n        \r\n        <div class=\"col-md-6 col-lg-2 mb-2\">\r\n            <label class=\"form-label small\">\r\n                <span v-if=\"requisition_type === 'labour'\">Labour Rate</span>\r\n                <span v-else>Rate {{ budget_item_description ? \" Budgeted : \"+ formatNumber(budget_item_description.cost): '' }}</span>\r\n            </label>\r\n            \r\n            <label \r\n                v-if=\"requisition_type === 'labour'\" \r\n                class=\"form-control form-control-sm\"\r\n            >{{ rate.toLocaleString() }}/=</label>\r\n            \r\n            <input \r\n                v-else\r\n                type=\"number\" \r\n                class=\"form-control form-control-sm\" \r\n                v-model=\"rate\" \r\n                placeholder=\"Enter rate\" \r\n                step=\"any\"   \r\n                @input=\"enforceMax()\" \r\n                :disabled=\"['budget'].includes(requisition_type) && !budget_item_description\"\r\n            >\r\n        </div>\r\n        \r\n\r\n        <div class=\"col-md-6 col-lg-2 mb-2\" v-if=\"incidence?.id !== 6\">\r\n            <label class=\"form-label small\">\r\n                {{ budget_item_description ? \" Balance : \"+formatNumber(max_cost): 'Cost' }}\r\n            </label>\r\n            <label class=\"form-control form-control-sm\">{{ formatNumber(quantity * rate) }}</label>\r\n        </div>\r\n\r\n                     <div \r\n            v-if=\"incidence?.id !== 6\"\r\n            class=\"col-md-6  col-lg-3 mb-2\">\r\n            <label class=\"form-label small\">Select An Asset</label>\r\n            <multiselect \r\n                v-model=\"asset\"\r\n                :options= \"assets\"\r\n                placeholder=\"Select An Asset\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n\r\n                     <div \r\n            v-if=\"incidence?.id !== 6\"\r\n            class=\"col-md-6 col-lg-3 mb-2\">\r\n            <label class=\"form-label small\">\r\n               Receiver \r\n            </label>\r\n            <multiselect\r\n                v-model=\"receiver\"\r\n                :options=\"['Vendor','Beneficiary']\"\r\n                placeholder=\"Select Receiver\"\r\n            >\r\n            </multiselect>\r\n        </div>\r\n\r\n         <div \r\n         v-if=\"incidence?.id !== 6\"\r\n         class=\"col-md-6 col-lg-4 mb-2\">\r\n            <label class=\"form-label small\">\r\n               {{ receiver }}\r\n            </label>\r\n           <multiselect \r\n                v-if=\"receiver === 'Vendor'\"\r\n                v-model=\"vendor\"\r\n                :options= \"vendors\"\r\n                placeholder=\"Select Vendor\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n                :disabled ='vendor?.id '\r\n            ></multiselect>\r\n            <input\r\n            v-if=\"receiver==='Beneficiary'\"\r\n                type=\"text\"\r\n                placeholder=\"Enter Beneficiary Name\"\r\n                class=\"form-control form-control-sm\"\r\n                v-model=\"beneficiary\"\r\n            >\r\n        </div>\r\n        \r\n        <div class=\"col-md-12 col-lg-12 mb-2 text-end\">\r\n            <button \r\n                type=\"button\" \r\n                class=\"btn btn-outline-success btn-sm mt-4\"\r\n                @click=\"pushItem()\"\r\n            >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\">\r\n                    <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n                    <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line>\r\n                    <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line>\r\n                </svg>\r\n                Add Item\r\n            </button>\r\n        </div>\r\n    </div>\r\n    \r\n    <!-- Items Table -->\r\n    <div \r\n        v-if=\"formRequisitionItems.length>0\"\r\n        class=\"row mb-3\">\r\n        <div class=\"col-12\">\r\n            <div class=\"table-responsive custom-table table3\">\r\n                <v-client-table \r\n                    :data=\"formRequisitionItems\" \r\n                    :columns=\"formItemColumns\" \r\n                    :options=\"table_option\"\r\n                >\r\n                    <template #actions=\"props\">\r\n                        <a href=\"javascript:void(0);\" title=\"Delete\" @click=\"pullItem(props.row.Sno)\">\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"20\"\r\n                                height=\"20\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                stroke-width=\"1.5\"\r\n                                stroke-linecap=\"round\"\r\n                                stroke-linejoin=\"round\"\r\n                                class=\"text-danger\"\r\n                            >\r\n                                <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                            </svg>\r\n                        </a>\r\n                    </template>\r\n                </v-client-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <!-- Buttons -->\r\n    <div class=\"d-flex flex-wrap gap-2 justify-content-end mt-4\">\r\n        <button type=\"button\" class=\"btn btn-outline-danger  btn-sm\" @click=\"clearForm()\">\r\n        \r\n        <svg \r\n  style=\"cursor: pointer\"\r\n  xmlns=\"http://www.w3.org/2000/svg\" \r\n  width=\"26\" \r\n  height=\"26\" \r\n  fill=\"currentColor\" \r\n  class=\"bi bi-trash \" \r\n  viewBox=\"0 0 16 16\"\r\n>\r\n  <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n  <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n</svg>\r\n  Clear\r\n\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm\" @click=\"requisition_creation = false,clearForm()\" id=\"cancel\">Cancel</button>\r\n        <button type=\"submit\" class=\"btn btn-primary btn-sm\" :disabled=\"loading_spinner || formRequisitionItems.length<=0 || loading \">\r\n            <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span v-else>Register</span>\r\n        </button>\r\n    </div>\r\n</form>\r\n\r\n             <!-- requisition registration form ends-->\r\n \r\n                           <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner \" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n       \r\n\r\n\r\n\r\n            <!-- requisition table starts -->\r\n        <div \r\n        v-else\r\n        v-if=\"!requisition_creation\" class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n              <div v-if=\"isWaiting\" v-html=\"pleaseWait()\"></div>\r\n                <div v-else class=\"panel p-0\">\r\n                    <div  class=\"custom-table table3\">\r\n                        <v-client-table  :data=\"filteredRequisitions\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                            </template>\r\n                            <template #sno=\"{ index }\">\r\n    {{ index + 0 }}\r\n  </template>\r\n                            <template #actions=\"props\">\r\n                             \r\n                              <div class=\"d-flex justify-content-center align-items-center gap-2\">\r\n                                \r\n                                 <a href=\"javascript:void(0);\" title=\"View\" data-bs-toggle=\"modal\" data-bs-target=\"#view_requisition\"\r\n                                 @click=\"fillItems(props.row)\"\r\n                                 >\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-info\"\r\n                                        data-bs-toggle=\"modal\" data-bs-target=\"#requisitionItems\"\r\n                                        \r\n                                    >\r\n                                        <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                                        <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                                    </svg>\r\n                                </a>\r\n\r\n                                <a\r\n  href=\"javascript:void(0);\"\r\n  title=\"Edit\"\r\n  @click=\"openEditModal(props.row)\"\r\n  data-bs-toggle=\"modal\"\r\n  data-bs-target=\"#edit-requisition-modal\"\r\n  v-if = \"user_permissions.includes('can_edit_requisition')\"\r\n\r\n>\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-primary\"\r\n                                    >\r\n                                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                    </svg>\r\n                                </a>\r\n\r\n                                <a \r\n                v-if=\"user_permissions.includes('can_print_lpo')\"\r\n                href=\"javascript:void(0);\" @click=\"printRequisition(props.row)\" class=\"text-success me-2\">\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\r\n  </svg>\r\n                               </a>\r\n<svg \r\n  v-if=\"user_permissions.includes('can_delete_requisition')\"\r\n  @click=\"DeleteRequisition(props.row)\"\r\n  style=\"cursor: pointer\"\r\n  xmlns=\"http://www.w3.org/2000/svg\" \r\n  width=\"26\" \r\n  height=\"26\" \r\n  fill=\"currentColor\" \r\n  class=\"bi bi-trash text-danger\" \r\n  viewBox=\"0 0 16 16\"\r\n>\r\n  <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n  <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n</svg>\r\n\r\n                              </div>                 \r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            <!-- requisition table ends -->\r\n\r\n            <!-- requisition items sterts -->\r\n<div class=\"modal fade mymodal\" id=\"requisitionItems\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-fullscreen\">\r\n    <div class=\"modal-content\">\r\n      <!-- Header -->\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Requisition Items</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"clearForm()\" id=\"close-requisition-modal\"></button>\r\n      </div>\r\n\r\n      <!-- Body -->\r\n      <div class=\"modal-body\">\r\n\r\n\r\n         <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3 table-responsive\">\r\n<table class=\"table table-bordered table-striped\">\r\n      <thead >\r\n        <tr>\r\n          <th>Req#</th>\r\n          <th>Requester</th>\r\n          <th>Requested</th>\r\n          <th v-if=\"requisition.status?.key !== 'Unapproved'\">{{ requisition.status?.key }}</th>\r\n          <th>Source</th>\r\n          <th>Purpose</th>\r\n          <th>Project</th>\r\n          <th>Status</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr >\r\n          <td>{{ requisition.id }}</td>\r\n          <td>{{ requisition.requester }}</td>\r\n          <td>{{ requisition.date }}</td>\r\n          <td v-if=\"requisition.status?.key !== 'Unapproved'\"> {{ formatDate(requisition.approved_at) }}</td>\r\n          <td>{{ requisition.type }}</td>\r\n          <td>{{ requisition.purpose }}</td>\r\n          <td>{{ requisition.project }}</td>\r\n          <td> <span class=\"mb-0 badge\" :class=\"`badge-${requisition.status?.class}`\">\r\n                  {{ requisition.status?.key }}\r\n                </span></td>\r\n        </tr>\r\n     <tr v-if=\"requisition.description\">\r\n      <td colspan=\"7\"><b> Brief Description : </b> {{ requisition.description }}</td>\r\n    </tr>\r\n      <tr v-if=\"requisition.remark\">\r\n      <td colspan=\"7\"> <b> Remark :  </b> {{ requisition.remark }}</td>\r\n    </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    </div>\r\n    </div>\r\n    </div>\r\n\r\n                <!-- approval button starts -->\r\n                     <div class=\"mb-2 text-center fw-bold\" style=\"font-size: x-large;\">\r\n      <strong>Total Cost: </strong>\r\n      <span>\r\n        {{\r\n          requisition?.items?.reduce((sum, item) => {\r\n            const qty = Number(item.quantity) || 0;\r\n            const rate = Number(item.rate) || 0;\r\n            return sum + qty * rate;\r\n          }, 0).toLocaleString() + '/='\r\n        }}\r\n      </span>\r\n    </div>\r\n\r\n    \r\n  <div v-if=\"( requisition.status?.key !== 'approved' && user_permissions.includes('can_approve_requisition'))\" class=\"mb-2 text-center\">\r\n  <div class=\"btn-group mb-3\" >\r\n    <button class=\"btn btn-primary me-2\" @click=\"status = 3\" :disabled=\"spinner\">Approve</button>\r\n    <button class=\"btn btn-danger me-2\" @click=\"status = 4 \" :disabled=\"spinner\">Reject</button>\r\n        <button class=\"btn btn-warning me-2\" @click=\"status = 17 ,remark = requisition.remark\" :disabled=\"spinner\">Hold Request</button>\r\n    <button class=\"btn btn-info me-2\" @click=\"status = 14,remark = requisition.remark\" :disabled=\"spinner\">Remark</button>\r\n  </div>\r\n\r\n    <div v-if=\"requisition.requester_id == user_id && requisition_approval?.status ==='closed'\" class=\"btn-group mb-3 me-2\">\r\n     <button class=\"btn btn-success\" @click=\"status = 3;fillRequisitionRemark(requisition)\" :disabled=\"spinner\">\r\n       <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Activate</span>\r\n     </button>\r\n  </div>\r\n\r\n\r\n  <div v-if=\"status\" class=\"mb-2\">\r\n    <span\r\n      class=\"badge rounded-pill\"\r\n      :class=\"{\r\n        'bg-danger': status == 4,\r\n        'bg-success': status == 3,\r\n        'bg-warning': status == 17,\r\n        'bg-info': status != 3 && status != 4\r\n      }\"\r\n      style=\"font-size: 1rem;\"\r\n    >\r\n      {{\r\n        status == 3\r\n          ? 'Approve Request'\r\n          : status == 17\r\n           ? 'Hold Request'\r\n          : status == 4\r\n          ? 'Reject Request'\r\n          : 'Fill Remark'\r\n      }}\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"input-group\" v-if=\"status \">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control\"\r\n      :placeholder=\"status == 3 ? 'Enter Approval Remark' : status == 4 ? 'Enter Rejection Remark' : 'Enter Remark'\"\r\n      v-model=\"remark\"\r\n    >\r\n    <button class=\"btn btn-primary\" type=\"button\" :disabled=\"spinner\" @click=\"fillRequisitionRemark(requisition)\">\r\n      <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Save</span>\r\n    </button>\r\n  </div>\r\n\r\n</div>\r\n\r\n         <!-- approval button ends -->\r\n\r\n        <form  @submit.prevent=\"registerIncidence()\">\r\n          <div class=\"row layout-top-spacing\">\r\n            \r\n            <!-- Status & Incidence -->\r\n            <div class=\"col-12  d-flex align-items-center justify-content-between\">\r\n     \r\n            </div>\r\n                 <div v-if=\"incidence?.id === 6 && store\" class=\"mt-2 col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n              <div class=\"panel p-0\">\r\n                <div class=\"custom-table table3\">\r\n                  <table class=\"table table-bordered table-striped\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Item Requested</th>\r\n                        <th>Item Issued</th>\r\n                        <th>Quantity Issuing</th>\r\n                        <th>Item Condition</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"item in requisitionItems\" :key=\"item.id\">\r\n                        <td>{{ item.item }}</td>\r\n                        <td>\r\n                          <multiselect\r\n                            v-model=\"item.store_item\"\r\n                            :options=\"storeItems\"\r\n                            placeholder=\"Select Item\"\r\n                            :searchable=\"true\"\r\n                            multple=\"false\"\r\n                            label=\"name\"\r\n                            :required=\"true\"\r\n                            :allow-empty=\"false\"\r\n                          ></multiselect>\r\n                        </td>\r\n                        <td>\r\n                          <input\r\n                            type=\"number\"\r\n                            class=\"form-control\"\r\n                            :placeholder=\"'available ' + item.store_item.balance_quantity\"\r\n                            v-model=\"item.issued_quantity\"\r\n                            required\r\n                            :max=\"item.store_item.balance_quantity\"\r\n                          />\r\n                        </td>\r\n\r\n                         <td>\r\n                          <label\r\n                            type=\"number\"\r\n                            class=\"form-control\"\r\n                          >{{item.store_item.condition ??'Select Item First'}}</label>\r\n                        </td>\r\n\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- Requisition Items -->\r\n            <div :class=\"['col-lg-12', 'col-sm-12', 'layout-spacing', proforma ? 'col-xl-6' : 'col-xl-12']\">\r\n              <div class=\"panel p-0\">\r\n                <div class=\"custom-table table3\">\r\n                  <v-client-table :data=\"requisitionItems\" :columns=\"itemColumns\" :options=\"table_option\">\r\n                    <template #description=\"props\">\r\n                            <router-link v-if=\"requisition.subcontractor\" class=\"btn btn-outline-primary \" :to=\"`/subcontractor/${requisition.subcontractor.id}`\">{{props.row.description}}</router-link>\r\n                            <router-link v-else-if=\"props.row.asset_id && requisition.type !=='jobcard'\" class=\"btn btn-outline-primary \" :to=\"`/assets/fuel-statement/${props.row.asset_id}`\">{{props.row.description}}</router-link>\r\n                            <router-link v-else-if=\"requisition.type ==='jobcard'\" class=\"btn btn-outline-primary \" :to=\"`/jobcard/${requisition.item_id}/${props.row.asset_id}`\">{{props.row.description}}</router-link>\r\n                            <span v-else>{{ props.row.description }}</span>\r\n                    </template>\r\n                    <template #actions=\"props\">\r\n                     <div class=\"d-flex justify-content-center align-items-center gap-2\">\r\n                      <a href=\"javascript:void(0);\" title=\"Edit\"  @click=\"openEditItemModal(props.row)\"    v-if = \"user_permissions.includes('can_edit_requisition') \"\r\n>\r\n                        <svg\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          width=\"20\"\r\n                          height=\"20\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          stroke-width=\"1.5\"\r\n                          stroke-linecap=\"round\"\r\n                          stroke-linejoin=\"round\"\r\n                          class=\"text-primary\"\r\n                          data-bs-toggle=\"modal\"\r\n                          data-bs-target=\"#edit-requisition-items-modal\"\r\n                        >\r\n                          <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                          <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                        </svg>\r\n                      </a>\r\n                        \r\n                      <router-link  :to=\"`/assets/fuel-statement/${props.row.asset_id}`\" @click=\"closeModal\" v-if=\"props.row.asset_id\">     \r\n                            <button class=\"btn btn-outline-primary\">Diesel</button>\r\n                      </router-link>  \r\n\r\n                        <!-- <router-link v-if=\"requisition.subcontractor\" class=\"btn btn-primary \" :to=\"`/subcontractor/${requisition.subcontractor.id}`\">Subcontractor</router-link> -->\r\n\r\n\r\n                       <router-link  :to=\"`/requisition-budget/${props.row.item_id}`\" @click=\"closeModal\" v-if =\"requisition.type ==='budget'\">     \r\n                            <button class=\"btn btn-outline-primary\">Budget</button>\r\n                      </router-link>  \r\n\r\n                    </div>\r\n                    </template>\r\n                  </v-client-table>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Rejection Details -->\r\n              <div v-if=\"remarks.length > 0\" class=\"mt-3\">\r\n                <h4 class=\"text-center text-danger\">Rejection Details</h4>\r\n                <table class=\"table table-bordered table-striped align-middle\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Sno</th>\r\n                      <th>Rejected By</th>\r\n                      <th>Date</th>\r\n                      <th>Reason</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"remark, i in remarks\" :key=\"remark.id\">\r\n                      <td>{{ i + 1 }}</td>\r\n                      <td>Director</td>\r\n                      <td>{{ new Date(remark.created_at).toLocaleDateString('en-GB') }}</td>\r\n                      <td>{{ remark.remark }}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Issuing Items -->\r\n  \r\n\r\n            <!-- Proforma -->\r\n       <div class=\"col-xl-6 col-lg-12 col-sm-12 layout-spacing\" v-if=\"proforma\">\r\n  <div class=\"panel p-3 position-relative\">\r\n    <a :href=\"proforma\" target=\"_blank\" class=\"stretched-link\"></a>\r\n    <h4 class=\"text-center\">Proforma Invoice</h4>\r\n    <embed :src=\"proforma\" type=\"application/pdf\" width=\"100%\" height=\"600px\" />\r\n  </div>\r\n</div>\r\n\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n\r\n      <!-- Footer -->\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"clearForm\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n            <!-- requisition items ends -->\r\n\r\n            <!-- edit requisition modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"edit-requisition-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editRequisitionModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editRequisitionModalLabel\">Edit Requisition</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateRequisition()\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n             <div class=\"col-md-4\">\r\n                <label for=\"description\">Status</label>\r\n              <multiselect \r\n                v-model=\"stat\"\r\n                :options= \"statuses\"\r\n                placeholder=\"Select Status\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <div>\r\n            <label class=\"form-label small\">Select Project</label>\r\n            <multiselect \r\n                v-model=\"proj\"\r\n                :options= \"projects\"\r\n                placeholder=\"Select A Project\"\r\n                :searchable = \"true\"   \r\n                label=\"short_name\"    \r\n                track-by=\"id\" \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"true\"\r\n                @remove=\"project = null\"\r\n            ></multiselect>\r\n        </div>\r\n            </div>\r\n             <div \r\n            class=\"col-md-4\">\r\n            <label class=\"form-label small\">Select Subcontractor</label>\r\n            <multiselect \r\n                v-model=\"selected_subcontractor\"\r\n                :options= \"subcontractors\"\r\n                placeholder=\"Select Subcontractor\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n                 <div>\r\n            <label class=\"form-label small\">Select Vendor</label>\r\n            <multiselect \r\n                v-model=\"vendor\"\r\n                :options= \"vendors\"\r\n                placeholder=\"Select Vendor\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n            </div>\r\n              <div class=\"col-md-4\">\r\n                    <label class=\"form-label small\">Select Approval Chain</label>\r\n                    <multiselect\r\n                        class=\"w-100\"\r\n                        v-model=\"incidence\"\r\n                        placeholder=\"Create an incidence\"\r\n                        label=\"name\"\r\n                        :options=\"incidences\"\r\n                    ></multiselect>\r\n                </div>\r\n              <div class=\"col-md-4\">\r\n                <label for=\"description\">beneficiary</label>\r\n              <input type=\"text\" v-model=\"beneficiary\" class=\"form-control\" placeholder=\"beneficiary\">\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n           <div class=\"col-md-12\">\r\n                <label for=\"description\">Description </label>\r\n              <input type=\"text\" v-model=\"descr\" class=\"form-control\" placeholder=\"Enter description\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\" id=\"close_modal\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading_spinner || loading\">\r\n            <span v-if=\"loading_spinner || loading\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            <span v-else>Edit</span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  </div>\r\n               <!-- edit requisition modal ends -->\r\n\r\n               <!-- edit requisition items modal starts -->\r\n <div class=\"modal fade mymodal\" id=\"edit-requisition-items-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editRequisitionItemsModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editRequisitionItemsModalLabel\">Edit Requisition Items</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"  @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateRequisitionItem()\">\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-3\">\r\n              <label for=\"item\">Item</label>\r\n              <input \r\n                type=\"text\" \r\n                v-model=\"item\" \r\n                class=\"form-control\" \r\n                placeholder=\"Enter Item\"\r\n                required\r\n              >\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n              <label for=\"units\">Units</label>\r\n              <multiselect \r\n                v-model=\"units\"\r\n                :options=\"unitList\"\r\n                placeholder=\"Select Unit\"\r\n                label=\"short_name\"\r\n                :searchable=\"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n              ></multiselect>\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n              <label for=\"quantity\">Quantity</label>\r\n              <input\r\n                type=\"number\"\r\n                v-model=\"quantity\"\r\n                class=\"form-control\"\r\n                placeholder=\"Enter Quantity\"\r\n                min=\"0\"\r\n                required\r\n                step=\"any\"\r\n              />\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n              <label for=\"rate\">Rate</label>\r\n              <input \r\n                type=\"number\" \r\n                v-model=\"rate\" \r\n                class=\"form-control\" \r\n                placeholder=\"Enter Rate\" \r\n                min=\"0\" \r\n                required \r\n                step=\"any\"\r\n              >\r\n            </div>\r\n             <div \r\n            class=\"col-md-4\">\r\n            <label class=\"form-label small\">Select An Asset</label>\r\n            <multiselect \r\n                v-model=\"asset\"\r\n                :options= \"assets\"\r\n                placeholder=\"Select An Asset\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n            <label class=\"form-label small\">Select Vendor</label>\r\n            <multiselect \r\n                v-model=\"vendor\"\r\n                :options= \"vendors\"\r\n                placeholder=\"Select Vendor\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n            ></multiselect>\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n                <label for=\"description\">beneficiary</label>\r\n              <input type=\"text\" v-model=\"beneficiary\" class=\"form-control\" placeholder=\"beneficiary\">\r\n            </div>\r\n              <div class=\"col-md-12\">\r\n              <label for=\"description\">Description</label>\r\n              <input \r\n                type=\"text\" \r\n                v-model=\"description\" \r\n                class=\"form-control\" \r\n                placeholder=\"Enter Description\"\r\n              >\r\n            </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\" id=\"close_editing\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading_spinner || loading\">\r\n            <span v-if=\"loading_spinner || loading\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            <span v-else>Update</span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n                   <!-- edit requisition items modal ends -->\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import { onMounted, ref,inject,computed,watch } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n\r\n    const today = new Date();\r\n    const todayString = today.toISOString().split('T')[0];\r\n    useMeta({ title: 'Requisitions ' + todayString });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n     const loading_budgets = ref(false)\r\n     const waitIndicator = inject('waitIndicator')\r\n    const filter = ref('')\r\n    const getFilteredRequests =  ()=>{\r\n      return filteredRequisitions.value;\r\n    }\r\n    import { useRouter, useRoute } from 'vue-router';\r\n    const router = useRouter();\r\n    const route = useRoute(); \r\n        const isAllowedTime = () => {\r\n  const hour = new Date().getHours();\r\n  return hour >= 16 || hour < 9;\r\n}\r\n    const allTypes = ref(['General','budget','labour','construction materials','spares'])\r\n    const  types = ref([])\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const user_id = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    const requisitionTypes = ref([]);\r\n    const requisition_type = ref('');\r\n    const spinner = ref(false)\r\n    const incidence = ref('')\r\n    const tableShimmer = inject('tableShimmer');\r\n    const formatNumber = inject('formatNumber');\r\n    const formatDate = inject('formatDate');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const date = ref(new Date().toISOString().split('T')[0])\r\n    const status = ref('')\r\n    const item = ref('')\r\n    const quantity = ref('')\r\n    const rate = ref('')\r\n    const remark = ref()\r\n    const units = ref('')\r\n    const remarks = ref([])\r\n    const item_id = ref(0)\r\n    const required_date = ref('');\r\n    const requisitions = ref([]);\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['sno','ref_no', 'requester','purpose','type','project','date','cost','status','remark',  'actions']);\r\n    const requisition_creation = ref(false);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const formRequisitionItems = ref([])\r\n    const formRequisitionItems2 = ref([])\r\n    const upload = ref('')\r\n    const issueItems = ref([''])\r\n    const unitList = ref([])\r\n    const vendor = ref('')\r\n    const beneficiary = ref('')\r\n    const showTrash = ref(false)\r\n    const receiver = ref('')\r\n\r\nconst vendors = ref([])\r\nconst getVendors = async ()=>{\r\n  const response = await axiosInstance.get('vendors')\r\n  vendors.value = response.data\r\n}\r\n\r\nconst assets= ref([])\r\nconst getAssets = async ()=>{\r\n  const response = await axiosInstance.get('machines')\r\n  assets.value = response.data.map((item)=>({\r\n  ...item,\r\n  name : item.name + ' - ' + item.type_name\r\n  }))\r\n}\r\n\r\nconst filteredRequisitions = computed(() => {\r\n  let filtered = requisitions.value;\r\n\r\n  if (user_permissions.includes('is_md')) {\r\n    if (showTrash.value) {\r\n      filtered = filtered.filter(r =>\r\n        ['Rejected', 'On Hold', 'Remarked'].includes(r.status?.key)\r\n      );\r\n    } else {\r\n      filtered = filtered.filter(r =>\r\n        ['Unapproved', 'approved'].includes(r.status?.key)\r\n      );\r\n    }\r\n  }\r\n\r\nif (filter.value) {\r\n  const keyword = filter.value.toLowerCase();\r\n  filtered = filtered.filter(r =>\r\n    (r.requester && r.requester.toLowerCase().includes(keyword)) ||\r\n    (r.project && r.project.toLowerCase().includes(keyword)) ||\r\n    (r.description && r.description.toLowerCase().includes(keyword)) ||\r\n    (r.remark && r.remark.toLowerCase().includes(keyword)) ||\r\n    (r.items && r.items.some(item =>\r\n      (item.description && item.description.toLowerCase().includes(keyword)) ||\r\n      (item.receiver && item.receiver.toLowerCase().includes(keyword)) ||\r\n      (item.remark && item.remark.toLowerCase().includes(keyword))\r\n    ))\r\n  );\r\n}\r\n\r\n  return filtered;\r\n});\r\n\r\n\r\nconst projects = ref([])\r\nconst project = ref('')\r\n\r\nconst getProjects = async ()=>{\r\n  const response = await axiosInstance.get('projects')\r\n  projects.value = response.data\r\n}\r\n\r\n\r\nconst budgets = ref([])\r\nconst budget = ref('')\r\nconst getBudgets = async (id) => {\r\n  budget.value = ''\r\n  loading_budgets.value = true\r\n  const response = await axiosInstance.get(`budgets?project_id=${id}`)\r\n  budgets.value = response.data.filter(b => b.status === 'closed')\r\n  loading_budgets.value = false\r\n}\r\n\r\n\r\nwatch(project, (newVal) => {\r\n    if (newVal) {\r\n        getBudgets(newVal.id)\r\n    }\r\n});\r\n\r\nwatch(requisition_type, (newVal) => {\r\n    if (newVal) {\r\n      formRequisitionItems.value = []\r\n      formRequisitionItems2.value = []\r\n      budgets.value = []\r\n      budget.value = ''\r\n      project.value = ''\r\n      clearItemForm()\r\n    }\r\n});\r\n\r\nwatch(incidence, (newVal) => {\r\n    if (newVal) {\r\n      clearForm()\r\n      incidence.value = newVal\r\n      formRequisitionItems.value = []\r\n      formRequisitionItems2.value = []\r\n      clearItemForm()\r\n    }\r\n});\r\n\r\n\r\n\r\nconst budgetItems = ref([])\r\nconst budget_item = ref('')\r\nwatch(budget, (newVal) => {\r\n    if (newVal) {\r\n         budgetItems.value = newVal.items\r\n    }\r\n});\r\n\r\nconst budgetItemDescriptions = ref([])\r\nconst budget_item_description = ref('')\r\nconst max_cost = ref('')\r\nconst max_quantity = ref('')\r\nwatch(budget_item, (newVal) => {\r\n    if (newVal) {\r\n         budgetItemDescriptions.value = newVal.descriptions\r\n         item.value = newVal.name\r\n    }\r\n});\r\n\r\nwatch(budget_item_description, (newVal) => {\r\n    if (newVal) {\r\n         max_quantity.value = newVal.quantity * newVal.quantity_2,\r\n         max_cost.value = (newVal.quantity * newVal.quantity_2 * newVal.cost) - newVal.used_cost\r\n         item_id.value = newVal.id\r\n         description.value = newVal.name\r\n         units.value = newVal.units\r\n    }\r\n});\r\n\r\nconst subcontractors = ref([])\r\nconst selected_subcontractor = ref('')\r\nconst getSubcontractors = async ()=>{\r\n  const response = await axiosInstance.get('subcontractor-agreements')\r\n  subcontractors.value = response.data.map((item)=>({\r\n    ...item,\r\n    name : item.project.short_name + ' - ' +item.item + '( '+item.subcontracted_to +' )'\r\n  }))\r\n}\r\n\r\n\r\nwatch(() => route.params.status_id, (newStatusId) => {\r\n  loading_spinner.value = true;\r\n  getRequisitions();\r\n});\r\n\r\n\r\nconst getUnits = async ()=>{\r\n  const response = await axiosInstance.get('units')\r\n  unitList.value = response.data\r\n}\r\n\r\n\r\nconst fillRequisitionRemark = async (requisition) => {\r\n  spinner.value = true\r\n  const payload = {\r\n    status_id: status.value,\r\n    remark: remark.value,\r\n    ...(status.value == 3 && {\r\n      approval: {\r\n        approval_group_id: requisition.approval_group_id,\r\n        source: 'requisition',\r\n        source_id: requisition.id,\r\n        requester_id: requisition.requester_id,\r\n        items: requisition.items\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  try{\r\n    const response = await axiosInstance.put(`requisitions/${requisition.id}`,payload)\r\n     getRequisitions();\r\n    showMessage(\"Saved Successfully\")\r\n    document.getElementById('close-requisition-modal').click()\r\n  }catch(error){\r\n    console.log(error)\r\n    showError(error.message)\r\n  }finally{\r\n    spinner.value = false\r\n  }\r\n}\r\n    const registerIncidence = async () =>{\r\n      spinner.value = true\r\n      if(incidence.value.id == 6){\r\n                issueItems.value = requisitionItems.value.map((item)=>({\r\n                  // ...item,\r\n                  requisition_item_id:item.id,\r\n                  quantity: item.issued_quantity ? item.issued_quantity : 0 ,\r\n                  store_item_id : item.store_item.id           \r\n                }))\r\n                const issuePayload = {\r\n          issueData : {\r\n            requisition_id:requisition.value.id,\r\n            issuer_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n          },\r\n          issueItems : issueItems.value\r\n        }\r\n        try{\r\n        const response = await axiosInstance.post('good-issue-notes',issuePayload)\r\n            showMessage(response.data.message)\r\n            router.push(`/good-issue-notes`);\r\n        }catch(error){\r\n          showError(error.message)\r\n          console.log(error)\r\n        }finally{\r\n         spinner.value = false\r\n        }\r\n        return ;\r\n      }\r\n      else{\r\n\r\n        const payload = {\r\n          requester_id : JSON.parse(localStorage.getItem(\"user\")).id,\r\n          approval_group_id:incidence.value.id,\r\n          source_id : requisition.value.id,\r\n          source: 'requisition',\r\n          items : requisitionItems.value,\r\n          remark: beneficiary.value\r\n        }\r\n       try {\r\n    const response = await axiosInstance.post('approval-lists', payload);\r\n    showMessage(incidence.value.name + ' created!');\r\n    clearForm()\r\n    router.push(`/approval-chains/${incidence.value.id}`);\r\n\r\n} catch (error) {\r\n    console.error(error);\r\n    showError(error.response.data.message);\r\n} finally {\r\n    spinner.value = false;\r\n}\r\n      }\r\n    }\r\n    const minRequiredDate = computed(() => {\r\n        const today = new Date();\r\n        today.setDate(today.getDate() + 1);\r\n        return today.toISOString().split('T')[0];\r\n    });\r\n    const table_option = ref({\r\n        perPage: 50,\r\n        perPageValues: [  50 ,100 ,200 ,500 ],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'role_name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\nconst incidences = ref([])\r\nconst getIncidences =  async () =>{\r\n    try{\r\n    const response = await axiosInstance.get('incidences?company_id=6')\r\n    incidences.value = response.data\r\n    }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n    }\r\n   \r\n}\r\n\r\nconst items_list = ref([])\r\n    const getItems = async (source) => {\r\n        const response = await  axiosInstance.get(source)\r\n        items_list.value = response.data.map((item, index) => ({\r\n            ...item,\r\n            SNo: index + 1,\r\n            name : item.name + (item.description ? ' - ' + item.description : ''),\r\n            unit:item.unit ?? '---'\r\n        }));\r\n    };\r\n\r\n    const labours = ref([])\r\n    const getLabours = async () => {\r\n        const response = await axiosInstance.get('/labour-types')\r\n        labours.value = response.data\r\n    };\r\n\r\n    const statuses = ref([])\r\n    const getStatuses = async () => {\r\n        const response = await axiosInstance.get('/statuses')\r\n        statuses.value = response.data\r\n    };\r\n\r\n\r\n    \r\nconst handleFileUpload = (e) => {\r\n  upload.value = e.target.files[0];\r\n};\r\n\r\n\r\nwatch(requisition_type, (newVal) => {\r\n    if (newVal === 'spares') getItems('get-spares');\r\n    if (newVal === 'labour') getLabours();\r\n    if (newVal === 'construction materials') getItems('get-materials');\r\n});\r\n\r\nwatch(item, (newVal) => {\r\n    if (requisition_type.value === 'labour' && newVal) {\r\n        rate.value = newVal.rate\r\n    }\r\n});\r\n\r\n\r\n\r\n\r\nconst i = ref(1)    \r\nconst clearItemForm = ()=>{\r\n    quantity.value = '',\r\n    rate.value = '',\r\n    remark.value = '',\r\n    item.value = '',\r\n    description.value = ''\r\n    units.value = ''\r\n    asset.value = ''\r\n    budget_item_description.value = ''\r\n    budget_item.value = '',\r\n    // vendor.value = '',\r\n    beneficiary.value = '',\r\n    receiver.value = ''\r\n}\r\n\r\nconst asset = ref('')\r\nconst description = ref('');\r\nconst clearSubmissionForm = () =>{\r\n    requisition_type.value = '',\r\n    date.value = '',\r\n    required_date.value = '',\r\n    quantity.value = '',\r\n    rate.value = '',\r\n    remark.value = '',\r\n    item.value = ''\r\n    formRequisitionItems.value = []\r\n    formRequisitionItems2.value = []\r\n    requisition_creation.value = false\r\n    beneficiary.value = ''\r\n    incidence.value = '',\r\n    vendor.value = ''\r\n}\r\n    const pushItem = () => {\r\n        if(!quantity.value ){\r\n            showError(\"Fill in all fields\");\r\n            return ;\r\n        }\r\n         // Determine the item ID based on requisition type and incidence\r\n    let selectedItemId = item_id.value;\r\n    let selectedItemName = '';\r\n    \r\n    if (incidence?.value?.id === 6 && item.value) {\r\n        // For store requisitions, use the store item ID\r\n        selectedItemId = item.value.id; // This gets the ID from the store item multiselect\r\n        selectedItemName = item.value.name;\r\n    }else if(item.value){\r\n         selectedItemId = item.value.id;\r\n    }\r\n\r\n    const payload = {\r\n      Sno: i.value,\r\n      item_id: selectedItemId,\r\n      quantity: quantity.value,\r\n      units: units.value?.short_name || units.value,\r\n      rate: Number(rate.value).toLocaleString()+'/=',\r\n      item: ['spares', 'labour','construction materials'].includes(requisition_type.value) ? item.value.name : item.value,\r\n      description: asset?.value ? description.value + ' For ' + asset.value.name : description.value,\r\n      total : Number(rate.value * quantity.value).toLocaleString()+'/=',\r\n      receiver: beneficiary.value || vendor.value?.name || 'No Receiver',\r\n    };\r\n\r\nif (!vendor.value?.id && !beneficiary.value) {\r\n  showError(\"Vendor or Beneficiary is required\")\r\n  return\r\n}\r\n\r\nconst payload2 = {\r\n  Sno: i.value,\r\n  item_id: selectedItemId || item_id.value,\r\n  quantity: quantity.value,\r\n  rate: rate.value,\r\n  remark: ['spares', 'labour','construction materials'].includes(requisition_type.value) ? item.value.name : item.value,\r\n  description: asset?.value ? description.value + ' For ' + asset.value.name : description.value,\r\n  units: units.value?.short_name || units.value,\r\n  asset_id: asset.value?.id || null,\r\n  vendor_id: beneficiary.value ? null : vendor.value?.id || null,\r\n  beneficiary: beneficiary.value || null\r\n};\r\n\r\n\r\n\r\n    // Add Sno as index (1-based)\r\n    i.value = i.value + 1;\r\n    formRequisitionItems.value.push(payload);\r\n    formRequisitionItems2.value.push(payload2);\r\n    clearItemForm()\r\n    }\r\n\r\n\r\n    const pullItem = (sno) => {\r\n    formRequisitionItems.value = formRequisitionItems.value.filter(item => item.Sno !== sno);\r\n    formRequisitionItems2.value = formRequisitionItems2.value.filter(item => item.Sno !== sno);\r\n    formRequisitionItems.value.forEach((item, idx) => {\r\n        item.Sno = idx + 1;\r\n    });\r\n    formRequisitionItems2.value.forEach((item, idx) => {\r\n        item.Sno = idx + 1;\r\n    });\r\n    i.value = formRequisitionItems.value.length + 1;\r\n}\r\n\r\n    const requisitionItems = ref([])\r\n const itemColumns = ref(['Sno','item','description','units', 'quantity','rate','total','receiver','actions']);\r\n    const formItemColumns = ref(['Sno','item','units','description', 'quantity','rate','total','receiver','actions']);\r\n\r\n\r\n    const clearForm = () =>{\r\n      requisitionItems.value= ([])\r\n      incidence.value = '',\r\n      remark.value = '',\r\n      status.value = ''\r\n      budget.value = ''\r\n      budget_item.value = ''\r\n      project.value = ''\r\n      units.value = ''\r\n      item.value = ''\r\n      quantity.value = ''\r\n      rate.value = ''\r\n      description.value = ''\r\n      requisition_type.value = ''\r\n      budget_item_description.value = ''\r\n      budgets.value = []\r\n      budgetItems.value = []\r\n      budgetItemDescriptions.value = []\r\n      briefing.value = '',\r\n      formRequisitionItems.value = [],\r\n      formRequisitionItems2.value= [],\r\n      vendor.value = ''\r\n    }\r\n\r\n    const use_field = ref([])\r\n  const fillUseField = (item) => {\r\n  if (use_field.value.includes(item)) {\r\n    use_field.value = use_field.value.filter(i => i !== item)\r\n  } else {\r\n    use_field.value.push(item)\r\n  }\r\n\r\n}\r\n\r\n    const proforma = ref('')\r\n    const subcontractor = ref('')\r\n    const requisition = ref('')\r\n    const fillItems = async (req) => {\r\n    requisition.value = req\r\n    remarks.value = req.remarks\r\n    proforma.value = req.attachment\r\n    subcontractor.value = req.subcontractor\r\n    if(req.subcontractor){\r\n      printDetails(req.subcontractor,req.project)\r\n    }\r\n  \r\n\r\n    requisitionItems.value = req.items.map((item, index) => ({\r\n        ...item,\r\n        Sno: index + 1,\r\n        item: item.remark,\r\n        asset_id : item.asset_id,\r\n        description :item.description,\r\n        // rate: Number(item.rate).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + '/=',\r\n        rate: Number(item.rate).toLocaleString()+'/=',\r\n        total : (item.quantity * item.rate).toLocaleString()+'/=',\r\n        issued_quantity : '',\r\n        store_item: ''\r\n    }));\r\n\r\n\r\n    return ;\r\n\r\n\r\n    //send approval to whatsapp starts\r\n  const url = \"https://graph.facebook.com/v22.0/721816217672551/messages\";\r\n  const token = \"EAAXZAN9ZAW4VoBOZBhohedZA7pfKZBfzMghywTumPW7yFY0ZAI7u6Kh9DFtai4usEnmKsOnMZBYisZAQ0ojZBtEpDC72XXNyf6qFmtFtTCX61hv3I2eZCdZAevM9ahsDXGcIhT8stZAoTGstgOsujK4G1pxcSGqwFxiucZBcLr8HUoRxTLlB0IdVlLLlRGQ7n831T93WGUQZDZD\";\r\n\r\ntry {\r\n  let itemsText = \"\";\r\n\r\n  req.items.slice(0, 5).forEach((item, i) => {\r\n    itemsText +=\r\n      \"#\" + (i + 1) + \"\\n\" +\r\n      \"item: ```\" + item.remark + \"``` \\n\" +\r\n      \"description: ```\" + item.description + \"``` \\n\" +\r\n      \"unit: ```\" + item.units + \"``` \\n\" +\r\n      \"quantity: ```\" + item.quantity + \"``` \\n\" +\r\n      \"rate: ```\" + formatNumber(item.rate) + \"``` \\n\" +\r\n      \"cost: ```\" + formatNumber(item.quantity * item.rate) + \"``` \\n\" +\r\n      \"receiver: ```\" + item.receiver + \"``` \\n\\n\";\r\n  });\r\n\r\n  if (req.items.length > 5) {\r\n    itemsText += \"... and many others\";\r\n  }\r\n\r\n  const bodyText =\r\n    \"*REQUISITION*\\n\\n\" +\r\n    \"Type: ```\" + req.approval_group + \"``` \\n\" +\r\n    \"Project: ```\" + req.project + \"``` \\n\" +\r\n    \"Requester: ```\" + req.requester + \"``` \\n\" +\r\n    \"Description: ```\" + req.description + \"``` \\n\\n\" +\r\n    \"*ITEMS*\\n\" +\r\n    itemsText +\r\n    \"\\n*_TOTAL COST :_* \" + req.cost;\r\n\r\n  const res = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({\r\n      messaging_product: \"whatsapp\",\r\n      recipient_type: \"individual\",\r\n      to: \"255698267662\",\r\n      type: \"interactive\",\r\n      interactive: {\r\n        type: \"button\",\r\n        body: { text: bodyText },\r\n        footer: { text: \"Req No \" + req.id + \" on \" + req.date },\r\n        action: {\r\n          buttons: [\r\n            { type: \"reply\", reply: { id: 1, title: \" APPROVE\" } },\r\n            { type: \"reply\", reply: { id: 2, title: \" REJECT\" } }\r\n          ]\r\n        }\r\n      }\r\n    }),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    console.error(\"WhatsApp send failed:\", await res.text());\r\n  }\r\n} catch (e) {\r\n  console.error(e);\r\n}\r\n\r\n\r\n\r\n\r\n    // send approval to whatsapp ends\r\n    }\r\n\r\n\r\nconst requisition_item_id = ref(0)\r\nconst loading = ref(false)\r\nconst briefing = ref('')\r\n\r\n\r\nconst whatsappAlert = inject('whatsappAlert')\r\nconst registerRequisition = async () => {\r\n  loading.value = true;  \r\n  const formData = new FormData();\r\n\r\n  formData.append('requisition', JSON.stringify({\r\n    date: date.value,\r\n    description : briefing.value,\r\n    project_id : project.value.id,\r\n    vendor_id : vendor.value.id,\r\n    required_date: required_date.value,\r\n    requester_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n    beneficiary : beneficiary.value,\r\n    subcontractor_agreement_id : selected_subcontractor.value.id,\r\n    approval_group_id : incidence.value.id\r\n  }));\r\n\r\n  formData.append('type', JSON.stringify({\r\n    name: requisition_type.value,\r\n    item_id: requisition_item_id.value,\r\n  }));\r\n\r\n  formData.append('items', JSON.stringify(formRequisitionItems2.value));\r\n\r\n  if (upload.value) {\r\n    formData.append('image', upload.value);\r\n  }\r\n\r\n  try {\r\n    const response = await axiosInstance.post('create-requisition', formData, {\r\n      headers: { 'Content-Type': 'multipart/form-data' }\r\n    });\r\n\r\n    const totalCost = formRequisitionItems2.value.reduce((sum, item) => {\r\n      return sum + (item.quantity * item.rate);\r\n    }, 0);\r\n\r\n\r\n    const message = `Requisition with cost ${formatNumber(totalCost)} was created by `+ JSON.parse(localStorage.getItem('user')).name\r\n           const message_id = \"wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhggQUM5QUMyMzIyRUVEMTJBOTNBNTIwQjRCMTA3QUNGQTQA\"\r\n           const receivers = ['255697315583','255698267662']\r\n             receivers.forEach(receiver => {\r\n                whatsappAlert(message,message_id,receiver)\r\n             });\r\n\r\n    showMessage(response.data.message);\r\n    loading.value = false;\r\n\r\n    if (incidence.value.id == 6) {\r\n      router.push('/requisition-group/6/all');\r\n    }\r\n\r\n    clearSubmissionForm();\r\n    getRequisitions();\r\n\r\n  } catch (error) {\r\n    showError(error.message);\r\n    loading.value = false;\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n\r\n    const getRequisitions = () => {\r\n  const status_id = route.params.status_id; \r\n  \r\n  let url = \"requisitions\";\r\n  if (status_id && status_id !== \"all\") {\r\n    url += `?status_id=${status_id}`;\r\n  }\r\n  \r\n  axiosInstance.get(url)\r\n    .then((response) => {\r\n      requisitions.value = response.data.map((item, index) => {\r\n        const type = requisitionTypes.value.find(t => t.id === item.requisition_type_id);\r\n        return {\r\n          ...item,\r\n          beneficiary: item.beneficiary ? item.beneficiary : (item.vendor ? item.vendor : ''),\r\n          ref_no :item.id,\r\n          date : formatDate(item.created_at),\r\n          Sno: index + 1,\r\n          requester_id : item.requester_id,\r\n          requester_email: item.requester_email,\r\n          type: item.type,\r\n          purpose : item.approval_group,\r\n          attachment: item.attachment ? `${process.env.VUE_APP_API_BASE_URL}/../../../` + item.attachment : null,\r\n          status_id: item.status.id,\r\n          cost: formatNumber(item.items.reduce((total, it) => total + it.quantity * it.rate, 0)),\r\n          status: {\r\n            key: item.status,\r\n            class: item.status_color\r\n          },\r\n        };\r\n      });\r\n      loading_spinner.value = false;\r\n    })\r\n    .catch((error) => {\r\n      showError(error.message);\r\n      loading_spinner.value = false;\r\n    });\r\n};\r\n\r\n    \r\n    \r\n    const storeItems = ref([])\r\n    const getStoreItems = async (id) =>{\r\n      const response = await axiosInstance.get(`get-store-items?store_id=${id}`)\r\n      storeItems.value  = response.data\r\n    }\r\n\r\n       const stores = ref('')\r\n       const store = ref('')\r\n        const getStores = async () =>{\r\n      const response = await axiosInstance.get('stores')\r\n      stores.value  = response.data.map((item)=>({\r\n        ...item,\r\n        name : item.project + ' - ' + item.name\r\n      }))\r\n    }\r\n\r\n    watch(store, (newVal) => {\r\n      storeItems.value = ['']\r\n        getStoreItems(newVal.id)\r\n});\r\n\r\nconst enforceMax = () => {\r\n  if(requisition_type.value ==='budget'){\r\n      // if (quantity.value > max_quantity.value ) {\r\n      //   quantity.value = max_quantity.value\r\n      //   showError(\"only \"+ quantity.value + \" available\")\r\n      // }\r\n\r\n       if ((quantity.value * rate.value) > max_cost.value ) {\r\n        rate.value = ''\r\n        showError(\"Cost should not exceed \"+ formatNumber(max_cost.value) )\r\n      }\r\n  }\r\n\r\n  if(incidence?.value?.id === 6 && item.value){\r\n      if (quantity.value > item.value.balance_quantity ) {\r\n        quantity.value = item.value.balance_quantity\r\n        showError(\"only \"+ quantity.value + \" available\")\r\n      }\r\n  }\r\n\r\n    }\r\n\r\n   \r\n\r\n\r\nconst printDetails = async (row, project) => {\r\n  try {\r\n    const now = new Date()\r\n    const day = String(now.getDate()).padStart(2, '0')\r\n    const month = String(now.getMonth() + 1).padStart(2, '0')\r\n    const year = now.getFullYear()\r\n    const dateString = `${day}/${month}`\r\n    const formattedDate = `${day}/${month}/${year}`\r\n    const formatDate = `${day}.${month}.${year}`\r\n    const formattedDateTime = `${formattedDate}, ${now.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'})}`\r\n    const agreementId = `${String(row.id).padStart(3, '0')}/${dateString}`\r\n    const agreementNo = `${row.id}`\r\n    const noticeNo = `${row.id}/${year}`\r\nconst payableAmount = row.payments && row.payments.length > 0\r\n  ? row.payments.reduce((sum, p) => sum + Number(p.quantity), 0)\r\n  : 0\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Subcontractor Agreement Details</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\r\n  .logo { width: 160px; height: auto; }\r\n  .agreement-box { border: 1px solid #000; padding: 5px 10px; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; }\r\n  .company-title h2 { margin: 5px 0; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; }\r\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\r\n  .title { text-align: center; font-weight: bold; margin: 20px 0 10px 0; }\r\n  .details-list { margin-top: 15px; line-height: 1.6; }\r\n  .details-list div { margin-bottom: 4px; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\r\n  table.items th, table.items td { border: 1px solid #000; padding: 6px; font-weight: normal; }\r\n  table.items thead tr th { background-color: #f8f8f8; border: 1px solid #000; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"agreement-box\">\r\n    Agreement ID:<br>\r\n    <span style=\"color:red;\">${agreementId}</span>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"reg-info\">\r\n  TIN: 103-826-519<br>\r\n  VRN: 20-01-017530R\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\r\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\r\n</div>\r\n\r\n<div class=\"section-title\">SUBCONTRACTOR AGREEMENT DETAILS</div>\r\n<div class=\"title\">${project.toUpperCase()} - ${row.item.toUpperCase()}</div>\r\n\r\n<div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n  <div class=\"text-start\"><strong>NOTICE NO. 00${noticeNo}</strong></div>\r\n  <div class=\"text-end\"><strong>Date: ${formatDate}</strong></div>\r\n</div>\r\n\r\n<div class=\"text-center\"><strong>REF: SUBCONTRACTING NOTICE No. ${agreementNo}</strong></div>\r\n\r\n<div class=\"text-start\"><p>Refer the subject matter above</p></div>\r\n<div class=\"text-start\"><p>This form as internal notice on subcontracting piece work on <strong>${row.item.toUpperCase()}</strong></p></div>\r\n\r\n<div class=\"details-list\">\r\n  <div><strong>Subcontracted:</strong> ${row.subcontracted_to}</div><br>\r\n  <div><strong>Item Description:</strong> ${row.item}</div><br>\r\n  <div><strong>Contracted Quantity:</strong> ${row.quantity}</div><br>\r\n  <div><strong>This payment certificate:</strong> ${row.payment_term.name}</div><br>\r\n  <div><strong>Subcontracted To:</strong> ${row.subcontracted_to}</div><br>\r\n  <div><strong>Payment Details:</strong> ${row.payment_number}</div><br>\r\n  <div><strong>Subcontracting Unit Price:</strong> TZS ${formatNumber(row.rate)} per ${row.unit}</div><br>\r\n  <div><strong>Total Amount of Contract:</strong> TZS ${formatNumber(row.quantity * row.rate)}</div><br>\r\n  <div><strong>Total Amount Archived:</strong></div><br>\r\n  <div><strong>This Certificate Payable Amount:</strong> ${formatNumber(payableAmount)} </div>\r\n</div>\r\n\r\n${row.payments && row.payments.length > 0 ? `\r\n<div class=\"section-title\">PAYMENT HISTORY</div>\r\n<table class=\"items\">\r\n  <thead>\r\n    <tr>\r\n      <th style=\"width: 30px;\"><strong>Sno.</strong></th>\r\n      <th><strong>Date</strong></th>\r\n      <th><strong>Description</strong></th>\r\n      <th><strong>Amount</strong></th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${row.payments.map((payment, index) => {\r\n      const d = new Date(payment.created_at)\r\n      const paidAt = `${String(d.getDate()).padStart(2, '0')}.${String(d.getMonth() + 1).padStart(2, '0')}.${d.getFullYear()}`\r\n      return `\r\n        <tr>\r\n          <td class=\"text-center\">${index + 1}</td>\r\n          <td class=\"text-center\">${paidAt}</td>\r\n          <td class=\"text-center\">${payment.description || ''}</td>\r\n          <td class=\"text-center\">${formatNumber(payment.quantity)}</td>\r\n        </tr>\r\n      `\r\n    }).join('')}\r\n  </tbody>\r\n</table>\r\n` : ''}\r\n\r\n<div style=\"margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;\">\r\n  <p> ${new Date().getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 135-489-247 | VRN: 40-032826C</p>\r\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\r\n</div>\r\n\r\n<div style=\"margin-top: 10px; font-size: 11px; text-align: left;\">\r\n  ${formattedDateTime}\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`\r\n\r\n    const blob = new Blob([printContent], { type: \"text/html\" })\r\n    subcontractor.value = URL.createObjectURL(blob)\r\n  } catch (error) {\r\n    showError(`Failed to generate agreement details: ${error.message}`)\r\n  }\r\n}\r\n\r\nconst closeModal = () => {\r\n  const modalEl = document.querySelector('.modal.show');\r\n  if (modalEl) {\r\n    const modalInstance = bootstrap.Modal.getInstance(modalEl);\r\n    modalInstance?.hide();\r\n  }\r\n  document.body.classList.remove('modal-open');\r\n  document.body.style.overflow = 'auto';\r\n  document.body.style.paddingRight = '';\r\n  clearForm();\r\n};\r\n\r\n\r\nconst updateRequisition = async () => {\r\n  loading_spinner.value = true;\r\n  try {\r\n    const payload = {\r\n      subcontractor_agreement_id: selected_subcontractor.value?.id,\r\n      approval_group_id: incidence.value.id,\r\n      description: descr.value,\r\n      project_id: proj.value?.id || null,\r\n      vendor_id: vendor.value?.id,\r\n      beneficiary: beneficiary.value,\r\n      status_id: stat.value?.id,\r\n    };\r\n    \r\n    await axiosInstance.put(`/update-requisition/${requisitionToEdit.value.id}`, payload);\r\n    getRequisitions();\r\n    document.getElementById('close_modal').click();\r\n    showMessage(\"Requisition updated successfully\");\r\n    closeEditModal();\r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.log(error); \r\n  } finally {\r\n    loading_spinner.value = false;\r\n  }\r\n};\r\n\r\nconst requisitionToEdit = ref(null);\r\nconst requisitionItemToEdit = ref(null);  \r\nconst descr = ref('')\r\nconst proj = ref('')\r\nconst stat = ref('')\r\nconst openEditModal = (row) => {\r\n  console.log('Editing row:', row);\r\n  console.log('row.status_id:', row.status_id);\r\n  console.log('row.status:', row.status);\r\n  console.log('Statuses array:', statuses.value);\r\n  requisitionToEdit.value = { ...row };\r\n \r\n  proj.value = row.project_id ? projects.value.find(p => p.id === row.project_id) || '' : '';\r\n\r\n  selected_subcontractor.value = row.subcontractor_agreement_id\r\n    ? subcontractors.value.find(s => s.id === row.subcontractor_agreement_id) || ''\r\n    : '';\r\n\r\n  vendor.value = row.vendor_id\r\n    ? vendors.value.find(v => v.id === row.vendor_id) || ''\r\n    : '';\r\n\r\n    incidence.value = row.approval_group_id\r\n    ? incidences.value.find(i => i.id === row.approval_group_id) || ''\r\n    : '';\r\n\r\n  descr.value = row.description\r\n  beneficiary.value = row.beneficiary;\r\n  stat.value = row.status_id ? statuses.value.find(s => s.id === row.status_id) || '' : '';\r\n};\r\n\r\nconst closeEditModal = () => {\r\n  requisitionToEdit.value = null;\r\n  requisitionItemToEdit.value = null;  \r\n  selected_subcontractor.value = '';\r\n  proj.value = '';\r\n  description.value = '';\r\n  vendor.value = '';\r\n  incidence.value = '';\r\n  beneficiary.value = '';\r\n  stat.value = '';\r\n};\r\n\r\n  const updateRequisitionItem = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n      const payload = {\r\n        requisition_type_id: requisitionItemToEdit.value.requisition_type_id,\r\n        remark: item.value,         \r\n        quantity: quantity.value,\r\n        rate: rate.value,\r\n        vendor_id: vendor.value?.id,\r\n        beneficiary: beneficiary.value,\r\n        description: description.value,\r\n        units: units.value?.short_name || units.value,\r\n        asset_id: asset.value?.id,\r\n      };\r\n    \r\n      await axiosInstance.put(`/requisition-type-items/${requisitionItemToEdit.value.id}`, payload);\r\n      getRequisitions();\r\n      document.getElementById('close_editing').click();\r\n      showMessage(\"Requisition item updated successfully\");\r\n      closeEditModal();\r\n    } catch (error) {\r\n      showError(error.message);\r\n      console.log(error)\r\n    } finally {\r\n      loading_spinner.value = false;\r\n    }\r\n  };\r\n\r\n\r\nconst openEditItemModal = (row) => {\r\n  requisitionItemToEdit.value = row;\r\n\r\n  if (requisition_type.value === 'labour') {\r\n    item.value = labours.value.find(l => l.name === row.remark) || row.remark;\r\n  } else if (['spares', 'construction materials'].includes(requisition_type.value)) {\r\n    item.value = items_list.value.find(i => i.name === row.remark) || row.remark;\r\n  } else {\r\n    item.value = row.remark;\r\n  }\r\n\r\n  units.value = unitList.value.find(u => u.short_name === row.units) || row.units;\r\n  quantity.value = row.quantity;\r\n \r\n  if (typeof row.rate === 'string') {\r\n    rate.value = Number(row.rate.replace(/[^0-9.]/g, '')) || 0;\r\n  } else {\r\n    rate.value = Number(row.rate) || 0;\r\n  }\r\n  description.value = row.description;\r\n  asset.value = assets.value.find(a => a.id === row.asset_id) || '';\r\n  vendor.value = vendors.value.find(v => v.id === row.vendor_id) || '';\r\n  beneficiary.value = !vendor.value ? row.receiver : '';\r\n};\r\n\r\nconst activity = ref('')\r\nconst getActivityStatus = async () => {\r\n  const response = await axiosInstance.get(`activity-statuses/1`)\r\n  activity.value = response.data\r\n\r\n  if (activity.value.status === 'open') {\r\n    setTimeout(async () => {\r\n      activity.value.status = 'closed'\r\n      await axiosInstance.put(`activity-statuses/1`, { status: 'closed' })\r\n    }, 60000)\r\n  }\r\n}\r\n\r\nconst requisition_approval = ref('')\r\nconst getRequisitionApproval = async () => {\r\n  const response = await axiosInstance.get(`activity-statuses/9`)\r\n  requisition_approval.value = response.data\r\n}\r\n\r\n\r\n\r\nconst printRequisition = async (requisition) => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    const date = new Date(requisition.created_at || new Date());\r\n    const dateString = `${date.getDate().toString().padStart(2,'0')}/${(date.getMonth()+1).toString().padStart(2,'0')}/${date.getFullYear()}`;\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Print Requisition</title>\r\n<style>\r\n  body { font-family: 'Courier New', monospace; margin: 10px; font-size: 13px; }\r\n  .company-title { text-align: center; }\r\n  .company-title h1 { margin: 5px 0; }\r\n  .title { text-align: center; font-size: 20px; margin: 15px 0; }\r\n  hr { border: 0; border-top: 0.4px solid #000; margin: 10px 0; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\r\n  table th, table td { border: 0.5px solid #000; padding: 6px; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  .signature-line { border-top: 1px solid #000; width: 120px; margin: 50px auto 5px; }\r\n  .vendor-details { display: flex; justify-content: space-between; margin-top: 10px; }\r\n  .vendor-details table { width: 48%; border-collapse: collapse; }\r\n  .approval-chain-container { page-break-inside: avoid; margin-top: 40px; }\r\n  table.approval-chain { width: 100%; border-collapse: collapse; page-break-inside: avoid; }\r\n  table.approval-chain td { page-break-inside: avoid; }\r\n  @media print { body { margin: 10mm; } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div>REQUISITION NO. ${requisition.ref_no}</div>\r\n\r\n<div class=\"company-title\">\r\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\r\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\r\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\r\n</div>\r\n\r\n<hr>\r\n\r\n<div class=\"title\">REQUISITION : ${requisition?.project?.toUpperCase() ?? 'NO PROJECT'}</div>\r\n<hr>\r\n\r\n${!requisition.purpose.toLowerCase().includes('voucher') ? `\r\n<h3>VENDOR DETAILS</h3>\r\n<div class=\"vendor-details\">\r\n  <table>\r\n    <tr><td style=\"width:35%;\"><strong>Vendor Name</strong></td><td style=\"border-bottom:1px solid #000;\">&nbsp;</td></tr>\r\n    <tr><td><strong>Address</strong></td><td style=\"border-bottom:1px solid #000;\">&nbsp;</td></tr>\r\n    <tr><td><strong>Location</strong></td><td style=\"border-bottom:1px solid #000;\">&nbsp;</td></tr>\r\n  </table>\r\n  <table>\r\n    <tr><td style=\"width:35%;\"><strong>Phone</strong></td><td style=\"border-bottom:1px solid #000;\">&nbsp;</td></tr>\r\n    <tr><td><strong>Email</strong></td><td style=\"border-bottom:1px solid #000;\">&nbsp;</td></tr>\r\n    <tr><td><strong>TIN / VRN</strong></td><td style=\"border-bottom:1px solid #000;\">&nbsp;</td></tr>\r\n  </table>\r\n</div>\r\n\r\n`:''}\r\n\r\n<p>Please provide the following as per requisition details below</p>\r\n<h3>CURRENCY : TSH</h3>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>No.</th>\r\n      <th>ITEM</th>\r\n      <th>DESCRIPTION</th>\r\n      <th>QTY</th>\r\n      <th>RATE</th>\r\n      <th>TOTAL</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${requisition.items.map((item, index) => `\r\n      <tr>\r\n        <td class=\"text-center\">${index + 1}</td>\r\n        <td>${item.remark || 'N/A'}</td>\r\n        <td>${item.description || 'N/A'}</td>\r\n        <td class=\"text-right\">${item.quantity || 0}</td>\r\n        <td class=\"text-right\">${Number(item.rate || 0).toLocaleString()}/=</td>\r\n        <td class=\"text-right\">${(item.quantity * item.rate || 0).toLocaleString()}/=</td>\r\n      </tr>\r\n    `).join(\"\")}\r\n    <tr>\r\n      <td colspan=\"6\" class=\"text-right\"><strong>TOTAL ${requisition.cost}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n${requisition.description ? `<p><strong>Note:</strong> ${requisition.description}</p>` : ''}\r\n\r\n<div class=\"approval-chain-container\">\r\n  <div class=\"title\">APPROVAL CHAIN</div>\r\n  <table class=\"approval-chain\">\r\n    <tr>\r\n      <td class=\"text-center\">\r\n        <div style=\"font-weight:bold;\">Prepared By</div>\r\n        <div class=\"signature-line\"></div>\r\n        <div>${requisition.requester}</div>\r\n      </td>\r\n      <td class=\"text-center\">\r\n        <div style=\"font-weight:bold;\">Checked By</div>\r\n        <div class=\"signature-line\"></div>\r\n        <div>Engineer</div>\r\n      </td>\r\n      <td class=\"text-center\">\r\n        <div style=\"font-weight:bold;\">Verified By</div>\r\n        <div class=\"signature-line\"></div>\r\n        <div>Sr Accountant</div>\r\n      </td>\r\n      <td class=\"text-center\">\r\n        <div style=\"font-weight:bold;\">Approved By</div>\r\n        <div class=\"signature-line\"></div>\r\n        <div>Director</div>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</div>\r\n${requisition.purpose.toLowerCase().includes('voucher') ? `\r\n<div style=\"display: flex; justify-content: space-between;margin-top:20px; text-align: center; width: 100%;\">\r\n  <div style=\"flex: 1;\">\r\n    <div class=\"signature-line\"></div>\r\n    <div>Receiver's Signature</div>\r\n  </div>\r\n  <div style=\"flex: 1;\">\r\n    <div class=\"signature-line\"></div>\r\n    <div>Date Received</div>\r\n  </div>\r\n</div>\r\n  `:''}\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => document.body.removeChild(iframe), 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(error.message);\r\n  }\r\n};\r\n\r\nconst isWaiting = ref(false);\r\nconst showConfirmation = inject('showConfirmation');\r\nconst pleaseWait = inject('waitIndicator');\r\n\r\nconst DeleteRequisition = async (requisition) => {\r\n  try {\r\n    isWaiting.value = true; \r\n    const res = await showConfirmation(\r\n      'Delete Requisition',\r\n      `Are you sure you want to delete Requisition No. ${requisition.ref_no} with cost ${requisition.cost}?`,\r\n      `update-requisition/${requisition.id}?deleted=1`,\r\n      'put'\r\n    );\r\n\r\n    if (res?.refresh) {\r\n      getRequisitions();\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n    showError(error.message);\r\n  } finally {\r\n    isWaiting.value = false; \r\n  }\r\n};\r\n\r\n\r\n    onMounted(async () => {\r\n        types.value = allTypes.value.filter(t => t !== 'General' || user_permissions.includes('can_create_general_requisitions'))\r\n        loading_spinner.value = true;\r\n        getActivityStatus()\r\n        getRequisitionApproval()\r\n        getRequisitions();\r\n        getIncidences()\r\n        getUnits()\r\n        getStores()\r\n        getVendors()\r\n        getSubcontractors()\r\n        getAssets()\r\n        getProjects()\r\n        getStatuses()\r\n\r\n        //message notification \r\n        return ;\r\n        const message = JSON.parse(localStorage.getItem('user')).name + ' is in requisition page';\r\n        const receiver = '255698267662'\r\n        const message_id = 'wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA='\r\n        whatsappAlert(message,message_id,receiver)\r\n    });\r\n</script>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["today","Date","todayString","toISOString","split","useMeta","title","axiosInstance","axios","baseURL","process","loading_budgets","ref","waitIndicator","inject","filter","getFilteredRequests","filteredRequisitions","value","router","useRouter","route","useRoute","allTypes","types","user_permissions","JSON","parse","localStorage","getItem","permissions","user_id","id","requisitionTypes","requisition_type","spinner","incidence","tableShimmer","formatNumber","formatDate","loadingSpinner","date","status","item","quantity","rate","remark","units","remarks","item_id","required_date","requisitions","loading_spinner","columns","requisition_creation","showMessage","showError","formRequisitionItems","formRequisitionItems2","upload","issueItems","unitList","vendor","beneficiary","showTrash","receiver","vendors","getVendors","async","response","get","data","assets","getAssets","map","name","type_name","computed","filtered","includes","r","key","keyword","toLowerCase","requester","project","description","items","some","projects","getProjects","budgets","budget","getBudgets","b","watch","newVal","clearItemForm","clearForm","budgetItems","budget_item","budgetItemDescriptions","budget_item_description","max_cost","max_quantity","descriptions","quantity_2","cost","used_cost","subcontractors","selected_subcontractor","getSubcontractors","short_name","subcontracted_to","params","status_id","newStatusId","getRequisitions","getUnits","fillRequisitionRemark","payload","approval","approval_group_id","requisition","source","source_id","requester_id","put","document","getElementById","click","error","console","log","message","registerIncidence","requisitionItems","post","push","requisition_item_id","issued_quantity","store_item_id","store_item","issuePayload","issueData","requisition_id","issuer_id","table_option","setDate","getDate","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","incidences","getIncidences","items_list","getItems","index","SNo","unit","labours","getLabours","statuses","getStatuses","handleFileUpload","e","target","files","i","asset","clearSubmissionForm","pushItem","selectedItemId","selectedItemName","Sno","Number","toLocaleString","total","payload2","asset_id","vendor_id","pullItem","sno","forEach","idx","length","itemColumns","formItemColumns","briefing","use_field","fillUseField","proforma","subcontractor","fillItems","req","attachment","printDetails","loading","whatsappAlert","registerRequisition","formData","FormData","append","stringify","project_id","subcontractor_agreement_id","headers","totalCost","reduce","sum","message_id","receivers","url","then","find","t","requisition_type_id","ref_no","created_at","requester_email","type","purpose","approval_group","it","class","status_color","catch","storeItems","getStoreItems","stores","store","getStores","enforceMax","balance_quantity","row","now","day","String","padStart","month","getMonth","year","getFullYear","dateString","formattedDate","formattedDateTime","toLocaleTimeString","hour","minute","agreementId","agreementNo","noticeNo","payableAmount","payments","p","printContent","toUpperCase","payment_term","payment_number","payment","d","paidAt","join","blob","Blob","URL","createObjectURL","closeModal","modalEl","querySelector","modalInstance","bootstrap","Modal","getInstance","hide","body","classList","remove","style","overflow","paddingRight","updateRequisition","descr","proj","stat","requisitionToEdit","closeEditModal","requisitionItemToEdit","openEditModal","s","v","updateRequisitionItem","openEditItemModal","l","u","replace","a","activity","getActivityStatus","setTimeout","requisition_approval","getRequisitionApproval","printRequisition","iframe","createElement","display","appendChild","toString","iframeDoc","contentWindow","open","write","close","onload","focus","print","removeChild","isWaiting","showConfirmation","pleaseWait","DeleteRequisition","res","refresh","onMounted","__exports__"],"sourceRoot":""}