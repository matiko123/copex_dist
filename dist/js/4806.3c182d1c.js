"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[4806],{74806:function(t,a,e){e.r(a),e.d(a,{default:function(){return dt}});var s=e(66252),i=e(3577),l=e(2262),o=e(49963),n=e(87066),r=e(56296),c=e(42127);const d={class:"layout-px-spacing"},u=(0,s.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Projects</a></li><li class="breadcrumb-item active" aria-current="page"><span>Planning</span></li></ol></nav></div></li></ul>',1),v={class:"text-center"},b={class:"offcanvas offcanvas-end","data-bs-scroll":"true",tabindex:"-1",id:"offcanvasWithBothOptions","aria-labelledby":"offcanvasWithBothOptionsLabel"},g=(0,s._)("div",{class:"offcanvas-header"},[(0,s._)("h5",{class:"offcanvas-title",id:"offcanvasWithBothOptionsLabel"},"PROJECT LISTS"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),f={class:"offcanvas-body"},m={class:"row"},p={class:"col-12"},h=["id","href","aria-controls","onClick"],_={class:"d-flex"},y={class:"ms-auto"},w={key:0,class:"btn","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},x=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-list-ul",viewBox:"0 0 16 16"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"})],-1),k=[x],C={key:1,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},N={key:0,class:"text-center mt-5"},j=(0,s._)("p",null,"Select Project to view it's plans",-1),B=[j],S={class:"text-center"},D=["innerHTML"],O={class:"row"},L={key:0,class:"col-2"},P={key:0,class:"list-group",id:"list-tab",role:"tablist",style:{"max-height":"600px","overflow-y":"auto"}},H=(0,s._)("div",{class:"d-flex"},[(0,s._)("p",null,"BUDGETS")],-1),I=["id","href","aria-controls","onClick"],M={class:"col-10"},T={class:"tab-content",id:"nav-tabContent"},U=["id","aria-labelledby"],Y={class:"panel-body pill-justify-centered tabs"},A={class:"nav nav-pills mb-3 mt-3 justify-content-center",id:"justify-center-pills-tab",role:"tablist"},E={class:"nav-item"},W={key:1,class:"nav-link active",id:"justify-center-pills-details-tab","data-bs-toggle":"pill",href:"#justify-center-pills-details",role:"tab","aria-controls":"justify-center-pills-details","aria-selected":"true"},F=["onClick"],q={class:"nav-link",id:"justify-center-pills-details-tab","data-bs-toggle":"pill",href:"#justify-center-pills-details",role:"tab","aria-controls":"justify-center-pills-details","aria-selected":"true"},z={class:"tab-content",id:"justify-center-pills-tabContent"},G={class:"tab-pane fade show active",id:"justify-center-pills-details",role:"tabpanel","aria-labelledby":"justify-center-pills-details-tab"},K={class:"w-100 overflow-auto"},R={key:1,class:"tab-pane"},J={key:1,class:"text-center fixed-bottom mb-5"},Q={class:"row"},Z=(0,s._)("div",{class:"col"},null,-1),$={class:"col"},V=(0,s._)("div",{class:"col"},null,-1),X={class:"offcanvas offcanvas-bottom","data-bs-scroll":"true",tabindex:"-1",id:"budgetOffcanvas","aria-labelledby":"budgetOffcanvasLabel"},tt=(0,s._)("div",{class:"offcanvas-header"},[(0,s._)("h5",{class:"offcanvas-title",id:"budgetOffcanvasLabel"},"BUDGET LISTS"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),at={class:"offcanvas-body"},et={class:"row"},st={class:"col-12"},it={class:"list-group",id:"list-tab",role:"tablist"},lt=["id","href","aria-controls","onClick"],ot=(0,s.Uk)(),nt=["innerHTML"];var rt={setup(t){(0,r.j)({title:"Custom Table"});const a=(0,s.f3)("waitIndicator"),e=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),x=(0,l.iH)(""),j=(0,s.f3)("showError"),rt=((0,s.f3)("showMessage"),(0,l.iH)(!1)),ct=(0,s.f3)("formatNumber"),dt=(0,l.iH)(""),ut=(0,l.iH)({chart:{toolbar:{show:!1}},colors:["#008FFB","#FF9800","#00E396"],dataLabels:{enabled:!0,formatter:function(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()},style:{fontSize:"12px",colors:["#304758"]},offsetY:-15},plotOptions:{bar:{horizontal:!1,columnWidth:"50%",dataLabels:{position:"top"}}},xaxis:{categories:[],title:{text:"Budgets"}},yaxis:{title:{text:"Budget Cost"},labels:{formatter:function(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()}}},tooltip:{y:{formatter:function(t){return ct(t)}}},legend:{show:!0,position:"top"}}),vt=120,bt=((0,s.Fl)((()=>Math.max(ut.value.xaxis.categories.length*vt,1e3))),(0,l.iH)([{name:"Budget Cost",data:[]},{name:"Used Cost",data:[]},{name:"BOQ Cost",data:[]}]));(0,s.YP)(x,(async t=>{if(bt.value=[{name:"Budget Cost",data:[]},{name:"Used Cost",data:[]},{name:"BOQ Cost",data:[]}],ut.value={...ut.value,xaxis:{categories:[],title:{text:"Project Budgets"}}},dt.value="",gt.value="",t){rt.value=!0;try{const a=await e.get(`budgets?project_id=${t.id}`);pt.value=a.data,yt()}catch(a){j&&j(a.message),console.error(a)}finally{rt.value=!1}}})),(0,s.YP)(dt,(async t=>{const a=t.items.map((t=>t.name??"")),e=t.items.map((t=>{const a=Number(t.total_budget_items_cost);return isNaN(a)?0:a})),s=t.items.map((t=>{const a=Number(t.total_used_cost??t.used_cost??0);return isNaN(a)?0:a}));ut.value={...ut.value,xaxis:{categories:a,title:{text:"Budget Items"}}},bt.value=[{name:"Budget Item Cost",data:e},{name:"Budget Item Used Cost",data:s}]}));const gt=(0,l.iH)("");(0,s.YP)(gt,(async t=>{if(!t||!t.descriptions)return;const a=[...t.descriptions].sort(((t,a)=>(a.total_budget_item_description_cost||0)-(t.total_budget_item_description_cost||0))).slice(0,10),e=a.map((t=>t.name??"")),s=a.map((t=>{const a=Number(t.total_budget_item_description_cost);return isNaN(a)?0:a})),i=a.map((t=>{const a=Number(t.total_used_cost??t.used_cost??0);return isNaN(a)?0:a}));ut.value={...ut.value,xaxis:{categories:e,title:{text:"Single Item Statement"}}},bt.value=[{name:"Item Statement Cost",data:s},{name:"Item Statement Used Cost",data:i}]}));const ft=(0,l.iH)([]),mt=()=>{rt.value=!0,e.get("/projects").then((t=>{ft.value=t.data.filter((t=>"YES"===t.contracted)).filter((t=>"active"===t.status))})).finally((()=>{rt.value=!1}))},pt=(0,l.iH)([]),ht=t=>{if(!t)return;const a=t.items.map((t=>t.name??"")),e=t.items.map((t=>{const a=Number(t.total_budget_items_cost);return isNaN(a)?0:a})),s=t.items.map((t=>{const a=Number(t.total_used_cost??0);return isNaN(a)?0:a}));ut.value={...ut.value,xaxis:{categories:a,title:{text:"Budget Items"}}},bt.value=[{name:"Budget Item Cost",data:e},{name:"Budget Item Used Cost",data:s}]},_t=()=>{dt.value&&ht(dt.value)},yt=()=>{if(dt.value="",gt.value="",x.value&&pt.value.length>0){const t=pt.value.map((t=>t.name??"")),a=pt.value.map((t=>{const a=Number(t.total_cost);return isNaN(a)?0:a})),e=pt.value.map((t=>{const a=Number(t.total_used_cost??t.used_cost??0);return isNaN(a)?0:a})),s=pt.value.map((t=>{const a=Number(t.boq_cost??0);return isNaN(a)?0:a}));ut.value={...ut.value,xaxis:{categories:t,title:{text:"Project Budgets"}}},bt.value=[{name:"BOQ Cost",data:s},{name:"Budget Cost",data:a},{name:"Used Cost",data:e}]}},wt=t=>{dt.value=t,ht(t)},xt=(0,l.iH)(!1),kt=()=>{window.innerWidth<991&&(xt.value=!0)};return(0,s.bv)((()=>{kt(),mt()})),(t,e)=>((0,s.wg)(),(0,s.iD)("div",d,[u,(0,s._)("h5",v,(0,i.zw)(x.value?.short_name)+" PROJECT PLANNING",1),(0,s._)("div",b,[g,(0,s._)("div",f,[(0,s._)("div",m,[(0,s._)("div",p,[(0,s._)("div",(0,s.dG)({class:"list-group",id:"list-tab",role:"tablist"},xt.value?{"data-bs-toggle":"offcanvas","data-bs-target":"#budgetOffcanvas","aria-controls":"budgetOffcanvas"}:{}),[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ft.value,(t=>((0,s.wg)(),(0,s.iD)("a",{key:t.id,class:"list-group-item list-group-item-action",id:"project-link-"+t.id,"data-bs-toggle":"list",href:"#project-"+t.id,role:"tab","aria-controls":"project-"+t.id,onClick:a=>x.value=t,"data-bs-dismiss":"offcanvas"},(0,i.zw)(t.short_name),9,h)))),128))],16)])])])]),(0,s._)("div",_,[(0,s._)("div",y,[xt.value?((0,s.wg)(),(0,s.iD)("button",w,k)):((0,s.wg)(),(0,s.iD)("button",C,"Select Project from the lists"))])]),x.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",N,B)),(0,s._)("div",S,[rt.value?((0,s.wg)(),(0,s.iD)("span",{key:0,innerHTML:(0,l.SU)(a)()},null,8,D)):(0,s.kq)("",!0)]),(0,s._)("div",O,[xt.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",L,[x.value?((0,s.wg)(),(0,s.iD)("div",P,[H,(0,s._)("a",{class:"list-group-item list-group-item-action",id:"project-link-","data-bs-toggle":"list",href:"#budget-",role:"tab","aria-controls":"budget-",onClick:e[0]||(e[0]=(0,o.iM)((t=>yt()),["prevent"]))},"PROJECT PLAN ANALYSIS"),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(pt.value,(t=>((0,s.wg)(),(0,s.iD)("a",{key:t.id,class:"list-group-item list-group-item-action",id:"project-link-"+t.id,"data-bs-toggle":"list",href:"#budget-"+t.id,role:"tab","aria-controls":"budget-"+t.id,onClick:(0,o.iM)((a=>wt(t)),["prevent"])},(0,i.zw)(t.name),9,I)))),128))])):(0,s.kq)("",!0)])),(0,s._)("div",M,[(0,s._)("div",T,[x.value?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"tab-pane fade show active",id:"project-"+x.value.id,role:"tabpanel","aria-labelledby":"project-link-"+x.value.id},[(0,s._)("div",Y,[(0,s._)("ul",A,[(0,s._)("li",E,[dt.value?((0,s.wg)(),(0,s.iD)("a",{key:0,class:"nav-link active",id:"justify-center-pills-details-tab","data-bs-toggle":"pill",href:"#justify-center-pills-details",role:"tab","aria-controls":"justify-center-pills-details","aria-selected":"true",onClick:e[1]||(e[1]=t=>_t())}," BUDGET ANALYSIS ")):((0,s.wg)(),(0,s.iD)("a",W," PROJECT PLAN ANALYSIS "))]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(dt.value.items,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"nav-item",onClick:a=>gt.value=t},[(0,s._)("a",q,(0,i.zw)(t.name),1)],8,F)))),256))]),(0,s._)("div",z,[(0,s._)("div",G,[(0,s._)("div",K,[(0,s._)("div",{class:"d-inline-block",style:(0,i.j5)({minWidth:Math.max(200*ut.value.xaxis.categories.length,1300)+"px",width:Math.max(200*ut.value.xaxis.categories.length,1300)+"px"})},[(0,s.Wm)((0,l.SU)(c.Z),{width:"100%",height:"350",type:"bar",options:ut.value,series:bt.value},null,8,["options","series"])],4)])])])])],8,U)):((0,s.wg)(),(0,s.iD)("div",R,"No project selected"))])])]),xt.value&&x.value?((0,s.wg)(),(0,s.iD)("div",J,[(0,s._)("div",Q,[Z,(0,s._)("div",$,[(0,s._)("div",(0,s.dG)({class:"text-nowrap btn btn-info",style:{"border-top-left-radius":"80px","border-top-right-radius":"80px"}},xt.value?{"data-bs-toggle":"offcanvas","data-bs-target":"#budgetOffcanvas","aria-controls":"budgetOffcanvas"}:{})," Select Budget ",16)]),V])])):(0,s.kq)("",!0),(0,s._)("div",X,[tt,(0,s._)("div",at,[(0,s._)("div",et,[(0,s._)("div",st,[(0,s._)("div",it,[rt.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:0,class:"list-group-item list-group-item-action",id:"project-link-","data-bs-toggle":"list",href:"#budget-",role:"tab","aria-controls":"budget-",onClick:e[2]||(e[2]=(0,o.iM)((t=>yt()),["prevent"]))},"PROJECT PLAN ANALYSIS")),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(pt.value,(t=>((0,s.wg)(),(0,s.iD)("a",{key:t.id,class:"list-group-item list-group-item-action",id:"project-link-"+t.id,"data-bs-toggle":"list",href:"#budget-"+t.id,role:"tab","aria-controls":"budget-"+t.id,onClick:(0,o.iM)((a=>wt(t)),["prevent"])},(0,i.zw)(t.name),9,lt)))),128)),ot,rt.value?((0,s.wg)(),(0,s.iD)("span",{key:1,innerHTML:(0,l.SU)(a)()},null,8,nt)):(0,s.kq)("",!0)])])])])])]))}};const ct=rt;var dt=ct}}]);
//# sourceMappingURL=4806.3c182d1c.js.map