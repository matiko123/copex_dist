"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5333],{95333:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ut}});a(26699);var l=a(66252),n=a(2262),s=a(49963),i=a(3577),o=a(87066),r=a(56296),d=a(26212),u=a.n(d);const c={class:"layout-px-spacing"},m=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Summary</span></li></ol></nav></div></li></ul>',1),v=["innerHTML"],p={class:"d-flex justify-content-between align-items-center mb-3"},b={class:"flex-grow-1 d-flex justify-content-center"},h={class:"input-group input-group-md",style:{"max-width":"700px",width:"100%"}},g={class:"text-end ms-3"},y=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-circle",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),w=(0,l.Uk)(" Create Header "),_=[y,w],f={class:"row layout-top-spacing"},x={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},k={class:"row"},C={"my-8":""},S=["onSubmit"],H=(0,l._)("h4",{class:"text-center"},"HEADER REGISTRATION FORM ",-1),q={class:"row mb-2"},D={class:"col-md-12"},U=(0,l._)("label",{class:"form-label"},"Name",-1),N={class:"text-center gap-2 justify-content-end"},M=(0,l._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),z={class:"card mb-4 shadow"},V={class:"card-header text-white"},T={class:"d-flex justify-content-between align-items-center"},A={class:"d-flex flex-column gap-1 text-center w-100"},R={class:"card-title mb-0"},B={key:0},E={class:"mb-3 text-end btn-group"},I={key:0,class:"btn btn-danger btn-sm me-2"},O=["onClick"],$={key:0,class:"spinner-border spinner-border-sm text-light"},j={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"cursor-pointer"},L=(0,l._)("polyline",{points:"3 6 5 6 21 6"},null,-1),P=(0,l._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),Y=[L,P],W=["onClick"],F=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-circle",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),Q=(0,l.Uk)("  NEW "),X=[F,Q],G={class:"card-body"},K={key:0},J=["onSubmit"],Z={class:"text-center"},ee={class:"form-group"},te=(0,l._)("label",{class:"form-label"},"Summary Name",-1),ae={class:"input-group"},le=(0,l._)("button",{type:"submit",class:"btn btn-success"},"Save",-1),ne={class:"row"},se={class:"card mb-3 shadow-sm"},ie={class:"card-header bg-light"},oe={class:"d-flex justify-content-between align-items-center"},re={class:"d-flex flex-column gap-1"},de={class:"card-title mb-0"},ue={key:0,class:"text-muted"},ce={class:"text-end"},me={key:0,class:"btn btn-danger btn-sm me-2"},ve=["onClick"],pe={key:0,class:"spinner-border spinner-border-sm"},be={key:1,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"cursor-pointer"},he=(0,l._)("polyline",{points:"3 6 5 6 21 6"},null,-1),ge=(0,l._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),ye=[he,ge],we=["onClick"],_e=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-circle",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),fe=(0,l.Uk)(" Add Item "),xe=[_e,fe],ke=["onClick"],Ce=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,l._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),Se=(0,l.Uk)("   "),He=[Ce,Se],qe={class:"card-body"},De=["onSubmit"],Ue={class:"row g-3"},Ne={class:"col-12 col-sm-6 col-lg-4"},Me=(0,l._)("label",{class:"form-label"},"Item Name",-1),ze={class:"col-12 col-sm-6 col-md-4 col-lg-2"},Ve=(0,l._)("label",{class:"form-label"},"Unit",-1),Te={class:"col-12 col-sm-6 col-md-4 col-lg-2"},Ae=(0,l._)("label",{class:"form-label"},"Quantity",-1),Re={class:"col-12 col-sm-6 col-md-4 col-lg-2"},Be=(0,l._)("label",{class:"form-label"},"Rate",-1),Ee=["value"],Ie={class:"col-12 col-sm-6 col-md-4 col-lg-2 d-flex align-items-end"},Oe={class:"btn-group w-100"},$e=["onClick"],je=["disabled"],Le={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Pe={key:1},Ye={class:"custom-table"},We=["onClick"],Fe=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,l._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),Qe=[Fe],Xe=["onClick"],Ge={key:0,class:"spinner-border spinner-border-sm text-danger"},Ke={key:0,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger"},Je=(0,l._)("polyline",{points:"3 6 5 6 21 6"},null,-1),Ze=(0,l._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),et=[Je,Ze],tt={class:"row"},at={class:"col-md-2 mt-3 p-2 bg-light border rounded ms-auto"},lt={class:"text-end",style:{"font-size":"1.2rem"}},nt=(0,l._)("strong",{class:"me-2 text-dark"},"Grand Total:",-1),st={class:"text-dark"},it={key:1,class:"text-center py-4"},ot=(0,l._)("p",{class:"text-muted"},"No summaries available for this header.",-1),rt=(0,l._)("p",{class:"text-muted small"},'Click "Create Summary" above to add your first summary.',-1),dt=[ot,rt],ut={class:"modal fade mymodal",id:"editModal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ct={class:"modal-dialog modal-xl"},mt={class:"modal-content"},vt=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"editModalLabel"}," Edit Summary Item"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),pt={class:"modal-body"},bt={class:"row mb-3"},ht={class:"col-md-3"},gt=(0,l._)("label",{for:"editunitName"},"Name",-1),yt={class:"col-md-3"},wt=(0,l._)("label",{for:"editunitStatus"},"Unit",-1),_t={class:"col-md-2"},ft=(0,l._)("label",{for:"editunitStatus"},"Quantity",-1),xt={class:"col-md-2"},kt=(0,l._)("label",{for:"editunitStatus"},"Rate",-1),Ct={class:"modal-footer"},St=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close"},"Close",-1),Ht=["disabled"];var qt={setup(e){(0,r.j)({title:"Custom Table"});const t=o.Z.create({baseURL:"https://bushman.ink/api/v1/"}),a=(0,n.iH)(["SNo","name","unit","quantity","rate","cost","subtotal","actions"]),d=(0,n.iH)([]),y=(0,n.iH)(""),w=(0,n.iH)(""),L=(0,n.iH)({}),P=(0,n.iH)(!1),F=(0,n.iH)(!1),Q=(0,n.iH)(!1),he=(0,n.iH)(""),ge=(0,n.iH)(""),_e=(0,n.iH)(""),fe=(0,n.iH)(""),Ce=(0,l.f3)("showMessage"),Se=(0,l.f3)("showError"),Fe=(0,l.f3)("formatNumber"),Je=(0,l.f3)("loadingIndicator"),Ze=(0,n.iH)(""),ot=(0,n.iH)({}),rt=(0,n.iH)(!1),qt=(0,n.iH)(null),Dt=(0,n.iH)(null),Ut=(0,n.iH)(null),Nt=(0,n.iH)(null),Mt=JSON.parse(localStorage.getItem("user")).permissions,zt=(0,n.iH)({perPage:10,perPageValues:[5,10,20,50],skin:"table table-hover",columnsClasses:{actions:"actions text-center"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},sortable:["SNo","name","unit","quantity","rate","cost"]}),Vt=e=>e?Number(e).toLocaleString():"",Tt=e=>{const t=e.target.value.replace(/,/g,"");isNaN(t)||""===t?""===t&&(w.value="",e.target.value=""):(w.value=Number(t),e.target.value=Vt(t))},At=()=>{P.value=!0,t.get("/header-summaries").then((e=>{d.value=e.data.map(((e,t)=>({SNo:t+1,id:e.id,name:e.name,description:e.description,summaries:e.summaries.map(((e,t)=>({SNo:t+1,id:e.id,name:e.name,description:e.description,remark:e.remark,summary_items:e.summary_items.map(((e,t,a)=>{const l=e.quantity*e.rate,n=a.slice(0,t+1).reduce(((e,t)=>e+t.quantity*t.rate),0);return{SNo:t+1,id:e.id,name:e.name,description:e.description,unit:e.unit,quantity:e.quantity,rate:e.rate,cost:Fe(l),subtotal:Fe(n),remark:e.remark}}))})))}))),P.value=!1})).catch((e=>{Se(e.message),console.log(e),P.value=!1}))},Rt=()=>{Q.value=!1,P.value=!0;const e={name:he.value,description:ge.value};t.post("/header-summaries",e).then((e=>{At(),P.value=!1,Ce("Header summary registered successfully!"),Lt()})).catch((e=>{Se(e.message),console.log(e)}))},Bt=e=>{Nt.value=e,F.value=!F.value,y.value=""},Et=()=>{Nt.value=null,y.value=""},It=async()=>{if(!Nt.value)return void Se("No header selected");F.value=!1,P.value=!0;const e={name:y.value,header_summary_id:Nt.value.id,description:_e.value,remark:fe.value};try{await t.post("/summaries",e);At(),Ce("Summary registered successfully!"),Lt(),Nt.value=null}catch(a){Se(a.message),console.log(a)}finally{P.value=!1}},Ot=e=>{rt.value=!0;const a={summary_id:e,name:ot.value.name,unit:ot.value.unit.short_name,quantity:ot.value.quantity,rate:w.value,description:ot.value.description,remark:ot.value.remark};t.post("/summary-items",a).then((t=>{At(),rt.value=!1,Ce("Item registered successfully!"),$t(),L.value[e]=!1})).catch((e=>{Se("Error registering Item: "+e.message),rt.value=!1}))},$t=()=>{ot.value={name:"",unit:"",description:"",quantity:"",rate:"",remark:""},w.value=""},jt=()=>{if(!d.value)return[];if(!Ze.value||!Ze.value.trim())return d.value;const e=Ze.value.toLowerCase();return d.value.filter((t=>{const a=t.name.toLowerCase().includes(e),l=t.summaries&&t.summaries.some((t=>t.name.toLowerCase().includes(e)));return a||l}))},Lt=()=>{y.value="",he.value="",ge.value="",_e.value="",fe.value="",Nt.value=null},Pt=(0,n.iH)([]),Yt=()=>{P.value=!0,t.get("/units").then((e=>{Pt.value=e.data,P.value=!1})).catch((e=>{Se(e.message),P.value=!1}))},Wt=async e=>{window.Swal&&window.Swal.fire({title:"Delete Header Summary",text:"Are you sure you want to delete this header summary? This will also delete all associated summaries and items.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async a=>{if(a.isConfirmed){if(Ut.value===e)return;Ut.value=e;try{const a=await t.delete(`/header-summaries/${e}`);200===a.status?(Ce("Header summary deleted successfully"),At()):Se("Failed to delete header summary")}catch(l){Se(l.message)}finally{Ut.value=null}}}))},Ft=async e=>{window.Swal&&window.Swal.fire({title:"Delete Summary",text:"Are you sure you want to delete this summary? This will also delete all associated items.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async a=>{if(a.isConfirmed){if(Dt.value===e)return;Dt.value=e;try{const a=await t.delete(`/summaries/${e}`);200===a.status?(Ce("Summary deleted successfully"),At()):Se("Failed to delete summary")}catch(l){Se(l.message)}finally{Dt.value=null}}}))},Qt=async(e,a)=>{if(qt.value!==e){qt.value=e;try{const a=await t.delete(`/summary-items/${e}`);200===a.status?(At(),Ce("Item deleted successfully")):Se("Failed to delete item from server")}catch(l){Se(l.message)}finally{qt.value=null}}},Xt=e=>{Kt.value={...e},Kt.value.rate=Number(e.rate);const t=Pt.value.find((t=>t.short_name===e.unit));Kt.value.unit=t||null},Gt=async()=>{try{P.value=!0;const e=await t.put(`/summary-items/${Kt.value.id}`,{name:Kt.value.name,unit:Kt.value.unit.short_name,quantity:Number(Kt.value.quantity),rate:Number(Kt.value.rate),description:Kt.value.description,remark:Kt.value.remark});200===e.status&&(At(),Ce("Item updated successfully!"),document.getElementById("close").click())}catch(e){Se(e.message)}finally{P.value=!1}},Kt=(0,n.iH)({id:null,name:"",unit:null,quantity:"",rate:""}),Jt=(e,t)=>{if(!e||!e.summary_items.length)return void Se("No items available to print for this summary");const a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a);const l=(new Date).toLocaleDateString();let n=0;const s=e.summary_items.map((e=>{const t=e.quantity*e.rate;return n+=t,{...e,cost:t,subtotal:n}})),i=n,o=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>${e.name} - Summary Items</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 14px; }\n  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }\n  .logo { width: 160px; height: auto; }\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\n  .report-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 14px; text-align: center; border-radius: 5px; }\n  .company-title { text-align: center; margin-top: 10px; }\n  .company-title h2 { margin: 5px 0; font-size: 18px; }\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 12px; line-height: 1.4; font-weight: normal; }\n  .summary-title { margin-top: 30px; margin-bottom: 2px; font-size: 16px; font-weight: bold;  }\n  table { width: 100%; border-collapse: collapse; margin-top: 2px; border: 1px solid #666; }\n  th, td { border: 1px solid #666; padding: 6px; font-size: 13px; text-align: left; }\n  th { background-color: #f2f2f2; font-weight: bold; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  .total-row { background-color: #f0f0f0; font-weight: bold; }\n  @media print { body { margin: 8mm; } .no-print { display: none; } }\n</style>\n</head>\n<body>\n\n<div class="header">\n  <img src="https://bushman.ink/copex.jpg" class="logo" />\n  <div class="report-box">\n     Report Date <br>\n    <span style="color:red;">${l}</span>\n  </div>\n</div>\n\n<div class="reg-info">\n  TIN: 135-489-247<br>\n  VRN: 40-032826-C\n</div>\n\n<div class="company-title">\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\n</div>\n<div class="section-title">${(t||"SUMMARY").toUpperCase()}</div>\n\n<div class="summary-title">${e.name.toUpperCase()}</div>\n\n<table>\n  <thead>\n    <tr>\n      <th class="text-center">#</th>\n      <th>Item Name</th>\n      <th class="text-center">Unit</th>\n      <th class="text-right">Quantity</th>\n      <th class="text-right">Rate</th>\n      <th class="text-right">Cost</th>\n      <th class="text-right">Subtotal</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${s.map(((e,t)=>`\n      <tr>\n        <td class="text-center">${t+1}</td>\n        <td>${e.name}</td>\n        <td class="text-center">${e.unit}</td>\n        <td class="text-right">${e.quantity}</td>\n        <td class="text-right">${Fe(e.rate)}</td>\n        <td class="text-right">${Fe(e.cost)}</td>\n        <td class="text-right">${Fe(e.subtotal)}</td>\n      </tr>\n    `)).join("")}\n  </tbody>\n  <tfoot>\n    <tr class="total-row">\n      <td colspan="6" class="text-right"><strong>GRAND TOTAL</strong></td>\n      <td class="text-right"><strong>${Fe(i)}</strong></td>\n    </tr>\n  </tfoot>\n</table>\n\n<div style="margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;">\n  <p>© ${(new Date).getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 135-489-247 | VRN: 40-032826C</p>\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\n</div>\n\n</body>\n</html>\n`,r=a.contentWindow.document;r.open(),r.write(o),r.close(),a.onload=()=>{a.contentWindow.focus(),a.contentWindow.print(),setTimeout((()=>document.body.removeChild(a)),1e3)}};return(0,l.bv)((()=>{At(),Yt()})),(e,t)=>{const o=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)("div",c,[m,P.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,n.SU)(Je)()},null,8,v)):(0,l.kq)("",!0),(0,l._)("div",p,[(0,l._)("div",b,[(0,l._)("div",h,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Search Summary...","onUpdate:modelValue":t[0]||(t[0]=e=>Ze.value=e)},null,512),[[s.nr,Ze.value]])])]),(0,l._)("div",g,[(0,n.SU)(Mt).includes("is_md")?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-primary me-2",onClick:t[1]||(t[1]=e=>Q.value=!Q.value)},_)):(0,l.kq)("",!0)])]),(0,l._)("div",f,[(0,l._)("div",x,[(0,l._)("div",k,[(0,l._)("div",C,[Q.value?((0,l.wg)(),(0,l.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,s.iM)(Rt,["prevent"])},[H,(0,l._)("div",q,[(0,l._)("div",D,[U,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Header Name","onUpdate:modelValue":t[2]||(t[2]=e=>he.value=e),required:""},null,512),[[s.nr,he.value]])])]),(0,l._)("div",N,[(0,l._)("button",{type:"button",class:"btn btn-danger me-3",onClick:t[3]||(t[3]=e=>{Q.value=!1,Lt()})},"Cancel"),M])],40,S)):(0,l.kq)("",!0)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(jt(),((e,r)=>((0,l.wg)(),(0,l.iD)("div",{class:"col-md-12 my-4",key:e.id},[(0,l._)("div",z,[(0,l._)("div",V,[(0,l._)("div",T,[(0,l._)("div",A,[(0,l._)("h4",R,(0,i.zw)(e.name),1),e.description?((0,l.wg)(),(0,l.iD)("small",B,(0,i.zw)(e.description),1)):(0,l.kq)("",!0)]),(0,l._)("div",E,[(0,n.SU)(Mt).includes("is_md")?((0,l.wg)(),(0,l.iD)("button",I,[(0,l._)("span",{class:(0,i.C_)(["delete-icon",{"disabled-link":Ut.value===e.id}]),onClick:t=>Wt(e.id)},[Ut.value===e.id?((0,l.wg)(),(0,l.iD)("span",$)):((0,l.wg)(),(0,l.iD)("svg",j,Y))],10,O)])):(0,l.kq)("",!0),(0,n.SU)(Mt).includes("is_md")?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn btn-sm btn-primary",onClick:t=>Bt(e)},X,8,W)):(0,l.kq)("",!0)])])]),(0,l._)("div",G,[F.value&&Nt.value&&Nt.value.id===e.id?((0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("form",{class:"mt-3 p-3 border rounded bg-light",onSubmit:(0,s.iM)(It,["prevent"])},[(0,l._)("h5",Z,"CREATE SUMMARY FOR: "+(0,i.zw)(e.name.toUpperCase()),1),(0,l._)("div",ee,[te,(0,l._)("div",ae,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control me-2",placeholder:"Enter Summary Name","onUpdate:modelValue":t[4]||(t[4]=e=>y.value=e),required:""},null,512),[[s.nr,y.value]]),(0,l._)("div",{class:"input-group-append btn-group"},[(0,l._)("button",{type:"button",class:"btn btn-danger me-2",onClick:Et},"Cancel"),le])])])],40,J)])):(0,l.kq)("",!0),(0,l._)("div",ne,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.summaries,((r,d)=>((0,l.wg)(),(0,l.iD)("div",{class:"col-md-12 mb-3",key:r.id},[(0,l._)("div",se,[(0,l._)("div",ie,[(0,l._)("div",oe,[(0,l._)("div",re,[(0,l._)("h6",de,(0,i.zw)(r.name),1),r.description?((0,l.wg)(),(0,l.iD)("small",ue,(0,i.zw)(r.description),1)):(0,l.kq)("",!0)]),(0,l._)("div",ce,[(0,n.SU)(Mt).includes("is_md")?((0,l.wg)(),(0,l.iD)("button",me,[(0,l._)("span",{class:(0,i.C_)(["delete-icon",{"disabled-link":Dt.value===r.id}]),onClick:e=>Ft(r.id)},[Dt.value===r.id?((0,l.wg)(),(0,l.iD)("span",pe)):((0,l.wg)(),(0,l.iD)("svg",be,ye))],10,ve)])):(0,l.kq)("",!0),(0,n.SU)(Mt).includes("is_md")?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn btn-sm btn-primary me-2",onClick:e=>L.value[r.id]=!L.value[r.id]},xe,8,we)):(0,l.kq)("",!0),(0,n.SU)(Mt).includes("can_print_summary")?((0,l.wg)(),(0,l.iD)("button",{key:2,class:"btn btn-success btn-sm",onClick:t=>Jt(r,e.name),title:"Print Summary Items"},He,8,ke)):(0,l.kq)("",!0)])])]),(0,l._)("div",qe,[L.value[r.id]?((0,l.wg)(),(0,l.iD)("form",{key:0,onSubmit:(0,s.iM)((e=>Ot(r.id)),["prevent"]),class:"mb-3 p-3 border rounded bg-light"},[(0,l._)("div",Ue,[(0,l._)("div",Ne,[Me,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>ot.value.name=e),placeholder:"Enter Item Name",required:""},null,512),[[s.nr,ot.value.name]])]),(0,l._)("div",ze,[Ve,(0,l.Wm)((0,n.SU)(u()),{modelValue:ot.value.unit,"onUpdate:modelValue":t[6]||(t[6]=e=>ot.value.unit=e),options:Pt.value,"track-by":"id",label:"short_name",placeholder:"Select Unit",searchable:!0,multiple:!1,required:""},null,8,["modelValue","options"])]),(0,l._)("div",Te,[Ae,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>ot.value.quantity=e),placeholder:"Quantity",required:""},null,512),[[s.nr,ot.value.quantity]])]),(0,l._)("div",Re,[Be,(0,l._)("input",{type:"text",class:"form-control form-control-sm",value:Vt(w.value),onInput:t[8]||(t[8]=e=>Tt(e,w.value)),placeholder:"Enter rate"},null,40,Ee)]),(0,l._)("div",Ie,[(0,l._)("div",Oe,[(0,l._)("button",{type:"button",class:"btn btn-danger me-2",onClick:e=>(L.value[r.id]=!1,$t())}," Cancel ",8,$e),(0,l._)("button",{type:"submit",class:"btn btn-success",disabled:rt.value},[rt.value?((0,l.wg)(),(0,l.iD)("span",Le)):((0,l.wg)(),(0,l.iD)("span",Pe,"Save"))],8,je)])])])],40,De)):(0,l.kq)("",!0),(0,l._)("div",Ye,[(0,l.Wm)(o,{data:r.summary_items,columns:a.value,options:zt.value},{rate:(0,l.w5)((e=>[(0,l.Uk)((0,i.zw)((0,n.SU)(Fe)(e.row.rate)),1)])),actions:(0,l.w5)((e=>[(0,n.SU)(Mt).includes("is_md")?((0,l.wg)(),(0,l.iD)("a",{key:0,href:"javascript:;",class:"edit me-2",onClick:t=>Xt(e.row),"data-bs-toggle":"modal","data-bs-target":"#editModal"},Qe,8,We)):(0,l.kq)("",!0),(0,l._)("a",{href:"javascript:;",class:(0,i.C_)(["cancel",{"disabled-link":qt.value===e.row.id}]),onClick:t=>Qt(e.row.id,r.id)},[qt.value===e.row.id?((0,l.wg)(),(0,l.iD)("span",Ge)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,n.SU)(Mt).includes("is_md")?((0,l.wg)(),(0,l.iD)("svg",Ke,et)):(0,l.kq)("",!0)],64))],10,Xe)])),_:2},1032,["data","columns","options"]),(0,l._)("div",tt,[(0,l._)("div",at,[(0,l._)("div",lt,[nt,(0,l._)("strong",st,(0,i.zw)((0,n.SU)(Fe)(r.summary_items.reduce(((e,t)=>e+(t.quantity*t.rate||0)),0))),1)])])])])])])])))),128))]),e.summaries&&0!==e.summaries.length?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",it,dt))])])])))),128)),(0,l._)("div",ut,[(0,l._)("div",ct,[(0,l._)("div",mt,[vt,(0,l._)("div",pt,[(0,l._)("div",bt,[(0,l._)("div",ht,[gt,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"editunitName","onUpdate:modelValue":t[9]||(t[9]=e=>Kt.value.name=e)},null,512),[[s.nr,Kt.value.name]])]),(0,l._)("div",yt,[wt,(0,l.Wm)((0,n.SU)(u()),{modelValue:Kt.value.unit,"onUpdate:modelValue":t[10]||(t[10]=e=>Kt.value.unit=e),options:Pt.value,"track-by":"id",label:"short_name",searchable:!0,multiple:!1,required:""},null,8,["modelValue","options"])]),(0,l._)("div",_t,[ft,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"editunitStatus","onUpdate:modelValue":t[11]||(t[11]=e=>Kt.value.quantity=e)},null,512),[[s.nr,Kt.value.quantity]])]),(0,l._)("div",xt,[kt,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"editunitStatus","onUpdate:modelValue":t[12]||(t[12]=e=>Kt.value.rate=e)},null,512),[[s.nr,Kt.value.rate]])])])]),(0,l._)("div",Ct,[St,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:Gt,disabled:e.isSaving},"Save ",8,Ht)])])])])])])])])}}};const Dt=qt;var Ut=Dt}}]);
//# sourceMappingURL=5333.58c6e3ab.js.map