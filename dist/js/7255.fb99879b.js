"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[7255],{77255:function(t,e,n){n.r(e),n.d(e,{default:function(){return q}});var a=n(66252),o=n(2262),l=n(3577),i=n(49963),r=n(56296),s=n(87066);const c=t=>((0,a.dD)("data-v-bfbe2202"),t=t(),(0,a.Cn)(),t),d={class:"layout-px-spacing"},u={class:"seperator-header layout-top-spacing"},p={class:"d-flex justify-content-between mt-3"},v=c((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1))),g=[v],h={class:"d-flex align-items-center"},m={class:"dropdown me-3"},b=c((()=>(0,a._)("option",{value:"all"},"All Types",-1))),f=["value"],w=c((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-printer me-1"},[(0,a._)("polyline",{points:"6 9 6 2 18 2 18 9"}),(0,a._)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),(0,a._)("rect",{x:"6",y:"14",width:"12",height:"8"})],-1))),y=(0,a.Uk)(" Print "),x=[w,y],_={class:"mt-3 mx-2"},k={class:"text-center text-primary mt-2 mb-2"},S=["innerHTML"],C={class:"row layout-top-spacing"},$={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},H={class:"panel br-6 p-0"},L={class:"custom-table"};var D={setup(t){(0,r.j)({title:"Activity Logs"});const e=(0,a.f3)("loadingIndicator"),n=((0,a.f3)("showMessage"),(0,a.f3)("showError")),c=(0,o.iH)(!1),v=(0,o.iH)(["SNo","user_name","action","type","date","time","quantity"]),w=(0,o.iH)([]),y=(0,o.iH)("all"),D=(0,o.iH)([]),A=(0,o.iH)({perPage:10,perPageValues:[5,10,20,50],skin:"table table-hover",pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},sortable:["SNo","user_name","action","type","date","time","quantity"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},resizableColumns:!1}),T=(0,a.Fl)((()=>{const t=D.value.map((t=>t.type));return[...new Set(t)].filter((t=>t))})),q=()=>{"all"===y.value?w.value=[...D.value]:w.value=D.value.filter((t=>t.type===y.value)),w.value=w.value.map(((t,e)=>({...t,SNo:e+1})))},M=async()=>{c.value=!0;try{const t=await s.Z.get("https://construction.trustdigital.space/api/v1/activity-logs");t.data&&t.data.data&&(D.value=t.data.data.map(((t,e)=>({...t,SNo:e+1}))),w.value=[...D.value],console.log("Unique types:",T.value)),c.value=!1}catch(t){n(t.message),console.log(t),c.value=!1}},N=()=>{const t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);const e=v.value,n="all"===y.value?"All Types":`Type: ${y.value}`,a=t=>{if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return t;const n=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}.${a}.${o}`},o=t=>null===t||void 0===t?"0/=":`${Number(t).toLocaleString()}/=`;let l=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Activity Logs - ${n}</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n            }\n            h1 {\n              text-align: center;\n              margin-bottom: 10px;\n            }\n            h2 {\n              text-align: center;\n              margin-bottom: 20px;\n              font-size: 16px;\n              color: #666;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-bottom: 20px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px;\n              text-align: left;\n            }\n            th {\n              background-color: #f2f2f2;\n              font-weight: bold;\n            }\n            tr:nth-child(even) {\n              background-color: #f9f9f9;\n            }\n            .print-date {\n              text-align: right;\n              margin-bottom: 20px;\n              font-size: 12px;\n            }\n          </style>\n        </head>\n        <body>\n          <h1>Activity Logs Report</h1>\n          <h2>${n}</h2>\n          <div class="print-date">Printed on: ${(new Date).toLocaleString()}</div>\n          <table>\n            <thead>\n              <tr>\n                ${e.map((t=>`<th>${U(t)}</th>`)).join("")}\n              </tr>\n            </thead>\n            <tbody>\n      `;w.value.forEach((t=>{l+="<tr>",e.forEach((e=>{l+="date"===e?`<td>${a(t[e])}</td>`:"quantity"===e?`<td>${o(t[e])}</td>`:`<td>${t[e]||""}</td>`})),l+="</tr>"})),l+="\n            </tbody>\n          </table>\n        </body>\n        </html>\n      ";const i=t.contentWindow.document;i.open(),i.write(l),i.close(),t.onload=()=>{t.contentWindow.focus(),t.contentWindow.print(),setTimeout((()=>{document.body.removeChild(t)}),1e3)}},U=t=>t.replace(/_/g," ").replace(/-/g," ").toLowerCase().split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ");return(0,a.bv)((()=>{M()})),(t,n)=>{const r=(0,a.up)("v-client-table");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",u,[(0,a._)("div",p,[(0,a._)("button",{class:"btn btn-dark me-2 px-3",onClick:n[0]||(n[0]=e=>t.$router.go(-1))},g),(0,a._)("div",h,[(0,a._)("div",m,[(0,a.wy)((0,a._)("select",{class:"form-select","onUpdate:modelValue":n[1]||(n[1]=t=>y.value=t),onChange:q},[b,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(T),(t=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:t},(0,l.zw)(t),9,f)))),128))],544),[[i.bM,y.value]])]),(0,a._)("button",{class:"btn btn-primary px-3",onClick:N},x)])])]),(0,a._)("div",_,[(0,a._)("div",k,[c.value?((0,a.wg)(),(0,a.iD)("div",{key:0,innerHTML:(0,o.SU)(e)()},null,8,S)):(0,a.kq)("",!0)])]),(0,a._)("div",C,[(0,a._)("div",$,[(0,a._)("div",H,[(0,a._)("div",L,[(0,a.Wm)(r,{data:w.value,columns:v.value,options:A.value},{quantity:(0,a.w5)((t=>[(0,a.Uk)((0,l.zw)((t.row.quantity||0).toLocaleString())+"/= ",1)])),_:1},8,["data","columns","options"])])])])])])}}},A=n(83744);const T=(0,A.Z)(D,[["__scopeId","data-v-bfbe2202"]]);var q=T}}]);
//# sourceMappingURL=7255.fb99879b.js.map