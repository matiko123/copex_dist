{"version":3,"file":"js/4026.e0574a49.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/globalSearch.js","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue?f760","webpack://cork-vue3/./src/views/statementOfAccounts.vue","webpack://cork-vue3/./src/views/statementOfAccounts.vue?892b"],"sourcesContent":["export function globalSearch(data, keyword) {\r\n  const lowerKeyword = keyword.toLowerCase().trim()\r\n  if (!lowerKeyword) return data\r\n\r\n  const containsKeyword = obj => {\r\n    if (obj == null) return false\r\n    if (typeof obj === 'string') return obj.toLowerCase().includes(lowerKeyword)\r\n    if (Array.isArray(obj)) return obj.some(containsKeyword)\r\n    if (typeof obj === 'object')\r\n      return Object.values(obj).some(containsKeyword)\r\n    return false\r\n  }\r\n\r\n  return data.filter(item => containsKeyword(item))\r\n}","<template>\r\n     <form @submit.prevent class=\"input-group container\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control border-end-0\"\r\n      placeholder=\"Search a word...\"\r\n      v-model=\"filter\"\r\n    >\r\n    <span class=\"input-group-text bg-white border-start-0\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z\"/>\r\n      </svg>\r\n    </span>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\n\r\n\r\nconst emit = defineEmits(['update:filterValue'])\r\nconst props = defineProps({\r\n  filterValue: String\r\n})\r\nconst filter = ref(props.filterValue || null)\r\n\r\nwatch(filter, val => emit('update:filterValue', val))\r\n</script>\r\n","import script from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>statement of accounts</span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        \r\n\r\n        \r\n        <div class=\"d-flex align-items-center me-4 mt-2 my-4 position-relative w-100\">\r\n            <!-- Centered Header -->\r\n            <div class=\"flex-grow-1 text-center\">\r\n                <h5 class=\"m-0\">STATEMENT OF ACCOUNTS </h5>\r\n                <div class=\"d-flex justify-content-center align-items-center mt-2\">\r\n                    <global-search-field\r\n                        v-model:filterValue=\"filter\"\r\n                    />\r\n                </div>\r\n            </div>\r\n \r\n            <!-- Button on the right -->\r\n            <div class=\"ms-auto\" v-if=\"user_permissions.includes('can_create_bin_card')\">\r\n                <button class=\"btn btn-primary\" @click=\"conversion_factor = !conversion_factor\">\r\n                   <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\"> <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/> <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/> </svg>\r\n                </button>\r\n            </div>\r\n                 \r\n        </div>\r\n\r\n        <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n\r\n        <div class=\"my-4\">\r\n            <!-- item registration form starts -->\r\n            <form v-if=\"conversion_factor\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerBinCard\">\r\n                <h5 class=\"text-center\">REGISTER STATEMENT OF ACCOUNT </h5>\r\n\r\n                <div class=\"row mb-2\">\r\n                    <div class=\"col-md-4\">\r\n                        <label class=\" form-label\"> Name</label>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Enter Name\" v-model=\"name\" required>\r\n                    </div>\r\n                    <div class=\"col-md-4\">\r\n                        <label class=\" form-label\">Description</label>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Enter Description\" v-model=\"description\" required>\r\n                    </div>\r\n\r\n                    <div class=\"col-md-4\">\r\n                        <label class=\"form-label small\">Unit</label>\r\n                        <multiselect \r\n                            v-model=\"units\"\r\n                            :options=\"unitList\"\r\n                            placeholder=\"select unit\"\r\n                            label=\"short_name\"\r\n                            :searchable=\"true\"        \r\n                            :multiple=\"false\"\r\n                            :required=\"true\"\r\n                            :allow-empty=\"false\"\r\n                        ></multiselect>\r\n                    </div>\r\n                </div>\r\n                <div class=\"text-center gap-2 justify-content-end\">\r\n                    <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"conversion_factor = false; resetForm();\">Cancel</button>\r\n                    <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n                </div>\r\n            </form>\r\n            <!-- item registration form ends-->\r\n        </div>\r\n\r\n\r\n        <!-- Bin Cards List -->\r\n        <div v-if=\"filteredBinCards.length === 0\" class=\"alert alert-light text-center\">No statement of account records found</div>\r\n        <div v-else class=\"accordion accordion-flush\" id=\"accordionFlushExample\">\r\n            <div class=\"accordion-item\" v-for=\"(binCard, index) in filteredBinCards\" :key=\"binCard.id\">\r\n                <h2 class=\"accordion-header\">\r\n                    <button class=\"accordion-button collapsed\" type=\"button\" \r\n                        :data-bs-toggle=\"'collapse'\"  \r\n                        :data-bs-target=\"'#flush-collapse-' + binCard.id\" \r\n                        aria-expanded=\"false\" \r\n                        :aria-controls=\"'flush-collapse-' + binCard.id\">\r\n                        {{ index + 1 }} : &nbsp;&nbsp; {{ binCard.name }} &nbsp;&nbsp; {{ formatNumber(binCard.balance)}} &nbsp; {{ binCard.unit }} &nbsp;&nbsp; {{ binCard.description }}\r\n                    </button>\r\n                </h2>\r\n                <div :id=\"'flush-collapse-' + binCard.id\" class=\"accordion-collapse collapse\" :data-bs-parent=\"'#accordionFlushExample'\">\r\n                    <div class=\"accordion-body\">\r\n                        <div class=\"d-flex justify-content-end mb-3\">  \r\n                            <button class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#add-item-modal\" @click=\"openAddItemModal(binCard)\" > \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n                                    <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                                    <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n                                </svg>\r\n                            </button>\r\n                            <button class=\"btn btn-success ms-2\" @click=\"printAccountStatement(binCard)\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                                    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                                    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                                </svg>\r\n                            </button>\r\n                        </div> \r\n\r\n                        <div class=\"panel p-0 mt-3\">                            \r\n                            <div class=\"custom-table table3 mt-3\">\r\n                                <v-client-table \r\n                                    :data=\"getTableData(binCard.items , binCard)\" \r\n                                    :columns=\"item_columns\" \r\n                                    :options=\"table_option\">\r\n                                    <template #actions=\"props\">\r\n                              \r\n                                <a href=\"javascript:;\" class=\"edit me-3\" @click=\"openEditItemModal(props.row)\" data-bs-toggle=\"modal\" :data-bs-target=\"'#edit-conversion-factor-modal'\" v-if=\"user_permissions.includes('can_edit_bin_card_items')\">\r\n                                    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        stroke-width=\"1.5\"\r\n        stroke-linecap=\"round\"\r\n        stroke-linejoin=\"round\"\r\n        class=\"text-primary\"\r\n        style=\"cursor: pointer;\"\r\n        title=\"Edit Activity\"\r\n      >\r\n        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n      </svg>\r\n                                </a>\r\n                                <a href=\"javascript:;\" class=\"cancel\" @click=\"deleteBinCardItem(props.row)\" v-if=\"user_permissions.includes('can_delete_bin_card_items')\">\r\n                                    <span \r\n                                        v-if=\"deletingItemId === props.row.id\"\r\n                                        class=\"spinner-border spinner-border-sm text-danger\" \r\n                                        role=\"status\" \r\n                                        aria-hidden=\"true\"\r\n                                        style=\"width: 24px; height: 24px;\"\r\n                                    ></span>\r\n                                    <svg\r\n                                        v-else\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"currentColor\"\r\n                                        stroke-width=\"1.5\"\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        class=\"text-danger\"\r\n                                    >\r\n                                        <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                    </svg>\r\n                                </a>\r\n                            </template>\r\n                                </v-client-table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n   \r\n\r\n    <!-- add binCard item starts -->\r\n    <div class=\"modal fade mymodal\" id=\"add-item-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"itemModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-xl\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"itemModalLabel\">Add Transaction For {{ binCard.name }}</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closebinCardModal()\" id=\"close_item\"></button>\r\n                </div>\r\n                <form @submit.prevent=\"AddBinCardItem()\">\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"row mb-3\">\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"quantity\"> Ref No</label>\r\n                                <input type=\"number\" v-model=\"ref_no\" class=\"form-control\" placeholder=\"Enter Ref No\" step=\"any\">\r\n                            </div>\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"date\"> Date</label>\r\n                                <input type=\"date\" v-model=\"date\" class=\"form-control\" required >\r\n                            </div>\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"quantity\"> Received Quantity</label>\r\n                                <input type=\"number\" v-model=\"received\" class=\"form-control\" placeholder=\"Enter Received Quantity\" step=\"any\" >\r\n                            </div>\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"quantity\"> Isused Quantity</label>\r\n                                <input type=\"number\" v-model=\"issued\" class=\"form-control\" placeholder=\"Enter Issued Quantity\" step=\"any\" >\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <label for=\"remark\"> Remark</label>\r\n                                <input type=\"text\" v-model=\"remark\" class=\"form-control\" placeholder=\"Enter Remark\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" @click=\"closebinCardModal()\" id=\"close_item\">Close</button>\r\n                        <button class=\"btn btn-primary me-2 mt-1\" :disabled=\"isSending\">\r\n                            <span v-if=\"isSending\" v-html=\"loadingSpinner()\"></span>\r\n                            <span>Save</span>\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- add binCard item ends -->\r\n\r\n             <!-- Edit bin card item  modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"edit-conversion-factor-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editConversionFactorModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editConversionFactorModalLabel\">Edit Transaction</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeEditModal()\"></button>\r\n      </div>\r\n      <form @submit.prevent=\"updateBinCardItem(bin_card_item_id)\">\r\n        <div class=\"modal-body\">\r\n            <div class=\"row mb-3\">\r\n                <div class=\"col-md-4\">\r\n                                <label for=\"quantity\"> Ref No</label>\r\n                                <input type=\"number\" v-model=\"ref_no\" class=\"form-control\" placeholder=\"Enter Ref No\" step=\"any\">\r\n                 </div>\r\n                <div class=\"col-md-4\">\r\n                <label for=\"quantity\"> Received Quantity</label>\r\n              <input type=\"number\" v-model=\"received\" class=\"form-control\" placeholder=\"Enter Quantity\" step=\"any\">\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <label for=\"quantity\"> Issued Quantity</label>\r\n              <input type=\"number\" v-model=\"issued\" class=\"form-control\" placeholder=\"Enter Quantity\" step=\"any\">\r\n            </div>\r\n            <div class=\"col-md-12\">\r\n                                <label for=\"remark\"> Remark</label>\r\n                                <input type=\"text\" v-model=\"remark\" class=\"form-control\" placeholder=\"Enter Remark\">\r\n                            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeEditModal()\" id=\"close_editing\">Close</button>\r\n          <button type=\"submit\" class=\"btn btn-primary\">\r\n            <span v-if=\"loading_spinner\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Edit bin card item modal ends -->\r\n\r\n </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject, watch, computed } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import globalSearchField from '@/components/reusables/globalSearchField.vue';\r\n    import { globalSearch } from '@/components/reusables/globalSearch';\r\n    \r\n    useMeta({ title: 'statement of accounts' });  \r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const showMessage = inject('showMessage');\r\n    const conversion_factor = ref(false);\r\n    const showError = inject('showError');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const formatDate = inject('formatDate');\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingSpinner = inject('loadingSpinner'); \r\n    const filter = ref('')\r\n    \r\n    const loading_spinner = ref(false);\r\n    const item_columns = ref(['SNo','date','ref_no','received_Qty','issued_Qty','balance_Qty','remark','authorized_by','actions']);    \r\n    const name = ref('');\r\n    const remark = ref('');\r\n    const description = ref('');\r\n    const units = ref('');\r\n    \r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'ref_no','received_Qty','issued_Qty','balance_Qty'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const unitList = ref([]);\r\n    const getUnits = async () => {\r\n        try {\r\n            const response = await axiosInstance.get('/units');\r\n            unitList.value = response.data;\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }\r\n    };\r\n\r\n    const formatNumber = (value) => {\r\n  return new Intl.NumberFormat('en-US', { \r\n    minimumFractionDigits: 1, \r\n    maximumFractionDigits: 1 \r\n  }).format(value);\r\n};\r\n\r\n\r\n\r\n    const calculateBinCardBalance = (items) => {\r\n    if (!items || !items.length) return 0;\r\n\r\n    return items.reduce((total, item) => {\r\n        const received = parseFloat(item.received) || 0;\r\n        const issued = parseFloat(item.issued) || 0;\r\n        return total + received - issued;\r\n    }, 0).toFixed(2);\r\n};\r\n\r\n    const binCards = ref([]);\r\n    \r\n    // Function to calculate balance for table data\r\n    const getTableData = (items, binCard) => {\r\n        if (!items) return [];\r\n        \r\n        let runningBalance = 0;\r\n        return items.map((item, index) => {\r\n            const received = parseFloat(item.received) || 0;\r\n            const issued = parseFloat(item.issued) || 0;\r\n            runningBalance += received - issued;\r\n            \r\n            return {\r\n                id: item.id,\r\n                SNo: index + 1,\r\n                ref_no: item.ref_no,\r\n                received_Qty: item.received ? formatNumber(item.received) + ' ' + binCard.unit : '--',\r\n                issued_Qty: item.issued ? formatNumber(item.issued) + ' ' + binCard.unit : '--',\r\n                balance_Qty: formatNumber(runningBalance) + ' ' + binCard.unit,\r\n                remark: item.remark,\r\n                date: formatDate(item.date),\r\n                authorized_by: item.issuer?.name || 'N/A',\r\n            };\r\n        });\r\n    };\r\n\r\n    const filteredBinCards = computed(() => {\r\n    return globalSearch(binCards.value, filter.value);\r\n});\r\n\r\n    const getBinCards = async () => {\r\n        loading_spinner.value = true;\r\n        try {\r\n            const response = await axiosInstance.get('bin-cards?no_store_item=1');\r\n            binCards.value = response.data.map((item, index) => ({\r\n                ...item,\r\n                SNo: index + 1,\r\n                id: item.id,\r\n                name: item.name,\r\n                unit: item.unit,\r\n                unit_name: item.unit,\r\n                description: item.description || ' ',\r\n                remark: item.remark,\r\n                items: item.items,\r\n                balance: calculateBinCardBalance(item.items)\r\n            }));\r\n        } catch (error) {\r\n            console.log(error)\r\n            showError(error.message);\r\n        } finally {\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n    \r\n    const registerBinCard = async () => {\r\n        const existingBinCard = binCards.value.find(card => {\r\n            if (card.name === name.value) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n\r\n        if (existingBinCard) {\r\n            showError('Record already exists!');\r\n            return;\r\n        }\r\n        conversion_factor.value = false;\r\n        const itemData = {\r\n            name: name.value,\r\n            unit: units.value.short_name,\r\n            description: description.value,\r\n            remark: remark.value,\r\n            issuer_id : JSON.parse(localStorage.getItem('user')).id\r\n        };\r\n    \r\n        try {\r\n            const response = await axiosInstance.post('/bin-cards', itemData);\r\n            getBinCards();\r\n            showMessage('Record added!');\r\n            resetForm();\r\n        } catch (error) {\r\n            showError(error.message);\r\n            console.log(error)\r\n        }\r\n    };    \r\n\r\n    const resetForm = () => {\r\n        name.value = '';\r\n        units.value = '';\r\n        description.value = '';\r\n    };\r\n\r\n    const openAddItemModal = (row) => {\r\n        bin_card_id.value = row.id; \r\n        binCard.value = row;\r\n    };\r\n\r\n    const isSending = ref(false);\r\n    const received = ref('');\r\n    const issued = ref('');\r\n    const bin_card_id = ref('');\r\n    const ref_no = ref('');\r\n    const item = ref('');\r\n    const binCard = ref('');\r\n    const date = ref('');\r\n\r\n\r\n    const canIssue = computed(() => {\r\n    const currentBalance = parseFloat(binCard.value.balance || 0);\r\n    const issuedQty = parseFloat(issued.value || 0);\r\n    const receivedQty = parseFloat(received.value || 0);\r\n\r\n    return issuedQty <= (currentBalance + receivedQty);\r\n});\r\n\r\n\r\n\r\n\r\n const AddBinCardItem = async () => {\r\n\r\n    const currentBalance = parseFloat(binCard.value.balance || 0);\r\n    const issuedQty = parseFloat(issued.value || 0);\r\n    const receivedQty = parseFloat(received.value || 0);\r\n\r\n    if (issuedQty > (currentBalance + receivedQty)) {\r\n        showError(`Issued quantity (${formatNumber(issuedQty)}) exceeds available balance (${formatNumber(currentBalance)})`);\r\n        return;\r\n    }\r\n\r\n    isSending.value = true;\r\n\r\n    const itemData = {\r\n        bin_card_id: bin_card_id.value, \r\n        ref_no: ref_no.value,    \r\n        received: received.value,\r\n        issued: issued.value,\r\n        issuer_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n        remark: remark.value,\r\n        date: date.value,\r\n    };\r\n\r\n    try {  \r\n        await axiosInstance.post(`bin-card-items`, itemData);\r\n        showMessage('Transaction added');\r\n        document.getElementById('close_item').click();\r\n        getBinCardReactive();\r\n        closebinCardModal();\r\n    } catch(error) {\r\n        showError(error.message);\r\n    } finally {\r\n        isSending.value = false;    \r\n    }\r\n};\r\n\r\n\r\n    const closebinCardModal = () => {\r\n        ref_no.value = '';\r\n        received.value = '';\r\n        issued.value = '';\r\n        remark.value = '';\r\n        date.value = '';\r\n    };\r\n\r\n   const printAccountStatement = async (binCard) => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    const tableData = getTableData(binCard.items, binCard);\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Financial Statement - ${binCard.name}</title>\r\n<style>\r\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\r\n  .text-style { font-family: 'Courier New', monospace; }\r\n  .company-title { text-align: center; }\r\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\r\n  .subtitle { text-align: center; font-size: 16px; margin: 5px 0; my-4 }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\r\n  th, td { border: 0.5px solid #000; padding: 6px; }\r\n  th { background-color: #f8f8f8; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\r\n  @media print { body { margin: 10mm; } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"company-title text-style\">\r\n  <i>\r\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\r\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\r\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\r\n  </i>\r\n</div>\r\n\r\n<hr style=\"margin-top:20px\">\r\n\r\n<div class=\"title text-style\">\r\n  statement of account\r\n</div>\r\n<hr>\r\n<div class=\"subtitle text-style\">\r\n  <strong>${binCard.name}</strong>   ${binCard.description}\r\n</div>\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>No.</th>\r\n      <th>Date</th>\r\n      <th>Ref No</th>\r\n      <th class=\"text-right\">Received</th>\r\n      <th class=\"text-right\">Issued</th>\r\n      <th class=\"text-right\">Balance</th>\r\n      <th>Remark</th>\r\n      <th>Authorized</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${tableData.map((item) => `\r\n    <tr>\r\n      <td>${item.SNo}</td>\r\n      <td>${item.date}</td>\r\n      <td>${item.ref_no || 'N/A'}</td>\r\n      <td class=\"text-right\">${item.received_Qty}</td>\r\n      <td class=\"text-right\">${item.issued_Qty}</td>\r\n      <td class=\"text-right\">${item.balance_Qty}</td>\r\n      <td>${item.remark || '--'}</td>\r\n      <td>${item.authorized_by}</td>\r\n    </tr>\r\n    `).join('')}\r\n    <tr>\r\n      <td colspan=\"5\" class=\"text-right\"><strong>FINAL BALANCE:</strong></td>\r\n      <td class=\"text-right\"><strong>${formatNumber(binCard.balance)} ${binCard.unit}</strong></td>\r\n      <td colspan=\"2\"></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print report: ${error.message}`);\r\n  }\r\n};\r\n\r\n   const store =ref('');\r\n    const storeItems = ref([])\r\n    const storeItem = ref('')\r\n    const getStoreItems = (id) => {\r\n        axiosInstance.get(`/get-store-items?store_id=${id}`).then((response) => {\r\n            storeItems.value = response.data\r\n            .map((store,index) => ({\r\n                ...store,\r\n                SNo: index + 1,\r\n                name: store?.name + ' ' + (store?.condition ?? ''),\r\n                category : store?.category_name,\r\n                used: store?.used_quantity || 0,\r\n                balance : store?.balance_quantity || 0,\r\n                stock: store?.total_quantity || 0,\r\n                checked : false\r\n            }));\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n\r\n    watch(store, (newVal) => {\r\n        storeItem.value = ''\r\n        storeItems.value = ['']\r\n        getStoreItems(newVal.id)\r\n    });\r\n\r\n    const deletingItemId = ref(null);\r\n\r\n    const deleteBinCardItem = async (item) => {\r\n      deletingItemId.value = item.id;\r\n      try {\r\n        await axiosInstance.delete(`/bin-card-items/${item.id}`);\r\n        await getBinCardReactive();\r\n        showMessage('Bin Card Item deleted successfully');\r\n      } catch (error) {\r\n        console.error(error);\r\n        showError(error.message);\r\n      } finally {\r\n        deletingItemId.value = null;\r\n      }\r\n    };\r\n\r\n    const getBinCardReactive = async () => {\r\n          const response = await axiosInstance.get('bin-cards?no_store_item=1');\r\n            binCards.value = response.data.map((item, index) => ({\r\n                ...item,\r\n                SNo: index + 1,\r\n                id: item.id,\r\n                name: item.name,\r\n                unit: item.unit,\r\n                unit_name: item.unit,\r\n                description: item.description,\r\n                remark: item.remark,\r\n                items: item.items,\r\n                balance: calculateBinCardBalance(item.items)\r\n            }));\r\n    };\r\n\r\n    const bin_card_item_id = ref('');\r\n    const closeEditModal = () => {\r\n        ref_no.value = '';\r\n        received.value = '';\r\n        issued.value = '';\r\n        remark.value = '';\r\n    };\r\n    const openEditItemModal = (row) => {\r\n    console.log('Editing item:', row);\r\n        bin_card_item_id.value = row.id;\r\n        ref_no.value = row.ref_no;\r\n        received.value = row.received_Qty; // Changed from row.received\r\n        issued.value = row.issued_Qty;     // Changed from row.issued\r\n        remark.value = row.remark;\r\n    };\r\n\r\n    const updateBinCardItem = async () => {\r\n        loading_spinner.value = true;\r\n        const payload = {\r\n            ref_no: ref_no.value,\r\n                received: received.value,\r\n                issued: issued.value,\r\n                remark: remark.value,\r\n        };\r\n        try {  \r\n            const response = await axiosInstance.put(`bin-card-items/${bin_card_item_id.value}`, payload);\r\n            getBinCardReactive(); \r\n            showMessage('Bin Card Item updated')\r\n            document.getElementById('close_editing').click();\r\n            closeEditModal();\r\n        } catch(error) {\r\n            console.log(error)\r\n            showError(error.message)\r\n        } finally {\r\n            loading_spinner.value = false;    \r\n        }\r\n    };\r\n\r\n    onMounted(() => {\r\n        getBinCards();\r\n        getUnits();\r\n    });\r\n</script>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n","import script from \"./statementOfAccounts.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./statementOfAccounts.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./statementOfAccounts.vue?vue&type=style&index=0&id=42d7c3cc&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["globalSearch","data","keyword","lowerKeyword","toLowerCase","trim","containsKeyword","obj","includes","Array","isArray","some","Object","values","filter","item","ref","props","filterValue","watch","val","emit","__exports__","useMeta","title","loadingIndicator","inject","showMessage","conversion_factor","showError","user_permissions","JSON","parse","localStorage","getItem","permissions","formatDate","loadingSpinner","loading_spinner","item_columns","name","remark","description","units","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","unitList","getUnits","async","response","get","value","error","message","formatNumber","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","calculateBinCardBalance","items","length","reduce","total","received","parseFloat","issued","toFixed","binCards","getTableData","binCard","runningBalance","map","index","id","SNo","ref_no","received_Qty","unit","issued_Qty","balance_Qty","date","authorized_by","issuer","filteredBinCards","computed","getBinCards","unit_name","balance","console","log","registerBinCard","existingBinCard","find","card","itemData","short_name","issuer_id","post","resetForm","openAddItemModal","row","bin_card_id","isSending","AddBinCardItem","currentBalance","issuedQty","receivedQty","document","getElementById","click","getBinCardReactive","closebinCardModal","printAccountStatement","iframe","createElement","style","display","body","appendChild","tableData","printContent","join","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","store","storeItems","storeItem","getStoreItems","then","condition","category","category_name","used","used_quantity","balance_quantity","stock","total_quantity","checked","newVal","deletingItemId","deleteBinCardItem","delete","bin_card_item_id","closeEditModal","openEditItemModal","updateBinCardItem","payload","put","onMounted"],"sourceRoot":""}