"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[6401],{26401:function(t,a,e){e.r(a),e.d(a,{default:function(){return Lt}});e(26699);var n=e(66252),s=e(3577),l=e(2262),o=e(49963),i=e(87066),r=e(56296),d=e(26212),c=e.n(d),u=e(42119);const m={class:"layout-px-spacing"},p=(0,n.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item active" aria-current="page"><span>Jobcards</span></li></ol></nav></div></li></ul>',1),v={class:"d-flex me-4 mt-2"},h={class:"ms-auto"},b=(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-printer me-1"},[(0,n._)("polyline",{points:"6 9 6 2 18 2 18 9"}),(0,n._)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),(0,n._)("rect",{x:"6",y:"14",width:"12",height:"8"})],-1),g=[b],_={class:"offcanvas offcanvas-end","data-bs-scroll":"true",tabindex:"-1",id:"offcanvasWithBothOptions","aria-labelledby":"offcanvasWithBothOptionsLabel"},y=(0,n._)("div",{class:"offcanvas-header"},[(0,n._)("h5",{class:"offcanvas-title",id:"offcanvasWithBothOptionsLabel"},"COMPANIES LIST"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),w={class:"offcanvas-body"},f={class:"row"},x={class:"col-12"},k={class:"list-group",id:"list-tab",role:"tablist"},S=["id","href","aria-controls","onClick"],C={class:"offcanvas offcanvas-end","data-bs-scroll":"true",tabindex:"-1",id:"jobcardServices","aria-labelledby":"jobcardServicesLabel"},$=(0,n._)("div",{class:"offcanvas-header"},[(0,n._)("h5",{class:"offcanvas-title",id:"jobcardServicesLabel"},"SELECT A SERVICE"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),T={class:"offcanvas-body"},E={class:"row"},D={class:"col-12"},H={class:"list-group",id:"list-tab",role:"tablist"},O={class:"d-flex me-4 mt-2"},U=(0,n.uE)('<h6> Abbreviations : <span class="fw-bold">BW</span> : <i>Body Works</i> , <span class="fw-bold">EW</span> : <i>Electrical Works</i>, <span class="fw-bold">TY</span> : <i>Tyres</i>, <span class="fw-bold">LC</span> : <i>Labour Cost</i>, <span class="fw-bold">SP</span> : <i>Spares</i>, <span class="fw-bold">FW</span> : <i>Fabrication Work</i>, <span class="fw-bold">OW</span> : <i>Other Works</i></h6>',1),j={class:"ms-auto"},A=(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,n._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,n._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),R=[A],z={key:0,class:"spinner-border text-white mt-1",role:"status",style:{width:"1.5rem",height:"1.5rem"}},M=(0,n._)("span",{class:"sr-only"},"Loading...",-1),L=[M],N={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-printer me-1"},J=(0,n._)("polyline",{points:"6 9 6 2 18 2 18 9"},null,-1),W=(0,n._)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},null,-1),P=(0,n._)("rect",{x:"6",y:"14",width:"12",height:"8"},null,-1),q=[J,W,P],I=(0,n._)("div",{class:"btn-group ms-2 me-4",role:"group","aria-label":"Filter Job Cards"},[(0,n._)("div",{class:"btn-group",role:"group","aria-label":"Filter Job Cards"})],-1),B=["onSubmit"],V=(0,n._)("h4",{class:"text-center"}," JOBCARD REGISTRATION",-1),K={class:"row mb-2"},Y={class:"col-md-4"},F=(0,n._)("label",{class:"form-label"},"Company ",-1),X={class:"col-md-4"},G=(0,n._)("label",{class:"form-label"},"Service Type",-1),Q=(0,n._)("option",{value:""},"Select a Service Type",-1),Z=["value"],tt={class:"col-md-4"},at=(0,n._)("label",{class:"form-label"},"Current Km of Service",-1),et={class:"col-md-4"},nt=(0,n._)("label",{class:"form-label"},"Next Km of Service",-1),st={class:"col-md-4"},lt=(0,n._)("label",{class:"form-label"},"Enter Date Created",-1),ot={class:"text-center gap-2 justify-content-end"},it=(0,n._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),rt=(0,n._)("div",{class:"text-end mb-2"},null,-1),dt={class:"row layout-top-spacing"},ct={class:"layout-spacing col-xl-12 col-lg-6 col-sm-12"},ut={class:"d-flex"},mt={class:"text-start"},pt={class:"ms-auto"},vt={key:0},ht={class:"panel p-0"},bt={class:"custom-table table3"},gt=["innerHTML"],_t={key:0},yt=(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-eye",viewBox:"0 0 16 16"},[(0,n._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),(0,n._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"})],-1),wt={class:"col-xl-12 col-lg-6 col-sm-12 layout-spacing"},ft={key:0},xt={class:"text-center"},kt={class:"panel p-0"},St={class:"custom-table table3"},Ct=["innerHTML"],$t={key:1},Tt={class:"text-center"},Et={class:"panel p-0"},Dt={class:"custom-table table3"},Ht=["innerHTML"],Ot={key:2},Ut={class:"text-center"},jt={class:"panel p-0"},At={class:"custom-table table3"},Rt=["innerHTML"];var zt={setup(t){const a=JSON.parse(localStorage.getItem("user")).permissions,e=(0,u.yj)(),d=(0,l.iH)(""),b=(0,l.iH)(""),A=(0,l.iH)(""),M=(0,l.iH)(!0),J=(0,l.iH)(!1),W=(0,l.iH)(!1),P=(0,l.iH)([]),zt=(0,n.f3)("showMessage"),Mt=(0,n.f3)("showError"),Lt=(0,n.f3)("formatNumber"),Nt=(0,n.f3)("tableShimmer");(0,r.j)({title:"Jobcard Lists"});const Jt=(0,l.iH)([]),Wt=async t=>{W.value=!0;try{const a=await Gt.get(`/jobcard-summary?asset_id=${t}`);Jt.value=a.data,await(0,n.Y3)(),Pt()}catch(a){Mt(a.message),console.error("Error fetching jobcard summary:",a)}},Pt=()=>{const t=Jt.value||[];W.value=!1;const a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a);const e=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Jobcard Summary</title>\n<style>\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }\n  .logo { width: 150px; height: auto; }\n  .company-title { text-align: center; margin-top: 5px; }\n  .company-title h2 { margin: 5px 0; }\n  .reg-info { position: absolute; top: 40px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; font-weight: normal; }\n  table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n  th, td { border: 1px solid #000; padding: 6px; text-align: center; }\n  th { background-color: #f8f8f8; }\n</style>\n</head>\n<body>\n\n<div class="header">\n  <img src="https://bushman.ink/copex.jpg" class="logo" />\n  <div class="reg-info">\n    TIN: 135-489-247<br>\n    VRN: 40-032826C\n  </div>\n</div>\n\n<div class="company-title">\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\n  <div>Mobile: 0713 000 777, 0657 111 555</div>\n</div>\n\n\n<table>\n  <thead>\n    <tr>\n      <th>${la.value.category.name}</th>\n      <th>TYPE</th>\n    </tr>\n  </thead>\n  <tbody>\n      <tr>\n        <td>${la.value.name}</td>\n        <td>${la.value.type_name}</td>\n      </tr>\n  </tbody>\n</table>\n\n<h2 style="text-align:center; margin-top: 20px;">Jobcard Summary</h2>\n\n<table>\n  <thead>\n    <tr>\n      <th>SN</th>\n      <th>Jobcard NO</th>\n      <th>Date Created</th>\n      <th>Service Type</th>\n      <th>Current Km Service</th>\n      <th>Next Km Service</th>\n      <th>Status</th>\n      <th>Total Sum</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${t.map(((t,a)=>`\n      <tr>\n        <td>${a+1}</td>\n        <td>${t.id}</td>\n        <td>${t.date_created}</td>\n        <td>${t.service_type}</td>\n        <td>${t.current_km_service}</td>\n        <td>${t.next_km_service}</td>\n        <td>${t.status_name}</td>\n        <td style="text-align:right">${parseFloat(t.total_sum).toLocaleString()}/=</td>\n      </tr>\n    `)).join("")}\n    <tr>\n      <td colspan="7" style="text-align:right"><strong>Grand Total</strong></td>\n      <td style="text-align:right"><strong>${t.reduce(((t,a)=>t+parseFloat(a.total_sum||0)),0).toLocaleString()}/=</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n\n\n\n</body>\n</html>\n`,n=a.contentWindow.document;n.open(),n.write(e),n.close(),a.onload=()=>{a.contentWindow.focus(),a.contentWindow.print(),setTimeout((()=>{document.body.removeChild(a)}),1e3)}},qt=(0,l.iH)(""),It=t=>{qt.value=t.toUpperCase()},Bt=(0,l.iH)(["Sno","card","name","date","service_type","current_km_svc","next_km_svc","status","actions"]),Vt=(0,l.iH)(["Sno","jobcard_id","spare","quantity","rate","amount"]),Kt=(0,l.iH)(["Sno","jobcard_id","service_type","tyre_no","quantity","rate","amount"]),Yt=(0,l.iH)(["Sno","jobcard_id","service_type","description","quantity","rate","amount"]),Ft=(0,l.iH)([]),Xt=(0,l.iH)({perPage:50,perPageValues:[50,100,200,500,1e3],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","vehicle_no","date","service_type","current_service_kms","next_service_kms","status"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),Gt=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),Qt=((0,l.iH)("JOBCARDS"),async()=>{try{const t=await Gt.get(`job-card?asset_id=${e.params.asset_id}`);Ft.value=t.data.map(((t,a)=>({...t,Sno:a+1,date:t.date_created,card:t.id,current_km_svc:t.current_km_of_service??"---",next_km_svc:t.next_km_of_service??"---",name:t.machine.name+" - "+t.machine.type_name,status:{key:t.status.name,class:t.status.color}}))),ia.value=Ft.value}catch(t){}}),Zt=(0,l.iH)(""),ta=()=>{J.value=!1,M.value=!0;const t={machine_id:e.params.asset_id,machine_name:"none",status_name:"Active",status_color:"primary",status_id:6,service_type:P.value.find((t=>t.id===d.value)).name,current_km_of_service:b.value,next_km_of_service:A.value,date_created:Zt.value,company_id:na.value.id,issuer_id:JSON.parse(localStorage.getItem("user")).id};Gt.post("/job-card",t).then((t=>{Qt(),zt("Jobcard registered successfully!"),M.value=!1})).catch((t=>{Mt(t.message),console.log(t),M.value=!1}))},aa=()=>{M.value=!0,Gt.get("/service-type").then((t=>{Array.isArray(t.data)?P.value=t.data:console.error("Invalid response format")})).catch((t=>{console.error("Error fetching user data:",t.message)})).finally((()=>{M.value=!1}))},ea=(0,l.iH)([]),na=(0,l.iH)(""),sa=async()=>{const t=await Gt.get("companies");ea.value=t.data},la=(0,l.iH)(""),oa=async()=>{const t=await Gt.get(`machines/${e.params.asset_id}`);la.value=t.data},ia=(0,l.iH)([]);(0,n.YP)(na,(t=>{ia.value=t?Ft.value.filter((a=>a.company_id===t.id)):Ft.value}));const ra=(0,l.iH)(""),da=async()=>{const t=await Gt.get(`asset-expenses?asset_id=${e.params.asset_id}`);ra.value=t.data},ca=async()=>{try{const t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);const a=`\n<!DOCTYPE html>\n<html>\n<head>\n<title>Asset Jobcards Report</title>\n<style>\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\n  .text-style { font-family: 'Courier New', monospace; }\n  .company-title { text-align: center; }\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\n  .asset-info { text-align: center; margin: 15px 0; font-size: 14px; }\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n  th, td { border: 0.5px solid #000; padding: 6px; }\n  th { background-color: #f8f8f8; font-weight: bold; }\n  .text-right { text-align: right; }\n  .text-center { text-align: center; }\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\n  @media print { body { margin: 10mm; } }\n</style>\n</head>\n<body>\n\n<div class="company-title text-style">\n  <i>\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\n  </i>\n</div>\n\n<hr style="margin-top:20px">\n\n<div class="title text-style">\n  ASSET JOBCARDS REPORT\n</div>\n\n<div class="asset-info">\n  <strong>${la.value?.category?.name||""} ${la.value?.name||""} - ${la.value?.type_name||""}</strong>\n</div>\n\n<hr>\n\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Jobcard ID</th>\n      <th>Service Type</th>\n      <th>Current KM</th>\n      <th>Next KM</th>\n      <th>Date Created</th>\n      <th>Status</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${ia.value.map(((t,a)=>`\n    <tr>\n      <td>${a+1}</td>\n      <td>${t.card||"--"}</td>\n      <td class="text-center">${t.service_type||"--"}</td>\n      <td>${t.current_km_of_service||"--"}</td>\n      <td>${t.next_km_of_service||"--"}</td>\n      <td class="text-center">${t.date_created||"--"}</td>\n      <td>${t.status?.key||"--"}</td>\n    </tr>\n    `)).join("")}\n  </tbody>\n</table>\n\n<h3 style="margin-top: 30px;">Expense Summary</h3>\n\n${ra.value?.tyres?.data?.length>0?`\n<h4>TYRES - Total: ${Lt(ra.value?.tyres?.total_amount||0)}</h4>\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Jobcard ID</th>\n      <th>Service Type</th>\n      <th>Tyre No</th>\n      <th>Quantity</th>\n      <th class="text-right">Rate</th>\n      <th class="text-right">Amount</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${ra.value.tyres.data.map(((t,a)=>`\n    <tr>\n      <td>${a+1}</td>\n      <td>${t.jobcard_id||"--"}</td>\n      <td class="text-center">${t.service_type||"--"}</td>\n      <td class="text-center">${t.tyre_no||"--"}</td>\n      <td>${t.quantity||"0"}</td>\n      <td class="text-right">${Lt(t.rate||0)}</td>\n      <td class="text-right">${Lt(t.amount||0)}</td>\n    </tr>\n    `)).join("")}\n  </tbody>\n</table>\n`:""}\n\n${ra.value?.item_usages?.data?.length>0?`\n<h4 style="margin-top: 20px;">SPARES - Total: ${Lt(ra.value?.item_usages?.total_amount||0)}</h4>\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Jobcard ID</th>\n      <th>Spare</th>\n      <th>Quantity</th>\n      <th class="text-right">Rate</th>\n      <th class="text-right">Amount</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${ra.value.item_usages.data.map(((t,a)=>`\n    <tr>\n      <td>${a+1}</td>\n      <td>${t.jobcard_id||"--"}</td>\n      <td>${t.spare||"--"}</td>\n      <td>${t.quantity||"0"}</td>\n      <td class="text-right">${Lt(t.rate||0)}</td>\n      <td class="text-right">${Lt(t.amount||0)}</td>\n    </tr>\n    `)).join("")}\n  </tbody>\n</table>\n`:""}\n\n${ra.value?.cost_notes?.data?.length>0?`\n<h4 style="margin-top: 20px;">OTHER COSTS - Total: ${Lt(ra.value?.cost_notes?.total_amount||0)}</h4>\n<table>\n  <thead>\n    <tr>\n      <th>No.</th>\n      <th>Jobcard ID</th>\n      <th>Service Type</th>\n      <th>Description</th>\n      <th>Quantity</th>\n      <th class="text-right">Rate</th>\n      <th class="text-right">Amount</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${ra.value.cost_notes.data.map(((t,a)=>`\n    <tr>\n      <td>${a+1}</td>\n      <td>${t.jobcard_id||"--"}</td>\n      <td>${t.service_type||"--"}</td>\n      <td>${t.description||"--"}</td>\n      <td>${t.quantity||"0"}</td>\n      <td class="text-right">${Lt(t.rate||0)}</td>\n      <td class="text-right">${Lt(t.amount||0)}</td>\n    </tr>\n    `)).join("")}\n  </tbody>\n</table>\n`:""}\n\n<table style="margin-top: 20px;">\n  <tbody>\n    <tr>\n      <td colspan="6" class="text-right"><strong>GRAND TOTAL:</strong></td>\n      <td class="text-right"><strong>${Lt(ra.value?.grand_total||0)}</strong></td>\n    </tr>\n  </tbody>\n</table>\n\n</body>\n</html>\n`,e=t.contentWindow.document;e.open(),e.write(a),e.close(),t.onload=()=>{t.contentWindow.focus(),t.contentWindow.print(),setTimeout((()=>{document.body.removeChild(t)}),1e3)}}catch(t){Mt(`Failed to print report: ${t.message}`)}};return(0,n.bv)((()=>{sa(),Qt(),oa(),aa(),da()})),(t,i)=>{const r=(0,n.up)("router-link"),u=(0,n.up)("v-client-table");return(0,n.wg)(),(0,n.iD)("div",m,[p,(0,n._)("div",v,[(0,n._)("div",h,[(0,n._)("button",{class:"btn btn-success me-2",onClick:i[0]||(i[0]=t=>ca())},g)])]),(0,n._)("div",_,[y,(0,n._)("div",w,[(0,n._)("div",f,[(0,n._)("div",x,[(0,n._)("div",k,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(ea.value,(t=>((0,n.wg)(),(0,n.iD)("a",{key:t.id,class:"list-group-item list-group-item-action",id:"company-link-"+t.id,"data-bs-toggle":"list",href:"#company-"+t.id,role:"tab","aria-controls":"company-"+t.id,"data-bs-dismiss":"offcanvas",onClick:a=>na.value=t},(0,s.zw)(t.short_name),9,S)))),128)),(0,n._)("a",{class:"list-group-item list-group-item-action",id:"company-link-all","data-bs-toggle":"list",href:"#company-all",role:"tab","aria-controls":"company-all","data-bs-dismiss":"offcanvas",onClick:i[1]||(i[1]=t=>na.value="")},"ALL COMPANIES")])])])])]),(0,n._)("div",C,[$,(0,n._)("div",T,[(0,n._)("div",E,[(0,n._)("div",D,[(0,n._)("div",H,[(0,n._)("a",{class:"list-group-item list-group-item-action",id:"company-link-all","data-bs-toggle":"list",href:"#company-all",role:"tab","aria-controls":"company-all","data-bs-dismiss":"offcanvas",onClick:i[2]||(i[2]=t=>It("tyres"))},"TYRES"),(0,n._)("a",{class:"list-group-item list-group-item-action",id:"company-link-all","data-bs-toggle":"list",href:"#company-all",role:"tab","aria-controls":"company-all","data-bs-dismiss":"offcanvas",onClick:i[3]||(i[3]=t=>It("spares"))},"SPARES"),(0,n._)("a",{class:"list-group-item list-group-item-action",id:"company-link-all","data-bs-toggle":"list",href:"#company-all",role:"tab","aria-controls":"company-all","data-bs-dismiss":"offcanvas",onClick:i[4]||(i[4]=t=>It("all"))},"ALL COSTS AND SERVICES")])])])])]),(0,n._)("div",O,[U,(0,n._)("div",j,[(0,l.SU)(a).includes("can_register_jobcard")?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"me-2 btn btn-primary me-2",onClick:i[5]||(i[5]=t=>J.value=!J.value)},R)):(0,n.kq)("",!0),(0,l.SU)(a).includes("can_print_asset_jobcards")?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-success",onClick:i[6]||(i[6]=t=>Wt((0,l.SU)(e).params.asset_id))},[W.value?((0,n.wg)(),(0,n.iD)("div",z,L)):((0,n.wg)(),(0,n.iD)("svg",N,q))])):(0,n.kq)("",!0),I])]),J.value?((0,n.wg)(),(0,n.iD)("form",{key:0,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,o.iM)(ta,["prevent"])},[V,(0,n._)("div",K,[(0,n._)("div",Y,[F,(0,n.Wm)((0,l.SU)(c()),{modelValue:na.value,"onUpdate:modelValue":i[7]||(i[7]=t=>na.value=t),options:ea.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select Company",searchable:!0},null,8,["modelValue","options"])]),(0,n._)("div",X,[G,(0,n.wy)((0,n._)("select",{class:"form-select","onUpdate:modelValue":i[8]||(i[8]=t=>d.value=t),required:""},[Q,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(P.value,(t=>((0,n.wg)(),(0,n.iD)("option",{key:t.id,value:t.id},(0,s.zw)(t.name),9,Z)))),128))],512),[[o.bM,d.value]])]),(0,n._)("div",tt,[at,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",placeholder:"Enter Current Km","onUpdate:modelValue":i[9]||(i[9]=t=>b.value=t)},null,512),[[o.nr,b.value]])]),(0,n._)("div",et,[nt,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",placeholder:"Enter Next Km","onUpdate:modelValue":i[10]||(i[10]=t=>A.value=t)},null,512),[[o.nr,A.value]])]),(0,n._)("div",st,[lt,(0,n.wy)((0,n._)("input",{type:"date",class:"form-control",placeholder:"Enter Next Km","onUpdate:modelValue":i[11]||(i[11]=t=>Zt.value=t)},null,512),[[o.nr,Zt.value]])])]),(0,n._)("div",ot,[(0,n._)("button",{type:"button",class:"btn btn-danger me-3",onClick:i[12]||(i[12]=t=>J.value=!1)},"Cancel"),it])],40,B)):(0,n.kq)("",!0),rt,(0,n._)("div",dt,[(0,n._)("div",ct,[(0,n._)("div",ut,[(0,n._)("h5",mt," JOBCARDS : "+(0,s.zw)((0,l.SU)(Lt)(ra.value?.grand_total||0)),1),(0,n._)("h5",pt,[la.value?((0,n.wg)(),(0,n.iD)("span",vt,(0,s.zw)(la.value.category.name)+" "+(0,s.zw)(la.value.name)+" - "+(0,s.zw)(la.value.type_name),1)):(0,n.kq)("",!0)])]),(0,n._)("div",ht,[(0,n._)("div",bt,[M.value?((0,n.wg)(),(0,n.iD)("div",{key:0,innerHTML:(0,l.SU)(Nt)()},null,8,gt)):((0,n.wg)(),(0,n.j4)(u,{key:1,data:ia.value,columns:Bt.value,options:Xt.value},{status:(0,n.w5)((t=>[(0,n._)("span",{class:(0,s.C_)(["badge inv-status","badge-"+t.row.status.class])},(0,s.zw)(t.row.status.key),3)])),service_type:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)(t.row.service_type)+" ",1),t.row.available_costnotes?((0,n.wg)(),(0,n.iD)("span",_t,"("+(0,s.zw)(t.row.available_costnotes)+")",1)):(0,n.kq)("",!0)])),actions:(0,n.w5)((t=>[(0,n.Wm)(r,{to:"/jobcard/"+t.row.id+"/"+t.row.machine_id,class:"text-primary"},{default:(0,n.w5)((()=>[yt])),_:2},1032,["to"])])),_:1},8,["data","columns","options"]))])])]),(0,n._)("div",wt,[ra.value?.tyres?.data.length>0?((0,n.wg)(),(0,n.iD)("div",ft,[(0,n._)("h5",xt," TYRES "+(0,s.zw)((0,l.SU)(Lt)(ra.value?.tyres?.total_amount||0)),1),(0,n._)("div",kt,[(0,n._)("div",St,[M.value?((0,n.wg)(),(0,n.iD)("div",{key:0,innerHTML:(0,l.SU)(Nt)()},null,8,Ct)):((0,n.wg)(),(0,n.j4)(u,{key:1,data:ra.value.tyres.data,columns:Kt.value,options:Xt.value},{Sno:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)(t.index++),1)])),rate:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)((0,l.SU)(Lt)(t.row.rate)),1)])),amount:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)((0,l.SU)(Lt)(t.row.amount)),1)])),_:1},8,["data","columns","options"]))])])])):(0,n.kq)("",!0),ra.value?.item_usages?.data.length>0?((0,n.wg)(),(0,n.iD)("div",$t,[(0,n._)("h5",Tt," SPARES "+(0,s.zw)((0,l.SU)(Lt)(ra.value?.item_usages?.total_amount||0)),1),(0,n._)("div",Et,[(0,n._)("div",Dt,[M.value?((0,n.wg)(),(0,n.iD)("div",{key:0,innerHTML:(0,l.SU)(Nt)()},null,8,Ht)):((0,n.wg)(),(0,n.j4)(u,{key:1,data:ra.value.item_usages.data,columns:Vt.value,options:Xt.value},{Sno:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)(t.index++),1)])),rate:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)((0,l.SU)(Lt)(t.row.rate)),1)])),amount:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)((0,l.SU)(Lt)(t.row.amount)),1)])),_:1},8,["data","columns","options"]))])])])):(0,n.kq)("",!0),ra.value?.cost_notes?.data.length>0?((0,n.wg)(),(0,n.iD)("div",Ot,[(0,n._)("h3",Ut," OTHER COSTS "+(0,s.zw)((0,l.SU)(Lt)(ra.value?.cost_notes?.total_amount||0)),1),(0,n._)("div",jt,[(0,n._)("div",At,[M.value?((0,n.wg)(),(0,n.iD)("div",{key:0,innerHTML:(0,l.SU)(Nt)()},null,8,Rt)):((0,n.wg)(),(0,n.j4)(u,{key:1,data:ra.value.cost_notes.data,columns:Yt.value,options:Xt.value},{Sno:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)(t.index++),1)])),rate:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)((0,l.SU)(Lt)(t.row.rate)),1)])),amount:(0,n.w5)((t=>[(0,n.Uk)((0,s.zw)((0,l.SU)(Lt)(t.row.amount)),1)])),_:1},8,["data","columns","options"]))])])])):(0,n.kq)("",!0)])])])}}};const Mt=zt;var Lt=Mt}}]);
//# sourceMappingURL=6401.e746a394.js.map