{"version":3,"file":"js/286.a1b94daa.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/labour.vue","webpack://cork-vue3/./src/views/masters/labour.vue?2115"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Labours</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n                            <button class=\"btn btn-primary \" @click=\"item_registration =! item_registration\">                           \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n  <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>  \r\n\r\n                    <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n <!-- item registration form starts -->\r\n <form v-if=\"item_registration\" class=\"mt-3 p-3 border rounded bg-white shadow\" @submit.prevent=\"registerLabour\">\r\n        <h4 class=\"text-center\">LABOUR REGISTRATION FORM</h4>\r\n        <div class=\"row mb-2\">\r\n    \r\n            <div class=\"col-md-12\">\r\n                <label class=\"form-label\">Labour Name</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Enter Labour Name\" v-model=\"name\" required>\r\n            </div>\r\n\r\n        </div>\r\n        <div class=\"text-center gap-2 justify-content-end\">\r\n            <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"item_registration = false\">Cancel</button>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n        </div>\r\n    </form>\r\n             <!-- item registration form ends-->\r\n      \r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"labours\" :columns=\"columns\" :options=\"table_option\" >\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.class\">{{ props.row.status.key }} </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n                                <!-- <a href=\"javascript:void(0)\" class=\"text-success\" title=\"Approve\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-check2-square\" viewBox=\"0 0 16 16\">\r\n                                        <path d=\"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z\"/>\r\n                                        <path d=\"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0\"/>\r\n                                    </svg>\r\n                                </a> -->\r\n\r\n                        \r\n                                    <a href=\"javascript:;\" class=\"edit me-3\" @click=\"edit_row(props.row)\">\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n                                <a href=\"javascript:;\" class=\"cancel\" @click=\"delete_row(props.row)\">\r\n                                            <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-danger\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                        </a>\r\n                              \r\n<!-- modal starts -->\r\n\r\n \r\n                                \r\n                            </template>\r\n                           <template #footer>\r\n                               <div class=\"modal-footer\">\r\n                                   <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n                                   <button type=\"button\" class=\"btn btn-primary\" @click=\"save_edit\" :disabled=\"isSaving\" >Save changes</button>\r\n                               </div>\r\n                           </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n <!-- Edit Labour Modal -->\r\n<div class=\"modal fade\" id=\"editModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"editModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-lg modal-dialog-scrollable\" role=\"document\"> <!-- Changed to modal-xl and added scrollable -->\r\n        <div class=\"modal-content\"> <!-- Added min-height -->\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"editModalLabel\">Edit Labour</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"editLabourName\">Labour Name</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"editLabourName\" v-model=\"editingRow.name\">\r\n                </div>\r\n                <!-- Add more content here as needed -->\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"save_edit\" :disabled=\"isSaving\">Save changes</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n   </div>\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const loadingIndicator = inject('loadingIndicator');\r\n\r\n    let editModal = null;\r\n    const editingRow = ref({});\r\n    const name = ref('');\r\n    const loading_spinner = ref(false);\r\n    const category = ref('');\r\n    const columns = ref(['SNo', 'name','actions']);\r\n    const labours = ref([]);\r\n    const item_registration = ref(false);\r\n    const description = ref('');\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [10, 20, 50],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const getLabours = () => {\r\n        loading_spinner.value = true;\r\n        axiosInstance.get('/labours').then((response) => {\r\n            labours.value = response.data.map((item, index) => ({\r\n                ...item,\r\n                SNo: index + 1\r\n            }));\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n    const registerLabour = () => {\r\n        item_registration.value = false;\r\n        loading_spinner.value = true;\r\n        const itemData = {\r\n            name: name.value,\r\n            category_id: category.value,\r\n            description: description.value,\r\n        };\r\n\r\n        axiosInstance\r\n            .post('/labours', itemData)\r\n            .then((response) => {\r\n                getLabours();\r\n                loading_spinner.value = false;\r\n                showMessage('Labour registered successfully!');\r\n                if (response.data.status === 201) {\r\n                } else {\r\n                    console.error(\"Error registering Order:\", response.data.message);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error registering Order:\", error.message);\r\n            });\r\n    };\r\n\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const isLoading = ref(false);\r\n\r\n\r\n    const delete_row = async (row) => {\r\n    if (window.Swal) {\r\n        window.Swal.fire({\r\n            title: 'Delete Item',\r\n            text: 'Are you sure you want to delete this item?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, delete it!'\r\n        }).then(async (result) => {\r\n            if (result.isConfirmed) {\r\n                isLoading.value = true;\r\n                try {\r\n\r\n                    await axiosInstance.delete(`/labours/${row.id}`, {\r\n                        method: 'DELETE',\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    });\r\n\r\n                    labours.value = labours.value.filter((d) => d.id !== row.id);\r\n                } catch (error) {\r\n                    console.error('Error deleting item:', error);\r\n                    // Show error message\r\n                    window.Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Error',\r\n                        text: 'Failed to delete item: ' + error.message,\r\n                        padding: '2em',\r\n                    });\r\n                } finally {\r\n                    isLoading.value = false;\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\n\r\n    const edit_row = (row) => {\r\n        editingRow.value = { ...row }; // Create a copy of the row to edit\r\n        editModal.show();\r\n    };\r\n\r\n    const save_edit = async () => {\r\n        editModal.hide();\r\n        if (loading_spinner.value) return;\r\n        try {\r\n            \r\n            loading_spinner.value = true;\r\n            const response = await axiosInstance.put(`/labours/${editingRow.value.id}`, {\r\n                name: editingRow.value.name\r\n            });\r\n            \r\n            if (response.status === 200) {\r\n                const index = labours.value.findIndex(item => item.id === editingRow.value.id);\r\n                if (index !== -1) {\r\n                    labours.value[index].name = editingRow.value.name;\r\n                }\r\n                showMessage('Labour updated successfully!');\r\n            }\r\n           \r\n        } catch (error) {\r\n            showError(\"Error updating labour: \" + (error.response?.data?.message || error.message));\r\n        } finally {\r\n            loading_spinner.value = false;\r\n        }\r\n      \r\n    }; \r\n\r\n    onMounted(() => {\r\n        getLabours();\r\n        editModal = new bootstrap.Modal(document.getElementById('editModal'));\r\n    });\r\n</script>\r\n","import script from \"./labour.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./labour.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./labour.vue?vue&type=style&index=0&id=4c186f4c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","loadingIndicator","inject","editModal","editingRow","ref","name","loading_spinner","category","columns","labours","item_registration","description","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","getLabours","value","get","then","response","data","map","item","index","SNo","registerLabour","itemData","category_id","post","showMessage","status","console","error","message","catch","showError","isLoading","delete_row","async","window","Swal","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","delete","row","id","method","headers","d","padding","edit_row","show","save_edit","hide","put","findIndex","onMounted","bootstrap","Modal","document","getElementById","__exports__"],"sourceRoot":""}