"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[6032],{46032:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var n=a(66252),o=a(2262),l=a(3577),r=a(49963),s=a(56296),i=a(87066);const c={class:"layout-px-spacing"},d={class:"seperator-header layout-top-spacing"},p={class:"d-flex justify-content-between mt-3"},u=(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,n._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1),v=[u],h={class:"d-flex align-items-center"},m={class:"dropdown me-3"},g=(0,n._)("option",{value:"all"},"All Types",-1),w=["value"],b=(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-printer me-1"},[(0,n._)("polyline",{points:"6 9 6 2 18 2 18 9"}),(0,n._)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),(0,n._)("rect",{x:"6",y:"14",width:"12",height:"8"})],-1),f=(0,n.Uk)(" Print Report "),y=[b,f],_={class:"mt-3 mx-2"},k={key:0,class:"text-center text-primary mt-2 mb-2"},x=(0,n._)("span",{class:"text-sm"},[(0,n._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),(0,n.Uk)(" Please wait ... ")],-1),C=[x],A={class:"row layout-top-spacing"},H={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},D={class:"panel br-6 p-0"},$={class:"custom-table"},j={href:"javascript:void(0);",title:"Delete","data-bs-toggle":"tooltip","data-bs-placement":"top"},E=["onClick"],P=(0,n._)("polyline",{points:"3 6 5 6 21 6"},null,-1),S=(0,n._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),L=[P,S];var R={setup(e){(0,s.j)({title:"Activity Logs"});const t=(0,n.f3)("showMessage"),a=(0,o.iH)(["id","sender_name","description","remark_type","type_id","remarker_id","status","created_at","updated_at","actions"]),u=(0,o.iH)([]),b=(0,o.iH)([]),f=(0,o.iH)(!1),x=(0,o.iH)("all"),P=(0,n.Fl)((()=>"all"===x.value?u.value:u.value.filter((e=>e.type===x.value)))),S=(0,n.Fl)((()=>{const e=b.value.map((e=>e.type));return[...new Set(e)].filter((e=>e))})),R=()=>{"all"===x.value?u.value=[...b.value]:u.value=b.value.filter((e=>e.type===x.value)),u.value=u.value.map(((e,t)=>({...e,SNo:t+1})))},U=e=>{confirm("Are you sure you want to delete this remark?")&&(f.value=!0,z.delete(`/${e}`).then((e=>{B(),f.value=!1,200===e.status?t("Remark Deleted successfully"):(M("Fail to Delete Remark"),console.error("Error deleting remark:",e.data.message))})).catch((e=>{console.error("Error deleting remark:",e.message)})))},M=e=>{window.Swal?window.Swal.fire({icon:"error",title:"Error",text:e,padding:"2em"}):alert("Error: "+e)},T=(0,o.iH)({perPage:10,perPageValues:[5,10,20,50],skin:"table table-hover",pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},sortable:["id","description","remark_type","type_id","remarker_id","status","created_at","updated_at","sender_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},resizableColumns:!1}),z=i.Z.create({baseURL:"https://bcftrack.trustdigital.space/public/api/v1/remark",headers:{"Content-Type":"application/json",Accept:"application/json"}}),F=()=>{const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const t=a.value,n=" "===x.value?"All Types":` ${x.value}`;let o=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Activity Logs Report- ${n}</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n            }\n            h1 {\n              text-align: center;\n              margin-bottom: 10px;\n            }\n            h2 {\n              text-align: center;\n              margin-bottom: 20px;\n              font-size: 16px;\n              color: #666;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-bottom: 20px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px;\n              text-align: left;\n            }\n            th {\n              background-color: #f2f2f2;\n              font-weight: bold;\n            }\n            tr:nth-child(even) {\n              background-color: #f9f9f9;\n            }\n            .print-date {\n              text-align: right;\n              margin-bottom: 20px;\n              font-size: 12px;\n            }\n          </style>\n        </head>\n        <body>\n          <h1>Activity Logs Report</h1> <br> <br>\n          <h2>${n}</h2>\n          <div class="print-date">Printed on: ${(new Date).toLocaleString()}</div>\n          <table>\n            <thead>\n              <tr>\n                ${t.map((e=>`<th>${V(e)}</th>`)).join("")}\n              </tr>\n            </thead>\n            <tbody>\n      `;P.value.forEach((e=>{o+="<tr>",t.forEach((t=>{o+="quantity"===t?`<td>${e[t]||0}</td>`:`<td>${e[t]||""}</td>`})),o+="</tr>"})),o+="\n            </tbody>\n          </table>\n        </body>\n        </html>\n      ";const l=e.contentWindow.document;l.open(),l.write(o),l.close(),e.onload=()=>{e.contentWindow.focus(),e.contentWindow.print(),setTimeout((()=>{document.body.removeChild(e)}),1e3)}},V=e=>e.replace(/_/g," ").replace(/-/g," ").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),W=(0,o.iH)([""]),B=async()=>{f.value=!0;try{const e=await z.get("");console.log(e.data.data),W.value=e.data.data,e.data&&"success"===e.data.status&&Array.isArray(e.data.data)}catch(e){M(e.message||"Failed to fetch data"),console.error("API error:",e)}finally{f.value=!1}};return(0,n.bv)((()=>{B()})),(e,t)=>{const s=(0,n.up)("v-client-table");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",d,[(0,n._)("div",p,[(0,n._)("button",{class:"btn btn-dark me-2 px-3",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},v),(0,n._)("div",h,[(0,n._)("div",m,[(0,n.wy)((0,n._)("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>x.value=e),onChange:R},[g,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,o.SU)(S),(e=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:e},(0,l.zw)(e),9,w)))),128))],544),[[r.bM,x.value]])]),(0,n._)("button",{class:"btn btn-success",onClick:F},y)])])]),(0,n._)("div",_,[f.value?((0,n.wg)(),(0,n.iD)("div",k,C)):(0,n.kq)("",!0)]),(0,n._)("div",A,[(0,n._)("div",H,[(0,n._)("div",D,[(0,n._)("div",$,[(0,n.Wm)(s,{data:W.value,columns:a.value,options:T.value},{actions:(0,n.w5)((e=>[(0,n._)("a",j,[((0,n.wg)(),(0,n.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-danger",onClick:t=>{U(e.row.id)}},L,8,E))])])),_:1},8,["data","columns","options"])])])])])])}}};const U=R;var M=U}}]);
//# sourceMappingURL=6032.f4e47f9b.js.map