"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[1061],{31061:function(e,a,l){l.r(a),l.d(a,{default:function(){return Ge}});l(26699);var t=l(66252),s=l(2262),i=l(3577),o=l(49963),c=l(26212),r=l.n(c),n=l(56296),d=l(87066);const u=e=>((0,t.dD)("data-v-0c7a7da7"),e=e(),(0,t.Cn)(),e),m={class:"layout-px-spacing"},v=u((()=>(0,t._)("ul",{class:"navbar-nav flex-row"},[(0,t._)("li",null,[(0,t._)("div",{class:"page-header"},[(0,t._)("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[(0,t._)("ol",{class:"breadcrumb"},[(0,t._)("li",{class:"breadcrumb-item"},[(0,t._)("a",{href:"javascript:;"},"Masters")]),(0,t._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,t._)("span",null,"Assets")])])])])])],-1))),p=["innerHTML"],b={key:1,class:"seperator-header layout-top-spacing"},_={class:"d-flex"},y={class:"d-flex justify-content-between align-items-center mb-4 mt-3"},g={class:"d-flex align-items-center gap-3"},h=u((()=>(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,t._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1))),w=[h],f=u((()=>(0,t._)("i",{class:"bi bi-plus me-2"},null,-1))),k=(0,t.Uk)("Add New "),x=[f,k],C={class:"ms-auto col-xl-5 col-lg-6 col-md-8 col-sm-10"},H={class:"widget-content p-4"},S={class:"row gy-3"},V={class:"col-md-3 col-sm-6 col-6"},U={class:"widget widget-statistics h-100 shadow card"},M=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"All",-1))),T={class:"w-stats text-info fs-3 fw-bold"},q={class:"col-md-3 col-sm-6 col-6"},A={class:"widget widget-statistics h-100 shadow card"},R=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"Total Machines",-1))),L={class:"w-stats text-primary fs-3 fw-bold"},E={class:"col-md-3 col-sm-6 col-6"},I={class:"widget widget-statistics h-100 shadow card"},N=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"Total Vehicles",-1))),D={class:"w-stats text-success fs-3 fw-bold"},j={class:"col-md-3 col-sm-6 col-6"},z={class:"widget widget-statistics h-100 shadow card"},W=u((()=>(0,t._)("p",{class:"w-title mb-2 text-muted"},"Total Supervision",-1))),O={class:"w-stats text-dark fs-3 fw-bold"},B={class:"mt-3 mx-2"},P=["onSubmit"],$=u((()=>(0,t._)("h3",{class:"text-center"},"MACHINE REGISTRATION ",-1))),Z={class:"row mb-2"},F={class:"col-md-4"},G=u((()=>(0,t._)("label",{class:"form-label"},"Registration No",-1))),J={class:"col-md-4"},K=u((()=>(0,t._)("label",{class:"form-label"},"Category ",-1))),Q={class:"col-md-4"},X=u((()=>(0,t._)("label",{class:"form-label"},"Select Type ",-1))),Y={class:"row mb-2"},ee={class:"col-md-4"},ae=u((()=>(0,t._)("label",{class:"form-label"},"Average Ratio",-1))),le={class:"col-md-4"},te=u((()=>(0,t._)("label",{class:"form-label"},"Capacity",-1))),se={class:"col-md-4"},ie=u((()=>(0,t._)("label",{class:"form-label"},"Reserve Litre",-1))),oe=u((()=>(0,t._)("div",{class:"d-flex gap-2 justify-content-end"},[(0,t._)("button",{type:"submit",class:"btn btn-primary"},"Register"),(0,t._)("button",{type:"button",class:"btn btn-danger",onclick:"document.getElementById('consumer').style.display='none'"},"Cancel")],-1))),ce={class:"toast-container position-fixed top-0 end-0 p-3",style:{"z-index":"11"}},re={class:"toast align-items-center text-dark border-0",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"toast",style:{"background-color":"#afe8fa"}},ne=u((()=>(0,t._)("div",{class:"d-flex"},[(0,t._)("div",{class:"toast-body"}," Registration successful! Redirecting to user/home... "),(0,t._)("button",{type:"button",class:"btn-close btn-close-dark me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})],-1))),de=[ne],ue={key:2,class:"row layout-top-spacing"},me={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ve={class:"panel br-6 p-0"},pe={class:"custom-table"},be={class:"actions text-center"},_e=["onClick"],ye=u((()=>(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-success"},[(0,t._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,t._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1))),ge=[ye],he=(0,t.Uk)(" FUEL CONSUMPTION "),we={class:"modal fade mymodal",id:"asset-edit-modal","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editAssetModalLabel","aria-hidden":"true"},fe={class:"modal-dialog modal-xl"},ke={class:"modal-content"},xe={class:"modal-header"},Ce=u((()=>(0,t._)("h1",{class:"modal-title fs-5",id:"editAssetModalLabel"},"Edit Asset",-1))),He={class:"modal-body"},Se={class:"row mb-3"},Ve={class:"col-md-3"},Ue=u((()=>(0,t._)("label",{class:"form-label"},"Name",-1))),Me={class:"col-md-3"},Te=u((()=>(0,t._)("label",{class:"form-label"},"Category",-1))),qe={class:"col-md-3"},Ae=u((()=>(0,t._)("label",{class:"form-label"},"Type",-1))),Re={class:"col-md-3"},Le=u((()=>(0,t._)("label",{class:"form-label"},"Ratio",-1))),Ee={class:"col-md-4"},Ie=u((()=>(0,t._)("label",{class:"form-label"},"Capacity",-1))),Ne={class:"col-md-4"},De=u((()=>(0,t._)("label",{class:"form-label"},"Reserve Litre",-1))),je={class:"col-md-4"},ze=u((()=>(0,t._)("label",{class:"form-label"},"Consuption Type",-1))),We={class:"modal-footer"},Oe=["disabled"],Be={key:0,class:"spinner-border spinner-border-sm text-white me-2",role:"status"},Pe={key:1};var $e={setup(e){(0,n.j)({title:"Default Order Sorting Table"});const a=(0,s.iH)(""),l=(0,s.iH)(null),c=(0,s.iH)(!1),u=(0,s.iH)([]),h=(0,s.iH)([]),f=JSON.parse(localStorage.getItem("user")).permissions,k=(0,s.iH)(["SNo","id","name","fuel_type","type","category","consuption","capacity","ratio","reserve_litre","actions"]),ne=((0,s.iH)([]),(0,s.iH)([])),ye=(0,s.iH)(!1),$e=(0,s.iH)(!1),Ze=(0,s.iH)(""),Fe=(0,t.f3)("loadingIndicator"),Ge=(0,t.f3)("showMessage"),Je=(0,t.f3)("showError"),Ke=(0,s.iH)({perPage:100,perPageValues:[100,200,500],skin:"table table-hover",columnsClasses:{actions:"actions text-center"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},sortable:["SNo","name","type","ratio","capacity","reserve_litre"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},resizableColumns:!1}),Qe=d.Z.create({baseURL:"https://bushman.ink/api/v1/"}),Xe=async()=>{ye.value=!0,Qe.get("/machines").then((e=>{na.value=e.data.filter((e=>1===e.category_id)).length,ra.value=e.data.filter((e=>2===e.category_id)).length,da.value=e.data.filter((e=>3===e.category_id)).length,ua.value=e.data.length,Array.isArray(e.data)&&(h.value=e.data.map(((e,a)=>({...e,SNo:a+1,id:e.id,name:e.name,type:e.type_name,make:e.make,fuel_type:e.fuel_type,model:e.model,type_id:e.type_id,ratio:e.ratio,category:1===e.category_id?"machine":2===e.category_id?"vehicle":3===e.category_id?"supervision":"no category",capacity:e.capacity,category_id:e.category_id,reserve_litre:e.reserve_litre,consuption:e.consuption_type}))),u.value=[...h.value])})).catch((e=>{console.error("Error fetching machine data:",e.message)})).finally((()=>{ye.value=!1}))},Ye=()=>{l.value=null,u.value=[...h.value],c.value=!1},ea=(e,t)=>{l.value===e?(l.value=null,u.value=[...h.value],c.value=!1):(l.value=e,u.value=h.value.filter((a=>a.category_id===e)),c.value=!0,a.value=t)},aa=()=>{ye.value=!0,Qe.get("/machine-types").then((e=>{Array.isArray(e.data)?ne.value=e.data:console.error("Invalid response format")})).catch((e=>{console.error("Error fetching machine types:",e.message)})).finally((()=>{ye.value=!1}))},la=(0,s.iH)(""),ta=(0,s.iH)(""),sa=(0,s.iH)(""),ia=(0,s.iH)(""),oa=(0,s.iH)(""),ca=(0,s.iH)(""),ra=(0,s.iH)(0),na=(0,s.iH)(0),da=(0,s.iH)(0),ua=(0,s.iH)(0),ma=()=>{$e.value=!1,ye.value=!0;const e={name:la.value,type_name:ta.value.name,type_id:ta.value.id,category_id:ca.value.id,ratio:sa.value,capacity:ia.value,reserve_litre:oa.value};Qe.post("/machines",e).then((e=>{pa(),Xe(),ye.value=!1,console.log("type name",ta.value.name)})).catch((e=>{console.error("Error registering machine",e)}))},va=async()=>{ye.value=!0;const e={name:la.value,type_name:ta.value.name,type_id:ta.value.id,category_id:ca.value,ratio:sa.value,capacity:ia.value,reserve_litre:oa.value,consuption_type:Ze.value.name};try{await Qe.put(`/machines/${ba.value}`,e);pa(),Xe(),document.getElementById("close_editing").click(),Ge("Updated successfully")}catch(a){console.error(a),Je(a.message)}finally{ye.value=!1}},pa=()=>{la.value="",ca.value="",ta.value="",sa.value="",ia.value="",oa.value=""},ba=(0,s.iH)(null),_a=e=>{ba.value=e.id,la.value=e.name,ca.value=e.category_id;const a=ne.value.find((a=>a.id===e.type_id));ta.value=a||"",sa.value=e.ratio,ia.value=e.capacity,oa.value=e.reserve_litre};(0,t.bv)((()=>{Xe(),aa()}));(0,s.iH)(null);return(e,a)=>{const c=(0,t.up)("router-link"),n=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",m,[((0,t.wg)(),(0,t.j4)(t.lR,{to:"#breadcrumb"},[v])),ye.value?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"mt-5",innerHTML:(0,s.SU)(Fe)()},null,8,p)):(0,t.kq)("",!0),ye.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",b,[(0,t._)("div",_,[(0,t._)("div",y,[(0,t._)("div",g,[(0,t._)("button",{class:"btn btn-dark px-3 py-2",onClick:a[0]||(a[0]=a=>e.$router.go(-1))},w),(0,t._)("button",{class:"btn btn-primary px-4 py-2",onClick:a[1]||(a[1]=e=>$e.value=!$e.value)},x)])]),(0,t._)("div",C,[(0,t._)("div",{class:"widget widget-statistics h-100 shadow card",onClick:a[5]||(a[5]=(...a)=>e.navigateToMachines&&e.navigateToMachines(...a)),style:{cursor:"pointer"}},[(0,t._)("div",H,[(0,t._)("div",S,[(0,t._)("div",V,[(0,t._)("div",U,[(0,t._)("div",{class:(0,i.C_)(["w-detail",{"active-filter":null===l.value}]),onClick:Ye},[M,(0,t._)("p",T,(0,i.zw)(ua.value),1)],2)])]),(0,t._)("div",q,[(0,t._)("div",A,[(0,t._)("div",{class:(0,i.C_)(["w-detail",{"active-filter":1===l.value}]),onClick:a[2]||(a[2]=e=>ea(1,"machine"))},[R,(0,t._)("p",L,(0,i.zw)(na.value),1)],2)])]),(0,t._)("div",E,[(0,t._)("div",I,[(0,t._)("div",{class:(0,i.C_)(["w-detail",{"active-filter":2===l.value}]),onClick:a[3]||(a[3]=e=>ea(2,"vehicle"))},[N,(0,t._)("p",D,(0,i.zw)(ra.value),1)],2)])]),(0,t._)("div",j,[(0,t._)("div",z,[(0,t._)("div",{class:(0,i.C_)(["w-detail",{"active-filter":3===l.value}]),onClick:a[4]||(a[4]=e=>ea(3,"supervision"))},[W,(0,t._)("p",O,(0,i.zw)(da.value),1)],2)])])])])])])])])),(0,t._)("div",B,[$e.value?((0,t.wg)(),(0,t.iD)("form",{key:0,class:"p-3 border rounded bg-white shadow",id:"consumer",onSubmit:(0,o.iM)(ma,["prevent"])},[$,(0,t._)("div",Z,[(0,t._)("div",F,[G,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>la.value=e),name:"Machine_name",required:""},null,512),[[o.nr,la.value]])]),(0,t._)("div",J,[K,(0,t.Wm)((0,s.SU)(r()),{modelValue:ca.value,"onUpdate:modelValue":a[7]||(a[7]=e=>ca.value=e),options:[{id:"1",name:"Machine"},{id:"2",name:"Vehicle"},{id:"3",name:"Supervision"}],label:"name","track-by":"id",placeholder:"Select Category",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue"])]),(0,t._)("div",Q,[X,(0,t.Wm)((0,s.SU)(r()),{modelValue:ta.value,"onUpdate:modelValue":a[8]||(a[8]=e=>ta.value=e),options:ne.value,label:"name","track-by":"id",placeholder:"Select Type",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue","options"])])]),(0,t._)("div",Y,[(0,t._)("div",ee,[ae,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=e=>sa.value=e),name:"ratio",step:"any"},null,512),[[o.nr,sa.value]])]),(0,t._)("div",le,[te,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[10]||(a[10]=e=>ia.value=e),name:"capacity",required:"",step:"any"},null,512),[[o.nr,ia.value]])]),(0,t._)("div",se,[ie,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[11]||(a[11]=e=>oa.value=e),name:"reserve_litre",required:"",step:"any"},null,512),[[o.nr,oa.value]])])]),oe],40,P)):(0,t.kq)("",!0)]),(0,t._)("div",ce,[(0,t._)("div",re,de,512)]),ye.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",ue,[(0,t._)("div",me,[(0,t._)("div",ve,[(0,t._)("div",pe,[(0,t.Wm)(n,{data:u.value,columns:k.value,options:Ke.value},{actions:(0,t.w5)((e=>[(0,t._)("div",be,[(0,s.SU)(f).includes("is_programmer")?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:;",class:"edit me-3",onClick:a=>_a(e.row),"data-bs-toggle":"modal","data-bs-target":"#asset-edit-modal"},ge,8,_e)):(0,t.kq)("",!0),e.row.consumptions_count?((0,t.wg)(),(0,t.j4)(c,{key:1,to:`/assets/fuel-statement/${e.row.id}`,href:"javascript:;",class:"edit me-3 btn btn-primary"},{default:(0,t.w5)((()=>[he])),_:2},1032,["to"])):(0,t.kq)("",!0)])])),_:1},8,["data","columns","options"])])])])])),(0,t._)("div",we,[(0,t._)("div",fe,[(0,t._)("div",ke,[(0,t._)("div",xe,[Ce,(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:a[12]||(a[12]=e=>pa())})]),(0,t._)("form",{onSubmit:a[21]||(a[21]=(0,o.iM)((e=>va()),["prevent"]))},[(0,t._)("div",He,[(0,t._)("div",Se,[(0,t._)("div",Ve,[Ue,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=e=>la.value=e)},null,512),[[o.nr,la.value]])]),(0,t._)("div",Me,[Te,(0,t.Wm)((0,s.SU)(r()),{modelValue:ca.value,"onUpdate:modelValue":a[14]||(a[14]=e=>ca.value=e),options:[{id:"1",name:"Machine"},{id:"2",name:"Vehicle"},{id:"3",name:"Supervision"}],label:"name","track-by":"id",placeholder:"Select Category",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue"])]),(0,t._)("div",qe,[Ae,(0,t.Wm)((0,s.SU)(r()),{modelValue:ta.value,"onUpdate:modelValue":a[15]||(a[15]=e=>ta.value=e),options:ne.value,label:"name","track-by":"id",placeholder:"Select Type",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue","options"])]),(0,t._)("div",Re,[Le,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control bg-white",step:"any","onUpdate:modelValue":a[16]||(a[16]=e=>sa.value=e)},null,512),[[o.nr,sa.value]])]),(0,t._)("div",Ee,[Ie,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control bg-white",step:"any","onUpdate:modelValue":a[17]||(a[17]=e=>ia.value=e)},null,512),[[o.nr,ia.value]])]),(0,t._)("div",Ne,[De,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control bg-white","onUpdate:modelValue":a[18]||(a[18]=e=>oa.value=e)},null,512),[[o.nr,oa.value]])]),(0,t._)("div",je,[ze,(0,t.Wm)((0,s.SU)(r()),{modelValue:Ze.value,"onUpdate:modelValue":a[19]||(a[19]=e=>Ze.value=e),options:[{id:"1",name:"Km/Litre"},{id:"2",name:"Litre/hr"}],label:"name","track-by":"id",placeholder:"Select Consumption Type",searchable:!0,"close-on-select":!0,required:""},null,8,["modelValue"])])])]),(0,t._)("div",We,[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:a[20]||(a[20]=e=>pa()),id:"close_editing"},"Close"),(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:ye.value},[ye.value?((0,t.wg)(),(0,t.iD)("span",Be)):((0,t.wg)(),(0,t.iD)("span",Pe,"Edit"))],8,Oe)])],32)])])])])}}},Ze=l(83744);const Fe=(0,Ze.Z)($e,[["__scopeId","data-v-0c7a7da7"]]);var Ge=Fe}}]);
//# sourceMappingURL=1061.50f443e0.js.map