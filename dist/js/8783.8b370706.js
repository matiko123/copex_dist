"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[8783],{98783:function(a,e,l){l.r(e),l.d(e,{default:function(){return La}});l(26699);var t=l(66252),s=l(3577),o=l(2262),n=l(49963),i=l(87066),d=l(56296),r=l(26212),u=l.n(r);const c={class:"layout-px-spacing"},v=(0,t.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">HR</a></li><li class="breadcrumb-item active" aria-current="page"><span>Leave</span></li><li class="breadcrumb-item active" aria-current="page"><span>Request</span></li></ol></nav></div></li></ul>',1),p={class:"navbar-nav flex-row ms-auto"},m={class:"nav-item more-dropdown"},b={class:"dropdown custom-dropdown-icon"},_=(0,t._)("a",{href:"javascript:;",class:"nav-link dropdown-toggle",id:"ddlSettings","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,t._)("span",null,"Select a company"),(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},[(0,t._)("polyline",{points:"6 9 12 15 18 9"})])],-1),w={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"ddlSettings"},g=(0,t._)("a",{class:"dropdown-item","data-value":"Mail",href:"javascript:void(0);"},"BUSHMAN SAFARI",-1),h=[g],y=(0,t._)("a",{class:"dropdown-item","data-value":"Settings",href:"javascript:void(0);"},"COPEX CONTRACTORS",-1),k=[y],f={class:"text-center"},S={class:"d-flex me-4 mt-2"},E={class:"ms-auto"},C=["disabled"],H=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,t._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),R=[H],x=["disabled"],M=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,t._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1),L=[M],A={key:0,class:"row"},V={class:"col-md-3"},U={class:"form-group"},z=(0,t._)("label",{class:"form-label"},"Select Employee",-1),q={class:"col-md-3"},D={class:"form-group"},T=(0,t._)("label",{class:"form-label"},"Leave Type",-1),j={class:"col-md-2"},O={class:"form-group"},B=(0,t._)("label",{class:"form-label"},"Start Date",-1),P={class:"col-md-2"},I={class:"form-group"},N=(0,t._)("label",{class:"form-label"},"End Date",-1),Q={class:"col-md-2"},Y={class:"form-group"},F=(0,t._)("label",{class:"form-label invisible"},"Submit",-1),W=["disabled"],$=["innerHTML"],X={key:1,class:"row layout-top-spacing"},J={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},K={class:"panel p-0"},Z={class:"custom-table table3"},G=["onClick"],aa=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-eye",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),(0,t._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"})],-1),ea=[aa],la={class:"modal fade mymodal",id:"edit","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ta={class:"modal-dialog modal-xl"},sa={class:"modal-content"},oa=(0,t._)("div",{class:"modal-header"},[(0,t._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"LEAVE APPROVAL REQUEST"),(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close-approval"})],-1),na={class:"modal-body"},ia={class:"row layout-top-spacing"},da={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ra={class:"panel p-0"},ua={key:0,class:"custom-table table3"},ca={class:"table table-bordered table-striped"},va=(0,t._)("thead",null,[(0,t._)("tr",{class:"text-dark"},[(0,t._)("th",null,"Employee"),(0,t._)("th",null,"Leave Type"),(0,t._)("th",null,"Start Date"),(0,t._)("th",null,"End Date"),(0,t._)("th",null,"Leave Days"),(0,t._)("th",null,"Status")])],-1),pa=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-pencil-square text-primary",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),(0,t._)("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"})],-1),ma={key:0,colspan:"5"},ba={class:"d-flex justify-content-center mb-3"},_a={key:0,class:"btn-group"},wa=["disabled"],ga=["disabled"],ha=["disabled"],ya=["disabled"],ka={key:0,class:"mb-2 text-center"},fa={key:1,class:"input-group"},Sa=["placeholder"],Ea=["disabled"],Ca=["innerHTML"],Ha={key:1},Ra=(0,t._)("div",{class:"modal-footer"},[(0,t._)("button",{type:"button",class:"btn btn-danger btn-sm py-2 px-2","data-bs-dismiss":"modal"},"Close")],-1);var xa={setup(a){(0,d.j)({title:"Custom Table"});const e=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),l=(0,o.iH)(!1),r=(0,o.iH)(!1),g=JSON.parse(localStorage.getItem("user")).permissions,y=(0,t.f3)("printLeaveRequests"),H=(0,t.f3)("showMessage"),M=(0,t.f3)("waitIndicator"),aa=(0,t.f3)("showError"),xa=(0,o.iH)(!1),Ma=(0,o.iH)(["Sno","employee","type","start_date","end_date","leave_days","status","actions"]),La=((0,o.iH)([]),(0,o.iH)({perPage:20,perPageValues:[20,50,100],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","service_name"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1})),Aa=(0,o.iH)(""),Va=a=>{Aa.value=a,Oa(),Ia()},Ua=(0,o.iH)(!1),za=(0,o.iH)(""),qa=(0,o.iH)(""),Da=(0,o.iH)(""),Ta=async()=>{const a={employee_id:za.value.id,leave_type_id:Wa.value.id,start_date:qa.value,end_date:Da.value};try{await e.post("employee-leave",a);H("Leave Updated"),Ua.value=!Ua.value,Oa()}catch(l){aa(l.message),console.log(l)}},ja=(0,o.iH)([]),Oa=async()=>{r.value=!0;const a=[2,14,17];try{const l=await e.get(`employee-leave?company_id=${Aa.value}`,{params:{status_id:a}});ja.value=l.data.map(((a,e)=>{const l=new Date(a.start_date),t=new Date(a.end_date),s=Math.ceil((t-l)/864e5)+1;return{...a,Sno:e+1,employee:a.employee.name,leave_days:s,type:a.leave_type.name}}))}catch(l){aa(l.message),console.log(l)}finally{r.value=!1}},Ba=(0,o.iH)(""),Pa=(0,o.iH)([]),Ia=async()=>{const a=await e.get(`employees?company_id=${Aa.value}`);Pa.value=a.data},Na=(0,o.iH)(""),Qa=(0,o.iH)(""),Ya=async()=>{const a={leave_type_id:Wa.value.id,status_id:Ba.value,remark:Na.value};try{await e.put(`employee-leave/${Qa.value.id}`,a);H("Confirmed"),document.getElementById("close-approval").click(),Oa()}catch(l){aa(l.message),console.log(l)}},Fa=(0,o.iH)([]),Wa=(0,o.iH)(""),$a=async()=>{try{const a=await e.get("leave-types");Fa.value=a.data}catch(a){aa(a.message),console.log(a)}};return(0,t.bv)((()=>{$a()})),(a,e)=>{const i=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",c,[v,((0,t.wg)(),(0,t.j4)(t.lR,{to:"#breadcrumb"},[(0,t._)("ul",p,[(0,t._)("li",m,[(0,t._)("div",b,[_,(0,t._)("ul",w,[(0,t._)("li",{onClick:e[0]||(e[0]=a=>Va(5))},h),(0,t._)("li",{onClick:e[1]||(e[1]=a=>Va(6))},k)])])])])])),(0,t._)("h3",f,(0,s.zw)(5==Aa.value?"BUSHMAN SAFARI TRACKERS EMPLOYEES LEAVE REQUESTS":6==Aa.value?"COPEX CONTRACTORS EMPLOYEES LEAVE REQUESTS":"EMPLOYEES LEAVE REQUESTS"),1),(0,t._)("div",S,[(0,t._)("div",E,[(0,o.SU)(g).includes("can_create_leaves")?((0,t.wg)(),(0,t.iD)("button",{key:0,class:"btn btn-primary me-2",onClick:e[2]||(e[2]=a=>Ua.value=!Ua.value),disabled:!Aa.value},R,8,C)):(0,t.kq)("",!0),(0,t._)("button",{class:"btn btn-success",onClick:e[3]||(e[3]=a=>(0,o.SU)(y)(ja.value)),disabled:!Aa.value},L,8,x)])]),(0,t._)("form",{onSubmit:e[8]||(e[8]=(0,n.iM)((a=>Ta()),["prevent"]))},[Ua.value?((0,t.wg)(),(0,t.iD)("div",A,[(0,t._)("div",V,[(0,t._)("div",U,[z,(0,t.Wm)((0,o.SU)(u()),{modelValue:za.value,"onUpdate:modelValue":e[4]||(e[4]=a=>za.value=a),options:Pa.value,label:"name",placeholder:"Select Employee",searchable:!0,"allow-empty":!1},null,8,["modelValue","options"])])]),(0,t._)("div",q,[(0,t._)("div",D,[T,(0,t.Wm)((0,o.SU)(u()),{modelValue:Wa.value,"onUpdate:modelValue":e[5]||(e[5]=a=>Wa.value=a),options:Fa.value,label:"name",placeholder:"Select Employee",searchable:!0,"allow-empty":!1},null,8,["modelValue","options"])])]),(0,t._)("div",j,[(0,t._)("div",O,[B,(0,t.wy)((0,t._)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>qa.value=a),required:""},null,512),[[n.nr,qa.value]])])]),(0,t._)("div",P,[(0,t._)("div",I,[N,(0,t.wy)((0,t._)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>Da.value=a),required:""},null,512),[[n.nr,Da.value]])])]),(0,t._)("div",Q,[(0,t._)("div",Y,[F,(0,t._)("button",{type:"submit",class:"btn btn-primary w-100",disabled:!za.value||!Wa.value}," Submit ",8,W)])])])):(0,t.kq)("",!0)],32),r.value?((0,t.wg)(),(0,t.iD)("div",{key:0,innerHTML:(0,o.SU)(M)()},null,8,$)):((0,t.wg)(),(0,t.iD)("div",X,[(0,t._)("div",J,[(0,t._)("div",K,[(0,t._)("div",Z,[(0,t.Wm)(i,{data:ja.value,columns:Ma.value,options:La.value},{status:(0,t.w5)((a=>[(0,t._)("span",{class:(0,s.C_)(["badge inv-status","badge-"+a.row.status.color])},(0,s.zw)(a.row.status.name),3)])),actions:(0,t.w5)((a=>[(0,t._)("a",{href:"javascript:void(0);",class:"text-primary","data-bs-toggle":"modal","data-bs-target":"#edit",onClick:e=>Qa.value=a.row},ea,8,G)])),_:1},8,["data","columns","options"])])])])]))]),(0,t._)("div",la,[(0,t._)("div",ta,[(0,t._)("div",sa,[oa,(0,t._)("div",na,[(0,t._)("div",ia,[(0,t._)("div",da,[(0,t._)("div",ra,[Qa.value?((0,t.wg)(),(0,t.iD)("div",ua,[(0,t._)("table",ca,[va,(0,t._)("tbody",null,[(0,t._)("tr",null,[(0,t._)("td",null,(0,s.zw)(Qa.value.employee),1),(0,t._)("td",null,[xa.value?((0,t.wg)(),(0,t.j4)((0,o.SU)(u()),{key:1,modelValue:Wa.value,"onUpdate:modelValue":e[10]||(e[10]=a=>Wa.value=a),options:Fa.value,label:"name",placeholder:"Select Employee",searchable:!0,"allow-empty":!1},null,8,["modelValue","options"])):((0,t.wg)(),(0,t.iD)("span",{key:0,onClick:e[9]||(e[9]=a=>xa.value=!0)},[(0,t.Uk)((0,s.zw)(Qa.value.leave_type.name)+" ",1),pa]))]),(0,t._)("td",null,(0,s.zw)(Qa.value.start_date),1),(0,t._)("td",null,(0,s.zw)(Qa.value.end_date),1),(0,t._)("td",null,(0,s.zw)(Qa.value.leave_days),1),(0,t._)("td",null,[(0,t._)("span",{class:(0,s.C_)(["badge inv-status","badge-"+Qa.value?.status?.color])},(0,s.zw)(Qa.value?.status?.name),3)])]),(0,t._)("tr",null,[Qa.value?.remark?((0,t.wg)(),(0,t.iD)("td",ma,"Remark : "+(0,s.zw)(Qa.value?.remark),1)):(0,t.kq)("",!0)])])])])):(0,t.kq)("",!0)])])]),(0,t._)("div",ba,[(0,o.SU)(g).includes("can_approve_leaves")?((0,t.wg)(),(0,t.iD)("div",_a,[(0,t._)("button",{class:"btn btn-primary me-2",onClick:e[11]||(e[11]=a=>Ba.value=3),disabled:l.value},"Approve",8,wa),(0,t._)("button",{class:"btn btn-danger me-2",onClick:e[12]||(e[12]=a=>Ba.value=4),disabled:l.value},"Reject",8,ga),(0,t._)("button",{class:"btn btn-warning me-2",onClick:e[13]||(e[13]=e=>(Ba.value=17,Na.value=a.requisition.remark)),disabled:l.value},"Hold Request",8,ha),(0,t._)("button",{class:"btn btn-info me-2",onClick:e[14]||(e[14]=e=>(Ba.value=14,Na.value=a.requisition.remark)),disabled:l.value},"Remark",8,ya)])):(0,t.kq)("",!0)]),Ba.value?((0,t.wg)(),(0,t.iD)("div",ka,[(0,t._)("span",{class:(0,s.C_)(["badge rounded-pill",{"bg-danger":4==Ba.value,"bg-success":3==Ba.value,"bg-warning":17==Ba.value,"bg-info":3!=Ba.value&&4!=Ba.value}]),style:{"font-size":"1rem"}},(0,s.zw)(3==Ba.value?"Approve Request":17==Ba.value?"Hold Request":4==Ba.value?"Reject Request":"Fill Remark"),3)])):(0,t.kq)("",!0),Ba.value?((0,t.wg)(),(0,t.iD)("div",fa,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:3==Ba.value?"Enter Approval Remark":4==Ba.value?"Enter Rejection Remark":"Enter Remark","onUpdate:modelValue":e[15]||(e[15]=a=>Na.value=a)},null,8,Sa),[[n.nr,Na.value]]),(0,t._)("button",{class:"btn btn-primary",type:"button",disabled:l.value,onClick:e[16]||(e[16]=a=>Ya())},[l.value?((0,t.wg)(),(0,t.iD)("span",{key:0,innerHTML:a.loadingSpinner()},null,8,Ca)):((0,t.wg)(),(0,t.iD)("span",Ha,"Save"))],8,Ea)])):(0,t.kq)("",!0)]),Ra])])])],64)}}};const Ma=xa;var La=Ma}}]);
//# sourceMappingURL=8783.8b370706.js.map