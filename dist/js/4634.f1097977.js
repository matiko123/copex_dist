"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[4634],{4634:function(a,l,e){e.r(l),e.d(l,{default:function(){return oa}});var s=e(66252),t=e(49963),o=e(3577),i=e(2262),r=e(87066),n=e(56296);const c={class:"layout-px-spacing"},u=(0,s._)("ul",{class:"navbar-nav flex-row"},[(0,s._)("li",null,[(0,s._)("div",{class:"page-header"},[(0,s._)("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[(0,s._)("ol",{class:"breadcrumb"},[(0,s._)("li",{class:"breadcrumb-item"},[(0,s._)("a",{href:"javascript:;"},"User")]),(0,s._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,s._)("span",null,"Account Settings")])])])])])],-1),d=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1),p=[d],v={class:"account-settings-container layout-top-spacing"},m={class:"account-content"},f={class:"scrollspy-example","data-spy":"scroll","data-target":"#account-settings-scroll","data-offset":"-100"},_={class:"row"},b={class:"col-xl-12 col-lg-12 col-md-12 layout-spacing"},g=["onSubmit"],w={class:"info"},h=(0,s._)("h6",{class:""},"General Information",-1),y={class:"row"},x={class:"col-lg-11 mx-auto"},k={class:"row"},C={class:"col-xl-2 col-lg-12 col-md-4"},S={class:"upload mt-4 pe-md-4"},H=["src"],P=(0,s._)("p",{class:"mt-2"},"Upload Picture",-1),U={class:"col-xl-10 col-lg-12 col-md-8 mt-md-0 mt-4"},N={class:"form"},j={class:"row"},L={class:"row"},R={class:"col-sm-6"},z={class:"form-group"},A=(0,s._)("label",{for:"fullName"},"Full Name",-1),B={class:"btn btn-light w-100 text-start mb-4",disabled:""},D={class:"nav-link text-dark",style:{"font-size":"1.2em","font-weight":"bold"}},I={class:"col-sm-6"},O={class:"form-group"},$=(0,s._)("label",{for:"profession"},"Role",-1),J={class:"btn btn-light w-100 text-start mb-4",disabled:""},M={class:"nav-link text-dark",style:{"font-size":"1.2em","font-weight":"bold"}},V={class:"row"},E={class:"col-md-6"},F={class:"form-group"},G=(0,s._)("label",{for:"password"},"New Password",-1),Z={class:"col-md-6"},q={class:"form-group"},K=(0,s._)("label",{for:"password"},"Confirm New Password",-1),Q={class:"account-settings-footer bg-white"},T={class:"as-footer-container"},W={type:"submit",class:"btn btn-primary"},X={key:0,class:"d-flex flex-column align-items-center"},Y=(0,s._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),aa=(0,s.Uk)(" Please wait ... "),la=[Y,aa],ea={key:1};var sa={setup(a){(0,n.j)({title:"Account Setting"});const l=(0,i.iH)(null),d=(0,i.iH)(),Y=(0,i.iH)(),aa=(0,i.iH)(),sa=(0,i.iH)(),ta=(0,i.iH)(!1),oa=a=>{l.value=URL.createObjectURL(a.target.files[0])},ia=r.Z.create({baseURL:"https://bushman.ink/api/v1/"}),ra=(a="",l="success")=>{const e=window.Swal.mixin({toast:!0,position:"top-right",showConfirmButton:!1,timer:3e3});e.fire({icon:l,title:a,padding:"10px 20px"})},na=(a="",l="error")=>{const e=window.Swal.mixin({toast:!0,position:"top-right",showConfirmButton:!1,timer:3e3});e.fire({icon:l,title:a,padding:"10px 20px"})},ca=async()=>{d.value="",Y.value="",aa.value=""},ua=async()=>{if(da.value)if(Y.value&&aa.value)if(Y.value===aa.value){ta.value=!0,sa.value=aa.value;try{const a=await ia.patch(`/users/${da.value.id}`,{password:sa.value});a.data&&(localStorage.setItem("user",JSON.stringify(a.data)),da.value=a.data,ra("Profile updated successfully!"),ca())}catch(a){console.error("Error updating profile:",a),na(a.response.data.message)}ta.value=!1}else na("Please make sure the confirm password matches the new password.");else na("Password can't be empty! Please fill it in.");else na("User not logged in.")},da=(0,i.iH)(null);return(0,s.bv)((()=>{const a=localStorage.getItem("user");a&&(da.value=JSON.parse(a))})),(a,i)=>((0,s.wg)(),(0,s.iD)("div",c,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"#breadcrumb"},[u])),(0,s._)("button",{class:"btn mt-2 btn-dark me-2 px-3",onClick:i[0]||(i[0]=l=>a.$router.go(-1))},p),(0,s._)("div",v,[(0,s._)("div",m,[(0,s._)("div",f,[(0,s._)("div",_,[(0,s._)("div",b,[(0,s._)("form",{id:"general-info",class:"section general-info",onSubmit:(0,t.iM)(ua,["prevent"])},[(0,s._)("div",w,[h,(0,s._)("div",y,[(0,s._)("div",x,[(0,s._)("div",k,[(0,s._)("div",C,[(0,s._)("div",S,[(0,s._)("input",{ref:"fl_profile",type:"file",class:"d-none",accept:"image/*",onChange:oa},null,544),(0,s._)("img",{src:l.value?l.value:e(26217),alt:"profile",class:"profile-preview",onClick:i[1]||(i[1]=l=>a.$refs.fl_profile.click())},null,8,H),P])]),(0,s._)("div",U,[(0,s._)("div",N,[(0,s._)("div",j,[(0,s._)("div",L,[(0,s._)("div",R,[(0,s._)("div",z,[A,(0,s._)("button",B,[(0,s._)("span",D,(0,o.zw)(da.value?da.value.email:"Please Login"),1)])])]),(0,s._)("div",I,[(0,s._)("div",O,[$,(0,s._)("button",J,[(0,s._)("span",M,(0,o.zw)(da.value?da.value.name:""),1)])])]),(0,s._)("div",V,[(0,s._)("div",E,[(0,s._)("div",F,[G,(0,s.wy)((0,s._)("input",{class:"form-control mb-4","onUpdate:modelValue":i[2]||(i[2]=a=>Y.value=a),type:"password"},null,512),[[t.nr,Y.value]])])]),(0,s._)("div",Z,[(0,s._)("div",q,[K,(0,s.wy)((0,s._)("input",{class:"form-control mb-4","onUpdate:modelValue":i[3]||(i[3]=a=>aa.value=a),type:"password"},null,512),[[t.nr,aa.value]])])])])])])])])])])])]),(0,s._)("div",Q,[(0,s._)("div",T,[(0,s._)("button",{type:"button",class:"btn btn-primary bg-danger",onClick:i[4]||(i[4]=a=>ca())},"Cancel"),(0,s._)("button",W,[ta.value?((0,s.wg)(),(0,s.iD)("div",X,la)):((0,s.wg)(),(0,s.iD)("div",ea,"Save Changes"))])])])],40,g)])])])])])]))}};const ta=sa;var oa=ta},26217:function(a,l,e){a.exports=e.p+"img/prf.60157362.jpg"}}]);
//# sourceMappingURL=4634.f1097977.js.map