{"version":3,"file":"js/4136.1aecd137.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/masters/lpoItems.vue","webpack://cork-vue3/./src/views/masters/lpoItems.vue?bb4d"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">\r\n        <teleport to=\"#breadcrumb\">\r\n            <ul class=\"navbar-nav flex-row\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">DataTables</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Alternative Pagination</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </teleport>\r\n\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel br-6 p-0\">\r\n                    <div class=\"custom-table\">\r\n                            <!-- loading spinner starts -->\r\n                 <div v-if=\"loading_spinner\" v-html=\"loadingIndicator()\"></div>\r\n        <!-- Loading spinner ends -->\r\n         <div class=\"d-flex\">\r\n            <div class=\"ms-auto me-5 mt-3 text-dark\" style=\"cursor: pointer;\" @click=\"unlock  =! unlock\">\r\n  <svg v-if=\"!unlock\" xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-lock-fill\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M8 0a4 4 0 0 1 4 4v2.05a2.5 2.5 0 0 1 2 2.45v5a2.5 2.5 0 0 1-2.5 2.5h-7A2.5 2.5 0 0 1 2 13.5v-5a2.5 2.5 0 0 1 2-2.45V4a4 4 0 0 1 4-4m0 1a3 3 0 0 0-3 3v2h6V4a3 3 0 0 0-3-3\"/>\r\n</svg>\r\n  \r\n                <svg v-else xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-unlock-fill\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M12 0a4 4 0 0 1 4 4v2.5h-1V4a3 3 0 1 0-6 0v2h.5A2.5 2.5 0 0 1 12 8.5v5A2.5 2.5 0 0 1 9.5 16h-7A2.5 2.5 0 0 1 0 13.5v-5A2.5 2.5 0 0 1 2.5 6H8V4a4 4 0 0 1 4-4\"/>\r\n</svg>\r\n\r\n            </div>\r\n         </div>\r\n                        <v-client-table :data=\"items\" :columns=\"columns\" :options=\"table_option\">\r\n                             <template #SNo=\"props\">\r\n                                      {{ props.index + 0 }}\r\n                             </template>\r\n                            <template #actions=\"props\">\r\n                                <div class=\"actions text-center\">\r\n                                    <a v-if=\"unlock\" href=\"javascript:;\" class=\"text-danger\" @click=\"deleteItem(props.row.id)\">\r\n                                       <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                        >\r\n                                            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n                                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                   <a href=\"javascript:;\" class=\"edit me-3\" @click=\"edit_row(props.row)\">\r\n\r\n                                            <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"24\"\r\n                                                height=\"24\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                stroke-width=\"1.5\"\r\n                                                stroke-linecap=\"round\"\r\n                                                stroke-linejoin=\"round\"\r\n                                                class=\"text-primary\"\r\n                                            >\r\n                                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                            </svg>\r\n                                        </a>\r\n\r\n                                          <router-link :to=\"`/report/item-budget/${props.row.project.id}/${props.row.budget_id}`\" class=\"edit me-3\" >\r\n\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-box-arrow-right\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z\"/>\r\n  <path fill-rule=\"evenodd\" d=\"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z\"/>\r\n</svg>\r\n                                          </router-link>\r\n\r\n                                \r\n                                </div>\r\n                            </template>\r\n                            <template #rate=\"props\"> {{ formatNumber(props.row.rate) }}/= </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n\r\n        <!-- Edit lpoItems Modal -->\r\n        <div class=\"modal fade\" id=\"editModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"editModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-xl modal-dialog-scrollable\" role=\"document\">\r\n                <div class=\"modal-content\" style=\"height: 90vh;\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"editModalLabel\">Edit LPO Item</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <form @submit.prevent=\"save_edit\">\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"row mb-2\">\r\n                            <div class=\"col-md-3\">\r\n                            <label for=\"editMachineId\">Machine </label>\r\n<Multiselect\r\n    v-model=\"editingRow.machine\"\r\n    :options=\"machines\"\r\n    :close-on-select=\"true\"\r\n    label=\"name\"\r\n    value-prop=\"id\"\r\n    placeholder=\"Select a Machine\"\r\n    :searchable=\"true\"\r\n/>\r\n                             </div>\r\n                            <div class=\"col-md-3\">\r\n                            <label for=\"editMachineId\">Projects</label>\r\n<Multiselect\r\n    v-model=\"editingRow.project\"\r\n    :options=\"projects\"\r\n    :close-on-select=\"true\"\r\n    label=\"short_name\"\r\n    value-prop=\"id\"\r\n    placeholder=\"Select a Machine\"\r\n    :searchable=\"true\"\r\n    :required = \"true\"\r\n/>\r\n                             </div>\r\n                                <div class=\"col-md-6\">\r\n                            <label for=\"editMachineId\">Budget </label>\r\n<Multiselect\r\n    v-model=\"budget\"\r\n    :options=\"budgets\"\r\n    :close-on-select=\"true\"\r\n    label=\"name\"\r\n    value-prop=\"id\"\r\n    placeholder=\"Select Budget\"\r\n    :searchable=\"true\"\r\n    :required = \"true\"\r\n/>\r\n                             </div>\r\n\r\n                            <div class=\"col-md-4\">\r\n                                <label for=\"editCategory\">Category</label>\r\n                               <Multiselect\r\n    v-model=\"category\"\r\n    :options=\"categories\"\r\n    :close-on-select=\"true\"\r\n    label=\"name\"\r\n    value-prop=\"id\"\r\n    placeholder=\"Select Category\"\r\n    :searchable=\"true\"\r\n    @select=\"  budgetItem = ''\"\r\n/>\r\n                            </div>\r\n\r\n                            \r\n                            <div class=\"col-md-5\">\r\n                                <label for=\"editCategory\">Item</label>\r\n                               <Multiselect\r\n    v-model=\"budgetItem\"\r\n    :options=\"budgetItems\"\r\n    :close-on-select=\"true\"\r\n    label=\"name\"\r\n    value-prop=\"id\"\r\n    placeholder=\"Select Item\"\r\n    :searchable=\"true\"\r\n/>\r\n                            </div>\r\n                            <div class=\"col-md-3\">\r\n                                <label for=\"editUnitMeasure\">Unit Measure</label>\r\n                               <Multiselect\r\n    v-model=\"unit\"\r\n    :options=\"units\"\r\n    :close-on-select=\"true\"\r\n    label=\"name\"\r\n    value-prop=\"id\"\r\n    placeholder=\"Select Budget\"\r\n    :searchable=\"true\"\r\n/>\r\n       \r\n                            </div>\r\n\r\n                            <div class=\"col-md-6\">\r\n                                <label for=\"editDescription\">Description</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"editDescription\" v-model=\"editingRow.description\">\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\">\r\n                                <label for=\"editQuantity\">Quantity</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"editQuantity\" v-model=\"editingRow.quantity\">\r\n                            </div>\r\n                            <div class=\"col-md-4\">\r\n                                <label for=\"editRate\">Rate</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"editRate\" v-model=\"editingRow.rate\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n                        <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSaving\">\r\n                          <span v-if=\"isSaving\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span><span v-else>Save changes</span>\r\n                        </button>\r\n                    </div>\r\n</form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, ref,inject,watch } from 'vue';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import * as bootstrap from 'bootstrap';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Alternative Pagination' });\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const loadingIndicator = inject('loadingIndicator');\r\n    const isSaving = ref(false);\r\n    const machine = ref(77);\r\n    let editModal = null;\r\n    const editingRow = ref({});\r\n    const budget = ref('');\r\n    const columns = ref([ 'SNo','id','order_id','project','machine_id','budget_id','item_id', 'category', 'description', 'unit_measure', 'quantity', 'rate', 'actions']);\r\n    const items = ref([]);\r\n    const machines = ref(['']);\r\n    const budgets = ref(['']);\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [5, 10, 20, 50],\r\n        skin: 'table',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: [],\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n\r\n    });\r\n   const unlock = ref(false); \r\n   \r\n   const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n         const axiosInstance2 = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL2\r\n    });\r\n    const loading_spinner = ref(false);\r\n\r\n   const getItems = async () => {\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`items`);\r\n            items.value = response.data;\r\n            loading_spinner.value = false;\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n    }\r\n}\r\n   \r\nconst budgetItem = ref('');\r\nconst budgetItems = ref(['']);\r\n\r\n\r\n  const formatNumber = (num) => {\r\n    if (num === null || num === undefined) return '0';\r\n    return Number(num).toLocaleString('en-US');\r\n    };\r\n\r\n   const deleteItem = (id) => {\r\n        loading_spinner.value = true;\r\n   if (confirm(\"Are you sure you want to delete this item?\")) {\r\n                  axiosInstance\r\n            .delete(`/items/${id}`)\r\n            .then((response) => {\r\n                loading_spinner.value = false;\r\n                if (response.status === 200) {\r\n                   showMessage('Item Deleted successfully');\r\n                   getItems();\r\n                } else {\r\n                    showError('Fail to Delete item');\r\n                    console.error(\"Error deleting:\", response.data);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                showError(\"error deleting item\");\r\n                console.error(\"Error deleting item \", error);\r\n            });  \r\n    \r\n   }\r\n    };\r\n\r\n     onMounted(() => {\r\n     getItems();   \r\n     editModal = new bootstrap.Modal(document.getElementById('editModal'));\r\n    });\r\n\r\n\r\nconst edit_row = async (row) => {\r\n    loading_spinner.value=true;\r\n    await getBudgets(row.project_id);\r\n    const machineObj = machines.value.find(m => m.id === row.machine_id);\r\n    budget.value = budgets.value.find(b => b.id === row.budget_id);\r\n    editingRow.value = { ...row, machine: machineObj || null };\r\n    editModal.show();\r\n    loading_spinner.value=false;\r\n    await fetchCategory(row.budget_id);\r\n    category.value = categories.value.find(c => c.name === row.category);\r\n    if(category.value?.item_description){\r\n       budgetItems.value = category.value.item_description;\r\n    }\r\n    budgetItem.value = budgetItems.value.find(bi => bi.id === row.item_id);\r\n    unit.value = units.value.find(u => u.name === row.unit_measure);\r\n   \r\n\r\n  watch(category, (newItems) => {\r\n  if (newItems) {\r\n    budgetItems.value = newItems.item_description;\r\n  }if(!newItems?.item_description){\r\n    budgetItem.value= '';\r\n  }\r\n});\r\n};\r\n\r\n  watch(budget,async (newCategories) => {\r\n  if (newCategories) {\r\n    category.value = '';\r\n    // budgetItems.value = '';\r\n     await fetchCategory(newCategories.id);\r\n  }\r\n  });\r\n\r\nconst getBudgets = async (id) => {\r\n    try {\r\n        const response = await axiosInstance2.get(`/projects/${id}`);\r\n        budgets.value = response.data;\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.error(error);\r\n    }\r\n};\r\n\r\n    const save_edit = async () => {\r\n        isSaving.value = true;\r\n        if (loading_spinner.value) return;\r\n         if (!budget.value?.id) {\r\n        showError('Please select a budget.');\r\n        isSaving.value = false;\r\n        return;\r\n    }\r\n      if (!category.value?.id) {\r\n        showError('Please select a category.');\r\n        isSaving.value = false;\r\n        return;\r\n    }\r\n    if (!budgetItem.value?.id) {\r\n        showError('Please select an item.');\r\n        isSaving.value = false;\r\n        return;\r\n    }if (!unit.value?.name) {\r\n        showError('Please select a unit');\r\n        isSaving.value = false;\r\n        return;\r\n    }\r\n        try {\r\n           \r\n            loading_spinner.value = true;\r\n            const machineId = editingRow.value.machine ? editingRow.value.machine.id : null;\r\n            const response = await axiosInstance.put(`/items/${editingRow.value.id}`, {\r\n                machineId: machineId || 0, \r\n                description: editingRow.value.description,\r\n                category: category.value.name,\r\n                item_list_id: budgetItem.value.id,\r\n                unit_measure: unit.value.name,\r\n                quantity: editingRow.value.quantity,\r\n                rate: editingRow.value.rate,\r\n                budget_id: budget.value.id\r\n            });\r\n            \r\n            if (response.status === 200) {\r\n                editModal.hide();\r\n                const index = items.value.findIndex(item => item.id === editingRow.value.id);\r\n                if (index !== -1) {\r\n                    items.value[index].machine_id = machineId;\r\n                    items.value[index].description = editingRow.value.description;\r\n                    items.value[index].category = category.value.name;\r\n                    items.value[index].item_id = budgetItem.value.id;\r\n                    items.value[index].unit_measure = unit.value.name;\r\n                    items.value[index].quantity = editingRow.value.quantity;\r\n                    items.value[index].rate = editingRow.value.rate;\r\n                    items.value[index].budget_id = budget.value.id;\r\n                }\r\n                showMessage('Item updated successfully!');\r\n            }\r\n           \r\n        } catch (error) {  \r\n            showError(error.message);\r\n            console.error(error);\r\n        } finally {\r\n            loading_spinner.value = false;\r\n            isSaving.value = false;\r\n        }\r\n      \r\n    }; \r\n\r\n\r\n    \r\n\r\nconst fetchMachines = async () => {\r\n    try {\r\n        loading_spinner.value = true;\r\n        const response = await axiosInstance.get('/machines');\r\n        machines.value = response.data; \r\n    } catch (error) {\r\n        showError(\"Failed to fetch machines: \" + error.message);\r\n        console.error(\"Error fetching machines:\", error);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\nconst category = ref('');\r\nconst categories = ref(['']);\r\nconst fetchCategory = async (id) => {\r\n    try {\r\n        const response = await axiosInstance2.get(`/item/${id}`);\r\n        categories.value = response.data; \r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.error(\"Error fetching category:\", error);\r\n    } finally {\r\n       \r\n    }\r\n};\r\n\r\nconst units = ref(['']);\r\nconst unit =  ref('');\r\nconst fetchUnits = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`/units`);\r\n        units.value = response.data; \r\n    } catch (error) {\r\n        showError( error.message);\r\n        console.error(\"Error fetching category:\", error);\r\n    } finally {\r\n        \r\n    }\r\n};\r\n\r\nconst projects = ref(['']);\r\nconst fetchProjects = async () => {\r\n    try {\r\n        loading_spinner.value = true;\r\n        const response = await axiosInstance.get('/projects');\r\n        projects.value = response.data; \r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.error(\"Error fetching projects:\", error);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n\r\nonMounted(() => {\r\n    fetchMachines();\r\n    fetchProjects();\r\n    fetchUnits();\r\n});\r\n</script>\r\n","import script from \"./lpoItems.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./lpoItems.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","showMessage","inject","showError","loadingIndicator","isSaving","ref","editModal","editingRow","budget","columns","items","machines","budgets","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","unlock","axiosInstance","axios","baseURL","process","axiosInstance2","VUE_APP_API_BASE_URL2","loading_spinner","getItems","async","value","response","get","data","error","message","console","log","budgetItem","budgetItems","formatNumber","num","undefined","Number","toLocaleString","deleteItem","id","confirm","delete","then","status","catch","onMounted","bootstrap","document","getElementById","edit_row","getBudgets","row","project_id","machineObj","find","m","machine_id","b","budget_id","machine","show","fetchCategory","category","categories","c","name","item_description","bi","item_id","unit","units","u","unit_measure","watch","newItems","newCategories","save_edit","machineId","put","description","item_list_id","quantity","rate","hide","index","findIndex","item","fetchMachines","fetchUnits","projects","fetchProjects","__exports__"],"sourceRoot":""}