"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5537],{75537:function(a,e,t){t.r(e),t.d(e,{default:function(){return ya}});t(26699);var l=t(66252),s=t(2262),o=t(49963),r=t(3577),n=t(87066),i=t(56296);const c=a=>((0,l.dD)("data-v-d50252b6"),a=a(),(0,l.Cn)(),a),d={class:"layout-px-spacing"},u=(0,l.uE)('<ul class="navbar-nav flex-row mt-2" data-v-d50252b6><li data-v-d50252b6><div class="page-header" data-v-d50252b6><nav class="breadcrumb-one" aria-label="breadcrumb" data-v-d50252b6><ol class="breadcrumb" data-v-d50252b6><li class="breadcrumb-labour_type" data-v-d50252b6><a href="javascript:;" data-v-d50252b6>Masters</a></li><li class="breadcrumb-labour_type active" aria-current="page" data-v-d50252b6><span data-v-d50252b6>labour Type</span></li></ol></nav></div></li></ul>',1),v={class:"d-flex me-4 mt-2"},p={class:"ms-auto"},b=c((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l._)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1))),m=[b],h=c((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-printer",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,l._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1))),_=[h],g=["innerHTML"],w=["onSubmit"],y=c((()=>(0,l._)("h4",{class:"text-center"},"LABOUR TYPE REGISTRATION FORM",-1))),f={class:"row mb-2"},k={class:"col-md-6"},x=c((()=>(0,l._)("label",{class:"form-label"},"Labor Type Name",-1))),C={class:"col-md-6"},L=c((()=>(0,l._)("label",{class:"form-label"},"Rate",-1))),M={class:"text-center gap-2 justify-content-end"},T=c((()=>(0,l._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1))),H={class:"row layout-top-spacing"},S={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},V={class:"panel p-0"},A={class:"custom-table table3"},z=["onClick","data-bs-target"],U=c((()=>(0,l._)("svg",{class:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[(0,l._)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"})],-1))),D=[U],B=["onClick"],E=c((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5.5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6zm2 .5a.5.5 0 0 1 .5-.5.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6z"}),(0,l._)("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1 0-2h3.5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1H14a1 1 0 0 1 1 1zm-11-1a.5.5 0 0 0-.5.5V4h11V2.5a.5.5 0 0 0-.5-.5h-10zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118z"})],-1))),Z=[E],q=["onClick"],R=c((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-check2-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z"}),(0,l._)("path",{d:"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0"})],-1))),j=[R],I=["onClick"],N=c((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x-square",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,l._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1))),O=[N],P=["id"],F={class:"modal-dialog modal-lg"},G={class:"modal-content"},W=c((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Update Labour type Details"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),X=["onSubmit"],Y={class:"modal-body"},$={class:"row"},K={class:"row mb-2"},Q={class:"col-md-6"},J=c((()=>(0,l._)("label",{class:"form-label"},"Labor Type Name",-1))),aa={class:"col-md-6"},ea=c((()=>(0,l._)("label",{class:"form-label"},"Rate",-1))),ta={class:"modal-footer"},la=c((()=>(0,l._)("button",{type:"submit",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Save changes",-1))),sa={class:"modal fade modal-bg",id:"noBackdropModal",tabindex:"-1","aria-labelledby":"noBackdropModalLabel","aria-hidden":"true","data-bs-backdrop":"false"},oa={class:"modal-dialog"},ra={class:"modal-content"},na=c((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"noBackdropModalLabel"},"LABOUR WAGES APPROVAL"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ia={class:"modal-body"},ca={class:"row layout-top-spacing"},da={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ua={class:"panel p-0"},va=c((()=>(0,l._)("div",{class:"d-flex"},[(0,l._)("h6",{class:"text-center mt-2 mx-2"},"Approval Status")],-1))),pa={class:"custom-table table3 table-responsive"},ba={class:"table"},ma=c((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Engineer "),(0,l._)("th",null,"MD")])],-1))),ha=c((()=>(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),(0,l._)("button",{type:"button",class:"btn btn-primary"},"Save changes")],-1)));var _a={setup(a){(0,i.j)({title:"Custom Table"});const e=(0,l.f3)("showMessage"),t=(0,l.f3)("showError"),c=(0,l.f3)("formatNumber"),b=(0,l.f3)("showConfirmation"),h=(0,l.f3)("waitIndicator"),U=(0,l.f3)("printLabourTypes"),E=(0,s.iH)(!1),R=(0,s.iH)(""),N=(0,s.iH)(""),_a=((0,s.iH)(""),JSON.parse(localStorage.getItem("user")).permissions),ga=(0,s.iH)(["Sn","labour_type_name","rate","status","actions"]),wa=(0,s.iH)([]),ya=(0,s.iH)(""),fa=(0,s.iH)(""),ka=(0,s.iH)(!1),xa=(0,s.iH)({perPage:10,perPageValues:[10,20,50],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["Sn","User ID"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),Ca=async(a,e,t)=>{const l=a,s="https://graph.facebook.com/v22.0/721816217672551/messages",o="EAAXZAN9ZAW4VoBOZBhohedZA7pfKZBfzMghywTumPW7yFY0ZAI7u6Kh9DFtai4usEnmKsOnMZBYisZAQ0ojZBtEpDC72XXNyf6qFmtFtTCX61hv3I2eZCdZAevM9ahsDXGcIhT8stZAoTGstgOsujK4G1pxcSGqwFxiucZBcLr8HUoRxTLlB0IdVlLLlRGQ7n831T93WGUQZDZD",r={messaging_product:"whatsapp",recipient_type:"individual",to:l,type:"template",template:{name:"notification",language:{code:"en"},components:[{type:"body",parameters:[{type:"text",text:e},{type:"text",text:t}]}]}};try{const a=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(r)});await a.json()}catch(n){console.error("Error:",n)}},La=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),Ma=async()=>{E.value=!0;try{const a=await La.get("labour-types");wa.value=a.data.map(((a,e)=>({Sn:e+1,id:a.id,rate:c(a.rate),labour_type_name:a.name,status:a.status,rate_original:a.rate})))}catch(a){t(a.message),console.log(a)}finally{E.value=!1}},Ta=()=>{if(!R.value||!N.value)return void t("Please!..Provide Labour Type Name and Email.");ka.value=!1,E.value=!0;const a={name:R.value,rate:N.value};La.post("labour-types",a).then((a=>{Ma(),E.value=!1,closeinput(),Ca("255677771888","Engineer","new labour wages awaiting for your approval"),e("Labour Type registered successfully!")})).catch((a=>{E.value=!1,console.error("Error registering Labour Type:",a.message),t("Fail to register Labour Type",a)}))},Ha=async()=>{E.value=!0;try{const a={name:R.value,rate:N.value,status_id:2},l=await La.put(`labour-types/${za.value}`,a);200===l.status?(Ma(),e("Labour Type updated successfully!"),Da()):t("Failed to update Labour Type.")}catch(a){t(a.message)}finally{E.value=!1}},Sa=async a=>{const e=await b("Delete Menu","Confirm Deleting Labour Type "+a.labour_type_name,`/labour-types/${a.id}`,"delete");e?.refresh&&Ma()},Va=async a=>{E.value=!0;try{const t={status_id:3};await La.put(`labour-types/${a}`,t);e("Approved âœ…"),Ma()}catch(t){e(t.message),console.log(t)}finally{E.value=!1}},Aa=async a=>{E.value=!0;try{const t={status_id:2};await La.put(`labour-types/${a}`,t);Ma(),e("Unapproved !")}catch(l){t(l.message),console.log(l)}finally{E.value=!1}},za=(0,s.iH)(""),Ua=a=>{za.value=a.id,N.value=a.rate_original,R.value=a.labour_type_name},Da=()=>{za.value="",N.value="",R.value=""};return(0,l.YP)(E,(a=>{!0!==a&&!1!==a&&setTimeout((()=>{E.value=!1}),2e3)})),(0,l.bv)((()=>{Ma()})),(a,e)=>{const t=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",d,[u,(0,l._)("div",v,[(0,l._)("div",p,[(0,s.SU)(_a).includes("can_register_wages")?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-primary me-2",onClick:e[0]||(e[0]=a=>ka.value=!ka.value)},m)):(0,l.kq)("",!0),(0,l._)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=a=>{(0,s.SU)(U)(),E.value="printing"})},_)])]),E.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,s.SU)(h)()},null,8,g)):(0,l.kq)("",!0),ka.value?((0,l.wg)(),(0,l.iD)("form",{key:1,class:"mt-3 p-3 border rounded bg-white shadow",onSubmit:(0,o.iM)(Ta,["prevent"])},[y,(0,l._)("div",f,[(0,l._)("div",k,[x,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Labour Type Name","onUpdate:modelValue":e[2]||(e[2]=a=>R.value=a),required:""},null,512),[[o.nr,R.value]])]),(0,l._)("div",C,[L,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"Enter Rate","onUpdate:modelValue":e[3]||(e[3]=a=>N.value=a),step:"any",required:""},null,512),[[o.nr,N.value]])])]),(0,l._)("div",M,[(0,l._)("button",{type:"button",class:"btn btn-danger me-3",onClick:e[4]||(e[4]=a=>ka.value=!1)},"Cancel"),T])],40,w)):(0,l.kq)("",!0),(0,l._)("div",H,[(0,l._)("div",S,[(0,l._)("div",V,[(0,l._)("div",A,[(0,l.Wm)(t,{data:wa.value,columns:ga.value,options:xa.value},{status:(0,l.w5)((a=>[(0,l._)("span",{class:(0,r.C_)(["badge inv-status","badge-"+a.row.status.color])},(0,r.zw)(a.row.status.name),3)])),actions:(0,l.w5)((t=>[(0,s.SU)(_a).includes("can_edit_wages")?((0,l.wg)(),(0,l.iD)("a",{key:0,href:"javascript:void(0)",class:"text-primary me-2",title:"Edit",onClick:a=>Ua(t.row),"data-bs-toggle":"modal","data-bs-target":"#modal-"+t.row.id},D,8,z)):(0,l.kq)("",!0),(0,s.SU)(_a).includes("can_delete_wages")?((0,l.wg)(),(0,l.iD)("a",{key:1,href:"javascript:void(0)",class:"text-danger",title:"Delete",onClick:a=>Sa(t.row)},Z,8,B)):(0,l.kq)("",!0),(0,s.SU)(_a).includes("can_approve_wages")?((0,l.wg)(),(0,l.iD)("a",{key:2,href:"javascript:void(0)",class:"text-success",title:"Approve",onClick:a=>Va(t.row.id)},j,8,q)):(0,l.kq)("",!0),(0,s.SU)(_a).includes("can_approve_wages")?((0,l.wg)(),(0,l.iD)("a",{key:3,href:"javascript:void(0)",class:"text-warning ms-2",title:"Unapprove",onClick:a=>Aa(t.row.id)},O,8,I)):(0,l.kq)("",!0),(0,l._)("div",{class:"modal fade modal-bg",id:"modal-"+t.row.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"false"},[(0,l._)("div",F,[(0,l._)("div",G,[W,(0,l._)("form",{onSubmit:(0,o.iM)(Ha,["prevent"])},[(0,l._)("div",Y,[(0,l._)("div",$,[(0,l._)("div",K,[(0,l._)("div",Q,[J,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Enter Labour Type Name","onUpdate:modelValue":e[5]||(e[5]=a=>R.value=a)},null,512),[[o.nr,R.value]])]),(0,l._)("div",aa,[ea,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"Enter rate","onUpdate:modelValue":e[6]||(e[6]=a=>N.value=a),step:"any"},null,512),[[o.nr,N.value]])])])])]),(0,l._)("div",ta,[(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:e[7]||(e[7]=e=>{a.closeinput()})},"Close"),la])],40,X)])])],8,P)])),_:1},8,["data","columns","options"])])])])])]),(0,l._)("div",sa,[(0,l._)("div",oa,[(0,l._)("div",ra,[na,(0,l._)("div",ia,[(0,l._)("div",ca,[(0,l._)("div",da,[(0,l._)("div",ua,[va,(0,l._)("div",pa,[(0,l._)("table",ba,[ma,(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",{class:(0,r.C_)("approved"===fa.value.value?"text-danger":"text-success")},(0,r.zw)("Unapproved"===fa.value.value?"unchecked":"checked"),3),(0,l._)("td",{class:(0,r.C_)("approved"===ya.value.value?"text-danger":"text-success")},(0,r.zw)("unapproved"===ya.value.value?"unchecked":"checked"),3)])])])])])])])]),ha])])])],64)}}},ga=t(83744);const wa=(0,ga.Z)(_a,[["__scopeId","data-v-d50252b6"]]);var ya=wa}}]);
//# sourceMappingURL=5537.a9f520ee.js.map