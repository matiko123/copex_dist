{"version":3,"file":"js/7882.4d14661b.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/assets/fuelStatement.vue","webpack://cork-vue3/./src/views/assets/fuelStatement.vue?8b23"],"sourcesContent":["<template>\r\n   \r\n\r\n    <div  class=\"layout-px-spacing mt-3\">\r\n        <div class = \"my-8\">\r\n       <ul class=\"navbar-nav flex-row mt-2\">\r\n      <li>\r\n        <div class=\"page-header\">\r\n          <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb\">\r\n              <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n              <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Fuel Statement</span></li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    </div>\r\n\r\n    <div class=\"d-flex flex-wrap gap-2 mb-2 mt-4 justify-content-center align-items-center position-relative\">\r\n                <div v-if=\"view_distribution && !loading_spinner\" class=\"d-flex align-items-center\">\r\n                  <h4 class=\"text-dark text-uppercase mb-0\">\r\n                   {{ Object.values(groupedDistribution)[0]?.[0]?.item_name }} Distribution Statement For {{ Object.values(groupedDistribution)[0]?.[0]?.machine }} {{ Object.values(groupedDistribution)[0]?.[0]?.type }}\r\n                  </h4>\r\n                </div>\r\n                \r\n                <button class=\"btn btn-success position-absolute end-0\" @click=\"printStatement()\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-printer me-1\">\r\n                            <polyline points=\"6 9 6 2 18 2 18 9\"></polyline>\r\n                            <path d=\"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\"></path>\r\n                            <rect x=\"6\" y=\"14\" width=\"12\" height=\"8\"></rect>\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n    \r\n\r\n         \r\n               <div v-if=\"view_distribution\" class=\"panel p-0\" >\r\n                    <div class=\"custom-table table3 \">\r\n                           <div v-if=\"!loading_spinner\" class=\" col-12 d-flex align-items-center justify-content-between\">\r\n                        <div class=\" d-flex flex-column align-items-start p-1 \">                                                                  \r\n                        </div>  \r\n                           </div>\r\n                        \r\n             \r\n                 \r\n   \r\n                    \r\n\r\n      \r\n\r\n  \r\n         <div class=\"mt-5\" v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n\r\n        <div v-if=\"!loading_spinner\" class=\"mt-4\">\r\n          <div v-for=\"(projectData, projectName) in groupedDistribution\" :key=\"projectName\" class=\"mb-4\">\r\n            <div class=\"bg-light p-3 \">\r\n              <div class=\"d-flex justify-content-between align-items-center\">\r\n                <h5 class=\"text-dark mb-0\">\r\n                  {{ projectName === 'no_project' ? 'Out Of Project' : projectName }}\r\n                </h5>\r\n                <button \r\n                  class=\"btn btn-success btn-sm my-1\" \r\n                  @click=\"printProjectData(projectData, projectName)\"\r\n                  title=\"Print statement\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer me-1\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n          <div class=\"custom-table table3\">\r\n           <div class=\"panel p-0\">\r\n              <v-client-table \r\n                :data=\"projectData\" \r\n                :columns=\"distributionColumn\" \r\n                :options=\"table_option\"\r\n              >\r\n                <template #actions=\"props\">\r\n                  <svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    width=\"26\" \r\n                    height=\"26\" \r\n                    fill=\"currentColor\" \r\n                    viewBox=\"0 0 24 24\"\r\n                    style=\"cursor: pointer;\"\r\n                    title=\"Add Remark\"\r\n                    data-bs-toggle=\"modal\" \r\n                    data-bs-target=\"#edit\"\r\n                    @click=\"statement = props.row\"\r\n                  >\r\n                    <!-- Speech Bubble -->\r\n                    <path d=\"M4 4h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-4 4v-16a2 2 0 0 1 2-2z\" \r\n                          stroke=\"currentColor\" \r\n                          stroke-width=\"2\" \r\n                          fill=\"none\" \r\n                          stroke-linejoin=\"round\"/>\r\n                    \r\n                    <!-- Horizontal Remark Lines -->\r\n                    <line x1=\"7\" y1=\"9\" x2=\"17\" y2=\"9\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n                    <line x1=\"7\" y1=\"13\" x2=\"14\" y2=\"13\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n                    \r\n                    <!-- notification circle -->\r\n                    <circle\r\n                      v-if=\"props.row.remark\"\r\n                      cx=\"19\" cy=\"6\" r=\"6\" fill=\"red\" stroke=\"white\" stroke-width=\"1.5\"/>\r\n                  </svg>\r\n                </template>\r\n              </v-client-table>\r\n            </div>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n                    </div>\r\n                </div>\r\n      \r\n  <!-- distribution ends -->\r\n\r\n    </div>\r\n  \r\n  <!-- edit modal starts -->\r\n <div class=\"modal fade mymodal\" id=\"edit\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">   {{ statement.type }} - {{ statement.machine }} CONSUMPTION  SUMMARY</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\" ></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n<div class=\"card mb-3\">\r\n  <div class=\"card-body\">\r\n    <div class=\"row mb-2 text-start\">\r\n      <div class=\"col-md-4\"><strong>Issued Date:</strong> {{statement.issued_date}}</div>\r\n      <div class=\"col-md-4\"><strong>Issuer:</strong> {{ statement.issuer }}</div>\r\n      <div class=\"col-md-4\"><strong>Driver:</strong> {{ statement.driver }}</div>\r\n    </div>\r\n    <div class=\"row mb-2 text-start\">\r\n      <div class=\"col-md-4\"><strong>Machine:</strong> {{ statement.machine }}</div>\r\n      <div class=\"col-md-4\"><strong>Type:</strong> {{ statement.type }}</div>\r\n      <div class=\"col-md-4\"><strong>Fuel:</strong> {{ statement.fuel }}</div>\r\n    </div>\r\n    <div class=\"row mb-2 text-start\">\r\n      <div class=\"col-md-4\"><strong>Initial:</strong> {{statement.initial}}</div>\r\n      <div class=\"col-md-4\"><strong>Final:</strong> {{ statement.final }}</div>\r\n      <div class=\"col-md-4\"><strong>Ratio:</strong> {{ statement.ratio }}</div>\r\n    </div>\r\n    <div class=\"row text-start\">\r\n      <div class=\"col-md-12\"><strong>Task:</strong> {{ statement.task }}</div>\r\n    </div>\r\n\r\n     <div v-if=\"statement.remark\" class=\"row text-start\">\r\n      <div class=\"col-md-12\"><strong>Remark :</strong> {{ statement.remark }}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<form\r\nv-if=\"user_permissions.includes('can_issue_fuel') || user_permissions.includes('is_md')\"\r\n@submit.prevent=\"updateReadings()\">\r\n   <div class=\"row layout-top-spacing\" >\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                 <div class=\"row g-3\">\r\n  <div class=\"col-md-4\" v-if=\"user_permissions.includes('can_issue_fuel')\">\r\n    <label class=\"form-label\">Initial Reading</label>\r\n    <input class=\"form-control\" type=\"number\" step=\"any\" placeholder=\"Enter Initial Reading\" v-model=\"statement.initial\">\r\n  </div>\r\n\r\n  <div class=\"col-md-4\" v-if=\"user_permissions.includes('can_issue_fuel')\">\r\n    <label class=\"form-label\">Final Reading</label>\r\n    <input class=\"form-control\" type=\"number\" step=\"any\" placeholder=\"Enter Final Reading\" v-model=\"statement.final\">\r\n  </div>\r\n\r\n  <div class=\"col-md-4\" v-if=\"user_permissions.includes('is_programmer')\">\r\n    <label class=\"form-label\"> Task </label>\r\n    <input class=\"form-control\" type=\"text\" step=\"any\" placeholder=\"Enter Task\" v-model=\"statement.task\">\r\n  </div>\r\n\r\n   <div class=\"col-md-11\" v-if=\"user_permissions.includes('is_md')\">\r\n    <label class=\"form-label\">Enter Remark</label>\r\n    <input class=\"form-control\" type=\"text\" step=\"any\" placeholder=\"Enter Remark\" v-model=\"statement.remark\">\r\n  </div>\r\n\r\n\r\n  <div class=\"col-md-1 d-flex justify-content-between align-items-center\">\r\n    <div class=\"pt-4\">\r\n      <button class=\"btn btn-success\" :disabled=\"isSending\">\r\n        <span v-if=\"isSending\" v-html=\"loadingSpinner()\"></span>\r\n        <span v-else> Save</span>\r\n       </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</form>\r\n   \r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n   <!-- edit modal ends -->\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import axios from 'axios';\r\n    import { onMounted, ref } from 'vue';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css'\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import { useRoute } from 'vue-router';\r\n    import { inject } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    \r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const loadingSpinner = inject('loadingSpinner');\r\n    const formatDate = inject('formatDate');\r\n    const tableShimmer = inject('tableShimmer')\r\n    const statement = ref('')\r\n    const isClosed = ref(true)\r\n    const isDiesel = ref(true);\r\n    const route = useRoute();\r\n    useMeta({ title: 'Purchase Order' });\r\n    const activeTab = ref(\"dieseldistribution\");\r\n    const machine_field = ref(false);\r\n    const driver_name = ref('');\r\n    const initial_reading= ref(' ');\r\n    const final_reading = ref('');\r\n    const task = ref('');\r\n    const fuel_id = ref(364);\r\n    const machine = ref('');\r\n    const fuel_quantity = ref('');\r\n    const issued_date = ref(new Date().toISOString().substr(0, 10));\r\n    const details = ref('');\r\n    const ratio = ref('');   \r\n    const Machines = ref([]);\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const bulkDistribution = ref([]);\r\n    const distributionColumn = ref(['SNo','issuer', 'driver', 'task','fuel','ratio','issued_date','actions']);\r\n    const table_option = ref({\r\n        perPage: 50,\r\n        perPageValues: [  50 ,100,200,500],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo','date_issued','ratio',],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n  \r\n    const view_machines = ref(false);\r\n    const view_distribution = ref(true);\r\n    const loading_spinner = ref(false);   \r\n    const selectedMachine = ref('');\r\n    const total_fuel = ref(0);\r\n      \r\n    const isfilling  = ref(false);\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n    const viewDistribution = ()=>{\r\n    \r\n      getBulkDistribution();     \r\n      view_machines.value=false;\r\n      view_distribution.value=true;\r\n    }\r\n\r\n\r\n    const groupedDistribution = ref({});\r\n\r\n    const getBulkDistribution = async () => {\r\n        loading_spinner.value = true; \r\n        const asset_id = route.params.asset_id; \r\n        let url = \"machine-statement\";\r\n        if (asset_id === \"all\") {\r\n            url += \"/all\";\r\n        } else if (asset_id) {\r\n            url += `/${asset_id}`;\r\n        }  \r\n    \r\n        try {\r\n            const response = await axiosInstance.get(url);\r\n            const groupedData = response.data;\r\n            \r\n            // Process each project group\r\n            const processedGroups = {};\r\n            Object.keys(groupedData).forEach(projectKey => {\r\n                const projectStatements = groupedData[projectKey]\r\n                    .map((statement, index) => {\r\n                        let ratio;\r\n                        if (statement.consumption_type === \"Litre/hr\") {\r\n                            ratio = statement.quantity / (statement.final_reading - statement.initial_reading);\r\n                        } else {\r\n                            ratio = (statement.final_reading - statement.initial_reading) / statement.quantity;\r\n                        }\r\n                        ratio = ratio > 50 ? \"---\" : ratio.toFixed(2);\r\n                       \r\n                        return {\r\n                            SNo: index + 1,\r\n                            item_name: statement.item_name,\r\n                            fuel: statement.quantity,\r\n                            consuption: statement.consumption_type,\r\n                            issued_date: new Date(statement.created_at).toLocaleDateString('en-GB', {\r\n                                day: '2-digit',\r\n                                month: '2-digit', \r\n                                year: 'numeric'\r\n                            }),\r\n                            task: statement.task,\r\n                            remark: statement.remark,\r\n                            driver: statement.driver_name,\r\n                            issuer: statement.issuer_name,\r\n                            initial: statement.initial_reading,\r\n                            final: statement.final_reading,\r\n                            machine: statement.machine_name,\r\n                            type: statement.machine_type,\r\n                            ratio: ratio,\r\n                            id: statement.id,\r\n                            project_name: statement.project_name\r\n                        };\r\n                    });\r\n            \r\n                if (projectStatements.length > 0) {\r\n                    processedGroups[projectKey] = projectStatements;\r\n                }\r\n            });\r\n\r\n            groupedDistribution.value = processedGroups;\r\n            \r\n            // Calculate total fuel across all projects\r\n            const allStatements = Object.values(processedGroups).flat();\r\n            total_fuel.value = allStatements.reduce((sum, statement) => {\r\n                return sum + Number(statement.fuel);\r\n            }, 0);\r\n           \r\n            loading_spinner.value = false;\r\n        } catch (error) {\r\n            showError(error.message);\r\n            loading_spinner.value = false;\r\n            console.error(\"Error fetching Bulk Distribution: \", error);\r\n        }\r\n    };\r\n\r\n    const registerMachineDistribution = () => {\r\n            isfilling.value=false;\r\n         const itemData = {\r\n            \r\n            asset_id:selectedMachine.value.id,\r\n            consumption_type: ratio.value,\r\n            issuer_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n            quantity:fuel_quantity.value,\r\n            usage_date: issued_date.value,\r\n            item_id:isDiesel.value ? 364 : 365,\r\n            initial_reading: initial_reading.value,\r\n            final_reading: final_reading.value,\r\n            task: task.value,\r\n            driver_name: driver_name.value\r\n \r\n        };\r\n   \r\n    loading_spinner.value = true;\r\n        axiosInstance\r\n            .post('asset-consumptions', itemData)\r\n            .then((response) => {\r\n                getBulkDistribution();\r\n                selectedMachine.value = '';\r\n                fuel_quantity.value = '';\r\n                details.value = '';\r\n                ratio.value = '';\r\n                driver_name.value = '';\r\n                initial_reading.value = '';\r\n                final_reading.value = '';\r\n                task.value = '';\r\n                isClosed.value = true;\r\n                loading_spinner.value = false;\r\n                // Display success or error messages based on response status\r\n               \r\n            if (response.status === 201) {\r\n                showMessage(\"Fuel distributed successfully\");\r\n            } else {\r\n                console.error(\"Error registering Distribution:\", response.data);\r\n                showError(response.data.message || \"An error occurred while registering the distribution.\");\r\n            }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error registering Distribution:\", error);\r\n                showError(\"Error code :\"+ error.message);\r\n            });\r\n    };\r\n\r\n\r\n//method for fetching remarks\r\nconst name =  ref();\r\nconst user_role = JSON.parse(localStorage.getItem(\"user\")).role;\r\nconst isfetching = ref(false);   \r\nconst status = ref(\"unchecked\"); // Default status\r\nconst usage = ref(); // Default usage ID\r\nconst newremark = ref();\r\nconst remarks = ref([]);\r\nconst showRemarkModal = ref(false);\r\nconst useId =  JSON.parse(localStorage.getItem(\"user\")).id;\r\nconst isSending = ref(false);\r\n\r\n   const openRemarkModal= (row) => {\r\n    fetchRemarks(row.id);\r\n    name.value= row.machine\r\n    usage.value = row.id;     \r\n        showRemarkModal.value = true;\r\n    }\r\n  const   closeRemarkModal = () => {\r\n    showRemarkModal.value = false;\r\n    newremark.value = ''; // Clear the remark input\r\n    remarks.value = []; // Reset the remarks list\r\n    name.value = ''; // Clear the machine name\r\n    \r\n    }\r\n\r\n\r\n   const fetchRemarks = async (id) => {\r\n    isfetching.value = true;\r\n\r\n    try {\r\n        const response = await axiosInstance.get(`/usage-remark/${id}`);\r\n        remarks.value = response.data.filter(item => item.remark_type === 'distribution');\r\n    } catch (error) {\r\n        console.error(\"Error fetching remarks:\", error);\r\n    }\r\n\r\n    isfetching.value = false;\r\n}\r\n\r\n    const saveRemark = async () => {\r\n        if (!newremark.value.trim()) {\r\n            showError(\"Remark cannot be empty!\");\r\n            return;\r\n        }\r\n   isSending.value= true;\r\n        try {\r\n            const response = await  axiosInstance.post(\"/remark\", {   \r\n                created_at: new Date().toISOString(), \r\n                remarker_id: JSON.parse(localStorage.getItem(\"user\")).id,\r\n                description: newremark.value,\r\n                status: status.value, // Default to unchecked\r\n                type_id:usage.value,\r\n                remark_type:\"distribution\"  \r\n            });\r\n\r\n            remarks.value.push(response.data); // Add new remark to the list\r\n            newremark.value = \"\"; // Clear input field\r\n            showMessage(\"Remark added:\", \"success\");\r\n        } catch (error) {\r\n            showError(\"Error adding remark:\", error);\r\n        }\r\n        isSending.value= false;\r\n    };\r\n\r\n\r\n    const updateReadings = async()=>{\r\n      isSending.value = true\r\n      const payload = {\r\n        initial_reading : statement.value.initial,\r\n        final_reading :statement.value.final,\r\n        remark : statement.value.remark,\r\n        task: statement.value.task\r\n      }\r\n\r\n      try{\r\n        const response = await axiosInstance.put(`asset-consumptions/${statement.value.id}`,payload)\r\n        showMessage(\"Readings Updated\")\r\n        getBulkDistribution()\r\n        document.getElementById('close').click()\r\n      }catch(error){\r\n        showError(error.message)\r\n        console.log(error)\r\n      }finally{\r\n        isSending.value = false\r\n      }\r\n    }\r\n\r\n    const printStatement = () => {\r\n  if (!groupedDistribution.value || Object.keys(groupedDistribution.value).length === 0) {\r\n    showError(\"No distribution data available to print\");\r\n    return;\r\n  }\r\n\r\n  const iframe = document.createElement(\"iframe\");\r\n  iframe.style.display = \"none\";\r\n  document.body.appendChild(iframe);\r\n\r\n  const assetId = route.params.asset_id;\r\n  const assetName = assetId === \"all\" ? \"All Assets\" : `Asset ${assetId}`;\r\n\r\n  // Flatten all project data into one array\r\n  const allData = Object.values(groupedDistribution.value).flat();\r\n\r\n  const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Fuel Distribution Report</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; color: #000; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }\r\n  .logo { width: 160px; height: auto; }\r\n  .report-box { border: 1px solid #000; padding: 5px 10px; font-weight: bold; font-size: 13px; text-align: center; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 5px; }\r\n  .company-title h2 { margin: 5px 0; font-size: 18px; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 12px; line-height: 1.4; font-weight: normal; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 5px; }\r\n  th, td { border: 1px solid #000; padding: 8px; text-align: left; font-size: 12px; }\r\n  th { background-color: #f0f0f0; font-weight: bold; text-align: center; }\r\n  .footer { margin-top: 30px; text-align: center; font-size: 11px; border-top: 1px solid #000; padding-top: 10px; }\r\n  .project-section { margin-bottom: 30px; }\r\n  .project-header { background-color: #e8f4f8; padding: 8px; font-weight: bold; font-size: 14px; margin-bottom: 0; }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"report-box\">\r\n    Report ID:<span style=\"color:red;\">00${assetId}</span>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"reg-info\">\r\n  TIN: 135-489-247<br>\r\n  VRN: 40-032826C\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO. LTD</h2>\r\n  <div>Msamvu, P.O. BOX 678, Morogoro</div>\r\n  <div>Mobile: 0713 000 777 | 0657 111 555</div>\r\n</div>\r\n\r\n<h3 style=\"text-align:center; margin-top:25px;text-transform:uppercase\">\r\n   ${allData[0]?.item_name} Distribution Statement for ${allData[0]?.machine || 'N/A'} ${allData[0]?.type || 'N/A'}\r\n</h3>\r\n\r\n\r\n${Object.entries(groupedDistribution.value).map(([projectName, projectData]) => `\r\n<div class=\"project-section\">\r\n  <div class=\"project-header\">\r\n    ${projectName === 'no_project' ? 'Out Of Project' : projectName} \r\n  </div>\r\n  \r\n  <table>\r\n    <thead>\r\n        <tr>\r\n      <th>S/No</th>\r\n      <th>Issuer</th>\r\n      <th>Driver</th>\r\n      <th>Task</th>\r\n      <th>Quantity</th>\r\n      <th>Initial Reading</th>\r\n      <th>Final Reading</th>\r\n      <th>Ratio</th>\r\n      <th>Date</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n      ${projectData.map(item => `\r\n        <tr>\r\n          <td>${item.SNo}</td>\r\n          <td>${item.issuer}</td>\r\n          <td>${item.driver || 'N/A'}</td>\r\n          <td>${item.task || 'N/A'}</td>\r\n          <td style=\"text-align: right;\">${item.fuel}</td>\r\n          <td>${item.initial || 'N/A'}</td>\r\n          <td>${item.final || 'N/A'}</td>\r\n          <td>${item.ratio}</td>\r\n          <td>${item.issued_date}</td>\r\n        </tr>\r\n      `).join('')}\r\n      <tr>\r\n     <td colspan=\"10\" style=\"text-align:right;\"><strong>Total  ${allData[0]?.item_name} (Ltrs)</strong> &nbsp;&nbsp;&nbsp;&nbsp; <strong>${projectData.reduce((sum, item) => sum + Number(item.fuel), 0).toFixed(2)}</strong></td>\r\n    </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n`).join('')}\r\n\r\n<table style=\"margin-top: 20px;\">\r\n  <tbody>\r\n    <tr style=\"background-color: #e8f4f8; font-weight: bold; font-size: 14px;\">\r\n      <td colspan=\"10\" style=\"text-align:right;\"><strong>Total ${allData[0]?.item_name} (Ltrs)</strong> &nbsp;&nbsp;&nbsp;&nbsp; <strong>${total_fuel.value.toFixed(2)}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<div class=\"footer\">\r\n  © ${new Date().getFullYear()} COPEX CONTRACTORS CO. LTD | TIN: 135-489-247 | VRN: 40-032826C<br>\r\n  Msamvu, P.O. BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n  const iframeDoc = iframe.contentWindow.document;\r\n  iframeDoc.open();\r\n  iframeDoc.write(printContent);\r\n  iframeDoc.close();\r\n\r\n  iframe.onload = () => {\r\n    iframe.contentWindow.focus();\r\n    iframe.contentWindow.print();\r\n    setTimeout(() => document.body.removeChild(iframe), 1000);\r\n  };\r\n};\r\n\r\nconst printProjectData = (projectData, projectName) => {\r\n  if (!projectData.length) {\r\n    showError(\"No project data available to print\");\r\n    return;\r\n  }\r\n  \r\n   const assetId = route.params.asset_id;\r\n  const iframe = document.createElement(\"iframe\");\r\n  iframe.style.display = \"none\";\r\n  document.body.appendChild(iframe);\r\n\r\n  const totalFuel = projectData.reduce((sum, item) => sum + Number(item.fuel), 0);\r\n  const title = projectName === 'no_project' ? 'No Project Assigned' : projectName;\r\n\r\n  const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Fuel Statement Report</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; color: #000; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }\r\n  .logo { width: 160px; height: auto; }\r\n  .report-box { border: 1px solid #000; padding: 5px 10px; font-weight: bold; font-size: 13px; text-align: center; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 5px; }\r\n  .company-title h2 { margin: 5px 0; font-size: 18px; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 12px; line-height: 1.4; font-weight: normal; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 20px; border: 1px solid #333; }\r\n  th, td { border: 1px solid #333; padding: 6px; font-size: 12px; text-align: left; }\r\n  th { background-color: #f2f2f2; text-align: center; }\r\n  td { vertical-align: top; }\r\n  .text-right { text-align: right; }\r\n  .summary-row td { font-weight: bold; }\r\n  .footer { margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #333; padding-top: 8px; }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"report-box\">\r\n      Report ID:<span style=\"color:red;\">00${assetId}</span>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"reg-info\">\r\n  TIN: 135-489-247<br>\r\n  VRN: 40-032826C\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO. LTD</h2>\r\n  <div>Msamvu, P.O. BOX 678, Morogoro</div>\r\n  <div>Mobile: 0713 000 777 | 0657 111 555</div>\r\n</div>\r\n\r\n<h3 style=\"text-align:center; margin-top:25px;text-transform:uppercase\">\r\n   ${projectData[0]?.item_name} Distribution Statement for ${projectData[0]?.machine || 'N/A'} ${projectData[0]?.type || 'N/A'}\r\n</h3>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>S/No</th>\r\n      <th>Issuer</th>\r\n      <th>Driver</th>\r\n      <th>Task</th>\r\n      <th>Quantity</th>\r\n      <th>Initial Reading</th>\r\n      <th>Final Reading</th>\r\n      <th>Ratio</th>\r\n      <th>Date</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${projectData.map((item, index) => `\r\n      <tr>\r\n        <td>${index + 1}</td>\r\n         <td>${item.issuer}</td>\r\n         <td>${item.driver}</td>\r\n         <td>${item.task}</td>     \r\n         <td class=\"text-right\">${item.fuel}</td>   \r\n        <td class=\"text-right\">${item.initial || 'N/A'}</td>\r\n        <td class=\"text-right\">${item.final || 'N/A'}</td>\r\n        <td class=\"text-right\">${item.ratio || 'N/A'}</td>\r\n         <td>${item.issued_date}</td>\r\n     </tr>\r\n    `).join('')}\r\n    <tr>\r\n     <td colspan=\"10\" style=\"text-align:right;\"><strong>Total  ${projectData[0]?.item_name} (Ltrs)</strong> &nbsp;&nbsp;&nbsp;&nbsp; <strong>${totalFuel.toFixed(2)}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<div class=\"footer\">\r\n  © ${new Date().getFullYear()} COPEX CONTRACTORS CO. LTD | TIN: 135-489-247 | VRN: 40-032826C<br>\r\n  Msamvu, P.O. BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n  const iframeDoc = iframe.contentWindow.document;\r\n  iframeDoc.open();\r\n  iframeDoc.write(printContent);\r\n  iframeDoc.close();\r\n\r\n  iframe.onload = () => {\r\n    iframe.contentWindow.focus();\r\n    iframe.contentWindow.print();\r\n    setTimeout(() => document.body.removeChild(iframe), 1000);\r\n  };\r\n};\r\n\r\n\r\n    onMounted(() => {     \r\n        getBulkDistribution();\r\n    });\r\n    \r\n</script>\r\n","import script from \"./fuelStatement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./fuelStatement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./fuelStatement.vue?vue&type=style&index=0&id=41c59282&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["showMessage","inject","showError","loadingSpinner","tableShimmer","statement","ref","route","useRoute","useMeta","title","Date","toISOString","substr","user_permissions","JSON","parse","localStorage","getItem","permissions","distributionColumn","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","view_distribution","loading_spinner","total_fuel","axiosInstance","axios","baseURL","process","groupedDistribution","getBulkDistribution","async","value","asset_id","params","url","response","get","groupedData","data","processedGroups","Object","keys","forEach","projectKey","projectStatements","map","index","ratio","consumption_type","quantity","final_reading","initial_reading","toFixed","SNo","item_name","fuel","consuption","issued_date","created_at","toLocaleDateString","day","month","year","task","remark","driver","driver_name","issuer","issuer_name","initial","final","machine","machine_name","type","machine_type","id","project_name","length","allStatements","values","flat","reduce","sum","Number","error","message","console","isSending","role","updateReadings","payload","put","document","getElementById","click","log","printStatement","iframe","createElement","style","display","body","appendChild","assetId","allData","printContent","entries","projectName","projectData","item","join","getFullYear","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","printProjectData","totalFuel","onMounted","__exports__"],"sourceRoot":""}