"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[9325],{59325:function(a,e,l){l.r(e),l.d(e,{default:function(){return L}});l(26699);var t=l(66252),s=l(2262),i=l(3577),o=l(49963),n=l(87066),r=l(56296),c=l(26212),u=l.n(c);const d=a=>((0,t.dD)("data-v-7a8bcabc"),a=a(),(0,t.Cn)(),a),v={class:"layout-px-spacing"},b=(0,t.uE)('<ul class="navbar-nav flex-row mt-2" data-v-7a8bcabc><li data-v-7a8bcabc><div class="page-header" data-v-7a8bcabc><nav class="breadcrumb-one" aria-label="breadcrumb" data-v-7a8bcabc><ol class="breadcrumb" data-v-7a8bcabc><li class="breadcrumb-item" data-v-7a8bcabc><a href="javascript:;" data-v-7a8bcabc>Masters</a></li><li class="breadcrumb-item active" aria-current="page" data-v-7a8bcabc><span data-v-7a8bcabc>GRNs</span></li></ol></nav></div></li></ul>',1),p=["innerHTML"],m={class:"row g-4"},g={class:"group-container p-3 mb-4 shadow rounded",style:{position:"relative"}},h={class:"text-center"},w={class:"fw-bold"},k={class:"d-flex justify-content-end mb-2"},f=["onClick"],y=d((()=>(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},[(0,t._)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,t._)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,t._)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1))),_=[y],x=["onSubmit"],H={key:0,class:"row mb-1"},S={class:"col-md-5"},C={class:"col-md-6"},D=d((()=>(0,t._)("div",{class:"col-md-1"},[(0,t._)("button",{type:"submit",class:"btn btn-primary btn-sm p-2 mt-1"},"save")],-1))),U={class:"list-group list-group-numbered"},V=["onClick"],j=(0,t.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2" data-v-7a8bcabc><polyline points="3 6 5 6 21 6" data-v-7a8bcabc></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-7a8bcabc></path><line x1="10" y1="11" x2="10" y2="17" data-v-7a8bcabc></line><line x1="14" y1="11" x2="14" y2="17" data-v-7a8bcabc></line></svg>',1),M=[j],z=(0,t.Uk)("> ");var I={setup(a){(0,r.j)({title:"Custom Table"});const e=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),l=(0,s.iH)(""),c=(0,t.f3)("loadingIndicator"),d=(JSON.parse(localStorage.getItem("user")),(0,s.iH)(!1)),y=(0,t.f3)("showMessage"),j=(0,t.f3)("showError"),I=(JSON.parse(localStorage.getItem("user")).permissions,(0,s.iH)([])),q=(0,s.iH)([]),E=(0,s.iH)(""),L=a=>{if(E.value="",J.value="",l.value===a.id)l.value="";else{l.value=a.id;const e=a.roles.map((a=>a.name));I.value=K.value.filter((a=>!e.includes(a.name))),q.value=[{id:0,name:"At first",position:0},...a.roles.map((a=>({id:a.id,name:"After "+a.name,position:a.position})))]}},N=()=>{E.value="",J.value="",l.value="",d.value=!1},T=async a=>{d.value=!0,l.value="";const t={approval_group_id:a,position:E.value.position,role_id:J.value.id};e.post("approval-roles",t).then((a=>{B(),N(),y(a.data.message)}))},A=(0,s.iH)([]),B=()=>{e.get("approval-groups").then((a=>{A.value=a.data,d.value=!1}))},J=(0,s.iH)(""),K=(0,s.iH)([]),O=()=>{e.get("roles").then((a=>{K.value=a.data}))},R=async a=>{d.value=!0;try{const l=await e.delete(`approval-roles/${a}`);B(),y(l.data.message),d.value=!1}catch(l){d.value=!1,j("Failed to delete role")}};return(0,t.bv)((()=>{d.value=!0,B(),O()})),(a,e)=>((0,t.wg)(),(0,t.iD)("div",v,[b,d.value?((0,t.wg)(),(0,t.iD)("div",{key:0,innerHTML:(0,s.SU)(c)()},null,8,p)):(0,t.kq)("",!0),(0,t._)("div",m,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(A.value,(a=>((0,t.wg)(),(0,t.iD)("div",{key:a.id,class:"col-md-6"},[(0,t._)("div",g,[(0,t._)("div",h,[(0,t._)("h5",w,(0,i.zw)(a.group_name)+" ("+(0,i.zw)(a.id)+")",1),(0,t._)("div",k,[(0,t._)("button",{onClick:e=>L(a),class:"btn btn-sm p-1 btn-outline-primary"},_,8,f)]),(0,t._)("form",{onSubmit:(0,o.iM)((e=>T(a.id)),["prevent"])},[l.value==a.id?((0,t.wg)(),(0,t.iD)("div",H,[(0,t._)("div",S,[(0,t.Wm)((0,s.SU)(u()),{modelValue:J.value,"onUpdate:modelValue":e[0]||(e[0]=a=>J.value=a),options:I.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select a role"},null,8,["modelValue","options"])]),(0,t._)("div",C,[(0,t.Wm)((0,s.SU)(u()),{modelValue:E.value,"onUpdate:modelValue":e[1]||(e[1]=a=>E.value=a),options:q.value,"close-on-select":!0,label:"name",placeholder:"Select position"},null,8,["modelValue","options"])]),D])):(0,t.kq)("",!0)],40,x),(0,t._)("ol",U,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.roles,(a=>((0,t.wg)(),(0,t.iD)("li",{key:a.id,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,t.Uk)((0,i.zw)(a.name)+" - Position ( "+(0,i.zw)(a.position)+" ) ",1),(0,t._)("button",{class:"btn btn-sm btn-danger p-1",onClick:e=>R(a.id)},M,8,V)])))),128))])])])])))),128))]),z]))}},q=l(83744);const E=(0,q.Z)(I,[["__scopeId","data-v-7a8bcabc"]]);var L=E}}]);
//# sourceMappingURL=9325.d86612da.js.map