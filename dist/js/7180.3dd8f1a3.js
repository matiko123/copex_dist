"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[7180],{57180:function(e,a,t){t.r(a),t.d(a,{default:function(){return Z}});var l=t(66252),s=t(2262),r=t(3577),o=t(49963),n=t(87066),i=t(56296),c=(t(26212),t(42119));const d={class:"layout-px-spacing"},u=(0,l.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="javascript:;">Masters</a></li><li class="breadcrumb-item active" aria-current="page"><span>Good Return Notes Summary</span></li></ol></nav></div></li></ul><h4 class="text-center">GOOD RETURN NOTES</h4>',2),m=["innerHTML"],_={key:1,class:"row layout-top-spacing"},v={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},p={class:"panel p-0"},b={class:"custom-table table3"},g=(0,l._)("div",{class:"d-flex justify-content-center align-items-center"},null,-1),w=["onClick"],y=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"text-primary bi bi-eye",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),(0,l._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"})],-1),h=[y],k={class:"modal fade mymodal",id:"view_store","data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},f={class:"modal-dialog modal-xl"},x={class:"modal-content"},S={class:"modal-header"},q={class:"modal-title fs-5",id:"staticBackdropLabel"},C={class:"modal-body"},H={class:"row layout-top-spacing",style:{"max-height":"67vh","overflow-y":"auto"}},z={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},M={class:"panel p-0"},R={class:"custom-table table3"},D={class:"table table-bordered mb-4"},j=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Item"),(0,l._)("th",null,"Returned Quantity"),(0,l._)("th",null,"Received Quantity"),(0,l._)("th",null,"Remark")])],-1),U=["onUpdate:modelValue"],N=["onUpdate:modelValue"],E={class:"d-flex"},L={class:"ms-auto"},T=["disabled"],V=["innerHTML"],O={key:1},I={key:1,class:"row layout-top-spacing",style:{"max-height":"67vh","overflow-y":"auto"}},P={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},B={class:"panel p-0"},G={class:"custom-table table3"},Y=(0,l._)("div",{class:"d-flex justify-content-center align-items-center"},null,-1),A={key:2,class:"mb-3"},F=(0,l._)("label",{class:"form-label fw-bold"},"Remark:",-1),J={class:"border rounded p-3 bg-light"},Q=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-danger btn-sm py-2 px-2","data-bs-dismiss":"modal"},"Close")],-1);var W={setup(e){(0,i.j)({title:"Return Notes"});const a=n.Z.create({baseURL:"https://bushman.ink/api/v1/"}),t=(0,c.yj)(),y=(0,s.iH)(!1),W=(0,l.f3)("tableShimmer"),K=(0,l.f3)("loadingSpinner"),Z=(JSON.parse(localStorage.getItem("user")),(0,s.iH)(!1)),X=(0,s.iH)(["Sno","return_no","source_store","item","description","quantity_returned","quantity_received","shortage","date_returned","remark"]),$=(0,s.iH)(["SNo","item","returned_quantity","received_quantity","remark"]),ee=((0,l.f3)("showMessage"),(0,l.f3)("showError")),ae=(0,l.f3)("formatDate"),te=((0,l.f3)("enforceMax"),(0,s.iH)("")),le=(0,s.iH)(""),se=(JSON.parse(localStorage.getItem("user")).permissions,(0,s.iH)({perPage:100,perPageValues:[100,200,500],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:[],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1})),re=(0,s.iH)(""),oe=(0,s.iH)(""),ne=e=>{re.value=e,oe.value=e,te.value=e.project||"",le.value=e.name||"",de.value=e.items.map(((e,a)=>({...e,SNo:a+1,item:e.item.name})))},ie=(0,s.iH)([]),ce=async()=>{try{const e=await a.get("good-return-notes"),t=e.data.filter((e=>9===e.status_id)).flatMap((e=>e.items.map(((a,t)=>({...a,Sno:t+1,return_no:a.good_return_note_id,item:a.item.name,description:a.item.description,quantity_returned:a.returned_quantity,quantity_received:a.received_quantity,shortage:a.returned_quantity-a.received_quantity,date_returned:ae(a.created_at),source_store:e.source_store?.project.short_name+" : "+e.source_store?.name})))));ie.value=t}catch(e){ee(e.message)}finally{Z.value=!1}};(0,l.YP)((()=>t.params),(()=>{Z.value=!0,ce()}),{deep:!0});const de=(0,s.iH)([]);return(0,l.bv)((()=>{Z.value=!0,ce()})),(e,a)=>{const t=(0,l.up)("v-client-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",d,[u,Z.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,s.SU)(W)()},null,8,m)):((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("div",v,[(0,l._)("div",p,[(0,l._)("div",b,[(0,l.Wm)(t,{data:ie.value,columns:X.value,options:se.value},{actions:(0,l.w5)((e=>[g,(0,l._)("a",{href:"javascript:;",class:"edit me-2","data-bs-toggle":"modal","data-bs-target":"#view_store",id:"back-modal",onClick:a=>ne(e.row)},h,8,w)])),item:(0,l.w5)((e=>[(0,l._)("span",{class:(0,r.C_)(e.row.shortage>0?"text-danger":"text-dark")},(0,r.zw)(e.row.item),3)])),remark:(0,l.w5)((e=>[(0,l._)("span",{class:(0,r.C_)(e.row.shortage>0?"text-danger":"text-dark")},(0,r.zw)(e.row.remark),3)])),date_returned:(0,l.w5)((e=>[(0,l._)("span",{class:(0,r.C_)(e.row.shortage>0?"text-danger":"text-dark")},(0,r.zw)(e.row.date_returned),3)])),quantity_received:(0,l.w5)((e=>[(0,l._)("span",{class:(0,r.C_)(e.row.shortage>0?"text-danger":"text-dark")},(0,r.zw)(e.row.quantity_received),3)])),shortage:(0,l.w5)((e=>[(0,l._)("span",{class:(0,r.C_)(e.row.shortage>0?"text-danger":"text-dark")},(0,r.zw)(e.row.shortage),3)])),source_store:(0,l.w5)((e=>[(0,l._)("span",{class:(0,r.C_)(e.row.shortage>0?"text-danger":"text-dark")},(0,r.zw)(e.row.source_store),3)])),_:1},8,["data","columns","options"])])])])]))]),(0,l._)("div",k,[(0,l._)("div",f,[(0,l._)("div",x,[(0,l._)("div",S,[(0,l._)("h1",q,(0,r.zw)(re.value.project)+" - "+(0,r.zw)(re.value.name),1),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"close",onClick:a[0]||(a[0]=(...a)=>e.clearForm&&e.clearForm(...a))})]),(0,l._)("div",C,[9===oe.value.status_id?((0,l.wg)(),(0,l.iD)("form",{key:0,onSubmit:a[2]||(a[2]=(0,o.iM)((a=>e.receiverRemark(oe.value)),["prevent"]))},[(0,l._)("div",H,[(0,l._)("div",z,[(0,l._)("div",M,[(0,l._)("div",R,[(0,l._)("table",D,[j,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(de.value,((e,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id||a},[(0,l._)("td",null,(0,r.zw)(e.item),1),(0,l._)("td",null,(0,r.zw)(e.returned_quantity),1),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a=>e.received_quantity=a,placeholder:"Enter received quantity",min:"0",required:""},null,8,U),[[o.nr,e.received_quantity]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>e.remark=a,placeholder:"Enter Remark"},null,8,N),[[o.nr,e.remark]])])])))),128))])])])])])]),(0,l.wy)((0,l._)("textarea",{class:"form-control",placeholder:"Enter General Remarks","onUpdate:modelValue":a[1]||(a[1]=a=>e.remark=a)},null,512),[[o.nr,e.remark]]),(0,l._)("div",E,[(0,l._)("div",L,[(0,l._)("button",{type:"submit",class:"btn btn-primary mt-1",disabled:y.value},[y.value?((0,l.wg)(),(0,l.iD)("span",{key:0,innerHTML:(0,s.SU)(K)()},null,8,V)):((0,l.wg)(),(0,l.iD)("span",O," Submit "))],8,T)])])],32)):((0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("div",P,[(0,l._)("div",B,[(0,l._)("div",G,[(0,l.Wm)(t,{data:de.value,columns:$.value,options:se.value},{actions:(0,l.w5)((e=>[Y])),_:1},8,["data","columns","options"])])])])])),oe.value.remark?((0,l.wg)(),(0,l.iD)("div",A,[F,(0,l._)("div",J,(0,r.zw)(oe.value.remark),1)])):(0,l.kq)("",!0)]),Q])])])],64)}}};const K=W;var Z=K}}]);
//# sourceMappingURL=7180.3dd8f1a3.js.map