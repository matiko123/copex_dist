{"version":3,"file":"js/4872.4f20fb30.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/globalSearch.js","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue?f760","webpack://cork-vue3/./src/views/approvalChain/index.vue","webpack://cork-vue3/./src/views/approvalChain/index.vue?253b"],"sourcesContent":["export function globalSearch(data, keyword) {\r\n  const lowerKeyword = keyword.toLowerCase().trim()\r\n  if (!lowerKeyword) return data\r\n\r\n  const containsKeyword = obj => {\r\n    if (obj == null) return false\r\n    if (typeof obj === 'string') return obj.toLowerCase().includes(lowerKeyword)\r\n    if (Array.isArray(obj)) return obj.some(containsKeyword)\r\n    if (typeof obj === 'object')\r\n      return Object.values(obj).some(containsKeyword)\r\n    return false\r\n  }\r\n\r\n  return data.filter(item => containsKeyword(item))\r\n}","<template>\r\n     <form @submit.prevent class=\"input-group container\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control border-end-0\"\r\n      placeholder=\"Search a word...\"\r\n      v-model=\"filter\"\r\n    >\r\n    <span class=\"input-group-text bg-white border-start-0\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z\"/>\r\n      </svg>\r\n    </span>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\n\r\n\r\nconst emit = defineEmits(['update:filterValue'])\r\nconst props = defineProps({\r\n  filterValue: String\r\n})\r\nconst filter = ref(props.filterValue || null)\r\n\r\nwatch(filter, val => emit('update:filterValue', val))\r\n</script>\r\n","import script from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"layout-px-spacing\">\r\n    <ul class=\"navbar-nav flex-row mt-2\">\r\n      <li>\r\n        <div class=\"page-header\">\r\n          <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb\">\r\n              <li class=\"breadcrumb-item\"><a href=\"javascript:;\">{{ approvalGroup.group }}</a></li>\r\n              <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n                 Purchase / Payment Approal Chain \r\n              </li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n\r\n\r\n<global-search-field\r\nv-model:filterValue=\"filter\"\r\n/>\r\n<div class=\"d-flex align-items-center justify-content-between mb-3 mt-3\">\r\n\r\n  <router-link to=\"/requisitions/all\" class=\"btn btn-primary\" v-if=\"user_permissions.includes('can_view_requisitions')\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-box-arrow-in-left\" viewBox=\"0 0 16 16\">\r\n      <path fill-rule=\"evenodd\" d=\"M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0z\"/>\r\n      <path fill-rule=\"evenodd\" d=\"M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708z\"/>\r\n    </svg>\r\n    Requisitions\r\n  </router-link>\r\n\r\n  <h3 class=\"text-center m-0 flex-grow-1\" v-if=\"!mobileView\">\r\n    {{ date.toUpperCase() }}\r\n    {{\r\n      approvalGroup?.group?.toLowerCase().includes('labour')\r\n        ? \"LABOUR REQUEST\"\r\n        : approvalGroup?.group?.toLowerCase().includes('voucher')\r\n          ? \"PAYMENT VOUCHERS\"\r\n          : \"LOCAL PURCHASE ORDERS\"\r\n    }}\r\n  </h3>\r\n\r\n  <router-link to=\"/good-received-notes/dashboard\" class=\"btn btn-secondary\">\r\n    GRN\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-arrow-right-square\" viewBox=\"0 0 16 16\">\r\n      <path fill-rule=\"evenodd\" d=\"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm4.5 5.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z\"/>\r\n    </svg>\r\n  </router-link>\r\n\r\n</div>\r\n\r\n\r\n<div class=\"mb-3 d-flex justify-content-end align-items-center gap-2\">\r\n  <div style=\"display: inline-block; min-width: 200px;\">\r\n    <multiselect \r\n      v-model=\"status\"\r\n      :options=\"statuses\"\r\n      placeholder=\"Select Status\"\r\n      label=\"name\"\r\n      :searchable=\"true\"\r\n      :multiple=\"false\"\r\n      :required=\"true\"\r\n      :allow-empty=\"true\"\r\n    />  \r\n  </div>\r\n  <input type=\"date\" class=\"form-control w-auto\" v-model=\"date\">\r\n</div>\r\n\r\n\r\n\r\n<div class=\"d-flex justify-content-end flex-wrap gap-2\">\r\n  <button class=\"btn btn-success\" @click=\"printReport()\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n      <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n    </svg>\r\n  </button>\r\n\r\n  <button class=\"btn btn-dark\" @click=\"date='all',getApprovalItems()\">Fetch {{ status?.name ?? 'All' }} Data</button>\r\n\r\n  <button \r\n    class=\"btn btn-primary\" \r\n    @click=\"getApprovalItems()\"\r\n  >\r\n    Refresh\r\n  </button>\r\n</div>\r\n\r\n\r\n\r\n    <div class=\"row layout-top-spacing\">\r\n      <div v-if=\"loading\" v-html=\"tableShimmer()\"></div>\r\n      <div \r\n      v-else\r\n      class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n        <div class=\"panel p-0\">\r\n          <div class=\"custom-table table3\">\r\n            <v-client-table :data=\"filteredData\" :columns=\"columns\" :options=\"table_option\">\r\n\r\n              <template #status=\"props\">\r\n                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                  {{ props.row.status.name }}\r\n                </span>\r\n              </template>\r\n              <template #requisition=\"props\">\r\n                 <router-link\r\n                 v-if=\"props.row.type === 'Labour Request'\"\r\n                 class=\"text-primary\" :to=\"`/approval/${props.row.requisition}`\" title=\"Click to see requisition\">{{ props.row.requisition }}</router-link>\r\n                 <router-link \r\n                 v-else\r\n                 class=\"text-primary\" :to=\"`/requisition/${props.row.requisition}`\" title=\"Click to see requisition\">{{ props.row.requisition }}</router-link>\r\n              </template>\r\n              <template #actions=\"props\">\r\n                <a\r\n                  @click=\"getApprovalChain(props.row)\"\r\n                  data-bs-toggle=\"modal\"\r\n                  data-bs-target=\"#approval\"\r\n                  href=\"javascript:void(0);\"\r\n                  class=\"text-primary\"\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\" />\r\n                    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\" />\r\n                  </svg>\r\n                </a>\r\n\r\n                <a \r\n                v-if=\"user_permissions.includes('can_print_lpo')  && ((props.row?.status?.name === 'approved' || props.row?.status?.name === 'paid') || user_permissions.includes('is_programmer'))\"\r\n                href=\"javascript:void(0);\" @click=\"printGeneralOrder(props.row,props.row.vendor_data)\" class=\"text-success me-2\">\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\r\n  </svg>\r\n                </a>\r\n\r\n                <a \r\n                v-if=\"user_permissions.includes('can_print_lpo') && (props.row?.status?.name === 'approved' || props.row?.status?.name === 'paid') \"\r\n                href=\"javascript:void(0);\" @click=\"downloadVoucherPDF(props.row,props.row.vendor_data)\" class=\"text-dark\">\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-download\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v3.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3.5a.5.5 0 0 1 1 0v3.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-3.5a.5.5 0 0 1 .5-.5\"/>\r\n  <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z\"/>\r\n</svg>\r\n                </a>\r\n\r\n                <a \r\n                v-if=\"user_permissions.includes('can_delete_lpo')\"\r\n                href=\"javascript:void(0);\" @click=\"deleteApproval(props.row)\" class=\"text-danger\">\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"/>\r\n  <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"/>\r\n</svg>\r\n                </a>\r\n\r\n\r\n\r\n\r\n\r\n   \r\n                <!-- modal trigger only -->\r\n              </template>\r\n            </v-client-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Modal -->\r\n  <div\r\n    class=\"modal fade mymodal\"\r\n    id=\"approval\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    data-bs-backdrop=\"false\" \r\n    ref=\"approvalModal\"\r\n  >\r\n    <div class=\"modal-dialog modal-fullscreen\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\" >Approval Chain  </h5>\r\n          <button type=\"button\" data-dismiss=\"modal\" data-bs-dismiss=\"modal\" aria-label=\"Close\" class=\"btn-close\" @click=\"clearForm()\" id=\"close-approval-modal\"></button>\r\n        </div>\r\n\r\n             <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3 table-responsive\">\r\n<table class=\"table table-bordered table-striped\">\r\n      <thead >\r\n        <tr>\r\n          <th>Order No</th>\r\n          <th >Requester</th>\r\n          <th>Date Requested</th>\r\n          <th>Purpose</th>\r\n          <th>Approval Chain</th>\r\n          <th v-if=\"item.project\">Project</th>\r\n          <th v-if=\"item.vendor\">\r\n          <span\r\n           v-if=\"item?.type?.toLowerCase().includes('voucher')\"\r\n          >\r\n           Beneficiary\r\n          </span>\r\n          <span v-else>\r\n           Vendor\r\n          </span>\r\n          </th>\r\n          <th>Awaits</th>\r\n          <th>Cost</th>\r\n          <th   v-if=\"user_permissions.includes('can_print_lpo')\">Action</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr >\r\n          <td>{{ item?.approval }}</td>\r\n          <td >{{ item.requester }}</td>\r\n          <td>{{ item?.date }}</td>\r\n          <td>{{item?.type }}</td>\r\n          <td>{{item?.purpose }}</td>\r\n          <td v-if=\"item.project\">{{ item.project }}</td>\r\n          <td v-if=\"item.vendor\">{{ item.vendor }}</td>\r\n          <td>{{ item?.awaits }}</td>\r\n          <td>{{ item?.cost }}</td>\r\n          <td>\r\n              <a \r\n                v-if=\"user_permissions.includes('can_print_lpo') && ((item?.status?.name === 'approved' || item?.status?.name === 'paid') || user_permissions.includes('is_programmer')) \"\r\n                href=\"javascript:void(0);\" @click=\"printGeneralOrder(item,item.vendor_data)\" class=\"text-success me-2\">\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\r\n  </svg>\r\n</a>\r\n<button \r\n@click=\"toggleApproval()\"\r\nv-if=\"item.purpose === 'Labour Request' && user_permissions.includes('can_create_labour_voucher')\"\r\nclass=\"btn btn-outline-primary\">Create Voucher</button>\r\n<router-link :to=\"`/report/labour-payments/${item.id}`\" v-if=\"item.purpose === 'Labour Request'\" class=\"text-primary\">\r\n  view History\r\n</router-link>\r\n          </td>\r\n        </tr>\r\n    <tr v-if=\"item.description \">\r\n      <td colspan=\"8\">\r\n        <b> Brief Description : </b>\r\n        {{ item.description }}\r\n        <span v-if=\"approval_description\"> ( {{ approval_description }} )</span>\r\n      </td>\r\n\r\n    </tr>\r\n      <tr v-if=\"item.remark\">\r\n      <td colspan=\"8\"> <b> Remark :  </b> {{ item.remark }}</td>\r\n    </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    </div>\r\n    </div>\r\n    </div>\r\n\r\n       \r\n          <div \r\n           v-if=\"item.status?.name === 'approved' && user_permissions.includes('can_complete_transaction')\"\r\n           class=\"d-flex justify-content-center mt-2 mb-2\">\r\n    <button class=\"btn btn-primary\" type=\"button\" :disabled=\"loading\" @click=\"complete_transaction =! complete_transaction\">\r\n      <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Paid</span>\r\n    </button>\r\n</div>\r\n <form v-if=\"complete_transaction\" @submit.prevent=\"completeTransaction(item.id)\">\r\n    <div class=\"input-group container\"  >\r\n  <input type=\"text\" class=\"form-control\"\r\n   placeholder=\"Enter Any remark \"\r\n    v-model=\"remark\">\r\n  <button \r\n  class=\"btn btn-primary me-2\" type=\"submit\" :disabled=\"loading\">\r\n  <span  v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n  <span v-else>Save</span>\r\n  </button>\r\n</div>\r\n </form>\r\n\r\n\r\n \r\n\r\n        <div class=\"modal-body\">\r\n\r\n<div class=\"text-center mb-2\">\r\n  <div class=\"btn-group mb-2\">\r\n    <button\r\n      class=\"btn btn-secondary me-2\"\r\n      @click=\"changeStatus(item.id,3)\"\r\n      :disabled=\"spinner\"\r\n      v-if=\"user_permissions.includes('is_programmer') && item.status?.name === 'paid'\"\r\n    >\r\n      Mark Approved\r\n    </button>\r\n\r\n    <button\r\n      class=\"btn btn-success\"\r\n      @click=\"fillReceipt =! fillReceipt\"\r\n      :disabled=\"spinner\"\r\n      v-if=\"user_permissions.includes('can_complete_transaction') && item.status?.name === 'paid'\"\r\n    >\r\n      Attach Receipt\r\n    </button>\r\n  </div>\r\n\r\n  <div v-if=\"fillReceipt\" class=\"d-flex justify-content-center align-items-end gap-2\">\r\n    <input\r\n      class=\"form-control w-25\"\r\n      type=\"file\"\r\n      @change=\"handleFileUpload\"\r\n      accept=\"application/pdf\"\r\n      required\r\n    >\r\n    <input type=\"date\" v-model=\"receipt_date\" class=\"form-control w-25\">\r\n\r\n    <button class=\"btn btn-primary\" @click=\"submitReceipt\" :disabled=\"spinner\">\r\n      <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Submit</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n          <div class=\"d-flex justify-content-center mb-2\"  v-if=\"((user_role_id == awaiter.role_id && awaits !=='no one')) || (user_permissions.includes('is_md') && item.status?.name !== 'paid') || (user_role_id == item.last_checker_id && awaits ==='no one')\">    \r\n    <div class=\"btn-group\" >\r\n\r\n\r\n\r\n            <button class=\"btn btn-secondary me-2\" @click=\"changeStatus(item.id,2)\" :disabled=\"spinner\" v-if=\"(user_permissions.includes('is_md') || user_permissions.includes('is_programmer')) && item.status?.name ==='approved'\">\r\n              Unapprove\r\n            </button>\r\n\r\n            <button class=\"btn btn-primary me-2\" @click=\"approval_status = 3\" :disabled=\"spinner\">\r\n              Check \r\n            </button>\r\n            <button class=\"btn btn-danger me-2\" @click=\"approval_status = 4\" :disabled=\"spinner\">\r\n              Reject\r\n            </button>\r\n\r\n            <button class=\"btn btn-info me-2\" @click=\"approval_status = 14\" :disabled=\"spinner\">\r\n              Remark\r\n            </button>\r\n\r\n            \r\n            <button class=\"btn btn-warning\" @click=\"approval_status = 17\" :disabled=\"spinner\">\r\n              On Hold\r\n            </button>\r\n\r\n\r\n\r\n          </div>\r\n            </div>\r\n   \r\n      <!-- <p class=\"text-center\">{{ status == 3 ? 'Enter Approval Remark' : status == 4 ? 'Enter Rejection Remark' : 'Enter Remark' }}</p> -->\r\n      <div v-if=\"approval_status\" class=\"mb-2 text-center\">\r\n        <span\r\n          class=\"badge rounded-pill\"\r\n          :class=\"{\r\n            'bg-danger': approval_status == 4,\r\n            'bg-success': approval_status == 3,\r\n            'bg-info': approval_status == 14,\r\n            'bg-warning': approval_status == 17\r\n          }\"\r\n          style=\"font-size: 1rem;\"\r\n        >\r\n          {{\r\n            approval_status == 3\r\n              ? 'Check / Approve Request'\r\n              : approval_status == 4\r\n              ? 'Reject Request'\r\n              : 'Fill Remark'\r\n          }}\r\n        </span>\r\n      </div>\r\n\r\n<div class=\"input-group\"  v-if=\"approval_status\">\r\n  <input type=\"text\" class=\"form-control\"\r\n    :placeholder=\"approval_status == 3 ? 'Enter Approval Remark' : approval_status == 4 ? 'Enter Rejection Remark' : 'Enter Remark'\" \r\n    v-model=\"remark\">\r\n  <button \r\n     @click=\"onApproveClick()\"\r\n  class=\"btn btn-primary me-2\" type=\"button\" :disabled=\"spinner\">\r\n  <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n  <span v-else>Save</span>\r\n  </button>\r\n</div>\r\n\r\n\r\n       \r\n      \r\n   \r\n        <div class=\"custom-table table3 table-responsive\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th v-for=\"chain in approvalChain\" :key=\"chain.role_id || chain.position || chain.name\">\r\n                  {{ chain.name }} <br/>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td\r\n                  v-for=\"(role, idx) in approvalChain\"\r\n                  :key=\"role.role_id || role.position || idx\"\r\n                  :class=\"role?.status?.color ? 'text-' + role.status.color : 'text-danger'\"\r\n                >\r\n                <span> {{ role?.status?.name ?? 'Unchecked' }}</span><br/>\r\n                <span class=\"text-dark\" v-if=\"role.approved_at\">Checked At  :{{ formatDate(role.approved_at) }} </span>  <br>\r\n                <span class=\"text-dark\" v-if=\"role.remark\">Remark :  {{ role.remark }}</span> \r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <!-- approval items starts -->\r\n        <h4 class=\"text-center\" style=\"font-size: 1.3rem;\">APPROVAL ITEMS</h4>\r\n        <div class=\"d-flex justify-content-center mb-3\">\r\n          <input\r\n            v-if=\"create_approval\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            style=\"max-width: 350px; font-size: 1rem;\"\r\n            placeholder=\"Enter Brief Description \"\r\n            v-model=\"description\"\r\n          >\r\n        </div>\r\n        <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n          <div class=\"panel p-0\">\r\n            <div class=\"custom-table table3 table-responsive\">\r\n              <table class=\"table table-bordered table-striped\">\r\n      <thead >\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>Item</th>\r\n          <th>Decription</th>\r\n          <th>Quantity</th>\r\n          <th>Unit</th>\r\n          <th>Rate</th>\r\n          <th>Total</th>\r\n          <th>Receiver</th>\r\n          <th   v-if=\"create_approval\" class=\"text-center\" >select</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"reqItem in requisitionItems\">\r\n           <td>{{ reqItem.order_item_id }}</td>\r\n          <td>{{ reqItem.item }}</td>\r\n          <td>\r\n               <router-link class=\"btn btn-outline-primary\" :to=\"`/requisition-budget/${reqItem.requisition_items.item_id}`\"  v-if =\"item.requisition_type ==='budget' && !reqItem.requisition_items.asset_id\">  \r\n               {{ reqItem.description }}\r\n              </router-link>\r\n              <span v-else> \r\n                <span v-if=\"reqItem.selected\">\r\n                     {{ reqItem.description }} ( {{ reqItem.request_description }} )\r\n                </span>\r\n                <span v-else>\r\n                       {{ reqItem.description }}\r\n                </span>\r\n              \r\n              </span>\r\n           </td>\r\n          <td @click=\"editApprovalItem(reqItem.id)\">{{ reqItem.quantity}}   \r\n            <span v-if=\"reqItem?.requested_sum\">\r\n             <br> \r\n            Requested : {{ reqItem?.requested_sum }}\r\n            <br>\r\n            Balance :{{ (reqItem.quantity - reqItem?.requested_sum).toFixed(2) }}  \r\n            </span>\r\n\r\n            <span v-if=\"reqItem.selected\"> <br>Requesting : {{ reqItem.requesting_quantity }} </span>\r\n            <input v-if=\"edit_item == reqItem.id\" type=\"number\" class=\"form-control\" placeholder=\"Quantity\" step=\"any\" v-model=\"reqItem.quantity\">\r\n          </td>\r\n          <td>\r\n            {{ reqItem.requisition_items.units }}\r\n          </td>\r\n          <td @click=\"editApprovalItem(reqItem.id)\">\r\n            {{ reqItem.rate }}\r\n          <input v-if=\"edit_item == reqItem.id\" type=\"number\" class=\"form-control\" placeholder=\"Quantity\" step=\"any\" v-model=\"reqItem.rate_original\">\r\n\r\n          </td>\r\n          <td>\r\n\r\n            <span>\r\n              <!-- {{ reqItem.total }}<br> -->\r\n              {{ formatNumber(reqItem.quantity * reqItem.rate_original) }}<br>\r\n            </span>\r\n            <span v-if=\"reqItem.selected\">\r\n                Requesting : {{ formatNumber(reqItem.requesting_quantity * reqItem.rate_original) }}\r\n            </span>\r\n\r\n          </td>\r\n          <td>{{ reqItem.receiver ?? reqItem.beneficiary }}</td>\r\n          <td  \r\n          v-if=\"create_approval\"\r\n          class=\"text-center\" >\r\n                <svg\r\n     v-if=\"reqItem.selected\"\r\n      @click=\"reqItem.selected =! reqItem.selected\"\r\n      xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\"\r\n      fill=\"currentColor\" class=\"bi bi-check2-circle\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0\"/>\r\n      <path d=\"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z\"/>\r\n    </svg>\r\n\r\n    <svg\r\n    v-else\r\n     @click=\"reqItem.selected =! reqItem.selected\"\r\n      xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\"\r\n      fill=\"currentColor\" class=\"bi bi-circle\" viewBox=\"0 0 16 16\">\r\n      <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16\"/>\r\n    </svg>\r\n        <input v-if=\"reqItem.selected\" type=\"number\" placeholder=\"enter quantity\" class=\"form-control w-75\" step=\"any\"\r\n         v-model=\"reqItem.requesting_quantity\"\r\n          @input=\"reqItem.requesting_quantity = enforceMax(reqItem.requesting_quantity,(reqItem.quantity - reqItem?.requested_sum).toFixed(2))\"\r\n         >\r\n\r\n          <input v-if=\"reqItem.selected\" type=\"text\" placeholder=\"enter Description\" class=\"form-control w-75 mt-1\" v-model=\"reqItem.request_description\">\r\n          <input v-if=\"reqItem.selected\" type=\"text\" placeholder=\"enter Beneficiary\" class=\"form-control w-75 mt-1\"   v-model=\"reqItem.receiver\">\r\n\r\n          </td>\r\n          <td>\r\n                      <router-link  :to=\"`/assets/fuel-statement/${reqItem.requisition_items.asset_id}`\"  v-if =\"reqItem.requisition_items.asset_id\" class=\"me-2\">     \r\n                            <button class=\"btn btn-outline-primary me-2\">Diesel </button>\r\n                      </router-link>  \r\n\r\n                       <router-link  :to=\"`/requisition-budget/${reqItem.requisition_items.item_id}`\"  v-if =\"item.requisition_type ==='budget'\">     \r\n                            <button class=\"btn btn-outline-primary me-2\">Budget</button>\r\n                      </router-link>  \r\n                        <router-link  :to=\"`/jobcard/${item.source_id}/${reqItem.requisition_items.asset_id}`\"  v-if =\"item.requisition_type ==='jobcard'\" class=\"me-2\">     \r\n                            <button class=\"btn btn-outline-primary me-2\">Jobcard</button>\r\n                      </router-link>  \r\n                         <router-link  :to=\"`/subcontractor/${approval.subcontractor_agreement_id}`\"  v-if =\"approval.subcontractor_agreement_id\">     \r\n                            <button class=\"btn btn-outline-primary me-2\">Subcontractor</button>\r\n                      </router-link>  \r\n\r\n                      <button\r\n                       v-if=\"user_permissions.includes('can_print_lpo') && ((item.status.name === 'approved' || item.status.name === 'paid') || user_permissions.includes('is_programmer')) \"\r\n                      class=\"btn btn-outline-success me-2\"\r\n                      @click=\"printOrder(reqItem,item)\"\r\n                      >\r\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\r\n  </svg>\r\n\r\n                      </button>\r\n                      <button\r\n                      v-if=\"item.status?.name === 'approved' && user_permissions.includes('can_complete_transaction')\"\r\n                       class=\"btn btn-primary\"\r\n                          data-bs-toggle=\"modal\" data-bs-target=\"#payment-proof\"\r\n                          @click=\"fillProofData(reqItem,item)\"\r\n                      >Paid</button>\r\n          </td>\r\n    </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- approval items ends -->\r\n\r\n<div\r\n    v-if=\"item?.items?.[0]?.requisition_items?.requisition_type?.requisition?.attachment\"\r\n>\r\n\r\n    <h4 class=\"text-center\">PROFORMA INVOICE</h4>\r\n    <a\r\n        :href=\"`https://bushman.ink/${item.items[0].requisition_items.requisition_type.requisition.attachment}`\"\r\n        target=\"_blank\"\r\n        style=\"display: block;\"\r\n    >\r\n        <iframe\r\n            :src=\"`https://bushman.ink/${item.items[0].requisition_items.requisition_type.requisition.attachment}`\"\r\n            width=\"100%\"\r\n            height=\"1000\"\r\n            style=\"border: none; pointer-events: none;\"\r\n        ></iframe>\r\n    </a>\r\n</div>\r\n\r\n        <div v-if=\"approvalTransactions.length > 0\" class=\"row layout-top-spacing\">\r\n          <h4 class=\"text-center\">PROOF OF PAYMENT</h4>\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"approvalTransactions\" :columns=\"approval_transactions_columns\" :options=\"table_option\">\r\n                   \r\n                            <template #attachment=\"props\">\r\n                                <!-- <a :href=\"props.row.attachment\" target=\"_blank\" class=\"text-primary\">\r\n                                    Open Attachment\r\n                                </a> -->\r\n                                <a :href=\"props.row.attachment\"\r\n                                          target=\"_blank\"\r\n                                          class=\"badge badge-primary text-white\"\r\n                                          style=\"cursor: pointer;\"\r\n                                          @click=\"fillTransaction(props.row)\"\r\n                                >\r\n                                    Open Attachment\r\n                              </a>\r\n                            </template>\r\n\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n                <div v-if=\"receipts.length > 0\" class=\"row layout-top-spacing\">\r\n          <h4 class=\"text-center\">ORDER RECEIPTS</h4>\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"receipts\" :columns=\"receipt_columns\" :options=\"table_option\">\r\n                   \r\n                            <template #attachment=\"props\">\r\n                                <!-- <a :href=\"props.row.attachment\" target=\"_blank\" class=\"text-primary\">\r\n                                    Open Attachment\r\n                                </a> -->\r\n                                <a :href=\"props.row.attachment\"\r\n                                          target=\"_blank\"\r\n                                          class=\"badge badge-primary text-white\"\r\n                                          style=\"cursor: pointer;\"\r\n                                          @click=\"fillTransaction(props.row)\"\r\n                                >\r\n                                    Open Attachment\r\n                              </a>\r\n                            </template>\r\n\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n \r\n        </div>\r\n\r\n\r\n\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-primary \" data-dismiss=\"modal\" data-bs-dismiss=\"modal\" @click=\"clearForm()\">close</button>\r\n            <button   class=\"btn btn-success\" v-if=\"create_approval\" @click=\"createApproval()\" :disabled=\"loading\">\r\n      <span v-if=\"loading\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Submit</span>\r\n    </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- modal ends -->\r\n\r\n   <!-- payment modal starts -->\r\n    \r\n                 <div class=\"modal fade mymodal\" id=\"payment-proof\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\"> PROOF OF PAYMENT</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close-proof-modal\" ></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n\r\n   <div class=\"custom-table table3 table-responsive\">\r\n<table class=\"table table-bordered table-striped\">\r\n      <thead >\r\n        <tr>\r\n           <th>Order No</th>\r\n          <th>Item No</th>\r\n          <th >Requester</th>\r\n          <th>Date Requested</th>\r\n          <th>Purpose</th>\r\n          <th>Approval Chain</th>\r\n          <th v-if=\"item.project\">Project</th>\r\n          <th>Cost</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr>\r\n\r\n          <td>{{ proof?.approval }}</td>\r\n          <td>{{ proof_item?.id }}</td>\r\n          <td>{{proof.requester }}</td>\r\n          <td>{{proof?.date }}</td>\r\n          <td>{{proof?.type }}</td>\r\n          <td>{{proof?.purpose }}</td>\r\n          <td v-if=\"proof.project\">{{ proof.project }}</td>\r\n          <td>{{ formatNumber(proof_item?.quantity * proof_item.rate_original) }}</td>   \r\n      </tr>\r\n      <tr v-if=\"proof_item.item\">\r\n        <td  colspan=\"9\">\r\n          Item :  {{ proof_item.item }}\r\n        </td>\r\n            </tr>\r\n      <tr v-if=\"proof_item.description\" >\r\n        <td colspan=\"9\">\r\n          Description :  {{ proof_item.description }}\r\n        </td>\r\n            </tr>\r\n      <tr v-if=\"proof.remark\">\r\n        <td colspan=\"9\">\r\n          Briefing :  {{ proof.remark }}\r\n        </td>\r\n      </tr>\r\n        </tbody>\r\n        </table>\r\n        </div>\r\n      <div class=\"row layout-top-spacing\" >\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                      <div class=\"row\">\r\n                        <div class=\"col-md-6\">\r\n                          <label class=\"form-label\">Reference Number </label>\r\n                          <input  class=\"form-control\" type=\"text\"  placeholder=\"Enter Reference Number\" v-model=\"reference_number\">\r\n                        </div>\r\n\r\n                           <div class=\"col-md-6\">\r\n                          <label class=\"form-label\">Paid From </label>\r\n             <multiselect \r\n                v-model=\"account\"\r\n                :options= \"accounts\"\r\n                placeholder=\"Select Account\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n           />                      \r\n                        </div>\r\n\r\n                        <div class=\"col-md-3\">\r\n                          <label class=\"form-label\">Amount</label>\r\n                          <input  class=\"form-control\" type=\"number\"  step=\"any\"  placeholder=\"Enter Amount\" v-model=\"amount\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4\">\r\n                          <label class=\"form-label\">Receiver</label>\r\n                          <input  class=\"form-control\" type=\"text\"    placeholder=\"Enter Receiver\" v-model=\"receiver\">\r\n                        </div>\r\n\r\n                           <div class=\"col-md-2\">\r\n                          <label class=\"form-label\">Date </label>\r\n                          <input  class=\"form-control\" type=\"date\" v-model=\"date\" >\r\n                        </div>\r\n\r\n                        \r\n                           <div class=\"col-md-3\">\r\n                          <label class=\"form-label\">Attachment </label>\r\n                          <input  class=\"form-control\" type=\"file\"\r\n                            @change=\"handleFileUpload\"\r\n                            accept=\"application/pdf\"\r\n                          >\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12\">\r\n                          <label class=\"form-label\">Remark</label>\r\n                          <input  class=\"form-control\" type=\"text\"    placeholder=\"Enter Remark\" v-model=\"description\">\r\n                        </div>\r\n\r\n                      </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger   me-2\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"button\" class=\"btn btn-success\" @click=\"submitProof()\">Save</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n    <!-- payment modal ends -->\r\n</template>\r\n\r\n<style>\r\n.table3 .actions svg {\r\n  padding: 2px;\r\n}\r\n</style>\r\n\r\n<script setup>\r\nimport { onMounted, onBeforeUnmount, ref, inject, computed } from 'vue';\r\nimport axios from 'axios';\r\nimport { useMeta } from '@/composables/use-meta';\r\nimport globalSearchField from '@/components/reusables/globalSearchField.vue';\r\nimport { globalSearch } from '@/components/reusables/globalSearch';\r\nimport Multiselect from '@suadelabs/vue3-multiselect';\r\nimport '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n\r\nconst filter = ref('')\r\n\r\nuseMeta({ title: 'Approval Chains' });\r\n import { useRoute } from 'vue-router';\r\nconst route = useRoute();\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.VUE_APP_API_BASE_URL\r\n});\r\nimport { watch } from 'vue';\r\nconst showConfirmation = inject('showConfirmation');\r\n\r\nconst approval_status = ref('')\r\n\r\nconst statuses = ref([\r\n    {\r\n    id: 'all',\r\n    name : 'All'\r\n  },\r\n\r\n  {\r\n    id: 2,\r\n    name : 'Unapproved'\r\n  },\r\n  {\r\n    id :3,\r\n    name :'Approved'\r\n  },\r\n  {\r\n    id : 4,\r\n    name : 'Rejected'\r\n  },\r\n    {\r\n    id : 17,\r\n    name : 'On Hold'\r\n  },\r\n    {\r\n    id : 14,\r\n    name : 'Remarked'\r\n  },\r\n\r\n    {\r\n    id : 16,\r\n    name : 'Paid'\r\n  },\r\n\r\n])\r\nconst complete_transaction = ref(false)\r\nconst completeTransaction = async (id)=>{\r\n  const payload = {\r\n    status_id : 16,\r\n    remark : remark.value,\r\n    approval_list_id : id,\r\n    approval_item_id: item_id.value,\r\n    requisition_type: requisition_source_item_id.value.requisition_type,\r\n      requisition_items : requisition_source_item_id.value.items.map((item)=>({\r\n      source_id: item.requisition_items.item_id,\r\n      cost : item.requisition_items.quantity * item.requisition_items.rate,\r\n      description : item.requisition_items.description,\r\n      remark : \"From LPO NO : \" + item_id.value + \" created on date \" + item_date.value,\r\n      remarker_id : JSON.parse(localStorage.getItem('user')).id,\r\n      remarker : JSON.parse(localStorage.getItem('user')).name\r\n    })),\r\n  }\r\n  try{\r\n        loading.value = true\r\n    const response = await axiosInstance.put(`complete-transaction/${id}`,payload)\r\n    showMessage('Transaction Completed')\r\n   getApprovalItems()\r\n   remark.value = ''\r\n   complete_transaction.value = false\r\n    document.getElementById('close-approval-modal').click()\r\n  }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst create_approval = ref(false)\r\nconst toggleApproval = ()=>{\r\n  create_approval.value =! create_approval.value\r\n}\r\n\r\nconst beneficiary = ref('')\r\nconst description = ref('')\r\nconst createApproval = async () => {\r\n  loading.value = true\r\n  const payload = {\r\n      labour_request_id : item.value.id,\r\n      approval_group_id: 8,\r\n      source: 'Labour Request',\r\n      source_id: item.value.approval_id,\r\n      requester_id: user_id,\r\n      beneficiary : beneficiary.value,\r\n      description : description.value,\r\n    items: requisitionItems.value\r\n      .filter(item => Number(item.requesting_quantity) > 0)\r\n      .map(item => ({\r\n        id: item.id,\r\n        quantity: item.requesting_quantity,\r\n        description : item.request_description,\r\n        beneficiary : item.receiver\r\n      }))\r\n  };\r\n  try{\r\n     const response = await axiosInstance.post('approval-lists',payload)\r\n     showMessage('Request Sent')\r\n     const message =  JSON.parse(localStorage.getItem(\"user\")).name + ' Created Voucher from Labour Request '+ item.value.id\r\n     const message_id = \"wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhggQUM4NzUzOTAxQTIxOEQ2NkZCNDM5RDM4NjUzQjY2QzEA\"\r\n     const receivers = ['255697315583','255698267662']\r\n     receivers.forEach(receiver => {\r\n                whatsappAlert(message,message_id,receiver)\r\n      });\r\n     clearForm()\r\n     getApprovalItems()\r\n     document.getElementById('close').click()\r\n  }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n  }finally{\r\n loading.value = false\r\n  }\r\n}\r\nconst user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\nconst spinner = ref(false);\r\nconst user_id = JSON.parse(localStorage.getItem(\"user\")).id\r\nconst total_amount = ref(0);\r\nconst user_role_id = ref(JSON.parse(localStorage.getItem('user')).role);\r\nconst columns = ref(['Sno','requisition', 'approval', 'purpose','type','requester','project','cost', 'status','date', 'awaits','actions']);\r\nconst items = ref([]);\r\nconst whatsappAlert = inject('whatsappAlert');\r\nconst requisitionItems = ref([]);\r\nconst table_option = ref({\r\n  perPage: 50,\r\n  perPageValues: [  50,100,200],\r\n  skin: 'table table-hover table-striped',\r\n  columnsClasses: { actions: 'actions text-center' },\r\n  sortable: ['id', 'service_name'],\r\n  sortIcon: { base: 'sort-icon-none', up: 'sort-icon-asc', down: 'sort-icon-desc' },\r\n  pagination: { nav: 'scroll', chunk: 5 },\r\n  texts: { count: 'Showing {from} to {to} of {count}', filter: '', filterPlaceholder: 'Search...', limit: 'Results:' },\r\n  resizableColumns: false,\r\n  headings: {\r\n    vendor: function() {\r\n      return isBeneficiaryGroup.value ? 'Beneficiary' : 'Vendor';\r\n    }\r\n  }\r\n});\r\n\r\n\r\nconst fillReceipt = ref(false)\r\n\r\n\r\nconst isBeneficiaryGroup = computed(() => {\r\n  return route.params.group_id == '4' || route.params.group_id == '8';\r\n});\r\n\r\n\r\nconst clearForm = () =>{\r\n  status.value = '',\r\n  remark.value = ''\r\n  create_approval.value = false\r\n  beneficiary.value = ''\r\n  complete_transaction.value = ''\r\n  approval_status.value = ''\r\n}\r\nconst showMessage = inject('showMessage');\r\nconst showError = inject('showError');\r\nconst formatNumber = inject('formatNumber');\r\nconst tableShimmer = inject('tableShimmer');\r\nconst formatDate = inject('formatDate');\r\nconst loadingSpinner = inject('loadingSpinner')\r\n const enforceMax = inject('enforceMax');\r\nconst approvalChain = ref([]);\r\nconst awaiter = ref({});\r\nconst awaiter_id = ref('');\r\nconst item_id = ref('');\r\nconst status = ref('')\r\n/** local flag you wanted */\r\nconst localChecked = ref(false);\r\n\r\n/** modal ref to reset flag when closed */\r\nconst approvalModal = ref(null);\r\nlet onHidden = null;\r\nconst loading = ref(false)\r\n const isAllowedTime = () => {\r\n  const hour = new Date().getHours();\r\n  return hour >= 16 || hour < 9;\r\n}\r\n\r\n\r\nconst getApprovalItems = async () => {\r\n\r\n  loading.value = true;\r\n  try {\r\n    let url = `approval-lists?status_id=${status?.value?.id ?? 'all'}&date=${date.value}&`;\r\n    if (route.params.group_id !== 'all') {\r\n      url += `group_id=${route.params.group_id}`;\r\n    }\r\n\r\n    const response = await axiosInstance.get(url);\r\n    items.value = response.data.map((item, index) => {\r\n      let status = item.status;\r\n      if (item.last_checked_in?.status?.id == 4 || item.last_checked_in?.status?.id == 14) {\r\n        status = {\r\n          name: item.last_checked_in.status.name,\r\n          color: item.last_checked_in.status.color\r\n        };\r\n      }\r\n\r\n      let awaits = item.awaiting_approval?.name || 'no one';\r\n      if (item.last_checked_in?.status?.id == 4 || item.last_checked_in?.status?.id == 14 || status.name ==='approved' || status.name ==='paid' ) {\r\n        awaits = 'no one';\r\n      }\r\n\r\n      let awaiter_role_id = item.awaiting_approval?.role_id || null;\r\n      if (item.last_checked_in?.status?.id == 4 || item.last_checked_in?.status?.id == 14) {\r\n        awaiter_role_id = null;\r\n      }\r\n\r\n      return {\r\n        ...item,\r\n        status,\r\n        Sno: index + 1,\r\n        purpose: item.approval_group,\r\n        type: item.requisition_type ?? item?.source,\r\n        approval: '0' + item.id,\r\n        approval_id: item.id,\r\n        requisition: item?.requisition_id ?? item?.source_id,\r\n        requester : item.requester?.name ?? item?.requester,\r\n        requester_id : item.requester?.id,\r\n        awaits,\r\n        awaiter_role_id,\r\n        vendor: item.vendor && item.vendor.name ? item.vendor.name : item.beneficiary,\r\n        vendor_data: item.vendor,\r\n        date : formatDate(item.date),\r\n        created_at : item.date,\r\n        last_checked: formatDate(item.last_checked_in?.approved_at),\r\n        last_checker_id: item?.last_checked_in?.role_id ?? 'null',\r\n        cost: item.items\r\n          ? formatNumber(item.items.reduce(\r\n              (sum, i) =>\r\n                sum +\r\n                ((i?.quantity || 0) *\r\n                  (i.requisition_items?.rate || 0)),\r\n              0\r\n            ))\r\n          : 0,\r\n        approved_at: item.last_checked_in?.approved_at\r\n          ? new Date(item.last_checked_in.approved_at).toLocaleString('en-GB', {\r\n              year: 'numeric',\r\n              month: '2-digit',\r\n              day: '2-digit',\r\n              hour: '2-digit',\r\n              minute: '2-digit',\r\n              second: '2-digit'\r\n            })\r\n          : null\r\n      };\r\n    });\r\n\r\n    items.value.sort((a, b) => {\r\n      const role = Number(user_role_id.value);\r\n      const aMatch = a.awaiter_role_id === role;\r\n      const bMatch = b.awaiter_role_id === role;\r\n\r\n      if (aMatch && !bMatch) return -1;\r\n      if (!aMatch && bMatch) return 1;\r\n      return 0;\r\n    });\r\n\r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.error(error);\r\n  } finally {\r\n    loading.value = false;\r\n    // status.value = ''\r\n  }\r\n};\r\n\r\nconst filteredData = computed(()=>{\r\n  return globalSearch(items.value,filter.value)\r\n})\r\n\r\n\r\nwatch(\r\n  () => route.params.group_id,\r\n  (newGroupId, oldGroupId) => {\r\n    if (newGroupId !== oldGroupId) {\r\n      getApprovalGroup()\r\n      getApprovalItems();\r\n    }\r\n  }\r\n);\r\n\r\n\r\n\r\n\r\nconst lastApprovalRole = ref('')\r\nconst requisition_source_item_id = ref(0)\r\nconst item_date =  ref('')\r\nconst awaits = ref('')\r\nconst item = ref('')\r\nconst approval_description = ref('')\r\nconst approval = ref('')\r\nconst getApprovalChain = (row) => {\r\n  getApprovalTransactions(row.id)\r\n  approval.value = row\r\n  requisitionItems.value = row.items.map((item, index) => ({\r\n    ...item,\r\n    order_item_id :  item?.requisition_items?.id,\r\n    Sno: index + 1,\r\n    item: item?.requisition_items?.remark,\r\n    description: item?.requisition_items?.description + (item.description ? ' ( ' + item.description + ' )' : ''),\r\n    rate: Number(item?.rate).toLocaleString() + '/=',\r\n    total: (item?.quantity * item?.rate).toLocaleString() + '/=',\r\n    selected:false,\r\n    rate_original : item?.rate,\r\n    requesting_quantity : '',\r\n    request_description : ''\r\n  }));\r\n\r\n  awaits.value = row.awaits\r\n  approval_description.value = row.approval_description;\r\n  approvalChain.value = (row.roles_sequence || []).slice();\r\n  lastApprovalRole.value = (row.roles_sequence?.length > 0)\r\n  ? row.roles_sequence[row.roles_sequence.length - 1].role_id\r\n  : null;\r\n  awaiter.value = row.awaiting_approval || {};\r\n  awaiter_id.value = row.awaiting_approval?.role_id || null;\r\n  item_id.value = row.id;\r\n  item_date.value = row.date;\r\n  requisition_source_item_id.value = row;\r\n  item.value = row;\r\n  localChecked.value = false;\r\n};\r\n\r\n\r\nconst remark = ref('')\r\nconst approveRequest = async () => {\r\n  const payload = {\r\n    subcontractor_agreement_id : item.value.subcontractor_agreement_id,\r\n    approval_group_id : route.params.group_id,\r\n    status_id : approval_status.value,\r\n    approval_item_id: item_id.value,\r\n    role_id: user_role_id.value,\r\n    remark: remark.value,\r\n    last_role: lastApprovalRole.value,\r\n    requisition_type: requisition_source_item_id.value.requisition_type,\r\n    project : requisition_source_item_id.value,\r\n    requisition_items : requisition_source_item_id.value.items.map((item)=>({\r\n      source_id: item.requisition_items.item_id,\r\n      cost : item.requisition_items.quantity * item.requisition_items.rate,\r\n      description : item.requisition_items.description,\r\n      remark : \"From LPO NO : \" + item_id.value + \" created on date \" + item_date.value,\r\n      remarker_id : JSON.parse(localStorage.getItem('user')).id,\r\n      remarker : JSON.parse(localStorage.getItem('user')).name\r\n    })),\r\n\r\n    approval_items : requisitionItems.value.map(item => ({\r\n      id : item.id,\r\n      quantity: Number(item.quantity),\r\n      rate: Number(item.rate_original)\r\n    }))\r\n  };\r\n\r\n\r\n\r\n  await axiosInstance.post('approval-chains', payload);\r\n  awaiter_id.value = '';\r\n  remark.value = '',\r\n  approval_status.value = ''\r\n  getApprovalItems();\r\n  showMessage('data saved successfully');\r\n};\r\n\r\n\r\nconst onApproveClick = async () => {\r\n\r\n  try {\r\n    spinner.value = true;\r\n    await approveRequest();\r\n    localChecked.value = true; \r\n    awaiter.value.role_id = ''\r\n    remark.value = ''\r\n    status.value = ''\r\n    document.getElementById('close-approval-modal').click()\r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.error(error);\r\n  } finally {\r\n    spinner.value = false;\r\n    edit_item.value = ''\r\n  }\r\n};\r\n\r\n\r\nconst printVoucher = async (voucher, vendor) => {\r\n  total_amount.value = voucher.items.reduce(\r\n    (acc, item) => acc + (item.quantity * item.requisition_items?.rate),\r\n    0\r\n  )\r\n\r\n  try {\r\n    const iframe = document.createElement(\"iframe\")\r\n    iframe.style.display = \"none\"\r\n    document.body.appendChild(iframe)\r\n\r\n    const date = new Date(voucher.created_at)\r\n    const dateString = `${date.getDate().toString().padStart(2,'0')}/${(date.getMonth()+1).toString().padStart(2,'0')}`\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Print Voucher</title>\r\n<style>\r\nbody { font-family:'Courier New', monospace; margin:40px; font-size:13px }\r\n.text-style { font-family:'Courier New', monospace }\r\n.company-title { text-align:center }\r\n.title { text-align:center; font-size:20px; margin:10px 0 }\r\ntable { width:100%; border-collapse:collapse; margin-top:10px }\r\nth,td { border:0.5px solid #000; padding:6px }\r\n.text-right { text-align:right }\r\n.text-center { text-align:center }\r\n.text-success { color:green }\r\n.text-danger { color:red }\r\n.signature-line { border-top:1px solid #000; width:200px; margin-top:40px }\r\nhr { border:0; border-top:0.5px solid #000 }\r\n@media print { body { margin:10mm } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"text-style\" style=\"font-size:20px\">\r\n${voucher.type.toLowerCase().includes('voucher') || voucher.type.toLowerCase().includes('labour') ? 'VOUCHER' : 'LPO'}\r\nNO. ${voucher.approval}/${new Date(voucher.created_at).getFullYear().toString().slice(-2)}\r\n</div>\r\n\r\n<div class=\"company-title text-style\">\r\n<i>\r\n<h1>COPEX CONTRACTORS CO.LTD</h1>\r\n<div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n<div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\r\n<div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n<div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\r\n</i>\r\n</div>\r\n\r\n<hr style=\"margin-top:20px\">\r\n\r\n<div class=\"title text-style\">\r\n${voucher?.purpose?.toUpperCase()} : ${voucher?.project?.toUpperCase() ?? 'NO PROJECT'}\r\n</div>\r\n\r\n<hr>\r\n\r\n<p class=\"text-style\">Please provide the following as per requisition details below</p>\r\n<h2 class=\"text-style\">CURRENCY : TSH</h2>\r\n\r\n<table>\r\n<thead>\r\n<tr>\r\n<th>SN</th>\r\n<th>Item</th>\r\n<th>Description</th>\r\n<th>Quantity</th>\r\n<th>Rate</th>\r\n<th>Total</th>\r\n<th>Receiver</th>\r\n</tr>\r\n</thead>\r\n<tbody>\r\n${voucher.items.map((item, index) => `\r\n<tr>\r\n<td>${index + 1}</td>\r\n<td>${item.requisition_items?.remark || 'N/A'}</td>\r\n<td>${item.requisition_items?.description}${item.description ? ', ' + item.description : ''}</td>\r\n<td class=\"text-right\">${item.requisition_items?.quantity || 0}</td>\r\n<td class=\"text-right\">${Number(item.requisition_items?.rate || 0).toLocaleString()}/=</td>\r\n<td class=\"text-right\">${(item.quantity * item.requisition_items?.rate || 0).toLocaleString()}/=</td>\r\n<td>${item.receiver || item.beneficiary || 'N/A'}</td>\r\n</tr>\r\n`).join(\"\")}\r\n\r\n${voucher.description ? `\r\n<tr>\r\n<td colspan=\"7\">\r\nNote : ${voucher.description}${voucher.approval_description ? ', ' + voucher.approval_description : ''}\r\n</td>\r\n</tr>\r\n` : ''}\r\n\r\n<tr>\r\n<td colspan=\"7\" class=\"text-right\">\r\n<strong>TOTAL ${total_amount.value.toLocaleString()}/=</strong>\r\n</td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n\r\n<div class=\"title text-style\" style=\"margin-top:40px\">APPROVAL CHAIN</div>\r\n\r\n<table>\r\n<tbody>\r\n<tr>\r\n${voucher.roles_sequence.map(r => `\r\n<td class=\"text-center ${r?.status?.id == 3 ? 'text-success' : 'text-danger'}\">\r\n${r?.status?.name ?? 'Pending'}\r\n</td>\r\n`).join(\"\")}\r\n</tr>\r\n</tbody>\r\n<tfoot>\r\n<tr>\r\n${voucher.roles_sequence.map(r => `<th>${r.name}</th>`).join(\"\")}\r\n</tr>\r\n</tfoot>\r\n</table>\r\n\r\n${voucher.purpose.toLowerCase().includes('voucher') ? `\r\n<div class=\"title text-style\" style=\"margin-top:40px;margin-bottom:-20px\">BENEFICIARY</div>\r\n\r\n<div style=\"display:flex;justify-content:space-between;margin-top:20px\">\r\n<div class=\"text-center\">\r\n<strong>${voucher.beneficiary || ''}</strong>\r\n<div class=\"signature-line\"></div>\r\n<p>Received By</p>\r\n</div>\r\n<div class=\"text-center\">\r\n<div class=\"signature-line\"></div>\r\n<p>Signature</p>\r\n</div>\r\n<div class=\"text-center\">\r\n<div class=\"signature-line\"></div>\r\n<p>Date</p>\r\n</div>\r\n</div>\r\n` : ''}\r\n\r\n</body>\r\n</html>\r\n`\r\n\r\n    const doc = iframe.contentWindow.document\r\n    doc.open()\r\n    doc.write(printContent)\r\n    doc.close()\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus()\r\n      iframe.contentWindow.print()\r\n      setTimeout(() => document.body.removeChild(iframe), 1000)\r\n    }\r\n  } catch (e) {\r\n    showError(e.message)\r\n  }\r\n}\r\n\r\n\r\nimport logo from \"@/assets/images/logo.jpg\";\r\nimport html2pdf from \"html2pdf.js\";\r\nimport { reference } from '@popperjs/core';\r\nconst downloadVoucherPDF = async (voucher, vendor) => {\r\n  total_amount.value = voucher.items.reduce((acc, item) => acc + (item.quantity * item.requisition_items?.rate), 0);\r\n  \r\n  try {\r\n    const date = new Date(voucher.created_at);\r\n    const dateString = `${date.getDate().toString().padStart(2, '0')}/${(date.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n    // Use the exact same HTML content as printVoucher\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Print Voucher</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; font-weight: 500; color: #000; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; }\r\n  .logo { width: 160px; height: auto; }\r\n  .voucher-box { border: 1px solid #000; padding: 5px 10px; font-weight: 600; font-size: 8px; color: #000; margin-left: auto; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; color: #000; }\r\n  .company-title h2 { margin: 5px 0; font-weight: 700; color: #000; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 11px; line-height: 1.4; font-weight: 500; color: #000; }\r\n  .section-title { text-align: center; font-weight: 700; text-decoration: underline; margin: 20px 0 10px 0; color: #000; }\r\n  .title { text-align: center; font-weight: 700; margin: 20px 0 10px 0; color: #000; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; border-radius: 4px; overflow: hidden; }\r\n  table.details td, table.items th, table.items td, .signatures th, .signatures td { border: 0.5px solid #000; padding: 6px; font-weight: 500; color: #000; }\r\n  table.items thead tr th { background-color: #f8f8f8; border-bottom: 1px solid #000; font-weight: 700; color: #000; }\r\n  .text-right { text-align: right; color: #000; }\r\n  .text-center { text-align: center; color: #000; }\r\n  .text-success { color: green; font-weight: 600; }\r\n  .signature-area { margin-top: 30px; }\r\n  .signature-line { border-top: 1px solid #000; width: 200px; display: inline-block; margin-top: 50px; }\r\n  .text-danger { color: red; font-weight: 600; }\r\n  strong { font-weight: 700; color: #000; }\r\n  p { color: #000; }\r\n  td { color: #000; }\r\n  th { color: #000; }\r\n  div { color: #000; }\r\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"header\">\r\n  <img src=\"${logo}\" class=\"logo\" />\r\n  <div class=\"voucher-box\">\r\n    ${voucher.type.toLowerCase().includes('voucher') || voucher.type.toLowerCase().includes('labour')  ? `Voucher`:'LPO'} NO: <br>\r\n    <span style=\"color:red; font-weight: 700;\">${(\"0000\" + voucher.approval).slice(-4)}/${dateString}</span>\r\n  </div>\r\n</div>\r\n<div class=\"reg-info\">\r\n  TIN: 135-489-247<br>\r\n  VRN: 40-032826C\r\n</div>\r\n<div class=\"company-title\">\r\n  <h3>COPEX CONTRACTORS CO.LTD</h3>\r\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\r\n</div>\r\n<div class=\"section-title\"> ${voucher?.purpose?.toUpperCase()  } DETAILS</div>\r\n\r\n<div class=\"title\">PROJECT :  ${voucher?.project?.toUpperCase() ?? \"NO PROJECT\" }</div>\r\n\r\n<p><strong>ORDER ITEMS</strong></p>\r\n<table class=\"items\">\r\n  <thead>\r\n    <tr>\r\n      <th>SN</th>\r\n      <th>Item</th>\r\n      <th>Description</th>\r\n      <th>Quantity</th>\r\n      <th>Rate</th>\r\n      <th>Total</th>\r\n      <th>Receiver</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${voucher.items.map((item, index) => `\r\n    <tr>\r\n      <td>${index + 1}</td>\r\n      <td>${item.requisition_items?.remark || 'N/A'}</td>\r\n      <td>${item.requisition_items?.description + (item.description ? ' , ' + item.description : '') || 'N/A'}</td>\r\n      <td class=\"text-right\">${item.requisition_items?.quantity || '0'}</td>\r\n      <td class=\"text-right\">${Number(item.requisition_items?.rate || 0).toLocaleString()}/=</td>\r\n      <td class=\"text-right\">${(item.quantity * item.requisition_items?.rate || 0).toLocaleString()}/=</td>\r\n      <td>${item.receiver ||item.beneficiary || 'N/A'}</td>\r\n    </tr>\r\n    `).join(\"\")}\r\n ${voucher.description? `\r\n  <tr>\r\n    <td colspan=\"7\" style=\"text-align:start; color: #000;\">\r\n      <strong>Brief Description :</strong> ${voucher.description + (voucher.approval_description ? ' , ' + voucher.approval_description : '') } \r\n    </td>\r\n  </tr>\r\n` : ''}\r\n    <tr>\r\n     <td colspan=\"7\" style=\"text-align:right; color: #000;\"><strong>TOTAL</strong>  <strong>${total_amount.value.toLocaleString()}/=</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<div class=\"section-title\">APPROVAL CHAIN </div>\r\n<table class=\"signatures\" style=\"margin-top: 20px;\">\r\n  <thead>\r\n    <tr>\r\n          ${voucher.roles_sequence.map(role => `\r\n      <th>${role.name || 'N/A'}</th>\r\n            `).join('')}\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n          ${voucher.roles_sequence.map(role => `\r\n      <td class=\"text-center ${role?.status?.id == 3 ? 'text-success' : 'text-danger'}\">${role?.status?.name ?? 'Pending'}</td>\r\n       `).join('')}\r\n      </tr>\r\n  </tbody>\r\n</table>\r\n\r\n${voucher.purpose.toLowerCase().includes('voucher') ? `\r\n<div class=\"signature-area\" style=\"display: flex; justify-content: space-between; margin-top: 20px;\">\r\n  <div style=\"text-align: center;\">\r\n    \r\n<div style=\"text-align: center; margin-top: 30px;\">\r\n  <div style=\"margin-bottom: 5px; color: #000;\">\r\n    <strong>${voucher.beneficiary || '&nbsp;'}</strong>\r\n  </div>\r\n  <div style=\"border-bottom: 1px solid #000; width: 200px; margin: 0 auto;\"></div>\r\n</div>    <p><strong>Received By:</strong></p>\r\n  </div>\r\n  <div style=\"text-align: center;\">\r\n    <div class=\"signature-line\"></div>\r\n    <p><strong>Receiver's Signature</strong></p>\r\n  </div>\r\n  <div style=\"text-align: center;\">\r\n    <div class=\"signature-line\"></div>\r\n    <p><strong>Received Date</strong></p>\r\n  </div>\r\n</div>\r\n` : ''}\r\n</body>\r\n</html>\r\n`;\r\n\r\n    // Generate PDF without adding to DOM\r\n    const opt = {\r\n      margin: 10,\r\n      filename: `voucher_${(\"0000\" + voucher.approval).slice(-4)}_${dateString}.pdf`,\r\n      image: { type: \"jpeg\", quality: 0.98 },\r\n      html2canvas: { scale: 2 },\r\n      jsPDF: { unit: \"mm\", format: \"a4\", orientation: \"portrait\" },\r\n    };\r\n\r\n    // Generate and download PDF directly from HTML string\r\n    await html2pdf().from(printContent).set(opt).save();\r\n  } catch (error) {\r\n    showError(`Failed to download PDF: ${error.message}`);\r\n  }\r\n};\r\n\r\n\r\nconst printOrder = async (item, voucher) => {\r\n  const isVoucher = item.requisition_items.beneficiary || voucher.type.toLowerCase().includes('labour')\r\n\r\n  total_amount.value = voucher.items.reduce(\r\n    (acc, i) => acc + (i.quantity * i.rate),\r\n    0\r\n  )\r\n\r\n  try {\r\n    const iframe = document.createElement(\"iframe\")\r\n    iframe.style.display = \"none\"\r\n    document.body.appendChild(iframe)\r\n\r\n    const date = new Date(voucher.created_at)\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Print</title>\r\n<style>\r\nbody { font-family:'Courier New', monospace; margin:40px; font-size:13px }\r\n.company-title { text-align:center }\r\n.title { text-align:center; font-size:20px; margin:15px 0 }\r\ntable { width:100%; border-collapse:collapse; margin-top:10px }\r\nth,td { border:0.5px solid #000; padding:6px }\r\n.text-right { text-align:right }\r\n.text-center { text-align:center }\r\n.signature-line { border-top:1px solid #000; width:200px; margin-top:40px }\r\nhr { border-top:0.5px solid #000 }\r\n@media print { body { margin:10mm } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div style=\"font-size:18px\">\r\n${isVoucher ? 'VOUCHER' : 'ORDER'} NO:\r\n<span style=\"color:red\">${(\"0000\" + voucher.approval).slice(-4)}</span>\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n<h1>COPEX CONTRACTORS CO.LTD</h1>\r\n<div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n<div>0713 000 777, 0657 111 555</div>\r\n<div>TIN: 135-489-247 &nbsp; VRN: 40-032826C</div>\r\n</div>\r\n\r\n<hr>\r\n\r\n<div class=\"title\">\r\n${isVoucher ? 'VOUCHER' : 'PURCHASE ORDER'} :\r\n${voucher?.project?.toUpperCase() ?? 'NO PROJECT'}\r\n</div>\r\n\r\n${!isVoucher ? `\r\n<div style=\"display:flex;gap:20px\">\r\n<div style=\"flex:1\">\r\n<table>\r\n<tr><th colspan=\"2\">Vendor</th></tr>\r\n<tr><td>Name</td><td>${item.vendor?.name || ''}</td></tr>\r\n<tr><td>Location</td><td>${item.vendor?.location || ''}</td></tr>\r\n<tr><td>Email</td><td>${item.vendor?.email || ''}</td></tr>\r\n<tr><td>Phone</td><td>${item.vendor?.phone || ''}</td></tr>\r\n<tr><td>Address</td><td>${item.vendor?.address || ''}</td></tr>\r\n</table>\r\n</div>\r\n\r\n<div style=\"width:35%\">\r\n<table>\r\n<tr><td>Date</td><td>${formatDate(voucher.created_at)}</td></tr>\r\n<tr><td>LPO No</td><td>${(\"00\" + item.requisition_items.id).slice(-4)}</td></tr>\r\n</table>\r\n</div>\r\n</div>\r\n` : ''}\r\n\r\n<p>Please provide the following as per requisition details below</p>\r\n\r\n<table>\r\n<thead>\r\n<tr>\r\n<th>Item</th>\r\n<th>Description</th>\r\n<th>Qty</th>\r\n<th>Unit</th>\r\n<th>Rate</th>\r\n<th>Total</th>\r\n</tr>\r\n</thead>\r\n<tbody>\r\n<tr>\r\n<td>${item.requisition_items?.remark || 'N/A'}</td>\r\n<td>${item.requisition_items?.description || 'N/A'}</td>\r\n<td class=\"text-right\">${item.quantity}</td>\r\n<td>${item.requisition_items?.units || 'N/A'}</td>\r\n<td class=\"text-right\">${Number(item.rate_original).toLocaleString()}/=</td>\r\n<td class=\"text-right\">${(item.quantity * item.rate_original).toLocaleString()}/=</td>\r\n</tr>\r\n\r\n${voucher.description ? `\r\n<tr>\r\n<td colspan=\"6\">\r\nBrief Description:\r\n${voucher.description}${voucher.approval_description ? ', ' + voucher.approval_description : ''}\r\n</td>\r\n</tr>\r\n` : ''}\r\n\r\n\r\n</tbody>\r\n</table>\r\n\r\n<h3 class=\"text-center\">APPROVAL CHAIN</h3>\r\n<table class=\"signatures\" style=\"margin-top: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n          ${voucher.roles_sequence.map(role => `\r\n      <td style=\"border-bottom:1px solid #000;border-top:1px solid #fff;border-right:1px solid #fff;border-left:1px solid #fff;\" class=\"text-center ${role?.status?.id == 3 ? 'text-success' : 'text-danger'}\">${role?.status?.name ?? 'Pending'}</td>\r\n       `).join('')}\r\n      </tr>\r\n  </tbody>\r\n    <tfooter>\r\n    <tr>\r\n          ${voucher.roles_sequence.map(role => `\r\n      <th style=\"border-bottom:1px solid #fff;border-top:1px solid #fff;border-right:55px solid #fff;border-left:1px solid #fff;\">${role.name || 'N/A'}</td>\r\n            `).join('')}\r\n    </tr>\r\n\r\n  </tfooter>\r\n</table>\r\n${isVoucher ? `\r\n<div style=\"display:flex;justify-content:space-between;margin-top:30px\">\r\n<div class=\"text-center\">\r\n<div class=\"signature-line\"></div>\r\n<p>Received By : ${item.requisition_items.beneficiary || item.beneficiary || ''}</p>\r\n</div>\r\n\r\n<div class=\"text-center\">\r\n<div class=\"signature-line\"></div>\r\n<p>Date</p>\r\n</div>\r\n</div>\r\n` : ''}\r\n\r\n</body>\r\n</html>\r\n`\r\n\r\n    const doc = iframe.contentWindow.document\r\n    doc.open()\r\n    doc.write(printContent)\r\n    doc.close()\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus()\r\n      iframe.contentWindow.print()\r\n      setTimeout(() => document.body.removeChild(iframe), 1000)\r\n    }\r\n  } catch (e) {\r\n    showError(e.message)\r\n  }\r\n}\r\n\r\n\r\n\r\nconst printGeneralOrder = async (voucher,vendor) => {\r\n  total_amount.value = voucher.items.reduce((acc, item) => acc + (item?.quantity * item?.rate), 0); // calculate total amount\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n    const today = new Date();\r\n   const date = new Date(voucher.created_at)\r\n    const dateString = `${date.getDate().toString().padStart(2,'0')}/${(date.getMonth()+1).toString().padStart(2,'0')}`\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Print Voucher</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\r\n  .header {  display: flex; justify-content: space-between; align-items: flex-start;font-weight:bold }\r\n  .logo { width: 160px; height: auto; }\r\n  .text-style { font-family: 'Courier New', monospace; }\r\n  .voucher-box { border: 1px solid #000; padding: 5px 10px; font-weight: normal; font-size: 13px; text-align: center; margin-left: auto; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; }\r\n  .company-title h2 { margin: 5px 0; }\r\n  .reg-info { position: absolute; top: 120px; right: 40px; text-align: right; font-size: 10px; line-height: 1.4; font-weight: normal; }\r\n  .section-title { text-align: center; font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; }\r\n  .title { text-align: center;   margin: 10px 0 10px 0; font-size:20px }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; border-radius: 4px; overflow: hidden; }\r\n  table.details td, table.items th, table.items td, .signatures th, .signatures td { border: 0.5px solid #000; padding: 6px; font-weight: normal; }\r\n  table.items thead tr th { background-color: #f8f8f8; border-bottom: 1px solid #000; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  .text-success { color: green; }\r\n .signature-area { margin-top: 30px; }\r\n  .signature-line { border-top: 1px solid #000; width: 200px; display: inline-block; margin-top: 50px; }\r\n  .text-danger { color: red; }\r\n  hr {\r\n  border: 0;\r\n  border-top: 0.4px solid #000 !important;\r\n  opacity: 1 !important;\r\n  margin: 0px 0;\r\n}\r\n\r\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"text-style\" style=\"font-size:20px\">\r\n ORDER NO. ${voucher.approval}/${new Date(voucher.created_at).getFullYear().toString().slice(-2)}\r\n</div>\r\n<div class=\"company-title text-style\">\r\n  <i>\r\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\r\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div><b>Tel:</b> , 0713 000 777, 0657 111 555</div>\r\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n  <div><b>TIN:</b> 135-489-247    <b>VRN:</b> 40-032826C</div>\r\n  </i>\r\n</div>\r\n<hr style=\"margin-top:20px\">\r\n<div class=\"title text-style\">  ${voucher?.purpose?.toUpperCase()  } :  ${voucher?.project?.toUpperCase() ?? \"NO PROJECT\" }</div>\r\n<hr>\r\n${!voucher.purpose.toLowerCase().includes('voucher') ? `\r\n\r\n<div style=\"display:flex;justify-content:space-between;gap:20px;margin-top:10px;font-size:13px;\">\r\n  <div style=\"flex:1;border:1px solid #f0f0f0;padding:8px;\">\r\n  <table style=\"width:100%; border-collapse: collapse;\">\r\n  <tr><td style=\"background:#333; border-top:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000; padding:5px;width:2cm\">\r\n  <b>Vendor</b>\r\n</td>\r\n</tr>\r\n  <tr ><td>Name</td><td style=\"border-bottom:1px solid #000;\">${vendor?.name || ''}</td></tr>\r\n  <tr ><td>Address</td><td class=\"text-style\" style=\"border-bottom:1px solid #000;\">${vendor?.address || ''}</td></tr>\r\n  <tr ><td>City</td><td class=\"text-style\" style=\"border-bottom:1px solid #000;\">${vendor?.location || ''}</td></tr>\r\n  <tr ><td>Phone</td><td class=\"text-style\" style=\"border-bottom:1px solid #000;\">${vendor?.phone || ''}</td></tr>\r\n  <tr ><td >TIN</td><td class=\"text-style\" style=\"border-bottom:1px solid #000;\">${vendor?.tin || ''}</td></tr>\r\n  <tr ><td >VRN</td><td  class=\"text-style\" style=\"border-bottom:1px solid #000;\">${vendor?.vrn || ''}</td></tr>\r\n</table>\r\n\r\n  </div>\r\n  <div style=\"width:35%;border:1px solid #f0f0f0;padding:8px;margin-top:1cm\">\r\n    <table style=\"width:100%;border-collapse:collapse;\">\r\n      <tr><td class=\"text-style\"> ${voucher.purpose.toLowerCase().includes('voucher') ? `VOUCHER`:'LPO'} :</td><td class=\"text-style\">0${voucher?.id || ''}/${new Date(voucher.created_at).getFullYear().toString().slice(-2)}</td></tr>\r\n      <tr><td class=\"text-style\"> ${voucher.purpose.toLowerCase().includes('voucher') ? `VOUCHER`:'LPO'} DATE:</td><td class=\"text-style\">${formatDate(voucher.created_at)}</td></tr>\r\n      <tr><td class=\"text-style\">REQ:</td><td class=\"text-style\">${voucher?.requisition || ''}</td></tr>\r\n      <tr><td class=\"text-style\">REQ DATE:</td><td class=\"text-style\">${formatDate(voucher.requested_date)}</td></tr>\r\n      <tr><td class=\"text-style\">STATUS:</td><td class=\"text-style\">${voucher?.status.name || ''}</td></tr>\r\n      <tr><td class=\"text-style\">AWAITS:</td><td class=\"text-style\">${voucher?.awaits || ''}</td></tr>\r\n    </table>\r\n  </div>\r\n</div>\r\n<br>\r\n\r\n  </tbody>\r\n</table>\r\n    ` : ''}\r\n\r\n<p class=\"text-style\">Please provide the following as per requisition details below</p>\r\n<h2 class=\"text-style\">CURRENCY : TSH</h2>\r\n<table class=\"items\">\r\n  <thead>\r\n    <tr>\r\n      <th class=\"text-style\">No.</th>\r\n      <th class=\"text-style\">ITEM NAME</th>\r\n      <th class=\"text-style\">DESCRIPTION</th>\r\n      <th class=\"text-style\">QUANTITY</th>\r\n       <th class=\"text-style\">UNIT</th>\r\n      <th class=\"text-style\">RATE</th>\r\n      <th class=\"text-style\">TOTAL</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${voucher.items.map((item, index) => `\r\n    <tr>\r\n      <td class=\"text-style\">${index + 1}</td>\r\n      <td class=\"text-style\">${item.requisition_items?.remark || 'N/A'}</td>\r\n      <td class=\"text-style\">${item.requisition_items?.description || 'N/A'}</td>\r\n      <td class=\"text-style\">${item.requisition_items?.units || 'N/A'}</td>\r\n      <td class=\"text-style text-right\">${item?.quantity || '0'}</td>\r\n      <td class=\" text-style text-right\">${Number(item?.rate || 0).toLocaleString()}/=</td>\r\n      <td class=\"text-style text-right\">${(item?.quantity * item?.rate || 0).toLocaleString()}/=</td>\r\n    </tr>\r\n\r\n    `\r\n  )\r\n    .join(\"\")}\r\n\r\n    <tr>\r\n     <td colspan=\"7\" class=\"text-style\" style=\"text-align:right;\"><strong>TOTAL</strong>  <strong>${total_amount.value.toLocaleString()}/=</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<h2 style=\"text-style\">Note : </h2>\r\n<p class=\"text-style\">${voucher.description ?? ''}</p>\r\n<div class=\"title text-style\" style=\"margin-top:40px\">APPROVAL CHAIN</div>\r\n<table class=\"signatures\" style=\"margin-top: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n          ${voucher.roles_sequence.map(role => `\r\n      <td style=\"border-bottom:1px solid #000;border-top:1px solid #fff;border-right:1px solid #fff;border-left:1px solid #fff;\" class=\"text-center ${role?.status?.id == 3 ? 'text-success' : 'text-danger'}\">${role?.status?.name ?? 'Pending'}</td>\r\n       `).join('')}\r\n      </tr>\r\n  </tbody>\r\n    <tfooter>\r\n    <tr>\r\n          ${voucher.roles_sequence.map(role => `\r\n      <th style=\"border-bottom:1px solid #fff;border-top:1px solid #fff;border-right:55px solid #fff;border-left:1px solid #fff;\">${role.name || 'N/A'}</td>\r\n            `).join('')}\r\n    </tr>\r\n\r\n  </tfooter>\r\n</table>\r\n\r\n\r\n\r\n${voucher.purpose.toLowerCase().includes('voucher') ? `\r\n    <div class=\"title text-style\" style=\"margin-top:40px;margin-bottom:-20px\">BENEFICIARY</div>\r\n\r\n<div class=\"signature-area\" style=\"display: flex; justify-content: space-between; margin-top: 20px;\">\r\n  <div style=\"text-align: center;\">\r\n<div style=\"text-align: center; margin-top: 30px;\">\r\n  <!-- Beneficiary name above the line -->\r\n  <div class=\"text-style\" style=\"margin-bottom: 5px;\">\r\n    <strong>${voucher.beneficiary || '&nbsp;'}</strong>\r\n  </div>\r\n\r\n  <!-- The signature line -->\r\n  <div style=\"border-bottom: 1px solid #000; width: 200px; margin: 0 auto;\"></div>\r\n</div>    <p>Received By: </p>\r\n  </div>\r\n  <div style=\"text-align: center;\">\r\n    <div class=\"signature-line\"></div>\r\n    <p>Receiver's Signature</p>\r\n  </div>\r\n  <div style=\"text-align: center;\">\r\n    <div class=\"signature-line\"></div>\r\n    <p>Received Date</p>\r\n  </div>\r\n</div>\r\n` : ''}\r\n</body>\r\n</html>\r\n`;\r\n\r\n    // Write content to iframe and print\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print voucher: ${error.message}`);\r\n  }\r\n};\r\n\r\n\r\nconst approvalGroup = ref('')\r\nconst getApprovalGroup = async() =>{\r\n  approvalGroup.value = ''\r\n  const response = await axiosInstance.get(`approval-groups/${route.params.group_id}`)\r\n  approvalGroup.value = response.data\r\n}\r\n\r\nconst user_role = JSON.parse(localStorage.getItem(\"user\")).role;\r\nconst edit_item = ref()\r\nconst editApprovalItem = (item_id)=>{\r\nif( (user_permissions.includes('can_edit_approval_items') && user_role_id.value == awaiter.value.role_id && awaits.value !=='no one'  ) || user_role == 1){\r\n    edit_item.value = item_id\r\n}\r\n \r\n}\r\n\r\n\r\nconst proof_item = ref('')\r\nconst proof = ref('')\r\nconst fillProofData = (item,pr)=>{\r\n  getAccounts()\r\n  proof_item.value = item\r\n  proof.value = pr\r\n}\r\nconst accounts = ref([])\r\nconst account = ref('')\r\nconst getAccounts = async()=>{\r\n          try {\r\n            const response = await axiosInstance.get('account-transaction-points');\r\n            accounts.value = response.data.map((item, index) => ({\r\n                ...item,\r\nname: \r\n  (item?.name ?? '') + ' ' +\r\n  (item?.mobile_money?.name ?? '') + ' ' +\r\n  (item?.mobile_money?.category ?? 'CASH')\r\n            }));\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }finally{\r\n\r\n        }\r\n}\r\n\r\nconst handleFileUpload = (e) => {\r\n  attachment.value = e.target.files[0];\r\n};\r\n\r\nconst receipt_date = ref('')\r\nconst submitReceipt = async()=>{\r\n   spinner.value = true\r\n    const payload = new FormData();\r\n    payload.append(\"registrar_id\", user_id);\r\n    payload.append(\"approval_list_id\", item.value.id);\r\n    payload.append(\"date\", receipt_date.value);\r\n    if (attachment.value instanceof File) {\r\n        payload.append(\"attachment\", attachment.value);\r\n    }\r\n\r\n    try{\r\n      const response =  await axiosInstance.post('purchase-order-receipts',payload)\r\n       showMessage(response.data.message)\r\n       getReceipts(item.value.id)\r\n    }catch(error){\r\n      showError(error.message)\r\n      console.log(error)\r\n    }finally{\r\n      spinner.value = false\r\n      fillReceipt.value = false\r\n    }\r\n}\r\n\r\n\r\nconst date = ref(new Date().toISOString().slice(0, 10))\r\nconst receiver = ref('')\r\nconst amount = ref('')\r\nconst reference_number = ref('')\r\nconst attachment = ref('')\r\nconst submitProof = async()=>{\r\n    const payload = new FormData();\r\n    payload.append(\"reference_number\", reference_number.value);\r\n    payload.append(\"account_transaction_point_id\", account.value.id);\r\n    payload.append(\"host\", receiver.value);\r\n    payload.append(\"amount\", amount.value);\r\n    payload.append(\"description\", description.value);\r\n    payload.append(\"issuer_id\", user_id);\r\n    payload.append(\"approval_item_id\", proof_item.value.id);\r\n    payload.append(\"direction\", 'DECREMENT');\r\n    payload.append(\"opening_balance\", account.value.transactions_sum);\r\n    payload.append(\"date\", date.value);\r\n    if (attachment.value instanceof File) {\r\n        payload.append(\"attachment\", attachment.value);\r\n    }\r\n\r\n    try{\r\n      const response =  await axiosInstance.post('account-transactions',payload)\r\n       showMessage(response.data.message)\r\n       document.getElementById('close-proof-modal').click()\r\n    }catch(error){\r\n      showError(error.message)\r\n      console.log(error)\r\n    }finally{\r\n\r\n    }\r\n}\r\n\r\n    watch(date, (newVal) => {\r\n    if (newVal) {\r\n       getApprovalItems()\r\n    }\r\n});\r\n\r\n    watch(status, (newVal) => {\r\n    if (newVal) {\r\n       getApprovalItems()\r\n    }\r\n});\r\n\r\nconst printReport = async () => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    // Calculate total cost\r\n    const totalCost = items.value.reduce((sum, item) => {\r\n      const cost = typeof item.cost === 'string' ? parseFloat(item.cost.replace(/,/g, '')) : item.cost;\r\n      return sum + (isNaN(cost) ? 0 : cost);\r\n    }, 0);\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<style>\r\n  body { font-family: 'Courier New', monospace; margin: 20px; font-size: 8px; }\r\n  .text-style { font-family: 'Courier New', monospace; }\r\n  .company-title { text-align: center; font-size: 9px; }\r\n  .company-title h1 { font-size: 14px; margin: 5px 0; }\r\n  .title { text-align: center; font-size: 12px; margin: 8px 0; font-weight: bold; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 8px; font-size: 9px; }\r\n  th, td { border: 1px solid #000; padding: 3px 4px; }\r\n  th { background-color: #f0f0f0; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  .badge { padding: 2px 5px; border-radius: 2px; font-size: 8px; display: inline-block; }\r\n  .badge-success { background-color: #28a745; color: white; }\r\n  .badge-warning { background-color: #ffc107; color: black; }\r\n  .badge-danger { background-color: #dc3545; color: white; }\r\n  .badge-info { background-color: #17a2b8; color: white; }\r\n  hr { border: 0; border-top: 1px solid #000; margin: 8px 0; }\r\n  @media print { \r\n    body { margin: 5mm; } \r\n    table { page-break-inside: auto; }\r\n    tr { page-break-inside: avoid; page-break-after: auto; }\r\n  }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"company-title text-style\">\r\n  <i>\r\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\r\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\r\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\r\n  </i>\r\n</div>\r\n\r\n<hr>\r\n\r\n<div class=\"title text-style\">\r\n${route.params.group_id === '1' ? 'LOCAL PURCHASE ORDERS' : route.params.group_id === '4' ? 'PAYMENT VOUCHERS' : (approvalGroup.value?.group?.toUpperCase() || 'APPROVAL')} REPORT\r\n</div>\r\n\r\n<hr>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>S/No.</th>\r\n      <th>Order_no</th>\r\n      <th>Purpose</th>\r\n      <th>Type</th>\r\n      <th>Requester</th>\r\n      <th>Project</th>\r\n      <th>Status</th>\r\n      <th>Date</th>\r\n      <th>Awaits</th>\r\n      <th class=\"text-right\">Cost</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${items.value.map((item, index) => `\r\n    <tr>\r\n      <td>${index + 1}</td>\r\n      <td>${item.approval || 'N/A'}</td>\r\n      <td>${item.purpose || 'N/A'}</td>\r\n      <td>${item.type || 'N/A'}</td>\r\n      <td>${item.requester || 'N/A'}</td>\r\n      <td>${item.project || 'N/A'}</td>\r\n      <td class=\"text-center\">${item.status?.name || 'N/A'}</span></td>\r\n      <td>${item.date || 'N/A'}</td>\r\n      <td>${item.awaits || 'N/A'}</td>\r\n      <td class=\"text-right\">${item.cost || '0'}</td>\r\n    </tr>\r\n    `).join('')}\r\n    <tr style=\"font-weight: bold;\">\r\n      <td colspan=\"9\" class=\"text-right\"><strong>TOTAL:</strong></td>\r\n      <td class=\"text-right\"><strong>${formatNumber(totalCost)}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<div style=\"margin-top: 15px; font-size: 7px;\">\r\n  <p><strong>Report Generated:</strong> ${new Date().toLocaleString()}</p>\r\n  <p><strong>Generated By:</strong> ${JSON.parse(localStorage.getItem('user')).name}</p>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print report: ${error.message}`);\r\n  }\r\n};\r\n\r\nconst deleteApproval = async (row) => {\r\n  const res = await showConfirmation(\r\n    'Delete Record',\r\n    'Are you sure you want to delete Ref No. ' + row.approval,\r\n    `/approval-lists/${row.id}?deleted=1`,\r\n    'put'\r\n  );\r\n  \r\n  if (res?.refresh) {\r\n    getReactiveApprovalItems();\r\n  }\r\n};\r\n\r\n const getReactiveApprovalItems = async () => {\r\n    let url = 'approval-lists';\r\n    if (route.params.group_id !== 'all') {\r\n      url += `?group_id=${route.params.group_id}`;\r\n    }\r\n\r\n    const response = await axiosInstance.get(url);\r\n    items.value = response.data.map((item, index) => {\r\n      let status = item.status;\r\n      if (item.last_checked_in?.status?.id == 4 || item.last_checked_in?.status?.id == 14) {\r\n        status = {\r\n          name: item.last_checked_in.status.name,\r\n          color: item.last_checked_in.status.color\r\n        };\r\n      }\r\n\r\n      let awaits = item.awaiting_approval?.name || 'no one';\r\n      if (item.last_checked_in?.status?.id == 4 || item.last_checked_in?.status?.id == 14 || status.name ==='approved' || status.name ==='paid' ) {\r\n        awaits = 'no one';\r\n      }\r\n\r\n      let awaiter_role_id = item.awaiting_approval?.role_id || null;\r\n      if (item.last_checked_in?.status?.id == 4 || item.last_checked_in?.status?.id == 14) {\r\n        awaiter_role_id = null;\r\n      }\r\n\r\n      return {\r\n        ...item,\r\n        status,\r\n        Sno: index + 1,\r\n        purpose: item.approval_group,\r\n        type: item.requisition_type ?? item?.source,\r\n        approval: '0' + item.id,\r\n        approval_id: item.id,\r\n        requisition: item?.requisition_id ?? item?.source_id,\r\n        requester : item.requester?.name ?? item?.requester,\r\n        requester_id : item.requester?.id,\r\n        awaits,\r\n        awaiter_role_id,\r\n        vendor: item.vendor && item.vendor.name ? item.vendor.name : item.beneficiary,\r\n        vendor_data: item.vendor,\r\n        date : formatDate(item.date),\r\n        created_at : item.date,\r\n        last_checked: formatDate(item.last_checked_in?.approved_at),\r\n        cost: item.items\r\n          ? formatNumber(item.items.reduce(\r\n              (sum, i) =>\r\n                sum +\r\n                ((i?.quantity || 0) *\r\n                  (i.requisition_items?.rate || 0)),\r\n              0\r\n            ))\r\n          : 0,\r\n        approved_at: item.last_checked_in?.approved_at\r\n          ? new Date(item.last_checked_in.approved_at).toLocaleString('en-GB', {\r\n              year: 'numeric',\r\n              month: '2-digit',\r\n              day: '2-digit',\r\n              hour: '2-digit',\r\n              minute: '2-digit',\r\n              second: '2-digit'\r\n            })\r\n          : null\r\n      };\r\n    });\r\n\r\n    items.value.sort((a, b) => {\r\n      const role = Number(user_role_id.value);\r\n      const aMatch = a.awaiter_role_id === role;\r\n      const bMatch = b.awaiter_role_id === role;\r\n\r\n      if (aMatch && !bMatch) return -1;\r\n      if (!aMatch && bMatch) return 1;\r\n      return 0;\r\n    });\r\n }\r\n        const mobileView = ref(false)\r\n    const toggleMobileView = () => {\r\n        if (window.innerWidth < 991) {\r\n           mobileView.value = true \r\n        }\r\n    };\r\n\r\n    const changeStatus = async (id,status) =>{\r\n      const payload = {\r\n        status_id : status\r\n      }\r\n      spinner.value = true\r\n       try{\r\n      await  axiosInstance.put(`approval-lists/${id}`,payload);\r\n       showMessage('Status Changed')\r\n          getApprovalItems()\r\n          document.getElementById('close-approval-modal').click()\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n       spinner.value = false\r\n   }\r\n    }\r\n\r\n    const approval_transactions_columns = ref(['Sno','ref_no','issuer','host','amount','direction','target_account','attachment','date']);    \r\n    const receipt_columns = ref(['Sno','registrar','attachment','date']);    \r\n\r\n    const approvalTransactions = ref([])\r\n    const getApprovalTransactions = async (id) => {\r\n              approvalTransactions.value = []\r\n   try{\r\n      const response = await axiosInstance.get(`account-transactions?approval_id=${id}`)\r\n      approvalTransactions.value = response.data.map((item,index)=>({\r\n    ...item,\r\n    Sno : index + 1,\r\n    attachment :  process.env.VUE_APP_API_BASE_URL+'../../'+ item.attachment,\r\n    amount : formatNumber(item.amount),\r\n    date : formatDate(item.date),\r\n    ref_no : item.reference_number,\r\n    issuer : item?.issuer?.name,\r\n    target_account :  (item?.transaction_point?.name ?? '') + ' ' +\r\n  (item?.transaction_point?.mobile_money?.name ?? '') + ' ' +\r\n  (item?.transaction_point?.mobile_money?.category ?? 'CASH')\r\n  }))\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n\r\n   }\r\n\r\n   getReceipts(id)\r\n};\r\n\r\nconst receipts = ref([])\r\n    const getReceipts = async (id) => {\r\n      receipts.value = []\r\n   try{\r\n      const response = await axiosInstance.get(`purchase-order-receipts?approval_id=${id}`)\r\n      receipts.value = response.data.map((item,index)=>({\r\n    ...item,\r\n    Sno : index + 1,\r\n    attachment :  process.env.VUE_APP_API_BASE_URL+'../../'+ item.attachment,\r\n    date : item.date,\r\n    registrar : item?.registrar?.name\r\n  }))\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n\r\n   }\r\n};\r\n\r\n\r\nonMounted(() => {\r\n              const message = JSON.parse(localStorage.getItem('user')).name + ' is in approval page';\r\n        const receiver = '255698267662'\r\n        const message_id = 'wamid.HBgMMjU1Njk4MjY3NjYyFQIAEhgWM0VCMDE4NkNGOENGMzEwRDNGQzJFRAA='\r\n        // whatsappAlert(message,message_id,receiver)\r\n   toggleMobileView()\r\n  getApprovalGroup()\r\n  getApprovalItems();\r\n \r\n  if (approvalModal.value) {\r\n    onHidden = () => {\r\n      localChecked.value = false;\r\n      spinner.value = false;\r\n    };\r\n    approvalModal.value.addEventListener('hidden.bs.modal', onHidden);\r\n  }\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  if (approvalModal.value && onHidden) {\r\n    approvalModal.value.removeEventListener('hidden.bs.modal', onHidden);\r\n  }\r\n});\r\n</script>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=a20de622&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["globalSearch","data","keyword","lowerKeyword","toLowerCase","trim","containsKeyword","obj","includes","Array","isArray","some","Object","values","filter","item","ref","props","filterValue","watch","val","emit","__exports__","useMeta","title","route","useRoute","axiosInstance","axios","baseURL","process","showConfirmation","inject","approval_status","statuses","id","name","complete_transaction","completeTransaction","async","payload","status_id","remark","value","approval_list_id","approval_item_id","item_id","requisition_type","requisition_source_item_id","requisition_items","items","map","source_id","cost","quantity","rate","description","item_date","remarker_id","JSON","parse","localStorage","getItem","remarker","loading","put","showMessage","getApprovalItems","document","getElementById","click","error","showError","message","console","log","create_approval","toggleApproval","beneficiary","createApproval","labour_request_id","approval_group_id","source","approval_id","requester_id","user_id","requisitionItems","Number","requesting_quantity","request_description","receiver","post","message_id","receivers","forEach","whatsappAlert","clearForm","user_permissions","permissions","spinner","total_amount","user_role_id","role","columns","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","headings","vendor","isBeneficiaryGroup","fillReceipt","computed","params","group_id","status","formatNumber","tableShimmer","formatDate","loadingSpinner","enforceMax","approvalChain","awaiter","awaiter_id","localChecked","approvalModal","onHidden","url","date","response","get","index","last_checked_in","color","awaits","awaiting_approval","awaiter_role_id","role_id","Sno","purpose","approval_group","type","approval","requisition","requisition_id","requester","vendor_data","created_at","last_checked","approved_at","last_checker_id","reduce","sum","i","Date","toLocaleString","year","month","day","hour","minute","second","sort","a","b","aMatch","bMatch","filteredData","newGroupId","oldGroupId","getApprovalGroup","lastApprovalRole","approval_description","getApprovalChain","row","getApprovalTransactions","order_item_id","total","selected","rate_original","roles_sequence","slice","length","approveRequest","subcontractor_agreement_id","last_role","project","approval_items","onApproveClick","edit_item","downloadVoucherPDF","voucher","acc","dateString","getDate","toString","padStart","getMonth","printContent","logo","toUpperCase","join","opt","margin","filename","image","quality","html2canvas","scale","jsPDF","unit","format","orientation","html2pdf","from","set","save","printOrder","isVoucher","iframe","createElement","style","display","body","appendChild","location","email","phone","address","units","doc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","e","printGeneralOrder","getFullYear","tin","vrn","requested_date","iframeDoc","approvalGroup","user_role","editApprovalItem","proof_item","proof","fillProofData","pr","getAccounts","accounts","account","mobile_money","category","handleFileUpload","attachment","target","files","receipt_date","submitReceipt","FormData","append","File","getReceipts","toISOString","amount","reference_number","submitProof","transactions_sum","newVal","printReport","totalCost","parseFloat","replace","isNaN","group","deleteApproval","res","refresh","getReactiveApprovalItems","mobileView","toggleMobileView","window","innerWidth","changeStatus","approval_transactions_columns","receipt_columns","approvalTransactions","ref_no","issuer","target_account","transaction_point","receipts","registrar","onMounted","addEventListener","onBeforeUnmount","removeEventListener"],"sourceRoot":""}