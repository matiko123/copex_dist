"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[4136],{24136:function(e,a,l){l.r(a),l.d(a,{default:function(){return ve}});var t=l(66252),i=l(2262),o=l(3577),s=l(49963),n=l(26212),r=l.n(n),d=l(47244),u=l(87066),c=l(56296);const v={class:"layout-px-spacing"},m=(0,t._)("ul",{class:"navbar-nav flex-row"},[(0,t._)("li",null,[(0,t._)("div",{class:"page-header"},[(0,t._)("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[(0,t._)("ol",{class:"breadcrumb"},[(0,t._)("li",{class:"breadcrumb-item"},[(0,t._)("a",{href:"javascript:;"},"DataTables")]),(0,t._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,t._)("span",null,"Alternative Pagination")])])])])])],-1),p={class:"row layout-top-spacing"},h={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},_={class:"panel br-6 p-0"},b={class:"custom-table"},g=["innerHTML"],w={class:"d-flex"},y={key:0,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-lock-fill",viewBox:"0 0 16 16"},f=(0,t._)("path",{"fill-rule":"evenodd",d:"M8 0a4 4 0 0 1 4 4v2.05a2.5 2.5 0 0 1 2 2.45v5a2.5 2.5 0 0 1-2.5 2.5h-7A2.5 2.5 0 0 1 2 13.5v-5a2.5 2.5 0 0 1 2-2.45V4a4 4 0 0 1 4-4m0 1a3 3 0 0 0-3 3v2h6V4a3 3 0 0 0-3-3"},null,-1),k=[f],V={key:1,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-unlock-fill",viewBox:"0 0 16 16"},U=(0,t._)("path",{"fill-rule":"evenodd",d:"M12 0a4 4 0 0 1 4 4v2.5h-1V4a3 3 0 1 0-6 0v2h.5A2.5 2.5 0 0 1 12 8.5v5A2.5 2.5 0 0 1 9.5 16h-7A2.5 2.5 0 0 1 0 13.5v-5A2.5 2.5 0 0 1 2.5 6H8V4a4 4 0 0 1 4-4"},null,-1),x=[U],S={class:"actions text-center"},H=["onClick"],M=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[(0,t._)("polyline",{points:"3 6 5 6 21 6"}),(0,t._)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),C=[M],P=["onClick"],A=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary"},[(0,t._)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,t._)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),j=[A],E=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,t._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"}),(0,t._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"})],-1),D={class:"modal fade",id:"editModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModalLabel","aria-hidden":"true"},I={class:"modal-dialog modal-xl modal-dialog-scrollable",role:"document"},L={class:"modal-content",style:{height:"90vh"}},B=(0,t._)("div",{class:"modal-header"},[(0,t._)("h5",{class:"modal-title",id:"editModalLabel"},"Edit LPO Item"),(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),q=["onSubmit"],R={class:"modal-body"},W={class:"row mb-2"},z={class:"col-md-3"},$=(0,t._)("label",{for:"editMachineId"},"Machine ",-1),N={class:"col-md-3"},Q=(0,t._)("label",{for:"editMachineId"},"Projects",-1),T={class:"col-md-6"},F=(0,t._)("label",{for:"editMachineId"},"Budget ",-1),O={class:"col-md-4"},Y=(0,t._)("label",{for:"editCategory"},"Category",-1),Z={class:"col-md-5"},G=(0,t._)("label",{for:"editCategory"},"Item",-1),J={class:"col-md-3"},K=(0,t._)("label",{for:"editUnitMeasure"},"Unit Measure",-1),X={class:"col-md-6"},ee=(0,t._)("label",{for:"editDescription"},"Description",-1),ae={class:"col-md-4"},le=(0,t._)("label",{for:"editQuantity"},"Quantity",-1),te={class:"col-md-4"},ie=(0,t._)("label",{for:"editRate"},"Rate",-1),oe={class:"modal-footer"},se=(0,t._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),ne=["disabled"],re={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},de={key:1};var ue={setup(e){(0,c.j)({title:"Alternative Pagination"});const a=(0,t.f3)("showMessage"),l=(0,t.f3)("showError"),n=(0,t.f3)("loadingIndicator"),f=(0,i.iH)(!1);(0,i.iH)(77);let U=null;const M=(0,i.iH)({}),A=(0,i.iH)(""),ue=(0,i.iH)(["SNo","id","order_id","project","machine_id","budget_id","item_id","category","description","unit_measure","quantity","rate","actions"]),ce=(0,i.iH)([]),ve=(0,i.iH)([""]),me=(0,i.iH)([""]),pe=(0,i.iH)({perPage:10,perPageValues:[5,10,20,50],skin:"table",columnsClasses:{actions:"actions text-center"},sortable:[],pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),he=(0,i.iH)(!1),_e=u.Z.create({baseURL:"https://bushman.ink/api/v1/"}),be=u.Z.create({baseURL:{NODE_ENV:"production",VUE_APP_API_BASE_URL:"https://bushman.ink/api/v1/",BASE_URL:"/"}.VUE_APP_API_BASE_URL2}),ge=(0,i.iH)(!1),we=async()=>{ge.value=!0;try{const e=await _e.get("items");ce.value=e.data,ge.value=!1}catch(e){l(e.message),console.log(e)}},ye=(0,i.iH)(""),fe=(0,i.iH)([""]),ke=e=>null===e||void 0===e?"0":Number(e).toLocaleString("en-US"),Ve=e=>{ge.value=!0,confirm("Are you sure you want to delete this item?")&&_e.delete(`/items/${e}`).then((e=>{ge.value=!1,200===e.status?(a("Item Deleted successfully"),we()):(l("Fail to Delete item"),console.error("Error deleting:",e.data))})).catch((e=>{l("error deleting item"),console.error("Error deleting item ",e)}))};(0,t.bv)((()=>{we(),U=new d.Modal(document.getElementById("editModal"))}));const Ue=async e=>{ge.value=!0,await xe(e.project_id);const a=ve.value.find((a=>a.id===e.machine_id));A.value=me.value.find((a=>a.id===e.budget_id)),M.value={...e,machine:a||null},U.show(),ge.value=!1,await Pe(e.budget_id),Me.value=Ce.value.find((a=>a.name===e.category)),Me.value?.item_description&&(fe.value=Me.value.item_description),ye.value=fe.value.find((a=>a.id===e.item_id)),je.value=Ae.value.find((a=>a.name===e.unit_measure)),(0,t.YP)(Me,(e=>{e&&(fe.value=e.item_description),e?.item_description||(ye.value="")}))};(0,t.YP)(A,(async e=>{e&&(Me.value="",await Pe(e.id))}));const xe=async e=>{try{const a=await be.get(`/projects/${e}`);me.value=a.data}catch(a){l(a.message),console.error(a)}},Se=async()=>{if(f.value=!0,!ge.value){if(!A.value?.id)return l("Please select a budget."),void(f.value=!1);if(!Me.value?.id)return l("Please select a category."),void(f.value=!1);if(!ye.value?.id)return l("Please select an item."),void(f.value=!1);if(!je.value?.name)return l("Please select a unit"),void(f.value=!1);try{ge.value=!0;const e=M.value.machine?M.value.machine.id:null,l=await _e.put(`/items/${M.value.id}`,{machineId:e||0,description:M.value.description,category:Me.value.name,item_list_id:ye.value.id,unit_measure:je.value.name,quantity:M.value.quantity,rate:M.value.rate,budget_id:A.value.id});if(200===l.status){U.hide();const l=ce.value.findIndex((e=>e.id===M.value.id));-1!==l&&(ce.value[l].machine_id=e,ce.value[l].description=M.value.description,ce.value[l].category=Me.value.name,ce.value[l].item_id=ye.value.id,ce.value[l].unit_measure=je.value.name,ce.value[l].quantity=M.value.quantity,ce.value[l].rate=M.value.rate,ce.value[l].budget_id=A.value.id),a("Item updated successfully!")}}catch(e){l(e.message),console.error(e)}finally{ge.value=!1,f.value=!1}}},He=async()=>{try{ge.value=!0;const e=await _e.get("/machines");ve.value=e.data}catch(e){l("Failed to fetch machines: "+e.message),console.error("Error fetching machines:",e)}finally{ge.value=!1}},Me=(0,i.iH)(""),Ce=(0,i.iH)([""]),Pe=async e=>{try{const a=await be.get(`/item/${e}`);Ce.value=a.data}catch(a){l(a.message),console.error("Error fetching category:",a)}},Ae=(0,i.iH)([""]),je=(0,i.iH)(""),Ee=async()=>{try{const e=await _e.get("/units");Ae.value=e.data}catch(e){l(e.message),console.error("Error fetching category:",e)}},De=(0,i.iH)([""]),Ie=async()=>{try{ge.value=!0;const e=await _e.get("/projects");De.value=e.data}catch(e){l(e.message),console.error("Error fetching projects:",e)}finally{ge.value=!1}};return(0,t.bv)((()=>{He(),Ie(),Ee()})),(e,a)=>{const l=(0,t.up)("router-link"),d=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",v,[((0,t.wg)(),(0,t.j4)(t.lR,{to:"#breadcrumb"},[m])),(0,t._)("div",p,[(0,t._)("div",h,[(0,t._)("div",_,[(0,t._)("div",b,[ge.value?((0,t.wg)(),(0,t.iD)("div",{key:0,innerHTML:(0,i.SU)(n)()},null,8,g)):(0,t.kq)("",!0),(0,t._)("div",w,[(0,t._)("div",{class:"ms-auto me-5 mt-3 text-dark",style:{cursor:"pointer"},onClick:a[0]||(a[0]=e=>he.value=!he.value)},[he.value?((0,t.wg)(),(0,t.iD)("svg",V,x)):((0,t.wg)(),(0,t.iD)("svg",y,k))])]),(0,t.Wm)(d,{data:ce.value,columns:ue.value,options:pe.value},{SNo:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(e.index+0),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",S,[he.value?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:;",class:"text-danger",onClick:a=>Ve(e.row.id)},C,8,H)):(0,t.kq)("",!0),(0,t._)("a",{href:"javascript:;",class:"edit me-3",onClick:a=>Ue(e.row)},j,8,P),(0,t.Wm)(l,{to:`/report/item-budget/${e.row.project.id}/${e.row.budget_id}`,class:"edit me-3"},{default:(0,t.w5)((()=>[E])),_:2},1032,["to"])])])),rate:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(ke(e.row.rate))+"/= ",1)])),_:1},8,["data","columns","options"])])])])]),(0,t._)("div",D,[(0,t._)("div",I,[(0,t._)("div",L,[B,(0,t._)("form",{onSubmit:(0,s.iM)(Se,["prevent"])},[(0,t._)("div",R,[(0,t._)("div",W,[(0,t._)("div",z,[$,(0,t.Wm)((0,i.SU)(r()),{modelValue:M.value.machine,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value.machine=e),options:ve.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select a Machine",searchable:!0},null,8,["modelValue","options"])]),(0,t._)("div",N,[Q,(0,t.Wm)((0,i.SU)(r()),{modelValue:M.value.project,"onUpdate:modelValue":a[2]||(a[2]=e=>M.value.project=e),options:De.value,"close-on-select":!0,label:"short_name","value-prop":"id",placeholder:"Select a Machine",searchable:!0,required:!0},null,8,["modelValue","options"])]),(0,t._)("div",T,[F,(0,t.Wm)((0,i.SU)(r()),{modelValue:A.value,"onUpdate:modelValue":a[3]||(a[3]=e=>A.value=e),options:me.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select Budget",searchable:!0,required:!0},null,8,["modelValue","options"])]),(0,t._)("div",O,[Y,(0,t.Wm)((0,i.SU)(r()),{modelValue:Me.value,"onUpdate:modelValue":a[4]||(a[4]=e=>Me.value=e),options:Ce.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select Category",searchable:!0,onSelect:a[5]||(a[5]=e=>ye.value="")},null,8,["modelValue","options"])]),(0,t._)("div",Z,[G,(0,t.Wm)((0,i.SU)(r()),{modelValue:ye.value,"onUpdate:modelValue":a[6]||(a[6]=e=>ye.value=e),options:fe.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select Item",searchable:!0},null,8,["modelValue","options"])]),(0,t._)("div",J,[K,(0,t.Wm)((0,i.SU)(r()),{modelValue:je.value,"onUpdate:modelValue":a[7]||(a[7]=e=>je.value=e),options:Ae.value,"close-on-select":!0,label:"name","value-prop":"id",placeholder:"Select Budget",searchable:!0},null,8,["modelValue","options"])]),(0,t._)("div",X,[ee,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"editDescription","onUpdate:modelValue":a[8]||(a[8]=e=>M.value.description=e)},null,512),[[s.nr,M.value.description]])]),(0,t._)("div",ae,[le,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",id:"editQuantity","onUpdate:modelValue":a[9]||(a[9]=e=>M.value.quantity=e)},null,512),[[s.nr,M.value.quantity]])]),(0,t._)("div",te,[ie,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",id:"editRate","onUpdate:modelValue":a[10]||(a[10]=e=>M.value.rate=e)},null,512),[[s.nr,M.value.rate]])])])]),(0,t._)("div",oe,[se,(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:f.value},[f.value?((0,t.wg)(),(0,t.iD)("span",re)):((0,t.wg)(),(0,t.iD)("span",de,"Save changes"))],8,ne)])],40,q)])])])])}}};const ce=ue;var ve=ce}}]);
//# sourceMappingURL=4136.1aecd137.js.map