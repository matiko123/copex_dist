{"version":3,"file":"js/8186.003b982d.js","mappings":"+nFA8HIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,aAEGC,EAAAA,EAAAA,IAAO,eAA3B,MACMC,GAAYD,EAAAA,EAAAA,IAAO,aAEnBE,GADmBC,KAAKC,MAAMC,aAAaC,QAAQ,SAASC,aAC7CP,EAAAA,EAAAA,IAAO,iBAEtBQ,IADiBR,EAAAA,EAAAA,IAAO,mBACTA,EAAAA,EAAAA,IAAO,iBACtBS,GAAaT,EAAAA,EAAAA,IAAO,cAEpBU,GAAkBC,EAAAA,EAAAA,KAAI,GACtBC,GAAUD,EAAAA,EAAAA,IAAI,CAAC,MAAM,SAAS,SAAS,OAAO,SAAS,YAAY,iBAAiB,aAAa,SAEjGE,GAAeF,EAAAA,EAAAA,IAAI,CACrBG,QAAS,GACTC,cAAe,CAAC,GAAI,GAAI,KACxBC,KAAM,kCACNC,eAAgB,CAAEC,QAAS,uBAC3BC,SAAU,CAAC,MAAO,OAAO,QAAQ,QAAQ,UAAU,cACnDC,SAAU,CACNC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAEVC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACHC,MAAO,oCACPC,OAAQ,GACRC,kBAAmB,YACnBC,MAAO,YAEXC,kBAAkB,IAGhBC,EAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAKXC,GAAW1B,EAAAA,EAAAA,IAAI,IACf2B,EAAqBC,UAC3B,IACE,MAAMC,QAAiBP,EAAcQ,IAAK,wBAC1CJ,EAASK,MAAQF,EAASG,KAAKC,KAAI,CAACC,EAAKC,KAAN,IAC9BD,EACHE,IAAMD,EAAQ,EACdE,WAAcZ,oCAA2CS,EAAKG,WAC9DC,OAASzC,EAAaqC,EAAKI,QAC3BC,KAAOzC,EAAWoC,EAAKK,MACvBC,OAASN,EAAKO,iBACdC,OAASR,GAAMQ,QAAQC,KACvBC,gBAAmBV,GAAMW,mBAAmBF,MAAQ,IAAM,KAC3DT,GAAMW,mBAAmBC,cAAcH,MAAQ,IAAM,KACrDT,GAAMW,mBAAmBC,cAAcC,UAAY,YAErD,MAAMC,GACH1D,EAAU0D,EAAMC,SAChBC,QAAQC,IAAIH,KAKVI,GAAcpD,EAAAA,EAAAA,IAAI,IAClBqD,EAAmBC,IACtBF,EAAYrB,MAAQuB,GAIjBC,EAAc3B,UAClB,IACE,MAAM4B,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAMC,QAAU,OACvBH,SAASI,KAAKC,YAAYN,GAE1B,MAAMO,EAAgB,88CAqDpBrC,EAASK,MAAME,KAAI,CAAC+B,EAAS7B,IAAW,yBAElCA,EAAQ,qBACR6B,EAAQxB,QAAU,yBAClBwB,EAAQtB,QAAU,yBAClBsB,EAAQC,MAAQ,yBAChBD,EAAQpB,gBAAkB,yBAC1BoB,EAAQzB,MAAQ,yBAChByB,EAAQE,WAAa,4CACFF,EAAQ1B,QAAU,8BAE1C6B,KAAK,8HAG2BtE,EAAa6B,EAASK,MAAMqC,QAAO,CAACC,EAAKL,KACxE,MAAM1B,EAAmC,kBAAnB0B,EAAQ1B,OAAsBgC,WAAWN,EAAQ1B,OAAOiC,QAAQ,KAAM,KAAOP,EAAQ1B,OAC3G,OAAO+B,GAAOG,MAAMlC,GAAU,EAAIA,KACjC,2EASCmC,EAAYjB,EAAOkB,cAAcjB,SACvCgB,EAAUE,OACVF,EAAUG,MAAMb,GAChBU,EAAUI,QAEVrB,EAAOsB,OAAS,KACdtB,EAAOkB,cAAcK,QACrBvB,EAAOkB,cAAcM,QACrBC,YAAW,KACTxB,SAASI,KAAKqB,YAAY1B,KACzB,MAEL,MAAOR,GACP1D,EAAW,2BAA0B0D,EAAMC,a,OAI3CkC,EAAAA,EAAAA,KAAU,KACPxD,O,4kCCrSP,MAAMyD,EAAc,EAEpB","sources":["webpack://cork-vue3/./src/views/accounts/payments.vue","webpack://cork-vue3/./src/views/accounts/payments.vue?db9f"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n        <ul class=\"navbar-nav flex-row mt-2\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Accounts</a></li>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Payments</span></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n           <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n                            <button class=\"btn btn-success \"\r\n                             @click=\"printReport()\" \r\n                            >                           \r\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n  <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>\r\n\r\n       \r\n\r\n\r\n              <!-- loading spinner starts -->\r\n        <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n        <!-- Loading spinner ends -->\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"payments\" :columns=\"columns\" :options=\"table_option\">\r\n                            <template #actions=\"props\">\r\n                                <div class=\"actions text-center\">\r\n\r\n                                    <a href=\"javascript:;\" class=\"edit me-3\" @click=\"openEditModal(props.row)\" data-bs-toggle=\"modal\" :data-bs-target=\"'#account-edit-modal'\">\r\n                                        <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            width=\"24\"\r\n                                            height=\"24\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            fill=\"none\"\r\n                                            stroke=\"currentColor\"\r\n                                            stroke-width=\"1.5\"\r\n                                            stroke-linecap=\"round\"\r\n                                            stroke-linejoin=\"round\"\r\n                                            class=\"text-success\"\r\n                                        >\r\n                                            <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                                            <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                                        </svg>\r\n                                    </a>\r\n                                </div>                                 \r\n                            </template>\r\n                            <template #attachment=\"props\">\r\n                                <!-- <a :href=\"props.row.attachment\" target=\"_blank\" class=\"text-primary\">\r\n                                    Open Attachment\r\n                                </a> -->\r\n                                <a :href=\"props.row.attachment\"\r\n                                          target=\"_blank\"\r\n                                          class=\"badge badge-primary\"\r\n                                          style=\"cursor: pointer;\"\r\n                                          @click=\"fillTransaction(props.row)\"\r\n                                >\r\n                                    Open Attachment\r\n                              </a>\r\n                            </template>\r\n\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n<!-- attachment modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"attachment\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">PROOF OF PAYMENT ATTACHMENT</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"row layout-top-spacing\">\r\n          <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n            <div class=\"panel p-0\">\r\n              <div class=\"custom-table table3\">\r\n                <iframe :src=\"transaction.attachment\" width=\"100%\" height=\"600px\"></iframe>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n <!-- attachment modal ends -->\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n    import { onMounted, ref, inject  } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    \r\n    useMeta({ title: 'account' });  \r\n    \r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loadingSpinner = inject('loadingSpinner'); \r\n    const formatNumber = inject('formatNumber')\r\n    const formatDate = inject('formatDate')\r\n\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['Sno','ref_no','issuer','host','amount','direction','target_account','attachment','date']);    \r\n\r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 ,100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['Sno', 'name','email','phone','address','attachment'],        \r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n\r\n\r\nconst payments = ref([])\r\nconst getAccountPayments = async()=>{\r\ntry{\r\n  const response = await axiosInstance.get(`account-transactions`)\r\n  payments.value = response.data.map((item,index)=>({\r\n    ...item,\r\n    Sno : index + 1,\r\n    attachment :  process.env.VUE_APP_API_BASE_URL+'../../'+ item.attachment,\r\n    amount : formatNumber(item.amount),\r\n    date : formatDate(item.date),\r\n    ref_no : item.reference_number,\r\n    issuer : item?.issuer?.name,\r\n    target_account :  (item?.transaction_point?.name ?? '') + ' ' +\r\n  (item?.transaction_point?.mobile_money?.name ?? '') + ' ' +\r\n  (item?.transaction_point?.mobile_money?.category ?? 'CASH')\r\n  }))\r\n}catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n}\r\n\r\n}\r\n    \r\nconst transaction = ref('')\r\nconst fillTransaction = (trans)=>{\r\n   transaction.value = trans\r\n}\r\n\r\n\r\nconst printReport = async () => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Account Transaction Payments Report</title>\r\n<style>\r\n  body { font-family: 'Courier New', monospace; margin: 40px; font-size: 13px; }\r\n  .text-style { font-family: 'Courier New', monospace; }\r\n  .company-title { text-align: center; }\r\n  .title { text-align: center; font-size: 20px; margin: 10px 0; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 10px; }\r\n  th, td { border: 0.5px solid #000; padding: 6px; }\r\n  th { background-color: #f8f8f8; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-center { text-align: center; }\r\n  hr { border: 0; border-top: 0.5px solid #000; margin: 0px 0; }\r\n  @media print { body { margin: 10mm; } }\r\n</style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"company-title text-style\">\r\n  <i>\r\n  <h1>COPEX CONTRACTORS CO.LTD</h1>\r\n  <div><b>Address:</b> Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div><b>Tel:</b> 0713 000 777, 0657 111 555</div>\r\n  <div><b>Email:</b> info@copexcontractors.co.tz</div>\r\n  <div><b>TIN:</b> 135-489-247 &nbsp;&nbsp; <b>VRN:</b> 40-032826C</div>\r\n  </i>\r\n</div>\r\n\r\n<hr style=\"margin-top:20px\">\r\n\r\n<div class=\"title text-style\">\r\n  ACCOUNT TRANSACTION PAYMENTS REPORT\r\n</div>\r\n\r\n<hr>\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>No.</th>\r\n      <th>Ref NO</th>\r\n      <th>Issuer</th>\r\n      <th>Host</th>\r\n      <th>Account Target</th>\r\n      <th>Date</th>\r\n      <th>Direction</th>\r\n      <th class=\"text-right\">Amount</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${payments.value.map((payment, index) => `\r\n    <tr>\r\n      <td>${index + 1}</td>\r\n      <td>${payment.ref_no || 'N/A'}</td>\r\n      <td>${payment.issuer || 'N/A'}</td>\r\n      <td>${payment.host || 'N/A'}</td>\r\n      <td>${payment.target_account || 'N/A'}</td>\r\n      <td>${payment.date || 'N/A'}</td>\r\n      <td>${payment.direction || 'N/A'}</td>\r\n      <td class=\"text-right\">${payment.amount || '0'}</td>\r\n    </tr>\r\n    `).join('')}\r\n    <tr>\r\n      <td colspan=\"7\" class=\"text-right\"><strong>TOTAL:</strong></td>\r\n      <td class=\"text-right\"><strong>${formatNumber(payments.value.reduce((sum, payment) => {\r\n        const amount = typeof payment.amount === 'string' ? parseFloat(payment.amount.replace(/,/g, '')) : payment.amount;\r\n        return sum + (isNaN(amount) ? 0 : amount);\r\n      }, 0))}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print report: ${error.message}`);\r\n  }\r\n};\r\n\r\n    onMounted(() => {\r\n       getAccountPayments()\r\n    });\r\n</script>","import script from \"./payments.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./payments.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./payments.vue?vue&type=style&index=0&id=781a914c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","inject","showError","tableShimmer","JSON","parse","localStorage","getItem","permissions","formatNumber","formatDate","loading_spinner","ref","columns","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","payments","getAccountPayments","async","response","get","value","data","map","item","index","Sno","attachment","amount","date","ref_no","reference_number","issuer","name","target_account","transaction_point","mobile_money","category","error","message","console","log","transaction","fillTransaction","trans","printReport","iframe","document","createElement","style","display","body","appendChild","printContent","payment","host","direction","join","reduce","sum","parseFloat","replace","isNaN","iframeDoc","contentWindow","open","write","close","onload","focus","print","setTimeout","removeChild","onMounted","__exports__"],"sourceRoot":""}