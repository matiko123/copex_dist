{"version":3,"file":"js/2968.228e74c7.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/payment/index.vue","webpack://cork-vue3/./src/views/payment/index.vue?127f"],"sourcesContent":["<template>   \r\n    <div class=\"layout-px-spacing\">\r\n        <!-- Breadcrumb -->\r\n        <ul class=\"navbar-nav flex-row\">\r\n            <li>\r\n                <div class=\"page-header\">\r\n                    <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb\">\r\n                            <li class=\"breadcrumb-item\"><a href=\"javascript:;\">On Account Payment</a></li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <!-- Filters Section -->\r\n        <div class=\"row mb-4 justify-content-center align-items-center\" >\r\n            <div class=\"col-md-4\">\r\n                <div class=\"form-group\">\r\n                    <label>Company</label>\r\n                    <select \r\n                        class=\"form-control\" \r\n                        v-model=\"company_id\" \r\n                        @change=\"getPaymentRecords()\"\r\n                    >\r\n                        <option value=\"\">All Companies</option>\r\n                        <option :value=\"6\">COPEX</option>\r\n                        <option :value=\"5\">BUSHMAN</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <div class=\"form-group\">\r\n                    <label>Budget Type</label>\r\n                    <select \r\n                        class=\"form-control\" \r\n                        v-model=\"selectedTypes\"\r\n                        @change=\"getPaymentRecords()\"\r\n                    >\r\n                        <option value=\"\">All Types</option>\r\n                        <option value=\"budgeted\">Budgeted</option>\r\n                        <option value=\"un_budgeted\">Unbudgeted</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>        \r\n        <div  >\r\n        <button  class=\"btn btn-dark me-2 px-3\" @click=\"$router.go(-1)\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\r\n                <path fill-rule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8\"/>\r\n            </svg>\r\n        </button>\r\n        \r\n        <div v-if=\"user_permissions.includes('can_add_payment_record')\" class=\"d-flex me-4 gap-3\">\r\n            <div  class=\"ms-auto\">\r\n                <button v-if=\"is_closed\" class=\"btn btn-primary\" @click=\"payment_registration= true; is_closed = false; \">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                        <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n                    </svg>\r\n                </button>\r\n                <button v-else class=\"btn btn-danger\" @click=\"payment_registration = false; is_closed = true\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-x-square\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                        <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n          <div class=\"text-right mb-3\">\r\n            <button \r\n                class=\"btn btn-success\"\r\n                @click=\"printPaymentRecords(items,selectedTypes);\"\r\n                :disabled=\"loading_spinner || selectedTypes === ''\"\r\n            >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n                        <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n                </svg>\r\n               \r\n            </button>\r\n        </div>\r\n        </div>\r\n\r\n\r\n        <form v-if=\"payment_registration\" class=\"mt-1 p-3 border rounded bg-white shadow\" @submit.prevent=\"recordPayment\">\r\n           <h4 class=\"text-center\">M-PESA PAYMENT TRANSCTION REGISTRATION FORM </h4>                  \r\n           <div class=\"row mb-2\">\r\n\r\n            <div   class=\"col-md-3\">\r\n              <label class=\"form-label\">Date</label>\r\n              <input type=\"date\" class=\"form-control\" v-model=\"date_created\" name=\"date\" required>\r\n            </div>     \r\n            <div class=\"col-md-3\">\r\n              <label class=\"form-label\">Batch NO</label>\r\n              <input type=\"text\" placeholder=\"Enter Batch Number\" class=\"form-control\" v-model=\"batch_no\" name=\"Vendor_name\" required>\r\n          </div>   \r\n           <div class=\"col-md-3\">\r\n              <label class=\"form-label\">Beneficiary Name</label>\r\n              <input type=\"text\" placeholder=\"Enter Beneficiary Name\" class=\"form-control\" v-model=\"beneficiary_name\" name=\"Vendor_name\" required>\r\n          </div>       \r\n           <div class=\"col-md-3\">\r\n              <label class=\"form-label\">LPO Number / Document Number</label>\r\n              <!-- <multiselect\r\n        v-model=\"lpo_number\"\r\n        :options=\"LPo_numbers\"\r\n        :multiple=\"false\"\r\n        :searchable=\"true\"\r\n        label=\"lpo_number\"\r\n        required \r\n        :placeholder=\"'Select LPO Number'\"\r\n        ></multiselect> -->\r\n          <input type=\"text\" placeholder=\"Enter lpo/document number \" class=\"form-control\" v-model=\"lpo_number\" name=\"Vendor_name\" required>\r\n          </div>          \r\n          <div class=\"col-md-3\">\r\n              <label class=\"form-label\">Project</label>\r\n             <input type=\"text\" placeholder=\"Enter project name\" class=\"form-control\" v-model=\"project\" name=\"Vendor_name\" required>\r\n          </div>         \r\n          <div   class=\"col-md-3\">\r\n              <label class=\"form-label\">Amount</label>\r\n              <input type=\"number\" placeholder=\"Enter Amount\" class=\"form-control\" v-model.number=\"amount\" name=\"Vendor_name\" required>\r\n          </div>\r\n          <div   class=\"col-md-3\">\r\n              <label class=\"form-label\">Account/Phone</label>\r\n              <input type=\"text\" placeholder=\"Enter phone / account\" class=\"form-control\" v-model=\"payment_number\" name=\"Vendor_name\" required>\r\n          </div>\r\n           <div class=\"col-md-3\">\r\n                    <label class=\"form-label\">Budget Type</label>\r\n        <multiselect\r\n        v-model=\"budget_type\"\r\n        :options=\"['budgeted ', 'un_budgeted']\"\r\n        :multiple=\"false\"\r\n        :searchable=\"true\"\r\n        required \r\n        :placeholder=\"'Select Budget Type'\"\r\n        ></multiselect>\r\n            </div>\r\n            <div   class=\"col-md-12\">\r\n              <label class=\"form-label\">Purpose Of Payment</label>\r\n            <textarea name=\"\" placeholder=\"Enter Purpose of payment\" class=\"form-control md-2\" v-model=\"description\" id=\"\"></textarea>\r\n           </div>\r\n            </div>\r\n            <div class=\"text-center gap-2 justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"payment_registration = false;add_vendor=false;is_closed=true\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n            </div>\r\n        \r\n        </form>\r\n        <div v-if=\"loading_spinner\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n        </div>\r\n   <div>\r\n        <div  class=\"text-center\"><h4>M-PESA PAYMENT TRANSACTION RECORDS FOR <span v-if=\"company_id==5\">BUSHMAN</span> <span v-else-if=\"company_id==6\">COPEX</span>  <span v-else>ALL COMPANY</span> </h4></div>\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"row mb-3 d-flex justify-content-center align-items-center\">\r\n                    <div v-if=\"selectedTypes==='budgeted' || selectedTypes===''\" class=\"col-md-5\">\r\n                        <div class=\"card\">\r\n                            <div class=\"card-body d-flex align-items-center\">                               \r\n                                <div>\r\n                                    <h5 class=\"card-title\">Total Budgeted</h5>\r\n                             <strong>       <h5 class=\"card-text text-success fw-4\">{{ Number(totalBudgeted).toLocaleString() }} Tsh</h5></strong>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div  v-if=\"selectedTypes === 'un_budgeted' || selectedTypes === ''\" class=\"col-md-5\">\r\n                        <div class=\"card\">\r\n                            <div class=\"card-body d-flex align-items-center\">                                \r\n                                <div>\r\n                                    <h5 class=\"card-title\">Total Unbudgeted</h5>\r\n                                 <strong>    <h5 class=\"card-text text-warning fw-3 \">{{ Number(totalUnbudgeted).toLocaleString() }} Tsh</h5></strong>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table \r\n                            :data=\"items\" \r\n                            :columns=\"columns\" \r\n                            :options=\"table_option\"                            \r\n                        >\r\n                            <template #status=\"props\" >\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + (props.row.status ? props.row.status.class : '')\">{{ props.row.status ? props.row.status.key : 'Unknown' }} </span>\r\n                            </template>\r\n                            <template #actions=\"props\" >\r\n                                \r\n                                <svg  \r\n                                v-if=\"user_permissions.includes('can_edit_payment_record')\"\r\n                                class=\"w-6 h-6 text-gray-800 dark:text-white\" \r\n\r\n                                aria-hidden=\"true\"\r\n                                 xmlns=\"http://www.w3.org/2000/svg\" \r\n                                 width=\"24\" height=\"24\" fill=\"none\" \r\n                                 viewBox=\"0 0 24 24\"\r\n                              @click=\"openEditModal(props.row)\" \r\n                              >\r\n                                    <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z\"/>\r\n                                    </svg>\r\n  \r\n    <!-- Modal -->\r\n                          <teleport to=\"body\">\r\n  <div v-if=\"show_modal\" class=\"modal fade show d-block \" role=\"dialog\">\r\n    <div class=\"modal-dialog modal-dialog modal-xl \">\r\n      <div class=\"modal-content d-flex flex-column\" style=\"block-size: auto;\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">Editing Form for Payment {{ voucher_number }} </h5>\r\n          <button type=\"button\" class=\"btn-close\" @click=\"closeEditModal\"></button>\r\n          </div>\r\n           <div v-if=\"loading_update\" class=\"d-flex justify-content-center align-items-center\" style=\"block-size: 100px;\">\r\n            <span class=\"text-primary spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-arrow-repeat\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M11.534 7h-4.07a.5.5 0 0 0 0 1h4.07a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 0-.832-.554A4 4 0 1 1 8 4a.5.5 0 0 0 0-1z\"/>\r\n                    <path d=\"M8 1a7 7 0 1 1-6.546 4.914.5.5 0 1 0-.832-.554A8 8 0 1 0 8 0a.5.5 0 0 0 0 1z\"/>\r\n                </svg>\r\n                Loading...\r\n            </span>\r\n        </div>\r\n        <form  v-else class=\"mt-1 p-3 border rounded bg-white shadow\" @submit.prevent=\"updatePaymentRecord\">\r\n                      \r\n           <div class=\"row mb-2\">\r\n\r\n            <div   class=\"col-md-3\">\r\n              <label class=\"form-label\">Date</label>\r\n              <input type=\"date\" class=\"form-control\" v-model=\"date_created\" name=\"date\" required>\r\n            </div>     \r\n            <div class=\"col-md-3\">\r\n              <label class=\"form-label\">Batch NO</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"batch_no\" name=\"Vendor_name\" required>\r\n          </div>   \r\n           <div class=\"col-md-3\">\r\n              <label class=\"form-label\">beneficiary_name</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"beneficiary_name\" name=\"Vendor_name\" required>\r\n          </div>       \r\n           <div class=\"col-md-3\">\r\n              <label class=\"form-label\">LPO Number</label>            \r\n          <input type=\"text\" class=\"form-control\" v-model=\"lpo_number\" name=\"Vendor_name\" required>\r\n          </div>          \r\n          <div class=\"col-md-3\">\r\n              <label class=\"form-label\">Project</label>\r\n             <input type=\"text\" class=\"form-control\" v-model=\"project\" name=\"Vendor_name\" required>\r\n          </div>         \r\n          <div   class=\"col-md-3\">\r\n              <label class=\"form-label\">Amount</label>\r\n              <input type=\"number\" class=\"form-control\" v-model.number=\"amount\" name=\"Vendor_name\" required>\r\n          </div>\r\n          <div   class=\"col-md-3\">\r\n              <label class=\"form-label\">Payment Number</label>\r\n              <input type=\"text\" class=\"form-control\" v-model=\"payment_number\" name=\"Vendor_name\" required>\r\n          </div>\r\n           <div class=\"col-md-3\">\r\n                    <label class=\"form-label\">Budget Type</label>\r\n        <multiselect\r\n        v-model=\"budget_type\"\r\n        :options=\"['budgeted ', 'un_budgeted']\"\r\n        :multiple=\"false\"\r\n        :searchable=\"true\"\r\n        required \r\n        :placeholder=\"'Select Budget Type'\"\r\n        ></multiselect>\r\n            </div>\r\n            <div   class=\"col-md-12\">\r\n              <label class=\"form-label\">Purpose Of Payment</label>\r\n            <textarea name=\"\" class=\"form-control md-2\" v-model=\"description\" id=\"\"></textarea>\r\n           </div>\r\n            </div>\r\n            <div class=\"text-center gap-2 justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-danger me-3\" @click=\"closeEditModal\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Update</button>\r\n            </div>\r\n        \r\n        </form>\r\n        \r\n      </div>\r\n    </div>\r\n  </div>\r\n   </teleport>\r\n  \r\n    <!-- Modal Background Overlay -->\r\n    <div v-if=\"show_modal\" class=\"modal-backdrop fade show\" style=\"background-color: rgba(0, 0, 0.5, 0.5);\"></div> \r\n             <svg \r\n             v-if=\"user_permissions.includes('can_delete_payment_record')\"\r\n              class=\"w-6 h-6  text-danger\" \r\n               aria-hidden=\"true\" \r\n               xmlns=\"http://www.w3.org/2000/svg\" \r\n                 width=\"24\" height=\"24\" fill=\"none\" \r\n                   viewBox=\"0 0 24 24\" \r\n                    @click=\"deletePaymentRecord(props.row.id)\"\r\n                      >\r\n                  <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 7h12M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2m2 0v12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7h12z\"/>\r\n               </svg>\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n         </div>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n\r\n<script setup>\r\n\r\n    import axios from 'axios';    \r\n    import { onMounted, ref,inject } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import '@/assets/sass/elements/tooltip.scss';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Purchase Order' });\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const add_vendor = ref(false);\r\n    const payment_registration = ref(false);\r\n    const columns = ref(['SNo','batch_no','beneficiary_name','date','payment_number','purpose_of_payment','budget','unbudget','project','actions',]);\r\n    const items = ref([]);\r\n    const type = ref('')\r\n    const is_open = ref(false);\r\n    const table_option = ref({\r\n        perPage: 10,\r\n        perPageValues: [5, 10, 20, 50],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo','batch_no','beneficiary_name','date','payment_number','purpose_of_payment','budget','unbudget', 'amount'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const totalBudgeted= ref('');\r\n    const totalUnbudgeted = ref('');\r\n    const loading_spinner = ref(false);\r\n    const project = ref('');\r\n    const payment_number = ref('')\r\n    const beneficiary_name = ref('');    \r\n    const batch_no = ref('');\r\n    const lpo_number= ref('');\r\n    const budget_type = ref('');\r\n    const amount= ref('');\r\n    const description = ref('');    \r\n    const date_created = ref('');\r\n    \r\n    if (!date_created.value) {\r\n        date_created.value = new Date().toISOString().substr(0, 10);\r\n    }\r\n\r\n     \r\n  const is_closed = ref(true);\r\n    const company_id = ref('');\r\n    const user_role = JSON.parse(localStorage.getItem(\"user\")).role;\r\n    const user_id = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    const print_url = ref(process.env.VUE_APP_API_BASE_URL);\r\n    const axiosInstance = axios.create({\r\n      //  baseURL: process.env.VUE_APP_API_BASE_URL\r\n       baseURL: \"https://construction.trustdigital.space/api/v1/\"\r\n    });\r\n\r\n\r\n    const clearForm = ()=>{\r\n     description.value =  \"\";   \r\n     batch_no.value = \"\";\r\n     budget_type.value = '';\r\n     amount.value = '';\r\n     payment_id.value= \"\";\r\n     lpo_number.value= '';\r\n     project.value ='';\r\n     payment_number.value = '';\r\n     beneficiary_name.value= '';\r\n    };\r\n\r\n    const recordPayment = async () => {\r\n\r\n        if(!company_id.value){\r\n            showError(\"Please Select Company\");\r\n            return;\r\n        }\r\n    try {\r\n        payment_registration.value = false;\r\n        loading_spinner.value = true;        \r\n        // First register vendor if needed\r\n               const data = {\r\n            batch_no : batch_no.value,\r\n            beneficiary_name:beneficiary_name.value,\r\n            description: description.value,\r\n            payment_number : payment_number.value,\r\n            date_created:date_created.value,\r\n            budget_type: budget_type.value,\r\n            amount:amount.value,  \r\n            lpo_number:lpo_number.value, \r\n            project:project.value,    \r\n            company_id:company_id.value             \r\n           \r\n        };\r\n\r\n        const response = await axiosInstance.post('/on-account-payment', data);\r\n\r\n        if (response.status == 201) {\r\n        clearForm();\r\n        getPaymentRecords();\r\n        loading_spinner.value = false;\r\n        is_closed.value = true;\r\n        showMessage(\"Voucher Requested Successfully\");\r\n        }\r\n        else{\r\n            showError(\"Faild to Add record\",error );\r\n             is_closed.value = true;\r\n             loading_spinner.value = false;\r\n        }\r\n        \r\n    } catch (error) {\r\n        showError(\"Error code \" + error.status);\r\n        console.error(\"Error registering Order:\", error);\r\n        loading_spinner.value = false;\r\n          is_closed.value = true;\r\n    }\r\n};\r\nconst getPaymentRecords = async () => {\r\n    is_open.value = true;\r\n    loading_spinner.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`/on-account-payment`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            let filteredData = response.data;\r\n\r\n            // Filter by company_id only if it has a value\r\n            if (company_id.value) {\r\n                filteredData = filteredData.filter(item => item.company_id === company_id.value);\r\n            }\r\n             if (selectedTypes.value) {\r\n                filteredData = filteredData.filter(item => item.budget_type === selectedTypes.value);\r\n            }\r\n            // Calculate totals (will apply to all data or filtered data)\r\n            totalBudgeted.value = filteredData\r\n                .filter((item) => item.budget_type === 'budgeted')\r\n                .reduce((sum, item) => sum + parseFloat(item.amount || 0), 0);\r\n\r\n            totalUnbudgeted.value = filteredData\r\n                .filter((item) => item.budget_type === 'un_budgeted')\r\n                .reduce((sum, item) => sum + parseFloat(item.amount || 0), 0);\r\n            \r\n            // Map the data (no need to filter again as we already filtered above)\r\n            items.value = filteredData.map((order, index) => ({\r\n                SNo: index + 1,\r\n                id: order.id,\r\n                lpo_number: order.lpo_number,\r\n                date: order.date_created,\r\n                amount: order.amount,               \r\n                batch_no: order.batch_no,                \r\n                beneficiary_name: order.beneficiary_name,               \r\n                purpose_of_payment: order.description,               \r\n                project: order.project,           \r\n                budget: order.budget_type === 'budgeted' ?Number(order.amount).toLocaleString(): \"---\" ,\r\n                unbudget: order.budget_type === 'un_budgeted' ? Number(order.amount).toLocaleString() :\"---\",\r\n                payment_number: order.payment_number\r\n            }));\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n        showError(error.message);\r\n    } finally {\r\n        loading_spinner.value = false;\r\n    }\r\n};\r\n    //code for etint model\r\n   const show_modal = ref(false);\r\n   const payment_id = ref('');\r\n   const voucher_number = ref();\r\n   const openEditModal= (row) => {           \r\n        payment_id.value= row.id;\r\n       \r\n        project.value = row.project;\r\n        lpo_number.value = row.lpo_number;\r\n        beneficiary_name.value = row.beneficiary_name;\r\n        amount.value= row.amount;\r\n        payment_number.value=row.payment_number;  \r\n        if (row.budget === \"Budgeted\") {\r\n          budget_type.value = row.budget;\r\n           } else {\r\n        budget_type.value = row.unbudget; // or your default value\r\n        }\r\n        budget_type.value= row.budget_type;\r\n        description.value=row.purpose_of_payment;\r\n        batch_no.value = row.batch_no;\r\n        show_modal.value = true;      \r\n           \r\n    }\r\n    const  closeEditModal = () => {\r\n        // Reset the form fields\r\n        clearForm();\r\n        show_modal.value = false;\r\n    }\r\n    const loading_update= ref(false);\r\n    const updatePaymentRecord = async () => {\r\n    try {\r\n        payment_registration.value = false;\r\n        loading_update.value = true;        \r\n        // First register vendor if needed\r\n            \r\n            const data = {\r\n            batch_no : batch_no.value,\r\n            beneficiary_name:beneficiary_name.value,\r\n            description: description.value,\r\n            payment_number : payment_number.value,\r\n            date_created:date_created.value,\r\n            budget_type: budget_type.value,\r\n            amount:amount.value,  \r\n            lpo_number:lpo_number.value, \r\n            project:project.value,    \r\n                     \r\n           \r\n        };\r\n\r\n        const response = await axiosInstance.patch(`/on-account-payment/${payment_id.value}`, data);\r\n\r\n        if (response.status == 200) {\r\n        clearForm();\r\n        getPaymentRecords();\r\n        loading_update.value = false;\r\n        is_closed.value = true;\r\n        closeEditModal();\r\n        showMessage(\"Voucher Updated Successfully\");\r\n        }\r\n        else{\r\n            showError(\"Faild to update record\",error );\r\n             is_closed.value = true;\r\n             loading_update.value = false;\r\n        }\r\n        \r\n    } catch (error) {\r\n        showError(\"Error code \" + error.status);\r\n        console.error(\"Error update Order:\", error);\r\n        loading_update.value = false;\r\n          is_closed.value = true;\r\n    }\r\n};\r\n\r\nconst deletePaymentRecord = async (id) => {\r\n  if (confirm(\"are sure u want to delete this record!\")) {\r\n    loading_spinner.value= true;\r\n      const responce = await axiosInstance.delete(`on-account-payment/${id}`);\r\n      if (responce.status == 200) {\r\n       \r\n        getPaymentRecords();\r\n         showMessage(\"deleted Successfully\");\r\n      }\r\n      else{\r\n showError(\"fail to delete record\");\r\n    }\r\n  }\r\n  else{\r\n    return;\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nconst user = ref('');\r\nconst user_permissions = ref([]);\r\n    onMounted(() => {\r\n        const storedUser = localStorage.getItem(\"user\");\r\n        user.value = JSON.parse(storedUser);       \r\n        user_permissions.value = user.value.permissions;\r\n        getPaymentRecords();\r\n    });\r\n\r\n\r\nconst selectedTypes = ref('');\r\nconst printPaymentRecords = (filteredItems, printType) => { \r\n    if (!Array.isArray(filteredItems)) {\r\n        console.error('filteredItems is not an array:', filteredItems);\r\n        filteredItems = [];\r\n    }   \r\n    \r\n    const companyName = {\r\n        5: \"BUSHMAN\",\r\n        6: \"COPEX\"\r\n    }[company_id.value] || \"ALL COMPANY\";\r\n\r\n    const headers = [\r\n        \"S/N\", \"Batch No\", \"Beneficiary\", \"Date\", \r\n        \"Payment No\", \"Purpose\", \"Amount\", \"Project\"\r\n    ];\r\n\r\n    const formatCurrency = (amount) => {\r\n        const num = Number(amount);\r\n        return isNaN(num) ? '-' : num.toLocaleString('en-US') + ' Tsh';\r\n    };\r\n    const rows = filteredItems.map((item, idx) => `\r\n        <tr class=\"${idx % 2 === 0 ? 'even' : 'odd'}\">\r\n            <td class=\"center\">${idx + 1}</td>\r\n            <td>${item.batch_no || '-'}</td>\r\n            <td>${item.beneficiary_name || '-'}</td>\r\n            <td class=\"nowrap\">${item.date || '-'}</td>\r\n            <td>${item.payment_number || '-'}</td>\r\n            <td>${item.purpose_of_payment || '-'}</td>\r\n            <td class=\"right bold\">${formatCurrency(item.amount)}</td>\r\n            <td>${item.project || '-'}</td>\r\n        </tr>\r\n    `).join('');\r\n    const totalAmount = filteredItems.reduce((sum, item) => sum + Number(item.amount || 0), 0);\r\n\r\n    const printWindow = window.open('', '_blank', 'width=1200,height=800');\r\n    \r\n    // Use backticks carefully and escape script tags\r\n    printWindow.document.write(`\r\n        <html>\r\n        <head>\r\n            <title>Payment Records - ${companyName}</title>\r\n            <style>\r\n                @page { size: A4 landscape; margin: 0.5cm; }\r\n                body { \r\n                    font-family: Arial, sans-serif; \r\n                    margin: 0; \r\n                    padding: 15px; \r\n                    font-size: 10px;\r\n                }\r\n                .header { text-align: center; margin-bottom: 15px; }\r\n                .summary { text-align: center; margin: 10px 0; font-size: 13px; }\r\n                table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 12px; }\r\n                th { background: #0066cc; color: white; padding: 8px; text-align: left; }\r\n                td { padding: 6px; border: 1px solid #ddd; }\r\n                .center { text-align: center; }\r\n                .right { text-align: right; }\r\n                .bold { font-weight: bold; }\r\n                .nowrap { white-space: nowrap; }\r\n            </style>\r\n        </head>\r\n        <body>\r\n            <div class=\"header\">\r\n                <h2>${printType ? printType.toUpperCase() : 'ALL'} M-PESA PAYMENT RECORDS FOR ${companyName}</h2>\r\n            </div>\r\n            \r\n            <div class=\"summary\">\r\n                <div>Total ${printType ? printType : ''} Amount: ${formatCurrency(totalAmount)}</div>\r\n                <div>Total Records: ${filteredItems.length}</div>\r\n            </div>\r\n            \r\n            <table>\r\n                <thead><tr>${headers.map(h => `<th>${h}</th>`).join('')}</tr></thead>\r\n                <tbody>${rows}</tbody>\r\n            </table>\r\n            \r\n            <script>\r\n                // Wait for content to load before printing\r\n                setTimeout(function() {\r\n                    window.print();\r\n                    // Give time for print dialog to appear before closing\r\n                    setTimeout(function() {\r\n                        window.close();\r\n                    }, 500);\r\n                }, 200);\r\n            <\\/script>\r\n        </body>\r\n        </html>\r\n    `); // <-- This backtick closes the template literal\r\n    printWindow.document.close();\r\n};\r\n</script>;","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0e11f12c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","showMessage","inject","showError","add_vendor","ref","payment_registration","columns","items","is_open","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","totalBudgeted","totalUnbudgeted","loading_spinner","project","payment_number","beneficiary_name","batch_no","lpo_number","budget_type","amount","description","date_created","value","Date","toISOString","substr","is_closed","company_id","axiosInstance","JSON","parse","localStorage","getItem","role","id","process","axios","baseURL","clearForm","payment_id","recordPayment","async","data","response","post","status","getPaymentRecords","error","console","get","Array","isArray","filteredData","item","selectedTypes","reduce","sum","parseFloat","map","order","index","SNo","date","purpose_of_payment","budget","Number","toLocaleString","unbudget","message","show_modal","voucher_number","openEditModal","row","closeEditModal","loading_update","updatePaymentRecord","patch","deletePaymentRecord","confirm","responce","delete","user","user_permissions","onMounted","storedUser","permissions","printPaymentRecords","filteredItems","printType","companyName","headers","formatCurrency","num","isNaN","rows","idx","join","totalAmount","printWindow","window","open","document","write","toUpperCase","length","h","close","__exports__"],"sourceRoot":""}