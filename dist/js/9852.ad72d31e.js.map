{"version":3,"file":"js/9852.ad72d31e.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/hr/employees/debts.vue","webpack://cork-vue3/./src/views/hr/employees/debts.vue?8158"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Services</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n<!-- compamy settings starts -->\r\n    <teleport to=\"#breadcrumb\">\r\n         <ul class=\"navbar-nav flex-row ms-auto\">\r\n                <li class=\"nav-item more-dropdown\">\r\n                    <div class=\"dropdown custom-dropdown-icon\">\r\n                        <a href=\"javascript:;\" class=\"nav-link dropdown-toggle\" id=\"ddlSettings\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                            <span>Select a company</span>\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"24\"\r\n                                height=\"24\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                stroke-width=\"2\"\r\n                                stroke-linecap=\"round\"\r\n                                stroke-linejoin=\"round\"\r\n                                class=\"feather feather-chevron-down\"\r\n                            >\r\n                                <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n                            </svg>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"ddlSettings\">\r\n                            <li @click=\"getData(5)\"><a class=\"dropdown-item\" data-value=\"Mail\" href=\"javascript:void(0);\">BUSHMAN SAFARI</a></li>\r\n                            <li @click=\"getData(6)\"><a class=\"dropdown-item\" data-value=\"Settings\" href=\"javascript:void(0);\">COPEX CONTRACTORS</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n    </teleport>\r\n\r\n <h3 class=\"text-center\">\r\n  {{ company_id == 5 ? 'BUSHMAN SAFARI TRACKERS EMPLOYEES DEBTS' : company_id == 6 ? 'COPEX CONTRACTORS EMPLOYEES DEBTS' : 'SELECT A COMPANY' }}\r\n</h3>\r\n\r\n <!-- company settings ends -->\r\n            <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n                           <button class=\"btn btn-primary me-2\"\r\n                           v-if=\"user_permissions.includes('can_register_employees')\"\r\n                           :disabled=\"!company_id\"\r\n                           @click=\"addEmployee =! addEmployee\">\r\n                              <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n                                  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                                     <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n                                </svg>    \r\n                           </button>\r\n\r\n                           <button class=\"btn btn-success \"\r\n                           v-if=\"user_permissions.includes('can_register_print')\"\r\n                             @click=\"printEmployeeList()\" \r\n                            >                           \r\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n  <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>  \r\n<form @submit.prevent=\"registerEmployeeDebt()\">\r\n  <div class=\"row\" v-if=\"addEmployee\">\r\n\r\n    <div class=\"col-md-3\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Select Employee</label>\r\n        <Multiselect\r\n          v-model=\"employee\"\r\n          :options=\"employeesList\"\r\n          label=\"name\"\r\n          placeholder=\"Select Employee\"\r\n          :searchable=\"true\"\r\n          :allow-empty=\"false\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-md-2\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Debt Type</label>\r\n        <Multiselect\r\n          v-model=\"debt_type\"\r\n          :options=\"['LOAN','SALARY ADVANCE']\"\r\n          placeholder=\"Select type\"\r\n          :searchable=\"true\"\r\n          :allow-empty=\"false\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n        <div class=\"col-md-2\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Monthly Payable</label>\r\n        <input\r\n          type=\"number\"\r\n          class=\"form-control\"\r\n          v-model=\"monthly_payable\"\r\n          placeholder=\"Monthly payable\"\r\n          required\r\n          :min=\"0\"\r\n          step=\"any\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-md-2\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Date Debted</label>\r\n        <input\r\n          type=\"date\"\r\n          class=\"form-control\"\r\n          v-model=\"debt_date\"\r\n          required\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n        <div class=\"col-md-3\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Amount </label>\r\n        <input\r\n          type=\"number\"\r\n          class=\"form-control\"\r\n          v-model=\"amount\"\r\n          required\r\n          step=\"any\"\r\n          placeholder=\"Enter Amount\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n            <div class=\"col-md-10\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Any Description</label>\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          v-model=\"description\"\r\n          placeholder=\"Enter Description\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-md-2\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label invisible\">Submit</label>\r\n        <button type=\"submit\" class=\"btn btn-primary w-100\"\r\n        :disabled=\"!employee || loading_spinner \"\r\n        >\r\n          Submit\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</form>\r\n\r\n        <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n                    <div v-else class=\"custom-table table3\">\r\n                        <v-client-table :data=\"employeeDebts\" :columns=\"columns\" :options=\"table_option\">\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row?.status?.color\">\r\n                                    {{ props.row?.status?.name }}\r\n                                </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n\r\n                                <a href=\"javascript:void(0);\" class=\"text-primary\" @click=\"OpenEmployeeViewModal(props.row)\"  data-bs-toggle=\"modal\" data-bs-target=\"#employee-view-modal\" >\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n                                </a>\r\n\r\n                            </template>\r\n                           \r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n<!-- Employee View modal starts -->\r\n<div class=\"modal fade mymodal\" id=\"employee-view-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"employeeViewModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"employeeViewModalLabel\">EMPLOYEE DEBT FOR {{ selectedDebt?.employee }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <!-- Employee Information -->\r\n        <div class=\"row mb-3\" v-if=\"selectedDebt\">\r\n          <div class=\"col-md-12\">\r\n             <div class=\"panel p-0\">\r\n            <div class=\"custom-table table3 table-responsive\">\r\n              <table class=\"table table-hover table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Employee Name</th>\r\n                    <th>Debt Type</th>\r\n                    <th>Amount</th>\r\n                    <th>Monthly Payable</th>\r\n                    <th>Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>{{ selectedDebt.employee }}</td>\r\n                    <td>{{ selectedDebt.type }}</td>\r\n                    <td>{{ selectedDebt.amount }}</td>\r\n                    <td>{{ formatNumber(selectedDebt.monthly_payable_original) }}</td>\r\n                    <td>\r\n                      <span class=\"badge inv-status\" :class=\"'badge-' + selectedDebt?.status?.color\">\r\n                        {{ selectedDebt?.status?.name }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Attachment Section -->\r\n        <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h5 class=\"mb-0\"></h5>\r\n          <button type=\"button\" class=\"btn  btn-sm mx-2\" :class=\"showAttachmentForm ?'btn-danger':'btn-primary'\" @click=\"showAttachmentForm = !showAttachmentForm\">\r\n            <svg\r\n            v-if=\"!showAttachmentForm\"\r\n            xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-paperclip me-1\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z\"/>\r\n            </svg>\r\n            <span v-else>X</span>\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Attachment Form -->\r\n        <div v-if=\"showAttachmentForm\" class=\"row mb-3\">\r\n          <div class=\"col-md-12\">\r\n            <form @submit.prevent=\"uploadRepaymentAttachment()\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-2\">\r\n                  <label class=\"form-label\">Enter Amount</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    class=\"form-control\" \r\n                    v-model=\"amount\"\r\n                    placeholder=\"Enter Amount\"\r\n                  >\r\n                </div>\r\n                <div class=\"col-md-4\">\r\n                  <label class=\"form-label\">Paid To</label>\r\n                    <multiselect \r\n                v-model=\"account\"\r\n                :options= \"accounts\"\r\n                placeholder=\"Select Account\"\r\n                label=\"name\"\r\n                :searchable = \"true\"        \r\n                multple=\"false\"\r\n                :required=\"true\"\r\n                :allow-empty=\"false\"\r\n           />           \r\n                </div>\r\n                 <div class=\"col-md-3\">\r\n                  <label class=\"form-label\">Date</label>\r\n                  <input \r\n                    type=\"date\" \r\n                    class=\"form-control\" \r\n                    v-model=\"date\"\r\n                  >\r\n                </div>\r\n                <div class=\"col-md-3\">\r\n                  <label class=\"form-label\">Attachment (PDF only)</label>\r\n                  <input \r\n                    type=\"file\" \r\n                    class=\"form-control\" \r\n                    @change=\"handleRepaymentAttachment\"\r\n                    accept=\"application/pdf\"\r\n                    required\r\n                  >\r\n                </div>\r\n              </div>\r\n              <div class=\"row mt-3\">\r\n                <div class=\"col-md-12 text-end\">\r\n                  <button type=\"button\" class=\"btn btn-secondary me-2\" @click=\"cancelAttachmentUpload()\">\r\n                    Cancel\r\n                  </button>\r\n                  <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"uploadingEmployeeAttachment\">\r\n                    <span v-if=\"uploadingEmployeeAttachment\" class=\"spinner-border spinner-border-sm text-white me-2\" role=\"status\"></span>\r\n                    Save\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Employee Attachments Table -->\r\n        <h5 class=\"mb-3\">Employee Debt Payments</h5>\r\n        <div class=\"row mb-3\">\r\n          <div class=\"col-md-12\">\r\n            <div class=\"panel p-0\">\r\n                <div v-if=\"loadingAttachments\" v-html=\"tableShimmer()\"></div>\r\n              <div v-else class=\"custom-table table3\">\r\n                <v-client-table \r\n                  :data=\"debtPayments\" \r\n                  :columns=\"attachmentColumns\" \r\n                  :options=\"table_option\"\r\n                >\r\n                  <template #actions=\"props\">\r\n                   <a :href=\"props.row.attachment\" \r\n   target=\"_blank\" \r\n   rel=\"noopener noreferrer\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-file-earmark-pdf text-primary\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z\"/>\r\n  <path d=\"M4.603 14.087a.8.8 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.7 7.7 0 0 1 1.482-.645 20 20 0 0 0 1.062-2.227 7.3 7.3 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a11 11 0 0 0 .98 1.686 5.8 5.8 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.86.86 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.7 5.7 0 0 1-.911-.95 11.7 11.7 0 0 0-1.997.406 11.3 11.3 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.8.8 0 0 1-.58.029m1.379-1.901q-.25.115-.459.238c-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361q.016.032.026.044l.035-.012c.137-.056.355-.235.635-.572a8 8 0 0 0 .45-.606m1.64-1.33a13 13 0 0 1 1.01-.193 12 12 0 0 1-.51-.858 21 21 0 0 1-.5 1.05zm2.446.45q.226.245.435.41c.24.19.407.253.498.256a.1.1 0 0 0 .07-.015.3.3 0 0 0 .094-.125.44.44 0 0 0 .059-.2.1.1 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a4 4 0 0 0-.612-.053zM8.078 7.8a7 7 0 0 0 .2-.828q.046-.282.038-.465a.6.6 0 0 0-.032-.198.5.5 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822q.036.167.09.346z\"/>\r\n</svg>\r\n</a>\r\n                  </template>\r\n                </v-client-table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Employee View modal ends -->\r\n\r\n    </div>\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref ,inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\nimport Multiselect from '@suadelabs/vue3-multiselect';\r\nimport '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n     const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const showMessage = inject('showMessage')\r\n    const showError = inject('showError')\r\n    const formatNumber = inject('formatNumber')\r\n    const formatDate = inject('formatDate')\r\n    const printEmployeeList = inject('printEmployeeList')\r\n    const tableShimmer = inject('tableShimmer');\r\n    const loading_spinner = ref(false);\r\n    const columns = ref(['Sno', 'employee','type','amount','monthly_payable','repaid','balance','description','debt_date', 'status','actions']);\r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 , 100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'service_name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n    const company_id = ref('')\r\n\r\n    const addEmployee = ref(false)    \r\n    const employee = ref('')\r\n    const employeeDebts = ref([])\r\n\r\n  const getEmployeeDebts = async () => {\r\n        loading_spinner.value = true;\r\n        try{\r\n        const response = await axiosInstance.get(`employee-debts?company_id=${company_id.value}`)\r\n        employeeDebts.value = response.data.map((item,index)=>({\r\n         ...item,\r\n         Sno : index + 1,\r\n         amount : formatNumber (item.amount),\r\n         employee : item.employee.name,\r\n         debt_date : item.date,\r\n         monthly_payable_original : item.monthly_payable,\r\n         monthly_payable : formatNumber(item.monthly_payable),\r\n         amount_original : item.amount,\r\n         repaid : formatNumber(item.repayments_sum_amount),\r\n         balance : formatNumber(item.amount - item.repayments_sum_amount)\r\n\r\n        }))\r\n        }catch(error){\r\n            console.log(error)\r\n            showError(error.message)\r\n        }finally{\r\n            loading_spinner.value = false;\r\n        }\r\n    };\r\n\r\n    const debt_type = ref('')\r\n    const debt_date = ref('')\r\n    const amount = ref('')\r\n    const description = ref('')\r\n    const date = ref('')\r\n    const monthly_payable = ref('')\r\n    const registerEmployeeDebt = async() => {\r\n      loading_spinner.value = true\r\n        const payload = {\r\n            employee_id : employee.value.id,\r\n            type : debt_type.value,\r\n            amount : amount.value,\r\n            date: debt_date.value,\r\n            description : description.value,\r\n            monthly_payable : monthly_payable.value\r\n        }\r\n        try {\r\n            const response = await axiosInstance.post('employee-debts', payload);\r\n            showMessage('Debt Saved');\r\n            addEmployee.value = !addEmployee.value;\r\n            await getEmployeeDebts();           \r\n            employee.value = '';\r\n            amount.value = '';\r\n            debt_date.value = '';\r\n        } catch (error) {\r\n            showError(error.message);\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n    const selectedDebt = ref(null)\r\n    const OpenEmployeeViewModal = async (row) => {\r\n        selectedDebt.value = row;\r\n        amount.value = selectedDebt.value.monthly_payable_original\r\n        await getdebtPayments(row.id);\r\n    };\r\n\r\n\r\n    const showAttachmentForm = ref(false);\r\nconst attachmentDescription = ref('');\r\nconst employeeAttachment = ref(null);\r\nconst uploadingEmployeeAttachment = ref(false);\r\n\r\nconst handleRepaymentAttachment = (e) => {\r\n    employeeAttachment.value = e.target.files[0];\r\n};\r\n\r\nconst uploadRepaymentAttachment = async () => {\r\n    uploadingEmployeeAttachment.value = true;\r\n\r\n    const formData = new FormData();\r\n    formData.append('employee_id', selectedDebt.value.employee_id);\r\n    formData.append('host_id', selectedDebt.value.employee_id);\r\n    formData.append('host', selectedDebt.value.employee);\r\n    formData.append(\r\n      'reference_number',\r\n      'salary on ' + date.value\r\n     );\r\n    formData.append('employee_debt_id', selectedDebt.value.id);\r\n    formData.append('amount', amount.value);\r\n    formData.append('date', date.value);\r\n    formData.append('direction', 'INCREMENT');\r\n    formData.append('account_transaction_point_id', account.value.id);\r\n    formData.append('opening_balance', account.value.transactions_sum);\r\n    formData.append('issuer_id', JSON.parse(localStorage.getItem(\"user\")).id);\r\n    formData.append('attachment', employeeAttachment.value);\r\n\r\n  \r\n    try {\r\n        const response = await axiosInstance.post(\r\n            'employee-debt-repayments',\r\n            formData,\r\n            { headers: { 'Content-Type': 'multipart/form-data' } }\r\n        );\r\n        \r\n        showMessage('Debt Updated!');\r\n        await getReactivedebtPayments(selectedDebt.value.id);\r\n        getEmployeeDebts()\r\n        cancelAttachmentUpload();\r\n        \r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n    } finally {\r\n        uploadingEmployeeAttachment.value = false;\r\n    }\r\n};\r\n\r\nconst cancelAttachmentUpload = () => {\r\n    showAttachmentForm.value = false;\r\n    attachmentDescription.value = '';\r\n    employeeAttachment.value = null;\r\n    const fileInput = document.querySelector('input[type=\"file\"]');\r\n    if (fileInput) fileInput.value = '';\r\n};\r\n\r\n\r\nconst debtPayments = ref([]);\r\nconst attachmentColumns = ref(['Sno',  'date', 'amount', 'actions']);\r\n\r\nconst loadingAttachments = ref(false);\r\nconst getdebtPayments = async (id) => {\r\n    loadingAttachments.value = true;\r\n    try {\r\n        const response = await axiosInstance.get(`employee-debt-repayments?employee_debt_id=${id}`);\r\n        debtPayments.value = response.data.map((item, index) => ({\r\n            ...item,\r\n            Sno: index + 1,\r\n            attachment : process.env.VUE_APP_API_BASE_URL + '../../' + item.transaction.attachment,  \r\n            date: formatDate(item.created_at),\r\n            amount : formatNumber(item.amount),\r\n            description: item.remark,\r\n        }));\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n    }finally{\r\n        loadingAttachments.value = false; \r\n    }\r\n};\r\n\r\n const getReactivedebtPayments = async (id) => {\r\n      const response = await axiosInstance.get(`employee-debt-repayments?employee_debt_id=${id}`); \r\n        debtPayments.value = response.data.map((item, index) => ({\r\n            ...item,\r\n            Sno: index + 1,\r\n            attachment: process.env.VUE_APP_API_BASE_URL + '../../' + item.attachment,  \r\n            date: formatDate(item.created_at),\r\n            description: item.remark,\r\n            amount : formatNumber(item.amount)\r\n        }));\r\n\r\n }\r\n\r\n const employeesList = ref([''])\r\n  const getEmployees = async () => {\r\n      const response = await axiosInstance.get(`employees?company_id=${company_id.value}`); \r\n        employeesList.value = response.data\r\n }\r\n\r\n   const getData = (company)=>{\r\n        company_id.value = company\r\n        getEmployeeDebts(); \r\n        getEmployees()\r\n   }\r\n\r\n   const accounts = ref([])\r\nconst account = ref('')\r\nconst getAccounts = async()=>{\r\n          try {\r\n            const response = await axiosInstance.get('account-transaction-points');\r\n            accounts.value = response.data.map((item, index) => ({\r\n                ...item,\r\nname: \r\n  (item?.name ?? '') + ' ' +\r\n  (item?.mobile_money?.name ?? '') + ' ' +\r\n  (item?.mobile_money?.category ?? 'CASH')\r\n            }));\r\n        } catch (error) {\r\n            showError(error.message);\r\n        }finally{\r\n\r\n        }\r\n}\r\n\r\n\r\n    onMounted(async () => {\r\n       getAccounts()\r\n    });\r\n\r\n\r\n</script>\r\n","import script from \"./debts.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./debts.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./debts.vue?vue&type=style&index=0&id=6666f3df&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","user_permissions","JSON","parse","localStorage","getItem","permissions","showMessage","inject","showError","formatNumber","formatDate","printEmployeeList","tableShimmer","loading_spinner","ref","columns","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","company_id","addEmployee","employee","employeeDebts","getEmployeeDebts","async","value","response","get","data","map","item","index","Sno","amount","name","debt_date","date","monthly_payable_original","monthly_payable","amount_original","repaid","repayments_sum_amount","balance","error","console","log","message","debt_type","description","registerEmployeeDebt","payload","employee_id","id","type","post","selectedDebt","OpenEmployeeViewModal","row","getdebtPayments","showAttachmentForm","attachmentDescription","employeeAttachment","uploadingEmployeeAttachment","handleRepaymentAttachment","e","target","files","uploadRepaymentAttachment","formData","FormData","append","account","transactions_sum","headers","getReactivedebtPayments","cancelAttachmentUpload","fileInput","document","querySelector","debtPayments","attachmentColumns","loadingAttachments","attachment","transaction","created_at","remark","employeesList","getEmployees","getData","company","accounts","getAccounts","mobile_money","category","onMounted","__exports__"],"sourceRoot":""}