{"version":3,"file":"js/components-tabs.280df1a8.js","mappings":"omEA4GIA,EAAAA,EAAAA,GAAQ,CAAEC,MAAO,iBAKrB,MAAMC,GAASC,EAAAA,EAAAA,MACLC,EAAgBC,EAAAA,EAAAA,OAAa,CAC/BC,QAASC,gCAMPC,IAHcC,EAAAA,EAAAA,IAAI,OAERA,EAAAA,EAAAA,KAAI,IACCC,EAAAA,EAAAA,IAAO,iBAEtBC,GADOC,KAAKC,MAAMC,aAAaC,QAAQ,UACrBN,EAAAA,EAAAA,KAAI,IACtBO,GAAiBP,EAAAA,EAAAA,IAAI,CAAC,MAAM,eAAe,SAAW,iBAAkB,kBAAkB,YAE1FQ,IADcP,EAAAA,EAAAA,IAAO,gBACTA,EAAAA,EAAAA,IAAO,cAOvBQ,IANaT,EAAAA,EAAAA,KAAI,IACHA,EAAAA,EAAAA,IAAI,KACPA,EAAAA,EAAAA,IAAI,KACAA,EAAAA,EAAAA,KAAI,GACIG,KAAKC,MAAMC,aAAaC,QAAQ,SAASI,aAE9CV,EAAAA,EAAAA,IAAI,KACtBW,GAAgBX,EAAAA,EAAAA,IAAI,MAUhBY,GAAeZ,EAAAA,EAAAA,IAAI,CACrBa,QAAS,GACTC,cAAe,CAAC,GAAG,IAAI,IAAK,KAC5BC,KAAM,kCACNC,eAAgB,CAAEC,QAAS,uBAC3BC,SAAU,GACVC,SAAU,CACNC,KAAM,iBACNC,GAAI,gBACJC,KAAM,kBAEVC,WAAY,CAAEC,IAAK,SAAUC,MAAO,GACpCC,MAAO,CACHC,MAAO,oCACPC,OAAQ,GACRC,kBAAmB,YACnBC,MAAO,YAEXC,kBAAkB,IAIZC,GAAShC,EAAAA,EAAAA,IAAI,IACjBiC,EAAY,KACdtC,EAAcuC,IAAI,UAAUC,MAAMC,IAC9BJ,EAAOK,MAAQD,EAASE,KACvBC,KAAI,CAACC,EAAMC,KAAP,IACED,EACHE,IAAKD,EAAQ,EACbE,QAASH,EAAMG,QACfC,WAAYJ,EAAMI,WAClBC,KAAML,EAAMK,KACZC,MAAON,EAAMG,QAAU,MAAQH,EAAMK,SAEzC3C,EAAgBmC,OAAQ,MAI1BU,GAAW/C,EAAAA,EAAAA,IAAI,IACfgD,EAAc,KAChBrD,EAAcuC,IAAI,YAAYC,MAAMC,IAChCW,EAASV,MAAQD,EAASE,KACzBV,QAAOe,GAA6B,WAAlBA,EAAQM,SAC1BV,KAAI,CAACI,EAAQF,KAAT,IAAwBE,EACzBD,IAAKD,EAAQ,EACbE,QAASA,EAAQO,aACjBA,aAAcP,EAAQQ,WACtBC,eAAgBT,EAAQS,eACxBC,OAAQV,EAAQU,OAChBC,gBAAiBX,EAAQW,oBAG7BpD,EAAgBmC,OAAQ,MAMpC,IAAIkB,EAAgB,MAEpBC,EAAAA,EAAAA,KAAU,KACR,MAAMC,EAAUC,SAASC,eAAe,gBACxCJ,EAAgB,IAAIK,EAAAA,MAAgBH,MAGtC,MAAMI,EAAiBlB,IACrB,MAAMmB,EAAgB9B,EAAOK,MAAMT,QAAOmC,GAAKA,EAAEnB,aAAeD,EAAQqB,KAE3C,IAAzBF,EAAcG,OAKW,IAAzBH,EAAcG,OAChBxE,EAAOyE,KAAK,CAAErB,KAAM,SAAUsB,OAAQ,CAAEC,SAAUN,EAAc,GAAGE,OAEnEvD,EAAgB4B,MAAQyB,EACxBnD,EAAc0B,MAAQ,KACtBkB,EAAcc,QATd7D,EAAU,qCAcR8D,EAAa,KACZ3D,EAAc0B,QACnB5C,EAAOyE,KAAK,CAAErB,KAAM,SAAUsB,OAAQ,CAAEC,SAAUzD,EAAc0B,MAAM2B,MACtET,EAAcgB,S,OAEZf,EAAAA,EAAAA,KAAU,KACFtD,EAAgBmC,OAAQ,EAC5BW,IACAf,O,wiCCpOR,MAAMuC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://cork-vue3/./src/views/report/workReport.vue","webpack://cork-vue3/./src/views/report/workReport.vue?d504"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\"\r\n                                    >Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\" ><span>Daily Work Report</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n                 \r\n\r\n        <!-- Add Store Button -->\r\n\r\n           <div class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\" >\r\n                <div class=\"custom-table table3\">\r\n                    <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n                    <v-client-table v-else  :data=\"projects\" :columns=\"projectColumns\" :options=\"table_option\">\r\n                      <template #project_name=\"props\">\r\n                         <a href=\"javascript:;\" @click=\"selectProject(props.row)\" class=\"text-primary\">\r\n                          {{ props.row.short_name }}\r\n                         </a>\r\n                      </template>  \r\n                      \r\n                      <template #actions=\"props\">\r\n                            <div class=\"d-flex justify-content-center align-items-center\">\r\n                                 <a href=\"javascript:;\" @click=\"selectProject(props.row)\">\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        stroke-width=\"1.5\"\r\n        stroke-linecap=\"round\"\r\n        stroke-linejoin=\"round\"\r\n        class=\"text-primary\"\r\n      >\r\n        <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n        <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n      </svg>\r\n    </a>\r\n                            </div>\r\n                        </template>\r\n                    </v-client-table>\r\n                </div>\r\n                </div>\r\n            </div>\r\n           \r\n \r\n      <!-- Store Selection Modal -->\r\n<div class=\"modal fade mymodal\" id=\"select-store\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"editTyresModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-lg\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"editTyresModalLabel\">Select Store</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <form>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n              <Multiselect\r\n                v-model=\"selectedStore\"\r\n                :options=\"availableStores\"\r\n                track-by=\"id\"\r\n                label=\"label\"\r\n                placeholder=\"Choose a store\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" :disabled=\"!selectedStore\"\r\n            @click=\"goToReport\">\r\n            Go\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n    </div>      \r\n        </div>\r\n\r\n  \r\n\r\n    \r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref,inject, watch, nextTick } from 'vue';\r\n    import axios from 'axios';\r\n    import Swal from 'sweetalert2';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    import * as bootstrap from 'bootstrap'; // Import bootstrap library\r\n    import { useRouter } from 'vue-router';\r\nconst router = useRouter();\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n    \r\n    const spare_usage = ref(null);\r\n    \r\n    const sending = ref(false);\r\n    const tableShimmer = inject('tableShimmer');\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    const loading_spinner = ref(true);\r\n    const projectColumns = ref(['SNo','project_name','client',  'financial_year', 'contract_number','actions']);\r\n    const showMessage = inject('showMessage');\r\n    const showError = inject('showError');\r\n    const unlock = ref(false);\r\n    const project = ref('')\r\n    const name = ref('')\r\n    const add_item = ref(false);\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n\r\nconst availableStores = ref([]);\r\nconst selectedStore = ref(null);\r\n    \r\n    const clearForm = () => {\r\n        item.value = '';\r\n        description.value = '';\r\n        usage_quantity.value = '';\r\n        rate.value = '';\r\n    }\r\n\r\n    \r\n    const table_option = ref({\r\n        perPage: 50,\r\n        perPageValues: [50,100,200, 500],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: [],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n    \r\n\r\n        const stores = ref([])\r\n    const getStores = () => {\r\n        axiosInstance.get('stores').then((response) => {\r\n            stores.value = response.data\r\n            .map((store,index) => ({\r\n                ...store,\r\n                SNo: index + 1,\r\n                project: store.project,\r\n                project_id: store.project_id,\r\n                name: store.name,\r\n                label: store.project + ' - ' + store.name,\r\n            }));\r\n            loading_spinner.value = false;\r\n        });\r\n    };\r\n      \r\n    const projects = ref([])\r\n    const getProjects = () => {\r\n        axiosInstance.get('projects').then((response) => {\r\n            projects.value = response.data\r\n            .filter(project => project.status ==='active')\r\n            .map((project,index) => ({...project,\r\n                SNo: index + 1,\r\n                project: project.project_name,\r\n                project_name: project.short_name,\r\n                financial_year: project.financial_year,\r\n                client: project.client,\r\n                contract_number: project.contract_number,\r\n\r\n            }))\r\n            loading_spinner.value = false;\r\n            \r\n        });\r\n    };\r\n   \r\n\r\nlet modalInstance = null;\r\n\r\nonMounted(() => {\r\n  const modalEl = document.getElementById(\"select-store\");\r\n  modalInstance = new bootstrap.Modal(modalEl); \r\n});\r\n\r\nconst selectProject = (project) => {\r\n  const projectStores = stores.value.filter(s => s.project_id === project.id);\r\n\r\n  if (projectStores.length === 0) {\r\n    showError(\"No stores found for this project\");\r\n    return;\r\n  }\r\n\r\n  if (projectStores.length === 1) {\r\n    router.push({ name: \"Report\", params: { store_id: projectStores[0].id } });\r\n  } else {\r\n    availableStores.value = projectStores;\r\n    selectedStore.value = null;\r\n    modalInstance.show(); \r\n  }\r\n};\r\n\r\n// When user clicks \"Go\"\r\nconst goToReport = () => {\r\n  if (!selectedStore.value) return;\r\n  router.push({ name: 'Report', params: { store_id: selectedStore.value.id } });\r\n  modalInstance.hide(); \r\n};\r\n    onMounted(() => {\r\n            loading_spinner.value = true\r\n        getProjects();\r\n        getStores();\r\n       \r\n    });\r\n</script>\r\n\r\n<style scoped>\r\n\r\n .table3 .actions svg {\r\n    padding: 2px;\r\n}\r\n</style>\r\n","import script from \"./workReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./workReport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./workReport.vue?vue&type=style&index=0&id=3183a85d&lang=css\"\nimport \"./workReport.vue?vue&type=style&index=1&id=3183a85d&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3183a85d\"]])\n\nexport default __exports__"],"names":["useMeta","title","router","useRouter","axiosInstance","axios","baseURL","process","tableShimmer","ref","inject","loading_spinner","JSON","parse","localStorage","getItem","projectColumns","showError","availableStores","permissions","selectedStore","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","stores","getStores","get","then","response","value","data","map","store","index","SNo","project","project_id","name","label","projects","getProjects","status","project_name","short_name","financial_year","client","contract_number","modalInstance","onMounted","modalEl","document","getElementById","bootstrap","selectProject","projectStores","s","id","length","push","params","store_id","show","goToReport","hide","__exports__"],"sourceRoot":""}