{"version":3,"file":"js/7593.b1e04b44.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/report/boq.vue","webpack://cork-vue3/./src/views/report/boq.vue?3fb2"],"sourcesContent":["<template>\r\n  <div class=\"layout-px-spacing\">\r\n    <div class=\"d-flex justify-content-between align-items-center\">\r\n      <div class=\"flex-grow-1 text-center\">\r\n        <div \r\n          class=\" mt-5\" \r\n          :style=\"{ opacity: 1 - 0.1 * clickCount, transition: 'opacity 0.5s' }\"\r\n        >\r\n      <div class=\"d-flex align-items-center justify-content-between mb-3\">\r\n  <h4 class=\" mb-0\" @click=\"handleClick\" style=\"cursor:pointer;\">\r\n    BILL OF QUANTITY \r\n  </h4>\r\n\r\n  <div class=\"w-25 ms-auto\">\r\n    <multiselect \r\n      v-model=\"project\"\r\n      track-by=\"id\"\r\n      :options=\"projects\"\r\n      label=\"short_name\"\r\n      placeholder=\"Select A Project\"\r\n      :required=\"true\"\r\n      :searchable=\"true\"\r\n      multple=\"false\"\r\n    ></multiselect>\r\n  </div>\r\n</div>\r\n\r\n<div v-if=\"addBoq\" class=\"d-flex justify-content-end mb-2\">\r\n  <button @click=\"addBoq = false\" class=\"btn btn-secondary\">View BOQ</button>\r\n</div>\r\n\r\n<div v-if=\"project && !addBoq\" class=\"d-flex justify-content-end mb-2\">\r\n  <button @click=\"addBoq = true\" class=\"btn btn-primary\">Add BOQ</button>\r\n</div>\r\n\r\n<!-- boq registration starts -->\r\n<div v-if=\"addBoq\" class=\"accordion accordion-flush\" id=\"accordionFlushExample\">\r\n  <div class=\"bg-dark mt-2 mb-2\">\r\n    <h6 class=\"text-center text-white m-0\">{{ project.project_name }}</h6>\r\n  </div>\r\n\r\n  <div class=\"d-flex mb-2\">\r\n    <div class=\"ms-auto\">\r\n      <button class=\"btn btn-success\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#seriesModal\"\r\n              @click=\"series = ''\">\r\n        Add Series\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div v-for=\"(item, b) in boq\" class=\"accordion-item\" style=\"border:1px solid green\">\r\n    <h2 class=\"accordion-header\">\r\n      <button class=\"accordion-button collapsed\" type=\"button\"\r\n              data-bs-toggle=\"collapse\"\r\n              :data-bs-target=\"`#accordion${item.id}`\"\r\n              aria-expanded=\"false\"\r\n              :aria-controls=\"`accordion${item.id}`\">\r\n        {{ b + 1 }}. {{ item.name }}\r\n      </button>\r\n    </h2>\r\n    <div :id=\"`accordion${item.id}`\" class=\"accordion-collapse collapse\">\r\n      <div class=\"accordion-body\">\r\n\r\n        <!-- Add Section Button -->\r\n        <div class=\"d-flex mb-2\">\r\n          <div class=\"ms-auto\">\r\n            <button class=\"btn btn-warning\"\r\n                    data-bs-toggle=\"modal\"\r\n                    data-bs-target=\"#sectionModal\"\r\n                    @click=\"series = item\">\r\n              Add Section\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Section Accordion -->\r\n        <div :id=\"`accordionSeries${item.id}`\" class=\"accordion\">\r\n          <div v-for=\"(lsection, s) in item.sections\" class=\"accordion-item\" style=\"border:1px solid orange\">\r\n            <h2 class=\"accordion-header\">\r\n              <button class=\"accordion-button collapsed\" type=\"button\"\r\n                      data-bs-toggle=\"collapse\"\r\n                      :data-bs-target=\"`#section${lsection.id}`\"\r\n                      aria-expanded=\"false\"\r\n                      :aria-controls=\"`section${lsection.id}`\">\r\n                {{ s + 1 }}. {{ lsection.name }}\r\n              </button>\r\n            </h2>\r\n            <div :id=\"`section${lsection.id}`\"\r\n                 class=\"accordion-collapse collapse\"\r\n                 :data-bs-parent=\"`#accordionSeries${item.id}`\">\r\n              <div class=\"accordion-body\">\r\n\r\n                <!-- Add Sub Section Button -->\r\n                <div class=\"d-flex mb-2\">\r\n                  <div class=\"ms-auto\">\r\n                  <button class=\"btn btn-primary\"\r\n        data-bs-toggle=\"modal\"\r\n        data-bs-target=\"#subSectionModal\"\r\n        @click=\"section = lsection; newSubSectionName = ''\">\r\n  Add Sub Section\r\n</button>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- Sub Section Accordion -->\r\n                <div :id=\"`accordionSub${lsection.id}`\" class=\"accordion\">\r\n                  <div v-for=\"(subsection, sb) in lsection.sub_sections\" class=\"accordion-item\" style=\"border:1px solid blue\">\r\n                    <h2 class=\"accordion-header\">\r\n                      <button class=\"accordion-button collapsed\" type=\"button\"\r\n                              data-bs-toggle=\"collapse\"\r\n                              :data-bs-target=\"`#sub${subsection.id}`\"\r\n                              aria-expanded=\"false\"\r\n                              :aria-controls=\"`sub${subsection.id}`\">\r\n                        {{ sb + 1 }}. {{ subsection.name }}\r\n                      </button>\r\n                    </h2>\r\n                    <div :id=\"`sub${subsection.id}`\"\r\n                         class=\"accordion-collapse collapse\"\r\n                         :data-bs-parent=\"`#accordionSub${lsection.id}`\">\r\n                      <div class=\"accordion-body\">\r\n\r\n                        <!-- Add Line Button -->\r\n                        <div class=\"d-flex mb-2\">\r\n                          <div class=\"ms-auto\">\r\n                            <button class=\"btn btn-secondary\"\r\n                                    data-bs-toggle=\"modal\"\r\n                                    data-bs-target=\"#lineModal\"\r\n                                    @click=\"sub_section = subsection\">\r\n                              Add Line\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <!-- Line List -->\r\n                        <!-- Line List -->\r\n<table class=\"table table-bordered table-sm\">\r\n  <thead >\r\n    <tr>\r\n      <th>SN</th>\r\n      <th>Name</th>\r\n      <th>Unit</th>\r\n      <th>Quantity</th>\r\n      <th>Rate</th>\r\n      <th>Total</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr v-for=\"(line, li) in subsection.lines\" :key=\"line.id\">\r\n      <td class=\"text-center\">{{ li + 1 }}</td>\r\n      <td class=\"text-start\">{{ line.name }}</td>\r\n      <td>{{ line.unit }}</td>\r\n      <td>{{ line.quantity }}</td>\r\n      <td class=\"text-end\">{{ (line.rate).toLocaleString() }}</td>\r\n      <td class=\"text-end\">{{ (line.quantity * line.rate).toLocaleString() }}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n<!-- End Line List -->\r\n\r\n                        <!-- End Line List -->\r\n\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <!-- End Sub Section Accordion -->\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- End Section Accordion -->\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n        <!-- boq registration ends -->\r\n          <!-- boq table starts -->\r\n\r\n          <table v-else class=\"table table-bordered mt-4\" v-if=\"project\">\r\n            <thead class=\"thead-light\">\r\n              <tr>\r\n                <th scope=\"col\" class=\"text-dark\">Code/SN</th>\r\n                <th scope=\"col\" class=\"text-dark\">Description</th>\r\n                <th scope=\"col\" class=\"text-dark\">Unit</th>\r\n                <th scope=\"col\" class=\"text-dark\">Quantity</th>\r\n                <th scope=\"col\" class=\"text-dark\">Rate</th>\r\n                <th scope=\"col\" class=\"text-dark\">Total</th>\r\n              </tr>\r\n            </thead>\r\n     <tbody>\r\n  <tr>\r\n    <td colspan=\"6\" class=\"bg-dark text-white\">\r\n      Bill of Quantity {{ project.project_name }}\r\n    </td>\r\n  </tr>\r\n\r\n <template v-for=\"(series, i) in boq\" :key=\"'series-' + i\">\r\n  <tr>\r\n    <th colspan=\"1\" class=\"text-center\">SERIES {{ i + 1 }}</th>\r\n    <th colspan=\"5\" class=\"text-start\">{{ series.name }}</th>\r\n  </tr>\r\n\r\n  <template v-for=\"(section, j) in series.sections\" :key=\"'section-' + j\">\r\n    <tr>\r\n      <th colspan=\"1\" class=\"text-center\">Section {{ i + 1 }}.{{ j + 1 }}</th>\r\n      <th colspan=\"5\" class=\"text-start\">{{ section.name }}</th>\r\n    </tr>\r\n\r\n    <template v-for=\"(line, a) in section.lines\" :key=\"'line-' + a\">\r\n      <tr>\r\n        <td class=\"text-center\">{{ String.fromCharCode(97 + a) }}</td>\r\n        <td class=\"text-start\">{{ line.name }}</td>\r\n        <td>{{ line.unit }}</td>\r\n        <td>{{ line.quantity }}</td>\r\n        <td class=\"text-end\">{{ line.rate.toLocaleString() }}</td>\r\n        <td class=\"text-end\">{{ (line.rate * line.quantity).toLocaleString() }}</td>\r\n      </tr>\r\n    </template>\r\n\r\n    <template v-for=\"(sub, k) in section.sub_sections\" :key=\"'sub-' + k\">\r\n      <tr>\r\n        <th colspan=\"1\" class=\"text-center\">{{ i + 1 }}.{{ j + 1 }}.{{ k + 1 }}</th>\r\n        <th colspan=\"5\" class=\"text-start\">{{ sub.name }}</th>\r\n      </tr>\r\n\r\n      <template v-for=\"(line, b) in sub.lines\" :key=\"'subline-' + b\">\r\n        <tr>\r\n          <td class=\"text-center\">{{ String.fromCharCode(97 + b) }}</td>\r\n          <td class=\"text-start\">{{ line.name }}</td>\r\n          <td>{{ line.unit }}</td>\r\n          <td>{{ line.quantity }}</td>\r\n          <td class=\"text-end\">{{ line.rate.toLocaleString() }}</td>\r\n          <td class=\"text-end\">{{ (line.rate * line.quantity).toLocaleString() }}</td>\r\n        </tr>\r\n      </template>\r\n    </template>\r\n  </template>\r\n</template>\r\n\r\n  <div v-if=\"boq.lenght == 0\">No Series Set for this project</div>\r\n</tbody>\r\n\r\n          </table>\r\n        <div v-if=\"boq.length === 0 && project\" class=\"text-center\">No BoQ set for this project</div>\r\n        <div v-else-if=\"!project\" class=\"text-center\">Select a project to see its BOQ</div>\r\n          <!-- boq table ends -->\r\n        </div>\r\n\r\n      </div>    \r\n    </div>\r\n\r\n  </div>\r\n  <!-- series register modal starts -->\r\n<div class=\"modal fade \" id=\"seriesModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n    <div class=\"modal-content \">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Add BOQ Items for {{ project.short_name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\"></button>\r\n      </div>\r\n    <form @submit.prevent=\"registerSeries\">\r\n      <div class=\"modal-body\">\r\n            <input type=\"text\" class=\"form-control\" v-model=\"series\" placeholder=\"Enter Series\">\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-primary\">submit</button>\r\n      </div>\r\n    </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n   <!-- series register modal ends -->\r\n    <!-- section register modal starts -->\r\n     <div class=\"modal fade \" id=\"sectionModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n    <div class=\"modal-content \">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Add BOQ section for {{ series.name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"closeSection\"></button>\r\n      </div>\r\n    <form @submit.prevent=\"registerSection()\">\r\n      <div class=\"modal-body\">\r\n            <input type=\"text\" class=\"form-control\" v-model=\"section\" placeholder=\"Enter Section Name\">\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-primary\">submit</button>\r\n      </div>\r\n    </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n     <!-- section register modal ends -->\r\n          <!-- Sub section register modal starts -->\r\n     <div class=\"modal fade \" id=\"subSectionModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n    <div class=\"modal-content \">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Add BOQ sub section for {{ section.name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"closeSubSection\"></button>\r\n      </div>\r\n    <form @submit.prevent=\"registerSubSection()\">\r\n      <div class=\"modal-body\">\r\n           <input type=\"text\" class=\"form-control\" v-model=\"newSubSectionName\" placeholder=\"Enter Sub Section Name\">\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-primary\">submit</button>\r\n      </div>\r\n    </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n     <!-- Sub section register modal ends -->\r\n\r\n      <!-- boq registration line starts -->\r\n            <div class=\"modal fade \" id=\"lineModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n    <div class=\"modal-content \">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Add BOQ line  for {{ sub_section.name }}</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"closeLine\"></button>\r\n      </div>\r\n    <form @submit.prevent=\"registerBoqLine()\">\r\n      <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-3\">\r\n              <input type=\"text\" class=\"form-control\" placeholder=\"Enter Line Details\" v-model=\"line.name\">\r\n            </div>\r\n             <div class=\"col-md-3\">\r\n              <input type=\"text\" class=\"form-control\" placeholder=\"Enter Unit\" v-model=\"line.unit\">\r\n            </div>\r\n             <div class=\"col-md-3\">\r\n              <input type=\"number\" class=\"form-control\" placeholder=\"Enter Quantity\" v-model=\"line.quantity\">\r\n            </div>\r\n             <div class=\"col-md-3\">\r\n              <input type=\"number\" class=\"form-control\" placeholder=\"Enter Rate\" v-model=\"line.rate\">\r\n            </div>\r\n          </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"submit\" class=\"btn btn-primary\">submit</button>\r\n      </div>\r\n    </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n       <!-- boq registration line ends -->\r\n</template>\r\n\r\n<script setup>\r\n    import axios from 'axios';\r\n    import { onMounted, ref,inject,watch } from 'vue';\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\nconst showMessage = inject('showMessage');\r\nconst showError = inject('showError');\r\nconst user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\nconst addBoq = ref(false);\r\nconst project = ref('')\r\nconst projects = ref([])\r\n    const getProjects = async () => {\r\n    try {\r\n        const response = await axiosInstance.get(`/projects`);\r\n        if (response.data && Array.isArray(response.data)) {\r\n            let filteredData = response.data;\r\n            if (user_permissions.includes('can_view_copex_lpo') && user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData;\r\n            } else if (user_permissions.includes('can_view_copex_lpo')) {\r\n                filteredData = filteredData.filter(project =>project.company_id == 6);\r\n            } else if (user_permissions.includes('can_view_bushman_lpo')) {\r\n                filteredData = filteredData.filter(project =>project.company_id == 5);\r\n            }\r\n             projects.value = filteredData;\r\n        } else {\r\n            console.error(\"Invalid response format\");\r\n        }\r\n    } catch (error) {\r\n\r\n    }\r\n};\r\n\r\n        watch(project, (newValue) => {\r\n          getBoq(newValue.id)\r\n       });\r\n\r\n    const boq = ref([]);\r\n    const getBoq = async (id) => {\r\n    try {\r\n        const response = await axiosInstance.get(`/boq?project_id=${id}`);\r\n        boq.value= response.data.data\r\n    } catch (error) {\r\n\r\n    }\r\n};\r\n\r\n\r\nconst series = ref('');\r\nconst registerSeries = async () => {\r\n    try {\r\n        const formData = {\r\n            project_id: project.value.id,\r\n            name: series.value\r\n        };\r\n        const response = await axiosInstance.post('/boq-series', formData);\r\n\r\n        // Safely add new series\r\n        boq.value.push({\r\n            id: response.data.data?.id ?? Date.now(), // fallback if no ID returned\r\n            name: formData.name,\r\n            sections: []\r\n        });\r\n\r\n        showMessage(\"Series registered!\");\r\n        document.getElementById('close').click();\r\n        series.value = '';\r\n    } catch (error) {\r\n        showError(error.message);\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nconst section = ref('')\r\nconst registerSection = async () => {\r\n  try {\r\n    const formData = {\r\n      series_id: series.value.id,\r\n      name: section.value\r\n    };\r\n    const response = await axiosInstance.post('/boq-sections', formData);\r\n\r\n    // Push the new section into the correct series in boq\r\n    const targetSeries = boq.value.find(item => item.id === series.value.id);\r\n    if (targetSeries) {\r\n      targetSeries.sections.push({\r\n        id: response.data.id,\r\n        name: formData.name,\r\n        sub_sections: []\r\n      });\r\n    }\r\n\r\n    showMessage(\"Section Registered!\");\r\n    document.getElementById('closeSection').click();\r\n    section.value = '';\r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst newSubSectionName = ref('');\r\n\r\nconst registerSubSection = async () => {\r\n  try {\r\n    const response = await axiosInstance.post(\"/boq-sub-sections\", {\r\n      name: newSubSectionName.value,\r\n      section_id: section.value.id,\r\n    });\r\n\r\n    // Update the UI\r\n    const newSubSection = response.data;\r\n    if (!section.value.sub_sections) {\r\n      section.value.sub_sections = [];\r\n    }\r\n    section.value.sub_sections.push(newSubSection);\r\n\r\n    // Reset\r\n    newSubSectionName.value = '';\r\n    document.getElementById('closeSubSection').click();\r\n    showMessage('sub section added!')\r\n  } catch (error) {\r\n    console.error(\"Error registering sub section:\", error);\r\n    showError(\"Failed to add sub section.\");\r\n  }\r\n};\r\n\r\nconst sub_section = ref('')\r\nconst line = ref({\r\n  name: '',\r\n  unit: '',\r\n  quantity: '',\r\n  rate: ''\r\n});\r\n\r\nconst registerBoqLine = async () => {\r\n  try {\r\n    const formData = {\r\n      name: line.value.name,\r\n      unit: line.value.unit,\r\n      quantity: line.value.quantity,\r\n      rate: line.value.rate,\r\n      sub_section_id: sub_section.value.id\r\n    };\r\n    const response = await axiosInstance.post('/boq-lines', formData);\r\n\r\n    // Push the new line into the correct subsection\r\n    boq.value.forEach(seriesItem => {\r\n      seriesItem.sections.forEach(sectionItem => {\r\n        sectionItem.sub_sections.forEach(sub => {\r\n          if (sub.id === formData.sub_section_id) {\r\n            if (!sub.lines) sub.lines = [];\r\n            sub.lines.push({\r\n              id: response.data.id,\r\n              name: formData.name,\r\n              unit: formData.unit,\r\n              quantity: formData.quantity,\r\n              rate: formData.rate\r\n            });\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    showMessage(\"Line Registered!\");\r\n    document.getElementById('closeLine').click();\r\n    line.value = { name: '', unit: '', quantity: '', rate: '' };\r\n  } catch (error) {\r\n    showError(error.message);\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n\r\n\r\n    onMounted(() => {\r\n     getProjects()\r\n    });\r\n\r\nconst clickCount = ref(0);\r\nfunction handleClick() {\r\n  if(clickCount.value < 10) {\r\n    clickCount.value++;\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.accordion-button {\r\n  background-color: transparent !important;\r\n  /* color: white !important; */\r\n  box-shadow: none !important;\r\n}\r\n\r\n.accordion-button:not(.collapsed) {\r\n  background-color: transparent !important;\r\n  /* color: white !important; */\r\n}\r\n\r\n.accordion-button:focus {\r\n  box-shadow: none !important;\r\n}\r\n</style>\r\n","import script from \"./boq.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./boq.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./boq.vue?vue&type=style&index=0&id=edecfa24&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-edecfa24\"]])\n\nexport default __exports__"],"names":["axiosInstance","axios","baseURL","process","showMessage","inject","showError","user_permissions","JSON","parse","localStorage","getItem","permissions","addBoq","ref","project","projects","getProjects","async","response","get","data","Array","isArray","filteredData","includes","filter","company_id","value","console","error","watch","newValue","getBoq","id","boq","series","registerSeries","formData","project_id","name","post","push","Date","now","sections","document","getElementById","click","message","log","section","registerSection","series_id","targetSeries","find","item","sub_sections","newSubSectionName","registerSubSection","section_id","newSubSection","sub_section","line","unit","quantity","rate","registerBoqLine","sub_section_id","forEach","seriesItem","sectionItem","sub","lines","onMounted","clickCount","handleClick","__exports__"],"sourceRoot":""}