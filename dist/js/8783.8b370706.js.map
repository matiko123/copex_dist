{"version":3,"file":"js/8783.8b370706.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/hr/leaves/request.vue","webpack://cork-vue3/./src/views/hr/leaves/request.vue?61d5"],"sourcesContent":["<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">HR</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Leave</span></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Request</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n<!-- compamy settings starts -->\r\n    <teleport to=\"#breadcrumb\">\r\n         <ul class=\"navbar-nav flex-row ms-auto\">\r\n                <li class=\"nav-item more-dropdown\">\r\n                    <div class=\"dropdown custom-dropdown-icon\">\r\n                        <a href=\"javascript:;\" class=\"nav-link dropdown-toggle\" id=\"ddlSettings\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                            <span>Select a company</span>\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"24\"\r\n                                height=\"24\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                stroke-width=\"2\"\r\n                                stroke-linecap=\"round\"\r\n                                stroke-linejoin=\"round\"\r\n                                class=\"feather feather-chevron-down\"\r\n                            >\r\n                                <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n                            </svg>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"ddlSettings\">\r\n                            <li @click=\"getData(5)\"><a class=\"dropdown-item\" data-value=\"Mail\" href=\"javascript:void(0);\">BUSHMAN SAFARI</a></li>\r\n                            <li @click=\"getData(6)\"><a class=\"dropdown-item\" data-value=\"Settings\" href=\"javascript:void(0);\">COPEX CONTRACTORS</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n    </teleport>\r\n\r\n <h3 class=\"text-center\">\r\n  {{ company_id == 5 ? 'BUSHMAN SAFARI TRACKERS EMPLOYEES LEAVE REQUESTS' : company_id == 6 ? 'COPEX CONTRACTORS EMPLOYEES LEAVE REQUESTS' : 'EMPLOYEES LEAVE REQUESTS' }}\r\n</h3>\r\n\r\n <!-- company settings ends -->\r\n            <div class=\"d-flex me-4 mt-2 \">\r\n                        <div class=\"ms-auto\">\r\n\r\n                        <button\r\n                        v-if=\"user_permissions.includes('can_create_leaves')\"\r\n                        class=\"btn btn-primary me-2\" @click=\"addLeave =! addLeave \" :disabled=\"!company_id\">\r\n                              <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-square\" viewBox=\"0 0 16 16\">\r\n                                  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                                     <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4\"/>\r\n                                </svg>    \r\n                        </button>\r\n\r\n\r\n                           <button class=\"btn btn-success \"\r\n                             @click=\"printLeaveRequests(leaves)\" \r\n                             :disabled=\"!company_id\"\r\n                            >                           \r\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1\"/>\r\n  <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1\"/>\r\n</svg>\r\n</button>\r\n \r\n                        </div>\r\n                    </div>  \r\n\r\n                    <!-- add leave starts -->\r\n                     <form @submit.prevent=\"registerLeave()\">\r\n  <div class=\"row\" v-if=\"addLeave\">\r\n\r\n    <div class=\"col-md-3\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Select Employee</label>\r\n        <Multiselect\r\n          v-model=\"employee\"\r\n          :options=\"employeesList\"\r\n          label=\"name\"\r\n          placeholder=\"Select Employee\"\r\n          :searchable=\"true\"\r\n          :allow-empty=\"false\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n        <div class=\"col-md-3\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Leave Type</label>\r\n        <Multiselect\r\n          v-model=\"leave_type\"\r\n          :options=\"leaveTypes\"\r\n          label=\"name\"\r\n          placeholder=\"Select Employee\"\r\n          :searchable=\"true\"\r\n          :allow-empty=\"false\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-md-2\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">Start Date</label>\r\n        <input\r\n          type=\"date\"\r\n          class=\"form-control\"\r\n          v-model=\"start_date\"\r\n          required\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-md-2\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label\">End  Date</label>\r\n        <input\r\n          type=\"date\"\r\n          class=\"form-control\"\r\n          v-model=\"end_date\"\r\n          required\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n    <div class=\"col-md-2\">\r\n      <div class=\"form-group\">\r\n        <label class=\"form-label invisible\">Submit</label>\r\n        <button type=\"submit\" class=\"btn btn-primary w-100\"\r\n        :disabled=\"!employee || !leave_type\"\r\n        >\r\n          Submit\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</form>\r\n\r\n                     <!-- add leave ends -->\r\n      <div v-if=\"loading\" v-html=\"waitIndicator()\"></div>\r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"leaves\" :columns=\"columns\" :options=\"table_option\">\r\n                            <template #status=\"props\">\r\n                                <span class=\"badge inv-status\" :class=\"'badge-' + props.row.status.color\">\r\n                                    {{ props.row.status.name }}\r\n                                </span>\r\n                            </template>\r\n                            <template #actions=\"props\">\r\n                      \r\n                                <a href=\"javascript:void(0);\" class=\"text-primary\" \r\n                                data-bs-toggle=\"modal\" data-bs-target=\"#edit\"\r\n                                @click=\"selectedLeave = props.row\"\r\n                                >\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\r\n                                      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n                                      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n                                    </svg>\r\n                                </a>\r\n                                              \r\n                            </template>\r\n                           \r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Modal -->\r\n\r\n                     <div class=\"modal fade mymodal\" id=\"edit\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">LEAVE APPROVAL REQUEST</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close-approval\" ></button>\r\n      </div>\r\n<div class=\"modal-body\">\r\n\r\n        <div class=\"row layout-top-spacing\">\r\n          <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\"\r\n          >\r\n            <div           \r\n            class=\"panel p-0\" >\r\n              <div class=\"custom-table table3\" v-if=\"selectedLeave\" >\r\n        <table class=\"table table-bordered table-striped\">\r\n  <thead>\r\n    <tr class=\"text-dark\">\r\n      <th >Employee</th>\r\n      <th >Leave Type</th>\r\n      <th >Start Date</th>\r\n      <th >End Date</th>\r\n      <th >Leave Days</th>\r\n      <th >Status</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td>{{ selectedLeave.employee }}</td>\r\n      <td>\r\n        <span v-if=\"!edit_leave\" @click=\"edit_leave = true\">\r\n        {{ selectedLeave.leave_type.name }}\r\n        <svg \r\n    xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-pencil-square text-primary\" viewBox=\"0 0 16 16\">\r\n  <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"/>\r\n  <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z\"/>\r\n</svg>\r\n        </span>\r\n          <Multiselect\r\n          v-else\r\n          v-model=\"leave_type\"\r\n          :options=\"leaveTypes\"\r\n          label=\"name\"\r\n          placeholder=\"Select Employee\"\r\n          :searchable=\"true\"\r\n          :allow-empty=\"false\"\r\n        />\r\n      </td>\r\n      <td>{{ selectedLeave.start_date }}</td>\r\n      <td>{{ selectedLeave.end_date }}</td>\r\n      <td>{{ selectedLeave.leave_days }}</td>\r\n      <td>\r\n         <span class=\"badge inv-status\" :class=\"'badge-' +selectedLeave?.status?.color\">\r\n            {{ selectedLeave?.status?.name }}\r\n         </span>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n        <td colspan=\"5\" v-if=\"selectedLeave?.remark\">Remark : {{ selectedLeave?.remark }}</td>\r\n    </tr>\r\n\r\n  </tbody>\r\n</table>\r\n</div>\r\n</div>\r\n</div>\r\n</div>\r\n\r\n\r\n  <div class=\"d-flex justify-content-center mb-3\">\r\n\r\n    <div class=\"btn-group\" v-if=\"user_permissions.includes('can_approve_leaves')\">\r\n      <button class=\"btn btn-primary me-2\" @click=\"status = 3\" :disabled=\"spinner\">Approve</button>\r\n      <button class=\"btn btn-danger me-2\" @click=\"status = 4\" :disabled=\"spinner\">Reject</button>\r\n      <button class=\"btn btn-warning me-2\" @click=\"status = 17, remark = requisition.remark\" :disabled=\"spinner\">Hold Request</button>\r\n      <button class=\"btn btn-info me-2\" @click=\"status = 14, remark = requisition.remark\" :disabled=\"spinner\">Remark</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div v-if=\"status\" class=\"mb-2 text-center\">\r\n    <span\r\n      class=\"badge rounded-pill\"\r\n      :class=\"{\r\n        'bg-danger': status == 4,\r\n        'bg-success': status == 3,\r\n        'bg-warning': status == 17,\r\n        'bg-info': status != 3 && status != 4\r\n      }\"\r\n      style=\"font-size: 1rem;\"\r\n    >\r\n      {{\r\n        status == 3\r\n          ? 'Approve Request'\r\n          : status == 17\r\n            ? 'Hold Request'\r\n          : status == 4\r\n          ? 'Reject Request'\r\n          : 'Fill Remark'\r\n      }}\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"input-group\" v-if=\"status\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control\"\r\n      :placeholder=\"status == 3 ? 'Enter Approval Remark' : status == 4 ? 'Enter Rejection Remark' : 'Enter Remark'\"\r\n      v-model=\"remark\"\r\n    >\r\n    <button class=\"btn btn-primary\" type=\"button\" :disabled=\"spinner\" @click=\"updateLeaveStatus()\">\r\n      <span v-if=\"spinner\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Save</span>\r\n    </button>\r\n  </div>\r\n\r\n  \r\n</div>\r\n\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n <!-- modal ends -->\r\n</template>\r\n<style>\r\n    .table3 .actions svg {\r\n        padding: 2px;\r\n    }\r\n</style>\r\n<script setup>\r\n    import { onMounted, ref ,inject } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    useMeta({ title: 'Custom Table' });\r\n    import Multiselect from '@suadelabs/vue3-multiselect';\r\n    import '@suadelabs/vue3-multiselect/dist/vue3-multiselect.css';\r\n    const axiosInstance = axios.create({\r\n       baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n\r\n     const spinner = ref(false)\r\n     const loading = ref(false)\r\n    const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n    const printLeaveRequests = inject('printLeaveRequests')\r\n    const showMessage = inject('showMessage')\r\n    const waitIndicator = inject('waitIndicator');\r\n    const showError = inject('showError')\r\n    const edit_leave = ref(false);\r\n    const columns = ref(['Sno', 'employee','type','start_date','end_date','leave_days','status','actions']);\r\n    const items = ref([]);\r\n    const table_option = ref({\r\n        perPage: 20,\r\n        perPageValues: [20, 50 , 100],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['id', 'service_name'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n\r\n       const company_id = ref('')\r\n       const getData = (company)=>{\r\n        company_id.value = company\r\n        getLeaves();\r\n        getEmployees()\r\n   }\r\n\r\n       const addLeave = ref(false)\r\n\r\n        const employee = ref('')\r\n        const start_date = ref('')\r\n        const end_date = ref('')\r\n        const registerLeave = async() =>{\r\n        const payload = {\r\n            employee_id : employee.value.id,\r\n            leave_type_id : leave_type.value.id,\r\n            start_date : start_date.value,\r\n            end_date : end_date.value,\r\n        }\r\n           try{\r\n           const response = await axiosInstance.post('employee-leave',payload)\r\n           showMessage('Leave Updated')\r\n           addLeave.value =! addLeave.value\r\n           getLeaves()\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n\r\n   }\r\n};\r\n\r\n\r\n\r\n    const leaves = ref([])\r\nconst getLeaves = async () => {\r\n  loading.value = true\r\n   const payload = [2,14,17]\r\n   try {\r\n      const response = await axiosInstance.get(`employee-leave?company_id=${company_id.value}`, {\r\n         params: {\r\n            status_id: payload\r\n         }\r\n      })\r\n\r\n      leaves.value = response.data.map((item, index) => {\r\n         const start = new Date(item.start_date)\r\n         const end = new Date(item.end_date)\r\n         const leave_days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1\r\n\r\n         return {\r\n            ...item,\r\n            Sno: index + 1,\r\n            employee: item.employee.name,\r\n            leave_days,\r\n            type : item.leave_type.name\r\n         }\r\n      })\r\n   } catch (error) {\r\n      showError(error.message)\r\n      console.log(error)\r\n   }finally{\r\n    loading.value = false\r\n   }\r\n}\r\n\r\n\r\n   const status = ref('')\r\n     const employeesList = ref([])\r\n  const getEmployees = async () => {\r\n        const response = await axiosInstance.get(`employees?company_id=${company_id.value}`)\r\n        employeesList.value = response.data\r\n    };\r\n\r\n\r\n    const remark  = ref('')\r\n    const selectedLeave = ref('')\r\n    const updateLeaveStatus = async()=>{\r\n        const payload = {\r\n            leave_type_id : leave_type.value.id,\r\n            status_id : status.value,\r\n            remark : remark.value\r\n        }\r\n\r\n         try{\r\n           const response = await axiosInstance.put(`employee-leave/${selectedLeave.value.id}`,payload)\r\n           showMessage('Confirmed')\r\n           document.getElementById('close-approval').click()\r\n           getLeaves()\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n\r\n   }\r\n\r\n    }\r\n\r\n    const leaveTypes = ref([])\r\n    const leave_type = ref('')\r\n    const getLeaveTypes = async ()=>{\r\n       try{\r\n           const response = await axiosInstance.get('leave-types')\r\n           leaveTypes.value = response.data\r\n   }catch(error){\r\n    showError(error.message)\r\n    console.log(error)\r\n   }finally{\r\n\r\n   }\r\n    }\r\n\r\n    onMounted(() => {\r\n        getLeaveTypes()\r\n    });\r\n</script>\r\n","import script from \"./request.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./request.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./request.vue?vue&type=style&index=0&id=0145fe9d&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMeta","title","axiosInstance","axios","baseURL","process","spinner","ref","loading","user_permissions","JSON","parse","localStorage","getItem","permissions","printLeaveRequests","inject","showMessage","waitIndicator","showError","edit_leave","columns","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","company_id","getData","company","value","getLeaves","getEmployees","addLeave","employee","start_date","end_date","registerLeave","async","payload","employee_id","id","leave_type_id","leave_type","post","error","message","console","log","leaves","response","get","params","status_id","data","map","item","index","start","Date","end","leave_days","Math","ceil","Sno","name","type","status","employeesList","remark","selectedLeave","updateLeaveStatus","put","document","getElementById","click","leaveTypes","getLeaveTypes","onMounted","__exports__"],"sourceRoot":""}