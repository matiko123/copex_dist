"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[9839],{79839:function(a,e,l){l.r(e),l.d(e,{default:function(){return ca}});var t=l(66252),s=l(3577),i=l(49963),n=l(2262),r=l(42119),o=l(56296),u=l(87066);const d={class:"layout-px-spacing"},c=(0,t._)("ul",{class:"navbar-nav flex-row"},[(0,t._)("li",null,[(0,t._)("div",{class:"page-header"},[(0,t._)("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[(0,t._)("ol",{class:"breadcrumb"},[(0,t._)("li",{class:"breadcrumb-item"},[(0,t._)("a",{href:"javascript:;"},"DataTables")]),(0,t._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,t._)("span",null,"Custom")])])])])])],-1),_={class:"seperator-header layout-top-spacing"},v={class:"d-flex justify-content-between mt-3"},b=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,t._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1),p=[b],m=(0,t._)("i",{class:"bi bi-plus"},null,-1),g=(0,t.Uk)(" Add "),f=[m,g],h={class:"text-center"},y={key:0,class:"text-danger"},w=(0,t.Uk)(" Loading "),k=(0,t._)("span",{class:"dots"},[(0,t._)("span",null,"."),(0,t._)("span",null,"."),(0,t._)("span",null,"."),(0,t._)("span",null,"."),(0,t._)("span",null,"."),(0,t._)("span",null,".")],-1),x=[w,k],C=(0,t._)("h5",null,"MACHINE STATEMENT",-1),H={class:"row layout-top-spacing"},F={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},q={class:"panel p-0"},S={class:"custom-table table3 table-responsive"},I={class:"table"},D=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"Machine"),(0,t._)("th",null,"Type"),(0,t._)("th",null,"Fuel Issued"),(0,t._)("th",null,"Issued Date"),(0,t._)("th",null,"Issued By"),(0,t._)("th",null,"BULK Number"),(0,t._)("th",null,"Consuption Ratio")])],-1),z={key:0,id:"allocation",class:"col-lg-12 layout-spacing col-md-12"},A={class:"statbox panel box box-shadow"},E={class:"panel-heading"},U=["onSubmit"],M=(0,t._)("h4",{class:"text-center"},"Fuel Usage Report",-1),R={class:"row mb-2"},V={class:"col-md-4"},j=(0,t._)("label",{class:"form-label"},"Driver Name",-1),L={class:"col-md-4"},N=(0,t._)("label",{class:"form-label"},"Initial Reading",-1),T={class:"row mb-2"},B={class:"col-md-12"},$=(0,t._)("label",{class:"form-label"},"Task",-1),P={class:"d-flex gap-2 justify-content-end"},O=(0,t._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1),Q={class:"row layout-top-spacing"},J={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},K={class:"panel p-0"},W={class:"custom-table table3"},Z=["onClick","data-bs-target"],G=(0,t._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-check2-square",viewBox:"0 0 16 16"},[(0,t._)("path",{d:"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z"}),(0,t._)("path",{d:"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0"})],-1),X=[G],Y=["id"],aa={class:"modal-dialog"},ea={class:"modal-content"},la=(0,t._)("div",{class:"modal-header"},[(0,t._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Final Filling Data"),(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ta={class:"modal-body"},sa={class:"col-md-12"},ia=(0,t._)("label",{class:"form-label"},"Final Reading",-1),na={class:"col-md-12"},ra=(0,t._)("label",{class:"form-label"},"Fuel Quantity",-1),oa=(0,t._)("div",{class:"modal-footer"},[(0,t._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",id:"closer"},"Close"),(0,t._)("button",{type:"submit",class:"btn btn-secondary"},"Save changes")],-1);var ua={setup(a){(0,o.j)({title:"Custom Table"}),(0,o.j)({title:"Form Validation"});const e=(0,r.yj)(),l=(0,n.iH)(["SNo","date","fuel_used","reading_difference","supervisor","task","initial_reading","final_reading","ratio","actions"]),b=(0,n.iH)([]),m=(0,n.iH)(""),g=(0,n.iH)(""),w=(0,n.iH)(""),k=(0,n.iH)(0),G=(0,n.iH)(0),ua=(0,n.iH)(""),da=(0,n.iH)(""),ca=(0,n.iH)(""),_a=(0,n.iH)({perPage:5,perPageValues:[5,10,20,50],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["SNo","total_price"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search Data...",limit:"Results:"},resizableColumns:!1}),va=u.Z.create({baseURL:"https://bushman.ink/api/v1/"}),ba=async()=>{g.value=!0;try{const a=await va.get(`/distribution/${e.params.distribution_id}`);a.data?(m.value=a.data,g.value=!1):console.error("Invalid response format")}catch(a){console.error("Error fetching approval status: ",a)}},pa=()=>{ha.value=!1,g.value=!0;const a={machine_id:m.value.machine_id,fuel_quantity:0,ratio_factor:k.value,driver_id:G.value,driver_name:ua.value,supervisor_id:1,ratio_factor:k.value,supervisor_name:JSON.parse(localStorage.getItem("user")).name,usage_date:(new Date).toISOString().split("T")[0],task:da.value,distribution_id:m.value.id,initial_reading:ca.value};va.post("/fuel-usage",a).then((a=>{ba(),fa(),g.value=!1,201===a.data.status||console.error("Error registering Distribution:",a.data)})).catch((a=>{console.error("Error registering Distribution:",a)}))},ma=(0,n.iH)(""),ga=a=>{document.getElementById("closer").click(),g.value=!0;const e={final_reading:ma.value,fuel_quantity:w.value};va.put(`/fuel-usage/${a}`,e).then((a=>{fa(),g.value=!1,alert("Final reading : "+a.data.final_reading+" Fuel Filled: "+a.data.fuel_quantity),g.value=!1})).catch((a=>{alert("An error has occured ..:",a.message),g.value=!1}))},fa=async()=>{g.value=!0;try{const a=await va.get(`/machine-fuel-usage/${e.params.distribution_id}`);a.data&&Array.isArray(a.data)?(b.value=a.data.map(((a,e)=>{let l=0==a.final_reading?"---":"km/Litre"===m.value.ratio?((a.final_reading-a.initial_reading)/a.fuel_quantity).toFixed(2):(a.fuel_quantity/(a.final_reading-a.initial_reading)).toFixed(2);return parseFloat(l)>50&&(l="---"),{SNo:e+1,id:a.id,date:a.usage_date,fuel_used:a.fuel_quantity,reading_difference:0==a.final_reading?"---":(a.final_reading-a.initial_reading).toFixed(2),supervisor:a.supervisor_name,task:a.task,initial_reading:a.initial_reading,final_reading:0==a.final_reading?"---":a.final_reading,ratio:l}})),g.value=!1):console.error("Invalid response format")}catch(a){console.error("Error fetching approval status: ",a)}};(0,t.bv)((()=>{ba(),fa()}));const ha=(0,n.iH)(!1);return(a,e)=>{const n=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",d,[((0,t.wg)(),(0,t.j4)(t.lR,{to:"#breadcrumb"},[c])),(0,t._)("div",_,[(0,t._)("div",v,[(0,t._)("button",{class:"btn btn-dark me-2",onClick:e[0]||(e[0]=e=>a.$router.go(-1))},p),(0,t._)("button",{class:"btn btn-primary me-2",onClick:e[1]||(e[1]=a=>ha.value=!ha.value)},f)])]),(0,t._)("div",h,[g.value?((0,t.wg)(),(0,t.iD)("h4",y,x)):(0,t.kq)("",!0),C]),(0,t._)("div",H,[(0,t._)("div",F,[(0,t._)("div",q,[(0,t._)("div",S,[(0,t._)("table",I,[D,(0,t._)("tbody",null,[(0,t._)("tr",null,[(0,t._)("td",null,(0,s.zw)(m.value.machine),1),(0,t._)("td",null,(0,s.zw)(m.value.type_name),1),(0,t._)("td",null,(0,s.zw)(m.value.fuel_issued),1),(0,t._)("td",null,(0,s.zw)(m.value.date_provided),1),(0,t._)("td",null,(0,s.zw)(m.value.issuer),1),(0,t._)("td",null,(0,s.zw)(m.value.bulk_id),1),(0,t._)("td",null,(0,s.zw)(m.value.ratio),1)])])])])])])]),ha.value?((0,t.wg)(),(0,t.iD)("div",z,[(0,t._)("div",A,[(0,t._)("div",E,[(0,t._)("form",{class:"p-3 border rounded bg-white shadow mb-2",id:"consumer",onSubmit:(0,i.iM)(pa,["prevent"])},[M,(0,t._)("div",R,[(0,t._)("div",V,[j,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>ua.value=a),required:""},null,512),[[i.nr,ua.value]])]),(0,t._)("div",L,[N,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",name:"initial_reading","onUpdate:modelValue":e[3]||(e[3]=a=>ca.value=a),required:"",step:"any"},null,512),[[i.nr,ca.value]])])]),(0,t._)("div",T,[(0,t._)("div",B,[$,(0,t.wy)((0,t._)("textarea",{type:"number",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>da.value=a),name:"fuel_provided",required:"",style:{height:"2cm"}},null,512),[[i.nr,da.value]])])]),(0,t._)("div",P,[O,(0,t._)("button",{class:"btn btn-danger",onClick:e[5]||(e[5]=a=>ha.value=!ha.value)},"Cancel")])],40,U)])])])):(0,t.kq)("",!0),(0,t._)("div",Q,[(0,t._)("div",J,[(0,t._)("div",K,[(0,t._)("div",W,[(0,t.Wm)(n,{data:b.value,columns:l.value,options:_a.value},{status:(0,t.w5)((a=>[(0,t._)("span",{class:(0,s.C_)(["badge inv-status","badge-"+a.row.status.class])},(0,s.zw)(a.row.status.key),3)])),actions:(0,t.w5)((l=>["---"===l.row.final_reading?((0,t.wg)(),(0,t.iD)("a",{key:0,href:"javascript:void(0)",class:"text-success",title:"Approve",onClick:e=>a.selectedId=l.row.id,"data-bs-toggle":"modal","data-bs-target":"#modal-"+l.row.id},X,8,Z)):(0,t.kq)("",!0),(0,t._)("div",{class:"modal fade",id:"modal-"+l.row.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,t._)("div",aa,[(0,t._)("div",ea,[la,(0,t._)("form",{onSubmit:e[8]||(e[8]=(0,i.iM)((e=>ga(a.selectedId)),["prevent"]))},[(0,t._)("div",ta,[(0,t._)("div",sa,[ia,(0,t.wy)((0,t._)("input",{type:"number",step:"any",placeholder:"Enter Final Reading",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>ma.value=a),required:""},null,512),[[i.nr,ma.value]])]),(0,t._)("div",na,[ra,(0,t.wy)((0,t._)("input",{type:"number",class:"form-control",placeholder:"Enter Fuel Quantity",name:"fuel_provided","onUpdate:modelValue":e[7]||(e[7]=a=>w.value=a),required:"",step:"any"},null,512),[[i.nr,w.value]])])]),oa],32)])])],8,Y)])),_:1},8,["data","columns","options"])])])])])])}}};const da=ua;var ca=da}}]);
//# sourceMappingURL=9839.124fed1c.js.map