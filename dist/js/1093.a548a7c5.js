"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[1093],{91093:function(a,e,t){t.r(e),t.d(e,{default:function(){return F}});var s=t(66252),l=t(3577),r=t(2262),o=t(42127),i=t(33907),c=t(56296),n=t(87066),u=t(26212),d=t.n(u);const p={class:"w-100 px-0"},v=(0,s._)("ul",{class:"navbar-nav flex-row"},[(0,s._)("li",null,[(0,s._)("div",{class:"page-header"},[(0,s._)("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[(0,s._)("ol",{class:"breadcrumb"},[(0,s._)("li",{class:"breadcrumb-item"},[(0,s._)("a",{href:"javascript:;"},"Charts")]),(0,s._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,s._)("span",null,"Apex")])])])])])],-1),b={class:"row g-0"},m={id:"chartBar",class:"col-12 px-0"},g={class:"statbox panel box box-shadow w-100"},h={class:"panel-heading"},f={class:"row justify-content-center text-center"},_={class:"col-12"},y={key:0,class:"d-flex flex-column flex-md-row align-items-center justify-content-md-between gap-2"},w={class:"mb-0"},x=(0,s.Uk)(" Open Budget "),k={key:1,class:"text-center"},S={class:"row justify-content-center mb-4"},j={class:"col-12 col-md-6"},U={class:"panel-body"};var D={setup(a){(0,c.j)({title:"Apex Chart"});(0,s.f3)("showMessage");const e=(0,s.f3)("showError"),t=(0,i.oR)(),u=(0,r.iH)([{data:[]}]),D=(0,r.iH)([]),C=(0,r.iH)(!1),F=async a=>{if(A.value&&A.value.id)try{const t=await n.Z.get(`https://construction.trustdigital.space/api/v1/budget-analysis?${a}`),s=t.data;if(!s.length)return e("This project has no budget data"),D.value=[],u.value=[{data:[]}],void(C.value=!1);C.value=!0,D.value=s.map((a=>a.budget_name)),u.value=[{data:s.map((a=>a.budget_cost))}]}catch(t){console.error("Failed to fetch budget data:",t)}else L()},H=(0,s.Fl)((()=>{const a=t.state.is_dark_mode,e=Math.max(...u.value[0].data);return{chart:{toolbar:{show:!1}},dataLabels:{enabled:!0,formatter:a=>a.toLocaleString("en-US",{maximumFractionDigits:0}),style:{colors:[a?"#fff":"#000"]}},plotOptions:{bar:{horizontal:!0}},xaxis:{categories:D.value,min:0,max:e,tickAmount:6,labels:{formatter:a=>a.toLocaleString("en-US",{maximumFractionDigits:0}),style:{colors:a?"#fff":"#000"}},forceNiceScale:!1},yaxis:{labels:{style:{colors:a?"#fff":"#000"}}},tooltip:{y:{formatter:a=>a.toLocaleString("en-US",{maximumFractionDigits:0})}},grid:{borderColor:a?"#191e3a":"#e0e6ed"}}})),T=(0,r.iH)([]),A=(0,r.iH)(null),E=async()=>{try{const a=await n.Z.get("https://bcftrack.trustdigital.space/api/v1/projects");T.value=a.data.filter((a=>"active"===a.status&&6==a.company_id))}catch(a){e(a.message)}},L=async()=>{try{const a=await n.Z.get("https://construction.trustdigital.space/api/v1/budget-analysis"),t=a.data;if(!t.length)return e("This project has no budget data"),D.value=[],void(u.value=[{data:[]}]);D.value=t.map((a=>a.budget_name)),u.value=[{data:t.map((a=>a.budget_cost))}]}catch(a){console.error("Failed to fetch budget data:",a)}};return(0,s.bv)((()=>{E(),A.value?.id?F(`project_id=${A.value.id}`):L()})),(a,e)=>{const t=(0,s.up)("router-link"),i=(0,s.Q2)("scroll-spy");return(0,s.wg)(),(0,s.iD)("div",p,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"#breadcrumb"},[v])),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",m,[(0,s._)("div",g,[(0,s._)("div",h,[(0,s._)("div",f,[(0,s._)("div",_,[A.value?((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("h4",w,"BUDGET ANALYSIS FOR "+(0,l.zw)(A.value?.short_name)+" PROJECT",1),C.value?((0,s.wg)(),(0,s.j4)(t,{key:0,to:`/report/project-budgets/${A.value.id}`,class:"btn btn-primary p-1"},{default:(0,s.w5)((()=>[x])),_:1},8,["to"])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("h4",k,"HIGHEST COST BUDGETS"))])]),(0,s._)("div",S,[(0,s._)("div",j,[(0,s.Wm)((0,r.SU)(d()),{modelValue:A.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>A.value=a),e[1]||(e[1]=a=>F(`project_id=${a?.id}`))],options:T.value,label:"short_name","track-by":"id",placeholder:"Select A project",searchable:!0,"append-to-body":!0},null,8,["modelValue","options"])])])]),(0,s._)("div",U,[(0,r.SU)(H)?((0,s.wg)(),(0,s.j4)((0,r.SU)(o.Z),{key:0,height:"350",type:"bar",options:(0,r.SU)(H),series:u.value},null,8,["options","series"])):(0,s.kq)("",!0)])])])])),[[i]])])}}};const C=D;var F=C}}]);
//# sourceMappingURL=1093.a548a7c5.js.map