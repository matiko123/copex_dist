{"version":3,"file":"js/7274.47d882ad.js","mappings":"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","sources":["webpack://cork-vue3/./src/views/attendances/geoLocation.vue","webpack://cork-vue3/./src/views/attendances/geoLocation.vue?c1b1"],"sourcesContent":["<template>\r\n  <div class=\"layout-px-spacing\">\r\n    <ul class=\"navbar-nav flex-row mt-2\">\r\n      <li>\r\n        <div class=\"page-header\">\r\n          <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb\">\r\n              <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Reports</a></li>\r\n              <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Supervisor Attendance</span></li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12\">\r\n        <h4 class=\"text-center\">GEO LOCATION ATTENDANCE REPORT </h4>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row mb-3\">\r\n      <div class=\"col-md-12 text-end d-flex justify-content-end align-items-center gap-2\">\r\n        <input \r\n          type=\"date\" \r\n          v-model=\"selectedDate\" \r\n          class=\"form-control form-control-sm\" \r\n          style=\"width: 150px;\"\r\n        >\r\n        <button @click=\"printReport\" class=\"btn btn-success\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-printer me-2\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n            <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- loading spinner starts -->\r\n    <div v-if=\"loading_spinner\" v-html=\"tableShimmer()\"></div>\r\n    <!-- Loading spinner ends -->\r\n\r\n    <div v-else class=\"row layout-top-spacing\">\r\n      <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n        <div class=\"panel p-0\">\r\n          <div class=\"custom-table table3\">\r\n            <v-client-table :data=\"filteredAttendance\" :columns=\"columns\" :options=\"table_option\">\r\n              <template #actions=\"props\">\r\n                <a\r\n                  href=\"javascript:;\"\r\n                  class=\"edit me-3\"\r\n                  @click.prevent=\"openViewModal(props.row)\"\r\n                  data-bs-toggle=\"modal\"\r\n                  data-bs-target=\"#view-attendance-modal\"\r\n                >\r\n                  <!-- eye icon -->\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-primary\">\r\n                    <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                    <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                  </svg>\r\n                </a>\r\n              </template>\r\n            </v-client-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- view attendance modal starts -->\r\n      <div class=\"modal fade mymodal\" id=\"view-attendance-modal\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"viewAttendanceModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-fullscreen modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"viewAttendanceModalLabel\">Site Attendance Location View For {{ selectedAttendance.site }}</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeModal\"></button>\r\n          </div>\r\n\r\n          <div class=\"modal-body\">\r\n            <div class=\"p-3 my-4\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6 text-start\">\r\n                 <p class=\"mb-3 text-dark\"><strong>Supervisor:</strong> {{ selectedAttendance.name || '--' }}</p> \r\n                  <p class=\"mb-3 text-dark\"><strong>Location:</strong> {{ selectedAttendance.location || '--' }}</p> \r\n\r\n              </div>\r\n\r\n              <div class=\"col-md-6 text-start\">\r\n                <p class=\"mb-3 text-dark\"><strong>phone no:</strong> {{ selectedAttendance.phone }}</p>\r\n                <p class=\"mb-3 text-dark\"><strong>Date:</strong> {{ selectedAttendance.date || '--' }}</p>\r\n              </div>\r\n           </div>\r\n           </div>\r\n\r\n            <div class=\"row\">\r\n              <!-- Report Location Map -->\r\n              <div class=\"col-md-12 mb-3\">\r\n                <h6>Report Location</h6>\r\n                <div id=\"reportMap\" class=\"map-container\"></div>\r\n                <div class=\"small mt-1 text-muted\">{{ selectedAttendance.report_location || '' }}</div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"closeModal\">Close</button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- view attendance modal ends -->\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject, computed } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport axios from 'axios';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// --- meta + composables --- (you had useMeta in your original code)\r\n// import { useMeta } from '@/composables/use-meta';\r\n// useMeta({ title: 'Supervisor Attendance Report' });\r\n\r\nconst route = useRoute();\r\nconst showMessage = inject('showMessage');\r\nconst showError = inject('showError');\r\nconst formatDate = inject('formatDate');\r\nconst tableShimmer = inject('tableShimmer');\r\nconst loadingSpinner = inject('loadingSpinner');\r\n\r\nconst loading_spinner = ref(false);\r\nconst columns = ref(['SNo','name','phone','date','location', 'actions']);\r\nconst items = ref([]);\r\nconst attendance = ref([]);\r\nconst attendance_factor_id = ref('');\r\n\r\nconst table_option = ref({\r\n  perPage: 20,\r\n  perPageValues: [20, 50 ,100],\r\n  skin: 'table table-hover table-striped',\r\n  columnsClasses: { actions: 'actions text-center' },\r\n  sortable: ['SNo', 'name','short_name','status'],\r\n  sortIcon: {\r\n    base: 'sort-icon-none',\r\n    up: 'sort-icon-asc',\r\n    down: 'sort-icon-desc',\r\n  },\r\n  pagination: { nav: 'scroll', chunk: 5 },\r\n  texts: {\r\n    count: 'Showing {from} to {to} of {count}',\r\n    filter: '',\r\n    filterPlaceholder: 'Search...',\r\n    limit: 'Results:',\r\n  },\r\n  resizableColumns: false,\r\n});\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.VUE_APP_API_BASE_URL || ''\r\n});\r\n\r\nconst selectedDate = ref(\"\")\r\n\r\nconst filteredAttendance = computed(() => {\r\n  if (!selectedDate.value) return attendance.value\r\n\r\n  return attendance.value.filter(u =>\r\n    new Date(u.created_at).toISOString().split(\"T\")[0] === selectedDate.value\r\n  )\r\n})\r\n\r\n\r\n// selected attendance for modal\r\nconst selectedAttendance = ref({});\r\nlet reportMap = null;\r\nlet leaveMap = null;\r\n\r\n// helper to safely parse lat/lon\r\nconst toFloat = (v) => {\r\n  if (v === null || v === undefined) return null;\r\n  const n = parseFloat(String(v).replace(/[, ]+/g, ''));\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\nconst formatTime = (datetime) => {\r\n  if (!datetime) return '--';\r\n  // if already time-only string, return as-is\r\n  try {\r\n    const date = new Date(datetime);\r\n    if (isNaN(date.getTime())) return datetime;\r\n    return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\r\n  } catch (e) {\r\n    return datetime;\r\n  }\r\n};\r\n\r\nconst getSupervisorAttendance = async () => {\r\n  loading_spinner.value = true;\r\n  try {\r\n    const response = await axiosInstance.get(`geo-location-attendances?store_id=all`);\r\n    attendance.value = response.data.map((item, index) => ({\r\n      ...item,\r\n      SNo: index + 1,\r\n      id: item.id,\r\n      name: item.user?.name,\r\n      phone: item.user?.phone_no,\r\n      store_name: item.store?.name,\r\n      date: formatDate(item.created_at),\r\n      site: `${item.store?.project?.short_name || 'No Project'}`,\r\n      location: item.location,\r\n      report_latitude: item.latitude,\r\n      report_longitude: item.longitude,\r\n    }));\r\n  } catch (error) {\r\n    console.error(error);\r\n    showError?.(error.message);\r\n  } finally {\r\n    loading_spinner.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  getSupervisorAttendance();\r\n  // Fix leaflet default icon path (if necessary)\r\n  delete L.Icon.Default.prototype._getIconUrl;\r\n  L.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n  });\r\n});\r\n\r\n// open modal: set selectedAttendance and render maps\r\nconst openViewModal = (row) => {\r\n  selectedAttendance.value = { ...row };\r\n  setTimeout(() => {\r\n    loadReportMap();\r\n    if (selectedAttendance.value.leave_latitude) {\r\n      loadLeaveMap();\r\n    } else {\r\n      if (leaveMap) {\r\n        leaveMap.remove();\r\n        leaveMap = null;\r\n      }\r\n    }\r\n  }, 300);\r\n\r\n};\r\n\r\nconst closeModal = () => {\r\n  const modalEl = document.getElementById('view-attendance-modal');\r\n  if (!modalEl) return;\r\n  const bs = window.bootstrap.Modal.getInstance(modalEl);\r\n  if (bs) bs.hide();\r\n};\r\n\r\nfunction onModalHidden() {\r\n  // remove maps to free memory\r\n  if (reportMap) {\r\n    reportMap.remove();\r\n    reportMap = null;\r\n  }\r\n  if (leaveMap) {\r\n    leaveMap.remove();\r\n    leaveMap = null;\r\n  }\r\n  selectedAttendance.value = {};\r\n}\r\n\r\nfunction loadReportMap() {\r\n  const lat = toFloat(selectedAttendance.value.report_latitude);\r\n  const lon = toFloat(selectedAttendance.value.report_longitude);\r\n  if (lat === null || lon === null) return;\r\n\r\n  // remove old map instance to avoid errors\r\n  if (reportMap) {\r\n    try { reportMap.remove(); } catch (e) { /* ignore */ }\r\n    reportMap = null;\r\n  }\r\n\r\n  // initialize map\r\n  reportMap = L.map('reportMap', { center: [lat, lon], zoom: 16, scrollWheelZoom: true });\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; OpenStreetMap contributors'\r\n  }).addTo(reportMap);\r\n\r\n  const marker = L.marker([lat, lon]).addTo(reportMap);\r\n  marker.bindPopup('<b>Report Location</b>').openPopup();\r\n\r\n  // ensure map renders correctly inside modal\r\n  setTimeout(() => { reportMap.invalidateSize(); }, 200);\r\n}\r\n\r\nfunction loadLeaveMap() {\r\n  const lat = toFloat(selectedAttendance.value.leave_latitude);\r\n  const lon = toFloat(selectedAttendance.value.leave_longitude);\r\n  if (lat === null || lon === null) return;\r\n\r\n  if (leaveMap) {\r\n    try { leaveMap.remove(); } catch (e) { /* ignore */ }\r\n    leaveMap = null;\r\n  }\r\n\r\n  leaveMap = L.map('leaveMap', { center: [lat, lon], zoom: 16, scrollWheelZoom: true });\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; OpenStreetMap contributors'\r\n  }).addTo(leaveMap);\r\n\r\n  const marker = L.marker([lat, lon]).addTo(leaveMap);\r\n  marker.bindPopup('<b>Leave Location</b>').openPopup();\r\n\r\n  setTimeout(() => { leaveMap.invalidateSize(); }, 200);\r\n}\r\n\r\nconst printReport = async () => {\r\n  try {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = \"none\";\r\n    document.body.appendChild(iframe);\r\n\r\n    // Date formatting\r\n    const now = new Date();\r\n    const day = String(now.getDate()).padStart(2, '0');\r\n    const month = String(now.getMonth() + 1).padStart(2, '0');\r\n    const year = now.getFullYear();\r\n    const formattedDate = `${day}.${month}.${year}`;\r\n    const formatDate = `${day}.${month}.${year}`;\r\n    const formattedDateTime = `${formattedDate}, ${now.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'})}`;\r\n\r\n    const printContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<title>Supervisor Attendance Report</title>\r\n<style>\r\n  body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\r\n  .header { display: flex; justify-content: space-between; align-items: flex-start; position: relative; }\r\n  .logo { width: 160px; height: auto; }\r\n  .report-box { border: 1px solid #000; padding: 4px 8px; font-size: 11px; text-align: center; margin-left: auto; border-radius: 5px; }\r\n  .company-title { text-align: center; margin-top: 10px; }\r\n  .reg-info { position: absolute; top: 60px; right: 0; text-align: right; font-size: 10px; line-height: 1.4; }\r\n  .title { text-align: center; font-weight: bold; margin: 20px 0 10px 0; }\r\n  table { width: 100%; border-collapse: collapse; margin-top: 20px; }\r\n  table.items th, table.items td { border: 1px solid #000; padding: 6px; font-weight: normal; }\r\n  table.items thead tr th { background-color: #f8f8f8; border: 1px solid #000; font-weight: bold; }\r\n  .text-right { text-align: right; }\r\n  .text-end { text-align: end; }\r\n  .text-center { text-align: center; }\r\n  .text-start { text-align: start; }\r\n  @media print { body { margin: 10mm; } .no-print { display: none; } }\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"header\">\r\n  <img src=\"https://bushman.ink/copex.jpg\" class=\"logo\" />\r\n  <div class=\"report-box\">\r\n    REPORT ON.<br>\r\n    <span style=\"color:red;\">${formattedDate}</span>\r\n  </div>\r\n  <div class=\"reg-info\">\r\n    TIN: 103-826-519<br>\r\n    VRN: 20-01-017530R\r\n  </div>\r\n</div>\r\n\r\n<div class=\"company-title\">\r\n  <h2>COPEX CONTRACTORS CO.LTD</h2>\r\n  <div>Msamvu, P.O.BOX 678, Morogoro</div>\r\n  <div>Mobile, 0713 000 777, 0657 111 555</div>\r\n</div>\r\n\r\n<div class=\"title\">SUPERVISOR ATTENDANCE REPORT</div>\r\n\r\n<div style=\"text-align: right; margin-top: 10px;\">\r\n  <strong>Date: ${formatDate}</strong>\r\n</div>\r\n\r\n<table class=\"items\">\r\n  <thead>\r\n    <tr>\r\n      <th style=\"width: 40px;\">S/No</th>\r\n      <th>Name</th>\r\n      <th>Number</th>\r\n      <th>Date</th>\r\n      <th>Location</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    ${filteredAttendance.value.map((item, index) => `\r\n    <tr>\r\n      <td class=\"text-center\">${index + 1}</td>\r\n      <td class=\"text-start\">${item.name || '--'}</td>\r\n      <td class=\"text-center\">${item.phone || '--'}</td>\r\n      <td class=\"text-center\">${item.date || '--'}</td>\r\n      <td class=\"text-start\">${item.location || '--'}</td>\r\n    </tr>\r\n    `).join('')}\r\n  </tbody>\r\n</table>\r\n\r\n<div style=\"margin-top: 40px; text-align: center; font-size: 12px; border-top: 1px solid #666; padding-top: 8px;\">\r\n  <p>Â© ${new Date().getFullYear()} COPEX CONTRACTORS CO.LTD | TIN: 103-826-519 | VRN: 20-01-017530R</p>\r\n  <p>Msamvu, P.O.BOX 678, Morogoro | Mobile: 0713 000 777, 0657 111 555</p>\r\n</div>\r\n\r\n<div style=\"margin-top: 10px; font-size: 11px; text-align: left;\">\r\n  ${formattedDateTime}\r\n</div>\r\n\r\n</body>\r\n</html>\r\n`;\r\n\r\n    const iframeDoc = iframe.contentWindow.document;\r\n    iframeDoc.open();\r\n    iframeDoc.write(printContent);\r\n    iframeDoc.close();\r\n\r\n    iframe.onload = () => {\r\n      iframe.contentWindow.focus();\r\n      iframe.contentWindow.print();\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n      }, 1000);\r\n    };\r\n  } catch (error) {\r\n    showError(`Failed to print report: ${error.message}`);\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.map-container {\r\n  height: calc(100vh - 150px); /* Full screen minus header/footer */\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n.table3 .actions svg {\r\n  padding: 2px;\r\n}\r\n</style>\r\n","import script from \"./geoLocation.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./geoLocation.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./geoLocation.vue?vue&type=style&index=0&id=5eb643c3&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\copexErp\\\\frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5eb643c3\"]])\n\nexport default __exports__"],"names":["useRoute","inject","showError","formatDate","tableShimmer","loading_spinner","ref","columns","attendance","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","resizableColumns","axiosInstance","axios","baseURL","process","selectedDate","filteredAttendance","computed","value","u","Date","created_at","toISOString","split","selectedAttendance","reportMap","leaveMap","toFloat","v","undefined","n","parseFloat","String","replace","Number","isFinite","getSupervisorAttendance","async","response","get","data","map","item","index","SNo","id","name","user","phone","phone_no","store_name","store","date","site","project","short_name","location","report_latitude","latitude","report_longitude","longitude","error","console","message","onMounted","L","iconRetinaUrl","require","iconUrl","shadowUrl","openViewModal","row","setTimeout","loadReportMap","leave_latitude","loadLeaveMap","remove","closeModal","modalEl","document","getElementById","bs","window","bootstrap","Modal","getInstance","hide","lat","lon","e","center","zoom","scrollWheelZoom","attribution","addTo","marker","bindPopup","openPopup","invalidateSize","leave_longitude","printReport","iframe","createElement","style","display","body","appendChild","now","day","getDate","padStart","month","getMonth","year","getFullYear","formattedDate","formattedDateTime","toLocaleTimeString","hour","minute","printContent","join","iframeDoc","contentWindow","open","write","close","onload","focus","print","removeChild","__exports__"],"sourceRoot":""}