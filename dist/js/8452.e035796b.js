"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[8452],{78452:function(a,e,l){l.r(e),l.d(e,{default:function(){return P}});var s=l(66252),t=l(2262),o=l(3577),n=l(49963),i=l(87066),r=l(56296),c=l(26212),d=l.n(c);const u={class:"layout-px-spacing"},m=(0,s.uE)('<ul class="navbar-nav flex-row mt-2"><li><div class="page-header"><nav class="breadcrumb-one" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item active" aria-current="page"><span>Outside Maintenances</span></li></ol></nav></div></li></ul>',1),v={class:"d-flex me-4 mt-2"},b=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1),p=[b],g={class:"row layout-top-spacing"},_={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},w={class:"panel p-0"},f={class:"custom-table table3"},h=["innerHTML"],k=["onClick"],y=(0,s._)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"},null,-1),x=(0,s._)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"},null,-1),H=[y,x],C={class:"modal fade",id:"return-form",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},M={class:"modal-dialog modal-lg"},S={class:"modal-content"},E=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"OUTSIDE MAINTAINENCE RETURN NOTE"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),L={class:"modal-body"},U={class:"mb-3 row"},R={class:"col-md-12"},T=(0,s._)("label",{class:"col-form-label"},"Status :",-1),D={class:"mb-3"},N=(0,s._)("label",{for:"message-text",class:"col-form-label"},"Return Remark:",-1),A={class:"modal-footer"},I=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close"},"Close",-1),V=["disabled"],q=["innerHTML"],z={key:1};var B={setup(a){(0,t.iH)(null);const e=(0,t.iH)([{id:12,name:"Fixed"},{id:13,name:"Unfixed"}]),l=(0,t.iH)(!0),c=(0,s.f3)("showMessage"),b=(0,s.f3)("loadingSpinner"),y=(0,s.f3)("showError"),x=(0,s.f3)("tableShimmer"),B=(0,s.f3)("formatNumber");(0,r.j)({title:"Jobcard Lists"});const O=(0,t.iH)(""),P=(0,t.iH)(""),j=(0,t.iH)(""),$=(0,t.iH)(""),F=(0,t.iH)(!1),J=async()=>{F.value=!0;const a={status_id:O.value.id,return_remark:P.value};try{await Z.put(`outside-maintenances/${$.value.id}`,a);c("Data saved"),Q(),document.getElementById("close").click(),O.value="",P.value="",j.value=""}catch(e){console.log(e),y(e.message)}finally{F.value=!1}},W=(0,t.iH)({perPage:50,perPageValues:[50,100,200,500,1e3],skin:"table table-hover table-striped",columnsClasses:{actions:"actions text-center"},sortable:["id","vehicle_no","date","service_type","current_service_kms","next_service_kms","status"],sortIcon:{base:"sort-icon-none",up:"sort-icon-asc",down:"sort-icon-desc"},pagination:{nav:"scroll",chunk:5},texts:{count:"Showing {from} to {to} of {count}",filter:"",filterPlaceholder:"Search...",limit:"Results:"},resizableColumns:!1}),Z=i.Z.create({baseURL:"https://bushman.ink/api/v1/"}),G=(0,t.iH)([]),K=(0,t.iH)(["sno","item","description","quantity","vendor","status","remark","actions"]),Q=async()=>{try{const a=await Z.get("outside-maintenances");G.value=a.data.map(((a,e)=>({...a,sno:e+1,vendor:a.vendor.name,cost:a.rate?B(a.quantity*a.rate):"no cost negotiated",remark:a.return_remark??"---"})))}catch(a){y(a.message),console.log(a)}finally{l.value=!1}};return(0,s.bv)((()=>{Q()})),(a,i)=>{const r=(0,s.up)("v-client-table");return(0,s.wg)(),(0,s.iD)("div",u,[m,(0,s._)("div",v,[(0,s._)("button",{class:"btn btn-dark me-2 px-3",onClick:i[0]||(i[0]=e=>a.$router.go(-1))},p)]),(0,s._)("div",g,[(0,s._)("div",_,[(0,s._)("div",w,[(0,s._)("div",f,[l.value?((0,s.wg)(),(0,s.iD)("div",{key:0,innerHTML:(0,t.SU)(x)()},null,8,h)):((0,s.wg)(),(0,s.j4)(r,{key:1,data:G.value,columns:K.value,options:W.value},{status:(0,s.w5)((a=>[(0,s._)("span",{class:(0,o.C_)(["badge inv-status","badge-"+a.row.status.color])},(0,o.zw)(a.row.status.name),3)])),actions:(0,s.w5)((a=>[11==a.row.status.id?((0,s.wg)(),(0,s.iD)("svg",{key:0,"data-bs-toggle":"modal","data-bs-target":"#return-form",onClick:e=>$.value=a.row,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-eye",viewBox:"0 0 16 16"},H,8,k)):(0,s.kq)("",!0)])),_:1},8,["data","columns","options"]))])])])]),(0,s._)("div",C,[(0,s._)("div",M,[(0,s._)("div",S,[E,(0,s._)("form",{onSubmit:i[3]||(i[3]=(0,n.iM)((a=>J()),["prevent"]))},[(0,s._)("div",L,[(0,s._)("div",U,[(0,s._)("div",R,[T,(0,s.Wm)((0,t.SU)(d()),{modelValue:O.value,"onUpdate:modelValue":i[1]||(i[1]=a=>O.value=a),options:e.value,"close-on-select":!0,label:"name",placeholder:"Select Status",searchable:!0},null,8,["modelValue","options"])])]),(0,s._)("div",D,[N,(0,s.wy)((0,s._)("textarea",{class:"form-control",id:"message-text",placeholder:"Enter Return Remark","onUpdate:modelValue":i[2]||(i[2]=a=>P.value=a)},null,512),[[n.nr,P.value]])])]),(0,s._)("div",A,[I,(0,s._)("button",{type:"submit",class:"btn btn-primary",disabled:F.value},[F.value?((0,s.wg)(),(0,s.iD)("span",{key:0,innerHTML:(0,t.SU)(b)()},null,8,q)):((0,s.wg)(),(0,s.iD)("span",z,"Save"))],8,V)])],32)])])])])}}};const O=B;var P=O}}]);
//# sourceMappingURL=8452.e035796b.js.map