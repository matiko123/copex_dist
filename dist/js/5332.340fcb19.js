"use strict";(self["webpackChunkcork_vue3"]=self["webpackChunkcork_vue3"]||[]).push([[5332],{15332:function(e,a,t){t.r(a),t.d(a,{default:function(){return ct}});t(26699);var l=t(66252),r=t(3577),n=t(2262),s=t(49963),o=t(87066),d=t(42119),i=t(56296),c=t(26212),u=t.n(c);const v=e=>((0,l.dD)("data-v-4a81d400"),e=e(),(0,l.Cn)(),e),m={class:"layout-px-spacing horizontal-scroll-container"},h={class:"mx-3"},g=v((()=>(0,l._)("div",{class:"mb-3 fw-bold"},"Weekly Allowance",-1))),_=v((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[(0,l._)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"})],-1))),y=[_],p={class:"d-flex justify-content-between align-items-center horizontal-scroll-content"},w={class:"flex-grow-1 text-center"},b={class:"container mt-5"},k={key:0,class:"mb-5 d-flex"},x={class:"ms-auto"},f={class:"dropdown nav-item notification-dropdown btn-group"},S={href:"javascript:;",id:"ddlnotify","data-bs-toggle":"dropdown","aria-expanded":"false",class:"btn dropdown-toggle nav-link position-relative p-0 shadow"},H=v((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-bell text-danger",style:{transform:"scale(2)"}},[(0,l._)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,l._)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1))),D={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},A={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"ddlnotify"},E={class:"dropdown-item"},T={class:"media"},z=(0,l.uE)('<div class="media-aside align-self-start" data-v-4a81d400><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-server" data-v-4a81d400><rect x="2" y="2" width="20" height="8" rx="2" ry="2" data-v-4a81d400></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2" data-v-4a81d400></rect><line x1="6" y1="6" x2="6" y2="6" data-v-4a81d400></line><line x1="6" y1="18" x2="6" y2="18" data-v-4a81d400></line></svg></div>',1),U={class:"media-body"},R={class:"data-info"},$={class:"mb-0"},N={class:"mb-0"},C=["onClick"],M={class:"text-center"},L={class:"budgets-title"},O=v((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"me-2 bi bi-printer",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),(0,l._)("path",{d:"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"})],-1))),W=(0,l.Uk)(" Print "),q=[O,W],F=v((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 24",style:{cursor:"pointer"}},[(0,l._)("path",{d:"M4 4h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-4 4v-16a2 2 0 0 1 2-2z",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linejoin":"round"})],-1))),V=(0,l.Uk)(" Add Remark "),j=[F,V],I=["innerHTML"],Y={class:"allowance-table-container"},K={class:"table table-bordered mt-4"},P=v((()=>(0,l._)("thead",{class:"thead-light"},[(0,l._)("tr",null,[(0,l._)("th",{rowspan:"2",class:"align-middle text-dark"},"SN"),(0,l._)("th",{rowspan:"2",class:"align-middle text-dark"},"Name"),(0,l._)("th",{colspan:"7",class:"text-center text-dark"},"Days (Tuesday - Monday)"),(0,l._)("th",{rowspan:"2",class:"align-middle text-dark"},"Days"),(0,l._)("th",{rowspan:"2",class:"align-middle text-dark"},"Advance"),(0,l._)("th",{rowspan:"2",class:"align-middle text-dark"},"Rate"),(0,l._)("th",{rowspan:"2",class:"align-middle text-dark"},"Total")]),(0,l._)("tr",null,[(0,l._)("th",{class:"text-dark text-center"},"Tuesday"),(0,l._)("th",{class:"text-dark text-center"},"Wednesday"),(0,l._)("th",{class:"text-dark text-center"},"Thursday"),(0,l._)("th",{class:"text-dark text-center"},"Friday"),(0,l._)("th",{class:"text-dark text-center"},"Saturday"),(0,l._)("th",{class:"text-dark text-center"},"Sunday"),(0,l._)("th",{class:"text-dark text-center"},"Monday")])],-1))),B=v((()=>(0,l._)("td",null,null,-1))),J=v((()=>(0,l._)("td",null,null,-1))),G=v((()=>(0,l._)("td",null,null,-1))),X=v((()=>(0,l._)("td",null,null,-1))),Z=v((()=>(0,l._)("td",null,null,-1))),Q={class:"text-start"},ee={class:"text-start"},ae=["onClick"],te={style:{cursor:"pointer"}},le={key:0},re={key:1},ne={class:"text-center"},se={class:"text-end"},oe={class:"text-end"},de={class:"text-end"},ie=["id"],ce={class:"modal-dialog modal-xl"},ue={class:"modal-content"},ve=v((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Daily Work Allowance"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),me={class:"modal-body"},he=["innerHTML"],ge={key:1},_e={class:"mb-4"},ye={class:"row g-2 align-items-center"},pe={class:"col-md-3 col-6"},we=v((()=>(0,l._)("div",{class:"fw-bold text-secondary small"},"Date",-1))),be={class:"fs-6"},ke={class:"col-md-3 col-6"},xe=v((()=>(0,l._)("div",{class:"fw-bold text-secondary small"},"Labourer Name",-1))),fe={class:"fs-6 text-start"},Se={class:"col-md-3 col-6"},He=v((()=>(0,l._)("div",{class:"fw-bold text-secondary small"},"Daily Wages",-1))),De={class:"fs-6"},Ae={class:"col-md-3 col-6"},Ee=v((()=>(0,l._)("div",{class:"fw-bold text-secondary small"},"Was Machine Used ?",-1))),Te={class:"fs-6"},ze=v((()=>(0,l._)("hr",null,null,-1))),Ue={class:"row g-3"},Re={class:"col-md-3"},$e=v((()=>(0,l._)("label",{class:"form-label"},"Advance",-1))),Ne={class:"col-md-9"},Ce=v((()=>(0,l._)("label",{class:"form-label"},"Activity",-1))),Me={class:"col-md-3"},Le=v((()=>(0,l._)("label",{class:"form-label"},"Start Hour ",-1))),Oe={class:"col-md-3"},We=v((()=>(0,l._)("label",{class:"form-label"},"End Hour",-1))),qe={class:"col-md-3"},Fe=v((()=>(0,l._)("label",{class:"form-label"},"Select Machine",-1))),Ve={class:"col-md-3"},je=v((()=>(0,l._)("label",{class:"form-label"},"Fuel Used ",-1))),Ie={class:"col-md-10"},Ye=v((()=>(0,l._)("label",{class:"form-label"},"Target",-1))),Ke={class:"col-md-2"},Pe=v((()=>(0,l._)("label",{class:"form-label"},"Achieve Status",-1))),Be=v((()=>(0,l._)("option",{value:"Achieved"},"Achieved",-1))),Je=v((()=>(0,l._)("option",{value:"Not achieved"},"Not achieved",-1))),Ge=[Be,Je],Xe={class:"col-md-12"},Ze=v((()=>(0,l._)("label",{class:"form-label"},"Remark",-1))),Qe=v((()=>(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close"),(0,l._)("button",{type:"submit",class:"btn btn-secondary"},"Save changes")],-1))),ea={key:1},aa={class:"d-flex"},ta={class:"ms-auto"},la=v((()=>(0,l._)("h5",{class:"mb-3"},"Work Log Details",-1))),ra={class:"row g-3"},na={class:"col-md-6"},sa={class:"card p-3 h-100 text-start"},oa={class:"mb-2"},da=v((()=>(0,l._)("strong",null,"Date:",-1))),ia={class:"mb-2"},ca=v((()=>(0,l._)("strong",null,"Labourer Name:",-1))),ua={class:"mb-2"},va=v((()=>(0,l._)("strong",null,"Daily Wages:",-1))),ma={class:"mb-2"},ha=v((()=>(0,l._)("strong",null,"Advance:",-1))),ga={class:"col-md-6"},_a={class:"card p-3 h-100 text-start"},ya={class:"mb-2"},pa=v((()=>(0,l._)("strong",null,"Start Hour:",-1))),wa={class:"mb-2"},ba=v((()=>(0,l._)("strong",null,"End Hour:",-1))),ka={key:0,class:"mb-2"},xa=v((()=>(0,l._)("strong",null,"Machine:",-1))),fa={key:1,class:"mb-2"},Sa=v((()=>(0,l._)("strong",null,"Fuel Used :",-1))),Ha={class:"mb-2"},Da=v((()=>(0,l._)("strong",null,"Target:",-1))),Aa={class:"mb-2"},Ea=v((()=>(0,l._)("strong",null,"Status:",-1))),Ta={class:"col-12"},za={class:"card p-3 text-start"},Ua={class:"mb-2 text-start"},Ra=v((()=>(0,l._)("strong",null,"Activity:",-1))),$a=(0,l.Uk)(),Na={class:"text-muted"},Ca={class:"mb-2 text-start"},Ma=v((()=>(0,l._)("strong",null,"Remark:",-1))),La=(0,l.Uk)(),Oa={class:"text-muted"},Wa={key:0,class:"mb-2 text-start"},qa=v((()=>(0,l._)("strong",null,"MD's Remark:",-1))),Fa=(0,l.Uk)(),Va={class:"text-muted"},ja={key:0,class:"row mt-2"},Ia={class:"col-md-0"},Ya=v((()=>(0,l._)("label",{class:"form-label me-2"},"MD's Remark",-1))),Ka=v((()=>(0,l._)("div",{class:"text-center"},[(0,l._)("button",{type:"submit",class:"mt-2 text-center btn btn-primary"},"Send")],-1))),Pa=v((()=>(0,l._)("div",{class:"modal-footer mt-3"},[(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Close")],-1))),Ba={key:0,style:{"background-color":"yellow","padding-top":"1px"}},Ja={class:"mt-4 mb-1"},Ga=(0,l.Uk)("MD ANATAKA WATU WAKUTANE CONFERENCE ROOM KWA AJILI YA MKUTANO .ASANTENI"),Xa={key:0,class:"remark-modal-overlay"},Za={class:"remark-modal-container"},Qa=v((()=>(0,l._)("h5",{class:"remark-modal-title"},"Remark(s) On Weekly Allowance",-1))),et={class:"remark-modal-body"},at={class:"remark-sender"},tt={class:"remark-text"},lt={class:"remark-modal-footer"},rt={class:"remark-modal-buttons"},nt=["disabled"],st={key:1,class:"modal-backdrop fade show"};var ot={setup(e){(0,i.j)({title:"Weekly Allowance"});const a=(0,l.f3)("loadingIndicator"),t=(0,n.iH)(!1),c=(0,n.iH)(!1),v=(0,l.f3)("showMessage"),_=(0,l.f3)("showError"),O=(0,n.iH)(!1),W=(0,n.iH)(0),F=()=>{W.value+=1,W.value>=3?(O.value=!0,W.value=1):W.value<3&&(O.value=!1)},V=(0,d.yj)(),Be=e=>{if(!e?.weekly_work)return 0;let a=0;return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].forEach((t=>{const l=e.weekly_work[t];l&&"---"!==l&&("Achieved"===l.target?a+=1:"Not achieved"===l.target&&(a+=.5))})),parseFloat(a.toFixed(1))},Je=(0,n.iH)([]),ot=(0,n.iH)(""),dt=async()=>{rl.get("/machines").then((e=>{Array.isArray(e.data)?Je.value=e.data.map((e=>({id:e.id,name:e.name}))):(error_message.value="Error fetching machine data: "+error.message,console.error(error_message.value))})).catch((e=>{console.error("Error fetching machine data:",e.message)})).finally((()=>{}))},it=(0,n.iH)(""),ct=async()=>{rl.get(`/projects/${wt.value}`).then((e=>{it.value=e.data})).catch((e=>{console.error("Error fetching machine data:",e.message)})).finally((()=>{}))},ut=(0,n.iH)(!1),vt=(0,n.iH)(""),mt=(0,n.iH)(""),ht=(0,n.iH)(""),gt=(0,n.iH)(""),_t=(0,n.iH)(0),yt=(0,n.iH)(V.params.date),pt=(0,n.iH)(V.params.request_id),wt=(0,n.iH)(V.params.project_id),bt=(0,n.iH)(0),kt=(0,n.iH)(""),xt=(0,n.iH)(""),ft=(0,n.iH)("Not achieved"),St=(0,n.iH)(""),Ht=(0,n.iH)(""),Dt=(0,n.iH)(""),At=(0,n.iH)(""),Et=(0,n.iH)(),Tt=((0,n.iH)(0),e=>{const a=new Date(e);return a.toISOString().split("T")[0]}),zt=(0,n.iH)(""),Ut=(0,n.iH)(null),Rt=async e=>{confirm("Are you sure you want to delete this record ?")&&(c.value=!0,rl.delete(`daily-work-logs/${e}`).then((e=>{Vt(),ht.value="",Wt(),c.value=!1,200===e.status?v("Record Deleted Successfully"):(_("Fail to Delete Record"),console.error("Error delete record:",e.data.message))})).catch((e=>{_(e.message),console.error("Error deletion Record:",e)})))},$t=async()=>{c.value=!0,t.value=!1;const e={labour_id:xt.value,work_date:Tt(kt.value),start_hour:Dt.value,end_hour:At.value,machine_id:ot.value.id,machine:ot.value.name,fuel_used:Et.value,activity:St.value,target:ft.value,remark:Ht.value,target_description:zt.value,advance:Ut.value||0,request_id:pt.value};try{const a=await rl.post("daily-work-logs",e);201==a.status?(Vt(),Wt(),Ht.value="",v("Work log added Successfully"),ot.value="",Et.value=0,c.value=!1):(_("Failed to Add Work Log"),c.value=!1,console.error(error))}catch(error){c.value=!1,console.error("Error fetching work Log:",error),_(error.message)}},Nt=async e=>{const a={md_remark:Ht.value};Gt.value="For "+e.labour.designation+" "+e.labour.name+" on "+e.work_date+" , "+Ht.value;try{const t=await rl.patch(`daily-work-logs/${e.id}`,a);200==t.status?(Ht.value="",dl(),v("Remark added Succesfully"),Vt()):(Ht.value="",_("Failed to add Remark"),console.error(error))}catch(error){Ht.value="",console.error("Error Adding Remark:",error),_(error.message)}},Ct=(e,a,t)=>{bt.value=a,xt.value=e.id,vt.value=e.name,mt.value=e.designation,gt.value=e.rate,ht.value=e.labour_type,kt.value=t,Vt(),setTimeout((()=>{const e=document.getElementById("modal-"+a);if(e){const a=window.bootstrap?new window.bootstrap.Modal(e):null;a&&a.show()}}),100)},Mt=()=>{const e=yt.value?new Date(yt.value):new Date,a=e.getDay(),t=new Date(e);t.setDate(e.getDate()-(a-2+7)%7);const l=[];for(let r=0;r<7;r++){const e=new Date(t);e.setDate(t.getDate()+r),l.push(e.toISOString().split("T")[0])}return l},Lt=(0,n.iH)([]),Ot=(0,n.iH)([]),Wt=async()=>{c.value=!0;try{const e=await rl.get(`approved-labours?date=${yt.value}&request_id=${pt.value}`);Ot.value=e.data,Array.isArray(e.data)?Lt.value=ht.value?e.data.filter((e=>e.labour_type===ht.value)):e.data:Lt.value=[],c.value=!1}catch(error){c.value=!1,console.error("Error fetching labours:",error)}},qt=(0,n.iH)(""),Ft=(0,n.iH)(!1),Vt=async()=>{c.value=!0;try{const e=await rl.get(`day-work-log?labour_id=${xt.value}&work_date=${kt.value}`);qt.value=e.data,_t.value=qt.value.advance??0,Ft.value=!e.data||0===Object.keys(e.data).length,c.value=!1}catch(error){console.error("Error fetching work log:",error),c.value=!1}},jt=(0,n.iH)([]),It=async()=>{try{const e=await rl.get(`labours-work?request_id=${pt.value}`);jt.value=e.data}catch(error){console.error("Error fetching works:",error)}},Yt=async()=>{await It();const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const a=Mt(),t=e=>{const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getFullYear()).slice(-2);return`${t}.${l}.${r}`},l=yt.value.split("-"),r=`${l[1]}/${l[2].slice(-2)}`,n=Lt.value.filter((e=>Be(e)*Number(e.rate)-e.total_advance>0)),s=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>Weekly Wages Report</title>\n            <style>\n                body { font-family: Arial, sans-serif; margin: 20px; }\n        h1 { text-align: center; margin-bottom: 0; font-size: 22px; font-weight: bold; font-family: "Times New Roman", serif; }\n        h2 { text-align: center; margin: 0; font-size: 18px; font-family: "Times New Roman", serif;font-weight: normal; }\n        h3 { margin-top: 30px; font-size: 15px; }\n        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n        th, td { border: 1px solid black; padding: 5px; text-align: left; font-size: 15px; }\n        th { background-color: #f2f2f2; font-weight: bold; }\n        tr:nth-child(even) { background-color: #f9f9f9; }\n        .top-section { display: flex; justify-content: space-between; align-items: start; }\n        .logo { width: 150px; height: auto; }\n        .lpo-box {\n          border: 1px solid black;\n          border-radius: 5px;\n          padding: 5px;\n          font-size: 13px;\n          width: 120px;\n        }\n        .company-info { text-align: center; margin-top: 10px; }\n        .registration {\n          position: absolute;\n          top: 100px;\n          right: 30px;\n          font-size: 14px;\n          font-weight: bold;\n          text-align: right;\n        }\n        .section-title {\n          text-align: center;\n          text-decoration: underline;\n          font-family: "Times New Roman", serif;\n          font-weight: bold;\n          font-size: 17px;\n          margin-top: 30px;\n        }\n          </style>\n        </head>\n        <body>\n            <div class="top-section">\n        <img src="https://bushman.ink/copex.jpg" class="logo" alt="logo" />\n        <div class="lpo-box">\n          <strong>REQUEST NO:</strong><br>\n          <span style="color:red;">\n            ${("0000"+pt.value).slice(-4)} /${r}\n          </span>\n        </div>\n      </div>\n\n      <div class="company-info">\n        <h1>COPEX CONTRACTORS CO.LTD</h1>\n        <h2>Msamvu, P.O.BOX 678, Morogoro</h2>\n        <h2>Mobile, 0713 000 777, 0657 111 555</h2>\n      </div>\n\n      <div class="registration">\n        TIN: 103-826-519,<br>\n        VRN: 20-01-017530R\n      </div>\n\n      <div class="section-title" style="margin-bottom:10px">WEEKLY WAGES REPORT</div>\n\n                <table>\n                  <thead>\n                    <tr>\n                        <th class="text-start">WEEK</th>\n                        <th class="text-start">PROJECT</th>\n                        </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td class="text-start"> ${t(a[0])} to ${t(new Date(new Date(a[5]).getTime()+864e5))}</td>\n                      <td class="text-start">${it.value.short_name??"NO PROJECT "}</td>\n                    </tr>  \n                  </tbody>\n                </table>\n\n            <table>\n                <thead>\n                    <tr >\n                        <th>SN</th>\n                        <th>Name</th>\n                        ${["Tue","Wed","Thur","Friday","Sat","Sun","Mon"].map((e=>`<th>${e}</th>`)).join("")}\n                        <th>Days</th>\n                        <th>Advance</th>\n                        <th>Rate</th>\n                        <th>Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${n.map(((e,a)=>`\n                        <tr>\n                            <td class="text-start">${a+1}</td>\n                            <td class="text-start">${e.name}</td>\n                            ${["Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Monday"].map((a=>`\n                                <td class="text-center">\n                                    ${e.weekly_work?.[a]?.target||"-"}\n                                </td>\n                            `)).join("")}\n                            <td class="text-center">${Be(e)}</td>\n                            <td class="text-end">${Number(e.total_advance).toLocaleString()}/=</td>\n                            <td class="text-end">${Number(e.rate).toLocaleString()}/=</td>\n                            <td class="text-end">\n                                ${(Be(e)*Number(e.rate)-e.total_advance).toLocaleString()}/=\n                            </td>\n                        </tr>\n                    `)).join("")}\n                    <tr class="total-row">\n                        <td></td>\n                        <td></td>\n                        <td colspan="10" class="text-end">Grand Total:</td>\n                        <td class="text-end">\n                            ${n.reduce(((e,a)=>e+(Be(a)*Number(a.rate)-a.total_advance)),0).toLocaleString()}/=\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\n           <table style="width: 100%; margin-top: 50px; font-size: 10px;">\n        <tr>\n          <td style="text-align: center;">HR Officer</td>\n          <td style="text-align: center;">Operation's Dept</td>\n          <td style="text-align: center;">Engineer</td>\n          <td style="text-align: center;">Sr Accountant</td>\n          <td style="text-align: center;">Managing Director</td>\n        </tr>\n        <tr>\n          <td style="text-align: center;height: 50px; color: green'};">         \n          </td>\n             <td style="text-align: center;height: 50px; color: green'};">\n          </td>\n              <td style="text-align: center;height: 50px; color: green'};">            \n          </td>\n              <td style="text-align: center;height: 50px; color: green'};">\n          </td>\n              </td>\n              <td style="text-align: center;height: 50px; color: green'};">\n          </td>\n        </tr>\n      </table>\n            <div style="page-break-before: always;"></div>\n            <center>\n            <h3>LABOURS GENERAL WORKING REPORT</h3>\n            </center> \n            <table>\n                  <thead>\n                    <tr>\n                        <th>SN</th>\n                        <th>Name</th>\n                        <th>Machine</th>\n                        <th>Fuel Used</th>\n                        <th>Start Hour</th>\n                        <th>End Hour</th>\n                        <th>Activity</th>\n                        <th>Target</th>\n                        <th>Advance</th>\n                        <th>Date</th>\n                    </tr>\n                </thead>\n                <tbody>\n                  ${jt.value.map(((e,a)=>`\n  <tr>\n    <td>${a+1}</td>\n    <td>${e.labour?.name??"-"}</td>\n    <td>${e.machine?.name??"-"}</td>\n    <td>${e?.fuel_used?e.fuel_used+"Litres":"-"}</td>\n    <td>${e.start_hour??"-"}</td>\n    <td>${e.end_hour??"-"}</td>\n    <td>${e.activity??"-"}</td>\n    <td>${e.target??"-"}</td>\n    <td>${e.advance.toLocaleString()??"-"}</td>\n    <td>${e.created_at?new Date(e.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}):"-"}\n    </td>\n  </tr>\n`)).join("")}\n\n                </tbody>\n            </table>\n        </body>\n        </html>\n    `,o=e.contentWindow.document;o.open(),o.write(s),o.close(),e.onload=()=>{e.contentWindow.focus(),e.contentWindow.print(),setTimeout((()=>{document.body.removeChild(e)}),1e3)}},Kt=(0,n.iH)(null),Pt=(0,n.iH)([]);(0,l.bv)((()=>{const e=localStorage.getItem("user");Kt.value=JSON.parse(e),Pt.value=Kt.value.permissions,ct(),Wt(),dt(),ol()}));const Bt=(0,n.iH)(!1),Jt=(0,n.iH)([]),Gt=(0,n.iH)(""),Xt=(0,n.iH)(!1),Zt=(0,n.iH)(!1),Qt=JSON.parse(localStorage.getItem("user")).id,el=()=>{Bt.value=!0,tl(),document.body.style.overflow="hidden"},al=()=>{Bt.value=!1,Gt.value="",document.body.style.overflow=""},tl=async()=>{Zt.value=!0;try{const e=await rl.get(`remark?remark_type=allowance&week_date=${yt.value}`);e.data&&Array.isArray(e.data.data)?Jt.value=e.data.data:e.data&&Array.isArray(e.data)?Jt.value=e.data:Jt.value=[],setTimeout((()=>{const e=document.querySelector(".remark-modal-body");e&&(e.scrollTop=e.scrollHeight)}),100)}catch(error){console.error("Error fetching remarks:",error),_("Failed to load remarks")}finally{Zt.value=!1}},ll=async e=>{const a={status:"checked by "+JSON.parse(localStorage.getItem("user")).name};try{await rl.put(`/remark/${e}`,a);v("checked"),ol()}catch(error){console.error("Error:",error)}},rl=o.Z.create({baseURL:"https://bushman.ink/api/v1/"}),nl=(0,n.iH)(0),sl=(0,n.iH)([""]),ol=async()=>{try{const e=await rl.get("remark?remark_type=allowance");sl.value=e.data.data.filter((e=>"unchecked"===e.status)),nl.value=e.data.unchecked_count}catch(error){console.error("Error fetching allowance remark :",error),_("Failed to load allowance remark "+(error.response?.data?.message||error.message))}finally{Zt.value=!1}},dl=async()=>{if(Gt.value.trim()){Xt.value=!0;try{const e={remarker_id:Qt,description:Gt.value,remark_type:"allowance",type_id:0,week_date:yt.value,remarker:JSON.parse(localStorage.getItem("user")).name,created_at:(new Date).toISOString()},a=await rl.post("/remark",e);201!==a.status&&200!==a.status||(a.data?(ol(),Jt.value.push(a.data)):Jt.value.push(e),Gt.value="",setTimeout((()=>{const e=document.querySelector(".remark-modal-body");e&&(e.scrollTop=e.scrollHeight)}),100))}catch(error){console.error("Error saving remark:",error),_("Failed to save remark")}finally{Xt.value=!1}}else _("Remark cannot be empty")};return(0,l.YP)(yt,(()=>{Bt.value&&tl()})),(e,t)=>{const o=(0,l.up)("marquee");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",m,[(0,l._)("div",h,[g,(0,l._)("button",{class:"btn btn-dark px-3",onClick:t[0]||(t[0]=a=>e.$router.go(-1))},y)]),(0,l._)("div",p,[(0,l._)("div",w,[(0,l._)("div",b,[0!=nl.value?((0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("div",x,[(0,l._)("div",f,[(0,l._)("a",S,[H,(0,l._)("span",D,(0,r.zw)(nl.value),1)]),(0,l._)("ul",A,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(sl.value,(e=>((0,l.wg)(),(0,l.iD)("li",E,[(0,l._)("div",T,[z,(0,l._)("div",U,[(0,l._)("div",R,[(0,l._)("h6",$,"From : "+(0,r.zw)(e.sender_name),1),(0,l._)("p",N,[(0,l.Uk)((0,r.zw)(e.description)+" ",1),(0,l._)("button",{class:"btn btn-success p-1 btn-sm me-1",style:{cursor:"pointer"},onClick:a=>ll(e.id)},"✔",8,C)])])])])])))),256))])])])])):(0,l.kq)("",!0)]),(0,l._)("div",null,[(0,l._)("div",M,[(0,l._)("h4",{class:"budgets-title",onClick:t[1]||(t[1]=e=>F())},"WEEKLY ALLOWANCE"),(0,l._)("h5",L,"PROJECT : "+(0,r.zw)(it.value.short_name),1)]),(0,l._)("div",{class:"d-flex align-items-center"},[(0,l._)("div",{class:"ms-auto"},[(0,l._)("button",{class:"btn btn-success me-2",onClick:Yt},q),(0,l._)("button",{class:"btn btn-info me-2",onClick:el,title:"Add Remark"},j)])]),c.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,n.SU)(a)()},null,8,I)):(0,l.kq)("",!0),(0,l._)("div",Y,[(0,l._)("table",K,[P,(0,l._)("tbody",null,[(0,l._)("tr",null,[B,J,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Mt(),((e,a)=>((0,l.wg)(),(0,l.iD)("td",{key:"date-"+a,class:"text-center text-muted small"},(0,r.zw)(e),1)))),128)),G,X,Z]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Lt.value,((e,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",Q,(0,r.zw)(a+1),1),(0,l._)("td",ee,(0,r.zw)(e.name),1),((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(["Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Monday"],((a,t)=>(0,l._)("td",{key:a,class:"text-center",onClick:a=>Ct(e,e.id,Mt()[t])},[(0,l._)("span",te,[e.weekly_work&&e.weekly_work[a]&&"---"!==e.weekly_work[a].hours?((0,l.wg)(),(0,l.iD)("span",le,[(0,l._)("span",{class:(0,r.C_)(["badge px-2","Achieved"===e.weekly_work[a].target?"bg-success":"bg-danger"])},(0,r.zw)(e.weekly_work[a].target),3)])):((0,l.wg)(),(0,l.iD)("span",re))])],8,ae))),64)),(0,l._)("td",ne,(0,r.zw)(Be(e)),1),(0,l._)("td",se,(0,r.zw)(Number(e.total_advance).toLocaleString())+"/=",1),(0,l._)("td",oe,(0,r.zw)(Number(e.rate).toLocaleString())+"/=",1),(0,l._)("td",de,(0,r.zw)((Number(e.rate)*Be(e)-e.total_advance).toLocaleString())+"/= ",1)])))),128))])])])])])]),(0,l._)("div",null,[(0,l._)("div",{class:"modal fade custom-backdrop mymodal","data-bs-backdrop":"false",id:"modal-"+bt.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,l._)("div",ce,[(0,l._)("div",ue,[ve,(0,l._)("div",me,[c.value?((0,l.wg)(),(0,l.iD)("div",{key:0,innerHTML:(0,n.SU)(a)()},null,8,he)):((0,l.wg)(),(0,l.iD)("div",ge,[(0,l._)("div",_e,[(0,l._)("div",ye,[(0,l._)("div",pe,[we,(0,l._)("div",be,(0,r.zw)(kt.value),1)]),(0,l._)("div",ke,[xe,(0,l._)("div",fe,(0,r.zw)(vt.value),1)]),(0,l._)("div",Se,[He,(0,l._)("div",De,(0,r.zw)(gt.value.toLocaleString())+"/=",1)]),(0,l._)("div",Ae,[Ee,(0,l._)("div",Te,[(0,l.wy)((0,l._)("input",{type:"checkbox",class:"form-check-input",id:"exampleCheck1","onUpdate:modelValue":t[2]||(t[2]=e=>ut.value=e)},null,512),[[s.e8,ut.value]]),(0,l.Uk)(" "+(0,r.zw)(ut.value?"Yes":"No"),1)])])]),ze]),Ft.value?((0,l.wg)(),(0,l.iD)("form",{key:0,onSubmit:t[12]||(t[12]=(0,s.iM)((e=>$t()),["prevent"]))},[(0,l._)("div",Ue,[(0,l._)("div",Re,[$e,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>Ut.value=e),placeholder:"Advance"},null,512),[[s.nr,Ut.value]])]),(0,l._)("div",Ne,[Ce,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>St.value=e),required:"",placeholder:"Enter activity"},null,512),[[s.nr,St.value]])]),ut.value?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",Me,[Le,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>Dt.value=e),required:"",placeholder:"Odometer Reading /Time in"},null,512),[[s.nr,Dt.value]])]),(0,l._)("div",Oe,[We,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>At.value=e),required:"",placeholder:"Odometer Reading /Time out"},null,512),[[s.nr,At.value]])]),(0,l._)("div",qe,[Fe,(0,l.Wm)((0,n.SU)(u()),{modelValue:ot.value,"onUpdate:modelValue":t[7]||(t[7]=e=>ot.value=e),searchable:!0,options:Je.value,multiple:!1,required:"","track-by":"id",label:"name",placeholder:"Select A Machine "},null,8,["modelValue","options"])]),(0,l._)("div",Ve,[je,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:"enter fuel used","onUpdate:modelValue":t[8]||(t[8]=e=>Et.value=e),required:"",step:"any"},null,512),[[s.nr,Et.value]])])],64)):(0,l.kq)("",!0),(0,l._)("div",Ie,[Ye,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>zt.value=e),required:"",placeholder:"Enter Target"},null,512),[[s.nr,zt.value]])]),(0,l._)("div",Ke,[Pe,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>ft.value=e),class:"form-control",required:""},Ge,512),[[s.bM,ft.value]])]),(0,l._)("div",Xe,[Ze,(0,l.wy)((0,l._)("textarea",{placeholder:"Enter Remark",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=e=>Ht.value=e)},null,512),[[s.nr,Ht.value]])])]),Qe],32)):((0,l.wg)(),(0,l.iD)("div",ea,[(0,l._)("div",aa,[(0,l._)("div",ta,[(0,l._)("button",{class:"btn btn-danger",onClick:t[13]||(t[13]=e=>Rt(qt.value.id))},"Clear Record")])]),la,(0,l._)("div",ra,[(0,l._)("div",na,[(0,l._)("div",sa,[(0,l._)("div",oa,[da,(0,l.Uk)(" "+(0,r.zw)(qt.value.work_date),1)]),(0,l._)("div",ia,[ca,(0,l.Uk)(" "+(0,r.zw)(vt.value),1)]),(0,l._)("div",ua,[va,(0,l.Uk)(" "+(0,r.zw)(gt.value.toLocaleString())+"/=",1)]),(0,l._)("div",ma,[ha,(0,l.Uk)(" "+(0,r.zw)(_t.value.toLocaleString())+"/=",1)])])]),(0,l._)("div",ga,[(0,l._)("div",_a,[(0,l._)("div",ya,[pa,(0,l.Uk)(" "+(0,r.zw)(qt.value.start_hour),1)]),(0,l._)("div",wa,[ba,(0,l.Uk)(" "+(0,r.zw)(qt.value.end_hour),1)]),null!==qt.value.machine?((0,l.wg)(),(0,l.iD)("div",ka,[xa,(0,l.Uk)(" "+(0,r.zw)(qt.value.machine),1)])):(0,l.kq)("",!0),0!=qt.value.fuel_used?((0,l.wg)(),(0,l.iD)("div",fa,[Sa,(0,l.Uk)(" "+(0,r.zw)(qt.value.fuel_used)+" Litres",1)])):(0,l.kq)("",!0),(0,l._)("div",Ha,[Da,(0,l.Uk)(" "+(0,r.zw)(qt.value.target_description),1)]),(0,l._)("div",Aa,[Ea,(0,l.Uk)(" "+(0,r.zw)(qt.value.target),1)])])]),(0,l._)("div",Ta,[(0,l._)("div",za,[(0,l._)("div",Ua,[Ra,$a,(0,l._)("span",Na,(0,r.zw)(qt.value.activity),1)]),(0,l._)("div",Ca,[Ma,La,(0,l._)("span",Oa,(0,r.zw)(qt.value.remark),1)]),null!==qt.value.md_remark?((0,l.wg)(),(0,l.iD)("div",Wa,[qa,Fa,(0,l._)("span",Va,(0,r.zw)(qt.value.md_remark),1)])):(0,l.kq)("",!0)])])]),null===qt.value.md_remark&&Pt.value.includes("is_md")?((0,l.wg)(),(0,l.iD)("div",ja,[(0,l._)("div",Ia,[(0,l._)("form",{onSubmit:t[15]||(t[15]=(0,s.iM)((e=>Nt(qt.value)),["prevent"]))},[Ya,(0,l.wy)((0,l._)("textarea",{placeholder:"Enter Remark",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=e=>Ht.value=e),required:""},null,512),[[s.nr,Ht.value]]),Ka],32)])])):(0,l.kq)("",!0),Pa]))]))])])])],8,ie),O.value?((0,l.wg)(),(0,l.iD)("div",Ba,[(0,l._)("h4",Ja,[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[Ga])),_:1})])])):(0,l.kq)("",!0)])]),Bt.value?((0,l.wg)(),(0,l.iD)("div",Xa,[(0,l._)("div",Za,[(0,l._)("div",{class:"remark-modal-header"},[Qa,(0,l._)("button",{type:"button",class:"remark-modal-close",onClick:al},"×")]),(0,l._)("div",et,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Jt.value,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a,class:"remark-message-container"},[(0,l._)("div",{class:(0,r.C_)(["remark-message",e.remarker_id==(0,n.SU)(Qt)?"remark-message-own":"remark-message-other"])},[(0,l._)("div",at,(0,r.zw)(e.remarker_id==(0,n.SU)(Qt)?"You":e.remarker||e.sender_name),1),(0,l._)("div",tt,(0,r.zw)(e.description),1)],2)])))),128))]),(0,l._)("div",lt,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>Gt.value=e),class:"remark-input",placeholder:"Enter your remark"},null,512),[[s.nr,Gt.value]]),(0,l._)("div",rt,[(0,l._)("button",{class:"remark-btn remark-btn-close",onClick:al},"Close"),(0,l._)("button",{class:"remark-btn remark-btn-save",onClick:dl,disabled:Xt.value||!Gt.value.trim()}," Save ",8,nt)])])])])):(0,l.kq)("",!0),Bt.value?((0,l.wg)(),(0,l.iD)("div",st)):(0,l.kq)("",!0)],64)}}},dt=t(83744);const it=(0,dt.Z)(ot,[["__scopeId","data-v-4a81d400"]]);var ct=it}}]);
//# sourceMappingURL=5332.340fcb19.js.map