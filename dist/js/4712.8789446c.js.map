{"version":3,"file":"js/4712.8789446c.js","mappings":"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","sources":["webpack://cork-vue3/./src/components/reusables/globalSearch.js","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue","webpack://cork-vue3/./src/components/reusables/globalSearchField.vue?f760","webpack://cork-vue3/./src/views/goodIssueNotes/goodDeliveryNote.vue","webpack://cork-vue3/./src/views/goodIssueNotes/goodDeliveryNote.vue?6ffb"],"sourcesContent":["export function globalSearch(data, keyword) {\r\n  const lowerKeyword = keyword.toLowerCase().trim()\r\n  if (!lowerKeyword) return data\r\n\r\n  const containsKeyword = obj => {\r\n    if (obj == null) return false\r\n    if (typeof obj === 'string') return obj.toLowerCase().includes(lowerKeyword)\r\n    if (Array.isArray(obj)) return obj.some(containsKeyword)\r\n    if (typeof obj === 'object')\r\n      return Object.values(obj).some(containsKeyword)\r\n    return false\r\n  }\r\n\r\n  return data.filter(item => containsKeyword(item))\r\n}","<template>\r\n     <form @submit.prevent class=\"input-group container\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control border-end-0\"\r\n      placeholder=\"Search a word...\"\r\n      v-model=\"filter\"\r\n    >\r\n    <span class=\"input-group-text bg-white border-start-0\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" fill=\"currentColor\" class=\"bi bi-search\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442.656a5 5 0 1 1 \r\n        0-10 5 5 0 0 1 0 10z\"/>\r\n      </svg>\r\n    </span>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\n\r\n\r\nconst emit = defineEmits(['update:filterValue'])\r\nconst props = defineProps({\r\n  filterValue: String\r\n})\r\nconst filter = ref(props.filterValue || null)\r\n\r\nwatch(filter, val => emit('update:filterValue', val))\r\n</script>\r\n","import script from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./globalSearchField.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"layout-px-spacing\">  \r\n            <ul class=\"navbar-nav flex-row mt-2\">\r\n                <li>\r\n                    <div class=\"page-header\">\r\n                        <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\r\n                            <ol class=\"breadcrumb\">\r\n                                <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Masters</a></li>\r\n                                <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Requisitions</span></li>\r\n                            </ol>\r\n                        </nav>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n     \r\n   <h4 class=\"text-center flex-grow-1\">GOOD DELIVERY NOTES</h4>\r\n     <globalSearchField\r\n            v-model:filterValue=\"filter\"\r\n      />\r\n                           <!-- loading spinner starts -->\r\n                 <div v-if=\"loading\" v-html=\"tableShimmer()\"></div>\r\n        \r\n        <div v-else class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"filteredData\" :columns=\"columns\" :options=\"table_option\" >\r\n                   \r\n                          <template #issue_no=\"props\">\r\n                             <a \r\n                                    href=\"javascript:;\"  title=\"Click To see Issue Note\">\r\n                            <span class=\"text-primary\"\r\n                             data-bs-toggle=\"modal\" \r\n                             data-bs-target=\"#issue_note\"\r\n                             @click=\"fillModal(props.row)\">\r\n                                 {{ props.row.issue_no }}\r\n                            </span>\r\n                          </a>\r\n                          </template>\r\n                            <template #actions=\"props\">\r\n                                <div class=\"d-flex justify-content-center align-items-center\"></div>\r\n                                    <a \r\n                                    href=\"javascript:;\" class=\"edit me-2\" \r\n                                            data-bs-toggle=\"modal\" \r\n                                            data-bs-target=\"#delivery_note\"\r\n                                                @click=\"fillModal(props.row)\"\r\n                                    >\r\n                                            \r\n\r\n                                                <svg\r\n                                                 xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"text-primary bi bi-eye\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z\"/>\r\n        <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0\"/>\r\n    </svg>\r\n                                    </a>\r\n\r\n                            </template>\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n          \r\n\r\n<!-- Delivery note modal starts -->\r\n             <div class=\"modal fade mymodal\" id=\"delivery_note\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">GOOD DELIVERY NOTES</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\" ></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n     <div class=\"row\">\r\n     <div class=\"col-md-4\">   \r\n      <h2 class=\"modal-title fs-5\" > Issue No : {{ deliveryNote.issue_no }}</h2>\r\n    </div>\r\n    <div class=\"col-md-4\">   \r\n      <h2 class=\"modal-title fs-5\" > Issuer : {{ deliveryNote.issued_by }}</h2>\r\n    </div>\r\n       <div class=\"col-md-4\">   \r\n      <h2 class=\"modal-title fs-5\" > Receiver : {{ deliveryNote.received_by }}</h2>\r\n    </div>\r\n  </div>\r\n<div\r\nv-if=\"deliveryNote.remark\"\r\nclass=\"card p-3 mb-3 shadow-sm text-start\">\r\n  <strong>Remark:  {{ deliveryNote.remark }} </strong>\r\n</div>\r\n\r\n    <div v-else class=\"input-group\" \r\n    v-if=\"user_permissions.includes('is_md')\"\r\n    >\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control\"\r\n      placeholder=\"Enter Remark\"\r\n      v-model=\"remark\"\r\n    >\r\n    <button class=\"btn btn-primary\" type=\"button\" :disabled=\"sending\" @click=\"fillRemark(requisition)\">\r\n      <span v-if=\"sending\" v-html=\"loadingSpinner()\"></span>\r\n      <span v-else>Save</span>\r\n    </button>\r\n  </div>\r\n\r\n        <div  class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"items\" :columns=\"itemColumns\" :options=\"table_option\" >\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<!-- Delivery note modal ends -->\r\n <!-- issue note modal starts -->\r\n               <div class=\"modal fade mymodal\" id=\"issue_note\" data-bs-backdrop=\"false\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-xl\">\r\n    <div class=\"modal-content\" >\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">GOOD ISSUE NOTES DETAILS</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"close\" ></button>\r\n      </div>\r\n<div class=\"modal-body\" >\r\n  <div class=\"row\">\r\n     <div class=\"col-md-2\">   \r\n      <h2 class=\"modal-title fs-5\" > Issue No : {{ deliveryNote.issue_no }}</h2>\r\n    </div>\r\n    <div class=\"col-md-5\">   \r\n      <h2 class=\"modal-title fs-5\" > Issuer : {{ deliveryNote.issued_by }}</h2>\r\n    </div>\r\n    <div class=\"col-md-5\">\r\n            <h2 class=\"modal-title fs-5\" > Issued Date : {{ deliveryNote.date_issued }}</h2>\r\n\r\n    </div>\r\n  </div>\r\n        <div  class=\"row layout-top-spacing\">\r\n            <div class=\"col-xl-12 col-lg-12 col-sm-12 layout-spacing\">\r\n                <div class=\"panel p-0\">\r\n                    <div class=\"custom-table table3\">\r\n                        <v-client-table :data=\"items\" :columns=\"issueItemColumns\" :options=\"table_option\" >\r\n                        </v-client-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-danger btn-sm py-2 px-2\" data-bs-dismiss=\"modal\">Close</button>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n  <!-- issue note modal ends -->\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    \r\n\r\n    import { onMounted, ref,inject,computed } from 'vue';\r\n    import axios from 'axios';\r\n    import { useMeta } from '@/composables/use-meta';\r\n    import '@/assets/sass/scrollspyNav.scss';\r\n    import globalSearchField from '@/components/reusables/globalSearchField.vue';\r\n    import { globalSearch } from '@/components/reusables/globalSearch';\r\n\r\n    useMeta({ title: 'Good Delivery Note' });\r\n    \r\n    const axiosInstance = axios.create({\r\n        baseURL: process.env.VUE_APP_API_BASE_URL\r\n    });\r\n     const user_permissions = JSON.parse(localStorage.getItem(\"user\")).permissions;\r\n     const showMessage = inject('showMessage');\r\n     const filter = ref('')\r\n     \r\n         const filteredData = computed(() => {\r\n  return globalSearch(deliveryNotes.value, filter.value);\r\n});\r\n        const table_option = ref({\r\n        perPage: 50,\r\n        perPageValues: [ 50 ,100, 200],\r\n        skin: 'table table-hover table-striped',\r\n        columnsClasses: { actions: 'actions text-center' },\r\n        sortable: ['SNo', 'name','short_name','status'],\r\n        sortIcon: {\r\n            base: 'sort-icon-none',\r\n            up: 'sort-icon-asc',\r\n            down: 'sort-icon-desc',\r\n        },\r\n        pagination: { nav: 'scroll', chunk: 5 },\r\n        texts: {\r\n            count: 'Showing {from} to {to} of {count}',\r\n            filter: '',\r\n            filterPlaceholder: 'Search...',\r\n            limit: 'Results:',\r\n        },\r\n        resizableColumns: false,\r\n    });\r\n    const deliveryNote = ref('')\r\n    const items = ref([])\r\nconst fillModal = (row) =>{\r\ndeliveryNote.value = row\r\nitems.value = row.items.map((data,index)=>({\r\n  ...data,\r\n  Sno : index + 1,\r\n  item : data.gin_item.requisition_item.remark,\r\n  unit : data.gin_item.requisition_item.units,\r\n  issued : data.gin_item.quantity,\r\n  received : data.quantity\r\n}))\r\n}\r\n\r\n     const tableShimmer = inject('tableShimmer');\r\n     const showError = inject('showError');\r\n      const loadingSpinner = inject('loadingSpinner');\r\n      const formatDate = inject('formatDate');\r\n    const columns = ref(['Sno','issue_no','delivery_no', 'issued_by','date_issued','received_by','date_received','remark', 'actions']);\r\n    const itemColumns = ref(['Sno', 'item','unit','issued','received']);\r\n    const issueItemColumns = ref(['Sno', 'item','unit','issued']);\r\n\r\n const loading = ref(false)\r\n    const deliveryNotes = ref([])\r\n  const getDeliveryNotes = async () =>{\r\n    loading.value = true\r\n    try{\r\n    const response = await axiosInstance.get('good-delivery-notes')\r\n    deliveryNotes.value = response.data.map((item,index)=>({\r\n      ...item,\r\n      Sno : index + 1,\r\n      issue_no : item.gin.id,\r\n      delivery_no : item.id,\r\n      issued_by : item.gin.issuer.name,\r\n      issuer_email : item.gin.issuer.email,\r\n      date_issued :  formatDate(item.gin.issuer.created_at),\r\n      received_by :  item.receiver.name,\r\n      date_received :  formatDate(item.created_at),\r\n    }))\r\n    }catch(error){\r\n      showError(error.message)\r\n      console.log(error)\r\n    }finally{\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const sending = ref(false)\r\n  const remark = ref('')\r\n  const fillRemark = async () =>{\r\n    sending.value = true\r\n     const payload = {\r\n      remark : remark.value\r\n     }\r\n    try{\r\n      const response = await axiosInstance.put(`good-delivery-notes/${deliveryNote.value.id}`,payload)\r\n      deliveryNote.value.remark = remark.value\r\n      remark.value = ''\r\n      getDeliveryNotes()\r\n    }catch(error){\r\n      showError(error.message)\r\n    }finally{\r\n      sending.value = false\r\n    }\r\n  }\r\n    onMounted(async () => {\r\n        getDeliveryNotes();\r\n    });\r\n</script>\r\n\r\n","import script from \"./goodDeliveryNote.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./goodDeliveryNote.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["globalSearch","data","keyword","lowerKeyword","toLowerCase","trim","containsKeyword","obj","includes","Array","isArray","some","Object","values","filter","item","ref","props","filterValue","watch","val","emit","__exports__","useMeta","title","axiosInstance","axios","baseURL","process","user_permissions","JSON","parse","localStorage","getItem","permissions","inject","filteredData","computed","deliveryNotes","value","table_option","perPage","perPageValues","skin","columnsClasses","actions","sortable","sortIcon","base","up","down","pagination","nav","chunk","texts","count","filterPlaceholder","limit","resizableColumns","deliveryNote","items","fillModal","row","map","index","Sno","gin_item","requisition_item","remark","unit","units","issued","quantity","received","tableShimmer","showError","loadingSpinner","formatDate","columns","itemColumns","issueItemColumns","loading","getDeliveryNotes","async","response","get","issue_no","gin","id","delivery_no","issued_by","issuer","name","issuer_email","email","date_issued","created_at","received_by","receiver","date_received","error","message","console","log","sending","fillRemark","payload","put","onMounted"],"sourceRoot":""}